From 75972d39ce1d1ecc2790390f4c266c63bb543f22 Mon Sep 17 00:00:00 2001
From: Liming Wang <liming.wang@windriver.com>
Date: Tue, 18 Jan 2011 16:10:17 +0800
Subject: [PATCH 6/6] BFS: remove cpuset_lock/cpuset_unlock

in upstream commit 897f0b3c3ff40b (which is merged):
"sched: Kill the broken and deadlockable
cpuset_lock/cpuset_cpus_allowed_locked code",
cpuset_lock and cpuset_unlock have been removed, so remove it from BFS.

Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 kernel/sched_bfs.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/kernel/sched_bfs.c b/kernel/sched_bfs.c
index 39a7723..048a95f 100644
--- a/kernel/sched_bfs.c
+++ b/kernel/sched_bfs.c
@@ -5007,7 +5007,6 @@ migration_call(struct notifier_block *nfb, unsigned long action, void *hcpu)
 
 	case CPU_DEAD:
 	case CPU_DEAD_FROZEN:
-		cpuset_lock(); /* around calls to cpuset_cpus_allowed_lock() */
 		idle = rq->idle;
 		/* Idle task back to normal (off runqueue, low prio) */
 		grq_lock_irq();
@@ -5018,7 +5017,6 @@ migration_call(struct notifier_block *nfb, unsigned long action, void *hcpu)
 		set_rq_task(rq, idle);
 		update_clocks(rq);
 		grq_unlock_irq();
-		cpuset_unlock();
 		break;
 
 	case CPU_DYING:
-- 
1.6.5.2

