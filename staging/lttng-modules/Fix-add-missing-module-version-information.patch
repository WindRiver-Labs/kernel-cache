From a82bc21db88eb8a067c12d89009719728de09379 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Wed, 2 Apr 2014 11:53:30 -0400
Subject: [PATCH 591/625] Fix: add missing module version information

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 drivers/staging/lttng2/lib/ringbuffer/ring_buffer_vfs.c          | 5 +++++
 drivers/staging/lttng2/lttng-context-hostname.c                  | 4 ++++
 drivers/staging/lttng2/lttng-context-nice.c                      | 4 ++++
 drivers/staging/lttng2/lttng-context-perf-counters.c             | 4 ++++
 drivers/staging/lttng2/lttng-context-pid.c                       | 4 ++++
 drivers/staging/lttng2/lttng-context-ppid.c                      | 4 ++++
 drivers/staging/lttng2/lttng-context-prio.c                      | 4 ++++
 drivers/staging/lttng2/lttng-context-procname.c                  | 4 ++++
 drivers/staging/lttng2/lttng-context-tid.c                       | 4 ++++
 drivers/staging/lttng2/lttng-context-vpid.c                      | 4 ++++
 drivers/staging/lttng2/lttng-context-vppid.c                     | 4 ++++
 drivers/staging/lttng2/lttng-context-vtid.c                      | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-client-discard.c        | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-client-mmap-discard.c   | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-client-mmap-overwrite.c | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-client-overwrite.c      | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-metadata-client.c       | 4 ++++
 drivers/staging/lttng2/lttng-ring-buffer-metadata-mmap-client.c  | 4 ++++
 drivers/staging/lttng2/lttng-statedump-impl.c                    | 5 +++++
 drivers/staging/lttng2/probes/lttng-ftrace.c                     | 4 ++++
 drivers/staging/lttng2/probes/lttng-kprobes.c                    | 4 ++++
 drivers/staging/lttng2/probes/lttng-kretprobes.c                 | 4 ++++
 drivers/staging/lttng2/probes/lttng-probe-asoc.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-block.c                | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-btrfs.c                | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-compaction.c           | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-ext3.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-ext4.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-gpio.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-irq.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-jbd.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-jbd2.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-kmem.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-kvm-x86-mmu.c          | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-kvm-x86.c              | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-kvm.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-lock.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-module.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-napi.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-net.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-power.c                | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-printk.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-random.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-rcu.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-regmap.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-regulator.c            | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-rpm.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-sched.c                | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-scsi.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-signal.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-skb.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-sock.c                 | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-statedump.c            | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-sunrpc.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-timer.c                | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-udp.c                  | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-vmscan.c               | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-workqueue.c            | 5 +++++
 drivers/staging/lttng2/probes/lttng-probe-writeback.c            | 5 +++++
 drivers/staging/lttng2/probes/lttng-types.c                      | 5 +++++
 60 files changed, 280 insertions(+)

diff --git a/drivers/staging/lttng2/lib/ringbuffer/ring_buffer_vfs.c b/drivers/staging/lttng2/lib/ringbuffer/ring_buffer_vfs.c
index dae73de..4389b5f 100644
--- a/drivers/staging/lttng2/lib/ringbuffer/ring_buffer_vfs.c
+++ b/drivers/staging/lttng2/lib/ringbuffer/ring_buffer_vfs.c
@@ -28,6 +28,7 @@
 #include "../../wrapper/ringbuffer/frontend.h"
 #include "../../wrapper/ringbuffer/vfs.h"
 #include "../../wrapper/poll.h"
+#include "../../lttng-tracer.h"
 
 static int put_ulong(unsigned long val, unsigned long arg)
 {
@@ -448,3 +449,7 @@ EXPORT_SYMBOL_GPL(lib_ring_buffer_file_operations);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Ring Buffer Library VFS");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-hostname.c b/drivers/staging/lttng2/lttng-context-hostname.c
index 7cf7f7c..4ecee63 100644
--- a/drivers/staging/lttng2/lttng-context-hostname.c
+++ b/drivers/staging/lttng2/lttng-context-hostname.c
@@ -97,3 +97,7 @@ EXPORT_SYMBOL_GPL(lttng_add_hostname_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Perf Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-nice.c b/drivers/staging/lttng2/lttng-context-nice.c
index 974910d..ea4f2ac 100644
--- a/drivers/staging/lttng2/lttng-context-nice.c
+++ b/drivers/staging/lttng2/lttng-context-nice.c
@@ -79,3 +79,7 @@ EXPORT_SYMBOL_GPL(lttng_add_nice_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Nice Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-perf-counters.c b/drivers/staging/lttng2/lttng-context-perf-counters.c
index d65f690..2c67ecf 100644
--- a/drivers/staging/lttng2/lttng-context-perf-counters.c
+++ b/drivers/staging/lttng2/lttng-context-perf-counters.c
@@ -283,3 +283,7 @@ error_attr:
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Perf Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-pid.c b/drivers/staging/lttng2/lttng-context-pid.c
index cb64ff1..3671259 100644
--- a/drivers/staging/lttng2/lttng-context-pid.c
+++ b/drivers/staging/lttng2/lttng-context-pid.c
@@ -79,3 +79,7 @@ EXPORT_SYMBOL_GPL(lttng_add_pid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit PID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-ppid.c b/drivers/staging/lttng2/lttng-context-ppid.c
index 878c688..9cb3133 100644
--- a/drivers/staging/lttng2/lttng-context-ppid.c
+++ b/drivers/staging/lttng2/lttng-context-ppid.c
@@ -91,3 +91,7 @@ EXPORT_SYMBOL_GPL(lttng_add_ppid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit PPID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-prio.c b/drivers/staging/lttng2/lttng-context-prio.c
index fa30ab5..133748e 100644
--- a/drivers/staging/lttng2/lttng-context-prio.c
+++ b/drivers/staging/lttng2/lttng-context-prio.c
@@ -100,3 +100,7 @@ EXPORT_SYMBOL_GPL(lttng_add_prio_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Priority Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-procname.c b/drivers/staging/lttng2/lttng-context-procname.c
index e9f33a1..2efd3cd 100644
--- a/drivers/staging/lttng2/lttng-context-procname.c
+++ b/drivers/staging/lttng2/lttng-context-procname.c
@@ -83,3 +83,7 @@ EXPORT_SYMBOL_GPL(lttng_add_procname_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Perf Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-tid.c b/drivers/staging/lttng2/lttng-context-tid.c
index de745de..b4e6695 100644
--- a/drivers/staging/lttng2/lttng-context-tid.c
+++ b/drivers/staging/lttng2/lttng-context-tid.c
@@ -79,3 +79,7 @@ EXPORT_SYMBOL_GPL(lttng_add_tid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit TID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-vpid.c b/drivers/staging/lttng2/lttng-context-vpid.c
index 14364b3..0b498b4 100644
--- a/drivers/staging/lttng2/lttng-context-vpid.c
+++ b/drivers/staging/lttng2/lttng-context-vpid.c
@@ -85,3 +85,7 @@ EXPORT_SYMBOL_GPL(lttng_add_vpid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit vPID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-vppid.c b/drivers/staging/lttng2/lttng-context-vppid.c
index e36b555..f723a5c 100644
--- a/drivers/staging/lttng2/lttng-context-vppid.c
+++ b/drivers/staging/lttng2/lttng-context-vppid.c
@@ -100,3 +100,7 @@ EXPORT_SYMBOL_GPL(lttng_add_vppid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit vPPID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-context-vtid.c b/drivers/staging/lttng2/lttng-context-vtid.c
index c98bdf1..31f4039 100644
--- a/drivers/staging/lttng2/lttng-context-vtid.c
+++ b/drivers/staging/lttng2/lttng-context-vtid.c
@@ -85,3 +85,7 @@ EXPORT_SYMBOL_GPL(lttng_add_vtid_to_ctx);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit vTID Context");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-client-discard.c b/drivers/staging/lttng2/lttng-ring-buffer-client-discard.c
index 52eb811..0038f11 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-client-discard.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-client-discard.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Client Discard Mode");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-discard.c b/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-discard.c
index 11d0449..6d1d76f 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-discard.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-discard.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Client Discard Mode");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-overwrite.c b/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-overwrite.c
index d68847a..8164e2a 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-overwrite.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-client-mmap-overwrite.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Client Overwrite Mode");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-client-overwrite.c b/drivers/staging/lttng2/lttng-ring-buffer-client-overwrite.c
index 10de68f..ab6b7a4 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-client-overwrite.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-client-overwrite.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Client Overwrite Mode");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-metadata-client.c b/drivers/staging/lttng2/lttng-ring-buffer-metadata-client.c
index 2ad3d4e..c177d45 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-metadata-client.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-metadata-client.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Metadata Client");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-ring-buffer-metadata-mmap-client.c b/drivers/staging/lttng2/lttng-ring-buffer-metadata-mmap-client.c
index 3c6e81f..14ffa3a 100644
--- a/drivers/staging/lttng2/lttng-ring-buffer-metadata-mmap-client.c
+++ b/drivers/staging/lttng2/lttng-ring-buffer-metadata-mmap-client.c
@@ -31,3 +31,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("LTTng Ring Buffer Metadata Client");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/lttng-statedump-impl.c b/drivers/staging/lttng2/lttng-statedump-impl.c
index a633657..40eab8e 100644
--- a/drivers/staging/lttng2/lttng-statedump-impl.c
+++ b/drivers/staging/lttng2/lttng-statedump-impl.c
@@ -47,6 +47,7 @@
 #include <linux/mutex.h>
 
 #include "lttng-events.h"
+#include "lttng-tracer.h"
 #include "wrapper/irqdesc.h"
 #include "wrapper/spinlock.h"
 #include "wrapper/fdtable.h"
@@ -448,3 +449,7 @@ module_exit(lttng_statedump_exit);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Jean-Hugues Deschenes");
 MODULE_DESCRIPTION("Linux Trace Toolkit Next Generation Statedump");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-ftrace.c b/drivers/staging/lttng2/probes/lttng-ftrace.c
index bb70df6..bc4bd5b 100644
--- a/drivers/staging/lttng2/probes/lttng-ftrace.c
+++ b/drivers/staging/lttng2/probes/lttng-ftrace.c
@@ -199,3 +199,7 @@ module_exit(lttng_ftrace_exit)
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Ftrace Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-kprobes.c b/drivers/staging/lttng2/probes/lttng-kprobes.c
index fbd24e1..742af67 100644
--- a/drivers/staging/lttng2/probes/lttng-kprobes.c
+++ b/drivers/staging/lttng2/probes/lttng-kprobes.c
@@ -175,3 +175,7 @@ EXPORT_SYMBOL_GPL(lttng_kprobes_destroy_private);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Kprobes Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-kretprobes.c b/drivers/staging/lttng2/probes/lttng-kretprobes.c
index 6b5e046..d71090a 100644
--- a/drivers/staging/lttng2/probes/lttng-kretprobes.c
+++ b/drivers/staging/lttng2/probes/lttng-kretprobes.c
@@ -288,3 +288,7 @@ EXPORT_SYMBOL_GPL(lttng_kretprobes_destroy_private);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers");
 MODULE_DESCRIPTION("Linux Trace Toolkit Kretprobes Support");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-asoc.c b/drivers/staging/lttng2/probes/lttng-probe-asoc.c
index ad54a37..8da64b8 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-asoc.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-asoc.c
@@ -24,6 +24,7 @@
 #include <linux/module.h>
 #include <sound/jack.h>
 #include <sound/soc.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>, Paul Woegerer <paul_woegerer@mentor.com>, and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng asoc probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-block.c b/drivers/staging/lttng2/probes/lttng-probe-block.c
index 3eb668f..27f2142 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-block.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-block.c
@@ -22,6 +22,7 @@
 
 #include <linux/module.h>
 #include <linux/blktrace_api.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng block probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-btrfs.c b/drivers/staging/lttng2/probes/lttng-probe-btrfs.c
index 4b5f84e..5f66d37 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-btrfs.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-btrfs.c
@@ -27,6 +27,7 @@
 #include <../fs/btrfs/transaction.h>
 #include <../fs/btrfs/volumes.h>
 #include <linux/dcache.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -46,3 +47,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng btrfs probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-compaction.c b/drivers/staging/lttng2/probes/lttng-probe-compaction.c
index 13b9959..86ef375 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-compaction.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-compaction.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng compaction probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-ext3.c b/drivers/staging/lttng2/probes/lttng-probe-ext3.c
index 87c8cfb..ad5e63c 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-ext3.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-ext3.c
@@ -25,6 +25,7 @@
 #include <linux/fs.h>
 #include <linux/dcache.h>
 #include <linux/version.h>
+#include "../lttng-tracer.h"
 
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,4,0))
 #include <../fs/ext3/ext3.h>
@@ -50,3 +51,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>, Paul Woegerer <paul_woegerer@mentor.com>, and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng ext3 probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-ext4.c b/drivers/staging/lttng2/probes/lttng-probe-ext4.c
index 176186e..157c9db 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-ext4.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-ext4.c
@@ -27,6 +27,7 @@
 #include <../fs/ext4/mballoc.h>
 #include <../fs/ext4/ext4_extents.h>
 #include <linux/dcache.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -49,3 +50,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng ext4 probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-gpio.c b/drivers/staging/lttng2/probes/lttng-probe-gpio.c
index 51692a7..a156722 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-gpio.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-gpio.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng gpio probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-irq.c b/drivers/staging/lttng2/probes/lttng-probe-irq.c
index bdd78fb3..74a480e 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-irq.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-irq.c
@@ -22,6 +22,7 @@
 
 #include <linux/module.h>
 #include <linux/interrupt.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng irq probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-jbd.c b/drivers/staging/lttng2/probes/lttng-probe-jbd.c
index dc94894..2b255e4 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-jbd.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-jbd.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>, Paul Woegerer <paul_woegerer@mentor.com>, and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng jbd probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-jbd2.c b/drivers/staging/lttng2/probes/lttng-probe-jbd2.c
index 30ccf3f..2fee372 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-jbd2.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-jbd2.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng jbd2 probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-kmem.c b/drivers/staging/lttng2/probes/lttng-probe-kmem.c
index 441df75..c8252ec 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-kmem.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-kmem.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng kmem probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-kvm-x86-mmu.c b/drivers/staging/lttng2/probes/lttng-probe-kvm-x86-mmu.c
index f0cbf88..ab30b2a 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-kvm-x86-mmu.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-kvm-x86-mmu.c
@@ -22,6 +22,7 @@
 
 #include <linux/module.h>
 #include <linux/kvm_host.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng kvm mmu probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-kvm-x86.c b/drivers/staging/lttng2/probes/lttng-probe-kvm-x86.c
index abc93a8..a15a4e9 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-kvm-x86.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-kvm-x86.c
@@ -22,6 +22,7 @@
 
 #include <linux/module.h>
 #include <linux/kvm_host.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng kvm probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-kvm.c b/drivers/staging/lttng2/probes/lttng-probe-kvm.c
index bdec187..e027c80 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-kvm.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-kvm.c
@@ -22,6 +22,7 @@
 
 #include <linux/module.h>
 #include <linux/kvm_host.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng kvm probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-lock.c b/drivers/staging/lttng2/probes/lttng-probe-lock.c
index b95e0c5..50f24c0 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-lock.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-lock.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/version.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -48,3 +49,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng lock probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-module.c b/drivers/staging/lttng2/probes/lttng-probe-module.c
index 3594001..467668d 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-module.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-module.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng module probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-napi.c b/drivers/staging/lttng2/probes/lttng-probe-napi.c
index 47371a8..3500f50 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-napi.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-napi.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng napi probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-net.c b/drivers/staging/lttng2/probes/lttng-probe-net.c
index 54212be..f46f5c9 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-net.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-net.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng net probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-power.c b/drivers/staging/lttng2/probes/lttng-probe-power.c
index ff25a8a..275cc65 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-power.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-power.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng power probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-printk.c b/drivers/staging/lttng2/probes/lttng-probe-printk.c
index 1fe1f01..41f3a7b 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-printk.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-printk.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng printk probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-random.c b/drivers/staging/lttng2/probes/lttng-probe-random.c
index df9f551..483a605 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-random.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-random.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng random probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-rcu.c b/drivers/staging/lttng2/probes/lttng-probe-rcu.c
index 5216500..874a673 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-rcu.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-rcu.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/rcupdate.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -42,3 +43,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng rcu probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-regmap.c b/drivers/staging/lttng2/probes/lttng-probe-regmap.c
index 7c1fd00..8850b55 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-regmap.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-regmap.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/device.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -42,3 +43,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng regmap probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-regulator.c b/drivers/staging/lttng2/probes/lttng-probe-regulator.c
index 7c8b7f9..735b2c8 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-regulator.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-regulator.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng regulator probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-rpm.c b/drivers/staging/lttng2/probes/lttng-probe-rpm.c
index 607e9e5..55c11c3 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-rpm.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-rpm.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/device.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -42,3 +43,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng rpm probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-sched.c b/drivers/staging/lttng2/probes/lttng-probe-sched.c
index 8a72e14..e132260 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-sched.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-sched.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -42,3 +43,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng sched probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-scsi.c b/drivers/staging/lttng2/probes/lttng-probe-scsi.c
index 57677c6..7727394 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-scsi.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-scsi.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <scsi/scsi_device.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -42,3 +43,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng scsi probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-signal.c b/drivers/staging/lttng2/probes/lttng-probe-signal.c
index 44273a1..305b514 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-signal.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-signal.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -40,3 +41,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng signal probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-skb.c b/drivers/staging/lttng2/probes/lttng-probe-skb.c
index 71e890d..196ccd7 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-skb.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-skb.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com> and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng skb probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-sock.c b/drivers/staging/lttng2/probes/lttng-probe-sock.c
index b3e699a..96dbcb4 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-sock.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-sock.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng sock probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-statedump.c b/drivers/staging/lttng2/probes/lttng-probe-statedump.c
index fc2af91..d5b2957 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-statedump.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-statedump.c
@@ -29,6 +29,7 @@
 #include <linux/inetdevice.h>
 #include <linux/sched.h>
 #include "../lttng-events.h"
+#include "../lttng-tracer.h"
 
 /*
  * Create LTTng tracepoint probes.
@@ -44,3 +45,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng statedump probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-sunrpc.c b/drivers/staging/lttng2/probes/lttng-probe-sunrpc.c
index 504413e..d990c1b 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-sunrpc.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-sunrpc.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng sunrpc probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-timer.c b/drivers/staging/lttng2/probes/lttng-probe-timer.c
index 299f630..f86f712 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-timer.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-timer.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -44,3 +45,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng timer probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-udp.c b/drivers/staging/lttng2/probes/lttng-probe-udp.c
index 51ec3cb..ed3eb35 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-udp.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-udp.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -41,3 +42,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>");
 MODULE_DESCRIPTION("LTTng udp probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-vmscan.c b/drivers/staging/lttng2/probes/lttng-probe-vmscan.c
index d5892a4..994e514 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-vmscan.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-vmscan.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -43,3 +44,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Wade Farnsworth <wade_farnsworth@mentor.com>, Paul Woegerer <paul_woegerer@mentor.com>, and Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng vmscan probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-workqueue.c b/drivers/staging/lttng2/probes/lttng-probe-workqueue.c
index f643476..044536e 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-workqueue.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-workqueue.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/idr.h>
+#include "../lttng-tracer.h"
 
 struct cpu_workqueue_struct;
 struct pool_workqueue;
@@ -47,3 +48,7 @@ struct pool_workqueue;
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng workqueue probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-probe-writeback.c b/drivers/staging/lttng2/probes/lttng-probe-writeback.c
index 5e421e5..71752d7 100644
--- a/drivers/staging/lttng2/probes/lttng-probe-writeback.c
+++ b/drivers/staging/lttng2/probes/lttng-probe-writeback.c
@@ -24,6 +24,7 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/mm.h>
+#include "../lttng-tracer.h"
 
 /*
  * Create the tracepoint static inlines from the kernel to validate that our
@@ -52,3 +53,7 @@
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Andrew Gabbasov <andrew_gabbasov@mentor.com>");
 MODULE_DESCRIPTION("LTTng writeback probes");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
diff --git a/drivers/staging/lttng2/probes/lttng-types.c b/drivers/staging/lttng2/probes/lttng-types.c
index 76519a8..0973454 100644
--- a/drivers/staging/lttng2/probes/lttng-types.c
+++ b/drivers/staging/lttng2/probes/lttng-types.c
@@ -26,6 +26,7 @@
 #include "../lttng-events.h"
 #include "lttng-types.h"
 #include <linux/hrtimer.h>
+#include "../lttng-tracer.h"
 
 #define STAGE_EXPORT_ENUMS
 #include "lttng-types.h"
@@ -59,3 +60,7 @@ module_exit(lttng_types_exit);
 MODULE_LICENSE("GPL and additional rights");
 MODULE_AUTHOR("Mathieu Desnoyers <mathieu.desnoyers@efficios.com>");
 MODULE_DESCRIPTION("LTTng types");
+MODULE_VERSION(__stringify(LTTNG_MODULES_MAJOR_VERSION) "."
+	__stringify(LTTNG_MODULES_MINOR_VERSION) "."
+	__stringify(LTTNG_MODULES_PATCHLEVEL_VERSION)
+	LTTNG_MODULES_EXTRAVERSION);
-- 
2.0.2

