From d47a23beeca3a640d3e9df4e3b2090c8e78a3d2a Mon Sep 17 00:00:00 2001
From: Samu Voutilainen <smar@smar.fi>
Date: Mon, 22 Apr 2013 13:05:05 -0400
Subject: [PATCH 490/540] Stop build if CONFIG_TRACEPOINTS is not set

Previously it just tries to compile with zero modules, which is
confusing if you thought you had configured everything correctly. Now it
throws an error which tells which went wrong.

Fixes #506

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
---
 drivers/staging/lttng2/Makefile | 7 +++++++
 1 file changed, 7 insertions(+)

diff --git a/drivers/staging/lttng2/Makefile b/drivers/staging/lttng2/Makefile
index 39672af..fcb14f2f 100644
--- a/drivers/staging/lttng2/Makefile
+++ b/drivers/staging/lttng2/Makefile
@@ -3,6 +3,13 @@
 #
 
 ifneq ($(KERNELRELEASE),)
+
+ifeq ($(CONFIG_TRACEPOINTS),)
+
+$(error You need to enable CONFIG_TRACEPOINTS in kernel!)
+
+endif #CONFIG_TRACEPOINTS
+
 ifneq ($(CONFIG_TRACEPOINTS),)
 
 obj-m += lttng-ring-buffer-client-discard.o
-- 
1.8.4.93.g57e4c17

