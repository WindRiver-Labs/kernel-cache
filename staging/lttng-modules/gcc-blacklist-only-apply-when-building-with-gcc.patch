From 58eb4acbf380bd47e8a195eab7083e3d55860e14 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Sun, 24 Nov 2013 03:42:22 -0500
Subject: [PATCH 558/625] gcc blacklist: only apply when building with gcc

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 drivers/staging/lttng2/wrapper/compiler.h | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

diff --git a/drivers/staging/lttng2/wrapper/compiler.h b/drivers/staging/lttng2/wrapper/compiler.h
index bd69fad..0c01632 100644
--- a/drivers/staging/lttng2/wrapper/compiler.h
+++ b/drivers/staging/lttng2/wrapper/compiler.h
@@ -27,12 +27,15 @@
  * Don't allow compiling with buggy compiler.
  */
 
+#ifdef GCC_VERSION
+
 /*
  * http://gcc.gnu.org/bugzilla/show_bug.cgi?id=58854
  */
-#ifdef __ARMEL__
-# if GCC_VERSION >= 40800 && GCC_VERSION <= 40802
-#  error Your gcc version produces clobbered frame accesses
+# ifdef __ARMEL__
+#  if GCC_VERSION >= 40800 && GCC_VERSION <= 40802
+#   error Your gcc version produces clobbered frame accesses
+#  endif
 # endif
 #endif
 
-- 
2.0.2

