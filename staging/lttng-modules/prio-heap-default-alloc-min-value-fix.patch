From 365c369da67fbd54978f71c6caa1c76f6a348e12 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Mon, 23 May 2011 16:07:18 -0400
Subject: [PATCH 118/540] prio heap default alloc min value fix

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
---
 drivers/staging/lttng2/lib/prio_heap/prio_heap.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/lttng2/lib/prio_heap/prio_heap.c b/drivers/staging/lttng2/lib/prio_heap/prio_heap.c
index d4fadda..58d5d6a 100644
--- a/drivers/staging/lttng2/lib/prio_heap/prio_heap.c
+++ b/drivers/staging/lttng2/lib/prio_heap/prio_heap.c
@@ -79,7 +79,7 @@ int heap_init(struct ptr_heap *heap, size_t alloc_len,
 	 * Minimum size allocated is 1 entry to ensure memory allocation
 	 * never fails within heap_replace_max.
 	 */
-	return heap_grow(heap, min_t(size_t, 1, alloc_len));
+	return heap_grow(heap, max_t(size_t, 1, alloc_len));
 }
 
 void heap_free(struct ptr_heap *heap)
-- 
1.8.4.93.g57e4c17

