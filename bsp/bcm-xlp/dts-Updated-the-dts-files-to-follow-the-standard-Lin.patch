From c76598beb02997b87e6a05122990c5a75b93c2e5 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Thu, 25 Apr 2013 17:25:09 +0800
Subject: [PATCH 713/761] dts: Updated the dts files to follow the standard
 Linux convention.

The files are updated for xlp8xx.

Based on Broadcom SDK 2.3.

Signed-off-by: Vikas Gupta <vikas.gupta@broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/boot/dts/xlp_evp.dts |   40 +++++++++++++++++++++++-----------------
 1 file changed, 23 insertions(+), 17 deletions(-)

diff --git a/arch/mips/boot/dts/xlp_evp.dts b/arch/mips/boot/dts/xlp_evp.dts
index a89b05f..de3c0e3 100644
--- a/arch/mips/boot/dts/xlp_evp.dts
+++ b/arch/mips/boot/dts/xlp_evp.dts
@@ -1,27 +1,37 @@
-/dts-v1/;
+/* XLP8XX Device Tree Source
+ *
+ */
 
+/dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-	#address-cells = <0x1>;
-	#size-cells = <0x1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
+
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		alloc_dom0_memory = <0x0>;
+		alloc_dom0_memory = <0>;
 		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
-
 	doms {
-		#address-cells = <0x1>;
-		#size-cells = <0x1>;
-
+		#address-cells = <1>;
+		#size-cells = <1>;
 		dom@0 {
 			device_type = "domain";
 			os = "linux";
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
+
+			#address-cells = <1>;
+			#size-cells = <1>;
 
 			cpu {
 				onlinemask = <0xffffffff>;
@@ -40,10 +50,6 @@
 				sharedcfg = <0x1f000000>;
 			};
 
-			memory {
-				reg = <0x1000000 0xb000000 0x20000000 0xa0000000>;
-			};
-
 			fmn {
 				node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
 				node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
@@ -75,7 +81,7 @@
 /*
 		bootargs = "ramdisk=204800 rd_start=0xffffffff88000000 rd_size=0x01000000 root=/dev/ram rw console=ttyS0,115200 mem=2048m@8192m";
 */
-		bootargs = "root=/dev/nfs rw nfsroot=192.168.0.1:/rootfs,nfsvers=3 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth2:off console=ttyS0,115200  mem=2048m@8192m";
+		bootargs = "root=/dev/nfs rw nfsroot=192.168.0.1:/rootfs,nfsvers=3 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth2:off console=ttyS0,115200";
 	};
 
 	firmware-download {
-- 
1.7.10.4

