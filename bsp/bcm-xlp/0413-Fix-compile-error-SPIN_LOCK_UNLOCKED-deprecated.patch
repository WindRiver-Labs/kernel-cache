From a3dc8b9c8c206459b61ab96794054f86bc9a50b7 Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 11:19:02 -0700
Subject: [PATCH 413/762] Fix compile error: SPIN_LOCK_UNLOCKED deprecated.

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/setup.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/netlogic/xlp/setup.c b/arch/mips/netlogic/xlp/setup.c
index 4301a74..882f661 100644
--- a/arch/mips/netlogic/xlp/setup.c
+++ b/arch/mips/netlogic/xlp/setup.c
@@ -136,7 +136,7 @@ atomic_t cpus_rebooted = ATOMIC_INIT(0);
 #endif
 
 unsigned long long nlm_common_tlb_stats[NR_CPUS] __cacheline_aligned;
-spinlock_t atomic_lock = SPIN_LOCK_UNLOCKED;
+DEFINE_SPINLOCK(atomic_lock);
 
 int hwemul = 0;
 EXPORT_SYMBOL(hwemul);
-- 
1.7.0.4

