From ca9fa0eed587df5928917c36ef54458b61dfd136 Mon Sep 17 00:00:00 2001
From: Sreenidhi BR <sreenira@broadcom.com>
Date: Thu, 8 Nov 2012 14:48:27 +0530
Subject: [PATCH 628/761] Frequency: Changed the caller as prototype is
 changed for freq setting.

Based on Broadcom SDK 2.3.

Signed-off-by: Sreenidhi BR <sreenira@broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/dma/nlm_adma.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/dma/nlm_adma.c b/drivers/dma/nlm_adma.c
index 15af2bf..0c4cc50 100644
--- a/drivers/dma/nlm_adma.c
+++ b/drivers/dma/nlm_adma.c
@@ -48,7 +48,8 @@ uint64_t nlm_dtre_debug = 0;
 #define shift_lower_bits(x, bitshift, numofbits) \
 	(((unsigned long long)(x) & ((1ULL << (numofbits)) - 1)) << (bitshift))
 
-extern void nlm_hal_dtr_init(void);
+extern void *fdt;
+extern void nlm_hal_dtr_init(void *fdt);
 
 struct nlm_adma_device nlm_adma_raid_device;
 struct page * nlm_dtre_null_page;
@@ -1542,7 +1543,7 @@ static int __devinit nlm_adma_probe(struct platform_device *pdev)
 	printk("NLM ASYNC Device Registered\n");
 
 	/* hal init stuff */
-	nlm_hal_dtr_init();
+	nlm_hal_dtr_init(fdt);
 
 	base = nlm_hal_get_dev_base (0 /*node*/, 0 /*B*/, 5 /*D*/, 0 /*F*/);
 	value = nlm_hal_read_32bit_reg (base, 0x40);
-- 
1.7.10.4

