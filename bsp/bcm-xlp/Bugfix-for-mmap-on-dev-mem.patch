From e367c0f1079451e058608d02affb6ea2aa468fcd Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Tue, 17 Aug 2010 17:28:05 -0700
Subject: [PATCH 139/761] Bugfix for mmap on /dev/mem

	This fix is based on mmap fix on master branch.
	Disable NLM specific valid_mmap_phys_addr checks

Based on Broadcom SDK 2.3.

Signed-off-by: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/char/mem.c |    3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/char/mem.c b/drivers/char/mem.c
index 43e91bf..665275d 100644
--- a/drivers/char/mem.c
+++ b/drivers/char/mem.c
@@ -304,9 +304,6 @@ static int mmap_mem(struct file *file, struct vm_area_struct *vma)
 {
 	size_t size = vma->vm_end - vma->vm_start;
 
-	if (!valid_mmap_phys_addr_range(vma->vm_pgoff, size))
-		return -EINVAL;
-
 	if (!private_mapping_ok(vma))
 		return -ENOSYS;
 
-- 
1.7.10.4

