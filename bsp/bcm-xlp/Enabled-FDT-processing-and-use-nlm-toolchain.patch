From e2f2a2cc3e38be47c0d7a3e5aed827ffec103cae Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Tue, 3 Aug 2010 17:57:10 -0700
Subject: [PATCH 124/761] Enabled FDT processing and use nlm toolchain

Based on Broadcom SDK 2.3.

Signed-off-by: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/xenbootinfo.c |   24 +-----------------------
 1 file changed, 1 insertion(+), 23 deletions(-)

diff --git a/arch/mips/netlogic/xlp/xenbootinfo.c b/arch/mips/netlogic/xlp/xenbootinfo.c
index 16e2c42..93f679e 100644
--- a/arch/mips/netlogic/xlp/xenbootinfo.c
+++ b/arch/mips/netlogic/xlp/xenbootinfo.c
@@ -17,33 +17,11 @@ extern char _end[];
 
 extern void xen_setup_shared_info(void);
 
-int fdt_process(void)
+void xen_init(void)
 {
-#if defined(CONFIG_NLM_XLP_SIM)
-	const char *DEFAULT_CONSOLE_BOOT_PARAMS = "boot_noi2c mem=191m@64m mem=512m@512m console=ttyS0,115200 ";
-#else
-	const char *DEFAULT_CONSOLE_BOOT_PARAMS = "mem=255m@1m mem=512m@512m console=ttyS0,115200 ";
-#endif
-	const char *DEFAULT_INITRD_BOOT_PARAMS = "rdinit=/sbin/init ";
-
-    if ((strstr(arcs_cmdline, "console=")) == NULL)
-        strcat(arcs_cmdline, DEFAULT_CONSOLE_BOOT_PARAMS);
-    strcat(arcs_cmdline, " ");
-
-    strcat(arcs_cmdline, DEFAULT_INITRD_BOOT_PARAMS);
-    strcat(arcs_cmdline, " ");
-
 	xen_start_info = (struct start_info *)__va((unsigned long) PFN_ALIGN(__pa_symbol(&_end)));
 
-#define DEF_PHYMEM_START_ADDR   0x100000
-#define DEF_PHYMEM_SIZE       0x0ff00000
-
-	add_memory_region(DEF_PHYMEM_START_ADDR, 
-					  DEF_PHYMEM_SIZE - 512, (long)BOOT_MEM_RAM);
-
 	xen_setup_shared_info();
-
-	return 0;
 }
 
 extern void prom_pre_boot_secondary_cpus(void *);
-- 
1.7.10.4

