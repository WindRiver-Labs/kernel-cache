From 51695905dbe41a32dd4be13d806516c843842f30 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Wed, 6 Oct 2010 22:49:32 -0700
Subject: [PATCH 198/761] Better printk formats, removed unnecessary prints
 and

Based on Broadcom SDK 2.3.

Signed-off-by: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/common/cpu_proc.c |   10 +++++-----
 arch/mips/netlogic/xlp/mmu.c         |    4 +++-
 arch/mips/netlogic/xlp/smp.c         |    2 +-
 3 files changed, 9 insertions(+), 7 deletions(-)

diff --git a/arch/mips/netlogic/common/cpu_proc.c b/arch/mips/netlogic/common/cpu_proc.c
index 33fe483..09e7a73 100644
--- a/arch/mips/netlogic/common/cpu_proc.c
+++ b/arch/mips/netlogic/common/cpu_proc.c
@@ -129,7 +129,7 @@ static int nlm_cpu_proc_read(char *page, char **start, off_t off,
 	on_each_cpu(nlm_update_tlb_stats, NULL, 1);
 #endif
 
-	len += sprintf(page + len, "CPU Frequency: %d HZ\n", (unsigned int)mips_hpt_frequency);
+	len += sprintf(page + len, "CPU Frequency: %u HZ\n", (unsigned int)mips_hpt_frequency);
 	if (!proc_pos_check(&begin, &len, off, count))
 		goto out;
 
@@ -138,7 +138,7 @@ static int nlm_cpu_proc_read(char *page, char **start, off_t off,
 		if (!nlm_cp2_exceptions[i]) continue;
 
 			len += sprintf(page + len,
-				       "cop2_exp: %d %llx\n",
+				       "cop2_exp: %03d 0x%016llx\n",
 				       i, (unsigned long long)nlm_cp2_exceptions[i]);
 			if (!proc_pos_check(&begin, &len, off, count))
 				goto out;
@@ -150,7 +150,7 @@ static int nlm_cpu_proc_read(char *page, char **start, off_t off,
 			continue;
 
 			len += sprintf(page + len,
-				       "msgring: %d %llx %llx %llx\n",
+				       "msgring: %03d 0x%016llx 0x%016llx 0x%016llx\n",
 				       i, nlm_cpu_stats[i].msgring_pic_int,
 				       nlm_cpu_stats[i].msgring_int,
 				       nlm_cpu_stats[i].msgring_cycles);
@@ -164,7 +164,7 @@ static int nlm_cpu_proc_read(char *page, char **start, off_t off,
 			continue;
 
 			len += sprintf(page + len,
-				       "cpu_exp: %d %llx %llx\n",
+				       "cpu_exp: %03d 0x%016llx 0x%016llx\n",
 				       i, nlm_cpu_stats[i].fp_exp,
 				       nlm_cpu_stats[i].rdhwr_exp);
 			if (!proc_pos_check(&begin, &len, off, count))
@@ -177,7 +177,7 @@ static int nlm_cpu_proc_read(char *page, char **start, off_t off,
 			continue;
 
 		len += sprintf(page + len,
-			       "tlb: %d %llx \n",
+			       "tlb: %03d 0x%016llx \n",
 			       i, nlm_common_tlb_stats[i]);
 		if (!proc_pos_check(&begin, &len, off, count))
 			goto out;
diff --git a/arch/mips/netlogic/xlp/mmu.c b/arch/mips/netlogic/xlp/mmu.c
index ea902be..6d1ca8e 100644
--- a/arch/mips/netlogic/xlp/mmu.c
+++ b/arch/mips/netlogic/xlp/mmu.c
@@ -159,12 +159,13 @@ void pgwalker_init(void)
 		put_cpu_var(pgd_bases);
 
 		dump_pgwalker_config();
-		printk("Initialized Page Walker\n");
+		printk("Initialized Page Walker on cpu@%d\n", hard_smp_processor_id());
 	}
 }
 
 void dump_pgwalker_config(void)
 {
+#ifdef DEBUG
 	pgw_print_w(PGW_MMU_INFO);
 	pgw_print_w(PGW_PGD_SHIFT);
 	pgw_print_w(PGW_PGD_MASK);
@@ -172,4 +173,5 @@ void dump_pgwalker_config(void)
 	pgw_print_w(PGW_PMD_MASK);
 	pgw_print_w(PGW_PTE_SHIFT);
 	pgw_print_w(PGW_PTE_MASK);
+#endif
 }
diff --git a/arch/mips/netlogic/xlp/smp.c b/arch/mips/netlogic/xlp/smp.c
index af3d09f..76d2a99 100644
--- a/arch/mips/netlogic/xlp/smp.c
+++ b/arch/mips/netlogic/xlp/smp.c
@@ -121,7 +121,7 @@ void nlm_boot_secondary(int cpu, struct task_struct *idle)
 	__sync();
 	smp_boot.boot_info[cpu].ready = 1;
   
- 	printk("[%s]: (PROM): sent a wakeup message to cpu %d\n", __FUNCTION__, cpu); 
+/*  	printk("[%s]: (PROM): sent a wakeup message to cpu %d\n", __FUNCTION__, cpu);  */
 }
 
 
-- 
1.7.10.4

