From 683a1f4e9580cd4246ee2086202fabee8595f2c6 Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 17:17:41 -0700
Subject: [PATCH 423/762] Fix compile warning: final_len

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/mm/tlbex.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/mm/tlbex.c b/arch/mips/mm/tlbex.c
index 1f67614..c322078 100644
--- a/arch/mips/mm/tlbex.c
+++ b/arch/mips/mm/tlbex.c
@@ -1283,8 +1283,8 @@ static void __cpuinit build_r4000_tlb_refill_handler(void)
 	struct uasm_reloc *r = relocs;
 #if !defined(CONFIG_MAPPED_KERNEL)
 	u32 *f;
-#endif
 	unsigned int final_len;
+#endif
 	struct mips_huge_tlb_info htlb_info __maybe_unused;
 	enum vmalloc64_mode vmalloc_mode __maybe_unused;
 
@@ -1462,10 +1462,10 @@ static void __cpuinit build_r4000_tlb_refill_handler(void)
 #endif /* !defined(CONFIG_MAPPED_KERNEL) */
 
 	uasm_resolve_relocs(relocs, labels);
+#if !defined(CONFIG_MAPPED_KERNEL)
 	pr_debug("Wrote TLB refill handler (%u instructions).\n",
 		 final_len);
 
-#if !defined(CONFIG_MAPPED_KERNEL)
 	memcpy((void *)ebase, final_handler, 0x100);
 #endif
 
-- 
1.7.0.4

