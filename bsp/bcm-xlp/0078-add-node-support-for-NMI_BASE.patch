From f8061fbc31661d3d879dae47486a38131a6fd8e8 Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Wed, 30 Jun 2010 17:01:52 -0700
Subject: [PATCH 078/762] add node support for NMI_BASE

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/cpu_control.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/arch/mips/netlogic/xlp/cpu_control.c b/arch/mips/netlogic/xlp/cpu_control.c
index 2adcad6..6c4b91d 100644
--- a/arch/mips/netlogic/xlp/cpu_control.c
+++ b/arch/mips/netlogic/xlp/cpu_control.c
@@ -53,7 +53,6 @@ THE POSSIBILITY OF SUCH DAMAGE.
 
 /* Globals Section 
  */ 
-#define XLP_ECFG_BASE		0x18000000
 #define XLP_SYS_DEV_BASE	0x35000
 uint32_t cores_bitmap = 0x1;	/* Bitmap of cores to enable  */
 int threads_to_enable; 			/* Threads to enable per core */
@@ -350,7 +349,7 @@ printk("[%s] node:%p \n", __FUNCTION__, node );
 		/* Bring the other cores online here
 	 	* Copy reset code into KSEG0 space
 	 	*/
-		if (cores_bitmap != 0xfe) {
+		if ((cores_bitmap != 0xfe)||(node > 0)) {
 			memcpy((void *)(NMI_BASE), 
 			   (void *)&reset_entry, 
 			   (reset_entry_end - reset_entry));
-- 
1.7.0.4

