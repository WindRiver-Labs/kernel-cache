From 494e5dd5f6d970968f9cee1ed43064bb18dc5971 Mon Sep 17 00:00:00 2001
From: Vinod Mopuri <vmopuri@lc-sj1-5012.sj.broadcom.com>
Date: Fri, 12 Oct 2012 01:26:54 -0700
Subject: [PATCH 602/761] NOR: Modified flash partition sizes.

Also made most of the partitions read/write so that Linux can upgrade the Firmware.

Based on Broadcom SDK 2.3.

Signed-off-by: Vinod Mopuri <vmopuri@lc-sj1-5012.sj.broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/xlp_nor.c |   16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/arch/mips/netlogic/xlp/xlp_nor.c b/arch/mips/netlogic/xlp/xlp_nor.c
index 8d5077d..1893da5 100644
--- a/arch/mips/netlogic/xlp/xlp_nor.c
+++ b/arch/mips/netlogic/xlp/xlp_nor.c
@@ -24,25 +24,25 @@ static __inline__ int32_t nor_reg_read(int node,  int regidx)
 
 static struct mtd_partition xlp_nor_partitions[] = {
         {
-                .name   = "X-Loader(RO)",
+                .name   = "X-Loader(RW)",
                 .offset = 0,
-                .size   = 0x100000,     /* 1M */
-                .mask_flags = MTD_WRITEABLE,
+                .size   = 0xc0000,     /* 768k */
+                //.mask_flags = MTD_WRITEABLE,
         },
         {
                 .name   = "U-boot(RW)",
-                .offset = 0x100000,
-                .size   = 0x60000,      /* 384k */
+                .offset = 0xc0000,
+                .size   = 0x1e0000,      /* 1.87M */
         },
         {
                 .name   = "DTB(RW)",
-                .offset = 0x160000,
+                .offset = 0x2a0000,
                 .size   = 0x20000,      /* 128K */
         },
         {
                 .name   = "Kernel(RW)",
-                .offset = 0x180000,
-                .size   = 0x580000,     /* 5.5M */
+                .offset = 0x2c0000,
+                .size   = 0x440000,     /* 4.25M */
         },
         {
                 .name   = "Rootfs(RW)",
-- 
1.7.10.4

