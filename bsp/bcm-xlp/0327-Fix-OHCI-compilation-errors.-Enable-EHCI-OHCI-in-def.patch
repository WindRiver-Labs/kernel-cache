From 17a2f915ceaf5c362c7b7e4c9baebe8a4fe3b303 Mon Sep 17 00:00:00 2001
From: P. Sadik <psadik@netlogicmicro.com>
Date: Mon, 12 Sep 2011 14:26:07 +0530
Subject: [PATCH 327/762] Fix OHCI compilation errors. Enable EHCI/OHCI in defconfig

Based on Broadcom SDK 2.3.

Signed-off-by: P. Sadik <psadik@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/usb/host/ohci-pci.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/host/ohci-pci.c b/drivers/usb/host/ohci-pci.c
index 9abe999..3f3aff7 100644
--- a/drivers/usb/host/ohci-pci.c
+++ b/drivers/usb/host/ohci-pci.c
@@ -33,9 +33,9 @@
 #if defined(CONFIG_NLM_XLP) && defined(CONFIG_USB)
 
 #include <asm/netlogic/hal/nlm_hal.h>
-#include <asm/netlogic/hal/nlm_hal_pic.h>
 #include <asm/netlogic/xlp.h>
 #include <asm/netlogic/xlp_usb.h>
+extern int nlm_xlp_request_irq(int irq);
 
 static void xlp_usb_start_ohc(int ctrl_no)
 {
@@ -71,7 +71,7 @@ int xlp_ohci_hcd_pci_probe(struct pci_dev *dev,
 	ctrl_no = dev->devfn & 0xF;
 
 	irt = usb_reg_read( 0, ctrl_no, 0x3D) & 0xFFFF;
-	irq = nlm_hal_request_shared_irq(irt);
+	irq = nlm_xlp_request_irq(irt);
 
 	if (!irq) {
 		printk("Found HC with no IRQ.  Check BIOS/PCI %s setup!\n", 
-- 
1.7.0.4

