From cfbc23afcbe4e55974e60dd28519a3f9d8f4eec8 Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Tue, 1 Nov 2011 16:22:37 -0700
Subject: [PATCH 466/761] xlp_hal_pic.h: add routines to disable/enable IRT

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/netlogic/xlp_hal_pic.h |   16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/arch/mips/include/asm/netlogic/xlp_hal_pic.h b/arch/mips/include/asm/netlogic/xlp_hal_pic.h
index 1507708..8a78ac2 100644
--- a/arch/mips/include/asm/netlogic/xlp_hal_pic.h
+++ b/arch/mips/include/asm/netlogic/xlp_hal_pic.h
@@ -189,6 +189,22 @@ static __inline__ void nlm_hal_pic_write_irt(int irt_num, int en, int nmi, int s
 	nlm_hal_write_pic_reg(mmio, PIC_IRT(irt_num), val);
 }
 
+static __inline__ void nlm_hal_pic_disable_irt(int irt_num)
+{
+	pic_reg_t *mmio = nlm_hal_pic_offset();
+	pic_reg_t val = nlm_hal_read_pic_reg(mmio, PIC_IRT(irt_num));
+	val &= ~(1 << 31);
+	nlm_hal_write_pic_reg(mmio, PIC_IRT(irt_num), val);
+}
+
+static __inline__ void nlm_hal_pic_enable_irt(int irt_num)
+{
+	pic_reg_t *mmio = nlm_hal_pic_offset();
+	pic_reg_t val = nlm_hal_read_pic_reg(mmio, PIC_IRT(irt_num));
+	val |= (1 << 31);
+	nlm_hal_write_pic_reg(mmio, PIC_IRT(irt_num), val);
+}
+
 static __inline__ void nlm_hal_pic_write_irt_direct(int irt_num, int en, int nmi, int sch, int vec, int cpu)
 {
 	nlm_hal_pic_write_irt(irt_num, en, nmi, sch, vec, 1, CPUIDBIT2(cpu), CPUIDBITS01(cpu));
-- 
1.7.10.4

