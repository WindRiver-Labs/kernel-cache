From 75d5b40e943ff30e5b2f792e22bb297504d5f940 Mon Sep 17 00:00:00 2001
From: Jack Tan <jiankemeng@gmail.com>
Date: Mon, 30 Jun 2014 19:03:33 +0800
Subject: [PATCH 2/4] bcm-xlp: add the hyperexec dts of xlp9xx

Rebased to SDK 3.0.2

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/boot/dts/xlp9xx-helinux.dts | 1184 +++++++++++++++++++++++++++++++++
 1 files changed, 1184 insertions(+), 0 deletions(-)
 create mode 100644 arch/mips/boot/dts/xlp9xx-helinux.dts

diff --git a/arch/mips/boot/dts/xlp9xx-helinux.dts b/arch/mips/boot/dts/xlp9xx-helinux.dts
new file mode 100644
index 0000000..03beab9
--- /dev/null
+++ b/arch/mips/boot/dts/xlp9xx-helinux.dts
@@ -0,0 +1,1184 @@
+/* XLP9XX Device Tree Source
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-GVP";
+	compatible = "netlogic,xlp";
+
+	#address-cells = <2>;
+	#size-cells = <2>;
+
+	memory {
+                device_type = "memory";
+                reg =  <0 0x00100000 0 0x0FF00000       // 255M at 1M
+                        0 0x20000000 0 0xa0000000>;     // 2560M at 512M
+        };
+
+        /* memory range for HEv2 pkt mem. Only one contig memory per node supported */
+        pktmem {
+                device_type = "pktmem";
+
+                /* format: node number, 64-bit addr, 64-bit size */
+                reg = <0 0x0 0xe0000000 0x0 0x20000000
+                       1 0x0 0x0 0x0 0x0
+                       2 0x0 0x0 0x0 0x0
+                       3 0x0 0x0 0x0 0x0>;
+        };
+
+	hypervisor {
+		hypervisor-name = "KVM";
+		guest_use_dtre = <1>;
+	};
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			cpu {
+				onlinemask = <0x1>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+				sae-rx-vc = <0>; /* sharing with nae */
+				sae-rx-sync-vc = <3>; /* should be exclusive */
+                                napi-vc-mask = <0xb>;
+
+			};
+			uart {
+				id = <0>;
+				owner = <1>;
+				sharedcfg = <0x1f000000>;
+			};
+                        fmn {
+                                node_0_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_1_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_2_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_3_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_4_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_5_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_6_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                                node_7_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222 0x22222222>;
+                        };
+			pic {
+			};
+			dtre {
+				dtre_init_only = <0>;
+			};
+			owner-config {
+				nae = <0x0>;
+				sae = <0x1>;
+				rsa = <0x0>;
+				fmn = <0x1>;
+			};
+		};
+
+		dom@1 {
+			device_type = "domain";
+			os = "uspace";
+
+			heap-size = <0x0 0x8000000>; // 128M
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			app-bootcmd = "smpload";
+			app-loadaddr = "0xf0000000"; // 3.75GB
+
+			kernel {
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <0>;
+			};
+
+			cpu {
+				onlinemask = <0xffff 0xffffffff 0xffffffff>; /* <0x1111 0x11111111 0x11111111>; */
+                                nae-rx-vc = <2>;
+                                nae-fb-vc = <3>;
+				dtre-rx-vc = <2>;
+				lzs-vc = <2>;
+				sae-rx-vc = <0>; /* sharing with nae */
+				sae-rx-sync-vc = <0>;  /* sharing with nae */
+				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae 
+				   responses. Also there is no other vc as linux is using other 2 vcs */
+                                /* Setting this to '1' makes NAE driver to skip buf alloction and initial
+                                   sending of packet buffers*/
+                                nae-buf-alloc-by-app = <1>; 
+			};
+			uart {
+				id = <0>;
+			};
+			app-param{
+				/* For multinode follow the below convention.
+				   1. provide node specific info on a separate line
+				   2. on each line provide the cpu mask as (MSB)79-64 , 63-32, 31-0 (LSB)
+
+				   example:
+				   onlinemask = <0x0 0x0 0x0 0xff    # Node 1 cpus 7-0
+						 0x0 0x0 0x0 0xffff> # node 0 cpus 15-0
+				 */
+				onlinemask = <0xffffffff>; /*<0x11111111>; */
+				enable-nae-hw-parser = <0>;
+				enable-nae-jumbo = <0>;
+				enable-nae-p2p = <0>;
+				enable-poe = <0>;
+				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
+				enable-popq-priority = <0>; /* If set to 1, popq priority mode is enabled else disabled */
+				launch-mode = "smp";	/* smp or amp */
+				timer-service-vc = <2>;
+			};
+			nae{
+				freein-fifo-mask = <0xffff 0 0 0>;
+                                /* node offsets and size */
+                                vfbtbl-sw-offset = <0 0 0 0>;
+                                vfbtbl-sw-nentries = <32 32 32 32>;
+                                /* hw entries */
+                                vfbtbl-hw-offset = <32 32 32 32>;
+                                vfbtbl-hw-nentries = <20 20 20 20>;
+                                dummy-pktdata-addr = <0x0 0x0ff00000>; // 255 MB
+			};
+			owner-config {
+				nae = <0x1>;   // currently for node 0
+				sae = <0x1>;
+				rsa = <0x0>;
+				fmn = <0x1>;
+			};
+
+                        fmn {
+                                node_0_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_1_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_2_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_3_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                        };
+		};
+
+		dom@2 {
+			device_type = "domain";
+			os = "uspace";
+
+			heap-size = <0x0 0x8000000>; // 128M
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			app-bootcmd = "smpload";
+			app-loadaddr = "0xf0000000"; // 3.75GB
+
+			kernel {
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <0>;
+			};
+
+			cpu {
+				onlinemask = <0x000f>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <3>;
+                                /* Setting this to '1' makes NAE driver to skip buf alloction and initial
+                                   sending of packet buffers*/
+                                nae-buf-alloc-by-app = <1>; 
+			};
+			uart {
+				id = <0>;
+			};
+			memory {
+				reg = <0xE0000000 0x60000000>;  // 1.5Gb @ 3584Mb
+			};
+			app-param{
+				onlinemask = <0x000f>;
+			};
+			nae{
+			};
+			owner-config {
+				nae = <0x0>;
+				sae = <0x1>;
+				rsa = <0x1>;
+				fmn = <0x1>;
+			};
+
+                        fmn {
+                                node_0_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_1_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_2_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_3_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                        };
+		};
+	};
+
+	chosen {
+		/* examples for different core/thread models.
+		 * 16core: netlogic,cpumask=<0xffffffff 0xffffffff>
+		 * 20core: netlogic,cpumask=<0xffff 0xffffffff 0xffffffff>
+		 * 15 core, skipping core #5: netlogic,cpumask=<0xffffffff 0xff0fffff>
+		 */
+		netlogic,cpumask = <0xffffffff 0xffffffff>;
+		bootargs = " console=ttyS0,115200  ";
+		/* linux,initrd-start=<0x00c00000>;
+		   linux,initrd-end=<0x02c00000>; */
+	};
+
+	/* These binaries are downloaded at the resp physical memory locations
+	 * by their corresponding bootstrapping loaders. For example,
+	 * u-boot is loaded by x-load at 193M, sysconfig is loaded by u-boot
+	 * at 1M, hypervisor by u-boot hypervisor at 136M.
+	 * On simulator all these binaries are pre-loaded by using '-F' option
+	 * for convenience. On silicon, they will be loaded by their corresponding
+	 * temporary download locations the stage-1/stage-2 firmware
+	 */
+	firmware-download {
+		u-boot        = <0x0c100000 0x3f00000>;  /* 63M @ 193M */
+		sysconfig     = <0x00100000 0x00100000>; /* 1M @ 1M */
+		hypervisor    = <0x08800000 0x00800000>; /* 8M @ 136M */
+		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
+		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
+	};
+
+	soc {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x02000000>; // GBU chipselects
+
+		serial0: serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x112100 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <125000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
+		};
+		serial1: serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x112120 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <125000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
+		};
+		pic: pic@11000 {
+			interrupt-controller;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x110000 0x200>;
+		};
+
+		watchdog@0 {
+			compatible = "netlogic,nlm-wdt";
+		};
+
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x12a000 0x80>;
+		};
+
+		i2c0: i2c@113100 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113100 0x100>;
+			clock-frequency = <133000000>;
+		};
+		i2c1: i2c@113300 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113300 0x100>;
+			clock-frequency = <133000000>;
+
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
+			dtt@2c {
+                                compatible = "max6653";
+                                reg = <0x2c>;
+			};
+
+			eeprom@57 {
+                                compatible = "xlpge_eeprom";
+                                reg = <0x57>;
+                        };
+
+		};
+		i2c2: i2c@113500 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113500 0x100>;
+			clock-frequency = <133000000>;
+		};
+		i2c3: i2c@113700 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113700 0x100>;
+			clock-frequency = <133000000>;
+		};
+
+		spi: xlp_spi@13a000 {
+			compatible = "netlogic,xlp-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x13a000 0x100>;
+
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
+			spi_nor@1 {
+				compatible = "micron,n25q128";
+				#address-cells = <1>;
+				#size-cells = <1>;
+
+				reg = <1>;		/* Chip Select */
+
+				spi-max-frequency = <40000000>;
+
+				partition@0 {
+					label = "x-loader";
+					reg = <0x0 0x200000>; /* 2M */
+					read-only;
+				};
+
+				partition@200000 {
+					label = "kernel";
+					reg = <0x200000 0x500000>; /* 5M */
+				};
+
+				partition@700000 {
+					label = "rootfs";
+					reg = <0x700000 0x800000>; /* 8M */
+				};
+
+				partition@f00000 {
+					label = "env";
+					reg = <0xf00000 0x100000>; /* 1M */
+					read-only;
+				};
+			};
+			spi_nand@2 {
+				compatible = "spinand,mt29f";
+				#address-cells = <1>;
+				#size-cells = <1>;
+				reg = <2>;	/* SPI NAND CS */
+				spi-max-frequency = <50000000>;
+
+				partition@0 {
+					label = "firmware";
+					reg = <0x0 0x1c00000>;
+				};
+
+				partition@1 {
+					label = "kernel";
+					reg = <0x1c00000 0x0>;
+				};
+			};
+		};
+
+		nand_flash@0,0 {
+			compatible = "brcm,xlp9xx-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x139000 0x1000>;
+
+			nand-ecc-mode = "hw";
+
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
+			};
+
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
+
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
+			};
+		};
+
+		nor_flash@1,0 {
+			compatible = "cfi-flash";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
+
+			partition@0 {
+				label = "x-loader";
+				reg = <0x0 0x100000>; /* 1M */
+				read-only;
+			};
+
+			partition@100000 {
+				label = "u-boot";
+				reg = <0x100000 0x100000>; /* 1M */
+			};
+
+			partition@200000 {
+				label = "kernel";
+				reg = <0x200000 0x500000>; /* 5M */
+			};
+
+			partition@700000 {
+				label = "rootfs";
+				reg = <0x700000 0x800000>; /* 8M */
+			};
+
+			partition@f00000 {
+				label = "env";
+				reg = <0xf00000 0x100000>; /* 1M */
+				read-only;
+			};
+		};
+
+		gpio: xlp_gpio@114000 {
+			compatible = "netlogic,xlp-gpio";
+			reg = <0 0x114100 0x1000>;
+			#gpio-cells = <2>;
+			gpio-controller;
+
+			#interrupt-cells = <1>;
+			interrupt-parent = <&pic>;
+			interrupts = <39>;
+			interrupt-controller;
+		};
+fmn@node-0{
+        default-credits = <16>; 
+	default-queue-size = <12288>;
+        fmn-spill-mem-base = <0x00000000 0x10000000>; /*0 - dynamic allocation, only for 64 bit linux */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
+		/* supported station names 
+			"cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs poe1 nae1 ale"
+		*/
+		version = <1>;
+		cpu {
+			cpu-vc-mask = <0xc>;  /* There are 4 VCs per thread.
+                                                The onchip queue configuration values given in this section is applicable only
+                                                to the VCs enabled here. If this is zero, it is applicable for all the CPU VCs */
+
+			onchip-entries = <64>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					poe = <128>;
+					poe1 = <128>;
+					nae = <32>;
+					nae1 = <32>;
+				};
+			};
+		};
+		nae {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <512>;
+				};
+			};
+		};
+		poe {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+                                stn@node-0 {
+					cpu = <64>;
+					nae = <64>;
+				};
+			};
+		};
+		nae1 {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <512>;
+                                };
+                        };
+		};
+		poe1 {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+                        credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <64>;
+                                };
+                        };
+		};
+		
+		
+	};
+};
+fmn@node-1{
+        default-credits = <50>;
+        default-queue-size = <28672>;
+        fmn-spill-mem-base = <0 0>; /*0 - dynamic allocation */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
+
+	};
+};
+fmn@node-2{
+
+};
+fmn@node-3{
+
+};
+net@node-0 {
+       compatible = "XLP9XX";
+       version = <1>;
+
+       ale-0 {
+             enable = <0>;
+             cpu-threshold = <32>;
+             nae-threshold = <80>;
+             data-base {
+
+             };
+       };
+     
+       nae-0 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+	     parser-enable = <1>;
+	     freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
+				};
+			};
+ 
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                   If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 2MB @ (dynamically allocated address)MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+		freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+		port-fifo-en = <1>;
+             };  
+            
+             complex@0 {
+             
+                mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+		     
+		     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0 1 2 3>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;	             /* connected to external MDIO of nae-0 called as sibling of nae-1 */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             }; 
+
+             complex@1 {
+
+                mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+		     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <4 5 0 0>;  /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <4 5 6 7>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */  
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+  
+             complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+       };
+
+       poe-0{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;                     
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;                    
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */ 
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+            
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+  
+       nae-1 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+	     parser-enable = <1>;
+	     freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
+				};
+			};
+
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                           If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 1MB @ 254MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+		freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+		port-fifo-en = <1>;
+             };
+
+             complex@0 {
+
+                mode = "xaui";	/* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+
+		     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <8 9 0 0>;          /*phy adress in exaui mode.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+             };  
+
+             complex@1 {                    
+
+                mode = "xaui";   /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
+		     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <12 13 0 0>;        /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <12 13 14 15>;           /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+            };
+
+            complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <1>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+            };
+
+       };
+
+       poe-1{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+};
+  
+		nodes {
+			num-nodes = <1>;
+		};
+
+	};
+	frequency-config {
+		nae = <500>;
+		sae = <250>;
+		rsa = <667>;
+		dtre = <250>;
+		cde = <250>;
+	};
+};
+
-- 
1.7.5.4

