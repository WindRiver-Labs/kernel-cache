From 4b4c5bbd01d36e11c7ee05ded3370c2f03e8b60b Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Wed, 28 May 2014 15:33:49 +0800
Subject: [PATCH 078/163] fixup compiling error

Rebased to SDK 3.0.1

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/netlogic/lib/fmnlib/Makefile             |    2 +-
 arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c |    2 +-
 arch/mips/netlogic/lib/netlib/Makefile             |    2 +-
 arch/mips/netlogic/lib/syslib/include/xlp9xx_sys.h |    6 +++---
 drivers/netlogic/sae/cryptosoc_lib_priv.h          |    2 +-
 5 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/arch/mips/netlogic/lib/fmnlib/Makefile b/arch/mips/netlogic/lib/fmnlib/Makefile
index 528a0ea..13b87aa 100644
--- a/arch/mips/netlogic/lib/fmnlib/Makefile
+++ b/arch/mips/netlogic/lib/fmnlib/Makefile
@@ -1,4 +1,4 @@
-EXTRA_CFLAGS := -DNLM_HAL_LINUX_KERNEL -DNLM_CORTINA_SUPPORT -Wno-maybe-uninitialized
+EXTRA_CFLAGS := -DNLM_HAL_LINUX_KERNEL -DNLM_CORTINA_SUPPORT -Wno-maybe-uninitialized -Wno-unused-variable -Wno-undef
 EXTRA_CFLAGS += -Iarch/mips/netlogic/boot/
 EXTRA_CFLAGS += -Iarch/mips/netlogic/lib/syslib/include
 EXTRA_CFLAGS += -Iarch/mips/netlogic/lib/fmnlib
diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
index d9ad8b8..8266a3b 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
@@ -1653,9 +1653,9 @@ int get_dom_fmn_node_ownership(void *fdt, int dom_id)
 void nlm_hal_fmn_init(void *fdt, int node)
 {
 	int max_nodes;
+	nlm_fmn_config_t *fmn_config = NULL;
 
 	nlm_print("*** Firmware Configuration of FMN ***\n");
-	nlm_fmn_config_t *fmn_config = NULL;
 
 
         if (is_nlm_xlp9xx()) {
diff --git a/arch/mips/netlogic/lib/netlib/Makefile b/arch/mips/netlogic/lib/netlib/Makefile
index 5abcbd6..c68bec0 100644
--- a/arch/mips/netlogic/lib/netlib/Makefile
+++ b/arch/mips/netlogic/lib/netlib/Makefile
@@ -1,4 +1,4 @@
-EXTRA_CFLAGS := -DNLM_HAL_LINUX_KERNEL -DNLM_CORTINA_SUPPORT -Wno-maybe-uninitialized
+EXTRA_CFLAGS := -DNLM_HAL_LINUX_KERNEL -DNLM_CORTINA_SUPPORT -Wno-maybe-uninitialized -Wno-unused-function -Wno-unused-variable
 EXTRA_CFLAGS += -Iarch/mips/netlogic/boot/
 EXTRA_CFLAGS += -Iarch/mips/netlogic/lib/syslib/include
 EXTRA_CFLAGS += -Iarch/mips/netlogic/lib/fmnlib
diff --git a/arch/mips/netlogic/lib/syslib/include/xlp9xx_sys.h b/arch/mips/netlogic/lib/syslib/include/xlp9xx_sys.h
index 268ac43..738056a 100644
--- a/arch/mips/netlogic/lib/syslib/include/xlp9xx_sys.h
+++ b/arch/mips/netlogic/lib/syslib/include/xlp9xx_sys.h
@@ -254,7 +254,7 @@ static inline int xlp9xx_set_nae_frequency(int node, uint64_t freq)
 
     NLM_HAL_DO_DIV(nae_freq, mhz);
 
-    nlm_print("NAE frequency %lu MHz node :%d\n", nae_freq,node);
+    nlm_print("NAE frequency %lld MHz node :%d\n", nae_freq,node);
 		
     if (freq == get_nae_frequency(node))
 	return 0;
@@ -313,7 +313,7 @@ static inline int xlp9xx_set_nae_frequency(int node, uint64_t freq)
       }
     }
 
-    nlm_print("NAE frequency changed to %lu MHz\n", nae_freq);
+    nlm_print("NAE frequency changed to %lld MHz\n", nae_freq);
     return 0;
 }
 
@@ -371,7 +371,7 @@ static inline int set_crypto_block_frequency(int node, int dev_id, uint64_t freq
     block_freq = get_crypto_block_frequency(node, dev_id);
     NLM_HAL_DO_DIV(block_freq, mhz);
 
-    nlm_print("%s frequency %lu MHz\n", block_name, block_freq);
+    nlm_print("%s frequency %lld MHz\n", block_name, block_freq);
 
     if (freq == get_crypto_block_frequency(node, dev_id))
         return 0;
diff --git a/drivers/netlogic/sae/cryptosoc_lib_priv.h b/drivers/netlogic/sae/cryptosoc_lib_priv.h
index b6828ae..3fb0d41 100644
--- a/drivers/netlogic/sae/cryptosoc_lib_priv.h
+++ b/drivers/netlogic/sae/cryptosoc_lib_priv.h
@@ -45,7 +45,7 @@ static inline int crypto_ctxt_shrd_wait_for_response(int fd)
 extern int crypto_ctxt_alloc(struct cryptosoc_ctx *ctx);
 extern int crypto_ctxt_free(struct cryptosoc_ctx *ctx);
 extern int crypto_get_soc_vc_numbers(enum cryptosoc_soc_type soc, int *basevc, int *lmtvc);
-extern int cryptosoc_lib_priv_init(void);
+extern int cryptosoc_lib_priv_init(struct cryptosoc_lib_params *params);
 extern int cryptosoc_lib_priv_finish(void);
 
 #endif
-- 
1.7.9.5

