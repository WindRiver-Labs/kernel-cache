From 0bc2363aadd0791e882ec2b4bd8ac21eadc56793 Mon Sep 17 00:00:00 2001
From: Xiaoyi Liu <xiaoyi@broadcom.com>
Date: Tue, 11 Feb 2014 17:16:33 -0500
Subject: [PATCH 119/163] fmnlib: outputq should only be configued for the
 valid stations for a given platform.

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
index c4f61ad..923db70 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
@@ -1196,6 +1196,9 @@ int nlm_hal_setup_outq(void *fdt, int node, int max_nodes)
 		nlm_print(" XLP9XX/XLP7XX FMN output queue configuration \n");
 
 		for (station = 0; station < max_msg_blks; station++) {
+
+			if (!fmn_q_config[station].valid) continue;
+
 			qid = fmn_q_config[station].b_stid;
 			if ( fmn_9xx_is_vc_valid(node, qid) == 0 ) continue;
 
-- 
1.7.9.5

