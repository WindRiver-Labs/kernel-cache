From d947324757671cbb12363bcd5ee293ebe0a19f8e Mon Sep 17 00:00:00 2001
From: Kamlakant Patel <kamlakant.patel@broadcom.com>
Date: Sat, 9 Nov 2013 01:12:15 +0530
Subject: [PATCH 002/163] MIPS: Netlogic: dts: add interrupts property for spi
 controller

-Add interrupts support for spi controller.
-Change compatible property for SPI-NOR for xlp9xx as it is Micron chip.

Signed-off-by: Kamlakant Patel <kamlakant.patel@broadcom.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/netlogic/dts/xlp_evp.dts |    2 ++
 arch/mips/netlogic/dts/xlp_fvp.dts |   30 ++++++++++++++++++++++++++++++
 arch/mips/netlogic/dts/xlp_gvp.dts |    5 ++++-
 arch/mips/netlogic/dts/xlp_svp.dts |    3 +++
 4 files changed, 39 insertions(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/dts/xlp_evp.dts b/arch/mips/netlogic/dts/xlp_evp.dts
index 0b0af6a..94ba529 100644
--- a/arch/mips/netlogic/dts/xlp_evp.dts
+++ b/arch/mips/netlogic/dts/xlp_evp.dts
@@ -142,6 +142,8 @@
 			#address-cells = <1>;
 			#size-cells = <0>;
 			reg = <0 0x3a000 0x100>;
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
 
 			spi_nor@1 {
 				compatible = "spansion,s25sl12801";
diff --git a/arch/mips/netlogic/dts/xlp_fvp.dts b/arch/mips/netlogic/dts/xlp_fvp.dts
index 32800f7..fc1e5c0 100644
--- a/arch/mips/netlogic/dts/xlp_fvp.dts
+++ b/arch/mips/netlogic/dts/xlp_fvp.dts
@@ -75,6 +75,32 @@
 			reg = <0 0x4000 0x200>;
 		};
 
+		nand_flash@0,0 {
+			compatible = "netlogic,xlp-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x39000 0x1000>;
+
+			interrupts = <43>;
+			interrupt-parent = <&pic>;
+			nand-ecc-mode = "hw";
+
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
+			};
+
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
+
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
+			};
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
@@ -109,12 +135,16 @@
 				read-only;
 			};
 		};
+
 		spi: xlp_spi@3a000 {
 			compatible = "netlogic,xlp-spi";
 			#address-cells = <1>;
 			#size-cells = <0>;
 			reg = <0 0x3a000 0x100>;
 
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
 			spi_nor@1 {
 				compatible = "spansion,s25sl12801";
 				#address-cells = <1>;
diff --git a/arch/mips/netlogic/dts/xlp_gvp.dts b/arch/mips/netlogic/dts/xlp_gvp.dts
index 623fa63..1ed1e47 100644
--- a/arch/mips/netlogic/dts/xlp_gvp.dts
+++ b/arch/mips/netlogic/dts/xlp_gvp.dts
@@ -39,8 +39,11 @@
 			#size-cells = <0>;
 			reg = <0 0x13a000 0x100>;
 
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
 			spi_nor@1 {
-				compatible = "spansion,s25sl12801";
+				compatible = "micron,n25q128";
 				#address-cells = <1>;
 				#size-cells = <1>;
 
diff --git a/arch/mips/netlogic/dts/xlp_svp.dts b/arch/mips/netlogic/dts/xlp_svp.dts
index c2f725f..fa17f87 100644
--- a/arch/mips/netlogic/dts/xlp_svp.dts
+++ b/arch/mips/netlogic/dts/xlp_svp.dts
@@ -143,6 +143,9 @@
 			#size-cells = <0>;
 			reg = <0 0x3a000 0x100>;
 
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
 			spi_nor@1 {
 				compatible = "spansion,s25sl12801";
 				#address-cells = <1>;
-- 
1.7.9.5

