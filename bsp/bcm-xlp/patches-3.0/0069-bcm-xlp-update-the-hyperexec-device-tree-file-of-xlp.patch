From fed3c278fbe21e2427857849d8211e3a78495398 Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Mon, 17 Mar 2014 22:13:07 +0800
Subject: [PATCH 7/7] bcm-xlp: update the hyperexec device tree file of xlp208

Based on SDK 3.0

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/boot/dts/xlp2xx-helinux.dts | 2019 ++++++++++++++++++++++-----------
 1 file changed, 1353 insertions(+), 666 deletions(-)

diff --git a/arch/mips/boot/dts/xlp2xx-helinux.dts b/arch/mips/boot/dts/xlp2xx-helinux.dts
index 0fb9572..8f06314ef 100644
--- a/arch/mips/boot/dts/xlp2xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp2xx-helinux.dts
@@ -1,52 +1,64 @@
-/dts-v1/;
+/* XLP2XX Device Tree Source
+ *
+ */
 
+/dts-v1/;
 / {
 	model = "netlogic,XLP-FVP";
-	compatible = "netlogic,xlp";
-	#address-cells = <0x2>;
-	#size-cells = <0x2>;
-
-	memory {
-		device_type = "memory";
-		reg = <0x0 0x1000000 0x0 0xb000000 0x0 0xe0000000 0x0 0x20000000>;
-	};
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0xe0000000 0 0x20000000>;
+        };
+
+        /* memory range for HEv2 pkt mem. Only one contig memory per node supported */
+        pktmem {
+                device_type = "pktmem";
+
+                /* format: node number, 64-bit addr, 64-bit size */
+                reg = <0 0 0x80000000 0 0x08000000
+                       1 0x0 0x0 0x0 0x0
+                       2 0x0 0x0 0x0 0x0
+                       3 0x0 0x0 0x0 0x0>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		alloc_dom0_memory = <0x0>;
+		alloc_dom0_memory = <0>;
 		bootargs = "ncores=4 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
-
 	doms {
-		#address-cells = <0x1>;
-		#size-cells = <0x1>;
-
+		#address-cells = <1>;
+		#size-cells = <1>;
 		dom@0 {
 			device_type = "domain";
 			os = "linux";
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
+
+			#address-cells = <1>;
+			#size-cells = <1>;
 
 			cpu {
 				onlinemask = <0xff>;
-				nae-rx-vc = <0x1>;
-				nae-fb-vc = <0x2>;
-				sae-rx-vc = <0x1>;
-				sae-rx-sync-vc = <0x3>;
-				napi-vc-mask = <0x6>;
-			};
+                                nae-rx-vc = <1>;
+                                nae-fb-vc = <2>;
+                                sae-rx-vc = <1>; /*  */
+                                sae-rx-sync-vc  = <3>;
+                                napi-vc-mask = <0x6>;
 
+			};
 			uart {
-				id = <0x0>;
-				owner = <0x1>;
+				id = <0>;
+				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-
-			fmn {
-				node_0_vc_mask = <0x66666666>;
-			};
-
+                        fmn {
+                                node_0_vc_mask = <0x66666666>;
+                        };
 			owner-config {
 				nae = <0x0>;
 				sae = <0x1>;
@@ -58,121 +70,136 @@
 		dom@1 {
 			device_type = "domain";
 			os = "netos";
-			heap-size = <0x0 0x8000000>;
-			shared-mem = <0x0 0x40000000 0x0 0x10000000>;
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
+
+			heap-size = <0x0 0x8000000>; // 128M
+			shared-mem = <0x0 0x40000000 0x0 0x10000000>; // 128M @ 1GB
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
 			app-bootcmd = "smpload";
-			app-loadaddr = "0xf0000000";
+			app-loadaddr = "0xf0000000"; // 3.75GB
 
 			kernel {
-				size = <0x2000000>;
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+				/* Location in Dom0 ramdisk */
 				location = "/tmp/xen/netos.elf";
-				dom_destroy_hack = <0x0>;
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <0>;
 			};
 
 			cpu {
 				onlinemask = <0xff>;
-				nae-rx-vc = <0x0>;
-				nae-fb-vc = <0x3>;
-				sae-rx-vc = <0x0>;
-				sae-rx-sync-vc = <0x3>;
-				nae-buf-alloc-by-app = <0x1>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <3>;
+                                /* Setting this to '1' makes NAE driver to skip buf alloction and initial
+                                   sending of packet buffers*/
+                                sae-rx-vc = <0>; /* shared with nae; Has to be exclusive of linux dom nae vc */
+                                sae-rx-sync-vc  = <3>; /* shared with nae; Has to be exclusive of linux dom nae vc */
+                                nae-buf-alloc-by-app = <1>; 
 			};
-
 			uart {
-				id = <0x0>;
+				id = <0>;
 			};
-
 			memory {
-				reg = <0x60000000 0x60000000>;
+				reg = <0x60000000 0x60000000>;  // 1.5GB @ 1.5GB
 			};
-
-			app-param {
+			app-param{
 				onlinemask = <0xff>;
-				enable-nae-hw-parser = <0x0>;
-				enable-nae-jumbo = <0x0>;
-				enable-nae-p2p = <0x0>;
+				enable-nae-hw-parser = <0>;
+				enable-nae-jumbo = <0>;
+				enable-nae-p2p = <0>;
+				enable-poe = <0>;
+				enable-microstruct = <0>;
+				launch-mode = "smp";	/* smp or amp */
 			};
-
-			nae {
+			nae{
 			};
-
 			owner-config {
-				nae = <0x1>;
-				sae = <0x1>;
+				nae = <0x1>;   // currently for node0 and node1
+				sae = <0x1>;   // for node0
 				rsa = <0x1>;
 				fmn = <0x1>;
 			};
-
-			fmn {
-				node_0_vc_mask = <0x99999999>;
-			};
+                        fmn {
+                                node_0_vc_mask = <0x99999999>;
+                        };
 		};
 	};
 
 	chosen {
-		bootargs = "root=/dev/nfs rw nfsroot=192.168.0.1:/nfsroot/rootfs,nfsvers=3 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200 skew_tick=1";
+		bootargs = " console=ttyS0,115200";
+		/* linux,initrd-start=<0x00c00000>;
+		   linux,initrd-end=<0x02c00000>; */
 	};
 
+	/* These binaries are downloaded at the resp physical memory locations
+	 * by their corresponding bootstrapping loaders. For example,
+	 * u-boot is loaded by x-load at 193M, sysconfig is loaded by u-boot
+	 * at 1M, hypervisor by u-boot hypervisor at 136M.
+	 * On simulator all these binaries are pre-loaded by using '-F' option
+	 * for convenience. On silicon, they will be loaded by their corresponding
+	 * temporary download locations the stage-1/stage-2 firmware
+	 */
 	firmware-download {
-		u-boot = <0xc100000 0x3f00000>;
-		sysconfig = <0x100000 0x100000>;
-		hypervisor = <0x8800000 0x800000>;
-		dom0 = <0x9000000 0x3000000>;
-		domU-ramdisk = <0x60000000 0x60800000>;
+		u-boot        = <0x0c100000 0x3f00000>;  /* 63M @ 193M */
+		sysconfig     = <0x00100000 0x00100000>; /* 1M @ 1M */
+		hypervisor    = <0x08800000 0x00800000>; /* 8M @ 136M */
+		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
+		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
 	};
 
 	soc {
-		#address-cells = <0x2>;
-		#size-cells = <0x1>;
+		#address-cells = <2>;
+		#size-cells = <1>;
 		compatible = "simple-bus";
-		ranges = <0x0 0x0 0x0 0x18000000 0x4000000 0x1 0x0 0x0 0x16000000 0x1000000>;
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x02000000>; // GBU chipselects
 
-		serial@30000 {
+		serial0: serial@30000 {
 			device_type = "serial";
 			compatible = "ns16550";
-			reg = <0x0 0x30100 0xa00>;
-			reg-shift = <0x2>;
-			reg-io-width = <0x4>;
-			clock-frequency = <0x7f28155>;
-			interrupt-parent = <0x1>;
-			interrupts = <0x11>;
+			reg = <0 0x30100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
 		};
-
-		serial@31000 {
+		serial1: serial@31000 {
 			device_type = "serial";
 			compatible = "ns16550";
-			reg = <0x0 0x31100 0xa00>;
-			reg-shift = <0x2>;
-			reg-io-width = <0x4>;
-			clock-frequency = <0x7f28155>;
-			interrupt-parent = <0x1>;
-			interrupts = <0x12>;
+			reg = <0 0x31100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
 		};
-
-		ocores@37100 {
+		i2c0: ocores@37100 {
 			compatible = "opencores,i2c-ocores";
-			#address-cells = <0x1>;
-			#size-cells = <0x0>;
-			reg = <0x0 0x37100 0x20>;
-			reg-shift = <0x2>;
-			reg-io-width = <0x4>;
-			clock-frequency = <0x1e84800>;
-			interrupt-parent = <0x1>;
-			interrupts = <0x1e>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x37100 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <30>;
 		};
-
-		ocores@37120 {
+		i2c1: ocores@37120 {
 			compatible = "opencores,i2c-ocores";
-			#address-cells = <0x1>;
-			#size-cells = <0x0>;
-			reg = <0x0 0x37120 0x20>;
-			reg-shift = <0x2>;
-			reg-io-width = <0x4>;
-			clock-frequency = <0x1e84800>;
-			interrupt-parent = <0x1>;
-			interrupts = <0x1f>;
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x37120 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <31>;
 
 			rtc@68 {
 				compatible = "dallas,ds1374";
@@ -183,662 +210,1322 @@
 				compatible = "national,lm90";
 				reg = <0x4c>;
 			};
-		};
 
-		pic@4000 {
+			eeprom@57 {
+                                compatible = "xlpge_eeprom";
+                                reg = <0x57>;
+                        };
+		};
+		pic: pic@4000 {
 			interrupt-controller;
-			#address-cells = <0x0>;
-			#interrupt-cells = <0x1>;
-			reg = <0x0 0x4000 0x200>;
-			linux,phandle = <0x1>;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x4000 0x200>;
 		};
 
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
-			bank-width = <0x2>;
-			reg = <0x1 0x0 0x1000000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
 
 			partition@0 {
 				label = "x-loader";
-				reg = <0x0 0x100000>;
+				reg = <0x0 0x100000>; /* 1M */
 				read-only;
 			};
 
 			partition@100000 {
 				label = "u-boot";
-				reg = <0x100000 0x100000>;
+				reg = <0x100000 0x100000>; /* 1M */
 			};
 
 			partition@200000 {
 				label = "kernel";
-				reg = <0x200000 0x500000>;
+				reg = <0x200000 0x500000>; /* 5M */
 			};
 
 			partition@700000 {
 				label = "rootfs";
-				reg = <0x700000 0x800000>;
+				reg = <0x700000 0x800000>; /* 8M */
 			};
 
 			partition@f00000 {
 				label = "env";
-				reg = <0xf00000 0x100000>;
+				reg = <0xf00000 0x100000>; /* 1M */
 				read-only;
 			};
 		};
 
-		fmn@node-0 {
-			default-credits = <0x32>;
-			default-queue-size = <0x4000>;
-			fmn-spill-mem-base = <0x0 0x10000000>;
-			fmn-spill-mem-size = <0x0 0x2000000>;
+		nand_flash@0,0 {
+			compatible = "netlogic,xlp-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x39000 0x1000>;
+
+			interrupts = <43>;
+			interrupt-parent = <&pic>;
+			nand-ecc-mode = "hw";
 
-			q-config {
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
 			};
-		};
 
-		fmn@node-1 {
-			default-credits = <0x32>;
-			default-queue-size = <0x4000>;
-			fmn-spill-mem-base = <0x0 0x0>;
-			fmn-spill-mem-size = <0x0 0x2000000>;
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
 
-			q-config {
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
 			};
 		};
 
-		fmn@node-2 {
-		};
+		spi: xlp_spi@13a000 {
+			compatible = "netlogic,xlp-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x3a000 0x100>;
 
-		fmn@node-3 {
-		};
+			spi_nor@1 {
+				compatible = "spansion,s25sl12801";
+				#address-cells = <1>;
+				#size-cells = <1>;
 
-		nae@node-0 {
-			model = "MIPS,XLP8XX NAE CFG";
-			compatible = "NETL,XLP8XX_A0";
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
-			frequency = <0x1f4>;
+				reg = <1>;		/* Chip Select */
+				spi-max-frequency = <40000000>;
 
-			ucore {
+				partition@0 {
+					label = "x-loader";
+					reg = <0x0 0x200000>; /* 2M */
+					read-only;
+				};
 
-				src@1 {
-					num-opcodes = <0x3f>;
-					path = "/home/yjin-local/bcm-sdk/sdk-base/sysconfig/nae/ucore/default.c";
-					timestamp = "Tue Apr  9 11:08:25 2013\n";
-					mask = <0xff>;
-					opcodes = <0x3c1c0010 0x279cf808 0x3c020010 0x2442f808 0x3c030010 0x2463f808 0xac400000 0x43082b 0x1420fffd 0x24420004 0x3c1d0010 0x27bdf9c0 0x27a50020 0x27a60028 0xaca00000 0xacc00000 0xc000029 0x2021 0x1000ffff 0x0 0x3c020000 0x8c420130 0x27bdffe0 0x2403ffff 0xafbf001c 0xafb10018 0x10430009 0xafb00014 0x3c100000 0x26100130 0x2411ffff 0x40f809 0x2610fffc 0x8e020000 0x1451fffc 0x0 0x8fbf001c 0x8fb10018 0x8fb00014 0x3e00008 0x27bd0020 0x3c030002 0x8c628000 0x27bdfff8 0x3c060010 0xafa20000 0x24030001 0x24050004 0x24c60001 0x8000037 0x3c020170 0x34088030 0xad050000 0x34088000 0xad020000 0x34088004 0x8d040000 0x8fa40000 0x1483fff8 0x0 0x34088030 0x8000035 0xad060000>;
+				partition@200000 {
+					label = "kernel";
+					reg = <0x200000 0x500000>; /* 5M */
 				};
-			};
 
-			freein-fifo-config {
-				freein-fifo-spill-mem-range = <0x0 0xfe00000 0x0 0x200000>;
-				freein-fifo-onchip-num-descs = <0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38>;
-				freein-fifo-spill-num-descs = <0x4b0>;
-			};
+				partition@700000 {
+					label = "rootfs";
+					reg = <0x700000 0x800000>; /* 8M */
+				};
 
-			vfbid-config {
-				vfbid-map = <0x0 0x1 0x1 0x5 0x2 0x9 0x3 0xd 0x4 0x11 0x5 0x15 0x6 0x19 0x7 0x1d 0x8 0x21 0x9 0x25 0xa 0x29 0xb 0x2d 0xc 0x31 0xd 0x35 0xe 0x39 0xf 0x3d 0x10 0x41 0x11 0x45 0x12 0x49 0x13 0x4d 0x14 0x51 0x15 0x55 0x16 0x59 0x17 0x5d 0x18 0x61 0x19 0x65 0x1a 0x69 0x1b 0x6d 0x1c 0x71 0x1d 0x75 0x1e 0x79 0x1f 0x7d>;
+				partition@f00000 {
+					label = "env";
+					reg = <0xf00000 0x100000>; /* 1M */
+					read-only;
+				};
 			};
+			spi_nand@2 {
+				compatible = "spinand,mt29f";
+				#address-cells = <1>;
+				#size-cells = <1>;
+				reg = <2>;	/* SPI NAND CS */
+				spi-max-frequency = <50000000>;
+
+				partition@0 {
+					label = "firmware";
+					reg = <0x0 0x1c00000>;
+				};
 
-			poe {
-				mode = "bypass";
-				distribution-enable = <0x1>;
-				dist-drop-enable = <0x0>;
-				class-drop-enable = <0x0>;
-				drop-timer = <0x0>;
-				dest-threshold = <0xa>;
-				dist-threshold = <0xa 0xa 0xa 0xa>;
-				statistics-enable = <0x0>;
-				poe-spill-address = <0x0>;
-				poe-spill-length = <0x0>;
-
-				distribution_vectors {
-					dv0 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x1>;
-					dv1 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv2 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv3 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv4 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv5 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv6 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv7 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv8 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv9 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv10 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv11 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv12 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv13 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv14 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv15 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
+				partition@1 {
+					label = "kernel";
+					reg = <0x1c00000 0x0>;
 				};
 			};
 
-			complex@0 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+		};
+		gpio: xlp_gpio@34000 {
+			compatible = "netlogic,xlp-gpio";
+			reg = <0 0x34000 0x1000>;
+			#gpio-cells = <2>;
+			gpio-controller;
+
+			#interrupt-cells = <1>;
+			interrupt-parent = <&pic>;
+			interrupts = <39>;
+			interrupt-controller;
+		};
+		ethernet@2,0 {
+		        compatible = "smsc,lan9115";
+		        reg = <1 0x01200000 0x100000>;
+			reg-io-width = <4>;
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+		        interrupts = <40>;
+		        interrupt-parent = <&pic>;
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					mgmt-port = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x4 0x7 0x6 0x5>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
+		        phy-mode = "mii";
+		        mac-address = [00 11 22 33 44 55];
+			smsc,irq-push-pull;
+		};
+fmn@node-0{
+        default-credits = <50>;
+        default-queue-size = <28672>;
+        fmn-spill-mem-base = <0x00000000 0x10000000>; /*0 - dynamic allocation, only for 64 bit linux */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
+		/* credits from station
+                   "cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs"
+                   The order and number of station should be matching with the list given above
+                   Here, credits 0 means the default credits.
+                   Right now there is no way to configure credit of zero
+
+		"station name" {
+                        queue-size = <>; queue size for all the "station name" vcs
+                        credits-from {
+                                node-0 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                        };
+                };
+		*/
 
-				interlaken {
-					db = "cortina";
-					loopback = <0x0>;
-					num-lanes = <0x4>;
-					lane-rate = <0x0>;
-					iface-fifo-size = <0x6e>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x4>;
-					rx-buffer-size = <0x730>;
-					num-free-descs = <0x12c>;
-					free-desc-size = <0x800>;
-					ucore-mask = <0xffff>;
-				};
-			};
 
-			complex@1 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+	};
+};
+fmn@node-1{
+        default-credits = <50>;
+        default-queue-size = <28672>;
+        fmn-spill-mem-base = <0 0>; /*0 - dynamic allocation */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+	};
+};
+fmn@node-2{
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x8 0xb 0xa 0x9>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
-			};
+};
+fmn@node-3{
 
-			complex@2 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+};
+  nae@node-0 {
+	model = "MIPS,XLP8XX NAE CFG";
+	compatible = "NETL,XLP8XX_A0";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	frequency = <500>;
+
+	ucore {
+		src@1 {
+num-opcodes = <79>;
+			path = "/work/bsp/xlp9xx/sdk-base-3.0/sdk/sysconfig/nae/ucore/dpi_nae_hash_mc8.c";
+			timestamp = "Sun Oct 13 02:42:55 2013
+";
+			mask = <0xff>;
+			opcodes = <
+				0x3c1c0010 
+				0x279cf808 
+				0x3c020010 
+				0x2442f808 
+				0x3c030010 
+				0x2463f808 
+				0xac400000 
+				0x0043082b 
+				0x1420fffd 
+				0x24420004 
+				0x3c1d0010 
+				0x27bdf9c0 
+				0x27a50020 
+				0x27a60028 
+				0xaca00000 
+				0xacc00000 
+				0x0c000029 
+				0x00002021 
+				0x1000ffff 
+				0x00000000 
+				0x3c020000 
+				0x8c420170 
+				0x27bdffe0 
+				0x2403ffff 
+				0xafbf001c 
+				0xafb10018 
+				0x10430009 
+				0xafb00014 
+				0x3c100000 
+				0x26100170 
+				0x2411ffff 
+				0x0040f809 
+				0x2610fffc 
+				0x8e020000 
+				0x1451fffc 
+				0x00000000 
+				0x8fbf001c 
+				0x8fb10018 
+				0x8fb00014 
+				0x03e00008 
+				0x27bd0020 
+				0x27bdffe8 
+				0x3c02000f 
+				0xafa0000c 
+				0x3442fe00 
+				0xafa00008 
+				0x3c040170 
+				0xafa00004 
+				0xafa00000 
+				0x34088004 
+				0x8d030000 
+				0x8c460000 
+				0xafa60004 
+				0x8c450004 
+				0xafa50000 
+				0x8c430008 
+				0xafa3000c 
+				0x8fb80004 
+				0x8fb90000 
+				0x8faf000c 
+				0x03387026 
+				0x01cf6826 
+				0xafad0008 
+				0x8fac0008 
+				0x000c5842 
+				0xafab0008 
+				0x8faa0008 
+				0x31490007 
+				0x00094080 
+				0xafa80010 
+				0x8fa70010 
+				0x30e60fff 
+				0x00062a00 
+				0x34a30001 
+				0x34088030 
+				0xad030000 
+				0x34088000 
+				0x08000031 
+				0xad040000 
+			>;
+		};
+	};
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+        freein-fifo-config {
+                /* 
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                   If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+		freein-fifo-spill-mem-range = <0x00000000 0x0fe00000 0x00000000 0x00200000>; // 2MB @ 254MB
+                freein-fifo-onchip-num-descs = <56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56>; 
+                freein-fifo-spill-num-descs = <1200>;
+        };
+
+	// VFBID MAP: Upto 127 entries
+	// (each entry is a pair of (vfbid , dest-vc)
+	// Legal range: (vfbid (0 - 126), dest-vc (0 - 4095))
+	vfbid-config {
+		vfbid-map = <
+		      0    1    1    5    2   9    3    13
+                      4    17   5    21   6   25   7    29
+                      8    33   9    37   10  41   11   45
+                      12   49   13   53   14  57   15   61
+                      16   65   17   69   18  73   19   77
+                      20   81   21   85   22  89   23   93
+                      24   97   25  101   26 105   27  109
+                      28  113   29  117   30 121   31  125
+                >;
+	};
 
-				interlaken {
-					db = "cortina";
-					loopback = <0x0>;
-					num-lanes = <0x4>;
-					lane-rate = <0x0>;
-					iface-fifo-size = <0x6e>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x4>;
-					rx-buffer-size = <0x730>;
-					num-free-descs = <0x12c>;
-					free-desc-size = <0x800>;
-					ucore-mask = <0xffff>;
-				};
+	// Packet Ordering Engine (POE)
+	poe {	
+	
+		mode = "bypass";
+
+                distribution-enable = <1>;
+                // 16 bit mask
+                dist-drop-enable = <0>;
+                // 8 bit mask
+                class-drop-enable = <0>;
+                drop-timer = <0>;
+                dest-threshold = <0xa>;
+                dist-threshold = <0xa 0xa 0xa 0xa>;
+                statistics-enable = <0>;
+
+//		poe-spill-address = <0xec00000>;
+//		poe-spill-length =  <0x1000000>;
+
+		// Comminting the actual value to be given to
+		// POE as POE is not getting called in the
+		// regular case
+		poe-spill-address = <0x0>;
+		poe-spill-length =  <0x0>;
+
+		// Each vector is 512 bit with masb indicating vc 512 and lsb indicating vc 0
+		// Format : 512-bit-vector is specified as 16 32-bit words
+		// Left most word has the vc range 511-479 right most word has vc range 31 - 0
+		// Each word has the MSB select higer vc number and LSB select lower vc num
+                distribution_vectors {
+                                     dv0  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0x1>;
+                                     dv1  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv2  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv3  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv4  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv5  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv6  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv7  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv8  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv9  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv10 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv11 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv12 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv13 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv14 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv15 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                };
+	};
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x0 0x3 0x2 0x1>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
-			};
+	complex@0 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels 
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;	// 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			// In xlp3xx number of ucores available is 8. so, ucore_mask for xlp3xx is (ucore-mask & 0xFF)
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels 
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			// In xlp3xx number of ucores available is 8. so, ucore_mask for xlp3xx is (ucore-mask & 0xFF)
+			higig-mode = <0>;
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+		};
+		sgmii {
+	                loopback = <0 0 0 0>;
+			mgmt-port = <0 0 0 0>;
+        	        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                	iface-fifo-size = <13 13 13 13>;
+
+	                ext-phy-addr = <4 7 6 5>;
+        	        ext-phy-bus = <1 1 1 1>;
+
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	num-channels = <1 1 1 1>;
+	                parser-sequence-fifo-size = <62 62 62 62>;
+
+        	        rx-buffer-size = <128 128 128 128>;
+
+                	// Max available descriptors are 1024 (across all complexes).
+	                // Per port num_free_descriptors must be even number
+        	        num-free-descs = <52 52 52 52>;
+                	free-desc-size = <2048 2048 2048 2048>;
+	                ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+		};
+                interlaken {
+                        //select daughter board : cortina or loopback
+                        db = "cortina";
 
-			complex@3 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+                        loopback = <0>;
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					xgmii-speed = <0xa>;
-					ucore-mask = <0xffff>;
-					vlan-pri-en = <0x0>;
-				};
+                        // Maximum number of lanes per interface = 8 (from 2 complexes)
+                        num-lanes = <4>;
+                        // lanerate 0 = 3.125Gbps , 1 = 6.25Gbps
+                        lane-rate = <0>;
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0xc 0xf 0xe 0xd>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
-			};
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <110>;
 
-			complex@4 {
-				device_type = "nae-complex";
-				mode = "sgmii";
-
-				sgmii {
-					loopback = <0x0 0x0>;
-					mgmt-port = <0x1 0x0>;
-					iface-fifo-size = <0xd 0xd>;
-					ext-phy-addr = <0x10 0x11>;
-					ext-phy-bus = <0x0 0x0>;
-					num-channels = <0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80>;
-					num-free-descs = <0x34 0x34>;
-					free-desc-size = <0x800 0x800>;
-					ucore-mask = <0xffff 0xffff>;
-				};
-			};
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                        num-channels = <4>;
+                        rx-buffer-size = <1840>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <300>;
+                        free-desc-size = <2048>;
+                        ucore-mask = <0xffff>;
+                };
+
+	};
+	complex@1 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+			
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+	
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;	// 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+			
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+	
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
 		};
+		sgmii {
+	                loopback = <0 0 0 0>;
 
-		nae@node-1 {
-			model = "MIPS,XLP8XX NAE CFG";
-			compatible = "NETL,XLP8XX_A0";
-			#address-cells = <0x1>;
-			#size-cells = <0x1>;
-			frequency = <0x1f4>;
+	                // Max ingress fifo size 256 units (size of one unit is 64 byte)
+        	        iface-fifo-size = <13 13 13 13>;
 
-			ucore {
+                	ext-phy-addr = <8 11 10 9>;
+	                ext-phy-bus = <1 1 1 1>;
 
-				src@1 {
-					num-opcodes = <0x3f>;
-					path = "/home/yjin-local/bcm-sdk/sdk-base/sysconfig/nae/ucore/default.c";
-					timestamp = "Tue Apr  9 11:08:25 2013\n";
-					mask = <0xff>;
-					opcodes = <0x3c1c0010 0x279cf808 0x3c020010 0x2442f808 0x3c030010 0x2463f808 0xac400000 0x43082b 0x1420fffd 0x24420004 0x3c1d0010 0x27bdf9c0 0x27a50020 0x27a60028 0xaca00000 0xacc00000 0xc000029 0x2021 0x1000ffff 0x0 0x3c020000 0x8c420130 0x27bdffe0 0x2403ffff 0xafbf001c 0xafb10018 0x10430009 0xafb00014 0x3c100000 0x26100130 0x2411ffff 0x40f809 0x2610fffc 0x8e020000 0x1451fffc 0x0 0x8fbf001c 0x8fb10018 0x8fb00014 0x3e00008 0x27bd0020 0x3c030002 0x8c628000 0x27bdfff8 0x3c060010 0xafa20000 0x24030001 0x24050004 0x24c60001 0x8000037 0x3c020170 0x34088030 0xad050000 0x34088000 0xad020000 0x34088004 0x8d040000 0x8fa40000 0x1483fff8 0x0 0x34088030 0x8000035 0xad060000>;
-				};
-			};
+        	        // Max parser sequence fifo size 1024 packets
+                	// (if 1588 Timestamp is not required, then max size increases to 2048)
+	                num-channels = <1 1 1 1>;
+        	        parser-sequence-fifo-size = <62 62 62 62>;
 
-			freein-fifo-config {
-				freein-fifo-onchip-num-descs = <0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38 0x38>;
-				freein-fifo-spill-num-descs = <0x0>;
-			};
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+        	        rx-buffer-size = <128 128 128 128>;
 
-			vfbid-config {
-				hw-replenish = <0x0>;
-			};
 
-			poe {
-				mode = "bypass";
-				distribution-enable = <0x1>;
-				dist-drop-enable = <0x0>;
-				class-drop-enable = <0x0>;
-				drop-timer = <0x0>;
-				dest-threshold = <0xa>;
-				dist-threshold = <0xa 0xa 0xa 0xa>;
-				statistics-enable = <0x0>;
-
-				distribution_vectors {
-					dv0 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x1>;
-					dv1 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv2 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv3 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv4 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv5 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv6 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv7 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv8 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv9 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv10 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv11 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv12 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv13 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv14 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-					dv15 = <0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0 0x0>;
-				};
-			};
+                	// Max available descriptors are 1024 (across all complexes).
+	                // Per port num_free_descriptors must be even number
+        	        num-free-descs = <52 52 52 52>;
+                	free-desc-size = <2048 2048 2048 2048>;
+	                ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+		};
 
-			complex@0 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
+	};
+	complex@2 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+                xaui {
+                        loopback = <0>;
+
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <55>;
+
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+			
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                        num-channels = <1>;
+                        rx-buffer-size = <944>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <150>;
+                        free-desc-size = <2048>;
+			higig-mode = <0>;	// 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+                        ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+                };
+
+                rxaui {
+                        loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <55>;
+
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+			
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                        num-channels = <1>;
+                        rx-buffer-size = <944>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <150>;
+                        free-desc-size = <2048>;
+			higig-mode = <0>;
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+                        ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+                };
+
+		interlaken {
+	                //select daughter board : cortina or loopback
+        	        db = "cortina";
+
+                	loopback = <0>;
+
+	                // Maximum number of lanes per interface = 8 (from 2 complexes)
+        	        num-lanes = <4>;
+                	// lanerate 0 = 3.125Gbps , 1 = 6.25Gbps
+	                lane-rate = <0>;
+	
+        	        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                	iface-fifo-size = <110>;
+
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	parser-sequence-fifo-size = <225>;
+			
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                	num-channels = <4>;
+	                rx-buffer-size = <1840>;
+
+	                // Max available descriptors are 1024  (across all complexes).
+        	        // Per port num_free_descriptors must be even number
+                	num-free-descs = <300>;
+	                free-desc-size = <2048>;
+        	        ucore-mask = <0xffff>;
+		};
+		sgmii {
+        	        loopback = <0 0 0 0>;
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
+                	// Max ingress fifo size 256 units (size of one unit is 64 byte)
+	                iface-fifo-size = <13 13 13 13>;
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x4 0x7 0x6 0x5>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
+        	        ext-phy-addr = <0 3 2 1>;
+                	ext-phy-bus = <1 1 1 1>;
 
-				interlaken {
-					db = "cortina";
-					loopback = <0x0>;
-					num-lanes = <0x4>;
-					lane-rate = <0x0>;
-					iface-fifo-size = <0x6e>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x4>;
-					rx-buffer-size = <0x730>;
-					num-free-descs = <0x12c>;
-					free-desc-size = <0x800>;
-					ucore-mask = <0xffff>;
-				};
-			};
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	num-channels = <1 1 1 1>;
+	                parser-sequence-fifo-size = <62 62 62 62>;
 
-			complex@1 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+	                rx-buffer-size = <128 128 128 128>;
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x8 0xb 0xa 0x9>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
-			};
+        	        // Max available descriptors are 1024 (across all complexes).
+                	// Per port num_free_descriptors must be even number
+	                num-free-descs = <52 52 52 52>;
+        	        free-desc-size = <2048 2048 2048 2048>;
+                	ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+		};
+	};
+	complex@3 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+	
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;	// 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+	
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			xgmii-speed = <10>; //10=10G , 12=12G, 16=16G
+			ucore-mask = <0xffff>;
+			vlan-pri-en = <0x0>;
+		};
+                sgmii {
+                        loopback = <0 0 0 0>;
 
-			complex@2 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <13 13 13 13>;
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
+                        ext-phy-addr = <12 15 14 13>;
+                        ext-phy-bus = <1 1 1 1>;
 
-				interlaken {
-					db = "cortina";
-					loopback = <0x0>;
-					num-lanes = <0x4>;
-					lane-rate = <0x0>;
-					iface-fifo-size = <0x6e>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x4>;
-					rx-buffer-size = <0x730>;
-					num-free-descs = <0x12c>;
-					free-desc-size = <0x800>;
-					ucore-mask = <0xffff>;
-				};
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        num-channels = <1 1 1 1>;
+                        parser-sequence-fifo-size = <62 62 62 62>;
 
-				sgmii {
-					loopback = <0x0 0x0 0x0 0x0>;
-					iface-fifo-size = <0xd 0xd 0xd 0xd>;
-					ext-phy-addr = <0x0 0x3 0x2 0x1>;
-					ext-phy-bus = <0x1 0x1 0x1 0x1>;
-					num-channels = <0x1 0x1 0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e 0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80 0x80 0x80>;
-					num-free-descs = <0x34 0x34 0x34 0x34>;
-					free-desc-size = <0x800 0x800 0x800 0x800>;
-					ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
-				};
-			};
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                        rx-buffer-size = <128 128 128 128>;
 
-			complex@3 {
-				device_type = "nae-complex";
-				mode = "xaui";
-
-				xaui {
-					loopback = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
 
-				rxaui {
-					loopback = <0x0>;
-					submode = <0x2>;
-					scrambler = <0x0>;
-					iface-fifo-size = <0x37>;
-					parser-sequence-fifo-size = <0xe1>;
-					num-channels = <0x1>;
-					rx-buffer-size = <0x3b0>;
-					num-free-descs = <0x96>;
-					free-desc-size = <0x800>;
-					higig-mode = <0x0>;
-					ucore-mask = <0xffff>;
-				};
-			};
+                        // Max available descriptors are 1024 (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <52 52 52 52>;
+                        free-desc-size = <2048 2048 2048 2048>;
+                        ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+                };
+	};
+	complex@4 {
+		device_type = "nae-complex";
+		mode = "sgmii";
+
+		sgmii {
+			loopback = <0 0>;
+	
+			mgmt-port = <1 0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <13 13>;
+                
+			ext-phy-addr = <16 17>;
+        	        ext-phy-bus = <0 0>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			num-channels = <1 1>;
+			parser-sequence-fifo-size = <62 62>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			rx-buffer-size = <128 128>;
+				   
+
+			// Max available descriptors are 1024 (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <52 52>;
+			free-desc-size = <2048 2048>;
+			ucore-mask = <0xffff 0xffff>;
+		};
+	};
+};
+   nae@node-1 {
+	model = "MIPS,XLP8XX NAE CFG";
+	compatible = "NETL,XLP8XX_A0";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	frequency = <500>;
+
+	ucore {
+		src@1 {
+num-opcodes = <79>;
+			path = "/work/bsp/xlp9xx/sdk-base-3.0/sdk/sysconfig/nae/ucore/dpi_nae_hash_mc8.c";
+			timestamp = "Sun Oct 13 02:42:55 2013
+";
+			mask = <0xff>;
+			opcodes = <
+				0x3c1c0010 
+				0x279cf808 
+				0x3c020010 
+				0x2442f808 
+				0x3c030010 
+				0x2463f808 
+				0xac400000 
+				0x0043082b 
+				0x1420fffd 
+				0x24420004 
+				0x3c1d0010 
+				0x27bdf9c0 
+				0x27a50020 
+				0x27a60028 
+				0xaca00000 
+				0xacc00000 
+				0x0c000029 
+				0x00002021 
+				0x1000ffff 
+				0x00000000 
+				0x3c020000 
+				0x8c420170 
+				0x27bdffe0 
+				0x2403ffff 
+				0xafbf001c 
+				0xafb10018 
+				0x10430009 
+				0xafb00014 
+				0x3c100000 
+				0x26100170 
+				0x2411ffff 
+				0x0040f809 
+				0x2610fffc 
+				0x8e020000 
+				0x1451fffc 
+				0x00000000 
+				0x8fbf001c 
+				0x8fb10018 
+				0x8fb00014 
+				0x03e00008 
+				0x27bd0020 
+				0x27bdffe8 
+				0x3c02000f 
+				0xafa0000c 
+				0x3442fe00 
+				0xafa00008 
+				0x3c040170 
+				0xafa00004 
+				0xafa00000 
+				0x34088004 
+				0x8d030000 
+				0x8c460000 
+				0xafa60004 
+				0x8c450004 
+				0xafa50000 
+				0x8c430008 
+				0xafa3000c 
+				0x8fb80004 
+				0x8fb90000 
+				0x8faf000c 
+				0x03387026 
+				0x01cf6826 
+				0xafad0008 
+				0x8fac0008 
+				0x000c5842 
+				0xafab0008 
+				0x8faa0008 
+				0x31490007 
+				0x00094080 
+				0xafa80010 
+				0x8fa70010 
+				0x30e60fff 
+				0x00062a00 
+				0x34a30001 
+				0x34088030 
+				0xad030000 
+				0x34088000 
+				0x08000031 
+				0xad040000 
+			>;
+		};
+	};
 
-			complex@4 {
-				device_type = "nae-complex";
-				mode = "sgmii";
-
-				sgmii {
-					loopback = <0x0 0x0>;
-					mgmt-port = <0x1 0x0>;
-					iface-fifo-size = <0xd 0xd>;
-					ext-phy-addr = <0x10 0x11>;
-					ext-phy-bus = <0x0 0x0>;
-					num-channels = <0x1 0x1>;
-					parser-sequence-fifo-size = <0x3e 0x3e>;
-					rx-buffer-size = <0x80 0x80>;
-					num-free-descs = <0x34 0x34>;
-					free-desc-size = <0x800 0x800>;
-					ucore-mask = <0xffff 0xffff>;
-				};
-			};
+        freein-fifo-config {
+                /* 
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                   If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+
+                freein-fifo-onchip-num-descs = <56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56 56>;
+                freein-fifo-spill-num-descs = <0>;
+        };
+
+	// VFBID MAP: Upto 127 entries
+	// (each entry is a pair of (vfbid , dest-vc)
+	// Legal range: (vfbid (0 - 126), dest-vc (0 - 4095))
+	vfbid-config {
+		hw-replenish = <0>;
+	};
+
+	// Packet Ordering Engine (POE)
+	poe {	
+	
+		mode = "bypass";
+
+		// Each vector is 512 bit with masb indicating vc 512 and lsb indicating vc 0
+		// Format : 512-bit-vector is specified as 16 32-bit words
+		// Left most word has the vc range 511-479 right most word has vc range 31 - 0
+		// Each word has the MSB select higer vc number and LSB select lower vc num
+		
+		distribution-enable = <1>;
+		// 16 bit mask
+		dist-drop-enable = <0>;	 
+		// 8 bit mask
+		class-drop-enable = <0>;
+		drop-timer = <0>;
+		dest-threshold = <0xa>;
+		dist-threshold = <0xa 0xa 0xa 0xa>;
+		statistics-enable = <0>;
+ 
+                distribution_vectors {
+                                     dv0  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0x1>;
+                                     dv1  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv2  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv3  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv4  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv5  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv6  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv7  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv8  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv9  = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv10 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv11 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv12 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv13 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv14 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                                     dv15 = <0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+                };
+	};
+
+	complex@0 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
 		};
+		sgmii {
+	                loopback = <0 0 0 0>;
+	
+        	        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                	iface-fifo-size = <13 13 13 13>;
 
-		nae@node-2 {
+	                ext-phy-addr = <4 7 6 5>;
+        	        ext-phy-bus = <1 1 1 1>;
+
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	num-channels = <1 1 1 1>;
+	                parser-sequence-fifo-size = <62 62 62 62>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+        	        rx-buffer-size = <128 128 128 128>;
+
+
+                	// Max available descriptors are 1024 (across all complexes).
+	                // Per port num_free_descriptors must be even number
+        	        num-free-descs = <52 52 52 52>;
+                	free-desc-size = <2048 2048 2048 2048>;
+	                ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+		};
+                interlaken {
+                        //select daughter board : cortina or loopback
+                        db = "cortina";
+
+                        loopback = <0>;
+
+                        // Maximum number of lanes per interface = 8 (from 2 complexes)
+                        num-lanes = <4>;
+                        // lanerate 0 = 3.125Gbps , 1 = 6.25Gbps
+                        lane-rate = <0>;
+
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <110>;
+
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+
+                        // Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                        num-channels = <4>;
+                        rx-buffer-size = <1840>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <300>;
+                        free-desc-size = <2048>;
+                        ucore-mask = <0xffff>;
+                };
+	};
+	complex@1 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+	
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+	
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
 		};
+		sgmii {
+	                loopback = <0 0 0 0>;
+
+	                // Max ingress fifo size 256 units (size of one unit is 64 byte)
+        	        iface-fifo-size = <13 13 13 13>;
+
+                	ext-phy-addr = <8 11 10 9>;
+	                ext-phy-bus = <1 1 1 1>;
+
+        	        // Max parser sequence fifo size 1024 packets
+                	// (if 1588 Timestamp is not required, then max size increases to 2048)
+	                num-channels = <1 1 1 1>;
+        	        parser-sequence-fifo-size = <62 62 62 62>;
 
-		nae@node-3 {
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+        	        rx-buffer-size = <128 128 128 128>;
+
+
+                	// Max available descriptors are 1024 (across all complexes).
+	                // Per port num_free_descriptors must be even number
+        	        num-free-descs = <52 52 52 52>;
+                	free-desc-size = <2048 2048 2048 2048>;
+	                ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
 		};
 
-		nodes {
-			num-nodes = <0x1>;
+	};
+	complex@2 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+                xaui {
+                        loopback = <0>;
+
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <55>;
+
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+
+                        num-channels = <1>;
+                        rx-buffer-size = <944>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <150>;
+                        free-desc-size = <2048>;
+			higig-mode = <0>;
+                        ucore-mask = <0xffff>;
+                };
+                rxaui {
+                        loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+                        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                        iface-fifo-size = <55>;
+
+                        // Max parser sequence fifo size 1024 packets
+                        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                        parser-sequence-fifo-size = <225>;
+
+                        num-channels = <1>;
+                        rx-buffer-size = <944>;
+
+                        // Max available descriptors are 1024  (across all complexes).
+                        // Per port num_free_descriptors must be even number
+                        num-free-descs = <150>;
+                        free-desc-size = <2048>;
+			higig-mode = <0>;
+                        ucore-mask = <0xffff>;
+                };
+
+		interlaken {
+	                //select daughter board : cortina or loopback
+        	        db = "cortina";
+
+                	loopback = <0>;
+
+	                // Maximum number of lanes per interface = 8 (from 2 complexes)
+        	        num-lanes = <4>;
+                	// lanerate 0 = 3.125Gbps , 1 = 6.25Gbps
+	                lane-rate = <0>;
+	
+        	        // Max ingress fifo size 256 units (size of one unit is 64 byte)
+                	iface-fifo-size = <110>;
+
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+                	num-channels = <4>;
+	                rx-buffer-size = <1840>;
+
+	                // Max available descriptors are 1024  (across all complexes).
+        	        // Per port num_free_descriptors must be even number
+                	num-free-descs = <300>;
+	                free-desc-size = <2048>;
+        	        ucore-mask = <0xffff>;
+		};
+		sgmii {
+        	        loopback = <0 0 0 0>;
+
+                	// Max ingress fifo size 256 units (size of one unit is 64 byte)
+	                iface-fifo-size = <13 13 13 13>;
+
+        	        ext-phy-addr = <0 3 2 1>;
+                	ext-phy-bus = <1 1 1 1>;
+
+	                // Max parser sequence fifo size 1024 packets
+        	        // (if 1588 Timestamp is not required, then max size increases to 2048)
+                	num-channels = <1 1 1 1>;
+	                parser-sequence-fifo-size = <62 62 62 62>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+	                rx-buffer-size = <128 128 128 128>;
+
+
+        	        // Max available descriptors are 1024 (across all complexes).
+                	// Per port num_free_descriptors must be even number
+	                num-free-descs = <52 52 52 52>;
+        	        free-desc-size = <2048 2048 2048 2048>;
+                	ucore-mask = <0xffff 0xffff 0xffff 0xffff>;
+		};
+	};
+	complex@3 {
+		device_type = "nae-complex";
+		mode = "xaui"; //or "rxaui"
+		cpld = "yes";
+		xaui {
+			loopback = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
+		};
+		rxaui {
+			loopback = <0>;
+
+			// 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell
+			submode  = <2>;
+			// 0: disable ; 1: enable
+			scrambler  = <0>;
+
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <55>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			parser-sequence-fifo-size = <225>;
+
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			num-channels = <1>;
+			rx-buffer-size = <944>;
+
+			// Max available descriptors are 1024  (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <150>;
+			free-desc-size = <2048>;
+			higig-mode = <0>;
+			ucore-mask = <0xffff>;
+		};
+	};
+	complex@4 {
+		device_type = "nae-complex";
+		mode = "sgmii";
+
+		sgmii {
+			loopback = <0 0>;
+			mgmt-port = <1 0>;
+			// Max ingress fifo size 256 units (size of one unit is 64 byte)
+			iface-fifo-size = <13 13>;
+ 		               
+			ext-phy-addr = <16 17>;
+        	        ext-phy-bus = <0 0>;
+
+			// Max parser sequence fifo size 1024 packets 
+			// (if 1588 Timestamp is not required, then max size increases to 2048)
+			num-channels = <1 1>;
+			parser-sequence-fifo-size = <62 62>;
+	
+			// Since rx_buffer is per context, the buffer size given here will be divided by num-channels
+			rx-buffer-size = <128 128>;
+				   
+
+			// Max available descriptors are 1024 (across all complexes).
+			// Per port num_free_descriptors must be even number
+			num-free-descs = <52 52>;
+			free-desc-size = <2048 2048>;
+			ucore-mask = <0xffff 0xffff>;
 		};
 	};
+};
+nae@node-2 {
+
+};
+nae@node-3 {
+
+};
+		nodes {
+			num-nodes = <1>;
+		};
 
+	};
 	frequency-config {
-		nae = <0xfa>;
-		sae = <0x1f4>;
-		rsa = <0x1f4>;
-		dtre = <0xfa>;
-		cde = <0xfa>;
+		nae = <250>;
+		sae = <500>;
+		rsa = <500>;
+		dtre = <333>;  /* sub-multiple of 667 */
+		cde = <250>;
 	};
 };
+
-- 
1.7.9.5

