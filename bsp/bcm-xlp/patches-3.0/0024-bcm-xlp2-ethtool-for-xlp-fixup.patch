From e598981e5e6c896ae902492d1429aa3c1cf9e078 Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Fri, 14 Feb 2014 17:24:11 +0800
Subject: [PATCH 24/58] bcm-xlp2: ethtool for xlp fixup

Based on SDK 3.0 (2013-10-29)

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 include/linux/ethtool.h      |    6 ++++++
 include/uapi/linux/ethtool.h |   15 +++++++++++++++
 2 files changed, 21 insertions(+)

diff --git a/include/linux/ethtool.h b/include/linux/ethtool.h
index c8e3e7e3..267ceb7 100644
--- a/include/linux/ethtool.h
+++ b/include/linux/ethtool.h
@@ -188,6 +188,12 @@ static inline u32 ethtool_rxfh_indir_default(u32 index, u32 n_rx_rings)
  * of the generic netdev features interface.
  */
 struct ethtool_ops {
+#ifdef CONFIG_NLM_XLP_BOARD
+        int     (*msec_tx_config)(struct net_device *, struct ethtool_cmd *);
+        int     (*msec_tx_mem_config)(struct net_device *, struct ethtool_cmd *);
+        int     (*msec_rx_config)(struct net_device *, struct ethtool_cmd *);
+        int     (*msec_rx_mem_config)(struct net_device *, struct ethtool_cmd *);
+#endif
 	int	(*get_settings)(struct net_device *, struct ethtool_cmd *);
 	int	(*set_settings)(struct net_device *, struct ethtool_cmd *);
 	void	(*get_drvinfo)(struct net_device *, struct ethtool_drvinfo *);
diff --git a/include/uapi/linux/ethtool.h b/include/uapi/linux/ethtool.h
index 0c9b448..fa0b351 100644
--- a/include/uapi/linux/ethtool.h
+++ b/include/uapi/linux/ethtool.h
@@ -47,6 +47,21 @@ struct ethtool_cmd {
 				   * link should be renegotiated if necessary
 				   */
 	__u32	lp_advertising;	/* Features the link partner advertises */
+#ifdef CONFIG_NLM_XLP_BOARD
+/* MAC SEC related params */
+        __u8    node;
+        __u8    num_nae;
+        __u8    port_enable;
+        __u8    index;
+        __u8    tci;
+        __u16   preamble_len;
+        __u32   packet_num;
+        __u32   win_size_thrshld;
+        __u64   sci;
+        __u64   sci_mask;
+        unsigned char key[16];
+/* End MAC SEC */
+#endif
 	__u32	reserved[2];
 };
 
-- 
1.7.9.5

