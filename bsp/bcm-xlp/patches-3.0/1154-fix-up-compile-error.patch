From 9f126c3f6e96142024bcb86fc33fceaacc6529bd Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Thu, 12 Jun 2014 11:08:47 +0800
Subject: [PATCH 154/163] fix up compile error

rebase to sdk 3.0.2

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h        |    2 +-
 .../netlogic/lib/netlib/external/ext_phy_bcm.c     |    2 +-
 arch/mips/netlogic/lib/netlib/src/netsoc_parser.c  |    4 ++--
 arch/mips/netlogic/lib/netlib/src/netsoc_pcs.c     |    4 ++--
 4 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
index 4f4e489..052e6c0 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
@@ -181,7 +181,7 @@ static inline unsigned long long nlh_qid_to_virt_addr(int node, int reg, int sel
 #define nlm_hal_write_outq_config(node, qid, val) \
 	nlh_write_cfg_reg64(nlh_qid_to_virt_addr(node, XLP_OUTQ_CONFIG_REG, qid), val)
 
-#define _ehb() __asm__ __volatile__("ehb" : : : "memory")
+//#define _ehb() __asm__ __volatile__("ehb" : : : "memory")
 
 /* */
 #define xlp_enable(flags)                        \
diff --git a/arch/mips/netlogic/lib/netlib/external/ext_phy_bcm.c b/arch/mips/netlogic/lib/netlib/external/ext_phy_bcm.c
index 95d905a..5005860 100644
--- a/arch/mips/netlogic/lib/netlib/external/ext_phy_bcm.c
+++ b/arch/mips/netlogic/lib/netlib/external/ext_phy_bcm.c
@@ -90,7 +90,7 @@ static int bcm_get_phy_status(net_port_t *netport, uint32_t *speed, uint32_t *du
 		nae_ext = netport->nae->sibling;
 		if(!nae_ext){
 			netsoc_api_print(NETSOC_APIDBG_ERROR, "Neighbour NAE is not accessible \n");
-			return;			
+			return -2;			
 		}
 	}else{
 		nae_ext = nae;
diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_parser.c b/arch/mips/netlogic/lib/netlib/src/netsoc_parser.c
index f6670fc..1d8970b 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_parser.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_parser.c
@@ -158,9 +158,9 @@ int __netsoc_config_enable_flow_table(nae_t *nae, parser_config_t *cfg_parser)
 		if (dest_vc >= max_vc) { /* max vcs in a core */
 			dest_vc = cfg_parser->rx_vc;
 		}
-
 	}
 
+	return NETSOC_API_SUCCESS;	
 }
 
 int __netsoc_configure_nae_hwparser(nae_t *nae, parser_config_t *parser_config)
@@ -168,7 +168,7 @@ int __netsoc_configure_nae_hwparser(nae_t *nae, parser_config_t *parser_config)
 	netsoc_api_print(1, "Configuring parser for nae node %d naeid %d\n",
 			nae->node, nae->nae_id);
 	netsoc_api_print(1, "nae:%p nae->nae_base:%p nae->num_ports:%d nae->node:%d nae->nae_id:%d\n",
-			nae, nae->nae_base, nae->num_ports,  nae->node, nae->nae_id);
+			nae, (void *)(nae->nae_base), nae->num_ports,  nae->node, nae->nae_id);
 
 	__netsoc_config_nae_l2parser(nae, &parser_config->l2);
 	__netsoc_config_nae_l3parser(nae, &parser_config->l3, 0);
diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_pcs.c b/arch/mips/netlogic/lib/netlib/src/netsoc_pcs.c
index 6ccfb1a..8611196 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_pcs.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_pcs.c
@@ -1620,7 +1620,7 @@ void __netsoc_clause_173_enable(nae_t *nae, uint32_t block, uint32_t lane_no)
 	data = netsoc_read_mac_reg(base, KR_CTRL);
 	if((phymode==PHYMODE_XLAUI && lane_no==0) || (phymode==PHYMODE_XFI)){
 		data |= (0x1 << lane_no);
-		nlm_print("KR enabled for complex: %d lane 0\n", block, lane_no);
+		nlm_print("KR enabled for complex: %d lane %d\n", block, lane_no);
 	}
 
 	data &= (~0xF0); 
@@ -1762,7 +1762,7 @@ void __netsoc_perform_clause_173_next_page(nae_t *nae, uint32_t block, uint32_t
 
 }
 
-#define BIT(n)  (1<<n)
+//#define BIT(n)  (1<<n)
 #define  bit_clear(data, n)  data &= ~(n)
 #define bit_set(data, n)     data |= (n)       
 # if 0
-- 
1.7.9.5

