From d7696a043ad50251fa5f3a49d46d40edd3b10fdb Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Thu, 14 Aug 2014 11:16:48 +0800
Subject: [PATCH 2/8] bcm-xlp: fix xhci storage dev detection failure

Fix xhci storage device detection failure.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/usb/core/hcd-pci.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/usb/core/hcd-pci.c b/drivers/usb/core/hcd-pci.c
index caeb8d6..58eed50 100644
--- a/drivers/usb/core/hcd-pci.c
+++ b/drivers/usb/core/hcd-pci.c
@@ -204,9 +204,10 @@ int usb_hcd_pci_probe(struct pci_dev *dev, const struct pci_device_id *id)
 			retval = -ENODEV;
 			goto disable_pci;
 		}
-		hcd_irq = dev->irq;
 	}
 
+	hcd_irq = dev->irq;
+
 	hcd = usb_create_hcd(driver, &dev->dev, pci_name(dev));
 	if (!hcd) {
 		retval = -ENOMEM;
-- 
1.9.1

