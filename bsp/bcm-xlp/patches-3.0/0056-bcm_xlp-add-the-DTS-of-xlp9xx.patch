From 86462c22f3176524297da9badaf5de0599d1cbce Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Tue, 21 Jan 2014 18:01:29 +0800
Subject: [PATCH 56/58] bcm_xlp: add the DTS of xlp9xx

Based on Broadcom SDK 3.0 (2013-10-29)

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/boot/dts/xlp9xx-linux.dts |  919 +++++++++++++++++++++++++++++++++++
 1 file changed, 919 insertions(+)

diff --git a/arch/mips/boot/dts/xlp9xx-linux.dts b/arch/mips/boot/dts/xlp9xx-linux.dts
new file mode 100644
index 0000000..fce51a2
--- /dev/null
+++ b/arch/mips/boot/dts/xlp9xx-linux.dts
@@ -0,0 +1,919 @@
+/*
+ *XLP9XX Device Tree Source
+*/
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-GVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+
+        memory {
+                device_type = "memory";
+                reg =  <0 0x00000000 0 0x0FF00000       // 255M at 1M
+                        0 0x20000000 0 0xa0000000>;     // 2560M at 512M
+        };
+
+        /* memory range for HEv2 pkt mem. Only one contig memory per node supported */
+        pktmem {
+                device_type = "pktmem";
+
+                /* format: node number, 64-bit addr, 64-bit size */
+                reg = <0 0x0 0xe0000000 0x0 0x20000000
+                       1 0x0 0x0 0x0 0x0
+                       2 0x0 0x0 0x0 0x0
+                       3 0x0 0x0 0x0 0x0>;
+        };
+
+	hypervisor {
+		hypervisor-name = "Xen";
+		alloc_dom0_memory = <0>;
+		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
+		domain_heap = <0x80000000 0x20000000>;
+	};
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#nodes = <1>;
+			#cpumask-cells=<3>;
+
+			cpu {
+				onlinemask = <0x1>; /* */
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+				napi-vc-mask = <0xb>;
+				sae-rx-vc = <0>; /* sharing with nae */
+				sae-rx-sync-vc  = <2>; /* should be exclusive */
+				ipsec-async-vc  = <3>;
+				ipsec-sync-vc   = <2>;
+
+			};
+			uart {
+				id = <0>;
+				owner = <1>;
+				sharedcfg = <0x1f000000>;
+			};
+                        fmn {
+				node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_4_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_5_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_6_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_7_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                        };
+			pic {
+			};
+			nae-0 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				/* hw entries */
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				dummy-pktdata-addr = <0x0 0x0ff00000>; // 255 MB
+			};
+			nae-1 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 80 80 80>;
+				/* hw entries */
+				vfbtbl-hw-offset = <80 80 80 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				dummy-pktdata-addr = <0x0 0x0ff00000>; // 255 MB
+			};
+			owner-config {
+				nae = <0x1>;   // currently for node 0
+				sae = <0x1>;
+				rsa = <0x1>;
+				fmn = <0x1>;
+			};
+			resource-allocation {
+                                net@0 {
+                                        port-mask = <0x4 0 0 0>;
+                                        frinlifo-mask = <0xffff 0 0 0>;
+                                        frinlifo-shared-mode = <0 0 0 0>;
+                                        vfbid-sw-offset = <0 0 0 0>;
+                                        vfbid-sw-entries = <0 0 0 0>;
+                                        ucore-mask = <0x1 0 0 0>;
+                                        sram-off = <0 0 0 0>;
+                                };
+				net@1 {
+                                        port-mask = <0x4 0 0 0>;
+                                        frinlifo-mask = <0xffff 0 0 0>;
+                                        frinlifo-shared-mode = <0 0 0 0>;
+                                        vfbid-sw-offset = <0 0 0 0>;
+                                        vfbid-sw-entries = <0 0 0 0>;
+                                        ucore-mask = <0x1 0 0 0>;
+                                        sram-off = <0 0 0 0>;
+                                };
+                        };
+		};
+		dom@1 {
+			device_type = "domain";
+
+			cpu {
+                                onlinemask = <0xffff>;
+                                nae-rx-vc = <2>;
+			};
+
+			resource-allocation {
+				net@0 {
+					port-mask = <0x3 0 0 0>;
+					frinlifo-mask = <0xff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0x2 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
+				net@1 {
+                                        port-mask = <0 0 0 0>;
+                                        frinlifo-mask = <0 0 0 0>;
+                                        frinlifo-shared-mode = <0 0 0 0>;
+                                        vfbid-sw-offset = <0 0 0 0>;
+                                        vfbid-sw-entries = <0 0 0 0>;
+                                        ucore-mask = <0 0 0 0>;
+                                        sram-off = <0 0 0 0>;
+                                };
+			};
+			app-param{
+                                onlinemask = <0xffff>;
+			};
+		};
+                dom@2 {
+                        device_type = "domain";
+
+                        cpu {
+                                onlinemask = <0xffff0000 0x0 0x0>;
+                                nae-rx-vc = <2>;
+                        };
+
+                        resource-allocation {
+                                net@0 {
+                                        port-mask = <0x0 0 0 0>;
+                                        frinlifo-mask = <0x00 0 0 0>;
+                                        frinlifo-shared-mode = <0 0 0 0>;
+                                        vfbid-sw-offset = <0 0 0 0>;
+                                        vfbid-sw-entries = <0 0 0 0>;
+                                        ucore-mask = <0x0 0 0 0>;
+                                        sram-off = <0 0 0 0>;
+					max-l3rules = <0 0 0 0>;
+					max-l4rules = <0 0 0 0>;
+                                };
+                                net@1 {
+                                        port-mask = <0x3 0 0 0>;
+                                        frinlifo-mask = <0xff 0 0 0>;
+                                        frinlifo-shared-mode = <0xff 0 0 0>;
+                                        vfbid-sw-offset = <0 0 0 0>;
+                                        vfbid-sw-entries = <0 0 0 0>;
+                                        ucore-mask = <0xc 0 0 0>;
+                                        sram-off = <0 0 0 0>;
+					max-l3rules = <1 0 0 0>;
+					max-l4rules = <2 0 0 0>;
+                                };
+                        };
+			app-param{
+                                onlinemask = <0xffff0000>;
+                        };
+
+                };
+
+
+	};
+
+	chosen {
+		/* examples for different core/thread models.
+		 * 16core: netlogic,cpumask=<0xffffffff 0xffffffff>
+		 * 20core: netlogic,cpumask=<0xffff 0xffffffff 0xffffffff>
+		 * 15 core, skipping core #5: netlogic,cpumask=<0xffffffff 0xff0fffff>
+		 */
+		netlogic,cpumask = <0x01>;
+		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
+		/*linux,initrd-start=<0x00c00000>;
+		linux,initrd-end=<0x02c00000>;*/
+	};
+
+	/* These binaries are downloaded at the resp physical memory locations
+	 * by their corresponding bootstrapping loaders. For example,
+	 * u-boot is loaded by x-load at 193M, sysconfig is loaded by u-boot
+	 * at 1M, hypervisor by u-boot hypervisor at 136M.
+	 * On simulator all these binaries are pre-loaded by using '-F' option
+	 * for convenience. On silicon, they will be loaded by their corresponding
+	 * temporary download locations the stage-1/stage-2 firmware
+	 */
+	firmware-download {
+		u-boot        = <0x0c100000 0x3f00000>;  /* 63M @ 193M */
+		sysconfig     = <0x00100000 0x00100000>; /* 1M @ 1M */
+		hypervisor    = <0x08800000 0x00800000>; /* 8M @ 136M */
+		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
+		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
+	};
+
+	soc {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x02000000>; // GBU chipselects
+
+		serial0: serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x112100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <125000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
+		};
+		pic: pic@11000 {
+			interrupt-controller;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x110000 0x200>;
+		};
+
+		i2c0: i2c@113100 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113100 0x100>;
+			clock-frequency = <133000000>;
+		};
+		i2c1: i2c@113300 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113300 0x100>;
+			clock-frequency = <133000000>;
+
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
+			eeprom@57 {
+                                compatible = "xlpge_eeprom";
+                                reg = <0x57>;
+                        };
+
+		};
+		i2c2: i2c@113500 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113500 0x100>;
+			clock-frequency = <133000000>;
+		};
+		i2c3: i2c@113700 {
+			compatible = "netlogic,xlp9xx-i2c";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x113700 0x100>;
+			clock-frequency = <133000000>;
+		};
+
+		spi: xlp_spi@13a000 {
+			compatible = "netlogic,xlp-spi";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x13a000 0x100>;
+
+			spi_nor@1 {
+				compatible = "spansion,s25sl12801";
+				#address-cells = <1>;
+				#size-cells = <1>;
+
+				reg = <1>;		/* Chip Select */
+
+				spi-max-frequency = <40000000>;
+
+				partition@0 {
+					label = "x-loader";
+					reg = <0x0 0x200000>; /* 2M */
+					read-only;
+				};
+
+				partition@200000 {
+					label = "kernel";
+					reg = <0x200000 0x500000>; /* 5M */
+				};
+
+				partition@700000 {
+					label = "rootfs";
+					reg = <0x700000 0x800000>; /* 8M */
+				};
+
+				partition@f00000 {
+					label = "env";
+					reg = <0xf00000 0x100000>; /* 1M */
+					read-only;
+				};
+			};
+			spi_nand@2 {
+				compatible = "spinand,mt29f";
+				#address-cells = <1>;
+				#size-cells = <1>;
+				reg = <2>;	/* SPI NAND CS */
+				spi-max-frequency = <50000000>;
+
+				partition@0 {
+					label = "firmware";
+					reg = <0x0 0x1c00000>;
+				};
+
+				partition@1 {
+					label = "kernel";
+					reg = <0x1c00000 0x0>;
+				};
+			};
+		};
+		nor_flash@1,0 {
+			compatible = "cfi-flash";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
+
+			partition@0 {
+				label = "x-loader";
+				reg = <0x0 0x100000>; /* 1M */
+				read-only;
+			};
+
+			partition@100000 {
+				label = "u-boot";
+				reg = <0x100000 0x100000>; /* 1M */
+			};
+
+			partition@200000 {
+				label = "kernel";
+				reg = <0x200000 0x500000>; /* 5M */
+			};
+
+			partition@700000 {
+				label = "rootfs";
+				reg = <0x700000 0x800000>; /* 8M */
+			};
+
+			partition@f00000 {
+				label = "env";
+				reg = <0xf00000 0x100000>; /* 1M */
+				read-only;
+			};
+		};
+
+		fmn@node-0 {
+			default-credits = <50>;
+			default-queue-size = <28672>;
+			fmn-spill-mem-base = <0x00000000 0x10000000>; /*0 - dynamic allocation, only for 64 bit linux */
+			fmn-spill-mem-size = <0x00000000 0x02000000>;
+			q-config {
+				/* credits from station
+				   "cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs"
+				   The order and number of station should be matching with the list given above
+				   Here, credits 0 means the default credits.
+				   Right now there is no way to configure credit of zero */
+
+				cpu {
+					queue-size = <36864>; /* queue size for all the cpu vcs */
+					credits-from {
+						node-0 = <0 0 0 0 0 0 0 0 0 0 0 500 0 0 150 0>;
+					};
+				};
+
+			};
+		};
+		fmn@node-1{
+			default-credits = <50>;
+			default-queue-size = <28672>;
+			fmn-spill-mem-base = <0x00000000 0x00000000>; /*0 - dynamic allocation */
+			fmn-spill-mem-size = <0x00000000 0x02000000>;
+			q-config{
+
+			};
+		};
+		fmn@node-2{
+
+		};
+		fmn@node-3{
+
+		};
+
+		net@node-0 {
+		       compatible = "XLP9XX";
+		       version = <1>;
+
+		       ale-0 {
+			     enable = <0>;
+			     cpu-threshold = <32>;
+			     nae-threshold = <80>;
+			     data-base {
+
+			     };
+		       };
+
+		       nae-0 {
+			     frequency = <667>;
+			     ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+			     parser-enable = <1>;
+			     freein-unique-desc-size = <1>;
+
+				ucore {
+					src@1 {
+						num-opcodes = <67>;
+						path = "/work/bsp/xlp9xx/sdk-base-3.0/buildroot/output/build/sysconfig/nae/ucore/default-ver1.c";
+						timestamp = "Sun Oct 13 02:42:55 2013";
+						mask = <0xffff>;
+						opcodes = <
+							0x3c1c0010
+							0x279cf808
+							0x3c020010
+							0x2442f808
+							0x3c030010
+							0x2463f808
+							0xac400000
+							0x0043082b
+							0x1420fffd
+							0x24420004
+							0x3c1d0010
+							0x27bdf9c0
+							0x27a50020
+							0x27a60028
+							0xaca00000
+							0xacc00000
+							0x0c000029
+							0x00002021
+							0x1000ffff
+							0x00000000
+							0x3c020000
+							0x8c420140
+							0x27bdffe0
+							0x2403ffff
+							0xafbf001c
+							0xafb10018
+							0x10430009
+							0xafb00014
+							0x3c100000
+							0x26100140
+							0x2411ffff
+							0x0040f809
+							0x2610fffc
+							0x8e020000
+							0x1451fffc
+							0x00000000
+							0x8fbf001c
+							0x8fb10018
+							0x8fb00014
+							0x03e00008
+							0x27bd0020
+							0x3c040001
+							0x34838000
+							0x8c620000
+							0x27bdfff8
+							0x3c070020
+							0xafa20000
+							0x24040100
+							0x24030001
+							0x24060004
+							0x24e70001
+							0x08000039
+							0x3c020170
+							0x34088030
+							0xad060000
+							0x34088000
+							0xad020000
+							0x34088004
+							0x8d050000
+							0x34088034
+							0xad040000
+							0x8fa50000
+							0x14a3fff6
+							0x00000000
+							0x34088030
+							0x08000037
+							0xad070000
+						>;
+					};
+				};
+
+			     freein-fifo-config {
+				 /*
+					1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+					2. Onnchip desc size per queue will be configured from arry below
+				   If spill descs per queue is specified,
+					1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+				*/
+				freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 2MB @ (dynamically allocated address)MB
+				freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+				freein-fifo-spill-num-descs = <1200>;
+				freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+				 port-fifo-en = <1>;
+			     };
+
+			     complex@0 {
+
+				mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+				xgmac {                           /* valid when mode = xaui, rxaui or xfi */
+				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
+				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+				     /* rxaui specific params*/
+				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+				     ext-phy-addr = <0 1 0 0>;		/*phy adress in exaui mode. only 2 entries are used.*/
+				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+				     /* To enable change it to  <3> */
+				     msec-port-enable  = <0>;
+
+				};
+
+
+				xlgmac {                         /* valid when mode = xlaui */
+
+				};
+
+				sgmii {                                      /* valid when mode = sgmii */
+				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <1 2 3 4>;               /* phy address for each port */
+				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
+				     /* To enable change it to  <0xf> */
+				     msec-port-enable  = <0x0>;
+				};
+
+				interlaken {                     /* valid when mode = interlaken */
+				     db = "cortina";             /* select daughter board : cortina or loopback */
+				     loopback = <0>;             /* loopback = 0 or 1 */
+				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				     num-channels = <4>;         /* num-channels = 1 to 4 */
+				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;    /* descriptor size */
+				};
+			     };
+
+			     complex@1 {
+
+				mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+				xgmac {                           /* valid when mode = xaui, rxaui or xfi */
+				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
+				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+				     /* rxaui specific params*/
+				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+				     ext-phy-addr = <4 5 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+				     /* To enable change it to  <3> */
+				     msec-port-enable  = <0>;
+				};
+
+				xlgmac {                         /* valid when mode = xlaui */
+
+				};
+
+				sgmii {                          /* valid when mode = sgmii */
+				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <1 2 3 4>;               /* phy address for each port */
+				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
+				     /* To enable change it to  <0xf> */
+				     msec-port-enable  = <0x0>;
+				};
+
+				interlaken {                     /* valid when mode = interlaken */
+				     db = "cortina";             /* select daughter board : cortina or loopback */
+				     loopback = <0>;             /* loopback = 0 or 1 */
+				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				     num-channels = <4>;         /* num-channels = 1 to 4 */
+				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;    /* descriptor size */
+				};
+			     };
+
+			     complex@2 {
+				mode = "sgmii"; /* sgmii only */
+				sgmii {
+				     loopback = <0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <0>;               /* phy address for each port */
+				     ext-phy-bus = <0>;                /* phy bus numbers */
+				     num-channels = <1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;          /* descriptor size */
+				     /* To enable change it to  <0xf> */
+				     msec-port-enable  = <0x0>;
+				};
+			     };
+		       };
+
+		       poe-0{
+			    distribution-enable = <1>;
+			    dist-drop-enable = <0>;                     /* 16 bit mask */
+			    class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+									   3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+			    class-drop-enable = <0>;                    /* 8 bit mask */
+			    drop-timer = <0>;                           /* Drop timer */
+			    dest-threshold = <0xa>;
+			    dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+			    statistics-enable = <0>;
+
+			    poe-spill-address = <0 0>;  /*  <0xec00000>  */
+			    poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+			    din-spill-address = <0 0>;
+			    din-spill-size = <0x00100000>;
+
+			    distribution {
+				default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+			    };
+		       };
+
+		       nae-1 {
+			     frequency = <667>;
+			     ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+			     parser-enable = <1>;
+			     freein-unique-desc-size = <1>;
+
+
+				ucore {
+					src@1 {
+						num-opcodes = <67>;
+						path = "/work/bsp/xlp9xx/sdk-base-3.0/buildroot/output/build/sysconfig/nae/ucore/default-ver1.c";
+						timestamp = "Sun Oct 13 02:42:55 2013";
+						mask = <0xffff>;
+						opcodes = <
+							0x3c1c0010
+							0x279cf808
+							0x3c020010
+							0x2442f808
+							0x3c030010
+							0x2463f808
+							0xac400000
+							0x0043082b
+							0x1420fffd
+							0x24420004
+							0x3c1d0010
+							0x27bdf9c0
+							0x27a50020
+							0x27a60028
+							0xaca00000
+							0xacc00000
+							0x0c000029
+							0x00002021
+							0x1000ffff
+							0x00000000
+							0x3c020000
+							0x8c420140
+							0x27bdffe0
+							0x2403ffff
+							0xafbf001c
+							0xafb10018
+							0x10430009
+							0xafb00014
+							0x3c100000
+							0x26100140
+							0x2411ffff
+							0x0040f809
+							0x2610fffc
+							0x8e020000
+							0x1451fffc
+							0x00000000
+							0x8fbf001c
+							0x8fb10018
+							0x8fb00014
+							0x03e00008
+							0x27bd0020
+							0x3c040001
+							0x34838000
+							0x8c620000
+							0x27bdfff8
+							0x3c070020
+							0xafa20000
+							0x24040100
+							0x24030001
+							0x24060004
+							0x24e70001
+							0x08000039
+							0x3c020170
+							0x34088030
+							0xad060000
+							0x34088000
+							0xad020000
+							0x34088004
+							0x8d050000
+							0x34088034
+							0xad040000
+							0x8fa50000
+							0x14a3fff6
+							0x00000000
+							0x34088030
+							0x08000037
+							0xad070000
+						>;
+					};
+				};
+
+			     freein-fifo-config {
+				 /*
+					1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+					2. Onnchip desc size per queue will be configured from arry below
+					   If spill descs per queue is specified,
+					1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+				*/
+				freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00100000>; // 1MB @ 254MB
+				freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+				freein-fifo-spill-num-descs = <1200>;
+				freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+				 port-fifo-en = <1>;
+			     };
+
+			     complex@0 {
+
+				mode = "xaui";	/* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+				xgmac {                           /* valid when mode = xaui, rxaui or xfi */
+				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
+				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+				     /* rxaui specific params*/
+				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+				     ext-phy-addr = <8 9 0 0>;		/*phy adress in exaui mode.*/
+				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+				     /* To enable change it to  <3> */
+				     msec-port-enable  = <0>;
+
+				};
+
+
+				xlgmac {                         /* valid when mode = xlaui */
+
+				};
+
+				sgmii {                                      /* valid when mode = sgmii */
+				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
+				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
+				     /* To enable change it to  <0xf> */
+				     msec-port-enable  = <0x0>;
+				};
+
+				interlaken {                     /* valid when mode = interlaken */
+				     db = "cortina";             /* select daughter board : cortina or loopback */
+				     loopback = <0>;             /* loopback = 0 or 1 */
+				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				     num-channels = <4>;         /* num-channels = 1 to 4 */
+				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;    /* descriptor size */
+				};
+
+			     };
+
+			     complex@1 {
+
+				mode = "xaui";   /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+				xgmac {                           /* valid when mode = xaui, rxaui or xfi */
+				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
+				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+
+				     /* rxaui specific params*/
+				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+				     ext-phy-addr = <12 13 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+				     /* To enable change it to  <3> */
+				     msec-port-enable  = <0>;
+
+				};
+
+
+				xlgmac {                         /* valid when mode = xlaui */
+
+				};
+
+				sgmii {                          /* valid when mode = sgmii */
+				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
+				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
+				     /* To enable change it to  <0xf> */
+				     msec-port-enable  = <0x0>;
+				};
+
+				interlaken {                     /* valid when mode = interlaken */
+				     db = "cortina";             /* select daughter board : cortina or loopback */
+				     loopback = <0>;             /* loopback = 0 or 1 */
+				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				     num-channels = <4>;         /* num-channels = 1 to 4 */
+				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;    /* descriptor size */
+				};
+			    };
+
+			    complex@2 {
+				mode = "sgmii"; /* sgmii only */
+				sgmii {
+				     loopback = <0>;                   /* loopback = 0 or 1 */
+				     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+				     ext-phy-addr = <1>;               /* phy address for each port */
+				     ext-phy-bus = <0>;                /* phy bus numbers */
+				     num-channels = <1>;               /* num-channels = 1 to 8 */
+				     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+				     free-desc-size = <2048>;          /* descriptor size */
+				     /* To enable change it to  <1> */
+				     msec-port-enable  = <0>;
+				};
+			    };
+
+		       };
+
+		       poe-1{
+			    distribution-enable = <1>;
+			    dist-drop-enable = <0>;                     /* 16 bit mask */
+			    class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+									   3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+			    class-drop-enable = <0>;                    /* 8 bit mask */
+			    drop-timer = <0>;                           /* Drop timer */
+			    dest-threshold = <0xa>;
+			    dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+			    statistics-enable = <0>;
+
+			    poe-spill-address = <0 0>;  /*  <0xec00000>  */
+			    poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+			    din-spill-address = <0 0>;
+			    din-spill-size = <0x00100000>;
+
+			    distribution {
+				default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+			    };
+		       };
+		};
+
+		nodes {
+			num-nodes = <1>;
+		};
+
+	};
+
+	frequency-config {
+		nae = <500>;
+		sae = <767>;
+		rsa = <767>;
+		dtre = <250>;
+		cde = <250>;
+	};
+
+};
+
-- 
1.7.9.5

