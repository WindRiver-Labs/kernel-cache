From c9c18dba4df8ee73a54cad1c070622aeca7e5185 Mon Sep 17 00:00:00 2001
From: Saswat Dash <saswat.dash@broadcom.com>
Date: Mon, 27 Jan 2014 10:27:07 +0530
Subject: [PATCH 110/160] NAE: Modified check for nae-rx-cpu-mask extraction

Signed-off-by: Jack Tan <jack.tan@windriver.com>
Signed-off-by: Jack Tan <jiankemeng@gmail.com>
---
 arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
index 6aa533b..78db869 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
@@ -454,7 +454,7 @@ start_for_dom:
 	if (nodeoffset >= 0) {
 		pval = (unsigned int *)fdt_getprop(fdt, nodeoffset, "nae-rx-cpu-mask", &plen);
 	}
-        if ((nodeoffset < 0) || (!plen)) {
+        if ((nodeoffset < 0) || (!pval) || (!plen)) {
 		sprintf(dom_node_str, "/doms/dom@%d/cpu", domid);
 		nodeoffset = fdt_path_offset(fdt, dom_node_str);
 		if (nodeoffset >= 0) {
-- 
1.7.9.5

