From 6ba09e26ba1341b561a803279196ac7b44598c4f Mon Sep 17 00:00:00 2001
From: Ashok Kumar <ashoks@broadcom.com>
Date: Tue, 19 Nov 2013 13:11:10 +0530
Subject: [PATCH 003/160] MIPS: mm: Do icache flush for
 tlbmiss_handler_setup_pgd

flush cache for tlbmiss_handler_setup_pgd needs to be done for non
CONFIG_MIPS_PGD_C0_CONTEXT case also

Signed-off-by: Ashok Kumar <ashoks@broadcom.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
Signed-off-by: Jack Tan <jiankemeng@gmail.com>
---
 arch/mips/mm/tlbex.c |    2 --
 1 file changed, 2 deletions(-)

diff --git a/arch/mips/mm/tlbex.c b/arch/mips/mm/tlbex.c
index 47e2d40..705ffa6 100644
--- a/arch/mips/mm/tlbex.c
+++ b/arch/mips/mm/tlbex.c
@@ -2275,10 +2275,8 @@ void __cpuinit flush_tlb_handlers(void)
 			   (unsigned long)handle_tlbs_end);
 	local_flush_icache_range((unsigned long)handle_tlbm,
 			   (unsigned long)handle_tlbm_end);
-#ifdef CONFIG_MIPS_PGD_C0_CONTEXT
 	local_flush_icache_range((unsigned long)tlbmiss_handler_setup_pgd,
 			   (unsigned long)tlbmiss_handler_setup_pgd_end);
-#endif
 }
 
 void __cpuinit build_tlb_refill_handler(void)
-- 
1.7.9.5

