From 56d289fb43b57d169f1c8f514f066638c0d8fd5f Mon Sep 17 00:00:00 2001
From: Sreenidhi BR <sreenidhibr@netlogicmicro.com>
Date: Tue, 11 Oct 2011 18:28:03 +0530
Subject: [PATCH 447/762] fix for oprofile LE mode.

Based on Broadcom SDK 2.3.

Signed-off-by: Sreenidhi BR <sreenidhibr@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 fs/dcookies.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/fs/dcookies.c b/fs/dcookies.c
index 6153299..0027c55 100644
--- a/fs/dcookies.c
+++ b/fs/dcookies.c
@@ -222,7 +222,12 @@ compat_SyS_lookup_dcookie(u32 cookie_msb, u32 cookie_lsb,
     size = (size_t)len;
 
     user_buf = compat_ptr(buf);
+
+#ifdef CONFIG_CPU_BIG_ENDIAN
     cookie = (((u64)cookie_msb) << 32) | (u64)cookie_lsb;
+#else
+    cookie = (((u64)cookie_lsb) << 32) | (u64)cookie_msb;
+#endif
 
     return SYSC_lookup_dcookie(cookie, user_buf, size);
 
-- 
1.7.0.4

