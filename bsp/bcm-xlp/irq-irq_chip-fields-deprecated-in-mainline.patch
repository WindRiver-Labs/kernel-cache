From 257cef7e0e1a3e7d2ffbe567ba28d80cca2c45ea Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 13:55:16 -0700
Subject: [PATCH 415/761] irq: irq_chip fields deprecated in mainline

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/irq.c |   52 +++++++++++++++++++++---------------------
 1 file changed, 26 insertions(+), 26 deletions(-)

diff --git a/arch/mips/netlogic/xlp/irq.c b/arch/mips/netlogic/xlp/irq.c
index 7c54dcf..e7cf764 100644
--- a/arch/mips/netlogic/xlp/irq.c
+++ b/arch/mips/netlogic/xlp/irq.c
@@ -753,13 +753,13 @@ static int nlm_irq_set_affinity(unsigned int irq, const struct cpumask *mask)
 
 static struct irq_chip nlm_irq_pic = {
 	.name = "XLP-PIC",
-	.mask = nlm_irq_mask,
-	.unmask = nlm_irq_unmask,
-	.startup = nlm_irq_startup,
-	.mask = nlm_irq_shutdown,
-	.ack = nlm_irq_ack,
-	.end = nlm_irq_end,
-	.set_affinity = nlm_irq_set_affinity
+	.irq_mask = nlm_irq_mask,
+	.irq_unmask = nlm_irq_unmask,
+	.irq_startup = nlm_irq_startup,
+	.irq_mask = nlm_irq_shutdown,
+	.irq_ack = nlm_irq_ack,
+	// .end = nlm_irq_end, /* deprecated */
+	.irq_set_affinity = nlm_irq_set_affinity
 };
 
 static void rsvd_pic_handler_1_1(unsigned int irq)
@@ -800,11 +800,11 @@ static int rsvd_pic_handler_2(unsigned int irq, const struct cpumask *mask)
 
 struct irq_chip nlm_common_rsvd_pic = {
 	.name = "Netlogic-RSVD-PIC",
-	.unmask = rsvd_pic_handler_1_1,
-	.mask = rsvd_pic_handler_1,
-	.ack = rsvd_pic_handler_1,
-	.end = rsvd_pic_handler_1,
-	.set_affinity = rsvd_pic_handler_2
+	.irq_unmask = rsvd_pic_handler_1_1,
+	.irq_mask = rsvd_pic_handler_1,
+	.irq_ack = rsvd_pic_handler_1,
+	// .end = rsvd_pic_handler_1, /* deprecated */
+	.irq_set_affinity = rsvd_pic_handler_2
 };
 
 static irqreturn_t nlm_common_rsvd_irq_handler(int irq, void *dev_id)
@@ -990,13 +990,13 @@ static void nlm_msi_unmask(unsigned int msi)
 
 struct irq_chip nlm_msi_pic = {
 	.name = "XLP-PIC-MSI",
-	.startup = nlm_msi_startup,
-	.shutdown = nlm_msi_shutdown,
-	.ack = nlm_msi_ack,
-	.end = nlm_msi_end,
-	.mask = nlm_msi_mask,
-	.unmask = nlm_msi_unmask,
-	.set_affinity = nlm_msi_set_affinity
+	.irq_startup = nlm_msi_startup,
+	.irq_shutdown = nlm_msi_shutdown,
+	.irq_ack = nlm_msi_ack,
+	// .end = nlm_msi_end, /* deprecated */
+	.irq_mask = nlm_msi_mask,
+	.irq_unmask = nlm_msi_unmask,
+	.irq_set_affinity = nlm_msi_set_affinity
 };
 
 /*
@@ -1089,13 +1089,13 @@ static void nlm_msix_shutdown(unsigned int msix)
 
 struct irq_chip nlm_msix_pic = {
 	.name = "XLP-PIC-MSIX",
-	.startup = nlm_msix_startup,
-	.shutdown = nlm_msix_shutdown,
-	.ack = nlm_msix_ack,
-	.end = nlm_msix_end,
-	.mask = nlm_msix_mask,
-	.unmask = nlm_msix_unmask,
-	.set_affinity = nlm_msix_set_affinity
+	.irq_startup = nlm_msix_startup,
+	.irq_shutdown = nlm_msix_shutdown,
+	.irq_ack = nlm_msix_ack,
+	// .end = nlm_msix_end, /* deprecated */
+	.irq_mask = nlm_msix_mask,
+	.irq_unmask = nlm_msix_unmask,
+	.irq_set_affinity = nlm_msix_set_affinity
 };
 
 
-- 
1.7.10.4

