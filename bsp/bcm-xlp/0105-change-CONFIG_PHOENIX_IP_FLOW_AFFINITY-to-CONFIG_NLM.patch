From 148c92ffa2c7e8549afe71fac55312eb172c062f Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Wed, 7 Jul 2010 18:07:57 -0700
Subject: [PATCH 105/762] change CONFIG_PHOENIX_IP_FLOW_AFFINITY to CONFIG_NLMCOMMON_IP_FLOW_AFFINITY, move nlm_msgring_int_handler to xlr/irq.c

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/common/smp.c |   12 ++----------
 1 files changed, 2 insertions(+), 10 deletions(-)

diff --git a/arch/mips/netlogic/common/smp.c b/arch/mips/netlogic/common/smp.c
index 593afc3..81d04d9 100644
--- a/arch/mips/netlogic/common/smp.c
+++ b/arch/mips/netlogic/common/smp.c
@@ -50,7 +50,6 @@ __u32 ipi_3_counter_rx[NR_CPUS];
 extern void save_epc(unsigned long *epc);
 extern void smp_call_function_interrupt(void);
 //extern void nlm_common_smp_time_init(void);
-
 static int nlm_common_ipi_stats[NR_CPUS];
 static unsigned long nlm_common_ipi_epc[NR_CPUS];
 
@@ -169,7 +168,7 @@ void nlm_smp_resched_ipi_handler(unsigned int irq, struct irq_desc *desc)
 	nlm_common_ipi_stats[smp_processor_id()]--;
 }
 
-#ifdef CONFIG_PHOENIX_IP_FLOW_AFFINITY
+#ifdef CONFIG_NLMCOMMON_IP_FLOW_AFFINITY
 /* nlm_ip_flow_ipi_handler HANDLER */
 void nlm_ip_flow_ipi_handler(unsigned int irq, struct irq_desc *desc)
 {
@@ -181,16 +180,9 @@ void nlm_ip_flow_ipi_handler(unsigned int irq, struct irq_desc *desc)
 	nlm_common_ipi_stats[smp_processor_id()]--;
 
 }
-#endif /* CONFIG_PHOENIX_IP_FLOW_AFFINITY */
+#endif /* CONFIG_NLMCOMMON_IP_FLOW_AFFINITY */
 #endif
 
-void nlm_msgring_int_handler(unsigned int irq, struct irq_desc *desc)
-{
-	struct pt_regs *pt_regs = current_thread_info()->regs;
-
-	nlm_common_msgring_int_handler(irq, pt_regs);
-}
-
 void nlm_common_ipi_handler(int irq, struct pt_regs *regs)
 {
 	nlm_common_ipi_stats[smp_processor_id()]++;
-- 
1.7.0.4

