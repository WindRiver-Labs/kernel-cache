From fdff0e4742702c53266504d8d19f069fed756cf2 Mon Sep 17 00:00:00 2001
From: Yonghong Song <ysong@broadcom.com>
Date: Sat, 21 Apr 2012 09:44:10 -0700
Subject: [PATCH 582/762] xlp2xx: fixed tlb enabling issue.

Based on Broadcom SDK 2.3.

Signed-off-by: Yonghong Song <ysong@broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/mmu.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/mips/netlogic/xlp/mmu.c b/arch/mips/netlogic/xlp/mmu.c
index e508923..c5713d9 100644
--- a/arch/mips/netlogic/xlp/mmu.c
+++ b/arch/mips/netlogic/xlp/mmu.c
@@ -282,7 +282,8 @@ void __cpuinit mmu_init(void)
 		 * [4]: PTE format compatible with XLP8XX/XLP4XX/XLP3XX, mostly useful for RI/XI support
 		 */
 		value = 0;
-		value |= ((tlb_config & ENABLE_ETLB)) << 3;
+		if (tlb_config & ENABLE_ETLB)
+			value |= 1 << 3;
 		value |= 1 << 4;
 		pgw_register_write_w(PGW_MMU_SETUP, value);
 
-- 
1.7.0.4

