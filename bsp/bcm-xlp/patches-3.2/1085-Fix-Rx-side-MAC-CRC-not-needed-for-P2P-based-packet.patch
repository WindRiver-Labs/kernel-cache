From 25ee99f6a1ca53dc529fd79ef299e0984df46324 Mon Sep 17 00:00:00 2001
From: Vikas Gupta <vikasg@netlogicmicro.com>
Date: Tue, 25 Oct 2011 18:45:52 +0530
Subject: Fix: Rx side MAC CRC not needed for P2P based packet

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/misc/netlogic/nae_jumbo/xlp_nae_jumbo.c b/drivers/misc/netlogic/nae_jumbo/xlp_nae_jumbo.c
index 3bad05d..cbe72b3 100755
--- a/drivers/misc/netlogic/nae_jumbo/xlp_nae_jumbo.c
+++ b/drivers/misc/netlogic/nae_jumbo/xlp_nae_jumbo.c
@@ -1435,8 +1435,6 @@ static void nlm_xlp_nae_msgring_handler(uint32_t vc, uint32_t src_id,
 				len += (p2d >> 40) & 0x3fff;
 				//printk("P2D is at = 0x%lx physbuff= 0x%lx len= 0x%x\n", vaddr, p2d_addr[idx],  p2d_len[idx] );
 			}
-			p2d_len[idx-1] = p2d_len[idx-1] - MAC_CRC_LEN;
-			len = len - MAC_CRC_LEN;
 			tot_desc = num_p2d +1; //p2ds + p2p
 			//printk("Total packet length is = 0x%x and desc = 0x%x\n", len, tot_desc);
 		}else{ /*only one P2Dl_skb*/
-- 
1.7.1

