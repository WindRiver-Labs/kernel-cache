From 785b29c3e46670ec333bb0b7f1b76f95a4d0cb37 Mon Sep 17 00:00:00 2001
From: Tanmay Jagdale <tanmayj@broadcom.com>
Date: Thu, 11 Dec 2014 15:29:25 +0530
Subject: fdtconf: fixed the cpumask for LE mode

Fixed the dom@0 cpu onlinemask in LE mode
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/misc/netlogic/fdtconf/fdtconf.c b/drivers/misc/netlogic/fdtconf/fdtconf.c
index d8e192c..9465e99 100644
--- a/drivers/misc/netlogic/fdtconf/fdtconf.c
+++ b/drivers/misc/netlogic/fdtconf/fdtconf.c
@@ -101,9 +101,11 @@ static void parse_and_fill_kern_params(void)
 			word = CPUMASK_WORDS - pcpu/32 - 1;
 			bit = pcpu % 32;
 			mask[word] |= 1u << bit;
-			mask[word] = cpu_to_fdt32(mask[word]);
 		}
 
+		for (i = 0; i < CPUMASK_WORDS; i++)
+			mask[i] = cpu_to_fdt32(mask[i]);
+
 		err = fdt_setprop(fdt, node, "netlogic,cpumask", mask,
 				sizeof(mask));
 		if (err)
-- 
1.7.1

