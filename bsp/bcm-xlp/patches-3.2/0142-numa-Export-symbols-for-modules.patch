From 8aa8886a32d9ea3fd5cc439f72ae9ffae0e8a462 Mon Sep 17 00:00:00 2001
From: Pavani Reddy <pavani@broadcom.com>
Date: Tue, 29 Jul 2014 17:53:56 +0530
Subject: numa: Export symbols for modules

Export symbols which are used by modules in linux-userspace/kmod.
This has to be reverted when the modules have been changed not to
use these.

nlm_io_base, xlp_cores_per_node, __node_data and xlp_pa_to_nid
are used from modules
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/xlp/numa.c b/arch/mips/netlogic/xlp/numa.c
index b4e42b0..d10d81a 100644
--- a/arch/mips/netlogic/xlp/numa.c
+++ b/arch/mips/netlogic/xlp/numa.c
@@ -8,6 +8,7 @@
  */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/export.h>
 #include <linux/memblock.h>
 #include <linux/mmzone.h>
 #include <linux/nodemask.h>
@@ -27,6 +28,7 @@
 
 #define NODE_RESV_MEM	(64 * 1024)
 struct node_data *__node_data[NLM_NR_NODES];
+EXPORT_SYMBOL(__node_data);
 
 /* @uick and dirty implementation for now */
 int xlp_pa_to_nid(phys_addr_t pa)
@@ -44,6 +46,7 @@ int xlp_pa_to_nid(phys_addr_t pa)
 	BUG();
 	return 0;		/* not reached */
 }
+EXPORT_SYMBOL(xlp_pa_to_nid);
 
 static void __init init_node_bootmem(int node, unsigned long min_pfn,
 	unsigned long max_pfn)
diff --git a/arch/mips/netlogic/xlp/setup.c b/arch/mips/netlogic/xlp/setup.c
index e4c76e9..1af74d5 100644
--- a/arch/mips/netlogic/xlp/setup.c
+++ b/arch/mips/netlogic/xlp/setup.c
@@ -48,10 +48,13 @@
 #include <asm/netlogic/xlp-hal/sys.h>
 
 uint64_t nlm_io_base;
+EXPORT_SYMBOL(nlm_io_base);
+
 struct nlm_soc_info nlm_nodes[NLM_NR_NODES];
 cpumask_t nlm_cpumask = CPU_MASK_CPU0;
 unsigned int nlm_threads_per_core;
 unsigned int xlp_cores_per_node;
+EXPORT_SYMBOL(xlp_cores_per_node);
 
 static void nlm_linux_exit(void)
 {
-- 
1.7.1

