From 62e44687a34bece44b63da6d52217fdbf7837f73 Mon Sep 17 00:00:00 2001
From: Vikas Gupta <vikas.gupta@broadcom.com>
Date: Wed, 13 Mar 2013 14:18:54 +0530
Subject: dts: Updated the dts files to follow the standard Linux convention.

     The files are updated for xlp2xx/xlp3xx/xlp8xxx/mnxlp8xx.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts b/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
index ef6706d..e31e295 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000
+                        0x2 0x80000000 0 0x80000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -39,13 +46,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000
-					0x20000000 0xa0000000>; // 2586M at 512M
-
-			};
-			pic {
-			};
 			fmn {
                                 node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
@@ -166,7 +166,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m mem=2048m@10240m ";
+		bootargs = " console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts b/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
index 93b4242..e2297eb 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
@@ -4,18 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
-
-	hypervisor {
-		hypervisor-name = "Xen";
-		alloc_dom0_memory = <0>;
-		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
-		domain_heap = <0x80000000 0x20000000>;
-	};
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0x40000000
+                        0x2 0x29000000 0 0x80000000>;
+        };
 	doms {
 		#address-cells = <1>;
 		#size-cells = <1>;
diff --git a/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts b/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
index df1adc8..b843b73 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000
+                        0x2 0x80000000 0 0x80000000>; //2048m@10240m
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -195,7 +202,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m mem=2048m@10240m";
+		bootargs = " console=ttyS0,115200 ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mn4xlp8xx-linux.dts b/arch/mips/boot/dts/mn4xlp8xx-linux.dts
index aa5b16e..5873acb 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-linux.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-linux.dts
@@ -4,12 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
-
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
+	
 	hypervisor {
 		hypervisor-name = "Xen";
 		alloc_dom0_memory = <0>;
@@ -43,19 +49,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			//Make sure each node's memory is separated out 
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>; // 2586M at 512M
-			};
                         fmn {
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;                       
 			};
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xffff 0xffff 0 0>;
 				/* node offsets and size */
@@ -76,7 +75,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200  mem=512m@3584m";
+		bootargs = " console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
index bd5347b..73e89b2 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
@@ -4,12 +4,19 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
-
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000
+                        0x2 0x80000000 0 0x80000000>;
+        };
+	
 	hypervisor {
 		hypervisor-name = "Xen";
 		alloc_dom0_memory = <0>;
@@ -39,13 +46,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000
-					0x20000000 0xa0000000>; // 2586M at 512M
-
-			};
-			pic {
-			};
 			fmn {
                                 node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
@@ -166,7 +166,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m mem=2048m@10240m ";
+		bootargs = " console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
index 6ee7f55..94377d8 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0x40000000 
+                        0x2 0x29000000 0 0x80000000  // 2048m@8848m
+                        0x4 0x29000000 0 0x80000000>; //2048m@17040m
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -40,18 +47,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0x40000000>;  //  1GB @ 512MB
-			};
                         fmn {
                                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                         };
-			pic {
-			};
 			nae {
 				sh-domains = <1 2>;
 				freein-fifo-mask = <0x30000 0x30000 0 0>;
@@ -199,7 +200,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=2048m@8848m mem=2048m@17040m ";
+		bootargs = " console=ttyS0,115200 ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
index 03bf65d..517c4b5 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   // 176M at 16M
+                        0 0x20000000 0 0x40000000 // 1GB @ 512MB
+                        0x2 0x29000000 0 0x80000000>; //2048m@8848m
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -40,10 +46,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0x40000000>;  //  1GB @ 512MB
-			};
                         fmn {
                                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
@@ -199,7 +201,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=2048m@8848m";
+		bootargs = " console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts b/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
index 95eebe9..dd80688 100644
--- a/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000
+                        0x2 0x80000000 0 0x80000000>; //2048m@10240m
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/mnxlp8xx-linux.dts b/arch/mips/boot/dts/mnxlp8xx-linux.dts
index 314c601..9e09038 100644
--- a/arch/mips/boot/dts/mnxlp8xx-linux.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-linux.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -43,19 +49,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			//Make sure each node's memory is separated out 
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>; // 2586M at 512M
-			};
                         fmn {
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;                       
 			};
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0x3ffff 0x3ffff 0 0>;
 				/* node offsets and size */
@@ -76,7 +75,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200  mem=512m@3584m";
+		bootargs = " console=ttyS0,115200 ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/netos-srtp.dts b/arch/mips/boot/dts/netos-srtp.dts
index abb77d4..d43c0a8 100644
--- a/arch/mips/boot/dts/netos-srtp.dts
+++ b/arch/mips/boot/dts/netos-srtp.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp2xx-ep-linux.dts b/arch/mips/boot/dts/xlp2xx-ep-linux.dts
index f2ece59..057c217 100644
--- a/arch/mips/boot/dts/xlp2xx-ep-linux.dts
+++ b/arch/mips/boot/dts/xlp2xx-ep-linux.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -34,8 +40,8 @@
 				sae-rx-vc = <0>; /*  */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
 				ipsec-async-vc  = <3>;
-				ipsec-sync-vc   = <2>; /* should be exclusive either
-							  ipsec-sync-vc  or soc/srio@node-0  */
+				ipsec-sync-vc   = <2>;
+							  
 
 			};
 			uart {
@@ -51,8 +57,6 @@
 				/* make the node mask to 0xffffffff for SRIO */
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
@@ -74,7 +78,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576 ";
+		bootargs = " console=ttyS0,115200 rhash_entries=1048576 ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
@@ -97,23 +101,6 @@
 		nodes {
 			num-nodes = <1>;
 		};
-		srio@node-0{
-                       /* type = "master" or "device". master is responsible for enumeration*/
-                       type = "master";
-                       /* SRIO_MODE_x1 = 1(not supported), SRIO_MODE_x4 = 2 */
-                       mode = <2>;
-                       /* BAUD_1250M = 1 (1.25G)
-                          BAUD_2500M = 2 (25.G)
-                          BAUD_3125M = 3 (3.125G)
-                          BAUD_5000M = 4 (5G)
-                          BAUD_6250M = 5 (6.25G) */
-                       baud-rate = <5>;
-                       rxvc = <2>;
-                       msgdstid = <2>;
-                       /* sys-size = 1 for 16bit device id, 0 for 8 bit device id */
-                       sys-size = <1>;
-               };
-
 	};
 	frequency-config {
 		nae = <250>;
diff --git a/arch/mips/boot/dts/xlp2xx-helinux.dts b/arch/mips/boot/dts/xlp2xx-helinux.dts
index 2fe3aad..c24d64d 100644
--- a/arch/mips/boot/dts/xlp2xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp2xx-helinux.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0xe0000000 0 0x20000000>;
+        };
 
-	#address-cells = <1>;
-	#size-cells = <1>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -40,15 +46,9 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0xE0000000 0x20000000>;  // 512M @ 3.5GB
-			};
                         fmn {
                                 node_0_vc_mask = <0x66666666>;
                         };
-			pic {
-			};
 			owner-config {
 				nae = <0x0>;
 				sae = <0x1>;
@@ -118,7 +118,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200  ";
+		bootargs = " console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
new file mode 100644
index 0000000..d396128
--- /dev/null
+++ b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
@@ -0,0 +1,123 @@
+/*
+ * XLP2XX Device Tree Source for FVP boards
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-FVP";
+	compatible = "netlogic,xlp";
+	#address-cells = <2>;
+	#size-cells = <2>;
+
+	memory {
+		device_type = "memory";
+		reg =  <0 0x00100000 0 0x0FF00000	// 255M at 1M
+			0 0x20000000 0 0xa0000000>;	// 2560M at 512M
+	};
+
+	soc {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x01000000>; // GBU chipselects
+
+		serial0: serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x30100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
+		};
+		serial1: serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x31100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
+		};
+		i2c0: ocores@37100 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x37100 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <30>;
+		};
+		i2c1: ocores@37120 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x37120 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <31>;
+
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
+			dtt@4c {
+				compatible = "national,lm90";
+				reg = <0x4c>;
+			};
+		};
+		pic: pic@4000 {
+			interrupt-controller;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x4000 0x200>;
+		};
+
+		nor_flash@1,0 {
+			compatible = "cfi-flash";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
+
+			partition@0 {
+				label = "x-loader";
+				reg = <0x0 0x100000>; /* 1M */
+				read-only;
+			};
+
+			partition@100000 {
+				label = "u-boot";
+				reg = <0x100000 0x100000>; /* 1M */
+			};
+
+			partition@200000 {
+				label = "kernel";
+				reg = <0x200000 0x500000>; /* 5M */
+			};
+
+			partition@700000 {
+				label = "rootfs";
+				reg = <0x700000 0x800000>; /* 8M */
+			};
+
+			partition@f00000 {
+				label = "env";
+				reg = <0xf00000 0x100000>; /* 1M */
+				read-only;
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+	};
+};
diff --git a/arch/mips/boot/dts/xlp2xx-linux.dts b/arch/mips/boot/dts/xlp2xx-linux.dts
index 8fb165d..eb99b80 100644
--- a/arch/mips/boot/dts/xlp2xx-linux.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -34,8 +41,7 @@
 				sae-rx-vc = <0>; /*  */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
 				ipsec-async-vc  = <3>;
-				ipsec-sync-vc   = <2>; /* should be exclusive either  
-							  ipsec-sync-vc  or soc/srio@node-0  */
+				ipsec-sync-vc   = <2>; 
 
 			};
 			uart {
@@ -43,16 +49,10 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>;  // 2586M at 512M
-			};
                         fmn {
 				/* make the node mask to 0xffffffff for SRIO */  
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
@@ -74,7 +74,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576";
+		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
@@ -97,22 +97,6 @@
 		nodes {
 			num-nodes = <1>;
 		};
-		srio@node-0{
-                       /* type = "master" or "device". master is responsible for enumeration*/
-                       type = "master";
-                       /* SRIO_MODE_x1 = 1(not supported), SRIO_MODE_x4 = 2 */
-                       mode = <2>;
-                       /* BAUD_1250M = 1 (1.25G)
-                          BAUD_2500M = 2 (25.G)
-                          BAUD_3125M = 3 (3.125G)
-                          BAUD_5000M = 4 (5G)
-                          BAUD_6250M = 5 (6.25G) */
-                       baud-rate = <5>;
-                       rxvc = <2>;
-                       msgdstid = <2>;
-                       /* sys-size = 1 for 16bit device id, 0 for 8 bit device id */
-                       sys-size = <1>;
-               };
 
 	};
 	frequency-config {
diff --git a/arch/mips/boot/dts/xlp2xx-multi-os.dts b/arch/mips/boot/dts/xlp2xx-multi-os.dts
index 9e0d361..99608c4 100644
--- a/arch/mips/boot/dts/xlp2xx-multi-os.dts
+++ b/arch/mips/boot/dts/xlp2xx-multi-os.dts
@@ -4,11 +4,16 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0F000000 // 240M at 16M   
+                        0 0x20000000 0 0x20000000>; // 512M at 512M
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -37,12 +42,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = < 0x01000000 0x0F000000    // 240M at 16M
-					0x20000000 0x20000000>;  // 512M at 512M
-			};
-			pic {
-			};
 			owner-config {
 				nae = <0x0>;
 				sae = <0x1>;
diff --git a/arch/mips/boot/dts/xlp2xx-netos.dts b/arch/mips/boot/dts/xlp2xx-netos.dts
index d310286..ae26e13 100644
--- a/arch/mips/boot/dts/xlp2xx-netos.dts
+++ b/arch/mips/boot/dts/xlp2xx-netos.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp3xx-helinux.dts b/arch/mips/boot/dts/xlp3xx-helinux.dts
index 07978fa..9b21693 100644
--- a/arch/mips/boot/dts/xlp3xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp3xx-helinux.dts
@@ -4,11 +4,16 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0xe0000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -40,18 +45,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0xE0000000 0x20000000>;  // 512M @ 3.5GB
-			};
                         fmn {
                                 node_0_vc_mask = <0x66666666 0x66666666 0x66666666 0x66666666>;
                                 node_1_vc_mask = <0x66666666 0x66666666 0x66666666 0x66666666>;
                                 node_2_vc_mask = <0x66666666 0x66666666 0x66666666 0x66666666>;
                                 node_3_vc_mask = <0x66666666 0x66666666 0x66666666 0x66666666>;
                         };
-			pic {
-			};
 			owner-config {
 				nae = <0x0>;
 				sae = <0x1>;
@@ -124,7 +123,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200  ";
+		bootargs = " console=ttyS0,115200 ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
new file mode 100644
index 0000000..8af4bdb
--- /dev/null
+++ b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
@@ -0,0 +1,124 @@
+/*
+ * XLP3XX Device Tree Source for SVP boards
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-SVP";
+	compatible = "netlogic,xlp";
+	#address-cells = <2>;
+	#size-cells = <2>;
+
+	memory {
+		device_type = "memory";
+		reg =  <0 0x00100000 0 0x0FF00000	// 255M at 1M
+			0 0x20000000 0 0xa0000000	// 2560M at 512M
+			0 0xe0000000 0 0x40000000>;
+	};
+
+	soc {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x01000000>; // GBU chipselects
+
+		serial0: serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x30100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
+		};
+		serial1: serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x31100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
+		};
+		i2c0: ocores@32000 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x32100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <30>;
+		};
+		i2c1: ocores@33000 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x33100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <31>;
+
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
+			dtt@4c {
+				compatible = "national,lm90";
+				reg = <0x4c>;
+			};
+		};
+		pic: pic@4000 {
+			interrupt-controller;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x4000 0x200>;
+		};
+
+		nor_flash@1,0 {
+			compatible = "cfi-flash";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
+
+			partition@0 {
+				label = "x-loader";
+				reg = <0x0 0x100000>; /* 1M */
+				read-only;
+			};
+
+			partition@100000 {
+				label = "u-boot";
+				reg = <0x100000 0x100000>; /* 1M */
+			};
+
+			partition@200000 {
+				label = "kernel";
+				reg = <0x200000 0x500000>; /* 5M */
+			};
+
+			partition@700000 {
+				label = "rootfs";
+				reg = <0x700000 0x800000>; /* 8M */
+			};
+
+			partition@f00000 {
+				label = "env";
+				reg = <0xf00000 0x100000>; /* 1M */
+				read-only;
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+	};
+};
diff --git a/arch/mips/boot/dts/xlp3xx-linux.dts b/arch/mips/boot/dts/xlp3xx-linux.dts
index 3747612..82e0080 100644
--- a/arch/mips/boot/dts/xlp3xx-linux.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
-	#address-cells = <1>;
-	#size-cells = <1>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -46,10 +53,6 @@
                         mmc {
                                 slots = <2>;
                         };
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>;  // 2586M at 512M
-			};
                         fmn {
 				/* make the node mask to 0xffffffff for SRIO */  
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
@@ -57,8 +60,6 @@
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
@@ -80,7 +81,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576";
+		bootargs = " console=ttyS0,115200 rhash_entries=1048576";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/xlp3xx-multi-os.dts b/arch/mips/boot/dts/xlp3xx-multi-os.dts
index 4cb2ce2..4bc53b9 100644
--- a/arch/mips/boot/dts/xlp3xx-multi-os.dts
+++ b/arch/mips/boot/dts/xlp3xx-multi-os.dts
@@ -4,11 +4,16 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0F000000   //240M at 16M
+                        0 0x20000000 0 0x20000000>; // 512M at 512M
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -37,12 +42,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = < 0x01000000 0x0F000000    // 240M at 16M
-					0x20000000 0x20000000>;  // 512M at 512M
-			};
-			pic {
-			};
 			owner-config {
 				nae = <0x0>;
 				sae = <0x1>;
diff --git a/arch/mips/boot/dts/xlp3xx-netos.dts b/arch/mips/boot/dts/xlp3xx-netos.dts
index b57ebb3..8f19a89 100644
--- a/arch/mips/boot/dts/xlp3xx-netos.dts
+++ b/arch/mips/boot/dts/xlp3xx-netos.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp3xx-xmc-linux.dts b/arch/mips/boot/dts/xlp3xx-xmc-linux.dts
index f42d59c..c4c7fa4 100644
--- a/arch/mips/boot/dts/xlp3xx-xmc-linux.dts
+++ b/arch/mips/boot/dts/xlp3xx-xmc-linux.dts
@@ -4,11 +4,16 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0x28a00000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -43,10 +48,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0x28a00000>;  // 650M at 512M
-			};
                         fmn {
 				/* make the node mask to 0xffffffff for SRIO */
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
@@ -54,8 +55,6 @@
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
diff --git a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
index 082b0cb..da363e7 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
 
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0x40000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -38,18 +44,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0x40000000>;  //  1GB @ 512MB
-			};
                         fmn {
                                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                         };
-			pic {
-			};
 			nae {
 				sh-domains = <1>;
 				freein-fifo-mask = <0x30000 0 0 0>;
diff --git a/arch/mips/boot/dts/xlp8xx-helinux-pcienet.dts b/arch/mips/boot/dts/xlp8xx-helinux-pcienet.dts
index 4617a4e..2c5bd7a 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux-pcienet.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux-pcienet.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
 
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0x26000000>;
+        };
+
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -29,24 +36,18 @@
 
 			cpu {
 				onlinemask = <0xffff>;
-                napi-vc-mask = <0x0>;
+                		napi-vc-mask = <0x0>;
 			};
 			uart {
 				id = <0>;
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0x26000000>;  //  608MB @ 512MB
-			};
 			fmn {
-           		node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-           		node_1_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-           		node_2_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-           		node_3_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-			};
-			pic {
+           			node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
+	           		node_1_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
+        	   		node_2_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
+           			node_3_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
 			};
 			owner-config {
 				nae = <0x0>;   // currently for node 0
diff --git a/arch/mips/boot/dts/xlp8xx-helinux.dts b/arch/mips/boot/dts/xlp8xx-helinux.dts
index 9e5eda1..4ae0bf8 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux.dts
@@ -4,11 +4,16 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0xE0000000 0 0xC0000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -40,10 +45,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0xE0000000 0xC0000000>;  // 3GB @ 3.5GB
-			};
                         fmn {
                                 node_0_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222>;
                                 node_1_vc_mask = <0x22222222 0x22222222 0x22222222 0x22222222>;
diff --git a/arch/mips/boot/dts/xlp8xx-hybrid-nae-netos.dts b/arch/mips/boot/dts/xlp8xx-hybrid-nae-netos.dts
index b54c1e0..5e06f93 100644
--- a/arch/mips/boot/dts/xlp8xx-hybrid-nae-netos.dts
+++ b/arch/mips/boot/dts/xlp8xx-hybrid-nae-netos.dts
@@ -4,11 +4,17 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
 
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x02000000 0 0x0A000000   
+                        0 0x20000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -37,13 +43,6 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x02000000 0x0A000000
-					0x20000000 0x20000000>;  // 512M at 512M
-
-			};
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0x30000 0 0 0>;
 				sh-domains = <1>;
diff --git a/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts
new file mode 100644
index 0000000..e14f423
--- /dev/null
+++ b/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts
@@ -0,0 +1,124 @@
+/*
+ * XLP8XX Device Tree Source for EVP boards
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-EVP";
+	compatible = "netlogic,xlp";
+	#address-cells = <2>;
+	#size-cells = <2>;
+
+	memory {
+		device_type = "memory";
+		reg =  <0 0x00100000 0 0x0FF00000	// 255M at 1M
+			0 0x20000000 0 0xa0000000	// 2560M at 512M
+			0 0xe0000000 1 0x00000000>;
+	};
+
+	soc {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		ranges = <0 0  0 0x18000000  0x04000000   // PCIe CFG
+			  1 0  0 0x16000000  0x01000000>; // GBU chipselects
+
+		serial0: serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x30100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <17>;
+		};
+		serial1: serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x31100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <133333333>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
+		};
+		i2c0: ocores@32000 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x32100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <30>;
+		};
+		i2c1: ocores@33000 {
+			compatible = "opencores,i2c-ocores";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x33100 0xa00>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <32000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <31>;
+
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
+			dtt@4c {
+				compatible = "national,lm90";
+				reg = <0x4c>;
+			};
+		};
+		pic: pic@4000 {
+			interrupt-controller;
+			#address-cells = <0>;
+			#interrupt-cells = <1>;
+			reg = <0 0x4000 0x200>;
+		};
+
+		nor_flash@1,0 {
+			compatible = "cfi-flash";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			bank-width = <2>;
+			reg = <1 0 0x1000000>;
+
+			partition@0 {
+				label = "x-loader";
+				reg = <0x0 0x100000>; /* 1M */
+				read-only;
+			};
+
+			partition@100000 {
+				label = "u-boot";
+				reg = <0x100000 0x100000>; /* 1M */
+			};
+
+			partition@200000 {
+				label = "kernel";
+				reg = <0x200000 0x500000>; /* 5M */
+			};
+
+			partition@700000 {
+				label = "rootfs";
+				reg = <0x700000 0x800000>; /* 8M */
+			};
+
+			partition@f00000 {
+				label = "env";
+				reg = <0xf00000 0x100000>; /* 1M */
+				read-only;
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+	};
+};
diff --git a/arch/mips/boot/dts/xlp8xx-linux.dts b/arch/mips/boot/dts/xlp8xx-linux.dts
index 7a8fe9e..a970fbd 100644
--- a/arch/mips/boot/dts/xlp8xx-linux.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
-	#address-cells = <1>;
-	#size-cells = <1>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -42,18 +49,12 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>;  // 2586M at 512M
-			};
                         fmn {
                                 node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0x3ffff 0 0 0>;
 				/* node offsets and size */
@@ -72,7 +73,7 @@
 		};
 	};
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576";
+		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/xlp8xx-multi-os.dts b/arch/mips/boot/dts/xlp8xx-multi-os.dts
index 25606c2..39d9977 100644
--- a/arch/mips/boot/dts/xlp8xx-multi-os.dts
+++ b/arch/mips/boot/dts/xlp8xx-multi-os.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-    model = "MIPS,XLP8XX";
-    compatible = "NETL,XLP8XX_A0";
 
-    #address-cells = <1>;
-    #size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+    memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0F000000   
+                        0 0x20000000 0 0x10000000
+                        0 0x80000000 0 0x10000000>;
+     };
 
     hypervisor {
         hypervisor-name = "Xen";
@@ -42,8 +49,6 @@
                            0x20000000 0x10000000    // 256M at 512M
                            0x80000000 0x10000000>;  // 256M at 2G
             };
-            pic {
-            };
             fmn {
                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
diff --git a/arch/mips/boot/dts/xlp8xx-netos-nat.dts b/arch/mips/boot/dts/xlp8xx-netos-nat.dts
index 3282042..e207712 100644
--- a/arch/mips/boot/dts/xlp8xx-netos-nat.dts
+++ b/arch/mips/boot/dts/xlp8xx-netos-nat.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp8xx-netos.dts b/arch/mips/boot/dts/xlp8xx-netos.dts
index c8edc67..80dfcf5 100644
--- a/arch/mips/boot/dts/xlp8xx-netos.dts
+++ b/arch/mips/boot/dts/xlp8xx-netos.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp8xx-pcienet-netos.dts b/arch/mips/boot/dts/xlp8xx-pcienet-netos.dts
index 1db15c3..e6df821 100644
--- a/arch/mips/boot/dts/xlp8xx-pcienet-netos.dts
+++ b/arch/mips/boot/dts/xlp8xx-pcienet-netos.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
diff --git a/arch/mips/boot/dts/xlp8xx-pcieperf-netos.dts b/arch/mips/boot/dts/xlp8xx-pcieperf-netos.dts
index e0df427..451a9bc 100644
--- a/arch/mips/boot/dts/xlp8xx-pcieperf-netos.dts
+++ b/arch/mips/boot/dts/xlp8xx-pcieperf-netos.dts
@@ -4,11 +4,10 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP8XX";
-	compatible = "NETL,XLP8XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	model = "netlogic,XLP-EVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
-- 
1.7.1

