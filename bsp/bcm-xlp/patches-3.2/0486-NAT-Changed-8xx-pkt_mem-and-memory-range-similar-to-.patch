From e90d2dfa6821919f77e24da0b6df20af965076e2 Mon Sep 17 00:00:00 2001
From: Rahul Gupta <guptar@broadcom.com>
Date: Thu, 13 Feb 2014 17:16:42 +0530
Subject: NAT : Changed 8xx pkt_mem and memory range similar to 9xx and code clean up.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
index 47cf63f..82a19aa 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
@@ -10,21 +10,20 @@
         #address-cells = <2>;
         #size-cells = <2>;
 	/*memory range for linux. This will not appear in dom0*/
-        memory {
+    memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   //176M @ 1M
-                        0 0x20000000 0 0x40000000
-                        0x2 0x00000000 0x1 0x80000000>;
+                reg =  <0x0 0x01000000 0x0 0x0B000000       /* 16M @ 16+176M      */
+                        0x1 0x0        0x1 0x80000000>;     /* 4096M - 4096+6144M */
         };
 	/* memory range for HEv2 pkt mem. Only one contig memory per node supported */
 	pktmem {
 		device_type = "pktmem";
 
 		/* format: node number, 64-bit addr, 64-bit size */
-        reg = <0 0 0xe0000000 0x0 0x20000000
-	               1 0x0 0x0 0x0 0x0
-		       2 0x0 0x0 0x0 0x0
-		       3 0x0 0x0 0x0 0x0>;
+        reg =  <0 0x0 0x20000000 0x0 0x20000000             /* 512M - 512+512M */
+                1 0x0 0x0 0x0 0x0
+                2 0x0 0x0 0x0 0x0
+                3 0x0 0x0 0x0 0x0>;
 	};
 
 	hypervisor {
@@ -33,7 +32,8 @@
 		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
-	doms {
+	
+    doms {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		dom@0 {
@@ -48,19 +48,18 @@
                                 nae-rx-vc = <0>;
                                 nae-fb-vc = <1>;
                                 napi-vc-mask = <0x3>;
-
 			};
 			uart {
 				id = <0>;
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-                        fmn {
+            fmn {
                                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
                                 node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                        };
+            };
 			nae {
 				sh-domains = <1>;
 				freein-fifo-mask = <0x30000 0 0 0>;
@@ -131,9 +130,6 @@
 				freein-fifo-replenish-addr-info = <0x0 0x0 0x88000000 0x0 0x10000000>; /* 256M @2176M*/
 				/* < node fifomask descsize headroom ndescs > */
 				freein-fifo-replenish-desc-info = <0 0xffff 2048 0 1800>;
-
-
-
 			};
 			owner-config {
 				nae = <0x0>;
-- 
1.7.1

