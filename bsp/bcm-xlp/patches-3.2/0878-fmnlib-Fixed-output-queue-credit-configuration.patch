From 52b7629a2eecc96a20c9e4d7751a44e1ca0d8e8f Mon Sep 17 00:00:00 2001
From: Jayanthi A <jayanthi.annadurai@broadcom.com>
Date: Thu, 26 Dec 2013 10:32:06 -0800
Subject: fmnlib: Fixed output queue credit configuration

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
index d1cdbd7..634b776 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_config.c
@@ -979,11 +979,12 @@ static void nlm_hal_write_fmn_credit(int node, int max_nodes)
 							if ((credits+1) != nlm_node_cfg.fmn_cfg[node]->fmn_default_credits)
 								nlm_print("Overriding credis from source %d qid %d credits %d \n", base_vc, qid, credits);
 #endif
-							nlh_write_cfg_reg64(xlp_fmn_base[node] + (1 << 14),
-								(0ULL << 42) /* type, credit value + 1 */
-								| (credits << 26) /* credit count */
-								| ((qid | (dst_node << 10)) << 13) /* destination */
-								| (base_vc) ); /* source */
+                                                        nlh_write_cfg_reg64(xlp_fmn_base[node] + (1ULL << 14),
+                                                                (0ULL << 42) /* type, credit value + 1 */
+                                                                | ((uint64_t)credits << 26) /* credit count */
+                                                                | ((uint64_t)(qid | (dst_node << 10)) << 13) /* destination */
+                                                                | ((uint64_t)base_vc) ); /* source */
+
 					}
 				}
 			}
-- 
1.7.1

