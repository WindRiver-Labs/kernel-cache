From 49c5f280c1ef754583284ae2927b8965f59dc48b Mon Sep 17 00:00:00 2001
From: kopal <kopal@broadcom.com>
Date: Fri, 24 May 2013 19:11:23 +0530
Subject: nae: Fix ifconfig stats results.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c b/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
index d515428..5163750 100644
--- a/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
+++ b/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
@@ -290,8 +290,8 @@ static void xlp_get_strings (struct net_device *dev, u32 stringset, u8 *buf)
 	}
 }
 
-//#define STATS_RD(x)		\
-//	nlm_hal_read_mac_reg(priv->node, priv->block, priv->index, x)
+#define STATS_RD(x)		\
+	nlm_hal_read_mac_reg(priv->node, priv->block, priv->index, x)
 
 /**********************************************************************
  * xlp_get_mac_stats -  collect stats info from Mac stats register
@@ -301,7 +301,6 @@ static void xlp_get_strings (struct net_device *dev, u32 stringset, u8 *buf)
 
 void xlp_get_mac_stats(struct net_device *dev, struct net_device_stats *stats)
 {
-#if 0
 	struct dev_data *priv = netdev_priv(dev);
 #ifdef CONFIG_64BIT
 	uint64_t val;
@@ -365,7 +364,6 @@ void xlp_get_mac_stats(struct net_device *dev, struct net_device_stats *stats)
 	stats->tx_fifo_errors = STATS_RD(TX_DROP_FRAME_COUNTER);
 	*/
 	return;
-#endif
 }
 
 #undef STATS_RD
-- 
1.7.1

