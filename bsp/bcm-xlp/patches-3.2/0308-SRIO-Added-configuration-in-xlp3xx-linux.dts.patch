From d96c1b2236cb91512e1129ae10297bfcdf578181 Mon Sep 17 00:00:00 2001
From: Jayanthi A <jayanthi.annadurai@broadcom.com>
Date: Sun, 6 May 2012 14:05:41 +0530
Subject: SRIO: Added configuration in xlp3xx-linux.dts

Added srio configuration in xlp3xx-linux.dts
Fixed ucore default.c build issue
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp3xx-linux.dts b/arch/mips/boot/dts/xlp3xx-linux.dts
index 6c4dfa9..10dc30c 100644
--- a/arch/mips/boot/dts/xlp3xx-linux.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux.dts
@@ -47,10 +47,10 @@
 					0x20000000 0xa0000000>;  // 2586M at 512M
 			};
                         fmn {
-                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
-                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
-                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
-                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_0_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_1_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_2_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_3_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
                         };
 			pic {
 			};
@@ -93,6 +93,22 @@
 		nodes {
 			num-nodes = <1>;
 		};
+		srio@node-0{
+                       /* type = "master" or "device". master is responsible for enumeration*/
+                       type = "master";
+                       /* SRIO_MODE_x1 = 1(not supported), SRIO_MODE_x4 = 2 */
+                       mode = <2>;
+                       /* BAUD_1250M = 1 (1.25G)
+                          BAUD_2500M = 2 (25.G)
+                          BAUD_3125M = 3 (3.125G)
+                          BAUD_5000M = 4 (5G)
+                          BAUD_6250M = 5 (6.25G) */
+                       baud-rate = <5>;
+                       rxvc = <2>;
+                       msgdstid = <2>;
+                       /* sys-size = 1 for 16bit device id, 0 for 8 bit device id */
+                       sys-size = <1>;
+               };
 
 	};
 };
-- 
1.7.1

