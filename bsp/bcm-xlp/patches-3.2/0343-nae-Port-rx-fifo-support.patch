From eae95ecc873e521193915d8264ac533c96ee818b Mon Sep 17 00:00:00 2001
From: Hareesh R <hareeshr@broadcom.com>
Date: Tue, 11 Dec 2012 18:34:21 +0530
Subject: nae: Port rx fifo support

If port fifo enable is set, the ucore for linux selects the port
fifo for the incoming packets instead of the per cpu fifo.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/mnxlp8xx-linux.dts b/arch/mips/boot/dts/mnxlp8xx-linux.dts
index c01d892..314c601 100644
--- a/arch/mips/boot/dts/mnxlp8xx-linux.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-linux.dts
@@ -57,7 +57,7 @@
 			pic {
 			};
 			nae {
-				freein-fifo-mask = <0xffff 0xffff 0 0>;
+				freein-fifo-mask = <0x3ffff 0x3ffff 0 0>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
 				vfbtbl-sw-nentries = <32 32 32 32>;
diff --git a/arch/mips/boot/dts/xlp4xx-linux.dts b/arch/mips/boot/dts/xlp4xx-linux.dts
index 3666a0a..4951437 100644
--- a/arch/mips/boot/dts/xlp4xx-linux.dts
+++ b/arch/mips/boot/dts/xlp4xx-linux.dts
@@ -55,7 +55,7 @@
 			pic {
 			};
 			nae {
-				freein-fifo-mask = <0xffff 0 0 0>;
+				freein-fifo-mask = <0x3ffff 0 0 0>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
 				vfbtbl-sw-nentries = <32 32 32 32>;
diff --git a/arch/mips/boot/dts/xlp8xx-linux.dts b/arch/mips/boot/dts/xlp8xx-linux.dts
index 2f1f1e8..7a8fe9e 100644
--- a/arch/mips/boot/dts/xlp8xx-linux.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux.dts
@@ -55,7 +55,7 @@
 			pic {
 			};
 			nae {
-				freein-fifo-mask = <0xffff 0 0 0>;
+				freein-fifo-mask = <0x3ffff 0 0 0>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
 				vfbtbl-sw-nentries = <32 32 32 32>;
-- 
1.7.1

