From 2e3dc1f7e104a3746c89ad54b248963ac9faf539 Mon Sep 17 00:00:00 2001
From: Sunil Kulkarni <sunilku@broadcom.com>
Date: Fri, 27 Sep 2013 04:06:49 -0700
Subject: openssl: Added support for RSA CRT to avoid memory copies. Set RSA frequency as confgiured in DTB. Added support for 8192bits RSA test in openssl

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/misc/netlogic/nlmcrypto/init.c b/drivers/misc/netlogic/nlmcrypto/init.c
index bec80df..4d79677 100644
--- a/drivers/misc/netlogic/nlmcrypto/init.c
+++ b/drivers/misc/netlogic/nlmcrypto/init.c
@@ -235,8 +235,8 @@ int nlm_sae_init(void *fdt, struct nlm_sae_init_param *p)
 	}
 
 	p->freq = nlm_hal_get_fdt_freq(fdt, NLM_SAE);
+	nlm_hal_set_sae_freq(p->node, p->freq);
 
-	//nlm_hal_set_sae_freq(p->node, p->freq);
 	/* Fallback to default engine selection */
 	//nlm_hal_set_sae_engine_sel(p->node);
 
@@ -254,5 +254,6 @@ int nlm_rsa_init(void *fdt, struct nlm_rsa_init_param *p)
 		return 0;
 	}
 	p->freq = nlm_hal_get_fdt_freq(fdt, NLM_RSA);
+	nlm_hal_set_rsa_freq(p->node, p->freq);
 	return rsa_init(p);
 }
-- 
1.7.1

