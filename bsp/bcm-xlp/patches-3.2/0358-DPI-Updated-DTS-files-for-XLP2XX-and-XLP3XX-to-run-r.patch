From 2c308a99eec43fa88172fc2ba2bd165284534f8f Mon Sep 17 00:00:00 2001
From: Mahendra Ladhe <mladhe@broadcom.com>
Date: Tue, 2 Apr 2013 13:23:38 +0530
Subject: DPI: Updated DTS files for XLP2XX and XLP3XX to run regex demos as Linux applications

Two DTS files (one for XLP2XX and the other for XLP3XX) are updated. They are used when running the regex demos as Linux applications
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp2xx-linux-dpi.dts b/arch/mips/boot/dts/xlp2xx-linux-dpi.dts
index dae8b7e..fd547b5 100644
--- a/arch/mips/boot/dts/xlp2xx-linux-dpi.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux-dpi.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP2XX";
-	compatible = "NETL,XLP2XX_A0";
-
-	#address-cells = <1>;
-	#size-cells = <1>;
+	
+	model = "netlogic,XLP-FVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -34,8 +41,7 @@
 				sae-rx-vc = <0>; /*  */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
 				ipsec-async-vc  = <3>;
-				ipsec-sync-vc   = <2>; /* should be exclusive either
-							  ipsec-sync-vc  or soc/srio@node-0  */
+				ipsec-sync-vc   = <2>; 
 
 			};
 			uart {
@@ -43,16 +49,10 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>;  // 2586M at 512M
-			};
                         fmn {
-				/* make the node mask to 0xffffffff for SRIO */
+				/* make the node mask to 0xffffffff for SRIO */  
                                 node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
@@ -74,7 +74,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576";
+		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
@@ -97,22 +97,6 @@
 		nodes {
 			num-nodes = <1>;
 		};
-		srio@node-0{
-                       /* type = "master" or "device". master is responsible for enumeration*/
-                       type = "master";
-                       /* SRIO_MODE_x1 = 1(not supported), SRIO_MODE_x4 = 2 */
-                       mode = <2>;
-                       /* BAUD_1250M = 1 (1.25G)
-                          BAUD_2500M = 2 (25.G)
-                          BAUD_3125M = 3 (3.125G)
-                          BAUD_5000M = 4 (5G)
-                          BAUD_6250M = 5 (6.25G) */
-                       baud-rate = <5>;
-                       rxvc = <2>;
-                       msgdstid = <2>;
-                       /* sys-size = 1 for 16bit device id, 0 for 8 bit device id */
-                       sys-size = <1>;
-               };
 
 	};
 	frequency-config {
diff --git a/arch/mips/boot/dts/xlp3xx-linux-dpi.dts b/arch/mips/boot/dts/xlp3xx-linux-dpi.dts
index 80fe380..e14dce6 100644
--- a/arch/mips/boot/dts/xlp3xx-linux-dpi.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux-dpi.dts
@@ -4,11 +4,18 @@
 
 /dts-v1/;
 / {
-	model = "MIPS,XLP3XX";
-	compatible = "NETL,XLP3XX_A0";
+	model = "netlogic,XLP-SVP";
+        compatible = "netlogic,xlp";
+        #address-cells = <2>;
+        #size-cells = <2>;
+	/*memory range for linux. This will not appear in dom0*/
+        memory {
+                device_type = "memory";
+                reg =  <0 0x01000000 0 0x0B000000   
+                        0 0x20000000 0 0xa0000000
+                        0 0xe0000000 0 0x20000000>;
+        };
 
-	#address-cells = <1>;
-	#size-cells = <1>;
 
 	hypervisor {
 		hypervisor-name = "Xen";
@@ -34,7 +41,7 @@
 				sae-rx-vc = <0>; /*  */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
 				ipsec-async-vc  = <3>;
-				ipsec-sync-vc   = <2>; /* should be exclusive either
+				ipsec-sync-vc   = <2>; /* should be exclusive either  
 							  ipsec-sync-vc  or soc/srio@node-0  */
 
 			};
@@ -43,19 +50,16 @@
 				owner = <1>;
 				sharedcfg = <0x1f000000>;
 			};
-			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
-					0x20000000 0xa0000000>;  // 2586M at 512M
-			};
+                        mmc {
+                                slots = <2>;
+                        };
                         fmn {
-				/* make the node mask to 0xffffffff for SRIO */
+				/* make the node mask to 0xffffffff for SRIO */  
                                 node_0_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-                                node_1_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-                                node_2_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
-                                node_3_vc_mask = <0x00000000 0x00000000 0x00000000 0x00000000>;
+                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
-			pic {
-			};
 			nae {
 				freein-fifo-mask = <0xff 0 0 0>;
 				/* node offsets and size */
@@ -77,7 +81,7 @@
 	};
 
 	chosen {
-		bootargs = " console=ttyS0,115200 mem=512m@3584m rhash_entries=1048576";
+		bootargs = " console=ttyS0,115200 rhash_entries=1048576";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
-- 
1.7.1

