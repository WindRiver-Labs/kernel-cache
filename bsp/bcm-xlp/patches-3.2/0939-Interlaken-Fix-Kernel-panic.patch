From e4a05c4ebfae2ae1bee6f3e55e2b8f8e75080c82 Mon Sep 17 00:00:00 2001
From: Anurag <anurag.gopinath@broadcom.com>
Date: Tue, 13 May 2014 16:57:25 +0530
Subject: Interlaken: Fix Kernel panic.

When the card/slot is empty, kernel panic observed. Fixed.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/lib/netlib/external/cortina_cs34x7/nlm_cortina_cs34x7.c b/arch/mips/netlogic/lib/netlib/external/cortina_cs34x7/nlm_cortina_cs34x7.c
index a9b9436..0f6ca6f 100644
--- a/arch/mips/netlogic/lib/netlib/external/cortina_cs34x7/nlm_cortina_cs34x7.c
+++ b/arch/mips/netlogic/lib/netlib/external/cortina_cs34x7/nlm_cortina_cs34x7.c
@@ -375,12 +375,9 @@ int nlm_hal_init_cs34x7(int hwport,int num_lanes, int lane_rate, int nae_id)
 	if(nae_id == 1)
 		hwport += 8;
 
-	if(!IS_NLM_XLP9XX_FAMILY)	
-	{	
-		if (!is_ilk_card_onslot(hwport/4)) {
+        if (!is_ilk_card_onslot(hwport/4)) {
 			nlm_print("No interlaken card on slot %d\n",hwport/4);
 			return -1;
-		}
 	}
 
 	switch(hwport) {
-- 
1.7.1

