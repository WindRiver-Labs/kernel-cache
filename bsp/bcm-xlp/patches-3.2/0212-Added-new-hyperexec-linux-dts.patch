From 80f8d51361c3b3c45e4ddd123d8aa1532b1a69cb Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Tue, 7 Dec 2010 13:40:22 -0800
Subject: Added new hyperexec-linux dts

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/linux.dts b/arch/mips/boot/dts/linux.dts
index 7d4b7b3..9c06ba3 100644
--- a/arch/mips/boot/dts/linux.dts
+++ b/arch/mips/boot/dts/linux.dts
@@ -41,13 +41,19 @@
 				reg = <0x01000000 0x0B000000	// 176M at 16M
 					0x20000000 0xa0000000>;  // 2586M at 512M
 			};
+                        fmn {
+                                node_0_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_1_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_2_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                                node_3_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+                        };
 			pic {
 			};
 		};
 	};
 
 	chosen {
-		bootargs = " xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+		bootargs = " xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init mem=512m@3584m ";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/netos.dts b/arch/mips/boot/dts/netos.dts
index 152c7cb..2fac23b 100644
--- a/arch/mips/boot/dts/netos.dts
+++ b/arch/mips/boot/dts/netos.dts
@@ -56,6 +56,14 @@
 			memory {
 				reg = <0x20000000 0xa0000000>;  // 2560M @ 512M
 			};
+
+			/* In hyperexec-linux mode, vc_mask needs to be synchronized with linux fmn node! */
+                        fmn {
+                                node_0_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_1_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_2_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                                node_3_vc_mask = <0x99999999 0x99999999 0x99999999 0x99999999>;
+                        };
 		};
 	};
 
-- 
1.7.1

