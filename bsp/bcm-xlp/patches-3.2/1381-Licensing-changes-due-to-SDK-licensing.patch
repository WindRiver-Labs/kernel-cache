From 45ae3d9e201ae0ec92a8b15fd1593d033532f17c Mon Sep 17 00:00:00 2001
From: Sreenidhi BR <sreenira@broadcom.com>
Date: Fri, 23 Nov 2012 13:56:41 +0530
Subject: Licensing: changes due to SDK licensing.

advanced nae functionality in hal is moved to hal/mod.
Updatine Makefiles and others to take care of this change
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/net/ethernet/broadcom/nae/xlpge.h b/drivers/net/ethernet/broadcom/nae/xlpge.h
index 69d0794..fffff9c 100644
--- a/drivers/net/ethernet/broadcom/nae/xlpge.h
+++ b/drivers/net/ethernet/broadcom/nae/xlpge.h
@@ -32,6 +32,8 @@
 #include <asm/atomic.h>
 #include <nlm_hal_nae.h>
 
+extern struct nlm_hal_nae_fp nlm_hal_nae_fp_data;
+
 #define	XLP_SOC_MAC_DRIVER		"mac-xlp"
 #define DRV_VERSION			"0.2"
 #define	PCI_VENDOR_NETLOGIC		0x184e
diff --git a/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c b/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
index 478def3..d5f5309 100644
--- a/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
+++ b/drivers/net/ethernet/broadcom/nae/xlpge_ethtool.c
@@ -301,7 +301,7 @@ void xlp_get_mac_stats(struct net_device *dev, struct net_device_stats *stats)
 #endif
 
 	if (priv->type == INTERLAKEN_IF) {
-		nlm_hal_get_ilk_mac_stats(priv->node, priv->block,
+		nlm_hal_nae_fp_data.get_ilk_mac_stats(priv->node, priv->block,
 			priv->phy.addr, stats);
 		return;
 	}
diff --git a/drivers/net/ethernet/broadcom/nae/xlpge_nae.c b/drivers/net/ethernet/broadcom/nae/xlpge_nae.c
index 486b6c2..14c5e18 100644
--- a/drivers/net/ethernet/broadcom/nae/xlpge_nae.c
+++ b/drivers/net/ethernet/broadcom/nae/xlpge_nae.c
@@ -1092,10 +1092,10 @@ static int nlm_xlp_nae_change_mtu(struct net_device *dev, int new_mtu)
 		nlm_hal_set_sgmii_framesize(priv->node, priv->block,
 			priv->index, local_mtu);
 	else if (priv->type==XAUI_IF)
-		nlm_hal_set_xaui_framesize(priv->node, priv->block,
+		nlm_hal_nae_fp_data.set_xaui_framesize(priv->node, priv->block,
 			local_mtu, local_mtu);
 	else if (priv->type==INTERLAKEN_IF)
-		nlm_hal_set_ilk_framesize(priv->node, priv->block,
+		nlm_hal_nae_fp_data.set_ilk_framesize(priv->node, priv->block,
 			priv->phy.addr, local_mtu);
 	else {
 		spin_unlock_irqrestore(&priv->lock, flags);
-- 
1.7.1

