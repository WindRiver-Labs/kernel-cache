From 55f453108ab6fd21543505b0749424241422a7ec Mon Sep 17 00:00:00 2001
From: Wei Zhang <wezhang@broadcom.com>
Date: Wed, 24 Jul 2013 19:50:08 -0700
Subject: u-boot: u-boot need direct access like kernel

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/lib/syslib/include/nlm_hal.h b/arch/mips/netlogic/lib/syslib/include/nlm_hal.h
index 194e8e2..290a202 100644
--- a/arch/mips/netlogic/lib/syslib/include/nlm_hal.h
+++ b/arch/mips/netlogic/lib/syslib/include/nlm_hal.h
@@ -236,7 +236,7 @@ inline static u32 xlp9xx_get_node_id(void)
 #endif
 
 //node<0: use current cpu nodeid
-#ifdef NLM_HAL_LINUX_KERNEL
+#if defined(NLM_HAL_LINUX_KERNEL) || defined(NLM_HAL_UBOOT)
 inline static volatile u32* xlp9xx_cpu_io_mmio(int node, u32 offset)
 {
 	volatile u32 * pcmu = NULL;
@@ -271,8 +271,7 @@ inline static volatile u32* xlp9xx_cpu_io_mmio(int node, u32 offset)
 #endif
 
 //get device's mem bar0/1 and convert to 64bits uncached virtual memory
-
-#ifdef NLM_HAL_LINUX_KERNEL
+#if defined(NLM_HAL_LINUX_KERNEL) || defined(NLM_HAL_UBOOT)
 inline static volatile u32* xlp9xx_cpu_mem_base(u32 node, u32 offset)
 {
 	uint64_t phy;
-- 
1.7.1

