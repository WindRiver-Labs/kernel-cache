From 15cc6fac655b346c27a6a337d903f03fd1d94389 Mon Sep 17 00:00:00 2001
From: Kamlakant Patel <kamlakant.patel@broadcom.com>
Date: Sun, 6 Apr 2014 09:47:31 +0530
Subject: smsc: remove hardcoded MAC address

Read MAC address from EEPROM.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
index dd22687..d0c7bca 100644
--- a/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
@@ -236,7 +236,7 @@
 		        interrupt-parent = <&gpio>;
 
 		        phy-mode = "mii";
-		        mac-address = [00 11 22 33 44 55];
+			smsc,save-mac-address;
 			smsc,irq-push-pull;
 		};
 	};
diff --git a/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
index 461388a..d6dfe30 100644
--- a/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
@@ -142,7 +142,7 @@
 		        interrupt-parent = <&gpio>;
 
 		        phy-mode = "mii";
-		        mac-address = [00 11 22 33 44 55];
+			smsc,save-mac-address;
 			smsc,irq-push-pull;
 		};
 	};
diff --git a/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
index 22efb22..54bb9ed 100644
--- a/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
@@ -238,7 +238,7 @@
 		        interrupt-parent = <&gpio>;
 
 		        phy-mode = "mii";
-		        mac-address = [00 11 22 33 44 55];
+			smsc,save-mac-address;
 		        smsc,irq-push-pull;
 		};
 		rio: xlp_rio@2c000 {
-- 
1.7.1

