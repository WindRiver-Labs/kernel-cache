From 22b648efa3cb2ff20a452f6907541a52efc4c1a4 Mon Sep 17 00:00:00 2001
From: Saswat Dash <saswat.dash@broadcom.com>
Date: Mon, 3 Feb 2014 15:19:14 +0530
Subject: fmn: added EHB for popq configuration

[Based on SDK 3.2]
Delete the defination of _ehb() because the compile error as below:
nlm_hal_fmn.h:185:0: error: "_ehb" redefined [-Werror]
 #define _ehb() __asm__ __volatile__("ehb" : : : "memory")
 ^

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
index 95b2c8e..11e8d40 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
@@ -239,6 +239,7 @@ static inline int nlm_hal_pop_cfg_update (uint32_t vc_mask)
 	config &= ~(0x1e);
 	config |= vc;
 	xlp_write_config(config);
+	_ehb();
 
 	return 0;
 }
-- 
1.7.1

