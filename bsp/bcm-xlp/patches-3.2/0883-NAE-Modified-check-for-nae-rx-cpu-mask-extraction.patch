From 912975f0ee748ecd47c3cbcc2cfc25a9c9684de6 Mon Sep 17 00:00:00 2001
From: Saswat Dash <saswat.dash@broadcom.com>
Date: Mon, 27 Jan 2014 10:27:07 +0530
Subject: NAE: Modified check for nae-rx-cpu-mask extraction

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
index 6aa533b..78db869 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
@@ -454,7 +454,7 @@ start_for_dom:
 	if (nodeoffset >= 0) {
 		pval = (unsigned int *)fdt_getprop(fdt, nodeoffset, "nae-rx-cpu-mask", &plen);
 	}
-        if ((nodeoffset < 0) || (!plen)) {
+        if ((nodeoffset < 0) || (!pval) || (!plen)) {
 		sprintf(dom_node_str, "/doms/dom@%d/cpu", domid);
 		nodeoffset = fdt_path_offset(fdt, dom_node_str);
 		if (nodeoffset >= 0) {
-- 
1.7.1

