From 8863bd4642a9b7e5ed92b0b3899a1823ddebeddf Mon Sep 17 00:00:00 2001
From: Vikas Gupta <vikasg@netlogicmicro.com>
Date: Wed, 27 Jul 2011 16:41:54 +0530
Subject: 1)Fix vfbid mapping 2)Enable Complex-0 as SGMII

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/storm-linux-nae.dts b/arch/mips/boot/dts/storm-linux-nae.dts
index 71574de..d39050a 100644
--- a/arch/mips/boot/dts/storm-linux-nae.dts
+++ b/arch/mips/boot/dts/storm-linux-nae.dts
@@ -14,20 +14,20 @@
 	// (each entry is a pair of (vfbid , dest-vc)
 	// Legal range: (vfbid (0 - 126), dest-vc (0 - 4095))
 	vfbid-map = <
-/*
 		     // NAE -> CPU mapping 
 		     // Freeback VC = 0
 		      0   1  1   5  2   9  3  13
 		      4  17  5  21  6  25  7  29
 		      8  33  9  37 10  41 11  45
 	 	     12  49 13  53 14  57 15  61
-*/
+/*		     
 		     // NAE -> NAE mapping 
 		     32	496 33 497 34 498 35 499
 		     36	500 37 501 38 502 39 503
 
 		     // NULL FBID Should map to cpu0 to detect NAE send message errors 
 		     127 0
+*/
 
 
 		>;
@@ -71,32 +71,7 @@
                 };
 
 	};
-/*
-	complex@0 {
-                device_type = "nae-complex";
-                mode = "xaui";
-
-                loopback_mode = <0>;
-
-                // Max ingress fifo size 256 units (size of one unit is 64 byte)
-                iface_fifo_sizes = <52>;
-
-                // Max parser sequence fifo size 1024 packets
-                // (if 1588 Timestamp is not required, then max size increases to 2048)
-                num_channels = < 1>;
-                parser_sequence_fifo_sizes = <120>;
-                //parser_sequence_fifo_sizes = <62 >;
-
-                // Since rx_buffer is per context, we can have a few different ways
-                //  to populate the operand
-                rx_buffer_sizes = <944>;
 	
-                // Max available descriptors are 1024 (across all complexes).
-                // Per port num_free_descriptors must be even number
-                num_free_descs = < 150 >;
-                free_desc_sizes = < 2048 >;
-                ucore_mask = <0xff >;
-        };
 	complex@0 {
                 device_type = "nae-complex";
                 mode = "sgmii";
@@ -127,8 +102,8 @@
                 free_desc_sizes = <2048 2048 2048 2048>;
                 ucore_mask = <0xff 0xff 0xff 0xff>;
         };
-*/
-        complex@1 {
+        
+	complex@1 {
                 device_type = "nae-complex";
                 mode = "xaui";
 
-- 
1.7.1

