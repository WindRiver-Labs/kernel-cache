From f4f289048d60946f9bf18d03eaea762bb8c74d0d Mon Sep 17 00:00:00 2001
From: Kamlakant Patel <kamlakant.patel@broadcom.com>
Date: Fri, 18 Jul 2014 10:03:36 +0530
Subject: mnxlp9xx: add dts entry for NAND

add interrupts property to spi controller.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts b/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
index a71e99f..3ab1d69 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
@@ -88,6 +88,9 @@
 			#size-cells = <0>;
 			reg = <0 0x13a000 0x100>;
 
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
 			spi_nor@1 {
 				compatible = "spansion,s25sl12801";
 				#address-cells = <1>;
@@ -171,5 +174,35 @@
 				read-only;
 			};
 		};
+
+		nand_flash@139000 {
+			compatible = "brcm,xlp9xx-nand";
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0 0x139000 0x1000>;
+
+			nand-ecc-mode = "hw";
+
+			nand_cs1 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				reg = <1>;
+
+				partition@0 {
+					label = "firmware";
+					reg = <0x0 0x20000000>;
+				};
+
+				partition@1 {
+					label = "kernel";
+					reg = <0x20000000 0x20000000>;
+				};
+
+				partition@2 {
+					label = "user";
+					reg = <0x40000000 0x0>;
+				};
+			};
+		};
 	};
 };
-- 
1.7.1

