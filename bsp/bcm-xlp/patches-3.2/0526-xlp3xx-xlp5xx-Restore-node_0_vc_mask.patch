From eda74e2c722915fd10539f3566e4410abb3b18a1 Mon Sep 17 00:00:00 2001
From: P. Sadik <psadik@broadcom.com>
Date: Wed, 21 May 2014 14:06:12 +0530
Subject: xlp3xx/xlp5xx: Restore node_0_vc_mask.

Restore the default node_0_vc_mask so that HeV2 apps can get exclusive VCs.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp3xx-linux.dts b/arch/mips/boot/dts/xlp3xx-linux.dts
index 3b0cd7d..dff469c 100644
--- a/arch/mips/boot/dts/xlp3xx-linux.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux.dts
@@ -52,15 +52,16 @@
 			};
                         fmn {
 				/* make the node mask to 0xffffffff for SRIO */
-                                /*node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                                 node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
-								*/
+				/*
                                 node_0_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
                                 node_1_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
                                 node_2_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
                                 node_3_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff>;
+				*/
 
 			};
 			nae {
diff --git a/arch/mips/boot/dts/xlp5xx-linux.dts b/arch/mips/boot/dts/xlp5xx-linux.dts
index 69caa7e..d198bb8 100644
--- a/arch/mips/boot/dts/xlp5xx-linux.dts
+++ b/arch/mips/boot/dts/xlp5xx-linux.dts
@@ -61,8 +61,8 @@
 				sharedcfg = <0x1f000000>;
 			};
                         fmn {	/* make the node mask to 0xffffffff for SRIO */
-				/*node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb >; */
-				node_0_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff >;
+				node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb >;
+				/* node_0_vc_mask = <0xffffffff 0xffffffff 0xffffffff 0xffffffff >; */
                         };
 			pic {
 			};
@@ -103,8 +103,8 @@
 		dom@1 {
 			device_type = "domain";
 
-			cpu {   
-                                onlinemask = <0x01>; 
+			cpu {
+                                onlinemask = <0x01>;
                                 nae-rx-vc = <2>;
 			};
 
@@ -123,16 +123,16 @@
                                 onlinemask = <0x01>;
 			};
 		};
-                dom@2 { 
+                dom@2 {
                         device_type = "domain";
 
-                        cpu {   
+                        cpu {
                                 onlinemask = <0x1>;
                                 nae-rx-vc = <2>;
                         };
 
                         resource-allocation {
-                                net@0 { 
+                                net@0 {
                                         port-mask = <0x0 0 0 0>;
                                         frinlifo-mask = <0x00 0 0 0>;
                                         frinlifo-shared-mode = <0 0 0 0>;
-- 
1.7.1

