From 04948b9da639f21a577397ceee8dc84cb446fda2 Mon Sep 17 00:00:00 2001
From: Tanmay Jagdale <tanmayj@broadcom.com>
Date: Tue, 8 Jul 2014 17:25:09 +0530
Subject: xlp9xx: support for xlp9xx and 5xx

Added support for xlp9xx and xlp5xx. A new xlpii-config.dts file is created
along with generic-soc-fmn-ver1.dts and generic-soc-net-ver1.dts.
xlp9xx and xlp5xx share the same configuration file.
Also create a xlp9xx-guest.dts that is used to boot the guest operating system.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
new file mode 100644
index 0000000..aa8af93
--- /dev/null
+++ b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
@@ -0,0 +1,223 @@
+fmn@node-0 {
+	default-credits = <16>;
+	default-queue-size = <12288>;
+	fmn-spill-mem-base = <0x0 0x0>; /*0 - dynamic allocation, only for 64 bit linux */
+	fmn-spill-mem-size = <0x0 0x02000000>;
+
+	q-config {
+		/*
+		 * Supported station names :
+		 * --------------------------------------------------------------------------------------------
+		 * CPU POPQ PCIE0 PCIE1 PCIE2 PCIE3 GDX GDX1 RSA CRYPTO CMP POE NAE REGX SRIO LZS POE1 NAE1 ALE
+		 * --------------------------------------------------------------------------------------------
+		 */
+		version = <1>;
+		cpu {
+			/* There are 4 VCs per thread.
+			 * The onchip queue configuration values given in this section is applicable only
+			 * to the VCs enabled here. If this is zero, it is applicable for all the CPU VCs
+			 */
+			cpu-vc-mask = <0x0>;
+			onchip-entries = <64>;
+			queue-size = <45056>;
+			credits-from {
+				stn@node-0 {
+					poe = <1024>;
+					poe1 = <1024>;
+					nae = <32>;
+					nae1 = <32>;
+				};
+			};
+		};
+
+		crypto {
+			onchip-entries = <256>;
+			num-sae-queues = <1>;
+			queue-size = <49152>;
+			credits-from {
+				stn@node-0 {
+					cpu = <128>;
+				};
+			};
+		};
+
+		rsa {
+			onchip-entries = <256>;
+			queue-size = <49152>;
+			credits-from {
+				stn@node-0 {
+					cpu = <128>;
+				};
+			};
+		};
+
+		nae {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <512>;
+				};
+			};
+		};
+
+		poe {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <64>;
+				};
+			};
+		};
+
+		nae1 {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae1 = <512>;
+				};
+			};
+		};
+
+		poe1 {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae1 = <64>;
+				};
+			};
+		};
+	};
+};
+
+fmn@node-1 {
+	default-credits = <16>;
+	default-queue-size = <28672>;
+	fmn-spill-mem-base = <0 0>; /*0 - dynamic allocation */
+	fmn-spill-mem-size = <0x0 0x02000000>;
+	q-config {
+		/*
+		 * Supported station names :
+		 * --------------------------------------------------------------------------------------------
+		 * CPU POPQ PCIE0 PCIE1 PCIE2 PCIE3 GDX GDX1 RSA CRYPTO CMP POE NAE REGX SRIO LZS POE1 NAE1 ALE
+		 * --------------------------------------------------------------------------------------------
+		 */
+		version = <1>;
+		cpu {
+			cpu-vc-mask = <0xc>;
+			onchip-entries = <64>;
+			queue-size = <45056>;
+
+			credits-from {
+				stn@node-0 {
+					poe = <128>;
+					poe1 = <128>;
+					nae = <32>;
+					nae1 = <32>;
+					cpu = <32>;
+				};
+				stn@node-1 {
+					poe = <128>;
+					poe1 = <128>;
+					nae = <32>;
+					nae1 = <32>;
+					cpu = <32>;
+				};
+			};
+		};
+
+		crypto {
+			onchip-entries = <256>;
+			num-sae-queues = <1>;
+			queue-size = <49152>;
+			credits-from {
+				stn@node-0 {
+					cpu = <128>;
+				};
+			};
+		};
+
+		rsa {
+			onchip-entries = <256>;
+			queue-size = <49152>;
+			credits-from {
+				stn@node-0 {
+					cpu = <128>;
+				};
+			};
+		};
+
+		nae {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <512>;
+				};
+				stn@node-1 {
+					cpu = <64>;
+				};
+			};
+		};
+
+		poe {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <64>;
+				};
+				stn@node-1 {
+					cpu = <64>;
+				};
+			};
+		};
+
+		nae1 {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae1 = <512>;
+				};
+				stn@node-1 {
+					cpu = <64>;
+				};
+			};
+		};
+
+		poe1 {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae1 = <64>;
+				};
+				stn@node-1 {
+					cpu = <64>;
+				};
+			};
+		};
+	};
+};
+
+fmn@node-2 {
+};
+
+fmn@node-3 {
+};
diff --git a/arch/mips/boot/dts/generic-soc-net-ver1.dtsi b/arch/mips/boot/dts/generic-soc-net-ver1.dtsi
new file mode 100644
index 0000000..1a0830d
--- /dev/null
+++ b/arch/mips/boot/dts/generic-soc-net-ver1.dtsi
@@ -0,0 +1,1012 @@
+net@node-0 {
+	compatible = "XLP9XX";
+	version = <1>;
+
+	ale-0 {
+		enable = <0>;
+		cpu-threshold = <32>;
+		nae-threshold = <80>;
+		data-base {
+
+		};
+	};
+
+	nae-0 {
+		frequency = <667>;
+		ale-bypass = <1>;	 /* 0 = enable ALE, 1 = bypass ALE */
+		parser-enable = <1>;
+		freein-unique-desc-size = <0>;
+
+		/* Default Template for ucore code. Values are filled at runtime */
+		ucore {
+			src@1 {
+				num-opcodes = <0>;
+				mask = <0xffff>;
+				opcodes = <0>;
+			};
+		};
+
+		freein-fifo-config {
+			/*
+			 * 1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+			 * 2. Onnchip desc size per queue will be configured from arry below
+			 * If spill descs per queue is specified,
+			 * 1. spill will be enabled for all the queues(except mgmt) using the spill memory specified
+			 *	in the OS config file.
+			 */
+			freein-fifo-spill-mem-range = <0x0 0x0 0x0 0x200000>; /* 2MB @ dynamically allocated address */
+			freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+			freein-fifo-spill-num-descs = <1200>;
+			freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072
+						3072 3072 3072 3072 3072 3072 3072>;
+			port-fifo-en = <1>;
+		};
+
+		complex@0 {
+			mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xaui, rxaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0 - NO_HIGIG, 1 = HIGIG, 2 = HIGIG2 */
+				xgmii-speed = <10>;		/* 10-10G, 12-12G, 16-16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params */
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/* phy address in rxaui mode.Only 2 entries are used */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				ext-phy-sbl = <1 1 0 0>;
+				num-free-descs = <512 512 512 512>;	/* Number of free descriptors, per port,
+									 * if free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <150 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <0 1 2 3>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in lifo
+							 * is not in shared mode */
+			};
+		};
+
+		complex@1 {
+			mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xaui, rxaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0 = NO_HIGIG, 1 = HIGIG, 2 = HIGIG2 */
+				xgmii-speed = <10>;		/* 10 = 10G, 12 = 12G, 16 = 16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <4 5 0 0>;	/* phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				ext-phy-sbl = <1 1 0 0>;
+				num-free-descs = <512 512 512 512>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0 = NO_HIGIG, 1 = HIGIG, 2 = HIGIG2 */
+				xgmii-speed = <10>;		/* 10 = 10G, 12 = 12G, 16 = 16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/* phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <150 150 150 150>;	/* Number of free descriptors per port if free
+									 * in lifo is not in shared mode*/
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <4 5 6 7>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called as
+								 * sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors, per port, if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors, per port, if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@2 {
+			mode = "sgmii";
+			/*
+			 * sgmii only
+			 */
+			sgmii {
+				loopback = <0>;			/* loopback = 0 or 1 */
+				mgmt-port = <1>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <0>;		/* phy address for each port */
+				ext-phy-bus = <0>;		/* phy bus numbers */
+				num-channels = <1>;		/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52>;		/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+		};
+	};
+
+	poe-0 {
+		distribution-enable = <1>;
+		dist-drop-enable = <0>;			/* 16 bit mask */
+		class-map-mode = <0>;			/* 0 = All NAE
+							 * 1 = Class 7-4 reserved for CPU
+							 * 2 = Class 7-5 reserved for CPU
+							 * 3 = Class 7-6 reserved for CPU
+							 * 4 = Class 7 reserved for CPU
+							 */
+		class-drop-enable = <0>;		/* 8 bit mask */
+		drop-timer = <0>;			/* Drop timer */
+		dest-threshold = <0xa>;
+		dist-threshold = <0xa 0xa 0xa 0xa>;	/* Dist threshold group 0..3 */
+		statistics-enable = <0>;
+
+		poe-spill-address = <0 0>;		/*  <0xec00000>  */
+		poe-spill-length =  <0>;		/*  <0x1000000>  */
+		/*
+		 * MAX poe enq/deq spill memory can be 0xFFF400 bytes
+		 * it comes from (0x3FFD * 8 classes * 2 (Enq and Deq spill) * 64B)
+		 * where 0x3FFD is max enq or deq spill configuration
+		 */
+		din-spill-address = <0 0>;
+		din-spill-size = <0x00100000>;
+
+		distribution {
+			default-thread-sel = <0>;	/* Valid values: Thread Select 0..3 */
+		};
+	};
+
+	nae-1 {
+		frequency = <667>;
+		ale-bypass = <1>;	 /* 0 = enable ALE, 1 = bypass ALE */
+		parser-enable = <1>;
+		freein-unique-desc-size = <0>;
+
+		/* Default Template for ucore code. Values are filled at runtime */
+		ucore {
+			src@1 {
+				num-opcodes = <0>;
+				mask = <0xffff>;
+				opcodes = <0>;
+			};
+		};
+
+		freein-fifo-config {
+			/*
+			 * 1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+			 * 2. Onnchip desc size per queue will be configured from arry below
+			 * If spill descs per queue is specified,
+			 * 1. spill will be enabled for all the queues(except mgmt) using the spill memory specified
+			 *	in the OS config file.
+			 */
+			freein-fifo-spill-mem-range = <0x0 0x0 0x0 0x200000>; /* 2MB @ dynamically allocated address */
+			freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+			freein-fifo-spill-num-descs = <1200>;
+			freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072
+						3072 3072 3072 3072 3072 3072 3072>;
+			port-fifo-en = <1>;
+		};
+
+		complex@0 {
+			mode = "xaui";	/* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xaui, rxaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <8 9 0 0>;	/* phy adress in exaui mode.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 512 512 512>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/* phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <150 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = smgii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <8 9 10 11>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free
+							 * in lifo is not in shared mode */
+			};
+
+		};
+
+		complex@1 {
+
+			mode = "xaui";   /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xaui, rxaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <12 13 0 0>;	/* phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 512 512 512>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/* phy adress in exaui mode. only 2 entries are used */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <150 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <12 13 14 15>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode*/
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@2 {
+			mode = "sgmii";
+			/*
+			 * sgmii only
+			 */
+			sgmii {
+				loopback = <0>;			/* loopback = 0 or 1 */
+				mgmt-port = <1>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <16>;		/* phy address for each port */
+				ext-phy-bus = <0>;		/* phy bus numbers */
+				ext-phy-sbl = <1>;		/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1>;		/* num-channels = 1 to 8 */
+				msec-port-enable  = <0>;	/* To enable change it to  <1> */
+				num-free-descs = <52>;		/* Number of free descriptors per port if free
+								 * in lifo is not in shared mode*/
+			};
+		};
+	};
+
+	poe-1 {
+		distribution-enable = <1>;
+		dist-drop-enable = <0>;			/* 16 bit mask */
+		class-map-mode = <0>;			/* 0 = All NAE
+							 * 1 = Class 7-4 reserved for CPU
+							 * 2 = Class 7-5 reserved for CPU
+							 * 3 = Class 7-6 reserved for CPU
+							 * 4 = Class 7 reserved for CPU
+							 */
+		class-drop-enable = <0>;		/* 8 bit mask */
+		drop-timer = <0>;			/* Drop timer */
+		dest-threshold = <0xa>;
+		dist-threshold = <0xa 0xa 0xa 0xa>;	/* Dist threshold group 0..3 */
+		statistics-enable = <0>;
+
+		poe-spill-address = <0 0>;		/*  <0xec00000>  */
+		poe-spill-length =  <0>;		/*  <0x1000000>  */
+		/*
+		 * MAX poe enq/deq spill memory can be 0xFFF400 bytes
+		 * it comes from (0x3FFD * 8 classes * 2 (Enq and Deq spill) * 64B)
+		 * where 0x3FFD is max enq or deq spill configuration
+		 */
+		din-spill-address = <0 0>;
+		din-spill-size = <0x00100000>;
+
+		distribution {
+			default-thread-sel = <0>;	/* Valid values: Thread Select 0..3 */
+		};
+	};
+};
+net@node-1 {
+	compatible = "XLP9XX";
+	version = <1>;
+
+	ale-0 {
+		enable = <0>;
+		cpu-threshold = <32>;
+		nae-threshold = <80>;
+		data-base {
+
+		};
+	};
+
+	nae-0 {
+		frequency = <667>;
+		ale-bypass = <1>;	 /* 0 = enable ALE, 1 = bypass ALE */
+		parser-enable = <1>;
+		freein-unique-desc-size = <0>;
+
+		/* Default Template for ucore code. Values are filled at runtime */
+		ucore {
+			src@1 {
+				num-opcodes = <0>;
+				mask = <0xffff>;
+				opcodes = <0>;
+			};
+		};
+
+		freein-fifo-config {
+			/*
+			 * 1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+			 * 2. Onnchip desc size per queue will be configured from arry below
+			 * If spill descs per queue is specified,
+			 * 1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in
+			 *    the OS config file.
+			 */
+			freein-fifo-spill-mem-range = <0x0 0x0 0x0 0x200000>; /* 2MB @ dynamically allocated address */
+			freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+			freein-fifo-spill-num-descs = <1200>;
+			freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072
+						3072 3072 3072 3072>;
+			port-fifo-en = <1>;
+		};
+
+		complex@0 {
+
+			mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xlaui, rxlaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxlaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/* phy adress in xlaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <0 1 2 3>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@1 {
+
+			mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xlaui, rxlaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxlaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <4 5 0 0>;	/* phy adress in rxlaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <4 5 6 7>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@2 {
+			mode = "sgmii";
+			/*
+			 * sgmii only
+			 */
+			sgmii {
+				loopback = <0>;			/* loopback = 0 or 1 */
+				mgmt-port = <1>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <0>;		/* phy address for each port */
+				ext-phy-bus = <0>;		/* phy bus numbers */
+				num-channels = <1>;		/* num-channels = 1 to 8 */
+				num-free-descs = <52>;		/* Number of free descriptors per port if free
+								 * in lifo is not in shared mode*/
+			};
+		};
+	};
+
+	poe-0 {
+		distribution-enable = <1>;
+		dist-drop-enable = <0>;			/* 16 bit mask */
+		class-map-mode = <0>;			/* 0 = All NAE
+							 * 1 = Class 7-4 reserved for CPU
+							 * 2 = Class 7-5 reserved for CPU
+							 * 3 = Class 7-6 reserved for CPU
+							 * 4 = Class 7 reserved for CPU
+							 */
+		class-drop-enable = <0>;		/* 8 bit mask */
+		drop-timer = <0>;			/* Drop timer */
+		dest-threshold = <0xa>;
+		dist-threshold = <0xa 0xa 0xa 0xa>;	/* Dist threshold group 0..3 */
+		statistics-enable = <0>;
+
+		poe-spill-address = <0 0>;		/*  <0xec00000>  */
+		poe-spill-length =  <0>;		/*  <0x1000000>  */
+
+		din-spill-address = <0 0>;
+		din-spill-size = <0x00100000>;
+
+		distribution {
+			default-thread-sel = <0>;	/* Valid values: Thread Select 0..3 */
+		};
+	};
+
+	nae-1 {
+		frequency = <667>;
+		ale-bypass = <1>;	 /* 0 = enable ALE, 1 = bypass ALE */
+		parser-enable = <1>;
+		freein-unique-desc-size = <0>;
+
+		/* Default Template for  ucore code. Values are filled at runtime */
+		ucore {
+			src@1 {
+				num-opcodes = <0>;
+				mask = <0xffff>;
+				opcodes = <0>;
+			};
+		};
+
+		freein-fifo-config {
+			/*
+			 * 1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+			 * 2. Onnchip desc size per queue will be configured from arry below
+			 * If spill descs per queue is specified,
+			 * 1. spill will be enabled for all the queues(except mgmt) using the spill memory specified
+			 * in the  OS config file.
+			 */
+			freein-fifo-spill-mem-range = <0x0 0x0 0x0 0x200000>; /* 1MB @ 254MB */
+			freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+			freein-fifo-spill-num-descs = <1200>;
+			freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072
+					3072 3072 3072 3072 3072 3072>;
+			port-fifo-en = <1>;
+		};
+
+		complex@0 {
+
+			mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xlaui, rxlaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxlaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <8 9 0 0>;	/* phy adress in rxlaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <8 9 10 11>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@1 {
+
+			mode = "xaui";   /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+			/*
+			 * Valid when mode = xlaui, rxlaui or xfi
+			 */
+			xgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxlaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <12 13 0 0>;	/* phy adress in rxlaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+
+			};
+
+			/*
+			 * Valid when mode = xlaui
+			 */
+			xlgmac {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				higig-mode = <0>;		/* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+				xgmii-speed = <10>;		/* 10=10G , 12=12G, 16=16G */
+				vlan-pri-en = <0x0 0x0 0x0 0x0>;/* VLAN priority enable = 0 or 1 */
+				/* rxaui specific params*/
+				submode  = <0 0 0 0>;		/* NLP10426
+								 * 0 = no nlp1042 support
+								 * 1 = xaui mode
+								 * 2 = rxaui mode1
+								 * 3 = rxaui_mode2
+								 */
+				scrambler  = <0 0 0 0>;		/* scrambler disable = 0, enable = 1 */
+				ext-phy-addr = <0 1 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				msec-port-enable  = <0>;	/* To enable change it to  <3> */
+				kr-en = <0>;
+				kr-lpbk = <0>;
+				num-free-descs = <512 150 150 150>;	/* Number of free descriptors per port if
+									 * free in lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = sgmii
+			 */
+			sgmii {
+				loopback = <0 0 0 0>;		/* loopback = 0 or 1 */
+				mgmt-port = <0 0 0 0>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <12 13 14 15>;	/* phy address for each port */
+				ext-phy-bus = <0 0 0 0>;	/* phy bus numbers */
+				ext-phy-sbl = <1 1 1 1>;	/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-channels = <1 1 1 1>;	/* num-channels = 1 to 8 */
+				msec-port-enable  = <0x0>;	/* To enable change it to  <0xf> */
+				num-free-descs = <52 52 52 52>;	/* Number of free descriptors per port if free in
+								 * lifo is not in shared mode */
+			};
+
+			/*
+			 * Valid when mode = interlaken
+			 */
+			interlaken {
+				db = "cortina";		/* select daughter board = cortina or loopback */
+				loopback = <0>;		/* loopback = 0 or 1 */
+				num-lanes = <4>;	/* Maximum number of lanes per interface=8 (from 2 complexes) */
+				lane-rate = <0>;	/* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+				num-channels = <4>;	/* num-channels = 1 to 4 */
+				num-free-descs = <300>;	/* Number of free descriptors per port if free in
+							 * lifo is not in shared mode */
+			};
+		};
+
+		complex@2 {
+			mode = "sgmii";
+			/*
+			 * sgmii only
+			 */
+			sgmii {
+				loopback = <0>;			/* loopback = 0 or 1 */
+				mgmt-port = <1>;		/* num-channels = 1 to 8 */
+				ext-phy-addr = <0>;		/* phy address for each port */
+				ext-phy-bus = <0>;		/* phy bus numbers */
+				num-channels = <1>;		/* num-channels = 1 to 8 */
+				ext-phy-sbl = <1>;		/* connected to external MDIO of nae-0 called
+								 * as sibling of nae-1 */
+				num-free-descs = <52>;		/* Number of free descriptors per port if free
+								 * in lifo is not in shared mode*/
+			};
+		};
+	};
+
+	poe-1 {
+		distribution-enable = <1>;
+		dist-drop-enable = <0>;			/* 16 bit mask */
+		class-map-mode = <0>;			/* 0 = All NAE
+							 * 1 = Class 7-4 reserved for CPU
+							 * 2 = Class 7-5 reserved for CPU
+							 * 3 = Class 7-6 reserved for CPU
+							 * 4 = Class 7 reserved for CPU
+							 */
+		class-drop-enable = <0>;		/* 8 bit mask */
+		drop-timer = <0>;			/* Drop timer */
+		dest-threshold = <0xa>;
+		dist-threshold = <0xa 0xa 0xa 0xa>;	/* Dist threshold group 0..3 */
+		statistics-enable = <0>;
+
+		poe-spill-address = <0 0>;		/*  <0xec00000>  */
+		poe-spill-length =  <0>;		/*  <0x1000000>  */
+		/*
+		 * MAX poe enq/deq spill memory can be 0xFFF400 bytes
+		 * it comes from (0x3FFD * 8 classes * 2 (Enq and Deq spill) * 64B)
+		 * where 0x3FFD is max enq or deq spill configuration
+		 */
+		din-spill-address = <0 0>;
+		din-spill-size = <0x00100000>;
+
+		distribution {
+			default-thread-sel = <0>;	/* Valid values: Thread Select 0..3 */
+		};
+	};
+};
diff --git a/arch/mips/boot/dts/xlp9xx-config.dts b/arch/mips/boot/dts/xlp9xx-config.dts
new file mode 100644
index 0000000..4a302a5
--- /dev/null
+++ b/arch/mips/boot/dts/xlp9xx-config.dts
@@ -0,0 +1,271 @@
+/*
+ * XLP-II Device Tree Source
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-GVP";
+	compatible = "netlogic,xlp";
+	#address-cells = <2>;
+	#size-cells = <2>;
+
+	hypervisor {
+		guest_use_dtre = <0>;
+	};
+
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+			#nodes = <1>;
+			#cpumask-cells=<2>;
+
+			cpu {
+				onlinemask = <0xffff>;
+				nae-rx-vc = <0>;
+				nae-fb-vc = <1>;
+				napi-vc-mask = <0xb>;
+				sae-rx-vc = <0>; /* sharing with nae */
+				sae-rx-sync-vc  = <2>; /* should be exclusive */
+				ipsec-async-vc  = <3>;
+				ipsec-sync-vc   = <2>;
+			};
+
+			nae-0 {
+				freein-fifo-mask = <0xffff 0x0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+			};
+
+	    		nae-1 {
+				freein-fifo-mask = <0xffff 0x0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 80 80 80>;
+				vfbtbl-hw-offset = <80 80 80 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+			};
+
+			dtre {
+				dtre_init_only = <0>;
+			};
+
+			owner-config {
+				nae = <0x1>;   /* currently for node0 and node1 */
+				sae = <0x1>;   /* for node0 */
+				rsa = <0x1>;
+				fmn = <0x1>;
+			};
+
+			resource-allocation {
+				net@0 {
+					port-mask = <0x4 0 0 0>;
+					frinlifo-mask = <0xffff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0xffff 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
+
+				net@1 {
+					port-mask = <0x4 0 0 0>;
+					frinlifo-mask = <0xffff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0xffff 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
+			};
+
+			fmn {
+				node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_4_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_5_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_6_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+				node_7_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb
+						0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+			};
+		};
+
+		dom@1 {
+			device_type = "domain";
+			os = "uspace";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			cpu {
+				onlinemask = <0xffff>;
+				nae-rx-vc = <2>;
+				nae-fb-vc = <2>;
+				dtre-rx-vc = <3>;
+				lzs-vc = <2>;
+				sae-rx-sync-vc = <2>;  /* sharing with nae */
+				sae-rx-vc = <2>; /* sharing with nae */
+				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae
+				   responses. Also there is no other vc as linux is using other 2 vcs */
+			};
+
+			nae-0 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				sh-domains = <0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				/* replenish info syntax */
+				freein-fifo-replenish-by-owner = <1>;
+				/* < node paddr-H32bits paddr-L32bits size-H32bits size-L32bits */
+				freein-fifo-replenish-addr-info = <0x0 0x0 0x88000000 0x0 0x10000000>; /* 256M @ 2176M*/
+				/* < node fifomask descsize headroom ndescs > */
+				freein-fifo-replenish-desc-info = <0 0x00ff 2048 0 150>;
+			};
+
+			nae-1 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				sh-domains = <0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				/* replenish info syntax */
+				freein-fifo-replenish-by-owner = <1>;
+				/* < node paddr-H32bits paddr-L32bits size-H32bits size-L32bits */
+				freein-fifo-replenish-addr-info = <0x0 0x0 0x98000000 0x0 0x10000000>; /* 256M @ 2432M*/
+				/* < node fifomask descsize headroom ndescs > */
+				freein-fifo-replenish-desc-info = <0 0x00ff 2048 0 150>;
+			};
+
+			resource-allocation {
+				net@0 {
+					port-mask = <0x3 0 0 0>;
+					frinlifo-mask = <0xff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0xffff 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
+
+				net@1 {
+					port-mask = <0x3 0 0 0>;
+					frinlifo-mask = <0xff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0xffff 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
+			};
+
+			app-param {
+				onlinemask = <0xffff>;
+				enable-nae-hw-parser = <0>;
+				enable-nae-jumbo = <0>;
+				enable-nae-p2p = <0>;
+				enable-poe = <0>;
+				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
+				launch-mode = "smp";	/* smp or amp */
+				timer-service-vc = <2>;
+			};
+
+			owner-config {
+				nae = <0x0>;
+				sae = <0x0>;
+				rsa = <0x0>;
+				fmn = <0x0>;
+			};
+		};
+
+		dom@2 {
+			device_type = "domain";
+			os = "uspace";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			cpu {
+				onlinemask = <0xffffffff 0x00000000>;
+				nae-rx-vc = <2>;
+				nae-fb-vc = <2>;
+			};
+
+			nae-0 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				/* replenish info syntax */
+				freein-fifo-replenish-by-owner = <1>;
+				/* < node paddr-H32bits paddr-L32bits size-H32bits size-L32bits */
+				freein-fifo-replenish-addr-info = <0x0 0x0 0x88000000 0x0 0x10000000>; /* 256M @ 2176M*/
+				/* < node fifomask descsize headroom ndescs > */
+				freein-fifo-replenish-desc-info = <0 0x00ff 2048 0 150>;
+			};
+
+			nae-1 {
+				freein-fifo-mask = <0xffff 0 0 0>;
+				/* node offsets and size */
+				vfbtbl-sw-offset = <0 0 0 0>;
+				vfbtbl-sw-nentries = <80 32 32 80>;
+				vfbtbl-hw-offset = <80 32 32 80>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
+				/* replenish info syntax */
+				freein-fifo-replenish-by-owner = <1>;
+				/* < node paddr-H32bits paddr-L32bits size-H32bits size-L32bits */
+				freein-fifo-replenish-addr-info = <0x0 0x0 0x98000000 0x0 0x10000000>; /* 256M @ 2432M*/
+				/* < node fifomask descsize headroom ndescs > */
+				freein-fifo-replenish-desc-info = <0 0x00ff 2048 0 150>;
+			};
+
+			owner-config {
+				nae = <0x0>;	/* currently for node 0 */
+				sae = <0x0>;
+				rsa = <0x0>;
+				fmn = <0x0>;
+			};
+		};
+	};
+
+	kernel-params {
+	};
+
+	soc {
+		/include/ "generic-soc-fmn-ver1.dtsi"
+		/include/ "generic-soc-net-ver1.dtsi"
+	};
+
+	frequency-config {
+		nae = <500>;
+		sae = <500>;
+		rsa = <500>;
+		dtre = <250>;
+		cde = <250>;
+	};
+};
diff --git a/arch/mips/boot/dts/xlp9xx-guest.dts b/arch/mips/boot/dts/xlp9xx-guest.dts
new file mode 100644
index 0000000..02bf9f2
--- /dev/null
+++ b/arch/mips/boot/dts/xlp9xx-guest.dts
@@ -0,0 +1,121 @@
+/*
+ * Device Tree Source
+ * For XLPII Guest
+ */
+
+/dts-v1/;
+/ {
+	model = "netlogic,XLP-GVP";
+	compatible = "netlogic,xlp";
+	#address-cells = <0x2>;
+	#size-cells = <0x2>;
+
+	memory {
+		device_type = "memory";
+		reg = <0x0 0x100000 0x0 0xff00000 0x0 0x20000000 0x0 0xa0000000>;
+	};
+
+	pktmem {
+		device_type = "pktmem";
+		reg = <0x0 0x0 0x30000000 0x0 0x3000000
+			0x1 0x0 0x0 0x0 0x0
+			0x2 0x0 0x0 0x0 0x0
+			0x3 0x0 0x0 0x0 0x0>;
+	};
+
+	doms {
+		#address-cells = <0x1>;
+		#size-cells = <0x1>;
+
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			resource-allocation {
+				net@0 {
+					port-mask = <0x4 0x0 0x0 0x0>;
+					frinlifo-mask = <0xffff 0x0 0x0 0x0>;
+					frinlifo-shared-mode = <0x0 0x0 0x0 0x0>;
+					vfbid-sw-offset = <0x0 0x0 0x0 0x0>;
+					vfbid-sw-entries = <0x0 0x0 0x0 0x0>;
+					ucore-mask = <0x1 0x0 0x0 0x0>;
+					sram-off = <0x0 0x0 0x0 0x0>;
+				};
+			};
+
+			dtre {
+				dtre_init_only = <0x0>;
+			};
+		};
+
+		dom@1 {
+			device_type = "domain";
+			os = "linux";
+
+			cpu {
+				onlinemask = <0xffff>;
+				nae-rx-vc = <0x2>;
+				dtre-rx-vc = <0x2>;
+			};
+
+			app-param {
+				onlinemask = <0xffff>;
+			};
+
+			resource-allocation {
+				net@0 {
+					port-mask = <0x3 0x0 0x0 0x0>;
+					frinlifo-mask = <0xff 0x0 0x0 0x0>;
+					frinlifo-shared-mode = <0x0 0x0 0x0 0x0>;
+					vfbid-sw-offset = <0x0 0x0 0x0 0x0>;
+					vfbid-sw-entries = <0x0 0x0 0x0 0x0>;
+					ucore-mask = <0x2 0x0 0x0 0x0>;
+					sram-off = <0x0 0x0 0x0 0x0>;
+				};
+			};
+		};
+	};
+
+	soc {
+		#address-cells = <0x2>;
+		#size-cells = <0x1>;
+		compatible = "simple-bus";
+		ranges = <0x0 0x0 0x0 0x18000000 0x4000000 0x1 0x0 0x0 0x16000000 0x2000000>;
+
+		serial@30000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0x0 0x112100 0x20>;
+			reg-shift = <0x2>;
+			reg-io-width = <0x4>;
+			clock-frequency = <0x7735940>;
+			interrupt-parent = <0x1>;
+			interrupts = <0x11>;
+		};
+
+		serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0x0 0x112120 0x20>;
+			reg-shift = <0x2>;
+			reg-io-width = <0x4>;
+			clock-frequency = <0x7735940>;
+			interrupt-parent = <0x1>;
+			interrupts = <0x12>;
+		};
+
+		pic@11000 {
+			interrupt-controller;
+			#address-cells = <0x0>;
+			#interrupt-cells = <0x1>;
+			reg = <0x0 0x110000 0x200>;
+			linux,phandle = <0x1>;
+			phandle = <0x1>;
+		};
+	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xffff>;
+	};
+};
diff --git a/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
index 0f331c6..d2e4e5a 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
@@ -238,6 +238,6 @@
 		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
 		netlogic,cpumask = <0xffffffff 0xffffffff>;
 		netlogic,reserve-mem = <256>;
-		netlogic,frfifo-mem = <128>;
+		netlogic,frfifo-mem = <256>;
 	};
 };
-- 
1.7.1

