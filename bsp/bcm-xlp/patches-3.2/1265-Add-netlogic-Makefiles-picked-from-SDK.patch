From 2894f9a75048990157d456824e788d2eb5293bfb Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Thu, 12 Feb 2015 14:25:09 +0800
Subject: Add netlogic Makefiles picked from SDK

These Makefiles are picked from the path "buildroot/output/build/linux-userspace/kmod"
in the SDK 3.2.

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/misc/Kconfig b/drivers/misc/Kconfig
index 0b3a72e..1bc925f 100644
--- a/drivers/misc/Kconfig
+++ b/drivers/misc/Kconfig
@@ -574,4 +574,5 @@ source "drivers/misc/carma/Kconfig"
 source "drivers/misc/altera-stapl/Kconfig"
 source "drivers/misc/mei/Kconfig"
 source "drivers/misc/vmw_vmci/Kconfig"
+source "drivers/misc/netlogic/Kconfig"
 endmenu
diff --git a/drivers/misc/Makefile b/drivers/misc/Makefile
index 6bb08da..c7388a7 100644
--- a/drivers/misc/Makefile
+++ b/drivers/misc/Makefile
@@ -54,3 +54,4 @@ obj-$(CONFIG_VMWARE_VMCI)	+= vmw_vmci/
 obj-$(CONFIG_LATTICE_ECP3_CONFIG)	+= lattice-ecp3-config.o
 obj-$(CONFIG_SRAM)		+= sram.o
 obj-$(CONFIG_HWLAT_DETECTOR)	+= hwlat_detector.o
+obj-$(CONFIG_NLM_XLP_BOARD)     += netlogic/
diff --git a/drivers/misc/netlogic/Kconfig b/drivers/misc/netlogic/Kconfig
new file mode 100644
index 0000000..aa3913b
--- /dev/null
+++ b/drivers/misc/netlogic/Kconfig
@@ -0,0 +1,68 @@
+#
+# Netlogic specific driver configuration
+#
+menu "Netlogic specific driver"
+
+config XLP_CDE
+	tristate "broadcom xlp CDE driver"
+	depends on NLM_XLP_BOARD
+	default y
+	help
+	  This driver supports broadcom's compression/decompression Engine.
+	  For more information on xlp CDE driver, please visit
+
+	  <http://support.broadcom.com>
+
+	  To compile this driver as a module, choose M here.
+
+config XLP_NETL7
+	tristate "Broadcom xlp netl7 driver"
+	depends on NLM_XLP_BOARD
+	default m
+	help
+	  This driver supports Broadcom regex driver.
+	  It is only valid on XLP3XX and XLP2XX.
+	  The module will be called netl7driver.
+	  For more information on xlp netl7 driver, please visit
+
+	  <http://support.broadcom.com>
+
+	  To compile this driver as a module, choose M here.
+
+config XLP_CMEM
+	tristate "XLP cmem driver"
+	depends on NLM_XLP_BOARD
+	default y
+	help
+	  This driver supports cmem.
+
+config XLP_FMN_DP
+	tristate "XLP FMN Data Path Driver"
+	depends on NLM_XLP_BOARD
+	default y
+	help
+	  This driver supports fmn data path.
+
+config XLP_PPM
+	tristate "Broadcom Packet Pool Manager"
+	depends on NLM_XLP_BOARD
+	default m
+	help
+	  This driver supports Manage Packet Pool.
+
+config XLP_NMIPROF
+	tristate "XLP NMIProf support"
+	depends on NLM_XLP_BOARD
+	default m
+	help
+	  NMIProf is a simple and accurate profiler for XLP cpus.
+
+	  NMIProf uses NMI interrupts generated by the XLP PIC to get accurate profiling
+	  information of a CPU.
+
+config NLM_XLP_CRYPTO
+	tristate "NLM XLP Crypto"
+	depends on NLM_XLP_BOARD
+	default n
+
+endmenu
diff --git a/drivers/misc/netlogic/Makefile b/drivers/misc/netlogic/Makefile
new file mode 100644
index 0000000..f1dcb15
--- /dev/null
+++ b/drivers/misc/netlogic/Makefile
@@ -0,0 +1,10 @@
+obj-$(CONFIG_NLM_XLP_BOARD)	+= fdtconf/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= soc_interface/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= nlmcrypto/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= nmiprof/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= pkt_pool_mem/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= fmn_dp/
+obj-$(CONFIG_NLM_XLP_BOARD)	+= cmem/
+obj-$(CONFIG_XLP_CDE)		+= nlm_cde/
+obj-$(CONFIG_XLP_NETL7)		+= netl7driver/
+obj-$(CONFIG_NLM_ADMA)		+= dtre/
diff --git a/drivers/misc/netlogic/cmem/Makefile b/drivers/misc/netlogic/cmem/Makefile
new file mode 100644
index 0000000..9216ca9
--- /dev/null
+++ b/drivers/misc/netlogic/cmem/Makefile
@@ -0,0 +1,10 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt/contrib
+ccflags-y += -Iarch/mips/netlogic/lib/netlib/include
+ccflags-y += -Iarch/mips/netlogic/lib/seclib
+
+obj-$(CONFIG_XLP_CMEM) 	+= nlm_cmem.o
+nlm_cmem-objs := cmem.o
diff --git a/drivers/misc/netlogic/dtre/Makefile b/drivers/misc/netlogic/dtre/Makefile
new file mode 100644
index 0000000..8cc4635
--- /dev/null
+++ b/drivers/misc/netlogic/dtre/Makefile
@@ -0,0 +1,8 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+
+obj-$(CONFIG_NLM_ADMA) 	+= dtre.o
+
+dtre-objs += nlm_adma.o
diff --git a/drivers/misc/netlogic/fdtconf/Makefile b/drivers/misc/netlogic/fdtconf/Makefile
new file mode 100644
index 0000000..3ae79db
--- /dev/null
+++ b/drivers/misc/netlogic/fdtconf/Makefile
@@ -0,0 +1,7 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+
+obj-$(CONFIG_NLM_XLP_BOARD) += fdt_conf.o
+fdt_conf-objs += fdtconf.o
diff --git a/drivers/misc/netlogic/fmn_dp/Makefile b/drivers/misc/netlogic/fmn_dp/Makefile
new file mode 100644
index 0000000..af8ad6a
--- /dev/null
+++ b/drivers/misc/netlogic/fmn_dp/Makefile
@@ -0,0 +1,6 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+
+obj-$(CONFIG_XLP_FMN_DP) 	+= fmn_dp.o
+
+fmn_dp-objs += fmn_main.o
diff --git a/drivers/misc/netlogic/netl7driver/Makefile b/drivers/misc/netlogic/netl7driver/Makefile
new file mode 100644
index 0000000..dcd8ca5
--- /dev/null
+++ b/drivers/misc/netlogic/netl7driver/Makefile
@@ -0,0 +1,8 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL -Wno-maybe-uninitialized
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt/contrib
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+
+obj-$(CONFIG_NLM_XLP_BOARD) 	+= netl7driver.o
+nae-objs 	:= xlp_nae.o init_nae.o xlp_hw.o
diff --git a/drivers/misc/netlogic/nlm_cde/Makefile b/drivers/misc/netlogic/nlm_cde/Makefile
new file mode 100644
index 0000000..fe2f514
--- /dev/null
+++ b/drivers/misc/netlogic/nlm_cde/Makefile
@@ -0,0 +1,6 @@
+ccflags-y += -DNLM_HAL_LINUX_KERNEL -Wno-undef
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Idrivers/netlogic/sae
+
+obj-$(CONFIG_XLP_CDE)	+= nlm_cde.o
diff --git a/drivers/misc/netlogic/nlmcrypto/Makefile b/drivers/misc/netlogic/nlmcrypto/Makefile
new file mode 100644
index 0000000..a7194de
--- /dev/null
+++ b/drivers/misc/netlogic/nlmcrypto/Makefile
@@ -0,0 +1,11 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL -DNLM_CRYPTO_EXCL_IFC -Wno-implicit-function-declaration
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt/contrib
+ccflags-y += -Iarch/mips/netlogic/lib/netlib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/seclib
+ccflags-y += -Idrivers/netlogic/nlmcrypto
+
+obj-$(CONFIG_NLM_XLP_BOARD) 	+= nlmcrypto.o
+nlmcrypto-objs 	:= cryptodrv.o init.o
diff --git a/drivers/misc/netlogic/nmiprof/Makefile b/drivers/misc/netlogic/nmiprof/Makefile
new file mode 100644
index 0000000..56bb175
--- /dev/null
+++ b/drivers/misc/netlogic/nmiprof/Makefile
@@ -0,0 +1,5 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+
+obj-$(CONFIG_XLP_NMIPROF) 	+= nmiprof.o
+
+nmiprof-y := nmiprof_asm.o nmiprof-sys.o
diff --git a/drivers/misc/netlogic/pkt_pool_mem/Makefile b/drivers/misc/netlogic/pkt_pool_mem/Makefile
new file mode 100644
index 0000000..1852ae1
--- /dev/null
+++ b/drivers/misc/netlogic/pkt_pool_mem/Makefile
@@ -0,0 +1,5 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+
+obj-$(CONFIG_XLP_PPM) 	+= pktmem.o
+pktmem-objs	:= pkt_pool_mem.o
diff --git a/drivers/misc/netlogic/soc_interface/Makefile b/drivers/misc/netlogic/soc_interface/Makefile
new file mode 100644
index 0000000..317088a
--- /dev/null
+++ b/drivers/misc/netlogic/soc_interface/Makefile
@@ -0,0 +1,7 @@
+ccflags-y := -DCONFIG_XLP_FMN_SUPPORT -DNLM_HAL_LINUX_KERNEL
+ccflags-y += -Iarch/mips/netlogic/lib/syslib/include
+ccflags-y += -Iarch/mips/netlogic/lib/fmnlib
+ccflags-y += -Iarch/mips/netlogic/lib/fdt/libfdt
+
+obj-$(CONFIG_NLM_XLP_BOARD) += soc_interface.o
+soc_interface-objs += on_chip.o cpu_proc.o libfdt-wrapper.o
-- 
1.7.1

