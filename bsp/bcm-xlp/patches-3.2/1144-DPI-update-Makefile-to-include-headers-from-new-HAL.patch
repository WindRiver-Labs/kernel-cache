From d5b72554c4a173b39df0b23cf77f7d6c617fdc12 Mon Sep 17 00:00:00 2001
From: Lakshman Garlapati <kumarga@broadcom.com>
Date: Wed, 15 May 2013 12:45:06 +0530
Subject: DPI: update Makefile to include headers from new HAL

Modified Makefile to support new HAL and modified netl7driver to support on kernel 3.7
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/misc/netlogic/netl7driver/netl7driver.c b/drivers/misc/netlogic/netl7driver/netl7driver.c
index cc471f6..a798d9f 100755
--- a/drivers/misc/netlogic/netl7driver/netl7driver.c
+++ b/drivers/misc/netlogic/netl7driver/netl7driver.c
@@ -41,6 +41,7 @@
 #include <linux/pid.h>
 #include <linux/sort.h>
 #include <linux/compat.h>
+#include <linux/module.h>
 
 #include <asm/uaccess.h>
 
@@ -583,7 +584,7 @@ nlm_device_mmap (struct file *file_p, struct vm_area_struct *vm_p)
   
   /*NLM_INFO (":mmap The file reference count is %ld\n", file_p->f_count.counter);*/
 
-  vm_p->vm_flags |= VM_RESERVED;
+  vm_p->vm_flags |= VM_DONTEXPAND | VM_DONTDUMP;
   vm_p->vm_flags |= VM_IO;
   cacheable = 1;
   
-- 
1.7.1

