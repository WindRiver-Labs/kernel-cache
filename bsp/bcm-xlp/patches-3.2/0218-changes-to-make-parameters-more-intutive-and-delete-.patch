From 3b1fdddc0106c99a3a2bcc0d9233602fc98810cf Mon Sep 17 00:00:00 2001
From: Prasad Boddupalli <pboddupalli@netlogicmicro.com>
Date: Thu, 16 Dec 2010 18:06:35 -0800
Subject: changes to make parameters more intutive and delete unused parameter

'is_dom0_hvm' variable is set to '1' in Xen to mark domains for which
memory is not allocated by Xen. So the new renamed parameter reflects
the same

parameter 'cpu_possible_map' is currently nor parsed in Xen. Hence
deleted

the dom0 load address of 0xf8000000 is causing problems. So, changed
the default to a working value
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/helinux.dts b/arch/mips/boot/dts/helinux.dts
index d92cb36..e9fbb89 100644
--- a/arch/mips/boot/dts/helinux.dts
+++ b/arch/mips/boot/dts/helinux.dts
@@ -12,9 +12,8 @@
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		cpu_possible_map = <0xff>;
-		is_dom0_hvm = <1>;
-		bootargs = "ncores=8 dom0_loadaddr=0xe0800000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
+		alloc_dom0_memory = <0>;
+		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
 	doms {
diff --git a/arch/mips/boot/dts/linux.dts b/arch/mips/boot/dts/linux.dts
index 9c06ba3..9ee37ef 100644
--- a/arch/mips/boot/dts/linux.dts
+++ b/arch/mips/boot/dts/linux.dts
@@ -12,9 +12,8 @@
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		cpu_possible_map = <0xff>;
-		is_dom0_hvm = <1>;
-		bootargs = "ncores=2 dom0_loadaddr=0xe0800000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
+		alloc_dom0_memory = <0>;
+		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
 	doms {
diff --git a/arch/mips/boot/dts/multi-os.dts b/arch/mips/boot/dts/multi-os.dts
index 6468ad6..16a8035 100644
--- a/arch/mips/boot/dts/multi-os.dts
+++ b/arch/mips/boot/dts/multi-os.dts
@@ -12,9 +12,8 @@
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		cpu_possible_map = <0xff>;
-		is_dom0_hvm = <1>;
-		bootargs = "ncores=8 dom0_loadaddr=0xf8000000 dom0_size=0x1c000000 dom0_cpumask=0x0f -- ";
+		alloc_dom0_memory = <0>;
+		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0x0f -- ";
 		domain_heap = <0x30000000 0x20000000>; /* 0.75 GB -> 1.25 GB */
 	};
 	doms {
diff --git a/arch/mips/boot/dts/netos.dts b/arch/mips/boot/dts/netos.dts
index 2fac23b..bd39dd6 100644
--- a/arch/mips/boot/dts/netos.dts
+++ b/arch/mips/boot/dts/netos.dts
@@ -12,8 +12,7 @@
 
 	hypervisor {
 		hypervisor-name = "Xen";
-		cpu_possible_map = <0xff>;
-		is_dom0_hvm = <0>;
+		alloc_dom0_memory = <1>;
 		bootargs = "dom0_loadaddr=0x72000000 dom0_cpumask=0x0f -- ";
 		domain_heap = <0x50000000 0x20000000>;
 	};
-- 
1.7.1

