From a0c802dbe2e23f35ec97badadedbb8a1f79d28cc Mon Sep 17 00:00:00 2001
From: ShengLiang Song <shengliang.song@broadcom.com>
Date: Sat, 18 Aug 2012 16:22:04 -0700
Subject: xlp2xx: check is_nlm_xlp2xx

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/drivers/net/ethernet/broadcom/nae/xlp_nae.c b/drivers/net/ethernet/broadcom/nae/xlp_nae.c
index ca83cc1..3a9cbce 100755
--- a/drivers/net/ethernet/broadcom/nae/xlp_nae.c
+++ b/drivers/net/ethernet/broadcom/nae/xlp_nae.c
@@ -1258,7 +1258,7 @@ static void nlm_xlp_nae_init(void)
 
 			priv->cycles.mask = CLOCKSOURCE_MASK(64);
 			
-			if(is_nlm_xlp3xx())
+			if(is_nlm_xlp3xx() || is_nlm_xlp2xx())
 				priv->cycles.mult = 1000/XLP3XX_MAX_NAE_FREQUENCY; /*freq are in Mhz*/
 			else
 				priv->cycles.mult = 0x2; /*500 Mhz*/
-- 
1.7.1

