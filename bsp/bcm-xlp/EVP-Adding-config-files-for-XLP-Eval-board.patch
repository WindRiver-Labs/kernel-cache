From b34a8926e918dd7aebbed1177d532742d4fd428b Mon Sep 17 00:00:00 2001
From: Jayanthi Annadurai <jayanthia@netlogicmicro.com>
Date: Sun, 20 Mar 2011 12:58:06 -0700
Subject: [PATCH 242/761] EVP: Adding config files for XLP Eval board

Based on Broadcom SDK 2.3.

Signed-off-by: Jayanthi Annadurai <jayanthia@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/Kconfig  |   30 +++++++++++++++++++++++++++++-
 arch/mips/Makefile |    2 ++
 2 files changed, 31 insertions(+), 1 deletion(-)

diff --git a/arch/mips/Kconfig b/arch/mips/Kconfig
index b223f5f..38b75c9 100644
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@ -784,6 +784,34 @@ config NLM_XLP_SIM
 	  This board is based on Netlogic XLP Processor.
 	  Say Y here to support this machine type
 
+config NLM_XLP_EVP_BOARD
+        bool "Support for Netlogic XLP EVP board"
+        depends on EXPERIMENTAL
+        select SMP
+        select BOOT_ELF32
+        select NLM_COMMON
+        select NLM_XLP
+        select SYS_HAS_CPU_XLP
+        select SYS_SUPPORTS_SMP
+        select HW_HAS_PCI
+        select SWAP_IO_SPACE
+        select SYS_SUPPORTS_32BIT_KERNEL
+        select SYS_SUPPORTS_64BIT_KERNEL
+        select 64BIT_PHYS_ADDR
+        select SYS_SUPPORTS_BIG_ENDIAN
+        select SYS_SUPPORTS_LITTLE_ENDIAN
+        select SYS_SUPPORTS_HIGHMEM
+        select DMA_COHERENT
+        select CEVT_R4K
+        select CSRC_R4K
+        select IRQ_CPU
+        select ZONE_DMA if 64BIT
+        select SYNC_R4K
+        select SYS_HAS_EARLY_PRINTK
+        help
+          This board is based on Netlogic XLP Processor.
+          Say Y here to support this machine type
+
 config CAVIUM_OCTEON_REFERENCE_BOARD
 	bool "Cavium Networks Octeon reference board"
 	select CEVT_R4K
@@ -952,7 +980,7 @@ config SCHED_OMIT_FRAME_POINTER
 
 config GENERIC_HARDIRQS_NO__DO_IRQ
 # XLP_MERGE_TODO
-	default  n if NLM_XLP_SIM
+	default  n if NLM_XLP_SIM || NLM_XLP_EVP_BOARD || NLM_XLP_BOARD
 	def_bool y
 
 #
diff --git a/arch/mips/Makefile b/arch/mips/Makefile
index ccb61c1..6efe39c 100644
--- a/arch/mips/Makefile
+++ b/arch/mips/Makefile
@@ -212,6 +212,8 @@ include $(srctree)/arch/mips/Kbuild.platforms
 core-$(CONFIG_NLM_XLP) 		+= arch/mips/netlogic/boot/
 cflags-$(CONFIG_NLM_XLP)	+= -DXLP -I$(srctree)/arch/mips/include/asm/netlogic/hal
 cflags-$(CONFIG_NLM_XLP)	+= -I$(srctree)/arch/mips/netlogic/boot
+load-$(CONFIG_NLM_XLP_EVP_BOARD) += $(CONFIG_NLM_COMMON_LOAD_ADDRESS)
+load-$(CONFIG_NLM_XLP_BOARD) += $(CONFIG_NLM_COMMON_LOAD_ADDRESS)
 
 cflags-y			+= -I$(srctree)/arch/mips/include/asm/mach-generic
 drivers-$(CONFIG_PCI)		+= arch/mips/pci/
-- 
1.7.10.4

