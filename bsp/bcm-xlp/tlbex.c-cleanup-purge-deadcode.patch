From 2e21621d0aa946f22d870d028bd423ef6310574f Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Thu, 3 Nov 2011 17:20:10 -0700
Subject: [PATCH 470/761] tlbex.c cleanup: purge deadcode

commit 8ae4a7b076b2e55ed27e76968f1f24f77f3e95d4
Author: Mehul <vmehul@netlogicmicro.com>
Date:   Wed Oct 6 11:27:36 2010 +0530

    Added RIXI support.

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/mm/tlbex.c |    9 ---------
 1 file changed, 9 deletions(-)

diff --git a/arch/mips/mm/tlbex.c b/arch/mips/mm/tlbex.c
index 076ed1b..4171c1b 100644
--- a/arch/mips/mm/tlbex.c
+++ b/arch/mips/mm/tlbex.c
@@ -2014,15 +2014,6 @@ static void __cpuinit build_r4000_tlb_load_handler(void)
 			uasm_il_beqz(&p, &r, wr.r3, label_tlbl_goaround1);
 		}
 		uasm_i_nop(&p);
-#ifdef CONFIG_NLM_XLP
-		/*
-		 *if tlb probe has failed, skip to label_tlbl_goaround assuming
-		 *exception is due to valid bit not being set in entrylo.
-		 */
-		uasm_i_mfc0(&p, K0, C0_INDEX);
-		uasm_il_bltz(&p, &r, K0, label_tlbl_goaround1);
-		uasm_i_nop(&p);
-#endif
 
 		uasm_i_tlbr(&p);
 		/* Examine  entrylo 0 or 1 based on ptr. */
-- 
1.7.10.4

