From de8f06bf912735b1f3c6f48bc3f07abec3656da8 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 24 Jan 2014 02:36:50 +0000
Subject: [PATCH] mips:bring back __virt_addr_valid()

Bring back __virt_addr_valid() in arch/mips/mm/mmap.c,
which deleted by commit 21c6ad (import of RMI XLP svn branch).

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/mips/mm/mmap.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/mips/mm/mmap.c b/arch/mips/mm/mmap.c
index 302d779..4786c12 100644
--- a/arch/mips/mm/mmap.c
+++ b/arch/mips/mm/mmap.c
@@ -269,3 +269,9 @@ unsigned long arch_randomize_brk(struct mm_struct *mm)
 
 	return ret;
 }
+
+int __virt_addr_valid(const volatile void *kaddr)
+{
+	return pfn_valid(PFN_DOWN(virt_to_phys(kaddr)));
+}
+EXPORT_SYMBOL_GPL(__virt_addr_valid);
-- 
1.8.3.4

