From fe9fe5db541ddd7089cd712810e30fed2d6bc916 Mon Sep 17 00:00:00 2001
From: Lakshman Garlapati <kumarga@broadcom.com>
Date: Tue, 9 Jul 2013 04:42:10 -0700
Subject: [PATCH 2/3] bcm-xlp: NETL7: add XLP9XX PCI device ID

Broadcom XLP storm series contains XLP2XX/XLP3XX/XLP9XX, the newest
XLP9XX's PCI device ID is different with XLP2XX/XLP3XX, so add new
field for XLP9XX.

Based on Broadcom SDK 2.3.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/misc/netl7driver/netl7driver.c | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

diff --git a/drivers/misc/netl7driver/netl7driver.c b/drivers/misc/netl7driver/netl7driver.c
index 72af434..994292f 100644
--- a/drivers/misc/netl7driver/netl7driver.c
+++ b/drivers/misc/netl7driver/netl7driver.c
@@ -70,8 +70,10 @@ module_param(verbose, int, S_IRUGO);
 	do { if (verbose) pr_info(DRV_NAME " "f, ##args); } while (0)
 
 #define NLM_PCI_VENDOR_ID (0x184e)
+#define NLM_XLP9XX_PCI_VENDOR_ID (0x14e4)
 #define NLM_PCI_DEV_ID (0x8)
-#define NLM_STORM_PCI_DEV_ID (0x1019)
+#define NLM_XLP3XX_PCI_DEV_ID (0x1019)
+#define NLM_XLP9XX_PCI_DEV_ID (0x9019)
 
 #define BUF_SIZE 64
 
@@ -176,7 +178,8 @@ nlm_pci_probe(struct pci_dev *nlm_dev, const struct pci_device_id *nlm_id)
 	break;
 	case NLM_PCI_DEV_ID + 4:
 	case NLM_PCI_DEV_ID + 5:
-	case NLM_STORM_PCI_DEV_ID:
+	case NLM_XLP3XX_PCI_DEV_ID:
+	case NLM_XLP9XX_PCI_DEV_ID:
 	type = NLM_DEVICE_MARS3;
 	break;
 	default:
@@ -246,7 +249,8 @@ static const DEFINE_PCI_DEVICE_TABLE(netl7_pci_ids) = {
 	{PCI_DEVICE(NLM_PCI_VENDOR_ID, NLM_PCI_DEV_ID + 3)},
 	{PCI_DEVICE(NLM_PCI_VENDOR_ID, NLM_PCI_DEV_ID + 4)},
 	{PCI_DEVICE(NLM_PCI_VENDOR_ID, NLM_PCI_DEV_ID + 5)},
-	{PCI_DEVICE(NLM_PCI_VENDOR_ID, NLM_STORM_PCI_DEV_ID)},
+	{PCI_DEVICE(NLM_PCI_VENDOR_ID, NLM_XLP3XX_PCI_DEV_ID)},
+	{PCI_DEVICE(NLM_XLP9XX_PCI_VENDOR_ID, NLM_XLP9XX_PCI_DEV_ID)},
 	{0,},
 };
 
-- 
1.8.4.93.g57e4c17

