From af699efa61728e0c3a81f32cb25d69ea5e6255c4 Mon Sep 17 00:00:00 2001
From: Prasad Boddupalli <pboddupalli@netlogicmicro.com>
Date: Tue, 29 Jun 2010 12:17:13 -0700
Subject: [PATCH 032/565] remove wakeup_secondary_cpus()

Remove wakeup_secondary_cpus() signature used with older bootloader.

Based on Broadcom SDK 2.3.

Signed-off-by: Prasad Boddupalli <pboddupalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/netlogic/bootinfo.h | 5 -----
 arch/mips/netlogic/xlp/setup.c            | 7 ++++++-
 arch/mips/netlogic/xlp/xenbootinfo.c      | 8 --------
 3 files changed, 6 insertions(+), 14 deletions(-)

diff --git a/arch/mips/include/asm/netlogic/bootinfo.h b/arch/mips/include/asm/netlogic/bootinfo.h
index 8d644cf..555476f 100644
--- a/arch/mips/include/asm/netlogic/bootinfo.h
+++ b/arch/mips/include/asm/netlogic/bootinfo.h
@@ -14,11 +14,6 @@ extern int read_prominfo(void);
 extern int read_dram_info(void);
 extern int read_physaddr_map(void);
 
-#ifdef CONFIG_FDT
 extern int wakeup_secondary_cpus(void);
-#else
-extern int wakeup_secondary_cpus(void (*wakeup)(void *, void *, __u32), 
-		struct psb_info *prom_info);
-#endif
 
 #endif
diff --git a/arch/mips/netlogic/xlp/setup.c b/arch/mips/netlogic/xlp/setup.c
index 83483a2e8..89e6c8e4 100644
--- a/arch/mips/netlogic/xlp/setup.c
+++ b/arch/mips/netlogic/xlp/setup.c
@@ -426,6 +426,7 @@ struct nlm_common_name_value_struct {
 	uint32_t *val;
 };
 
+#ifndef CONFIG_XEN
 static void prom_add_memory(uint64_t start, uint64_t size)
 {
 	__u64 pref_backup = 512;
@@ -435,7 +436,7 @@ static void prom_add_memory(uint64_t start, uint64_t size)
 			BOOT_MEM_RAM);
 	return;
 }
-
+#endif
 
 extern void (*board_nmi_handler_setup)(void );
 
@@ -490,6 +491,7 @@ static void nlm_early_serial_setup(void) {}
 
 extern struct plat_smp_ops nlm_smp_ops;
 
+#ifndef CONFIG_XEN
 static int fdt_process(void) 
 {
 	int  domain=0;
@@ -589,6 +591,9 @@ static int fdt_process(void)
 
 	return 0;
 }
+#else
+extern int fdt_process(void);
+#endif
 
 void __init prom_init(void)
 {
diff --git a/arch/mips/netlogic/xlp/xenbootinfo.c b/arch/mips/netlogic/xlp/xenbootinfo.c
index 1b532dd..c1022b4 100644
--- a/arch/mips/netlogic/xlp/xenbootinfo.c
+++ b/arch/mips/netlogic/xlp/xenbootinfo.c
@@ -41,15 +41,7 @@ int fdt_process(void)
 	return 0;
 }
 
-#ifdef CONFIG_FDT
 int wakeup_secondary_cpus(void)
 {
 	return 0;
 }
-#else
-int wakeup_secondary_cpus(void (*wakeup)(void *, void *, __u32), struct psb_info *prom_info)
-{
-	return 0;
-}
-#endif
-
-- 
1.8.4.93.g57e4c17

