From 32febbb2252ddc020d1387e0115af724c77da0dc Mon Sep 17 00:00:00 2001
From: Jayanthi A <jayanthi.annadurai@broadcom.com>
Date: Thu, 19 Jul 2012 14:04:27 +0530
Subject: [PATCH 359/565] Enable VC interrupt based on phys_cpu_present_map

XLP base port: Enabling VC interrupt based on phys_cpu_present_map

Based on Broadcom SDK 2.3.

Signed-off-by: Jayanthi A <jayanthi.annadurai@broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/on_chip.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/netlogic/xlp/on_chip.c b/arch/mips/netlogic/xlp/on_chip.c
index a681a60..4f374dc 100644
--- a/arch/mips/netlogic/xlp/on_chip.c
+++ b/arch/mips/netlogic/xlp/on_chip.c
@@ -269,7 +269,7 @@ int nlm_xlp_register_vc_handler(int vc, void (*handler)(int vc))
 	xlp_vc_handlers[vc] = handler;
 
 	for(i=0; i<NR_CPUS; i++){
-		if(!cpu_isset(i, cpu_present_map))
+		if(!cpu_isset(i, phys_cpu_present_map))
 			continue;
 		node = i / 32;
 		nlm_hal_enable_vc_intr(node, (i*NLM_MAX_VC_PER_THREAD + vc) & 0x7f);
@@ -535,7 +535,7 @@ void nlm_enable_vc_intr(void)
 	int i = 0;
 
 	for(cpu=0; cpu<NR_CPUS; cpu++){
-                if(!cpu_isset(cpu, cpu_present_map))
+                if(!cpu_isset(cpu, phys_cpu_present_map))
                         continue;
 		node = cpu / 32;
 		for(i=0; i<NLM_MAX_VC_PER_THREAD; i++)
-- 
1.8.4.93.g57e4c17

