From eb750c716a456a06af3e7dc39c74f39b12edb29b Mon Sep 17 00:00:00 2001
From: Om Narasimhan <onarasimhan@netlogicmicro.com>
Date: Wed, 21 Sep 2011 10:26:05 -0700
Subject: [PATCH 260/565] Fix for USB controller changing endianness with CPU.

This can be checked by doing a __raw_read() on the start of pci memspace, which
has USB capabilities. Offset zero reads the same value in both big and little
endian mode. If the controller kept an endianness (little according to spec),
 __raw_read() value should have been different.

Based on Broadcom SDK 2.3.

Signed-off-by: Om Narasimhan <onarasimhan@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/usb/host/ehci-pci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/usb/host/ehci-pci.c b/drivers/usb/host/ehci-pci.c
index 69fdb45..2b2eb91 100644
--- a/drivers/usb/host/ehci-pci.c
+++ b/drivers/usb/host/ehci-pci.c
@@ -128,7 +128,7 @@ static int ehci_pci_setup(struct usb_hcd *hcd)
 	switch (pdev->vendor) {
 	case PCI_VENDOR_ID_NETLOGIC:
 		if (pdev->device == 0x1007) {
-#ifdef CONFIG_USB_EHCI_BIG_ENDIAN_MMIO
+#if defined CONFIG_USB_EHCI_BIG_ENDIAN_MMIO
 			ehci->big_endian_mmio = 1;
 #else
 			ehci->big_endian_mmio = 0;
-- 
1.8.4.93.g57e4c17

