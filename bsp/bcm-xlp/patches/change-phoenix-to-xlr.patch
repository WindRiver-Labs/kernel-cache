From 0b9675a2cbda550800debdb95321e6f0a9caaeeb Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Wed, 12 May 2010 17:17:46 -0700
Subject: [PATCH 009/565] change phoenix to xlr

change phoenix to xlr.

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/mm/c-phoenix.c     | 2 +-
 arch/mips/mm/cache.c         | 4 ++--
 arch/mips/netlogic/xlp/smp.c | 4 +---
 arch/mips/oprofile/common.c  | 4 ++--
 4 files changed, 6 insertions(+), 8 deletions(-)

diff --git a/arch/mips/mm/c-phoenix.c b/arch/mips/mm/c-phoenix.c
index b8ed9f8..f001bdd 100644
--- a/arch/mips/mm/c-phoenix.c
+++ b/arch/mips/mm/c-phoenix.c
@@ -371,7 +371,7 @@ static void update_kseg0_coherency(void)
 
 }
 
-void ld_mmu_phoenix(void)
+void ld_mmu_xlr(void)
 {
 	extern void build_clear_page(void);
 	extern void build_copy_page(void);
diff --git a/arch/mips/mm/cache.c b/arch/mips/mm/cache.c
index a3fc1e9..56d67ec 100644
--- a/arch/mips/mm/cache.c
+++ b/arch/mips/mm/cache.c
@@ -240,9 +240,9 @@ void __cpuinit cpu_cache_init(void)
 		tx39_cache_init();
 	}
 	if (cpu_has_nlm_cache) {
-		extern void __weak ld_mmu_phoenix(void);
+		extern void __weak ld_mmu_xlr(void);
 
-		ld_mmu_phoenix();
+		ld_mmu_xlr();
 	}
 
 	if (cpu_has_octeon_cache) {
diff --git a/arch/mips/netlogic/xlp/smp.c b/arch/mips/netlogic/xlp/smp.c
index f6fb4fe..2793c36 100644
--- a/arch/mips/netlogic/xlp/smp.c
+++ b/arch/mips/netlogic/xlp/smp.c
@@ -46,8 +46,6 @@ THE POSSIBILITY OF SUCH DAMAGE.
 
 extern int xlr_loader_support;
 extern volatile cpumask_t cpu_callin_map;
-extern void __init phoenix_smp_init(void); 
-extern void phoenix_smp_finish(void);
 
 extern void smp_tune_scheduling (void);
 extern void ptr_smp_boot(unsigned long, unsigned long, unsigned long);
@@ -89,7 +87,7 @@ static void __cpuinit nlm_init_secondary(void)
 void nlm_smp_finish(void)
 {
 #if !defined(CONFIG_NLM_XLP)
-    phoenix_msgring_cpu_init();
+    nlm_common_msgring_cpu_init();
 #endif
 }
 
diff --git a/arch/mips/oprofile/common.c b/arch/mips/oprofile/common.c
index a8477db..4f131a4 100644
--- a/arch/mips/oprofile/common.c
+++ b/arch/mips/oprofile/common.c
@@ -26,7 +26,7 @@ the header of the original work apply to this derived work.
 extern struct op_mips_model op_model_mipsxx_ops __weak;
 extern struct op_mips_model op_model_rm9000_ops __weak;
 extern struct op_mips_model op_model_loongson2_ops __weak;
-extern struct op_mips_model op_model_phoenix __attribute__((weak));
+extern struct op_mips_model op_model_xlr __attribute__((weak));
 static struct op_mips_model *model;
 
 static struct op_counter_config ctr[20];
@@ -87,7 +87,7 @@ int __init oprofile_arch_init(struct oprofile_operations *ops)
 	switch (current_cpu_type()) {
 	case CPU_XLR:
 	case CPU_XLP:
-		lmodel = &op_model_phoenix;
+		lmodel = &op_model_xlr;
 		break;
 	case CPU_5KC:
 	case CPU_20KC:
-- 
1.8.4.93.g57e4c17

