From 6f37946c79e64804c69af86ff184e69964a0ea7b Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 11:19:02 -0700
Subject: [PATCH 265/565] bcm-xlp: deprecate SPIN_LOCK_UNLOCKED

Fix compile error: deprecate SPIN_LOCK_UNLOCKED.

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/irq.c      | 2 +-
 arch/mips/netlogic/xlp/setup.c    | 2 +-
 arch/mips/netlogic/xlp/xlp_gpio.c | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/netlogic/xlp/irq.c b/arch/mips/netlogic/xlp/irq.c
index 0009c1a..7c54dcf 100644
--- a/arch/mips/netlogic/xlp/irq.c
+++ b/arch/mips/netlogic/xlp/irq.c
@@ -93,7 +93,7 @@ static volatile uint64_t xlp_irq_mask;
 /* spin lock for all interrupt related data structures
  * This variable is used in timer init, so we export it
  */
-spinlock_t xlp_pic_lock = SPIN_LOCK_UNLOCKED;
+DEFINE_SPINLOCK(xlp_pic_lock);
 EXPORT_SYMBOL(xlp_pic_lock);
 #if defined CONFIG_PCI_MSI
 /*
diff --git a/arch/mips/netlogic/xlp/setup.c b/arch/mips/netlogic/xlp/setup.c
index 4301a74..882f661 100644
--- a/arch/mips/netlogic/xlp/setup.c
+++ b/arch/mips/netlogic/xlp/setup.c
@@ -136,7 +136,7 @@ atomic_t cpus_rebooted = ATOMIC_INIT(0);
 #endif
 
 unsigned long long nlm_common_tlb_stats[NR_CPUS] __cacheline_aligned;
-spinlock_t atomic_lock = SPIN_LOCK_UNLOCKED;
+DEFINE_SPINLOCK(atomic_lock);
 
 int hwemul = 0;
 EXPORT_SYMBOL(hwemul);
diff --git a/arch/mips/netlogic/xlp/xlp_gpio.c b/arch/mips/netlogic/xlp/xlp_gpio.c
index e37b66b..b8bba19 100644
--- a/arch/mips/netlogic/xlp/xlp_gpio.c
+++ b/arch/mips/netlogic/xlp/xlp_gpio.c
@@ -37,7 +37,7 @@
 #define XLP_GPIO_MAX		41
 #define XLP_GPIO1_BASE		32
 
-spinlock_t xlp_gpio_lock  = SPIN_LOCK_UNLOCKED;
+DEFINE_SPINLOCK(xlp_gpio_lock);
 
 __inline__ int32_t gpio_reg_read(int node, int regidx)
 {
-- 
1.8.4.93.g57e4c17

