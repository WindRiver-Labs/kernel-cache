From 6a53809135bc775a7b01b13715d5cbf22f5805b3 Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Thu, 2 Feb 2012 20:41:34 -0800
Subject: [PATCH 346/565] XLP: multi-os/xen build fixes

Workaround for run-time initialization crashes due to
unsupported features and unused code path.

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/tty/hvc/Kconfig | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/tty/hvc/Kconfig b/drivers/tty/hvc/Kconfig
index 8902f9b..9dea2f8 100644
--- a/drivers/tty/hvc/Kconfig
+++ b/drivers/tty/hvc/Kconfig
@@ -61,7 +61,7 @@ config HVC_IUCV
 
 config HVC_XEN
 	bool "Xen Hypervisor Console support"
-	depends on XEN
+	depends on XEN && !NLM_XLP
 	select HVC_DRIVER
 	select HVC_IRQ
 	default y
-- 
1.8.4.93.g57e4c17

