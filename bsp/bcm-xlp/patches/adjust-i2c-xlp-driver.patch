From d1627e112805c9d686f412ae446471dd331ad3b3 Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Tue, 14 Dec 2010 11:12:23 -0800
Subject: [PATCH 200/565] adjust i2c-xlp driver

Adjust board.c for i2c-xlp driver.

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/board.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/arch/mips/netlogic/xlp/board.c b/arch/mips/netlogic/xlp/board.c
index 3033ed7..606ccca 100644
--- a/arch/mips/netlogic/xlp/board.c
+++ b/arch/mips/netlogic/xlp/board.c
@@ -27,6 +27,7 @@
 #include <linux/init.h>
 #include <linux/platform_device.h>
 #include <linux/i2c.h>
+#include <linux/spi/spi.h>
 
 static struct i2c_board_info xlp_i2c_device_info[] __initdata = {
         {"ds1374",          0, 0x68, 0, 0, 0},
@@ -43,3 +44,18 @@ static int __init xlp_i2c_device_init(void)
 
 arch_initcall(xlp_i2c_device_init);
 
+static struct spi_board_info spsn_spi_board_info[] __initdata = {
+	{
+		.modalias = "m25p80",
+		.max_speed_hz = 40000000,
+		.bus_num = 0,
+		.chip_select = 1
+	},
+};
+
+static int __init xlp_spi_device_init(void)
+{
+	return spi_register_board_info(spsn_spi_board_info, ARRAY_SIZE(spsn_spi_board_info));
+}
+
+arch_initcall(xlp_spi_device_init);
-- 
1.8.4.93.g57e4c17

