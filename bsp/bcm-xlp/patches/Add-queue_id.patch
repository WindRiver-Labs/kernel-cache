From 425416bf126aa201d1a5621821cc2d36ba70a00d Mon Sep 17 00:00:00 2001
From: Rahul Jain <rajain@netlogicmicro.com>
Date: Fri, 27 Jan 2012 15:04:47 +0530
Subject: [PATCH 351/565] Add queue_id

Add queue_id in sk_buff during jumbo frame support in nae-perf

Based on Broadcom SDK 2.3.

Signed-off-by: Rahul Jain <rajain@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 net/core/skbuff.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/net/core/skbuff.c b/net/core/skbuff.c
index 7d59b6c..e813d33 100644
--- a/net/core/skbuff.c
+++ b/net/core/skbuff.c
@@ -277,6 +277,7 @@ struct sk_buff *__alloc_skb(unsigned int size, gfp_t gfp_mask,
 	skb->end = skb->tail + size;
 #ifdef CONFIG_NLM_NET_OPTS
 	skb->netl_skb = NULL;
+	skb->queue_id = -1;
 #endif
 #ifdef NET_SKBUFF_DATA_USES_OFFSET
 	skb->mac_header = ~0U;
@@ -302,6 +303,7 @@ struct sk_buff *__alloc_skb(unsigned int size, gfp_t gfp_mask,
 		child->pfmemalloc = pfmemalloc;
 #ifdef CONFIG_NLM_NET_OPTS
 		child->netl_skb = NULL;
+		child->queue_id = -1;
 #endif
 	}
 out:
@@ -723,6 +725,7 @@ static void __copy_skb_header(struct sk_buff *new, const struct sk_buff *old)
 #endif
 #ifdef CONFIG_NLM_NET_OPTS
 	new->netl_skb = NULL;
+	new->queue_id = -1;
 #endif
 	memcpy(new->cb, old->cb, sizeof(old->cb));
 	new->csum		= old->csum;
-- 
1.8.4.93.g57e4c17

