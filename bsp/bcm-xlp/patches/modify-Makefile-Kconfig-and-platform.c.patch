From 6ae9e2ed8fca2f8f8d311da8d47650da1c553d5f Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Tue, 28 Dec 2010 01:55:12 -0800
Subject: [PATCH 202/565] modify Makefile Kconfig and platform.c

Modify Makefile Kconfig and platform.c to support spi_xlp host driver.

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/spi/Kconfig  | 7 +++++++
 drivers/spi/Makefile | 4 ++++
 2 files changed, 11 insertions(+)

diff --git a/drivers/spi/Kconfig b/drivers/spi/Kconfig
index 92a9345..ff1e0fc 100644
--- a/drivers/spi/Kconfig
+++ b/drivers/spi/Kconfig
@@ -487,6 +487,13 @@ config SPI_NUC900
 	help
 	  SPI driver for Nuvoton NUC900 series ARM SoCs
 
+config SPI_XLP
+	tristate "Netlogic XLP SPI controller"
+	depends on NLM_XLP
+	select SPI_BITBANG
+	help
+	  SPI driver for Netlogic XLP MIPS SoCs
+
 #
 # Add new SPI master controllers in alphabetical order above this line
 #
diff --git a/drivers/spi/Makefile b/drivers/spi/Makefile
index 33f9c09..15e77aa 100644
--- a/drivers/spi/Makefile
+++ b/drivers/spi/Makefile
@@ -1,6 +1,9 @@
 #
 # Makefile for kernel SPI drivers.
 #
+ifeq ($(CONFIG_NLM_XLP),y)
+EXTRA_CFLAGS := $(CFLAGS) -DNLM_HAL_LINUX_KERNEL
+endif
 
 ccflags-$(CONFIG_SPI_DEBUG) := -DDEBUG
 
@@ -74,3 +77,4 @@ obj-$(CONFIG_SPI_TOPCLIFF_PCH)		+= spi-topcliff-pch.o
 obj-$(CONFIG_SPI_TXX9)			+= spi-txx9.o
 obj-$(CONFIG_SPI_XCOMM)		+= spi-xcomm.o
 obj-$(CONFIG_SPI_XILINX)		+= spi-xilinx.o
+obj-$(CONFIG_SPI_XLP)			+= spi_xlp.o
-- 
1.8.4.93.g57e4c17

