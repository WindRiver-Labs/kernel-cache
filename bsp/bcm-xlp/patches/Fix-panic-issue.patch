From d2a96904603251a77d625ab098b31356308f40d7 Mon Sep 17 00:00:00 2001
From: Vishvambhar Dayal <vishvambhard@netlogicmicro.com>
Date: Thu, 5 May 2011 13:38:12 +0530
Subject: [PATCH 213/565] Fix panic issue

Fix panic issue with initramfs compression config

Based on Broadcom SDK 2.3.

Signed-off-by: Vishvambhar Dayal <vishvambhard@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/platform.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/netlogic/xlp/platform.c b/arch/mips/netlogic/xlp/platform.c
index 661ba29..a827659 100644
--- a/arch/mips/netlogic/xlp/platform.c
+++ b/arch/mips/netlogic/xlp/platform.c
@@ -160,10 +160,10 @@ static int xlp_find_pci_dev(void)
 	struct platform_device* pplatdev;
 	struct resource* pres;
 
-	pres = (struct resource*) kmalloc(sizeof(struct resource) * 2, 
-			GFP_KERNEL);
+	pres = (struct resource*) kzalloc(sizeof(struct resource) * 2, GFP_KERNEL);
+
 	if(!pres) {
-		printk("kmalloc struct resource failedi!\n");
+		printk("kzalloc struct resource failedi!\n");
 		return -ENOMEM;
 	}
 
-- 
1.8.4.93.g57e4c17

