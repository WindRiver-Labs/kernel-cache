From 8bfb90bccbbe73eca04d0247dd1cae9c80d567e3 Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Tue, 31 Aug 2010 13:45:37 -0700
Subject: [PATCH 122/565] clean up psb_info struct and related files

Clean up unused psb_info struct and related files.

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/netlogic/xlp.h | 3 ++-
 arch/mips/netlogic/common/memory.c   | 2 ++
 arch/mips/netlogic/xlp/setup.c       | 5 +++--
 3 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/arch/mips/include/asm/netlogic/xlp.h b/arch/mips/include/asm/netlogic/xlp.h
index 0bdd580..010d43f 100644
--- a/arch/mips/include/asm/netlogic/xlp.h
+++ b/arch/mips/include/asm/netlogic/xlp.h
@@ -29,6 +29,7 @@ THE POSSIBILITY OF SUCH DAMAGE.
 #include <linux/types.h>
 #include <asm/cpu.h>
 #include <asm/mipsregs.h>
+#if 0
 #define PSB_INFO_VERSION 0x0001
 
 struct psb_info {
@@ -72,7 +73,7 @@ struct psb_info {
         uint64_t bldr_envp;
         uint64_t avail_mem_map;
 };
-
+#endif
 enum {
         NETLOGIC_IO_SPACE = 0x10,
         PCIX_IO_SPACE,
diff --git a/arch/mips/netlogic/common/memory.c b/arch/mips/netlogic/common/memory.c
index 9c19b32..9e8669b 100644
--- a/arch/mips/netlogic/common/memory.c
+++ b/arch/mips/netlogic/common/memory.c
@@ -204,7 +204,9 @@ int __uncached_access(struct file *file, unsigned long addr)
 
 	/* check the address region, return uncached pages for IO space and
 	   cached page for memory space. */
+#if 0
 	return nlm_common_get_pgprot(addr);
+#endif
 }
 
 inline int valid_phys_addr_range(unsigned long addr, size_t count)
diff --git a/arch/mips/netlogic/xlp/setup.c b/arch/mips/netlogic/xlp/setup.c
index 2cabfc6..00f24e2 100644
--- a/arch/mips/netlogic/xlp/setup.c
+++ b/arch/mips/netlogic/xlp/setup.c
@@ -140,6 +140,7 @@ unsigned int nlm_shtlb = 1; /* by default shared TLB is enabled */
 #endif
 
 extern struct node_mask smp_node;
+#if 0
 extern struct psb_info *nlm_boot_info;
 struct psb_info *prom_info = NULL;
 struct psb_info prom_info_copy; /* Bootloader prom_info is saved here */
@@ -168,7 +169,6 @@ static struct physmap_info {
 	{ 0x1B , "PCIE Memory Space"},
 	{ 0xff , "Unknown type" }
 };
-struct boot_mem_map boot_physaddr_info;
 
 static char *get_psb_physmap_name(int type)
 {
@@ -202,7 +202,8 @@ int nlm_common_get_pgprot(unsigned long address)
 	}
 	return 1;
 }
-
+#endif
+struct boot_mem_map boot_physaddr_info;
 int valid_mmap_nlm_common_addr_range(unsigned long pfn)
 {
 	int i;
-- 
1.8.4.93.g57e4c17

