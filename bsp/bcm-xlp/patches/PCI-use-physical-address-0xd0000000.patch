From 627c659c7528b5b202e3fa5d64949c09b846af8e Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Sun, 16 May 2010 21:52:24 -0700
Subject: [PATCH 015/565] PCI: use physical address 0xd0000000

PCI: use physical address 0xd0000000 for PCI MEM

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/common/Makefile | 7 ++++---
 arch/mips/pci/pci-xlp.c            | 4 ++--
 2 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/arch/mips/netlogic/common/Makefile b/arch/mips/netlogic/common/Makefile
index c4edf9f..26e00b2 100644
--- a/arch/mips/netlogic/common/Makefile
+++ b/arch/mips/netlogic/common/Makefile
@@ -1,19 +1,20 @@
 EXTRA_CFLAGS := $(CFLAGS) -DNLM_HAL_LINUX_KERNEL -Iarch/mips/include/asm/netlogic/hal
 obj-y :=   platform.o cpu_proc.o memory.o
-obj-$(CONFIG_EARLY_PRINTK)	+= earlycons.o
 
 obj-y 					+= msgring.o
 obj-y 					+= msgring_xls.o
 obj-y 					+= msgring_shared.o
 
-obj-$(CONFIG_NLM_XLP) 		+= nlm_hal.o
+obj-$(CONFIG_NLM_XLP)			+= nlm_hal.o
 
 obj-$(CONFIG_RAPIDIO)             	+= srio.o
 obj-$(CONFIG_NLMCOMMON_IP_OVER_PCI) 	+= dma.o
-obj-$(CONFIG_SMP)		+= smp.o smpboot.o
+obj-$(CONFIG_SMP)                 	+= smp.o
 
 EXTRA_AFLAGS := $(CFLAGS)
 
 clean-files += msgring.o msgring_xls.o msgring_shared.o
 clean-files += nlm_hal.o
 clean-files += srio.o dma.o smp.o platform.o cpu_proc.o
+clean-files += msgring.c msgring_xls.c msgring_shared.c nlm_hal.c
+
diff --git a/arch/mips/pci/pci-xlp.c b/arch/mips/pci/pci-xlp.c
index 062ef6a..3547a71 100644
--- a/arch/mips/pci/pci-xlp.c
+++ b/arch/mips/pci/pci-xlp.c
@@ -143,8 +143,8 @@ static struct pci_ops xlp_pci_ops = {
 #define DEFAULT_XLP_PCI_CONFIG_BASE 0x1c000000UL
 static struct resource xlp_mem_resource = {
 	.name           = "XLP PCI MEM",
-	.start          = 0xd0000000UL,          /* 256MB PCI mem @ 0xd000_0000 */
-	.end            = 0xdfffffffUL,
+	.start          = 0xd0000000ULL,          /* 256MB PCI mem @ 0xd000_0000 */
+	.end            = 0xdfffffffULL,
 	.flags          = IORESOURCE_MEM,
 };
 static struct resource xlp_io_resource = {
-- 
1.8.4.93.g57e4c17

