From 8c0cb7bd8ef5f055d2e1c661718f0ee02e7573e8 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Fri, 8 Oct 2010 22:34:30 -0700
Subject: [PATCH 158/565] Add cpumask utilitiy functions

Add cpumask utilitiy functions.

Based on Broadcom SDK 2.3.

Signed-off-by: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/netlogic/cpumask.h | 35 ++++++++++++++++++++++++++++++++
 1 file changed, 35 insertions(+)
 create mode 100644 arch/mips/include/asm/netlogic/cpumask.h

diff --git a/arch/mips/include/asm/netlogic/cpumask.h b/arch/mips/include/asm/netlogic/cpumask.h
new file mode 100644
index 0000000..8643d44
--- /dev/null
+++ b/arch/mips/include/asm/netlogic/cpumask.h
@@ -0,0 +1,35 @@
+#ifndef _ASM_NETLOGIC_CPUMASK_H
+#define _ASM_NETLOGIC_CPUMASK_H
+
+#include <linux/cpumask.h>
+
+#define CPUMASK_BUF 256
+
+static __inline__ unsigned int cpumask_to_uint32(cpumask_t *cpumask)
+{
+	unsigned int mask = 0;
+	int i;
+
+	for (i = 0; i < 32; i++) {
+		if (cpumask_test_cpu(i, cpumask)) {
+			mask |= (1 << i);
+		}
+	}
+	return mask;
+}
+
+static __inline__ void uint32_to_cpumask(cpumask_t *cpumask, unsigned int mask)
+{
+	int i;
+
+	for (i = 0; i < 32; i++) {
+		if (mask & (1 << i)) {
+			cpumask_set_cpu(i, cpumask);
+		}
+		else {
+			cpumask_clear_cpu(i, cpumask);
+		}
+	}
+}
+
+#endif /* _ASM_NETLOGIC_CPUMASK_H */
-- 
1.8.4.93.g57e4c17

