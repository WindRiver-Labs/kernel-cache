From 48fadf6bb72e869debb4603c9eb802b94966aeea Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 15:55:53 -0700
Subject: [PATCH 419/761] Fix compile error: include header for _PMD_T_LOG2

upstream changes caused undefined _PMD_T_LOG2 with 64K page size - revisit

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/pgtable-64.h |    8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/arch/mips/include/asm/pgtable-64.h b/arch/mips/include/asm/pgtable-64.h
index d78afba..ec7b339 100644
--- a/arch/mips/include/asm/pgtable-64.h
+++ b/arch/mips/include/asm/pgtable-64.h
@@ -16,7 +16,15 @@
 #include <asm/cachectl.h>
 #include <asm/fixmap.h>
 
+#ifdef CONFIG_NLM_XLP
 #include <asm-generic/pgtable-nopud.h>
+#else
+#ifdef CONFIG_PAGE_SIZE_64KB
+#include <asm-generic/pgtable-nopmd.h>
+#else
+#include <asm-generic/pgtable-nopud.h>
+#endif
+#endif
 
 /*
  * Each address space has 2 4K pages as its page directory, giving 1024
-- 
1.7.10.4

