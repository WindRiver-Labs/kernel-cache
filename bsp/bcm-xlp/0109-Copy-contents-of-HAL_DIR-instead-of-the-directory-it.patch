From a71be251e699733bf3ea8df6dd1cf1c65e873f39 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Thu, 8 Jul 2010 17:04:29 -0700
Subject: [PATCH 109/762] Copy contents of HAL_DIR instead of the directory itself

Based on Broadcom SDK 2.3.

Signed-off-by: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/msgcfg/Makefile |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/mips/netlogic/msgcfg/Makefile b/arch/mips/netlogic/msgcfg/Makefile
index de20d06..309b6c9 100644
--- a/arch/mips/netlogic/msgcfg/Makefile
+++ b/arch/mips/netlogic/msgcfg/Makefile
@@ -1,8 +1,7 @@
 #EXTRA_CFLAGS := -Werror
-EXTRA_CFLAGS := $(CFLAGS) -DNLM_HAL_LINUX_KERNEL -Iarch/mips/include/asm/netlogic/hal
+LOCAL_HAL_DIR :=$(srctree)/arch/mips/include/asm/netlogic/hal
+EXTRA_CFLAGS := $(CFLAGS) -DNLM_HAL_LINUX_KERNEL -I$(LOCAL_HAL_DIR)
 EXTRA_AFLAGS := $(CFLAGS)
-#HAL_DIR :=$(srctree)/../sim/hal
-#export HAL_DIR
 
 clean-files += msgring_shared.lex.c
 clean-files += msgring_xls.lex.c
@@ -18,7 +17,8 @@ clean-files += msgring_shared.yacc.h
 clean-files += msgring.lex.c
 
 shared_sources:
-	$(Q)cp -fr $(HAL_DIR) $(srctree)/arch/mips/include/asm/netlogic/
+	$(Q)mkdir -p $(LOCAL_HAL_DIR)
+	$(Q)cp -fr $(HAL_DIR)/* $(LOCAL_HAL_DIR)/
 	$(Q)echo "************ copying nlm_hal.c file ***************"
 
 msgring:
-- 
1.7.0.4

