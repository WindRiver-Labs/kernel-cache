From 13f95765ab411a8763d20f73612ad304cfdb9d21 Mon Sep 17 00:00:00 2001
From: Hareesh R <hareeshr@broadcom.com>
Date: Mon, 8 Apr 2013 19:00:54 +0530
Subject: [PATCH 718/761] hybrid_nae : Added unlocked ioctl reference for 3.0
 kernel

Based on Broadcom SDK 2.3.

Signed-off-by: Hareesh R <hareeshr@broadcom.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/char/nlm_sharedmem.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/char/nlm_sharedmem.c b/drivers/char/nlm_sharedmem.c
index b5806e2..9a89807 100644
--- a/drivers/char/nlm_sharedmem.c
+++ b/drivers/char/nlm_sharedmem.c
@@ -91,7 +91,7 @@ static ssize_t sharedmem_write (struct file *file, const char *buf,
 	return 0;
 }
 
-static long sharedmem_compat_ioctl(struct file *filp, unsigned int cmd, unsigned long arg) {
+static long sharedmem_ioctl(struct file *filp, unsigned int cmd, unsigned long arg) {
 
 	/* Will be called during 32 bit user space applications */
 	int ret = 0;
@@ -182,7 +182,8 @@ struct file_operations sharedmem_fops = {
 	.read	      =	sharedmem_read,
 	.write	      =	sharedmem_write,
 	.mmap	      =	sharedmem_mmap,
-	.compat_ioctl =	sharedmem_compat_ioctl,
+	.unlocked_ioctl = sharedmem_ioctl,
+	.compat_ioctl =	sharedmem_ioctl,
 	.open	      =	sharedmem_open,
 	.release      =	sharedmem_release,
 };
-- 
1.7.10.4

