From a70155598adc442406275d9a232d04c952e6ce1f Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Thu, 19 Jan 2012 15:21:33 -0800
Subject: [PATCH 522/761] XLP: temporarily disable PCI support

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/Kconfig |    6 ++++++
 arch/mips/pci/Makefile     |    2 +-
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/Kconfig b/arch/mips/netlogic/Kconfig
index cbda2a4..3cbb56b 100644
--- a/arch/mips/netlogic/Kconfig
+++ b/arch/mips/netlogic/Kconfig
@@ -141,3 +141,9 @@ config NLM_EXCL_VC_NAPI_HANDLER_SUPPORT
        bool "Exclusive VC handler , where napi is done in the application code"
        depends on NLM_XLP && 64BIT
        default n
+
+config PCI_XLP
+	bool "Enable PCI support on XLP"
+	depends on NLM_XLP && PCI
+	default n
+
diff --git a/arch/mips/pci/Makefile b/arch/mips/pci/Makefile
index c1bee8b..3fcd24c 100644
--- a/arch/mips/pci/Makefile
+++ b/arch/mips/pci/Makefile
@@ -53,7 +53,7 @@ obj-$(CONFIG_TOSHIBA_RBTX4927)	+= fixup-rbtx4927.o
 obj-$(CONFIG_TOSHIBA_RBTX4938)	+= fixup-rbtx4938.o
 obj-$(CONFIG_VICTOR_MPC30X)	+= fixup-mpc30x.o
 obj-$(CONFIG_ZAO_CAPCELLA)	+= fixup-capcella.o
-obj-$(CONFIG_NLM_XLP)  	+= pci-xlp.o
+obj-$(CONFIG_PCI_XLP)  	+= pci-xlp.o
 obj-$(CONFIG_WR_PPMC)		+= fixup-wrppmc.o
 obj-$(CONFIG_MIKROTIK_RB532)	+= pci-rc32434.o ops-rc32434.o fixup-rc32434.o
 obj-$(CONFIG_CPU_CAVIUM_OCTEON)	+= pci-octeon.o pcie-octeon.o
-- 
1.7.10.4

