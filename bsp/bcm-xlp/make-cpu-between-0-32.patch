From b7d5dfd0197ab8c0ebe7371e87a20e4b821393f0 Mon Sep 17 00:00:00 2001
From: henry shao <hshao@netlogicmicro.com>
Date: Sat, 28 Aug 2010 18:22:57 -0700
Subject: [PATCH 159/761] make cpu between [0-32]

Based on Broadcom SDK 2.3.

Signed-off-by: henry shao <hshao@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/smp.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/mips/netlogic/xlp/smp.c b/arch/mips/netlogic/xlp/smp.c
index 9685191..e99ab9f 100644
--- a/arch/mips/netlogic/xlp/smp.c
+++ b/arch/mips/netlogic/xlp/smp.c
@@ -68,6 +68,7 @@ void nlm_send_ipi_single(int cpu, unsigned int action)
 printk("[%s] cpu: %d\n",__func__,  cpu);
         __u32 node = cpu / 32;
         __u32 ipi = 0;
+	cpu = cpu % 32;
 
         if (action & SMP_CALL_FUNCTION) {
                 ipi |= IRQ_IPI_SMP_FUNCTION;
-- 
1.7.10.4

