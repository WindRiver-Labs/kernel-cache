From 1e409fd89a66fa49ae339ad23ed7ce252be8d2a0 Mon Sep 17 00:00:00 2001
From: Om Narasimhan <onarasimhan@netlogicmicro.com>
Date: Tue, 18 Oct 2011 17:47:57 -0700
Subject: [PATCH 458/762] Define config and econfig base and sizes

ECFG base was absent.
For the time being, ecfg size is 32M, but hardcoded value is replaced with
a macro such that it would be easy to change in future should the need arise.

Based on Broadcom SDK 2.3.

Signed-off-by: Om Narasimhan <onarasimhan@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/pci/pci-xlp.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/arch/mips/pci/pci-xlp.c b/arch/mips/pci/pci-xlp.c
index 3f5588a..50e550a 100644
--- a/arch/mips/pci/pci-xlp.c
+++ b/arch/mips/pci/pci-xlp.c
@@ -418,7 +418,10 @@ static struct pci_ops xlp_pci_ops = {
 /*
  * XLP PCIE Controller
  */
-#define DEFAULT_XLP_PCI_CONFIG_BASE 0x1c000000UL
+#define DEFAULT_XLP_PCI_ECONFIG_BASE	(0x18000000ULL)
+#define DEFAULT_XLP_PCI_ECONFIG_SIZE	(32 << 20)
+#define DEFAULT_XLP_PCI_CONFIG_BASE	(0x1c000000ULL)
+#define DEFAULT_XLP_PCI_CONFIG_SIZE	(32 << 20)
 static struct resource xlp_mem_resource = {
 	.name           = "XLP PCI MEM",
 	.start          = 0xd0000000ULL,          /* 256MB PCI mem @ 0xd000_0000 */
@@ -738,7 +741,7 @@ static int __init pcibios_init(void)
 	pci_probe_only = 1;
 
 	/* Map the PCIX CFG space */
-	pci_config_base = ioremap(DEFAULT_XLP_PCI_CONFIG_BASE, (32<<20));
+	pci_config_base = ioremap(DEFAULT_XLP_PCI_CONFIG_BASE, DEFAULT_XLP_PCI_CONFIG_SIZE);
 	if (!pci_config_base) {
 		printk(KERN_ERR "Unable to map PCI config space!\n");
 		return 1;
-- 
1.7.0.4

