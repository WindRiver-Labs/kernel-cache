From 325a7f3e4bcaf501542c3c2b04f7514eabd64ffd Mon Sep 17 00:00:00 2001
From: Nam Ninh <nam.ninh@windriver.com>
Date: Tue, 2 Dec 2014 07:28:29 -0500
Subject: [PATCH] dts: xlp9xx KVM host device tree source

Integrate xlp9xx-linux.dts from Broadcom SDK 3.0.3.

Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/mips/boot/dts/xlp9xx-linux.dts b/arch/mips/boot/dts/xlp9xx-linux.dts
index c0c3fec..676304d 100644
--- a/arch/mips/boot/dts/xlp9xx-linux.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux.dts
@@ -73,6 +73,12 @@
 			pic {
 			};
 			nae-0 {
+				/* Example for different values of nae-rx-cpu-mask
+				 * for 80 CPUs: nae-rx-cpu-mask = <0xffff 0xffffffff 0xffffffff>;
+				 * for 64 CPUs: nae-rx-cpu-mask = <0xffffffff 0xffffffff>;
+				 * for 32 CPUs: nae-rx-cpu-mask = <0xffffffff>;
+				 */
+				nae-rx-cpu-mask = <>;
 				freein-fifo-mask = <0xffff 0 0 0>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
@@ -83,6 +89,7 @@
 				dummy-pktdata-addr = <0x0 0x0ff00000>; // 255 MB
 			};
 			nae-1 {
+				nae-rx-cpu-mask = <>;
 				freein-fifo-mask = <0xffff 0 0 0>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
@@ -123,8 +130,10 @@
 			device_type = "domain";
 
 			cpu {   
-                                onlinemask = <0xffff>; 
+                                onlinemask = <0xf>; 
                                 nae-rx-vc = <2>;
+				sae-rx-vc = <2>; 
+				sae-rx-sync-vc  = <3>; /* should be exclusive */
 			};
 
 			resource-allocation {
@@ -138,17 +147,17 @@
 					sram-off = <0 0 0 0>;
 				};
 				net@1 {
-                                        port-mask = <0 0 0 0>;
-                                        frinlifo-mask = <0 0 0 0>;
+                                        port-mask = <0x3 0 0 0>;
+                                        frinlifo-mask = <0xff 0 0 0>;
                                         frinlifo-shared-mode = <0 0 0 0>;
                                         vfbid-sw-offset = <0 0 0 0>;
                                         vfbid-sw-entries = <0 0 0 0>;
-                                        ucore-mask = <0 0 0 0>;
+                                        ucore-mask = <0x2 0 0 0>;
                                         sram-off = <0 0 0 0>;
                                 };
 			};
 			app-param{
-                                onlinemask = <0xffff>;
+                                onlinemask = <0 0 0xffff>;
 			};
 		};
                 dom@2 { 
@@ -172,12 +181,12 @@
 					max-l4rules = <0 0 0 0>;
                                 };
                                 net@1 { 
-                                        port-mask = <0x3 0 0 0>;
-                                        frinlifo-mask = <0xff 0 0 0>;
-                                        frinlifo-shared-mode = <0xff 0 0 0>;
+                                        port-mask = <0x0 0 0 0>;
+                                        frinlifo-mask = <0x0 0 0 0>;
+                                        frinlifo-shared-mode = <0x0 0 0 0>;
                                         vfbid-sw-offset = <0 0 0 0>;
                                         vfbid-sw-entries = <0 0 0 0>;
-                                        ucore-mask = <0xc 0 0 0>;
+                                        ucore-mask = <0x0 0 0 0>;
                                         sram-off = <0 0 0 0>;
 					max-l3rules = <1 0 0 0>;
 					max-l4rules = <2 0 0 0>;
@@ -191,16 +200,16 @@
 
 
 	};
-
 	chosen {
 		/* examples for different core/thread models.
 		 * 16core: netlogic,cpumask=<0xffffffff 0xffffffff>
 		 * 20core: netlogic,cpumask=<0xffff 0xffffffff 0xffffffff>
 		 * 15 core, skipping core #5: netlogic,cpumask=<0xffffffff 0xff0fffff>
 		 */
-		netlogic,cpumask = <0x01>;
-		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
+		netlogic,cpumask = <0xffffffff 0xffffffff>;
+		bootargs = "root=/dev/nfs rw nfsroot=128.224.178.20:/export/pxeboot/vlm-boards/22010/rootfs,nfsvers=3 ip=dhcp console=ttyS0,115200";
 		/*linux,initrd-start=<0x00c00000>;
+		bootargs = " console=ttyS0,115200  rhash_entries=1048576";
 		linux,initrd-end=<0x02c00000>;*/
 	};
 
@@ -230,13 +239,23 @@
 		serial0: serial@30000 {
 			device_type = "serial";
 			compatible = "ns16550";
-			reg = <0 0x112100 0xa00>;
+			reg = <0 0x112100 0x20>;
 			reg-shift = <2>;
 			reg-io-width = <4>;
 			clock-frequency = <125000000>;
 			interrupt-parent = <&pic>;
 			interrupts = <17>;
 		};
+		serial1: serial@31000 {
+			device_type = "serial";
+			compatible = "ns16550";
+			reg = <0 0x112120 0x20>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+			clock-frequency = <125000000>;
+			interrupt-parent = <&pic>;
+			interrupts = <18>;
+		};
 		pic: pic@11000 {
 			interrupt-controller;
 			#address-cells = <0>;
@@ -244,6 +263,15 @@
 			reg = <0 0x110000 0x200>;
 		};
 
+		watchdog@0 {
+			compatible = "netlogic,nlm-wdt";
+		};
+
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x12a000 0x80>;
+		};
+
 		i2c0: i2c@113100 {
 			compatible = "netlogic,xlp9xx-i2c";
 			#address-cells = <1>;
@@ -262,7 +290,12 @@
 				compatible = "dallas,ds1374";
 				reg = <0x68>;
 			};
-			
+
+			dtt@2c {
+                                compatible = "max6653";
+                                reg = <0x2c>;
+			};
+
 			eeprom@57 {
                                 compatible = "xlpge_eeprom";
                                 reg = <0x57>;
@@ -290,8 +323,11 @@
 			#size-cells = <0>;
 			reg = <0 0x13a000 0x100>;
 
+			interrupts = <34>;
+			interrupt-parent = <&pic>;
+
 			spi_nor@1 {
-				compatible = "spansion,s25sl12801";
+				compatible = "micron,n25q128";
 				#address-cells = <1>;
 				#size-cells = <1>;
 
@@ -339,6 +375,31 @@
 				};
 			};
 		};
+
+		nand_flash@0,0 {
+			compatible = "brcm,xlp9xx-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x139000 0x1000>;
+
+			nand-ecc-mode = "hw";
+
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
+			};
+
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
+
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
+			};
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
@@ -374,546 +435,1456 @@
 			};
 		};
 
-		fmn@node-0 {
-			default-credits = <50>;
-			default-queue-size = <28672>;
-			fmn-spill-mem-base = <0x00000000 0x10000000>; /*0 - dynamic allocation, only for 64 bit linux */
-			fmn-spill-mem-size = <0x00000000 0x02000000>;
-			q-config {
-				/* credits from station     
-				   "cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs"
-				   The order and number of station should be matching with the list given above
-				   Here, credits 0 means the default credits. 
-				   Right now there is no way to configure credit of zero */
-
-				cpu {
-					queue-size = <36864>; /* queue size for all the cpu vcs */
-					credits-from {
-						node-0 = <0 0 0 0 0 0 0 0 0 0 0 500 0 0 150 0>;
-					};
-				};
+		gpio: xlp_gpio@114000 {
+			compatible = "netlogic,xlp-gpio";
+			reg = <0 0x114100 0x1000>;
+			#gpio-cells = <2>;
+			gpio-controller;
 
+			#interrupt-cells = <1>;
+			interrupt-parent = <&pic>;
+			interrupts = <39>;
+			interrupt-controller;
+		};
+fmn@node-0{
+        default-credits = <16>; 
+	default-queue-size = <12288>;
+        fmn-spill-mem-base = <0x00000000 0x10000000>; /*0 - dynamic allocation, only for 64 bit linux */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
+		/* supported station names 
+			"cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs poe1 nae1 ale"
+		*/
+		version = <1>;
+		cpu {
+			cpu-vc-mask = <0x0>;  /* There are 4 VCs per thread.
+                                                The onchip queue configuration values given in this section is applicable only
+                                                to the VCs enabled here. If this is zero, it is applicable for all the CPU VCs */
+
+			onchip-entries = <64>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					poe = <128>;
+					poe1 = <128>;
+					nae = <32>;
+					nae1 = <32>;
+				};
 			};
 		};
-		fmn@node-1{
-			default-credits = <50>;
-			default-queue-size = <28672>;
-			fmn-spill-mem-base = <0x00000000 0x00000000>; /*0 - dynamic allocation */
-			fmn-spill-mem-size = <0x00000000 0x02000000>;
-			q-config{
-
+		nae {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+				stn@node-0 {
+					cpu = <64>;
+					nae = <512>;
+				};
 			};
 		};
-		fmn@node-2{
-
+		poe {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+			credits-from {
+                                stn@node-0 {
+					cpu = <64>;
+					nae = <64>;
+				};
+			};
 		};
-		fmn@node-3{
-
+		nae1 {
+			onchip-entries = <512>;
+			num-tx-queues = <9>;
+			queue-size = <36864>;
+			credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <512>;
+                                };
+                        };
+		};
+		poe1 {
+			onchip-entries = <512>;
+			queue-size = <36864>;
+                        credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <64>;
+                                };
+                        };
 		};
+		
+		
+	};
+};
+fmn@node-1{
+        default-credits = <50>;
+        default-queue-size = <28672>;
+        fmn-spill-mem-base = <0 0>; /*0 - dynamic allocation */
+        fmn-spill-mem-size = <0x00000000 0x02000000>;
+	q-config{
+        /* supported station names
+            "cpu popq pcie0 pcie1 pcie2 pcie3 gdx gdx1 rsa crypto cmp poe nae regx srio lzs poe1 nae1 ale"
+        */
+        version = <1>;
+        cpu {
+            cpu-vc-mask = <0xc>;  /* There are 4 VCs per thread.
+                                                The onchip queue configuration values given in this section is applicable only
+                                                to the VCs enabled here. If this is zero, it is applicable for all the CPU VCs */
+            onchip-entries = <64>;
+            queue-size = <36864>;
+            credits-from {
+                stn@node-0 {
+                    poe = <128>;
+                    poe1 = <128>;
+                    nae = <32>;
+                    nae1 = <32>;
+                    cpu = <32>;
+                };
+                stn@node-1 {
+                    poe = <128>;
+                    poe1 = <128>;
+                    nae = <32>;
+                    nae1 = <32>;
+                    cpu = <32>;
+                };
+            };
+        };
+        nae {
+            onchip-entries = <512>;
+            num-tx-queues = <9>;
+            queue-size = <36864>;
+            credits-from {
+                stn@node-0 {
+                    cpu = <64>;
+                    nae = <512>;
+                };
+                stn@node-1 {
+                    cpu = <64>;
+                };
+            };
+        };
+        poe {
+            onchip-entries = <512>;
+            queue-size = <36864>;
+            credits-from {
+                                stn@node-0 {
+                    cpu = <64>;
+                    nae = <64>;
+                };
+                        stn@node-1 {
+                    cpu = <64>;
+                };
+            };
+        };
+        nae1 {
+            onchip-entries = <512>;
+            num-tx-queues = <9>;
+            queue-size = <36864>;
+            credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <512>;
+                                };
+                                stn@node-1 {
+                                        cpu = <64>;
+                                };
+                        };
+        };
+        poe1 {
+            onchip-entries = <512>;
+            queue-size = <36864>;
+                        credits-from {
+                                stn@node-0 {
+                                        cpu = <64>;
+                                        nae1 = <64>;
+                                };
+                    stn@node-1 {
+                    cpu = <64>;
+                };
 
-		net@node-0 {
-		       compatible = "XLP9XX";
-		       version = <1>;
-
-		       ale-0 {
-			     enable = <0>;
-			     cpu-threshold = <32>;
-			     nae-threshold = <80>;
-			     data-base {
-
-			     };
-		       };
-		     
-		       nae-0 {
-			     frequency = <667>;
-			     ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
-			     parser-enable = <1>;
-			     freein-unique-desc-size = <1>;
-
-				ucore {
-					src@1 {
-						num-opcodes = <67>;
-						path = "/work/bsp/xlp9xx/sdk-base-3.0/buildroot/output/build/sysconfig/nae/ucore/default-ver1.c";
-						timestamp = "Sun Oct 13 02:42:55 2013";
-						mask = <0xffff>;
-						opcodes = <
-							0x3c1c0010 
-							0x279cf808 
-							0x3c020010 
-							0x2442f808 
-							0x3c030010 
-							0x2463f808 
-							0xac400000 
-							0x0043082b 
-							0x1420fffd 
-							0x24420004 
-							0x3c1d0010 
-							0x27bdf9c0 
-							0x27a50020 
-							0x27a60028 
-							0xaca00000 
-							0xacc00000 
-							0x0c000029 
-							0x00002021 
-							0x1000ffff 
-							0x00000000 
-							0x3c020000 
-							0x8c420140 
-							0x27bdffe0 
-							0x2403ffff 
-							0xafbf001c 
-							0xafb10018 
-							0x10430009 
-							0xafb00014 
-							0x3c100000 
-							0x26100140 
-							0x2411ffff 
-							0x0040f809 
-							0x2610fffc 
-							0x8e020000 
-							0x1451fffc 
-							0x00000000 
-							0x8fbf001c 
-							0x8fb10018 
-							0x8fb00014 
-							0x03e00008 
-							0x27bd0020 
-							0x3c040001 
-							0x34838000 
-							0x8c620000 
-							0x27bdfff8 
-							0x3c070020 
-							0xafa20000 
-							0x24040100 
-							0x24030001 
-							0x24060004 
-							0x24e70001 
-							0x08000039 
-							0x3c020170 
-							0x34088030 
-							0xad060000 
-							0x34088000 
-							0xad020000 
-							0x34088004 
-							0x8d050000 
-							0x34088034 
-							0xad040000 
-							0x8fa50000 
-							0x14a3fff6 
-							0x00000000 
-							0x34088030 
-							0x08000037 
-							0xad070000 
-						>;
-					};
-				};
-		 
-			     freein-fifo-config {
-				 /*
-					1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
-					2. Onnchip desc size per queue will be configured from arry below
-				   If spill descs per queue is specified,
-					1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
-				*/
-				freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 2MB @ (dynamically allocated address)MB
-				freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
-				freein-fifo-spill-num-descs = <1200>;
-				freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
-				 port-fifo-en = <1>;
-			     };  
-			     
-			     complex@0 {
-			     
-				mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
-
-				xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
-				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
-				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
-				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
-				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
-				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
-				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
-
-				     /* rxaui specific params*/
-				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
-				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
-				     ext-phy-addr = <0 1 0 0>;		/*phy adress in exaui mode. only 2 entries are used.*/	
-				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
-				     /* To enable change it to  <3> */
-				     msec-port-enable  = <0>;
+                        };
+        };
 
-				};
 
+    };
+};
 
-				xlgmac {                         /* valid when mode = xlaui */
+fmn@node-2{
 
-				};
+};
+fmn@node-3{
 
-				sgmii {                                      /* valid when mode = sgmii */
-				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <1 2 3 4>;               /* phy address for each port */
-				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
-				     /* To enable change it to  <0xf> */
-				     msec-port-enable  = <0x0>;
+};
+net@node-0 {
+       compatible = "XLP9XX";
+       version = <1>;
+
+       ale-0 {
+             enable = <0>;
+             cpu-threshold = <32>;
+             nae-threshold = <80>;
+             data-base {
+
+             };
+       };
+     
+       nae-0 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+	     parser-enable = <1>;
+	     freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
 				};
+			};
+ 
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                   If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 2MB @ (dynamically allocated address)MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+		freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+		 port-fifo-en = <1>;
+             };  
+             
+             complex@0 {
+             
+                mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+		xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+		     ext-phy-addr = <0 1 0 0>;		/*phy adress in exaui mode. only 2 entries are used.*/	
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+					  ext-phy-sbl = <1 1 0 0>;
+		     /* To enable change it to  <3> */
+		     msec-port-enable  = <0>;
 
-				interlaken {                     /* valid when mode = interlaken */
-				     db = "cortina";             /* select daughter board : cortina or loopback */
-				     loopback = <0>;             /* loopback = 0 or 1 */
-				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
-				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
-				     num-channels = <4>;         /* num-channels = 1 to 4 */
-				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;    /* descriptor size */
-				};
-			     }; 
-
-			     complex@1 {
-
-				mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
-
-				xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
-				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
-				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
-				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
-				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
-				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
-				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
-
-				     /* rxaui specific params*/
-				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
-				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
-				     ext-phy-addr = <4 5 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/	
-				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-				     /* To enable change it to  <3> */
-				     msec-port-enable  = <0>;
-				};
+                };
 
-				xlgmac {                         /* valid when mode = xlaui */
 
-				};
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
 
-				sgmii {                          /* valid when mode = sgmii */
-				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <1 2 3 4>;               /* phy address for each port */
-				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
-				     /* To enable change it to  <0xf> */
-				     msec-port-enable  = <0x0>;
-				};
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0 1 2 3>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <0xf> */
+		     msec-port-enable  = <0x0>;
+                };
 
-				interlaken {                     /* valid when mode = interlaken */
-				     db = "cortina";             /* select daughter board : cortina or loopback */
-				     loopback = <0>;             /* loopback = 0 or 1 */  
-				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
-				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
-				     num-channels = <4>;         /* num-channels = 1 to 4 */
-				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;    /* descriptor size */
-				};
-			     };
-		  
-			     complex@2 {
-				mode = "sgmii"; /* sgmii only */
-				sgmii {
-				     loopback = <0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <0>;               /* phy address for each port */
-				     ext-phy-bus = <0>;                /* phy bus numbers */
-				     num-channels = <1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;          /* descriptor size */
-				     /* To enable change it to  <0xf> */
-				     msec-port-enable  = <0x0>;
-				};
-			     };
-		       };
-
-		       poe-0{
-			    distribution-enable = <1>;
-			    dist-drop-enable = <0>;                     /* 16 bit mask */
-			    class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
-									   3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
-			    class-drop-enable = <0>;                    /* 8 bit mask */
-			    drop-timer = <0>;                           /* Drop timer */
-			    dest-threshold = <0xa>;                     
-			    dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
-			    statistics-enable = <0>;                    
-
-			    poe-spill-address = <0 0>;  /*  <0xec00000>  */ 
-			    poe-spill-length =  <0>;  /*  <0x1000000>  */
-
-			    din-spill-address = <0 0>;
-			    din-spill-size = <0x00100000>;
-			    
-			    distribution {
-				default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
-			    };
-		       };
-		  
-		       nae-1 {
-			     frequency = <667>;
-			     ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
-			     parser-enable = <1>;
-			     freein-unique-desc-size = <1>;
-
-
-				ucore {
-					src@1 {
-						num-opcodes = <67>;
-						path = "/work/bsp/xlp9xx/sdk-base-3.0/buildroot/output/build/sysconfig/nae/ucore/default-ver1.c";
-						timestamp = "Sun Oct 13 02:42:55 2013";
-						mask = <0xffff>;
-						opcodes = <
-							0x3c1c0010 
-							0x279cf808 
-							0x3c020010 
-							0x2442f808 
-							0x3c030010 
-							0x2463f808 
-							0xac400000 
-							0x0043082b 
-							0x1420fffd 
-							0x24420004 
-							0x3c1d0010 
-							0x27bdf9c0 
-							0x27a50020 
-							0x27a60028 
-							0xaca00000 
-							0xacc00000 
-							0x0c000029 
-							0x00002021 
-							0x1000ffff 
-							0x00000000 
-							0x3c020000 
-							0x8c420140 
-							0x27bdffe0 
-							0x2403ffff 
-							0xafbf001c 
-							0xafb10018 
-							0x10430009 
-							0xafb00014 
-							0x3c100000 
-							0x26100140 
-							0x2411ffff 
-							0x0040f809 
-							0x2610fffc 
-							0x8e020000 
-							0x1451fffc 
-							0x00000000 
-							0x8fbf001c 
-							0x8fb10018 
-							0x8fb00014 
-							0x03e00008 
-							0x27bd0020 
-							0x3c040001 
-							0x34838000 
-							0x8c620000 
-							0x27bdfff8 
-							0x3c070020 
-							0xafa20000 
-							0x24040100 
-							0x24030001 
-							0x24060004 
-							0x24e70001 
-							0x08000039 
-							0x3c020170 
-							0x34088030 
-							0xad060000 
-							0x34088000 
-							0xad020000 
-							0x34088004 
-							0x8d050000 
-							0x34088034 
-							0xad040000 
-							0x8fa50000 
-							0x14a3fff6 
-							0x00000000 
-							0x34088030 
-							0x08000037 
-							0xad070000 
-						>;
-					};
-				};
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             }; 
+
+             complex@1 {
+
+                mode = "xaui"; /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+		xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+		     ext-phy-addr = <4 5 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/	
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+					  ext-phy-sbl = <1 1 0 0>;
+		     /* To enable change it to  <3> */
+		     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
 
-			     freein-fifo-config {
-				 /*
-					1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
-					2. Onnchip desc size per queue will be configured from arry below
-					   If spill descs per queue is specified,
-					1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
-				*/
-				freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00100000>; // 1MB @ 254MB
-				freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
-				freein-fifo-spill-num-descs = <1200>;
-				freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
-				 port-fifo-en = <1>;	
-			     };
-
-			     complex@0 {
-
-				mode = "xaui";	/* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
-
-				xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
-				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
-				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
-				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
-				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
-				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
-				     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
-
-				     /* rxaui specific params*/
-				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
-				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
-				     ext-phy-addr = <8 9 0 0>;		/*phy adress in exaui mode.*/	
-				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
-				     /* To enable change it to  <3> */
-				     msec-port-enable  = <0>;
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <4 5 6 7>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;	             /* connected to external MDIO of nae-0 called as sibling of nae-1 */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <0xf> */
+		     msec-port-enable  = <0x0>;
+                };
 
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */  
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+  
+             complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <0xf> */
+		     msec-port-enable  = <0x0>;
+                };
+             };
+       };
+
+       poe-0{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;                     
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;                    
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */ 
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+            
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+  
+       nae-1 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+             parser-enable = <1>;
+             freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
 				};
+			};
 
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                           If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00100000>; // 1MB @ 254MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+		freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+		 port-fifo-en = <1>;	
+             };
+
+             complex@0 {
+
+                mode = "xaui";	/* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+
+		xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+		     ext-phy-addr = <8 9 0 0>;		/*phy adress in exaui mode.*/	
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+		     /* To enable change it to  <3> */
+		     msec-port-enable  = <0>;
 
-				xlgmac {                         /* valid when mode = xlaui */
+                };
 
-				};
 
-				sgmii {                                      /* valid when mode = sgmii */
-				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
-				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
-				     /* To enable change it to  <0xf> */
-				     msec-port-enable  = <0x0>;
-				};
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
 
-				interlaken {                     /* valid when mode = interlaken */
-				     db = "cortina";             /* select daughter board : cortina or loopback */
-				     loopback = <0>;             /* loopback = 0 or 1 */
-				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
-				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
-				     num-channels = <4>;         /* num-channels = 1 to 4 */
-				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;    /* descriptor size */
-				};
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <0xf> */
+		     msec-port-enable  = <0x0>;
+                };
 
-			     };  
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
 
-			     complex@1 {                    
+             };  
 
-				mode = "xaui";   /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
+             complex@1 {                    
 
-				xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
-				     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
-				     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
-				     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>;    /* descriptor size */
-				     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
-				     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                mode = "xaui";   /* xaui, rxaui, xfi, xlaui , sgmii, interlaken */
 
-				     /* rxaui specific params*/
-				     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
-				     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
-				     ext-phy-addr = <12 13 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/	
-				     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
-				     /* To enable change it to  <3> */
-				     msec-port-enable  = <0>;
+		xgmac {                           /* valid when mode = xaui, rxaui or xfi */ 
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
 
-				};
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+		     ext-phy-addr = <12 13 0 0>;	/*phy adress in exaui mode. only 2 entries are used.*/	
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+		     /* To enable change it to  <3> */
+		     msec-port-enable  = <0>;
 
+                };
 
-				xlgmac {                         /* valid when mode = xlaui */
 
-				};
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <150 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xaui mode : 2:rxaui mode1, 3: rxaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
 
-				sgmii {                          /* valid when mode = sgmii */
-				     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
-				     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-				     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
-				     /* To enable change it to  <0xf> */
-				     msec-port-enable  = <0x0>;
-				};
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <12 13 14 15>;           /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <0xf> */
+		     msec-port-enable  = <0x0>;
+                };
 
-				interlaken {                     /* valid when mode = interlaken */
-				     db = "cortina";             /* select daughter board : cortina or loopback */
-				     loopback = <0>;             /* loopback = 0 or 1 */
-				     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
-				     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
-				     num-channels = <4>;         /* num-channels = 1 to 4 */
-				     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;    /* descriptor size */
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+            };
+
+            complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <16>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+                     ext-phy-sbl = <1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+		     /* To enable change it to  <1> */
+		     msec-port-enable  = <0>;
+                };
+            };
+
+       };
+
+       poe-1{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+};
+net@node-1 {
+       compatible = "XLP9XX";
+       version = <1>;
+
+       ale-0 {
+             enable = <0>;
+             cpu-threshold = <32>;
+             nae-threshold = <80>;
+             data-base {
+
+             };
+       };
+
+       nae-0 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+         parser-enable = <1>;
+         freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
 				};
-			    };
-
-			    complex@2 {
-				mode = "sgmii"; /* sgmii only */
-				sgmii {
-				     loopback = <0>;                   /* loopback = 0 or 1 */
-				     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
-				     ext-phy-addr = <1>;               /* phy address for each port */
-				     ext-phy-bus = <0>;                /* phy bus numbers */
-				     num-channels = <1>;               /* num-channels = 1 to 8 */
-				     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-				     free-desc-size = <2048>;          /* descriptor size */
-				     /* To enable change it to  <1> */
-				     msec-port-enable  = <0>;
+			};
+
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                   If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 2MB @ (dynamically allocated address)MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+        freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+        port-fifo-en = <1>;
+             };
+
+             complex@0 {
+
+                mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xlaui, rxlaui or xfi */
+
+             loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0 1 2 3>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+
+             complex@1 {
+
+                mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xlaui, rxlaui or xfi */
+             loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <4 5 0 0>;  /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <4 5 6 7>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1 1 1 1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+
+             complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <0>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+             };
+       };
+
+       poe-0{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+
+
+       nae-1 {
+             frequency = <667>;
+             ale-bypass = <1>;         /* 0 = enable ALE, 1 = bypass ALE */
+         parser-enable = <1>;
+         freein-unique-desc-size = <0>;
+
+			ucore {
+				src@1 {
+num-opcodes = <114>;
+					path = "/work/bsp/xlp9xx/sdk-git/sdk-base/buildroot/output/build/sysconfig/nae/ucore/hybrid_nae_xlp9xx.c";
+					timestamp = "Fri May 23 17:26:40 2014
+";
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c4201fc 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x261001fc 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x3c070001 
+						0x34e28000 
+						0x8c460018 
+						0x244b001c 
+						0x00061880 
+						0x006b1821 
+						0x8c650018 
+						0x246d001c 
+						0x00052080 
+						0x01a46821 
+						0x3c0a000f 
+						0x3c090040 
+						0x8c440018 
+						0x00003821 
+						0x8c640018 
+						0x256bffe4 
+						0x8da40018 
+						0x24050100 
+						0x8c440010 
+						0x3c060170 
+						0x8c4c0004 
+						0x354afe60 
+						0x8c620004 
+						0x25290004 
+						0x08000055 
+						0x8da20004 
+						0x8da80000 
+						0x31040001 
+						0x1480001a 
+						0x00000000 
+						0x8d6e001c 
+						0x34088034 
+						0xad050000 
+						0x31c400ff 
+						0x00041080 
+						0x004cc821 
+						0x33380fff 
+						0x00187a00 
+						0x35ee0001 
+						0x34088030 
+						0xad0e0000 
+						0x00e61025 
+						0x34088000 
+						0xad020000 
+						0x34088004 
+						0x8d180000 
+						0x330f001f 
+						0x25eefff8 
+						0x2dc80002 
+						0x1500ffec 
+						0x00000000 
+						0x8c620000 
+						0x30590001 
+						0x1320ffe4 
+						0x00000000 
+						0x8c6f0000 
+						0x31e80010 
+						0x1100000c 
+						0x00000000 
+						0x00e61025 
+						0x34088034 
+						0xad050000 
+						0x8d480000 
+						0x00087402 
+						0x31c40007 
+						0x0004cdc0 
+						0x0329c025 
+						0x34088030 
+						0x08000053 
+						0xad180000 
+						0x24c20002 
+						0x08000065 
+						0x24070002 
+					>;
 				};
-			    };
-
-		       };
-
-		       poe-1{
-			    distribution-enable = <1>;
-			    dist-drop-enable = <0>;                     /* 16 bit mask */
-			    class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
-									   3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
-			    class-drop-enable = <0>;                    /* 8 bit mask */
-			    drop-timer = <0>;                           /* Drop timer */
-			    dest-threshold = <0xa>;
-			    dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
-			    statistics-enable = <0>;
-
-			    poe-spill-address = <0 0>;  /*  <0xec00000>  */
-			    poe-spill-length =  <0>;  /*  <0x1000000>  */
-
-			    din-spill-address = <0 0>;
-			    din-spill-size = <0x00100000>;
-
-			    distribution {
-				default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
-			    };
-		       };
-		};
-	  
+			};
+
+             freein-fifo-config {
+                 /*
+                        1. Ucore is going to use upto max queues(16 for XLP, 8 for storm) for buffer mgmt
+                        2. Onnchip desc size per queue will be configured from arry below
+                           If spill descs per queue is specified,
+                        1. spill will be enabled for all the queues(except mgmt) using the spill memory specified in the OS config file.
+                */
+                freein-fifo-spill-mem-range = <0x00000000 0x00000000 0x00000000 0x00200000>; // 1MB @ 254MB
+                freein-fifo-onchip-num-descs = <64 64 64 64 64 64 64 64 64 64 64 64 64 64 64 64>;
+                freein-fifo-spill-num-descs = <1200>;
+        freein-desc-size = <3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072 3072>;
+        port-fifo-en = <1>;
+             };
+
+             complex@0 {
+
+                mode = "xaui"; /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                          /* valid when mode = xlaui, rxlaui or xfi */
+
+             loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <8 9 0 0>;          /*phy adress in exlaui mode.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                                      /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+             };
+
+             complex@1 {
+
+                mode = "xaui";   /* xlaui, rxlaui, xfi, xlaui , sgmii, interlaken */
+
+                xgmac {                           /* valid when mode = xlaui, rxlaui or xfi */
+             loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <12 13 0 0>;        /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+                };
+
+                xlgmac {                         /* valid when mode = xlaui */
+                     loopback = <0 0 0 0>;             /* loopback = 0 or 1 */
+                     num-channels = <1 1 1 1>;         /* num-channels = 1 to 8 */
+                     num-free-descs = <512 150 150 150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                     higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+                     xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+                     vlan-pri-en = <0x0 0x0 0x0 0x0>;        /* VLAN priority enable = 0 or 1 */
+
+                     /* rxlaui specific params*/
+                     submode  = <0 0 0 0>;             /* NLP1042 0: no nlp1042 support, 1:phy in xlaui mode : 2:rxlaui mode1, 3: rxlaui_mode2 */
+                     scrambler  = <0 0 0 0>;           /* scrambler disable = 0, enable = 1 */
+                     ext-phy-addr = <0 1 0 0>;          /*phy adress in exlaui mode. only 2 entries are used.*/
+                     ext-phy-bus = <0 0 0 0>;           /* phy bus numbers */
+                     /* To enable change it to  <3> */
+                     msec-port-enable  = <0>;
+		     kr-en = <0>;	
+		     kr-lpbk = <0>;	
+                };
+
+                sgmii {                          /* valid when mode = sgmii */
+                     loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <12 13 14 15>;           /* phy address for each port */
+                     ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
+                     num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+
+                interlaken {                     /* valid when mode = interlaken */
+                     db = "cortina";             /* select daughter board : cortina or loopback */
+                     loopback = <0>;             /* loopback = 0 or 1 */
+                     num-lanes = <4>;            /* Maximum number of lanes per interface = 8 (from 2 complexes) */
+                     lane-rate = <0>;            /* lanerate 0 = 3.125Gbps , 1 = 6.25Gbps */
+                     num-channels = <4>;         /* num-channels = 1 to 4 */
+                     num-free-descs = <300>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+            };
+
+            complex@2 {
+                mode = "sgmii"; /* sgmii only */
+                sgmii {
+                     loopback = <0>;                   /* loopback = 0 or 1 */
+                     mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+                     ext-phy-addr = <1>;               /* phy address for each port */
+                     ext-phy-bus = <0>;                /* phy bus numbers */
+		     ext-phy-sbl = <1>;                /* connected to external MDIO of nae-0 called as sibling of nae-1 */	
+                     num-channels = <1>;               /* num-channels = 1 to 8 */
+                     num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+                };
+            };
+
+       };
+
+       poe-1{
+            distribution-enable = <1>;
+            dist-drop-enable = <0>;                     /* 16 bit mask */
+            class-map-mode = <0>;                       /* 0:All NAE, 1:Class 7-4 reserved for CPU, 2:Class 7-5 reserved for CPU,
+                                                           3:Class 7-6 reserved for CPU, 4:Class 7 reserved for CPU */
+            class-drop-enable = <0>;                    /* 8 bit mask */
+            drop-timer = <0>;                           /* Drop timer */
+            dest-threshold = <0xa>;
+            dist-threshold = <0xa 0xa 0xa 0xa>;         /* Dist threshold group 0..3 */
+            statistics-enable = <0>;
+
+            poe-spill-address = <0 0>;  /*  <0xec00000>  */
+            poe-spill-length =  <0>;  /*  <0x1000000>  */
+
+            din-spill-address = <0 0>;
+            din-spill-size = <0x00100000>;
+
+            distribution {
+                default-thread-sel = <0>;    /* Valid values: Thread Select 0..3 */
+            };
+       };
+};
+  
 		nodes {
 			num-nodes = <1>;
 		};
 
 	};
 
-	frequency-config {
-		nae = <500>;
-		sae = <767>;
-		rsa = <767>;
-		dtre = <250>;
-		cde = <250>;
-	};
+        frequency-config {
+                nae = <500>;
+                sae = <767>;
+                rsa = <767>;
+                dtre = <250>;
+                cde = <250>;
+        };
 
 };
 
-- 
1.9.1

