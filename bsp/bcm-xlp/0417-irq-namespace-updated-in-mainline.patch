From 980d478fbba9d428222e2190e98bdda9e59ed93f Mon Sep 17 00:00:00 2001
From: Zi Shen Lim <zlim@netlogicmicro.com>
Date: Fri, 30 Sep 2011 14:16:20 -0700
Subject: [PATCH 417/762] irq: namespace updated in mainline

Based on Broadcom SDK 2.3.

Signed-off-by: Zi Shen Lim <zlim@netlogicmicro.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/netlogic/xlp/irq.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/mips/netlogic/xlp/irq.c b/arch/mips/netlogic/xlp/irq.c
index 1fa6dac..ac9446e 100644
--- a/arch/mips/netlogic/xlp/irq.c
+++ b/arch/mips/netlogic/xlp/irq.c
@@ -1370,7 +1370,7 @@ int xlp_setup_msi_irq(struct pci_dev *dev, struct msi_desc *desc, int nvec)
 	if (ret < 0) {
 		return max;
 	}
-	set_irq_msi(base_msi, desc);
+	irq_set_msi_desc(base_msi, desc);
 	ret = xlp_msi_compose_msg(dev, desc, base_msi, &msg);
 	if (ret < 0) {
 		return ret;
@@ -1428,7 +1428,7 @@ int xlp_setup_msix_irq(struct pci_dev *dev, struct msi_desc *desc, int nvec)
 	if (idx == XLP_MSIX_PER_SLOT) {
 		return -ENOSPC;
 	}
-	set_irq_msi(base_msix + idx, desc);
+	irq_set_msi_desc(base_msix + idx, desc);
 	ret = xlp_msi_compose_msg(dev, desc, base_msix + idx, &msg);
 	if (ret < 0) {
 		return ret;
@@ -1475,14 +1475,14 @@ void __init init_nlm_common_irqs(void)
 	int i;
 
 	for (i = 0; i < XLP_IRQ_MAX; i++) {	// IRQ : 0 - 167
-		set_irq_chip(i, &nlm_irq_pic);
+		irq_set_chip(i, &nlm_irq_pic);
 	}
 #ifdef CONFIG_PCI_MSI_XLP
 	for (i = XLP_MSI_INDEX_START; i <= XLP_MSI_INDEX_END; i++) {
-		set_irq_chip(i, &nlm_msi_pic);
+		irq_set_chip(i, &nlm_msi_pic);
 	}
 	for (i = XLP_MSIX_INDEX_START; i <= XLP_MSIX_INDEX_END; i++) {
-		set_irq_chip(i, &nlm_msix_pic);
+		irq_set_chip(i, &nlm_msix_pic);
 	}
 #endif
 
-- 
1.7.0.4

