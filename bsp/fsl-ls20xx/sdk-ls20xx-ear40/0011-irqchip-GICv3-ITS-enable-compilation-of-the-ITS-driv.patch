From 45cc42ec11d35bd219b29ddec88b00cc7cb24267 Mon Sep 17 00:00:00 2001
From: Marc Zyngier <marc.zyngier@arm.com>
Date: Mon, 24 Nov 2014 14:35:19 +0000
Subject: [PATCH 11/19] irqchip: GICv3: ITS: enable compilation of the ITS
 driver

commit 1981272912c211d668c0f62ffee4f5acc55c3bdd upstream

Get the show on the road...

Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
Link: https://lkml.kernel.org/r/1416839720-18400-13-git-send-email-marc.zyngier@arm.com
Signed-off-by: Jason Cooper <jason@lakedaemon.net>
[irq-gic files are different from mainline, so this patch
 is not same as upstream.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm64/Kconfig      | 2 +-
 drivers/irqchip/Kconfig | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/Kconfig b/arch/arm64/Kconfig
index a4a366f..96bc1b4 100644
--- a/arch/arm64/Kconfig
+++ b/arch/arm64/Kconfig
@@ -11,7 +11,7 @@ config ARM64
 	select ARM_ARCH_TIMER
 	select ARM_GIC
 	select ARM_GIC_V3
-	select ARM_GIC_V3_ITS
+	select ARM_GIC_V3_ITS if PCI_MSI
 	select AUDIT_ARCH_COMPAT_GENERIC
 	select BUILDTIME_EXTABLE_SORT
 	select CLONE_BACKWARDS
diff --git a/drivers/irqchip/Kconfig b/drivers/irqchip/Kconfig
index 23b32e1..0514a5a 100644
--- a/drivers/irqchip/Kconfig
+++ b/drivers/irqchip/Kconfig
@@ -18,6 +18,7 @@ config ARM_GIC_V3
 
 config ARM_GIC_V3_ITS
 	bool
+	select PCI_MSI_IRQ_DOMAIN
 
 config ARM_NVIC
 	bool
-- 
1.9.1

