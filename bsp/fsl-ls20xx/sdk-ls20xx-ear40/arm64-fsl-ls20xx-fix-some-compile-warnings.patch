From 767bc9cf6d1da79cce437f520bca8ac5bee532c3 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Fri, 24 Jul 2015 12:00:17 +0800
Subject: [PATCH] arm64: fsl-ls20xx: fix some compile warnings

Fix some compile warnings.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/irqchip/irq-gic-v3-its.c    |   28 ----------------------------
 drivers/pci/host/pcie-designware.c  |    5 ++++-
 drivers/staging/fsl-dpaa2/evb/evb.c |    4 ++--
 3 files changed, 6 insertions(+), 31 deletions(-)

diff --git a/drivers/irqchip/irq-gic-v3-its.c b/drivers/irqchip/irq-gic-v3-its.c
index 60979ee..587c64f 100644
--- a/drivers/irqchip/irq-gic-v3-its.c
+++ b/drivers/irqchip/irq-gic-v3-its.c
@@ -668,8 +668,6 @@ static struct irq_chip its_msi_irq_chip = {
 	.irq_write_msi_msg	= pci_msi_domain_write_msg,
 };
 
-static struct irq_domain *lpi_domain;
-
 /*
  * How we allocate LPIs:
  *
@@ -1300,35 +1298,9 @@ static const struct irq_domain_ops its_domain_ops = {
 	.deactivate		= its_irq_domain_deactivate,
 };
 
-static struct its_lpi_chunk *its_find_chunk(struct its_device *its_dev,
-					    struct irq_data *d)
-{
-	struct its_lpi_chunk *chunk;
-
-	list_for_each_entry(chunk, &its_dev->hwirq_list, entry) {
-		if (d->hwirq >= chunk->lpi_base &&
-		    (chunk->lpi_base + IRQS_PER_CHUNK) > d->hwirq)
-			return chunk;
-	}
-
-	return NULL;
-}
-
 /* FIXME: Use proper API once it is available in the kernel... */
 #define PCI_REQUESTER_ID(dev)	((pci_domain_nr(dev->bus) << 16) | ((dev)->bus->number << 8) | (dev)->devfn)
 
-static int its_msi_get_vec_count(struct pci_dev *pdev, struct msi_desc *desc)
-{
-#ifdef CONFIG_PCI_MSI
-	if (desc->msi_attrib.is_msix)
-		return pci_msix_vec_count(pdev);
-	else
-		return pci_msi_vec_count(pdev);
-#else
-	return -EINVAL;
-#endif
-}
-
 static int its_probe(struct device_node *node, struct irq_domain *parent)
 {
 	struct resource res;
diff --git a/drivers/pci/host/pcie-designware.c b/drivers/pci/host/pcie-designware.c
index c6068ea..208c8c5 100644
--- a/drivers/pci/host/pcie-designware.c
+++ b/drivers/pci/host/pcie-designware.c
@@ -357,7 +357,10 @@ int __init dw_pcie_host_init(struct pcie_port *pp)
 	struct resource *cfg_res;
 	u32 num_atus = 2, val, na, ns;
 	const __be32 *addrp;
-	int i, index, ret;
+#ifndef CONFIG_ARCH_FSL_LS2085A
+	int i;
+#endif
+	int index, ret;
 
 	/* Find the address cell size and the number of cells in order to get
 	 * the untranslated address.
diff --git a/drivers/staging/fsl-dpaa2/evb/evb.c b/drivers/staging/fsl-dpaa2/evb/evb.c
index b868e7b..a87b90d 100644
--- a/drivers/staging/fsl-dpaa2/evb/evb.c
+++ b/drivers/staging/fsl-dpaa2/evb/evb.c
@@ -599,8 +599,8 @@ error:
 static const struct net_device_ops evb_port_ops = {
 	.ndo_start_xmit		= &evb_dropframe,
 
-	.ndo_fdb_add		= &evb_port_fdb_add,
-	.ndo_fdb_del		= &evb_port_fdb_del,
+	.ndo_fdb_add		= evb_port_fdb_add,
+	.ndo_fdb_del		= evb_port_fdb_del,
 
 	.ndo_get_stats64	= &evb_port_get_stats,
 };
-- 
1.7.5.4

