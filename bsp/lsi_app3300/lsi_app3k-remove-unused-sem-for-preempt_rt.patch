From 5af8db7b4938e53010acd61323a40df4d115900b Mon Sep 17 00:00:00 2001
From: Tonyliu <Bo.Liu@windriver.com>
Date: Wed, 28 Jul 2010 16:53:41 +0800
Subject: [PATCH 2/2] lsi_app3k: remove unused sem for preempt_rt

All the 3 sems are unused in eth driver, it's OK for standard kernel.
But semaphore definition in preempt_rt is changed, remove them to
fix build error.

Signed-off-by: Tonyliu <Bo.Liu@windriver.com>
---
 drivers/net/arm/appnic.c |    7 -------
 drivers/net/arm/appnic.h |    8 --------
 2 files changed, 0 insertions(+), 15 deletions(-)

diff --git a/drivers/net/arm/appnic.c b/drivers/net/arm/appnic.c
index 4c12618..a1366fc 100644
--- a/drivers/net/arm/appnic.c
+++ b/drivers/net/arm/appnic.c
@@ -1803,13 +1803,6 @@ int appnic_setup(struct net_device *device)
 	spin_lock_init(&dev->extra_lock);
 
 	/*
-	 * Initialize the semaphores
-	 */
-	init_MUTEX(&dev->rx_sem);
-	init_MUTEX(&dev->tx_sem);
-	init_MUTEX(&dev->poll_sem);
-
-	/*
 	 *  Take MAC out of reset
 	 */
 	__raw_writel(0x0, APPNIC_RX_SOFT_RESET);
diff --git a/drivers/net/arm/appnic.h b/drivers/net/arm/appnic.h
index 2ded0ec..4f57995 100644
--- a/drivers/net/arm/appnic.h
+++ b/drivers/net/arm/appnic.h
@@ -607,14 +607,6 @@ struct appnic_device_t {
 	 */
 	spinlock_t lock;
 	spinlock_t extra_lock;
-
-	/*
-	 * TEMP: semaphores for locking Tx/Rx operations
-	 */
-	struct semaphore tx_sem;
-	struct semaphore rx_sem;
-	struct semaphore poll_sem;
-
 };
 
 
-- 
1.6.5.2

