From 11139374c0adcc2523d98fa8b43552714e50bc7a Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Wed, 14 May 2014 15:00:43 +0800
Subject: [PATCH 12/13] ARM: plat-iproc: use __cpuc_flush_dcache_area() to
 flush data cache.

clean_dcache_area() is defined as cpu_v7_dcache_clean_area in armv7 and
this function does nothing on SMP.

Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/arm/plat-iproc/platsmp.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-iproc/platsmp.c b/arch/arm/plat-iproc/platsmp.c
index 47d7441..66ee137 100644
--- a/arch/arm/plat-iproc/platsmp.c
+++ b/arch/arm/plat-iproc/platsmp.c
@@ -153,7 +153,7 @@ static int __cpuinit iproc_boot_secondary(unsigned int cpu, struct task_struct *
 	 * "cpu" is Linux's internal ID.
 	 */
 	pen_release = cpu;
-	clean_dcache_area( (void *) &pen_release, sizeof(pen_release));
+	__cpuc_flush_dcache_area( (void *) &pen_release, sizeof(pen_release));
 	outer_clean_range(__pa(&pen_release),
 			  __pa(&pen_release + sizeof(pen_release)));
 	// flush_cache_all();
@@ -173,7 +173,7 @@ static int __cpuinit iproc_boot_secondary(unsigned int cpu, struct task_struct *
 			break;
 
         	udelay(10);
-		clean_dcache_area( (void *) &pen_release, sizeof(pen_release));
+		__cpuc_flush_dcache_area( (void *) &pen_release, sizeof(pen_release));
 	}
 
 	/*
-- 
1.7.5.4

