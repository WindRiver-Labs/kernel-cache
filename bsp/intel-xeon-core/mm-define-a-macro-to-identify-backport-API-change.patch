From 1f58be697ec7d06ebe65fd752b435d19e73d6dac Mon Sep 17 00:00:00 2001
From: Xin Ouyang <xin.ouyang@windriver.com>
Date: Wed, 19 Jun 2013 15:25:58 +0800
Subject: [PATCH] mm: define a macro to identify backport API change

We have backport a 3.5+ upstream commit
f56f821feb7b36223f309e0ec05986bb137ce418 "mm: extend prefault helpers
to fault in more than PAGE_SIZE" to wrlinux kernel. This would cause
build failures because compat-wireless has redefined some struct for
3.4- kernels.

Define a new macro FAULT_IN_MULTIPAGES_RW_ABLE to identify the API change,
so compat-wireless could test on it, to avoid failures.

Signed-off-by: Xin Ouyang <xin.ouyang@windriver.com>
---
 include/linux/pagemap.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/pagemap.h b/include/linux/pagemap.h
index c93a9a9..e394195 100644
--- a/include/linux/pagemap.h
+++ b/include/linux/pagemap.h
@@ -399,6 +399,7 @@ extern void end_page_writeback(struct page *page);
  */
 extern void add_page_wait_queue(struct page *page, wait_queue_t *waiter);
 
+#define FAULT_IN_MULTIPAGES_RW_ABLE	1
 /*
  * Fault a userspace page into pagetables.  Return non-zero on a fault.
  *
-- 
1.7.5.4

