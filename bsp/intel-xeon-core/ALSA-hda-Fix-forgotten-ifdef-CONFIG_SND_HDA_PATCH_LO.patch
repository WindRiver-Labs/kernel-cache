From 59a24118e56fd776917e5b6d44ab355dd345b18a Mon Sep 17 00:00:00 2001
From: Takashi Iwai <tiwai@suse.de>
Date: Thu, 9 Aug 2012 17:40:46 +0200
Subject: [PATCH 098/129] ALSA: hda - Fix forgotten ifdef
 CONFIG_SND_HDA_PATCH_LOADER

upstream: 97c6a3d17b978092d0df94d5d68dbfc7c74f0902

The firmware callback must be protected by that ifdef.

Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: fupan li <fupan.li@windriver.com>
---
 sound/pci/hda/hda_intel.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/sound/pci/hda/hda_intel.c b/sound/pci/hda/hda_intel.c
index 82b6729..c10fb18 100644
--- a/sound/pci/hda/hda_intel.c
+++ b/sound/pci/hda/hda_intel.c
@@ -3191,6 +3191,7 @@ static void power_down_all_codecs(struct azx *chip)
 #endif
 }
 
+#ifdef CONFIG_SND_HDA_PATCH_LOADER
 /* callback from request_firmware_nowait() */
 static void azx_firmware_cb(const struct firmware *fw, void *context)
 {
@@ -3215,6 +3216,7 @@ static void azx_firmware_cb(const struct firmware *fw, void *context)
 	snd_card_free(card);
 	pci_set_drvdata(pci, NULL);
 }
+#endif
 
 static int __devinit azx_probe(struct pci_dev *pci,
 			       const struct pci_device_id *pci_id)
-- 
1.7.5.4

