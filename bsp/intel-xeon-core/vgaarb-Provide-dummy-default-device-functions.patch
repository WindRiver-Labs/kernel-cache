From 3a56604776917c975ff7e360fcb5bf7a070e4d3d Mon Sep 17 00:00:00 2001
From: Matthew Garrett <mjg@redhat.com>
Date: Thu, 3 May 2012 09:29:01 +0100
Subject: [PATCH 087/129] vgaarb: Provide dummy default device functions

upstream: 6e079d53c116ed9b95d0cad16237e06d5a60b9c4

Add some stub functions for the case where CONFIG_VGA_ARB is disabled.

Signed-off-by: Matthew Garrett <mjg@redhat.com>
Signed-off-by: Dave Airlie <airlied@redhat.com>
Signed-off-by: fupan li <fupan.li@windriver.com>
---
 include/linux/vgaarb.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/include/linux/vgaarb.h b/include/linux/vgaarb.h
index 367ab18..0ee42d9 100644
--- a/include/linux/vgaarb.h
+++ b/include/linux/vgaarb.h
@@ -183,8 +183,13 @@ extern void vga_put(struct pci_dev *pdev, unsigned int rsrc);
  */
 
 #ifndef __ARCH_HAS_VGA_DEFAULT_DEVICE
+#ifdef CONFIG_VGA_ARB
 extern struct pci_dev *vga_default_device(void);
 extern void vga_set_default_device(struct pci_dev *pdev);
+#else
+static inline struct pci_dev *vga_default_device(void) { return NULL; };
+static inline void vga_set_default_device(struct pci_dev *pdev) { };
+#endif
 #endif
 
 /**
-- 
1.7.5.4

