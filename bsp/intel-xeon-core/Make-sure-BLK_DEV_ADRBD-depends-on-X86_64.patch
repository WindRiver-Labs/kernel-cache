From 0c6433db010d919925319ccd6ccea1c58a7f3a25 Mon Sep 17 00:00:00 2001
From: Yunguo Wei <yunguo.wei@windriver.com>
Date: Fri, 17 May 2013 13:11:30 +0800
Subject: [PATCH] Make sure BLK_DEV_ADRBD depends on X86_64

ADR only works with X86_64 right now. If BLK_DEV_ADRBD depends on X86 and is
configured as 'm' or 'y' in a 32 bit build, ADR will be selected as well. This
will conflict with ADR's dependency in arch/x86/Kconfig:

	config ADR
		bool "Support ADR protected memory"
		depends on X86_64

Signed-off-by: Yunguo Wei <yunguo.wei@windriver.com>
---
 drivers/block/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/block/Kconfig b/drivers/block/Kconfig
index 7cd845e..bd5aff7 100644
--- a/drivers/block/Kconfig
+++ b/drivers/block/Kconfig
@@ -557,7 +557,7 @@ config BLK_DEV_RBD
 
 config BLK_DEV_ADRBD
 	tristate "Battery Backed RAM disk (ADRBD)"
-	depends on X86 && EXPERIMENTAL && BLOCK
+	depends on X86_64 && EXPERIMENTAL && BLOCK
 	select ADR
 	default n
 	help
-- 
1.7.5.4

