From 72a1f826078af7addfc1529743f4fa724b8784a1 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 2 Jul 2018 21:44:40 +0800
Subject: [PATCH] irqchip: ls-scfg-msi: Enable the multi MSI support

In the current scfg msi controller's driver, there is already have the
function to alloc multi msi interrupts in one time. So explicitly set
the MSI_FLAG_MULTI_PCI_MSI flag for this driver to make sure that the
functions like pci_enable_msi_range() can work.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/irqchip/irq-ls-scfg-msi.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/irqchip/irq-ls-scfg-msi.c b/drivers/irqchip/irq-ls-scfg-msi.c
index ae661b9..964b01d1 100644
--- a/drivers/irqchip/irq-ls-scfg-msi.c
+++ b/drivers/irqchip/irq-ls-scfg-msi.c
@@ -231,7 +231,7 @@ static struct irq_chip ls_scfg_msi_irq_chip = {
 
 static struct msi_domain_info ls_scfg_pci_msi_domain_info = {
 	.flags	= (MSI_FLAG_USE_DEF_DOM_OPS | MSI_FLAG_USE_DEF_CHIP_OPS |
-		   MSI_FLAG_PCI_MSIX),
+		   MSI_FLAG_PCI_MSIX | MSI_FLAG_MULTI_PCI_MSI),
 	.chip	= &ls_scfg_msi_irq_chip,
 };
 
-- 
1.7.9.5

