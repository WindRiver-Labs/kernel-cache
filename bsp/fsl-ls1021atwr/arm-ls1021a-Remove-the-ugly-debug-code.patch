From be15654cbeec1ac44765c516e43563e3769bf81a Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 6 Aug 2018 18:59:04 +0800
Subject: [PATCH] arm: ls1021a: Remove the ugly debug code

Some codes in ls1_pm_init() seems pretty ugly because:
- The irq passed to the request_irq() should be virtual irq number
  instead of hardware irq.
- The hardware irq 195 may be not used by the PCIe device, such as
  on ls1021a-twr board, the 195 irq is routed to the SGMII phy.

These codes make no sense and should be for debugging purpose. So drop
them.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/mach-imx/pm-ls1.c |   11 -----------
 1 file changed, 11 deletions(-)

diff --git a/arch/arm/mach-imx/pm-ls1.c b/arch/arm/mach-imx/pm-ls1.c
index acd3fb2..0c77700 100644
--- a/arch/arm/mach-imx/pm-ls1.c
+++ b/arch/arm/mach-imx/pm-ls1.c
@@ -530,12 +530,6 @@ static const struct of_device_id rcpm_matches[] = {
 	{}
 };
 
-static irqreturn_t test_irq(int irq, void *dev_id)
-{
-	pr_warn("Handle wakeup irq..\n\n\n");
-	return IRQ_HANDLED;
-}
-
 static int __init ls1_pm_init(void)
 {
 	const struct of_device_id *match;
@@ -552,11 +546,6 @@ static int __init ls1_pm_init(void)
 	if (!base)
 		return -ENOMEM;
 
-	ret = request_irq(195, test_irq, IRQF_NO_SUSPEND | IRQF_TRIGGER_RISING,
-			  "e1000-wakeup", NULL);
-	if (ret)
-		pr_warn("register e1000-wakeup irq error, ret = %d\n", ret);
-
 	sleep_modes = (unsigned int)match->data;
 	ls1_pm_base.rcpm = base;
 	suspend_set_ops(&ls1_suspend_ops);
-- 
1.7.9.5

