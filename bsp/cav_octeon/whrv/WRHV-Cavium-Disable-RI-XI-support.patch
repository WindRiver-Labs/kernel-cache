From ff5ebba9d6475d87a540be0b43e382ef2da8cd4c Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 3 Dec 2010 20:59:49 +0800
Subject: [PATCH 14/30] WRHV: Cavium: Disable RI/XI support

Since Hypervisor doesn't support RI/XI bits, so disable RI/XI in
cpu feature header file.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 .../asm/mach-cavium-octeon/cpu-feature-overrides.h |    6 +++++-
 1 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h b/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
index da00ec4..bb37d51 100644
--- a/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
+++ b/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
@@ -70,7 +70,11 @@
 #define cpu_has_veic		0
 #define cpu_hwrena_impl_bits	0xc0000000
 
-#define kernel_uses_smartmips_rixi (cpu_data[0].cputype != CPU_CAVIUM_OCTEON)
+#ifdef CONFIG_WRHV
+#define kernel_uses_smartmips_rixi 0
+#else 
+#define kernel_uses_smartmips_rixi ((cpu_data[0].cputype != CPU_CAVIUM_OCTEON))
+#endif
 
 #define ARCH_HAS_READ_CURRENT_TIMER 1
 #define ARCH_HAS_IRQ_PER_CPU	1
-- 
1.6.5.2

