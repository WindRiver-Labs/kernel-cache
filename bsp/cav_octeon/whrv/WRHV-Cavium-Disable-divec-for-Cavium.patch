From c768b54db72cd1abc43f35110943381d9403e68a Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 25 Feb 2011 10:36:00 +0800
Subject: [PATCH 10/30] WRHV: Cavium: Disable divec for Cavium

Since Cavium GOS doesn't support divec, so disable it.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 .../asm/mach-cavium-octeon/cpu-feature-overrides.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h b/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
index fb70139..da00ec4 100644
--- a/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
+++ b/arch/mips/include/asm/mach-cavium-octeon/cpu-feature-overrides.h
@@ -25,7 +25,11 @@
 #define cpu_has_fpu		0
 #define cpu_has_counter		1
 #define cpu_has_watch		1
+#ifdef CONFIG_WRHV
+#define cpu_has_divec		0
+#else
 #define cpu_has_divec		1
+#endif
 #define cpu_has_vce		0
 #define cpu_has_cache_cdex_p	0
 #define cpu_has_cache_cdex_s	0
-- 
1.6.5.2

