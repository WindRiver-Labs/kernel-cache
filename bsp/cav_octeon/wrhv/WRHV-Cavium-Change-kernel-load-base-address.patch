From a6648d9394723371d2c10ddae949179171d277e1 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Thu, 25 Nov 2010 18:56:00 +0800
Subject: [PATCH 01/30] WRHV: Cavium: Change kernel load base address

Since the Hypervisor loads the Linux guest OS at KSSEG, we need to
change the Linux kernel load base address to align this.
And, GOS doesn't need leave too much space ahead of link address
for exception handling. So, just leave 1 page for CVMSEG emulation.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/mips/Makefile |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/mips/Makefile b/arch/mips/Makefile
index 9711580..aac5518 100644
--- a/arch/mips/Makefile
+++ b/arch/mips/Makefile
@@ -685,8 +685,12 @@ core-$(CONFIG_CPU_CAVIUM_OCTEON)	+= arch/mips/cavium-octeon/executive/
 ifdef CONFIG_CAVIUM_OCTEON_2ND_KERNEL
 load-$(CONFIG_CPU_CAVIUM_OCTEON)	+= 0xffffffff84100000
 else
+ifdef CONFIG_WRHV
+load-$(CONFIG_CPU_CAVIUM_OCTEON) 	+= 0xffffffffc0001000
+else
 load-$(CONFIG_CPU_CAVIUM_OCTEON) 	+= 0xffffffff81100000
 endif
+endif
 
 ifdef CONFIG_PHYSICAL_START
 load-y				= $(CONFIG_PHYSICAL_START)
-- 
1.6.5.2

