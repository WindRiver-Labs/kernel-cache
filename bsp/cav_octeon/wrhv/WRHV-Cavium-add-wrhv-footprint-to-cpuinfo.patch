From c7054068dd47cf1b4971bfc474d7befddbc26c83 Mon Sep 17 00:00:00 2001
From: Liang Li <liang.li@windriver.com>
Date: Wed, 23 Feb 2011 16:00:30 +0800
Subject: [PATCH 2/2] WRHV: Cavium: add 'wrhv' footprint to cpuinfo

wrload on GOS need this footprint to recognize running
within GOS

Signed-off-by: Liang Li <liang.li@windriver.com>
---
 arch/mips/kernel/vbi/wrhv.c |    7 ++++---
 1 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/arch/mips/kernel/vbi/wrhv.c b/arch/mips/kernel/vbi/wrhv.c
index 6495750..16939e2 100644
--- a/arch/mips/kernel/vbi/wrhv.c
+++ b/arch/mips/kernel/vbi/wrhv.c
@@ -480,6 +480,7 @@ static inline void cpu_probe_vmbits(struct cpuinfo_mips *c)
 #endif
 }
 
+#define WRHV_STRING "Wind River Hypervisor "
 static inline void cpu_probe_cavium(struct cpuinfo_mips *c, unsigned int cpu)
 {
 	switch (c->processor_id & 0xff00) {
@@ -487,21 +488,21 @@ static inline void cpu_probe_cavium(struct cpuinfo_mips *c, unsigned int cpu)
 	case PRID_IMP_CAVIUM_CN31XX:
 	case PRID_IMP_CAVIUM_CN30XX:
 		c->cputype = CPU_CAVIUM_OCTEON;
-		__cpu_name[cpu] = "Cavium Octeon";
+		__cpu_name[cpu] = WRHV_STRING"Cavium Octeon";
 		goto platform;
 	case PRID_IMP_CAVIUM_CN58XX:
 	case PRID_IMP_CAVIUM_CN56XX:
 	case PRID_IMP_CAVIUM_CN50XX:
 	case PRID_IMP_CAVIUM_CN52XX:
 		c->cputype = CPU_CAVIUM_OCTEON_PLUS;
-		__cpu_name[cpu] = "Cavium Octeon+";
+		__cpu_name[cpu] = WRHV_STRING"Cavium Octeon+";
 platform:
 		if (cpu == 0)
 			__elf_platform = "octeon";
 		break;
 	case PRID_IMP_CAVIUM_CN63XX:
 		c->cputype = CPU_CAVIUM_OCTEON2;
-		__cpu_name[cpu] = "Cavium Octeon II";
+		__cpu_name[cpu] = WRHV_STRING"Cavium Octeon II";
 		if (cpu == 0)
 			__elf_platform = "octeon2";
 		break;
-- 
1.6.5.2

