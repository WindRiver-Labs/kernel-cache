From 97beb1aaba55c223379826fdda89661bbcccd16f Mon Sep 17 00:00:00 2001
From: ltian <le.tian@windriver.com>
Date: Mon, 15 Nov 2010 14:51:09 +0800
Subject: [PATCH 118/132] MIPS: Octeon: Add OCTEON II fields for CvmMemCtl.

Source: Cavium SDK 2.0.0-366

Add OCTEON II fields (tlbnlu, pausetime, didtto2) to
union octeon_cvmemctl.

Signed-off-by: Chad Reese <kreese@caviumnetworks.com>
Signed-off-by: ltian <le.tian@windriver.com>
---
 arch/mips/include/asm/octeon/octeon.h |   18 +++++++++++++++++-
 1 files changed, 17 insertions(+), 1 deletions(-)

diff --git a/arch/mips/include/asm/octeon/octeon.h b/arch/mips/include/asm/octeon/octeon.h
index 801c308..5ccddfc 100644
--- a/arch/mips/include/asm/octeon/octeon.h
+++ b/arch/mips/include/asm/octeon/octeon.h
@@ -129,7 +129,23 @@ union octeon_cvmemctl {
 		/* RO 1 = BIST fail, 0 = BIST pass */
 		uint64_t wbfbist:1;
 		/* Reserved */
-		uint64_t reserved:22;
+		uint64_t reserved:17;
+		/* OCTEON II - TLB replacement policy: 0 = bitmask LRU; 1 = NLU.
+		 * This field selects between the TLB replacement policies:
+		 * bitmask LRU or NLU. Bitmask LRU maintains a mask of
+		 * recently used TLB entries and avoids them as new entries
+		 * are allocated. NLU simply guarantees that the next
+		 * allocation is not the last used TLB entry. */
+		uint64_t tlbnlu:1;
+		/* OCTEON II - Selects the bit in the counter used for releasing
+		 * a PAUSE. This counter trips every 2(8+PAUSETIME) cycles. If
+		 * not already released, the cnMIPS II core will always release
+		 * a given PAUSE instruction within 2(8+PAUSETIME). If the
+		 * counter trip happens to line up, the cnMIPS II core may
+		 * release the PAUSE instantly. */
+		uint64_t pausetime:3;
+		/* OCTEON II - This field is an extension of CvmMemCtl[DIDTTO] */
+		uint64_t didtto2:1;
 		/* R/W If set, marked write-buffer entries time out
 		 * the same as as other entries; if clear, marked
 		 * write-buffer entries use the maximum timeout. */
-- 
1.6.5.2

