From 0068ba49e7dbc7f16d5f0ee4b567d25c33effec9 Mon Sep 17 00:00:00 2001
From: Jiaxi Liu <jiaxi.liu@windriver.com>
Date: Thu, 18 Nov 2010 10:12:57 +0800
Subject: [PATCH] Fix can't automatically update config file

While modify 'gpl-executive/config/executive-config.h', It can't
automatically update config file 'gpl-executive/config/cvmx-config.h',
so the kernel has any problem like network device can't work.

Fix it by modify the 'gpl-executive/Makefile'.

Signed-off-by: Jiaxi Liu <jiaxi.liu@windriver.com>
---
 arch/mips/cavium-octeon/gpl-executive/Makefile |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/gpl-executive/Makefile b/arch/mips/cavium-octeon/gpl-executive/Makefile
index e2fc0b6..97e105d 100644
--- a/arch/mips/cavium-octeon/gpl-executive/Makefile
+++ b/arch/mips/cavium-octeon/gpl-executive/Makefile
@@ -22,7 +22,7 @@ EXTRA_CFLAGS += ${CAVIUM_INCLUDES}
 
 source:=$(srctree)/$(src)
 
-EXTRA_CFLAGS += -I $(obj)/config -I $(source)/config
+EXTRA_CFLAGS += -I $(source)/config
 
 executive-files := cvmx-bootmem.o
 executive-files += cvmx-cmd-queue.o
@@ -71,9 +71,9 @@ $(executive-src-files):
 		ln -fs $(@:$(obj)/%.c=${OCTEON_ROOT_IN_KERNEL}/executive/%.c) $@ ; \
 	fi;
 
-$(obj)/config/cvmx-config.h: $(source)/config/executive-config.h
+$(source)/config/cvmx-config.h: $(source)/config/executive-config.h
 	if [ -d ${OCTEON_ROOT} ] ; then \
-		cd $(obj) && ${OCTEON_ROOT}/host/bin/cvmx-config $< ; \
+		cd $(source) && ${OCTEON_ROOT}/host/bin/cvmx-config $< ; \
 	fi;
 
 clean:
-- 
1.7.0.4

