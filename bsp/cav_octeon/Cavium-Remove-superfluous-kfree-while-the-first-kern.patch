From 721a076869e51005375ccc5e4d3b4d0f982fab79 Mon Sep 17 00:00:00 2001
From: Tian Le <le.tian@windriver.com>
Date: Thu, 10 Mar 2011 16:23:59 +0800
Subject: [PATCH] Cavium: Remove superfluous kfree() while the first kernel crashed in KDUMP

While removing USB in KDUMP, kfree() is releasing a block of memory
that is managed by the first kernel only, and should have nothing
to do with the second kernel. So deleting it for a faster KDUMP.

Signed-off-by: Tian Le <le.tian@windriver.com>
---
 drivers/usb/host/octeon-hcd.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/host/octeon-hcd.c b/drivers/usb/host/octeon-hcd.c
index 7acdb9a..5ec81f8 100644
--- a/drivers/usb/host/octeon-hcd.c
+++ b/drivers/usb/host/octeon-hcd.c
@@ -679,8 +679,6 @@ static int octeon_usb_driver_remove(struct device *dev)
 	if (status)
 		DEBUG_FATAL("OcteonUSB: USB shutdown failed with %d\n", status);
 
-	kfree(hcd);
-
 	return 0;
 }
 
-- 
1.7.0.4

