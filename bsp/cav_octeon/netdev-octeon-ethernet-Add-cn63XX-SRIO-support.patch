From 5d95a13919a2ee7dce07491dd442d59c5969cb35 Mon Sep 17 00:00:00 2001
From: ltian <le.tian@windriver.com>
Date: Fri, 12 Nov 2010 17:24:53 +0800
Subject: [PATCH 054/132] netdev: octeon-ethernet: Add cn63XX SRIO support.

Add/Update network header files to add definitions for Octeon II
network driver.

Signed-off-by: David Daney <ddaney@caviumnetworks.com>
Signed-off-by: ltian <le.tian@windriver.com>
---
 .../include/asm/octeon/octeon-ethernet-ioctl.h     |   60 ++++++++++++++++++++
 drivers/net/octeon/octeon-ethernet.h               |    6 ++
 2 files changed, 66 insertions(+), 0 deletions(-)
 create mode 100644 arch/mips/include/asm/octeon/octeon-ethernet-ioctl.h

diff --git a/arch/mips/include/asm/octeon/octeon-ethernet-ioctl.h b/arch/mips/include/asm/octeon/octeon-ethernet-ioctl.h
new file mode 100644
index 0000000..735dea6
--- /dev/null
+++ b/arch/mips/include/asm/octeon/octeon-ethernet-ioctl.h
@@ -0,0 +1,60 @@
+/*************************************************************************
+*
+* Author: Cavium Networks info@caviumnetworks.com
+*
+* Copyright (c) 2010  Cavium Networks (support@cavium.com). All rights
+* reserved.
+*
+* Redistribution and use in source and binary forms, with or without
+* modification, are permitted provided that the following conditions are
+* met:
+*
+*     * Redistributions of source code must retain the above copyright
+*       notice, this list of conditions and the following disclaimer.
+*
+*     * Redistributions in binary form must reproduce the above
+*       copyright notice, this list of conditions and the following
+*       disclaimer in the documentation and/or other materials provided
+*       with the distribution.
+*
+*     * Neither the name of Cavium Networks nor the names of
+*       its contributors may be used to endorse or promote products
+*       derived from this software without specific prior written
+*       permission.
+*
+* TO THE MAXIMUM EXTENT PERMITTED BY LAW, THE SOFTWARE IS PROVIDED "AS IS"
+* AND WITH ALL FAULTS AND CAVIUM NETWORKS MAKES NO PROMISES, REPRESENTATIONS
+* OR WARRANTIES, EITHER EXPRESS, IMPLIED, STATUTORY, OR OTHERWISE, WITH
+* RESPECT TO THE SOFTWARE, INCLUDING ITS CONDITION, ITS CONFORMITY TO ANY
+* REPRESENTATION OR DESCRIPTION, OR THE EXISTENCE OF ANY LATENT OR PATENT
+* DEFECTS, AND CAVIUM SPECIFICALLY DISCLAIMS ALL IMPLIED (IF ANY) WARRANTIES
+* OF TITLE, MERCHANTABILITY, NONINFRINGEMENT, FITNESS FOR A PARTICULAR
+* PURPOSE, LACK OF VIRUSES, ACCURACY OR COMPLETENESS, QUIET ENJOYMENT, QUIET
+* POSSESSION OR CORRESPONDENCE TO DESCRIPTION.  THE ENTIRE RISK ARISING OUT
+* OF USE OR PERFORMANCE OF THE SOFTWARE LIES WITH YOU.
+*************************************************************************/
+
+/*
+ * Device specific IOCTL interface for the Cavium Octeon ethernet driver.
+ *
+ */
+#ifndef CAVIUM_ETHERNET_IOCTL_H
+#define CAVIUM_ETHERNET_IOCTL_H
+
+/*
+ * Each of these IOCTLs use the field "ifr_ifru.ifru_ivalue" inside
+ * "struct ifreq" to move data. When calling these IOCTLS, supply a
+ * "struct ifreq" as the third parameter. The second parameter will be
+ * one of the IOCTL numbers defined below.
+ */
+
+#define CAVIUM_NET_IOCTL_SETPRIO   (SIOCDEVPRIVATE + 0) /* Priority 0-3. Default is 0 */
+#define CAVIUM_NET_IOCTL_GETPRIO   (SIOCDEVPRIVATE + 1) /* Priority 0-3 */
+#define CAVIUM_NET_IOCTL_SETIDSIZE (SIOCDEVPRIVATE + 2) /* 0 = 8 bit, 1 = 16 bit IDs. Default is 1 */
+#define CAVIUM_NET_IOCTL_GETIDSIZE (SIOCDEVPRIVATE + 3) /* 0 = 8 bit, 1 = 16 bit IDs */
+#define CAVIUM_NET_IOCTL_SETSRCID  (SIOCDEVPRIVATE + 4) /* 0 = primary ID, 1 = secondary ID. Default is 0 */
+#define CAVIUM_NET_IOCTL_GETSRCID  (SIOCDEVPRIVATE + 5) /* 0 = primary ID, 1 = secondary ID */
+#define CAVIUM_NET_IOCTL_SETLETTER (SIOCDEVPRIVATE + 6) /* Letter code 0-3, or -1 for auto. Default is -1 */
+#define CAVIUM_NET_IOCTL_GETLETTER (SIOCDEVPRIVATE + 7) /* Letter code 0-3, or -1 for auto */
+
+#endif
diff --git a/drivers/net/octeon/octeon-ethernet.h b/drivers/net/octeon/octeon-ethernet.h
index 4dfa0fb..9d6a2b1 100644
--- a/drivers/net/octeon/octeon-ethernet.h
+++ b/drivers/net/octeon/octeon-ethernet.h
@@ -115,6 +115,12 @@ extern int cvm_oct_srio_set_mac_address(struct net_device *dev, void *addr);
 extern int cvm_oct_srio_change_mtu(struct net_device *dev, int new_mtu);
 extern struct net_device_stats *cvm_oct_srio_get_stats(struct net_device *dev);
 
+extern int cvm_oct_srio_init(struct net_device *dev);
+extern int cvm_oct_xmit_srio(struct sk_buff *skb, struct net_device *dev);
+extern int cvm_oct_srio_set_mac_address(struct net_device *dev, void *addr);
+extern int cvm_oct_srio_change_mtu(struct net_device *dev, int new_mtu);
+extern struct net_device_stats *cvm_oct_srio_get_stats(struct net_device *dev);
+
 extern int cvm_oct_common_init(struct net_device *dev);
 extern void cvm_oct_common_uninit(struct net_device *dev);
 
-- 
1.6.5.2

