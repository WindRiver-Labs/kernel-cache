From 7d3f737e30f7908c10a0501e3092869587f4cc93 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 25 Feb 2011 10:41:26 +0800
Subject: [PATCH 27/38] WRHV: MIPS: Always return 1 for clockevent init

For MIPS GOS, clockevent device is virtual and GOS gets clockevent
from Hypervisor, so force clockevent_init return 1 for MIPS GOS.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/mips/include/asm/time.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/mips/include/asm/time.h b/arch/mips/include/asm/time.h
index c7f1bfe..d8eebba 100644
--- a/arch/mips/include/asm/time.h
+++ b/arch/mips/include/asm/time.h
@@ -61,6 +61,8 @@ static inline int mips_clockevent_init(void)
 	extern int smtc_clockevent_init(void);
 
 	return smtc_clockevent_init();
+#elif defined(CONFIG_WRHV)
+	return 1;
 #elif defined(CONFIG_CEVT_R4K)
 	return r4k_clockevent_init();
 #else
-- 
1.6.5.2

