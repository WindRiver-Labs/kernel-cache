From e6b3fcd1b44fc20aab1a6872052da55b0f6dd9d3 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Thu, 3 Mar 2011 10:31:58 +0800
Subject: [PATCH 01/38] WRHV: VBI: Update common VBI from HYP 1.3

Add common VBI support update from HYP 1.3.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 include/vbi/vbi.h |    1 +
 kernel/vbi/lib.c  |    2 ++
 2 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/include/vbi/vbi.h b/include/vbi/vbi.h
index 9f88d9e..e7e1d57 100644
--- a/include/vbi/vbi.h
+++ b/include/vbi/vbi.h
@@ -543,6 +543,7 @@ struct vbi_clk_hook
 extern struct vb_config *wr_vb_config;
 extern struct vb_status *wr_vb_status;
 extern struct vb_control *wr_vb_control;
+extern int32_t vb_int_nested; /* wrhvVbIntNested */
 extern void vbi_init(struct vb_config *config);
 extern void vbi_exc_stub(void);
 extern void ASSERT_FN(const char *, const char *, int);
diff --git a/kernel/vbi/lib.c b/kernel/vbi/lib.c
index 8be50d1..60ce0c8 100644
--- a/kernel/vbi/lib.c
+++ b/kernel/vbi/lib.c
@@ -116,6 +116,8 @@ struct vb_status *wr_vb_status;	/* The address of the core's Status area */
 EXPORT_SYMBOL(wr_vb_control);
 EXPORT_SYMBOL(wr_vb_status);
 
+int32_t wr_irq_nested; /* Used by VBI interrupt/exception management */
+ 
 /*
  * vbi_init - Initialize support for vbi library functions
  *
-- 
1.7.0.4

