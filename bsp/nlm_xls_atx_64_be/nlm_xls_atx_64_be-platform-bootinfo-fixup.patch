From d01f50331ac1350ca0309c5692f2474196ebb173 Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Wed, 19 May 2010 23:57:28 +0800
Subject: [PATCH 15/38] nlm_xls_atx_64_be: platform bootinfo fixup

boot_mem_map structure need a modification in order to consistent with RMI's
bootloader. Because kernel get boot_mem_map data from bootloader by a pointer.

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/include/asm/bootinfo.h |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/arch/mips/include/asm/bootinfo.h b/arch/mips/include/asm/bootinfo.h
index 09eee09..0c59957 100644
--- a/arch/mips/include/asm/bootinfo.h
+++ b/arch/mips/include/asm/bootinfo.h
@@ -90,7 +90,15 @@ struct boot_mem_map {
 	struct boot_mem_map_entry {
 		phys_t addr;	/* start of memory segment */
 		phys_t size;	/* size of memory segment */
+/*
+ * kernel get boot_mem_map from bootloader, so data structure
+ * need to consistent with bootloader.
+ */
+#ifdef CONFIG_RMI_PHOENIX
+		uint32_t type;		/* type of memory segment */
+#else
 		long type;		/* type of memory segment */
+#endif
 	} map[BOOT_MEM_MAP_MAX];
 };
 
@@ -119,4 +127,10 @@ extern unsigned long fw_arg0, fw_arg1, fw_arg2, fw_arg3;
  */
 extern void plat_mem_setup(void);
 
+#define MAX_EXCLUDE 16
+struct boot_mem_map_exclude_region {
+	uint64_t start;
+	uint64_t end;
+};
+
 #endif /* _ASM_BOOTINFO_H */
-- 
1.6.5.2

