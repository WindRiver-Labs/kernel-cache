From 08b78ccf4fbcaa78e89e86c6c22d55c1bcec13d0 Mon Sep 17 00:00:00 2001
From: Catalin Enache <catalin.enache@windriver.com>
Date: Thu, 6 Feb 2014 21:05:11 +0200
Subject: [PATCH 66/66] WP7: fix WM8940 playback issue

Signed-off-by: Catalin Enache <catalin.enache@windriver.com>
---
 arch/arm/mach-msm/board-9615-gpiomux.c |    4 ++++
 arch/arm/mach-msm/clock-9615.c         |   14 ++++++++++++++
 2 files changed, 18 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-msm/board-9615-gpiomux.c b/arch/arm/mach-msm/board-9615-gpiomux.c
index 8943485..00b4e88 100644
--- a/arch/arm/mach-msm/board-9615-gpiomux.c
+++ b/arch/arm/mach-msm/board-9615-gpiomux.c
@@ -319,6 +319,8 @@ struct msm_gpiomux_config msm9615_gsbi_configs[] __initdata = {
         },
     },
 #else /* CONFIG_SIERRA_AR7 */
+/* SWISTART */
+#if 0
 	{
 		/* GPIO 19 can be used for I2C/UART on GSBI5 */
 		.gpio      = 19,	/* GSBI3 QUP SPI_CS_1 */
@@ -326,6 +328,8 @@ struct msm_gpiomux_config msm9615_gsbi_configs[] __initdata = {
 			[GPIOMUX_SUSPENDED] = &gsbi3_cs1_config,
 		},
 	},
+#endif
+/* SWISTOP */
 #endif /* CONFIG_SIERRA_AR7 */
 };
 
diff --git a/arch/arm/mach-msm/clock-9615.c b/arch/arm/mach-msm/clock-9615.c
index afb14aa..175cf97 100644
--- a/arch/arm/mach-msm/clock-9615.c
+++ b/arch/arm/mach-msm/clock-9615.c
@@ -1701,16 +1701,30 @@ static struct clk_lookup msm_clocks_9615[] = {
 			   "msm-dai-q6.0"),
 	CLK_LOOKUP("bit_clk",		spare_i2s_mic_bit_clk.c,
 			   "msm-dai-q6.5"),
+/* SWISTART */
+#if defined(CONFIG_SIERRA)
+	CLK_LOOKUP("osr_clk",		codec_i2s_mic_osr_clk.c,
+			   "msm-dai-q6.5"),
+#else
 	CLK_LOOKUP("osr_clk",		spare_i2s_mic_osr_clk.c,
 			   "msm-dai-q6.5"),
+#endif
+/* SWISTOP */
 	CLK_LOOKUP("bit_clk",		codec_i2s_spkr_bit_clk.c,
 			   "msm-dai-q6.16384"),
 	CLK_LOOKUP("osr_clk",		codec_i2s_spkr_osr_clk.c,
 			   "msm-dai-q6.16384"),
 	CLK_LOOKUP("bit_clk",		spare_i2s_spkr_bit_clk.c,
 			   "msm-dai-q6.4"),
+/* SWISTART */
+#if defined(CONFIG_SIERRA)
+	CLK_LOOKUP("osr_clk",		codec_i2s_spkr_osr_clk.c,
+			   "msm-dai-q6.4"),
+#else
 	CLK_LOOKUP("osr_clk",		spare_i2s_spkr_osr_clk.c,
 			   "msm-dai-q6.4"),
+#endif
+/* SWISTOP */
 	CLK_LOOKUP("pcm_clk",		pcm_clk.c,	"msm-dai-q6.2"),
 	CLK_LOOKUP("pcm_clk",		pcm_clk.c,	"msm-dai-q6.3"),
 	CLK_LOOKUP("sec_pcm_clk",	sec_pcm_clk.c,	"msm-dai-q6.12"),
-- 
1.7.5.4

