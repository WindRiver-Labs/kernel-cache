From b2a3826a786158735018fa03219f2f707dd47c88 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 24 Jun 2013 16:33:51 +0800
Subject: [PATCH] powerpc/mm: revert the change for _PAGE_EXEC introduced by
 GRSecurity patch

In the patch (GRSecurity 2.9.1 -- 201207080925) the definition of
_PAGE_EXEC is changed to _PAGE_GUARDED for the 6xx platforms. But
this is not right. On the 6xx, the _PAGE_EXEC has nothing to do with
the _PAGE_GUARDED. And actually we don't support the execute permission
check on these platforms. So restore this change.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/include/asm/pte-hash32.h |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/include/asm/pte-hash32.h b/arch/powerpc/include/asm/pte-hash32.h
index 85d86bf..4aad413 100644
--- a/arch/powerpc/include/asm/pte-hash32.h
+++ b/arch/powerpc/include/asm/pte-hash32.h
@@ -21,7 +21,6 @@
 #define _PAGE_FILE	0x004	/* when !present: nonlinear file mapping */
 #define _PAGE_USER	0x004	/* usermode access allowed */
 #define _PAGE_GUARDED	0x008	/* G: prohibit speculative access */
-#define _PAGE_EXEC	_PAGE_GUARDED
 #define _PAGE_COHERENT	0x010	/* M: enforce memory coherence (SMP systems) */
 #define _PAGE_NO_CACHE	0x020	/* I: cache inhibit */
 #define _PAGE_WRITETHRU	0x040	/* W: cache write-through */
-- 
1.7.5.4

