From 82050467fea0709b8b6f789de1054b06eaa44d22 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Thu, 11 Dec 2008 14:08:36 +0800
Subject: [PATCH] Update dts of fsl_mpc8313e_rdb

1). Supply correct patitions on NOR flash.
2). Support PIT.
3). Support Sensor.
4). Remove the redundant dma dts content.

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/boot/dts/mpc8313erdb.dts |   82 ++++++++++++++------------------
 1 files changed, 36 insertions(+), 46 deletions(-)

diff --git a/arch/powerpc/boot/dts/mpc8313erdb.dts b/arch/powerpc/boot/dts/mpc8313erdb.dts
index 2a94ae0..684747b 100644
--- a/arch/powerpc/boot/dts/mpc8313erdb.dts
+++ b/arch/powerpc/boot/dts/mpc8313erdb.dts
@@ -70,6 +70,29 @@
 			reg = <0x0 0x0 0x800000>;
 			bank-width = <2>;
 			device-width = <1>;
+			
+			u-boot@0 {
+				reg = <0x0 0x100000>;
+				read-only;
+			};
+
+			kernel@100000 {
+				reg = <0x100000 0x200000>;
+			};
+
+			fs@300000 {
+				reg = <0x300000 0x400000>;
+			};
+
+			dtb@700000 {
+				reg = <0x700000 0x10000>;
+				read-only;
+			};
+
+			Reserved@710000 {
+				reg = <0x710000 0xe0000>;
+				read-only;
+			};
 		};
 
 		nand@1,0 {
@@ -116,6 +139,15 @@
 			sleep = <&pmc 0x03000000>;
 			ranges;
 
+			pit@400 {
+				device_type = "pit";
+				compatible = "mpc_pit";
+				reg = <0x400 0x100>;
+				interrupts = <65 0x8>;
+				interrupt-parent = < &ipic >;
+				clock-frequency = <133333330>;
+			};
+
 			i2c@3000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
@@ -125,6 +157,10 @@
 				interrupts = <14 0x8>;
 				interrupt-parent = <&ipic>;
 				dfsrr;
+				sensor@48 {
+					compatible = "national,lm75";
+					reg = <0x48>;
+				};
 				rtc@68 {
 					compatible = "dallas,ds1339";
 					reg = <0x68>;
@@ -363,51 +399,5 @@
 			compatible = "fsl,mpc8349-pci";
 			device_type = "pci";
 		};
-
-		dma@82a8 {
-			#address-cells = <1>;
-			#size-cells = <1>;
-			compatible = "fsl,mpc8313-dma", "fsl,elo-dma";
-			reg = <0xe00082a8 4>;
-			ranges = <0 0xe0008100 0x1a8>;
-			interrupt-parent = <&ipic>;
-			interrupts = <71 8>;
-
-			dma-channel@0 {
-				compatible = "fsl,mpc8313-dma-channel",
-				             "fsl,elo-dma-channel";
-				reg = <0 0x28>;
-				interrupt-parent = <&ipic>;
-				interrupts = <71 8>;
-				cell-index = <0>;
-			};
-
-			dma-channel@80 {
-				compatible = "fsl,mpc8313-dma-channel",
-				             "fsl,elo-dma-channel";
-				reg = <0x80 0x28>;
-				interrupt-parent = <&ipic>;
-				interrupts = <71 8>;
-				cell-index = <1>;
-			};
-
-			dma-channel@100 {
-				compatible = "fsl,mpc8313-dma-channel",
-				             "fsl,elo-dma-channel";
-				reg = <0x100 0x28>;
-				interrupt-parent = <&ipic>;
-				interrupts = <71 8>;
-				cell-index = <2>;
-			};
-
-			dma-channel@180 {
-				compatible = "fsl,mpc8313-dma-channel",
-				             "fsl,elo-dma-channel";
-				reg = <0x180 0x28>;
-				interrupt-parent = <&ipic>;
-				interrupts = <71 8>;
-				cell-index = <3>;
-			};
-		};
 	};
 };
-- 
1.6.0.2.GIT

