From 83371ec2443ffca0ddd7c842bc13459d9da61ee1 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Tue, 25 Mar 2008 16:21:36 -0700
Subject: [PATCH] cavium: skip the calibrate_delay

Skip the calibrate_delay operation -- all the cores will be
the same by definition.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/kernel/smp.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/mips/kernel/smp.c b/arch/mips/kernel/smp.c
index 9d41dab..25d0728 100644
--- a/arch/mips/kernel/smp.c
+++ b/arch/mips/kernel/smp.c
@@ -115,7 +115,11 @@ asmlinkage __cpuinit void start_secondary(void)
 	 * to an option instead of something based on .cputype
 	 */
 
+#ifndef CONFIG_CPU_CAVIUM_OCTEON
+	/* There is no reason to waste time doing this on Octeon. All the cores
+	    are on the same chip and are the same speed by definition */
 	calibrate_delay();
+#endif
 	preempt_disable();
 	cpu = smp_processor_id();
 	cpu_data[cpu].udelay_val = loops_per_jiffy;
-- 
1.5.5.1

