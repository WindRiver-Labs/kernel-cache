From 86e125bf3fac140e8aada959ab8c29a1d08748ec Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:23:06 -0700
Subject: [PATCH] cavium: no longer use get_cycles()

kernel.org git commit efb9ca08 rendered get_cycles() to do
nothing -- so either use octeon_get_cycles or go directly to
using read_c0_count().

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 arch/mips/cavium-octeon/pci.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/pci.c b/arch/mips/cavium-octeon/pci.c
index 154e624..193885a 100644
--- a/arch/mips/cavium-octeon/pci.c
+++ b/arch/mips/cavium-octeon/pci.c
@@ -264,12 +264,12 @@ static void octeon_pci_initialize(void)
 	if (OCTEON_IS_MODEL(OCTEON_CN58XX) || OCTEON_IS_MODEL(OCTEON_CN50XX)) {
 		cvmx_pci_cnt_reg_t pci_cnt_reg_start;
 		cvmx_pci_cnt_reg_t pci_cnt_reg_end;
-		cycles_t cycles;
+		unsigned long cycles;
 		pci_cnt_reg_start.u64 = cvmx_read_csr(CVMX_NPI_PCI_CNT_REG);
-		cycles = get_cycles();
+		cycles = octeon_get_cycles();
 		udelay(1000);
 		pci_cnt_reg_end.u64 = cvmx_read_csr(CVMX_NPI_PCI_CNT_REG);
-		cycles = get_cycles() - cycles;
+		cycles = octeon_get_cycles() - cycles;
 		printk("PCI Clock: %lu MHz\n",
 		       (pci_cnt_reg_end.s.pcicnt -
 			pci_cnt_reg_start.s.pcicnt) / (cycles /
-- 
1.5.5.1

