From aa61ecd1cbd590b63bcad1102cfb4645abf8a866 Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:23:11 -0700
Subject: [PATCH] cavium: fix out of tree builds for ethernet.

Trying to build with the objs out and separate from the source tree
with "make O=../objdir" fails on this cavium-ethernet Makefile.`

Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 drivers/net/cavium-ethernet/Makefile |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

diff --git a/drivers/net/cavium-ethernet/Makefile b/drivers/net/cavium-ethernet/Makefile
index 1c3ee33..e439c9d 100644
--- a/drivers/net/cavium-ethernet/Makefile
+++ b/drivers/net/cavium-ethernet/Makefile
@@ -40,7 +40,12 @@
 # OF USE OR PERFORMANCE OF THE SOFTWARE LIES WITH YOU.
 
 # Common flags to be passed for driver compilation
-EXTRA_CFLAGS += -Winline -Wall -I arch/mips/cavium-octeon/gpl-executive/config -I $(srctree)/arch/mips/cavium-octeon/gpl-executive/config -I ${OCTEON_ROOT}/executive
+OCTEON_ROOT = $(srctree)/arch/mips/cavium-octeon
+
+EXTRA_CFLAGS += -Winline -Wall \
+	-I arch/mips/cavium-octeon/gpl-executive/config \
+	-I $(srctree)/arch/mips/cavium-octeon/gpl-executive/config \
+	-I ${OCTEON_ROOT}/executive
 
 obj-${CONFIG_CAVIUM_ETHERNET} :=  cavium-ethernet.o
 
-- 
1.5.5.1

