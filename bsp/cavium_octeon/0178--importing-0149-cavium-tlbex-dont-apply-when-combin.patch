From 4533cdd6ac878fcb17709361a88c55c5f1f525cf Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:23:17 -0700
Subject: [PATCH] importing 0149-cavium-tlbex-dont-apply-when-combined.patch

This is an automatic import of patch 0149-cavium-tlbex-dont-apply-when-combined.patch, no headers were
detected and a default message was constructed
---
 arch/mips/mm/tlbex.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/mm/tlbex.c b/arch/mips/mm/tlbex.c
index 683fab7..10114cd 100644
--- a/arch/mips/mm/tlbex.c
+++ b/arch/mips/mm/tlbex.c
@@ -1717,7 +1717,7 @@ static void __cpuinit build_r4000_tlb_load_handler(void)
 #else
 	uasm_i_SW(&p, PTE, 0, PTR);
 #endif
-	uasm_i_SRL(&p, PTE, PTE, 6); /* convert to entrylo0 */
+	build_convert_pte_to_entrylo(&p, PTE);
 	uasm_i_mtc0(&p, PTE, C0_ENTRYLO0); /* load it */
 	if (HPAGE_SIZE>>7 < 0x10000)
 		uasm_i_addiu(&p, PTE, PTE, HPAGE_SIZE>>7); /* convert to entrylo1 */
@@ -1782,7 +1782,7 @@ static void __cpuinit build_r4000_tlb_store_handler(void)
 #else
 	uasm_i_SW(&p, PTE, 0, PTR);
 #endif
-	uasm_i_SRL(&p, PTE, PTE, 6); /* convert to entrylo0 */
+	build_convert_pte_to_entrylo(&p, PTE);
 	uasm_i_mtc0(&p, PTE, C0_ENTRYLO0); /* load it */
 	if (HPAGE_SIZE>>7 < 0x10000)
 		uasm_i_addiu(&p, PTE, PTE, HPAGE_SIZE>>7); /* convert to entrylo1 */
@@ -1847,7 +1847,7 @@ static void __cpuinit build_r4000_tlb_modify_handler(void)
 #else
 	uasm_i_SW(&p, PTE, 0, PTR);
 #endif
-	uasm_i_SRL(&p, PTE, PTE, 6); /* convert to entrylo0 */
+	build_convert_pte_to_entrylo(&p, PTE);
 	uasm_i_mtc0(&p, PTE, C0_ENTRYLO0); /* load it */
 	if (HPAGE_SIZE>>7 < 0x10000)
 		uasm_i_addiu(&p, PTE, PTE, HPAGE_SIZE>>7); /* convert to entrylo1 */
-- 
1.5.5.1

