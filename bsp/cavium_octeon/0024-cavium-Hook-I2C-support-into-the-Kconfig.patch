From 0408ce3dae4c607d6be633dbfcc54ed62135311a Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 12:25:48 -0700
Subject: [PATCH] cavium: Hook I2C support into the Kconfig

Add the I2C Kconfig/Makefle options in for the new Cavium I2C files

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 drivers/i2c/busses/Kconfig  |    9 +++++++++
 drivers/i2c/busses/Makefile |    7 +++++++
 2 files changed, 16 insertions(+), 0 deletions(-)

diff --git a/drivers/i2c/busses/Kconfig b/drivers/i2c/busses/Kconfig
index 5fa9c3c..2c860a2 100644
--- a/drivers/i2c/busses/Kconfig
+++ b/drivers/i2c/busses/Kconfig
@@ -672,4 +672,13 @@ config I2C_PMCMSP
 	  This driver can also be built as module. If so, the module
 	  will be called i2c-pmcmsp.
 
+config I2C_OCTEON_TWSI
+	tristate "Octeon TWSI-I2C"
+	depends on I2C
+	help
+	  Octeon TWSI-I2C
+
+	  This driver can also be built as a module.  If so, the module
+	  will be called i2c-octeon-twsi.
+
 endmenu
diff --git a/drivers/i2c/busses/Makefile b/drivers/i2c/busses/Makefile
index ea7068f..b30df6e 100644
--- a/drivers/i2c/busses/Makefile
+++ b/drivers/i2c/busses/Makefile
@@ -50,9 +50,16 @@ obj-$(CONFIG_I2C_ACORN)		+= i2c-acorn.o
 obj-$(CONFIG_I2C_VIA)		+= i2c-via.o
 obj-$(CONFIG_I2C_VIAPRO)	+= i2c-viapro.o
 obj-$(CONFIG_I2C_VOODOO3)	+= i2c-voodoo3.o
+obj-$(CONFIG_I2C_OCTEON_TWSI)	+= i2c-octeon_twsi.o
 obj-$(CONFIG_SCx200_ACB)	+= scx200_acb.o
 obj-$(CONFIG_SCx200_I2C)	+= scx200_i2c.o
 
 ifeq ($(CONFIG_I2C_DEBUG_BUS),y)
 EXTRA_CFLAGS += -DDEBUG
 endif
+
+ifdef CONFIG_I2C_OCTEON_TWSI
+OCTEON_ROOT = $(srctree)/arch/mips/cavium-octeon
+
+CFLAGS_i2c-octeon_twsi.o	= -I$(OCTEON_ROOT)/executive
+endif
-- 
1.5.5.1

