From a3e5da95be1c6234bbe0b522c27aa33686114062 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Tue, 25 Mar 2008 16:21:33 -0700
Subject: [PATCH] cavium: SA_SHIRQ and request_irq cleanup

SA_SHIRQ is gone, and you get nagged if you don't at least
pretend to care about the return value of request_irq

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/cavium-octeon/msi.c |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/arch/mips/cavium-octeon/msi.c b/arch/mips/cavium-octeon/msi.c
index c98b7a0..e769820 100644
--- a/arch/mips/cavium-octeon/msi.c
+++ b/arch/mips/cavium-octeon/msi.c
@@ -121,17 +121,18 @@ static irqreturn_t octeon_msi_interrupt(int cpl, void *dev_id)
 
 int octeon_msi_initialize(void)
 {
+	int r;
 	if (octeon_has_feature(OCTEON_FEATURE_PCIE)) {
-		request_irq(OCTEON_IRQ_PCI_MSI0, octeon_msi_interrupt, SA_SHIRQ,
+		r = request_irq(OCTEON_IRQ_PCI_MSI0, octeon_msi_interrupt, IRQF_SHARED,
 			    "MSI[0:63]", octeon_msi_interrupt);
 	} else if (octeon_is_pci_host()) {
-		request_irq(OCTEON_IRQ_PCI_MSI0, octeon_msi_interrupt, SA_SHIRQ,
+		r = request_irq(OCTEON_IRQ_PCI_MSI0, octeon_msi_interrupt, IRQF_SHARED,
 			    "MSI[0:15]", octeon_msi_interrupt);
-		request_irq(OCTEON_IRQ_PCI_MSI1, octeon_msi_interrupt, SA_SHIRQ,
+		r += request_irq(OCTEON_IRQ_PCI_MSI1, octeon_msi_interrupt, IRQF_SHARED,
 			    "MSI[16:31]", octeon_msi_interrupt);
-		request_irq(OCTEON_IRQ_PCI_MSI2, octeon_msi_interrupt, SA_SHIRQ,
+		r += request_irq(OCTEON_IRQ_PCI_MSI2, octeon_msi_interrupt, IRQF_SHARED,
 			    "MSI[32:47]", octeon_msi_interrupt);
-		request_irq(OCTEON_IRQ_PCI_MSI3, octeon_msi_interrupt, SA_SHIRQ,
+		r += request_irq(OCTEON_IRQ_PCI_MSI3, octeon_msi_interrupt, IRQF_SHARED,
 			    "MSI[48:63]", octeon_msi_interrupt);
 	}
 	return 0;
-- 
1.5.5.1

