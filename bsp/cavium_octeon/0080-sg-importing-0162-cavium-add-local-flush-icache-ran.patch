From 962b487841784dbc5fcc99d86f1acae884c4dce6 Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:22:59 -0700
Subject: [PATCH] sg: importing 0162-cavium-add-local-flush-icache-range.patch

This is an automatic import of patch 0162-cavium-add-local-flush-icache-range.patch, no headers were
detected and a default message was constructed
---
 arch/mips/mm/c-octeon.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/arch/mips/mm/c-octeon.c b/arch/mips/mm/c-octeon.c
index 2bab411..f02f167 100644
--- a/arch/mips/mm/c-octeon.c
+++ b/arch/mips/mm/c-octeon.c
@@ -41,6 +41,13 @@ static void octeon_flush_data_cache_page(unsigned long addr)
     /* Nothing to do */
 }
 
+/* Flush local I-cache for the specified range.
+ */
+static inline void local_octeon_flush_icache_range(unsigned long start,
+						   unsigned long end)
+{
+	asm volatile ("synci 0($0)\n");
+}
 
 /**
  * Flush caches as necessary for all cores affected by a
@@ -246,6 +253,7 @@ void __init octeon_cache_init(void)
 	flush_icache_all        = octeon_flush_icache_all;
 	flush_data_cache_page   = octeon_flush_data_cache_page;
 	flush_icache_range      = octeon_flush_icache_range;
+	local_flush_icache_range= local_octeon_flush_icache_range;
 }
 
 /**
-- 
1.5.5.1

