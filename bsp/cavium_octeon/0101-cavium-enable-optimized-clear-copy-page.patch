From ad4bb4fc336e37d0bcd4e9e42a2b7ae31656f4ac Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:23:03 -0700
Subject: [PATCH] cavium: enable optimized clear copy page

Use the hand-optimized version for the OCTEON processor instead of the new synthetized clear_page() and copy_page().

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
---
 arch/mips/mm/Makefile |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/arch/mips/mm/Makefile b/arch/mips/mm/Makefile
index 0c1b90e..032ebaf 100644
--- a/arch/mips/mm/Makefile
+++ b/arch/mips/mm/Makefile
@@ -5,7 +5,13 @@
 OCTEON_ROOT = $(srctree)/arch/mips/cavium-octeon
 
 obj-y				+= cache.o extable.o fault.o \
-				   init.o tlbex.o tlbex-fault.o uasm.o page.o
+				   init.o tlbex.o tlbex-fault.o uasm.o
+
+ifeq ($(CONFIG_CPU_CAVIUM_OCTEON), y)
+obj-y  += pg-octeon.o
+else
+obj-y  += page.o
+endif
 
 ifndef CONFIG_CPU_CAVIUM_OCTEON
 # The Octeon uses its own version of the DMA mapping routines
-- 
1.5.5.1

