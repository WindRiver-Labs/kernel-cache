From 9cef65106509621947b2628b059c565bad0ea496 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Tue, 25 Mar 2008 16:21:44 -0700
Subject: [PATCH] cavium: CFLAGS for the GPL executive Makefile.

Adjust the EXTRA_CFLAGS for building with "make O=somedir ...".
Also hide the output of some of the other mundane commands.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/cavium-octeon/gpl-executive/Makefile |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/arch/mips/cavium-octeon/gpl-executive/Makefile b/arch/mips/cavium-octeon/gpl-executive/Makefile
index 7d41a04..7b7a618 100644
--- a/arch/mips/cavium-octeon/gpl-executive/Makefile
+++ b/arch/mips/cavium-octeon/gpl-executive/Makefile
@@ -9,9 +9,10 @@
 # Copyright (C) 2005-2007 Cavium Networks
 #
 
-src ?= .
+OCTEON_ROOT = $(srctree)/arch/mips/cavium-octeon
 
-EXTRA_CFLAGS += -I $(src)/config
+EXTRA_CFLAGS +=	-I$(OCTEON_ROOT)/executive \
+		-I$(OCTEON_ROOT)/gpl-executive/config
 
 executive-files := cvmx-bootmem.o
 executive-files += cvmx-cmd-queue.o
@@ -48,10 +49,11 @@ executive-src-files := $(executive-obj-files:%.o=%.c)
 ${src}/cvmx-linux-kernel-exports.c $(executive-src-files): $(src)/config/cvmx-config.h
 
 $(executive-src-files):
-	ln -fs $(@:$(src)/%.c=$(OCTEON_ROOT)/executive/%.c) $@
+	@ln -fs $(@:$(src)/%.c=$(OCTEON_ROOT)/executive/%.c) $@
 
 $(src)/config/cvmx-config.h: $(src)/config/executive-config.h
-	cd $(src) && cvmx-config config/executive-config.h
+	@cd $(src) && \
+	cvmx-config config/executive-config.h
 
 clean:
 	rm -f *.o $(executive-src-files)
-- 
1.5.5.1

