From 454efa52ae96a959ea37e7d22bd816b42f3558ed Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 22:48:06 -0700
Subject: [PATCH] MIPS: Incorrect variable type in mips_next_event

The choice of type here being a plain unsigned int means that on
64 bit MIPS, you can have a comparison always fail and have it
never get any timer ticks.  If your read_c0 starts with an offset,
you can have this happen right at boot.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/kernel/cevt-r4k.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/kernel/cevt-r4k.c b/arch/mips/kernel/cevt-r4k.c
index 24a2d90..49e1e66 100644
--- a/arch/mips/kernel/cevt-r4k.c
+++ b/arch/mips/kernel/cevt-r4k.c
@@ -16,7 +16,7 @@
 static int mips_next_event(unsigned long delta,
                            struct clock_event_device *evt)
 {
-	unsigned int cnt;
+	unsigned long cnt;
 	int res;
 
 #ifdef CONFIG_MIPS_MT_SMTC
-- 
1.5.5.1

