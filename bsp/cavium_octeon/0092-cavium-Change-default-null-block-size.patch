From 13dce3be996ada007cbde1bc68a1c84f7cdbd6d3 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 22:25:50 -0700
Subject: [PATCH] cavium: Change default null block size.

The default block size of 1 byte for crypto_null is inefficient; so
change to 4 bytes for Cavium.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 crypto/crypto_null.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/crypto/crypto_null.c b/crypto/crypto_null.c
index ff7b3de..f04da3f 100644
--- a/crypto/crypto_null.c
+++ b/crypto/crypto_null.c
@@ -24,7 +24,11 @@
 #include <linux/string.h>
 
 #define NULL_KEY_SIZE		0
+#ifdef CONFIG_CPU_CAVIUM_OCTEON
+#define NULL_BLOCK_SIZE		4   /* Using a 1 byte block creates absurd overhead */
+#else
 #define NULL_BLOCK_SIZE		1
+#endif
 #define NULL_DIGEST_SIZE	0
 #define NULL_IV_SIZE		0
 
-- 
1.5.5.1

