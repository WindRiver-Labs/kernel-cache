From 871f51a209795cb621a88ab681bca374be73c085 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 23:06:58 -0700
Subject: [PATCH] cavium: fix type on read_current_timer

read_current_timer() had the wrong type an the wrong return value.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 .../mach-cavium-octeon/cpu-feature-overrides.h     |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/asm-mips/mach-cavium-octeon/cpu-feature-overrides.h b/include/asm-mips/mach-cavium-octeon/cpu-feature-overrides.h
index 4a143c2..7370d16 100644
--- a/include/asm-mips/mach-cavium-octeon/cpu-feature-overrides.h
+++ b/include/asm-mips/mach-cavium-octeon/cpu-feature-overrides.h
@@ -38,14 +38,14 @@
 #define spin_lock_prefetch(x) __builtin_prefetch(x)
 #define PREFETCH_STRIDE 128
 
-static inline unsigned long read_current_timer(unsigned long *result)
+static inline int read_current_timer(unsigned long *result)
 {
 	asm volatile ("rdhwr %0,$31\n"
 #ifndef CONFIG_64BIT
 		      "sll %0, 0\n"
 #endif
 		      :"=r" (*result));
-	return *result;
+	return 0;
 }
 
 static inline int octeon_has_saa(void)
-- 
1.5.5.1

