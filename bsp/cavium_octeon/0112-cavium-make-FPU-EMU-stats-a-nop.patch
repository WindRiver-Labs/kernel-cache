From 612db5b136c47cec1514a0a97ef728e2cd3f2778 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 23:12:50 -0700
Subject: [PATCH] cavium: make FPU EMU stats a nop

Collecting these stats generates cross CPU traffic for nothing
as they aren't exported anywhere.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 include/asm-mips/fpu_emulator.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/include/asm-mips/fpu_emulator.h b/include/asm-mips/fpu_emulator.h
index 2731c38..4917cbd 100644
--- a/include/asm-mips/fpu_emulator.h
+++ b/include/asm-mips/fpu_emulator.h
@@ -33,5 +33,10 @@ struct mips_fpu_emulator_stats {
 };
 
 extern struct mips_fpu_emulator_stats fpuemustats;
+#ifdef CONFIG_MIPS_FPU_EMULATOR_STATS_ENABLED
+#define FPUEMUSTATS_INC(field) fpuemustats.field++
+#else
+#define FPUEMUSTATS_INC(field) do {} while (0)
+#endif
 
 #endif /* _ASM_FPU_EMULATOR_H */
-- 
1.5.5.1

