From 42a2c062f28b78b4fb928dfd5305289df35af122 Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 12:14:10 -0700
Subject: [PATCH] cavium: hook MTD support into Makefile/Kconfig

Enable the build system to find and compile the Cavium MTD support.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 drivers/mtd/maps/Kconfig  |    8 ++++++++
 drivers/mtd/maps/Makefile |    1 +
 2 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/drivers/mtd/maps/Kconfig b/drivers/mtd/maps/Kconfig
index 12c2536..7eba9eb 100644
--- a/drivers/mtd/maps/Kconfig
+++ b/drivers/mtd/maps/Kconfig
@@ -590,5 +590,13 @@ config MTD_PLATRAM
 
 	  This selection automatically selects the map_ram driver.
 
+config MTD_CAVIUM_FLASH
+	tristate "Flash chip on Cavium CN38xx Boards"
+	depends on  CAVIUM_OCTEON_REFERENCE_BOARD && MTD
+	help
+           This provides a driver for the on-board boot flash.  By default the
+           flash is split into 1 partition which are accessed as separate
+           MTD devices.
+
 endmenu
 
diff --git a/drivers/mtd/maps/Makefile b/drivers/mtd/maps/Makefile
index a9cbe80..6e06baa 100644
--- a/drivers/mtd/maps/Makefile
+++ b/drivers/mtd/maps/Makefile
@@ -68,3 +68,4 @@ obj-$(CONFIG_MTD_PLATRAM)	+= plat-ram.o
 obj-$(CONFIG_MTD_OMAP_NOR)	+= omap_nor.o
 obj-$(CONFIG_MTD_MTX1)		+= mtx-1_flash.o
 obj-$(CONFIG_MTD_INTEL_VR_NOR)	+= intel_vr_nor.o
+obj-$(CONFIG_MTD_CAVIUM_FLASH)	+= cavium_flash.o
-- 
1.5.5.1

