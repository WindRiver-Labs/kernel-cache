From 803161a5d688a35f7c429602e977de931dba9d5d Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 21:32:09 -0700
Subject: [PATCH] cavium: add in thread specific offsets

Add in the thread offsets for the Cavium crypto items like AES, 3DES
and CRC items.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/kernel/asm-offsets.c |   27 +++++++++++++++++++++++++++
 1 files changed, 27 insertions(+), 0 deletions(-)

diff --git a/arch/mips/kernel/asm-offsets.c b/arch/mips/kernel/asm-offsets.c
index 92ebfa7..72c1ddf 100644
--- a/arch/mips/kernel/asm-offsets.c
+++ b/arch/mips/kernel/asm-offsets.c
@@ -341,3 +341,30 @@ void output_irq_cpustat_t_defines(void)
 	size("#define IC_IRQ_CPUSTAT_T   ", irq_cpustat_t);
 	linefeed;
 }
+
+#ifdef CONFIG_CPU_CAVIUM_OCTEON
+void output_octeon_cop2_state_defines(void)
+{
+	text("/* Octeon specific octeon_cop2_state offsets. */");
+	offset("#define OCTEON_CP2_CRC_IV       ", struct octeon_cop2_state, cop2_crc_iv);
+	offset("#define OCTEON_CP2_CRC_LENGTH   ", struct octeon_cop2_state, cop2_crc_length);
+	offset("#define OCTEON_CP2_CRC_POLY     ", struct octeon_cop2_state, cop2_crc_poly);
+	offset("#define OCTEON_CP2_LLM_DAT      ", struct octeon_cop2_state, cop2_llm_dat);
+	offset("#define OCTEON_CP2_3DES_IV      ", struct octeon_cop2_state, cop2_3des_iv);
+	offset("#define OCTEON_CP2_3DES_KEY     ", struct octeon_cop2_state, cop2_3des_key);
+	offset("#define OCTEON_CP2_3DES_RESULT  ", struct octeon_cop2_state, cop2_3des_result);
+	offset("#define OCTEON_CP2_AES_INP0     ", struct octeon_cop2_state, cop2_aes_inp0);
+	offset("#define OCTEON_CP2_AES_IV       ", struct octeon_cop2_state, cop2_aes_iv);
+	offset("#define OCTEON_CP2_AES_KEY      ", struct octeon_cop2_state, cop2_aes_key);
+	offset("#define OCTEON_CP2_AES_KEYLEN   ", struct octeon_cop2_state, cop2_aes_keylen);
+	offset("#define OCTEON_CP2_AES_RESULT   ", struct octeon_cop2_state, cop2_aes_result);
+	offset("#define OCTEON_CP2_GFM_MULT     ", struct octeon_cop2_state, cop2_gfm_mult);
+	offset("#define OCTEON_CP2_GFM_POLY     ", struct octeon_cop2_state, cop2_gfm_poly);
+	offset("#define OCTEON_CP2_GFM_RESULT   ", struct octeon_cop2_state, cop2_gfm_result);
+	offset("#define OCTEON_CP2_HSH_DATW     ", struct octeon_cop2_state, cop2_hsh_datw);
+	offset("#define OCTEON_CP2_HSH_IVW      ", struct octeon_cop2_state, cop2_hsh_ivw);
+	offset("#define THREAD_CP2              ", struct task_struct, thread.cp2);
+	offset("#define THREAD_CVMSEG           ", struct task_struct, thread.cvmseg.cvmseg);
+	linefeed;
+}
+#endif
-- 
1.5.5.1

