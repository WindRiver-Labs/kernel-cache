From 4d40aca1e28401c07eb0629fd5bb254ff2abb81f Mon Sep 17 00:00:00 2001
From: Wally Gleemer <Wally.Gleemer@windriver.com>
Date: Thu, 13 Mar 2008 22:05:48 -0700
Subject: [PATCH] cavium: hook cavium cache init into main cache.c

Follow precedent of other boards, and hook the CPU specific cache
init in from here.

Signed-off-by: Wally Gleemer <Wally.Gleemer@windriver.com>
---
 arch/mips/mm/cache.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/mips/mm/cache.c b/arch/mips/mm/cache.c
index f590367..9b3824c 100644
--- a/arch/mips/mm/cache.c
+++ b/arch/mips/mm/cache.c
@@ -166,6 +166,15 @@ void __devinit cpu_cache_init(void)
 		return;
 	}
 
+#ifdef CONFIG_CPU_CAVIUM_OCTEON
+	if (cpu_has_octeon_cache) {
+		extern void __weak octeon_cache_init(void);
+
+		octeon_cache_init();
+		return;
+	}
+#endif
+
 	panic(cache_panic);
 }
 
-- 
1.5.5.1

