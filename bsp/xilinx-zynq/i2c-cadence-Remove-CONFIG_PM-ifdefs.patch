From bac9cf4adf0428bea414341aba56a94d0be29d23 Mon Sep 17 00:00:00 2001
From: Soren Brinkmann <soren.brinkmann@xilinx.com>
Date: Thu, 10 Apr 2014 08:03:58 -0700
Subject: [PATCH 167/182] i2c: cadence: Remove CONFIG_PM #ifdefs

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Remove the CONFIG_PM-related #ifdefs and annotate affected functions
with __maybe_unused.

Signed-off-by: Soren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 48a03c15a12b5ddb12c3c2f9365526bfa2e4c99d)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/i2c/busses/i2c-cadence.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/i2c/busses/i2c-cadence.c b/drivers/i2c/busses/i2c-cadence.c
index 066e63d..3d6d66d 100644
--- a/drivers/i2c/busses/i2c-cadence.c
+++ b/drivers/i2c/busses/i2c-cadence.c
@@ -724,7 +724,6 @@ static int cdns_i2c_clk_notifier_cb(struct notifier_block *nb, unsigned long
 	}
 }
 
-#ifdef CONFIG_PM_SLEEP
 /**
  * cdns_i2c_suspend - Suspend method for the driver
  * @_dev:	Address of the platform_device structure
@@ -733,7 +732,7 @@ static int cdns_i2c_clk_notifier_cb(struct notifier_block *nb, unsigned long
  *
  * Return: 0 always
  */
-static int cdns_i2c_suspend(struct device *_dev)
+static int __maybe_unused cdns_i2c_suspend(struct device *_dev)
 {
 	struct platform_device *pdev = container_of(_dev,
 			struct platform_device, dev);
@@ -753,7 +752,7 @@ static int cdns_i2c_suspend(struct device *_dev)
  *
  * Return: 0 on success and error value on error
  */
-static int cdns_i2c_resume(struct device *_dev)
+static int __maybe_unused cdns_i2c_resume(struct device *_dev)
 {
 	struct platform_device *pdev = container_of(_dev,
 			struct platform_device, dev);
@@ -770,7 +769,6 @@ static int cdns_i2c_resume(struct device *_dev)
 
 	return 0;
 }
-#endif
 
 static SIMPLE_DEV_PM_OPS(cdns_i2c_dev_pm_ops, cdns_i2c_suspend,
 			 cdns_i2c_resume);
-- 
1.7.5.4

