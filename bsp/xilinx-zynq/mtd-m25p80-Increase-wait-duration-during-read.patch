From 6630cf64e242f34e27569b1278a042942b5bf89a Mon Sep 17 00:00:00 2001
From: Suneel Garapati <suneel.garapati@xilinx.com>
Date: Fri, 31 May 2013 00:50:24 +0530
Subject: [PATCH 03/20] mtd: m25p80: Increase wait duration during read

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit c3d522449e9936eb480eba8c1b869f41f59887b8

Increased the value of MAX_READY_WAIT_JIFFIES from 40 to 480
based on the inputs from Micron considering large size flash
memories.

Signed-off-by: Suneel Garapati <suneel.garapati@xilinx.com>
Acked-by: Peter Crosthwaite <peter.crosthwaite@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/mtd/devices/m25p80.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/mtd/devices/m25p80.c b/drivers/mtd/devices/m25p80.c
index 2015bfa..ec90a87 100644
--- a/drivers/mtd/devices/m25p80.c
+++ b/drivers/mtd/devices/m25p80.c
@@ -72,7 +72,7 @@
 #define	SR_SRWD			0x80	/* SR write protect */
 
 /* Define max times to check status register before we give up. */
-#define	MAX_READY_WAIT_JIFFIES	(40 * HZ)	/* M25P16 specs 40s max chip erase */
+#define	MAX_READY_WAIT_JIFFIES	(480 * HZ) /* N25Q specs 480s max chip erase */
 #define	MAX_CMD_SIZE		5
 
 #define JEDEC_MFR(_jedec_id)	((_jedec_id) >> 16)
-- 
1.7.5.4

