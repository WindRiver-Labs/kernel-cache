From 8246c7d71c8ad51efca37f218dd0d4a278dfd889 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Fri, 11 Sep 2015 09:35:19 +0800
Subject: [PATCH 40/53] net: xilinux: use timespec64 instead of 32

Since introduction to get/set time methods with explicit 64 bit
seconds have been merged and 32 bit get/set methods removed, so
this drivers should be updated as well.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/xilinx/xilinx_emacps.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/xilinx/xilinx_emacps.c b/drivers/net/ethernet/xilinx/xilinx_emacps.c
index 7ea2b95..d98c27f 100644
--- a/drivers/net/ethernet/xilinx/xilinx_emacps.c
+++ b/drivers/net/ethernet/xilinx/xilinx_emacps.c
@@ -1178,7 +1178,7 @@ static int xemacps_ptp_enable(struct ptp_clock_info *ptp,
  * @ts: Timespec structure to hold the current time value
  * Return: Always returns zero
  */
-static int xemacps_ptp_gettime(struct ptp_clock_info *ptp, struct timespec *ts)
+static int xemacps_ptp_gettime(struct ptp_clock_info *ptp, struct timespec64 *ts)
 {
 	unsigned long flags;
 	struct net_local *lp = container_of(ptp, struct net_local, ptp_caps);
@@ -1201,7 +1201,7 @@ static int xemacps_ptp_gettime(struct ptp_clock_info *ptp, struct timespec *ts)
  * Return: Always returns zero
  */
 static int xemacps_ptp_settime(struct ptp_clock_info *ptp,
-			       const struct timespec *ts)
+			       const struct timespec64 *ts)
 {
 	unsigned long flags;
 	struct net_local *lp = container_of(ptp, struct net_local, ptp_caps);
@@ -1289,8 +1289,8 @@ static void xemacps_ptp_init(struct net_local *lp)
 	lp->ptp_caps.pps = 0;
 	lp->ptp_caps.adjfreq = xemacps_ptp_adjfreq;
 	lp->ptp_caps.adjtime = xemacps_ptp_adjtime;
-	lp->ptp_caps.gettime = xemacps_ptp_gettime;
-	lp->ptp_caps.settime = xemacps_ptp_settime;
+	lp->ptp_caps.gettime64 = xemacps_ptp_gettime;
+	lp->ptp_caps.settime64 = xemacps_ptp_settime;
 	lp->ptp_caps.enable = xemacps_ptp_enable;
 
 	rate = clk_get_rate(lp->aperclk);
-- 
1.7.10.4

