From cf5a0a10cb53a32a75756ac55217a0029841c981 Mon Sep 17 00:00:00 2001
From: Lars-Peter Clausen <lars@metafoo.de>
Date: Fri, 19 Apr 2013 14:41:47 +0200
Subject: [PATCH 231/509] drm: adv7511: Include the extension sections when
 duplicating the edid

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 93c7ebdaa5e48d4524cf40e036508276a15c6c67

Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/gpu/drm/i2c/adv7511_core.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i2c/adv7511_core.c b/drivers/gpu/drm/i2c/adv7511_core.c
index 939f447..16c3d0c 100644
--- a/drivers/gpu/drm/i2c/adv7511_core.c
+++ b/drivers/gpu/drm/i2c/adv7511_core.c
@@ -514,7 +514,8 @@ struct edid *adv7511_get_edid(struct drm_encoder *encoder)
 	if (!adv7511->edid)
 		return NULL;
 
-	return kmemdup(adv7511->edid, sizeof(*adv7511->edid), GFP_KERNEL);
+	return kmemdup(adv7511->edid, sizeof(*adv7511->edid) +
+		adv7511->edid->extensions * 128, GFP_KERNEL);
 }
 EXPORT_SYMBOL_GPL(adv7511_get_edid);
 
-- 
1.7.5.4

