From cb059e51a665443c8bf95249ad66f34751ae4bfc Mon Sep 17 00:00:00 2001
From: Nicolae Rosia <nicolae.rosia@certsign.ro>
Date: Mon, 5 Jan 2015 18:07:09 +0200
Subject: [PATCH 013/456] ARM: zynq: xilinx_axidma: use list_last_entry
 instead of container_of

Signed-off-by: Nicolae Rosia <nicolae.rosia@certsign.ro>
Acked-by: Kedareswara rao Appana <appanad@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 1095858c418ad474f47f05f926d7bb7f55306651)
---
 drivers/dma/xilinx/xilinx_axidma.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axidma.c b/drivers/dma/xilinx/xilinx_axidma.c
index 0df1337..76807ff 100644
--- a/drivers/dma/xilinx/xilinx_axidma.c
+++ b/drivers/dma/xilinx/xilinx_axidma.c
@@ -378,7 +378,7 @@ static void xilinx_dma_start_transfer(struct xilinx_dma_chan *chan)
 		desch = list_first_entry(&chan->pending_list,
 					 struct xilinx_dma_desc_sw, node);
 
-		desct = container_of(chan->pending_list.prev,
+		desct = list_last_entry(&chan->pending_list,
 				     struct xilinx_dma_desc_sw, node);
 
 		dma_write(chan, XILINX_DMA_CDESC_OFFSET, desch->async_tx.phys);
@@ -577,7 +577,7 @@ static void append_desc_queue(struct xilinx_dma_chan *chan,
 			      struct xilinx_dma_desc_sw *desc)
 {
 	struct xilinx_dma_desc_sw *tail =
-		container_of(chan->pending_list.prev,
+		list_last_entry(&chan->pending_list,
 			     struct xilinx_dma_desc_sw, node);
 	struct xilinx_dma_desc_hw *hw;
 
-- 
1.7.5.4

