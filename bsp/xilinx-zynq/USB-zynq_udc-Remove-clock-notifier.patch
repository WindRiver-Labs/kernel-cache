From c6f92c8f4b7565738bde247210c35a41ac4b3279 Mon Sep 17 00:00:00 2001
From: Soren Brinkmann <soren.brinkmann@xilinx.com>
Date: Thu, 27 Feb 2014 17:54:26 -0800
Subject: [PATCH 387/509] USB: zynq_udc: Remove clock notifier

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 0919116bed14276298c942b99411b066c88ad5c1

The clock notifier was just an emty placeholder. Remove this dead code.

Signed-off-by: Soren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/usb/gadget/zynq_udc.c |   24 ------------------------
 1 files changed, 0 insertions(+), 24 deletions(-)

diff --git a/drivers/usb/gadget/zynq_udc.c b/drivers/usb/gadget/zynq_udc.c
index 15d69bc..35a2542 100644
--- a/drivers/usb/gadget/zynq_udc.c
+++ b/drivers/usb/gadget/zynq_udc.c
@@ -363,25 +363,6 @@ struct zynq_udc {
 #define get_pipe_by_windex(windex)	((windex & USB_ENDPOINT_NUMBER_MASK) \
 					* 2 + ((windex & USB_DIR_IN) ? 1 : 0))
 
-static int zynq_udc_clk_notifier_cb(struct notifier_block *nb,
-		unsigned long event, void *data)
-{
-
-	switch (event) {
-	case PRE_RATE_CHANGE:
-		/* if a rate change is announced we need to check whether we can
-		 * maintain the current frequency by changing the clock
-		 * dividers.
-		 */
-		/* fall through */
-	case POST_RATE_CHANGE:
-		return NOTIFY_OK;
-	case ABORT_RATE_CHANGE:
-	default:
-		return NOTIFY_DONE;
-	}
-}
-
 static int zynq_udc_clk_init(struct platform_device *pdev)
 {
 	struct zynq_usb2_platform_data *pdata = pdev->dev.platform_data;
@@ -393,11 +374,6 @@ static int zynq_udc_clk_init(struct platform_device *pdev)
 		goto err_out_clk_put;
 	}
 
-	pdata->clk_rate_change_nb.notifier_call = zynq_udc_clk_notifier_cb;
-	pdata->clk_rate_change_nb.next = NULL;
-	if (clk_notifier_register(pdata->clk, &pdata->clk_rate_change_nb))
-		dev_warn(&pdev->dev, "Unable to register clock notifier.\n");
-
 	return 0;
 
 err_out_clk_put:
-- 
1.7.5.4

