From f47b481eefe7046d26a2c3728a6ce6125ac363b2 Mon Sep 17 00:00:00 2001
From: "Xudong.zhu" <xudong.zhu@windriver.com>
Date: Thu, 20 Feb 2014 17:50:12 +0800
Subject: [PATCH] Fix the build issue if FIQ is enabled on zyqn

JIRAID: LIN5-18017

When enable FIQ on ZYNQ platform, the error below will happen.

arch/arm/kernel/fiq.c:In function 'enable_fiq':
arch/arm/kernel/fiq.c:127:19:error: 'FIQ_START' undeclared (first use in this function)
arch/arm/kernel/fiq.c:127:19:note: each undeclared identifier is reported only once for
                             each function it appears in
arch/arm/kernel/fiq.c:In function 'disable_fiq':
arch/arm/kernel/fiq.c:132:20:error: 'FIQ_START' undeclared (first use in this function)

The reason is FIQ_START is not defined for specific platform.
To fix this error, FIQ_START is required if the hardware supports FIQ mode,
plus Xilinx zynq platform is based on ARM A9 cpu, so FIQ is supported and
the FIQ_START is 28.

Signed-off-by: Xudong.zhu <xudong.zhu@windriver.com>
---
 arch/arm/mach-zynq/include/mach/irqs.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-zynq/include/mach/irqs.h b/arch/arm/mach-zynq/include/mach/irqs.h
index 0f33117..dee03c4 100644
--- a/arch/arm/mach-zynq/include/mach/irqs.h
+++ b/arch/arm/mach-zynq/include/mach/irqs.h
@@ -18,6 +18,7 @@
 #define NR_IRQS		(256 + ARCH_NR_GPIOS)
 #define XGPIOPS_IRQBASE	256
 
+#define FIQ_START       28
 #define IRQ_LOCALTIMER	29
 
 #define IRQ_DMAC0_ABORT		45
-- 
1.7.5.4

