From 0b6f7f092a7b4b3b7b28ef4b02fb5c13bfdcb797 Mon Sep 17 00:00:00 2001
From: Punnaiah Choudary Kalluri <punnaia@xilinx.com>
Date: Mon, 7 Apr 2014 19:46:52 +0530
Subject: [PATCH 064/182] spi: zynq-qspi: Update the mode_bits with quad and
 dual support

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Update the mode_bits with quad and dual support

Signed-off-by: Punnaiah Choudary Kalluri <punnaia@xilinx.com>
Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 95a8f32d8ce12cc38944e1d49a666faa1e5fc419)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/spi/spi-zynq-qspi.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/spi/spi-zynq-qspi.c b/drivers/spi/spi-zynq-qspi.c
index b79a6a9..35a24bc 100644
--- a/drivers/spi/spi-zynq-qspi.c
+++ b/drivers/spi/spi-zynq-qspi.c
@@ -690,6 +690,8 @@ static int zynq_qspi_probe(struct platform_device *pdev)
 
 	master->max_speed_hz = clk_get_rate(xqspi->devclk) / 2;
 	master->bits_per_word_mask = SPI_BPW_MASK(8);
+	master->mode_bits = SPI_CPOL | SPI_CPHA | SPI_RX_DUAL | SPI_RX_QUAD |
+			    SPI_TX_DUAL | SPI_TX_QUAD;
 
 	ret = spi_register_master(master);
 	if (ret) {
-- 
1.7.5.4

