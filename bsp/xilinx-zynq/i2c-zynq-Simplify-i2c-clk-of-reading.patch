From 808defcce05fdce46d82299b5e8656aa75238f16 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Mon, 30 Sep 2013 11:21:15 +0200
Subject: [PATCH 161/509] i2c: zynq: Simplify i2c-clk of reading

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit b2c539082dad12595a24934ff4612b7f0a15c1fc

Use of_property_read_u32 helper function.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/i2c/busses/i2c-zynq.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/i2c/busses/i2c-zynq.c b/drivers/i2c/busses/i2c-zynq.c
index da0e87c..ad180e3 100644
--- a/drivers/i2c/busses/i2c-zynq.c
+++ b/drivers/i2c/busses/i2c-zynq.c
@@ -870,10 +870,8 @@ static int xi2cps_probe(struct platform_device *pdev)
 		dev_warn(&pdev->dev, "Unable to register clock notifier.\n");
 	id->input_clk = (unsigned int)clk_get_rate(id->clk);
 
-	prop = of_get_property(pdev->dev.of_node, "i2c-clk", NULL);
-	if (prop) {
-		id->i2c_clk = be32_to_cpup(prop);
-	} else {
+	ret = of_property_read_u32(pdev->dev.of_node, "i2c-clk", &id->i2c_clk);
+	if (ret) {
 		ret = -ENXIO;
 		dev_err(&pdev->dev, "couldn't determine i2c-clk\n");
 		goto err_clk_dis;
-- 
1.7.5.4

