From c67c50c5efc382f584bf347361094a1c26f1e86b Mon Sep 17 00:00:00 2001
From: Srikanth Thokala <srikanth.thokala@xilinx.com>
Date: Fri, 13 Dec 2013 14:37:25 +0530
Subject: [PATCH 010/182] vdma: xilinx: Rename flush_fsync to flush_on_fsync
 parameter

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Renamed to flush_on_fsync to reflect its functionality.

Signed-off-by: Srikanth Thokala <sthokal@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit ac74117aa91b1e37d21b874133b48a18f7b9462a)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/dma/xilinx/xilinx_axivdma.c |   24 ++++++++++++------------
 1 files changed, 12 insertions(+), 12 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axivdma.c b/drivers/dma/xilinx/xilinx_axivdma.c
index 2377c57..9ae2103 100644
--- a/drivers/dma/xilinx/xilinx_axivdma.c
+++ b/drivers/dma/xilinx/xilinx_axivdma.c
@@ -221,7 +221,7 @@ struct xilinx_vdma_tx_descriptor {
  * @tasklet: Cleanup work after irq
  * @private: Match info for channel request
  * @config: Device configuration info
- * @flush_fsync: Flush on Frame sync
+ * @flush_on_fsync: Flush on Frame sync
  */
 struct xilinx_vdma_chan {
 	struct xilinx_vdma_device *xdev;
@@ -246,7 +246,7 @@ struct xilinx_vdma_chan {
 	struct tasklet_struct tasklet;
 	u32 private;
 	struct xilinx_vdma_config config;
-	bool flush_fsync;
+	bool flush_on_fsync;
 };
 
 /**
@@ -256,7 +256,7 @@ struct xilinx_vdma_chan {
  * @common: DMA device structure
  * @chan: Driver specific VDMA channel
  * @has_sg: Specifies whether Scatter-Gather is present or not
- * @flush_fsync: Flush on frame sync
+ * @flush_on_fsync: Flush on frame sync
  */
 struct xilinx_vdma_device {
 	void __iomem *regs;
@@ -264,7 +264,7 @@ struct xilinx_vdma_device {
 	struct dma_device common;
 	struct xilinx_vdma_chan *chan[XILINX_VDMA_MAX_CHANS_PER_DEVICE];
 	bool has_sg;
-	u32 flush_fsync;
+	u32 flush_on_fsync;
 };
 
 #define to_xilinx_chan(chan) \
@@ -867,7 +867,7 @@ static irqreturn_t xilinx_vdma_irq_handler(int irq, void *data)
 		vdma_ctrl_write(chan, XILINX_VDMA_REG_DMASR,
 				errors & XILINX_VDMA_DMASR_ERR_RECOVER_MASK);
 
-		if (!chan->flush_fsync ||
+		if (!chan->flush_on_fsync ||
 		    (errors & ~XILINX_VDMA_DMASR_ERR_RECOVER_MASK)) {
 			dev_err(chan->dev,
 				"Channel %p has errors %x, cdr %x tdr %x\n",
@@ -1261,9 +1261,9 @@ static int xilinx_vdma_chan_probe(struct xilinx_vdma_device *xdev,
 		chan->ctrl_offset = XILINX_VDMA_MM2S_CTRL_OFFSET;
 		chan->desc_offset = XILINX_VDMA_MM2S_DESC_OFFSET;
 
-		if (xdev->flush_fsync == XILINX_VDMA_FLUSH_BOTH ||
-		    xdev->flush_fsync == XILINX_VDMA_FLUSH_MM2S)
-			chan->flush_fsync = true;
+		if (xdev->flush_on_fsync == XILINX_VDMA_FLUSH_BOTH ||
+		    xdev->flush_on_fsync == XILINX_VDMA_FLUSH_MM2S)
+			chan->flush_on_fsync = true;
 	} else if (of_device_is_compatible(node,
 					    "xlnx,axi-vdma-s2mm-channel")) {
 		chan->direction = DMA_DEV_TO_MEM;
@@ -1272,9 +1272,9 @@ static int xilinx_vdma_chan_probe(struct xilinx_vdma_device *xdev,
 		chan->ctrl_offset = XILINX_VDMA_S2MM_CTRL_OFFSET;
 		chan->desc_offset = XILINX_VDMA_S2MM_DESC_OFFSET;
 
-		if (xdev->flush_fsync == XILINX_VDMA_FLUSH_BOTH ||
-		    xdev->flush_fsync == XILINX_VDMA_FLUSH_S2MM)
-			chan->flush_fsync = true;
+		if (xdev->flush_on_fsync == XILINX_VDMA_FLUSH_BOTH ||
+		    xdev->flush_on_fsync == XILINX_VDMA_FLUSH_S2MM)
+			chan->flush_on_fsync = true;
 	}
 
 	/*
@@ -1409,7 +1409,7 @@ static int xilinx_vdma_of_probe(struct platform_device *pdev)
 		return err;
 	}
 
-	of_property_read_u32(node, "xlnx,flush-fsync", &xdev->flush_fsync);
+	of_property_read_u32(node, "xlnx,flush-fsync", &xdev->flush_on_fsync);
 
 	/* Initialize the DMA engine */
 	xdev->common.dev = &pdev->dev;
-- 
1.7.5.4

