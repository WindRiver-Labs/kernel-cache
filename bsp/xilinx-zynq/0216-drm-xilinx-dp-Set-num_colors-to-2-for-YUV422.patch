From 86624ccc062944f91093db700f7128009a569b4a Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Wed, 9 Sep 2015 17:28:24 -0700
Subject: [PATCH 216/290] drm: xilinx: dp: Set 'num_colors' to 2 for YUV422

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

'num_colors' is used to calculate the bits per pixel values.
Considering subsampling of Y and V components, 'num_colors' should
be 2 for YUV422 format.

Signed-off-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 1605be543d977fd404b2faa0d44f736d6f25dadc)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_dp.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_dp.c b/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
index c730d6e..83f5544 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
@@ -485,10 +485,10 @@ static void xilinx_drm_dp_adjust_train(struct xilinx_drm_dp *dp,
 			preemphasis = p;
 	}
 
-	if (voltage >= DP_TRAIN_VOLTAGE_SWING_1200)
+	if (voltage >= DP_TRAIN_VOLTAGE_SWING_LEVEL_3)
 		voltage |= DP_TRAIN_MAX_SWING_REACHED;
 
-	if (preemphasis >= DP_TRAIN_PRE_EMPHASIS_9_5)
+	if (preemphasis >= DP_TRAIN_PRE_EMPH_LEVEL_3)
 		preemphasis |= DP_TRAIN_MAX_PRE_EMPHASIS_REACHED;
 
 	for (i = 0; i < dp->mode.lane_cnt; i++)
@@ -1224,7 +1224,7 @@ static int xilinx_drm_dp_parse_of(struct xilinx_drm_dp *dp)
 		num_colors = 3;
 	} else if (config->enable_ycrcb && strcmp(string, "ycrcb422") == 0) {
 		config->misc0 |= XILINX_DP_MISC0_YCRCB_422;
-		num_colors = 3;
+		num_colors = 2;
 	} else if (config->enable_ycrcb && strcmp(string, "ycrcb444") == 0) {
 		config->misc0 |= XILINX_DP_MISC0_YCRCB_444;
 		num_colors = 3;
-- 
2.0.2

