From 71d9649290ad8d9388691615077dc564557979d9 Mon Sep 17 00:00:00 2001
From: Lars-Peter Clausen <lars@metafoo.de>
Date: Thu, 5 Sep 2013 13:24:33 +0200
Subject: [PATCH 243/509] drm: adi_axi_hdmi: Make sure to bypass the CSC in
 RGB mode

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit d045ff047c0f4dc84faaaf2219620a86f6cf1f7c

When in RGB mode we need to bypass the colorspace converter.

Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/gpu/drm/adi_axi_hdmi/axi_hdmi_encoder.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/adi_axi_hdmi/axi_hdmi_encoder.c b/drivers/gpu/drm/adi_axi_hdmi/axi_hdmi_encoder.c
index 18c7d84..dd2bc07 100644
--- a/drivers/gpu/drm/adi_axi_hdmi/axi_hdmi_encoder.c
+++ b/drivers/gpu/drm/adi_axi_hdmi/axi_hdmi_encoder.c
@@ -436,8 +436,11 @@ struct drm_encoder *axi_hdmi_encoder_create(struct drm_device *dev)
 	axi_hdmi_connector_init(dev, connector, encoder);
 	axi_hdmi_debugfs_init(axi_hdmi_encoder);
 
-	if (priv->version == AXI_HDMI)
+	if (priv->version == AXI_HDMI) {
 		writel(AXI_HDMI_SOURCE_SEL_NORMAL, priv->base + AXI_HDMI_REG_SOURCE_SEL);
+		if (priv->is_rgb)
+				writel(AXI_HDMI_CTRL_CSC_BYPASS, priv->base + AXI_HDMI_REG_CTRL);
+	}
 
 	return encoder;
 }
-- 
1.7.5.4

