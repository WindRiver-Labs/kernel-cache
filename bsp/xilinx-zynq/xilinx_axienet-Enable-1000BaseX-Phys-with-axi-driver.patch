From a1e48676c8db0f40a51b719a984e152e0278294a Mon Sep 17 00:00:00 2001
From: Will Wykeham <will@wykeham.net>
Date: Sun, 2 Mar 2014 14:49:43 +0000
Subject: [PATCH 035/182] xilinx_axienet: Enable 1000BaseX Phys with axi
 driver

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

1000BaseX Phys also communicate with GMII. Enable this when setting up
the driver.

Signed-off-by: Will Wykeham <will@wykeham.net>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit e13f4ef89851afceb471e9c747a4f86892e13e1e)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/xilinx/xilinx_axienet_main.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/xilinx/xilinx_axienet_main.c b/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
index be0f909..6d6e81f 100644
--- a/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
+++ b/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
@@ -941,7 +941,8 @@ static int axienet_open(struct net_device *ndev)
 		return ret;
 
 	if (lp->phy_node) {
-		if (lp->phy_type == XAE_PHY_TYPE_GMII) {
+		if (lp->phy_type == XAE_PHY_TYPE_GMII ||
+		    lp->phy_type == XAE_PHY_TYPE_1000BASE_X) {
 			lp->phy_dev = of_phy_connect(lp->ndev, lp->phy_node,
 					     axienet_adjust_link, 0,
 					     PHY_INTERFACE_MODE_GMII);
-- 
1.7.5.4

