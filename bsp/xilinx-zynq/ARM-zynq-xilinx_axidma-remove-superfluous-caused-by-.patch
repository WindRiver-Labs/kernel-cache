From 133cc07e39fb13abec07e9d57d170ccb69bd183c Mon Sep 17 00:00:00 2001
From: Nicolae Rosia <nicolae.rosia@certsign.ro>
Date: Mon, 5 Jan 2015 18:02:37 +0200
Subject: [PATCH 011/456] ARM: zynq: xilinx_axidma: remove superfluous caused
 by xilinx_dma_alloc_descriptor failure

xilinx_dma_alloc_descriptor prints a message on failure, but so does
xilinx_dma_prep_slave_sg which calls it. Remove the debug message from
xilinx_dma_alloc_descriptor.

Signed-off-by: Nicolae Rosia <nicolae.rosia@certsign.ro>
Acked-by: Kedareswara rao Appana <appanad@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 0a8718adcee45b2570ddc79b161594e1ed3e0b4e)
---
 drivers/dma/xilinx/xilinx_axidma.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axidma.c b/drivers/dma/xilinx/xilinx_axidma.c
index 78c16c0..ab11ec7 100644
--- a/drivers/dma/xilinx/xilinx_axidma.c
+++ b/drivers/dma/xilinx/xilinx_axidma.c
@@ -656,10 +656,8 @@ xilinx_dma_desc_sw *xilinx_dma_alloc_descriptor(struct xilinx_dma_chan *chan)
 	dma_addr_t pdesc;
 
 	desc = dma_pool_alloc(chan->desc_pool, GFP_ATOMIC, &pdesc);
-	if (!desc) {
-		dev_dbg(chan->dev, "out of memory for desc\n");
+	if (!desc)
 		return NULL;
-	}
 
 	memset(desc, 0, sizeof(*desc));
 	INIT_LIST_HEAD(&desc->tx_list);
-- 
1.7.5.4

