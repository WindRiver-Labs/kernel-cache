From b05fe77538ce56740036373f22bde89338fd5f67 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 6 Jan 2015 11:14:13 +0800
Subject: [PATCH 330/456] drm: interface fall back on

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_connector.c |    6 +++---
 drivers/gpu/drm/xylon/xylon_connector.c       |    6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_connector.c b/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
index 7884339..e98ddcb 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
@@ -115,7 +115,7 @@ xilinx_drm_connector_detect(struct drm_connector *base_connector, bool force)
 /* destroy connector */
 void xilinx_drm_connector_destroy(struct drm_connector *base_connector)
 {
-	drm_connector_unregister(base_connector);
+	drm_sysfs_connector_remove(base_connector);
 	drm_connector_cleanup(base_connector);
 }
 
@@ -177,7 +177,7 @@ xilinx_drm_connector_create(struct drm_device *drm,
 				 &xilinx_drm_connector_helper_funcs);
 
 	/* add entry for connector */
-	ret = drm_connector_register(&connector->base);
+	ret = drm_sysfs_connector_add(&connector->base);
 	if (ret) {
 		DRM_ERROR("failed to register a connector\n");
 		goto err_register;
@@ -195,7 +195,7 @@ xilinx_drm_connector_create(struct drm_device *drm,
 	return &connector->base;
 
 err_attach:
-	drm_connector_unregister(&connector->base);
+	drm_sysfs_connector_remove(&connector->base);
 err_register:
 	drm_connector_cleanup(&connector->base);
 	return ERR_PTR(ret);
diff --git a/drivers/gpu/drm/xylon/xylon_connector.c b/drivers/gpu/drm/xylon/xylon_connector.c
index e85cf5b..406da3b 100644
--- a/drivers/gpu/drm/xylon/xylon_connector.c
+++ b/drivers/gpu/drm/xylon/xylon_connector.c
@@ -104,7 +104,7 @@ xylon_drm_connector_detect(struct drm_connector *base_connector, bool force)
 
 static void xylon_drm_connector_destroy(struct drm_connector *base_connector)
 {
-	drm_connector_unregister(base_connector);
+	drm_sysfs_connector_remove(base_connector);
 	drm_connector_cleanup(base_connector);
 }
 
@@ -141,7 +141,7 @@ xylon_drm_connector_create(struct drm_device *dev,
 	drm_connector_helper_add(&connector->base,
 				 &xylon_drm_connector_helper_funcs);
 
-	ret = drm_connector_register(&connector->base);
+	ret = drm_sysfs_connector_add(&connector->base);
 	if (ret) {
 		DRM_ERROR("failed register encoder connector\n");
 		goto err_register;
@@ -157,7 +157,7 @@ xylon_drm_connector_create(struct drm_device *dev,
 	return &connector->base;
 
 err_attach:
-	drm_connector_unregister(&connector->base);
+	drm_sysfs_connector_remove(&connector->base);
 err_register:
 	drm_connector_cleanup(&connector->base);
 	return ERR_PTR(ret);
-- 
1.7.5.4

