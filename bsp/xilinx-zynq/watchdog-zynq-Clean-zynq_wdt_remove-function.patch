From 8418de029c0d26fc2c38f443234843643e1b0b8f Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 25 Feb 2014 11:25:48 +0100
Subject: [PATCH 434/509] watchdog: zynq: Clean zynq_wdt_remove function

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 815711aa096e113c38cc8396ab9e33fb8d6ffaa2

Remove unneeded variables.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/watchdog/zynq_wdt.c |   10 ++--------
 1 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/drivers/watchdog/zynq_wdt.c b/drivers/watchdog/zynq_wdt.c
index bf71d13..1f9f2eb 100644
--- a/drivers/watchdog/zynq_wdt.c
+++ b/drivers/watchdog/zynq_wdt.c
@@ -418,18 +418,12 @@ err_notifier:
  * Unregister the device after releasing the resources.
  * Stop is allowed only when nowayout is disabled.
  */
-static int __exit zynq_wdt_remove(struct platform_device *pdev)
+static int zynq_wdt_remove(struct platform_device *pdev)
 {
-	int res = 0;
-	int irq;
-
 	if (wdt && !nowayout) {
 		zynq_wdt_stop(&zynq_wdt_device);
 		watchdog_unregister_device(&zynq_wdt_device);
 		unregister_reboot_notifier(&zynq_wdt_notifier);
-		irq = platform_get_irq(pdev, 0);
-		free_irq(irq, pdev);
-		iounmap(wdt->regs);
 		clk_disable_unprepare(wdt->clk);
 		clk_put(wdt->clk);
 		kfree(wdt);
@@ -440,7 +434,7 @@ static int __exit zynq_wdt_remove(struct platform_device *pdev)
 		return -ENOTSUPP;
 	}
 
-	return res;
+	return 0;
 }
 
 /**
-- 
1.7.5.4

