From 1684ef10eca3ea44e3e7bbac18c915692bb705c0 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 2 Apr 2015 09:59:26 +0800
Subject: [PATCH 1/2] dts: zynq: set bus width for qspi-flash

This patch comes from ZC702.dtb downloaded Xilinx website along with
zc702 reference design.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/zynq-zc702.dts |    4 +++-
 arch/arm/boot/dts/zynq-zed.dts   |    4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/zynq-zc702.dts b/arch/arm/boot/dts/zynq-zc702.dts
index fc75636..8a602d6 100644
--- a/arch/arm/boot/dts/zynq-zc702.dts
+++ b/arch/arm/boot/dts/zynq-zc702.dts
@@ -281,7 +281,9 @@
 			flash@0 {
 				compatible = "n25q128";
 				reg = <0x0>;
-				spi-max-frequency = <50000000>;
+				spi-tx-bus-width = <0x1>;
+				spi-rx-bus-width = <0x4>;
+				spi-max-frequency = <0x2faf080>;
 				#address-cells = <1>;
 				#size-cells = <1>;
 				partition@qspi-fsbl-uboot {
diff --git a/arch/arm/boot/dts/zynq-zed.dts b/arch/arm/boot/dts/zynq-zed.dts
index bdf07e2..1c23897 100644
--- a/arch/arm/boot/dts/zynq-zed.dts
+++ b/arch/arm/boot/dts/zynq-zed.dts
@@ -189,7 +189,9 @@
 			flash@0 {
 				compatible = "n25q128";
 				reg = <0x0>;
-				spi-max-frequency = <50000000>;
+				spi-tx-bus-width = <0x1>;
+				spi-rx-bus-width = <0x4>;
+				spi-max-frequency = <0x2faf080>;
 				#address-cells = <1>;
 				#size-cells = <1>;
 				partition@qspi-fsbl-uboot {
-- 
1.7.5.4

