From c0e3717b1f55f41101a46833c248ae8056d4fe62 Mon Sep 17 00:00:00 2001
From: Lars-Peter Clausen <lars@metafoo.de>
Date: Thu, 20 Jun 2013 15:52:37 +0200
Subject: [PATCH 264/509] ASoC: adv7511_hdmi: Add a Speaker widget

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit f75f37d974a7a8f18748007868bb2a02a5ebb9b2

Add a speaker widget so we have a active path to an audio output widget.

Signed-off-by: Lars-Peter Clausen <lars@metafoo.de>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 sound/soc/xlnx/adv7511_hdmi.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

diff --git a/sound/soc/xlnx/adv7511_hdmi.c b/sound/soc/xlnx/adv7511_hdmi.c
index bc561a4..28a117c 100644
--- a/sound/soc/xlnx/adv7511_hdmi.c
+++ b/sound/soc/xlnx/adv7511_hdmi.c
@@ -25,6 +25,14 @@
 
 static char adv7511_codec_name[] = "adv7511.2-0039";
 
+static const struct snd_soc_dapm_widget adv7511_hdmi_dapm_widgets[] = {
+	SND_SOC_DAPM_SPK("Speaker", NULL),
+};
+
+static const struct snd_soc_dapm_route adv7511_hdmi_dapm_routes[] = {
+	{ "Speaker", NULL, "TMDS" },
+};
+
 static struct snd_soc_dai_link hdmi_dai_link = {
 	.name = "HDMI",
 	.stream_name = "HDMI",
@@ -42,9 +50,12 @@ static struct snd_soc_card hdmi_card = {
 	.owner = THIS_MODULE,
 	.dai_link = &hdmi_dai_link,
 	.num_links = 1,
+	.dapm_widgets = adv7511_hdmi_dapm_widgets,
+	.num_dapm_widgets = ARRAY_SIZE(adv7511_hdmi_dapm_widgets),
+	.dapm_routes = adv7511_hdmi_dapm_routes,
+	.num_dapm_routes = ARRAY_SIZE(adv7511_hdmi_dapm_routes),
 };
 
-
 static int adv7511_hdmi_probe(struct platform_device *pdev)
 {
 	struct snd_soc_card *card = &hdmi_card;
-- 
1.7.5.4

