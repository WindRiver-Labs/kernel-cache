From d9bae4ff5c82ca15b0fc58b56b9b86d38c98c1c1 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Thu, 7 Nov 2013 16:55:31 +0100
Subject: [PATCH 119/182] edac: zynq: Clean driver probe function

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

- Remove unneeded error message for devm_ioremap_resource

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 82ddd7fe1ec397ae9002f95ed9ca0b0e765af673)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/edac/zynq_edac.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/edac/zynq_edac.c b/drivers/edac/zynq_edac.c
index 39ad551..bd172b4 100644
--- a/drivers/edac/zynq_edac.c
+++ b/drivers/edac/zynq_edac.c
@@ -512,10 +512,8 @@ static int zynq_edac_mc_probe(struct platform_device *pdev)
 	/* Get the data from the platform device */
 	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
 	baseaddr = devm_ioremap_resource(&pdev->dev, res);
-	if (baseaddr == NULL) {
-		dev_err(&pdev->dev, "devm ioremap failed\n");
-		return -ENOMEM;
-	}
+	if (IS_ERR(baseaddr))
+		return PTR_ERR(baseaddr);
 
 	/* Check for the ecc enable status */
 	if (zynq_edac_get_eccstate(baseaddr) == false) {
-- 
1.7.5.4

