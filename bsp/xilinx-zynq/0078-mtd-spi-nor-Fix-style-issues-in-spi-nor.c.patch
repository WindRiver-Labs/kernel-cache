From 9a596d3e7f8595e344825bca1010eb452ac08fc4 Mon Sep 17 00:00:00 2001
From: William Bourque <wbourque@gmail.com>
Date: Fri, 7 Aug 2015 16:42:47 -0400
Subject: [PATCH 78/80] mtd: spi-nor: Fix style issues in spi-nor.c

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Fix bp_bits_from_sr() that is not KNF.
Move lock_granularity = max(..) to else instead of doing each pass.
Fix minor typo (Mircon -> Micron).

Signed-off-by: William Bourque <wfb@xiphos.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 6c8c6468ce5ff628be0fc846e55e27874c87c7ac)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/mtd/spi-nor/spi-nor.c | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

diff --git a/drivers/mtd/spi-nor/spi-nor.c b/drivers/mtd/spi-nor/spi-nor.c
index eb4cdbb..afb1c10 100644
--- a/drivers/mtd/spi-nor/spi-nor.c
+++ b/drivers/mtd/spi-nor/spi-nor.c
@@ -649,14 +649,13 @@ static int write_sr_modify_protection(struct spi_nor *nor, uint8_t status,
 
 static uint8_t bp_bits_from_sr(struct spi_nor *nor, uint8_t status)
 {
-    uint8_t ret;
+	uint8_t ret;
 
-    ret = (((status) & SR_BP_BIT_MASK) >> SR_BP_BIT_OFFSET);
-    if (nor->jedec_id == 0x20) {
-        ret |= ((status & SR_BP3) >> (SR_BP_BIT_OFFSET + 1));
-    }
+	ret = (((status) & SR_BP_BIT_MASK) >> SR_BP_BIT_OFFSET);
+	if (nor->jedec_id == 0x20)
+		ret |= ((status & SR_BP3) >> (SR_BP_BIT_OFFSET + 1));
 
-    return ret;
+	return ret;
 }
 
 static int spi_nor_lock(struct mtd_info *mtd, loff_t ofs, uint64_t len)
-- 
2.0.2

