From aa92009b25943f02f1c03fab2ce9109c63a5ba23 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Mon, 30 Sep 2013 10:28:57 +0200
Subject: [PATCH 275/509] dma: xilinx: Use MODULE_DEVICE_TABLE

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 27c03cfe78c3adfd8f96aa658a56106f7af1c402

This macro should be used when driver can be used as module
Use *of_match name which is standard convention.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/dma/xilinx/xilinx_axicdma.c |    5 +++--
 drivers/dma/xilinx/xilinx_axidma.c  |    5 +++--
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axicdma.c b/drivers/dma/xilinx/xilinx_axicdma.c
index ce3a7f9..7158131 100644
--- a/drivers/dma/xilinx/xilinx_axicdma.c
+++ b/drivers/dma/xilinx/xilinx_axicdma.c
@@ -1006,16 +1006,17 @@ static int xilinx_cdma_remove(struct platform_device *pdev)
 	return 0;
 }
 
-static const struct of_device_id xilinx_cdma_of_ids[] = {
+static const struct of_device_id xilinx_cdma_of_match[] = {
 	{ .compatible = "xlnx,axi-cdma", },
 	{}
 };
+MODULE_DEVICE_TABLE(of, xilinx_cdma_of_match);
 
 static struct platform_driver xilinx_cdma_driver = {
 	.driver = {
 		.name = "xilinx-cdma",
 		.owner = THIS_MODULE,
-		.of_match_table = xilinx_cdma_of_ids,
+		.of_match_table = xilinx_cdma_of_match,
 	},
 	.probe = xilinx_cdma_probe,
 	.remove = xilinx_cdma_remove,
diff --git a/drivers/dma/xilinx/xilinx_axidma.c b/drivers/dma/xilinx/xilinx_axidma.c
index e9b176a..f125f9a 100644
--- a/drivers/dma/xilinx/xilinx_axidma.c
+++ b/drivers/dma/xilinx/xilinx_axidma.c
@@ -1103,16 +1103,17 @@ static int xilinx_dma_remove(struct platform_device *pdev)
 	return 0;
 }
 
-static const struct of_device_id xilinx_dma_of_ids[] = {
+static const struct of_device_id xilinx_dma_of_match[] = {
 	{ .compatible = "xlnx,axi-dma", },
 	{}
 };
+MODULE_DEVICE_TABLE(of, xilinx_dma_of_match);
 
 static struct platform_driver xilinx_dma_driver = {
 	.driver = {
 		.name = "xilinx-dma",
 		.owner = THIS_MODULE,
-		.of_match_table = xilinx_dma_of_ids,
+		.of_match_table = xilinx_dma_of_match,
 	},
 	.probe = xilinx_dma_probe,
 	.remove = xilinx_dma_remove,
-- 
1.7.5.4

