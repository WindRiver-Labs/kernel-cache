From d830dd0e96cf0976426f62018d6e97d62b57b815 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Fri, 11 Sep 2015 16:12:20 +0800
Subject: [PATCH 03/53] ARM: zynq: Suspend has no armv6 compatible asm instructions

This patch comes from:

commit d15dac0d8 comes from:
  https://github.com/Xilinx/linux-xlnx.git

Remove -march=armv6k AFLAGS.
Get multi_v7_defconfig to work.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-zynq/Makefile |    3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/arm/mach-zynq/Makefile b/arch/arm/mach-zynq/Makefile
index fbf3df6..9e93976 100644
--- a/arch/arm/mach-zynq/Makefile
+++ b/arch/arm/mach-zynq/Makefile
@@ -6,3 +6,6 @@
 obj-y				:= common.o slcr.o zynq_ocm.o pm.o
 
 obj-$(CONFIG_SMP)		+= headsmp.o platsmp.o
+ORIG_AFLAGS := $(KBUILD_AFLAGS)
+KBUILD_AFLAGS = $(subst -march=armv6k,,$(ORIG_AFLAGS))
+AFLAGS_suspend.o 		+=-Wa,-march=armv7-a -mcpu=cortex-a9
-- 
1.7.10.4

