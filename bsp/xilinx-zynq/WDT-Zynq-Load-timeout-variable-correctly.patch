From 27ae475604d8cdfc996977fa516f55271818b7c4 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 1 Apr 2014 13:22:53 +0200
Subject: [PATCH 436/509] WDT: Zynq: Load timeout variable correctly

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 2e5989b08e6892d6272beaeaba08045651fdf62a

Use proper OF reading function for timeout property.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/watchdog/zynq_wdt.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/watchdog/zynq_wdt.c b/drivers/watchdog/zynq_wdt.c
index 9759d15..cf02ab8 100644
--- a/drivers/watchdog/zynq_wdt.c
+++ b/drivers/watchdog/zynq_wdt.c
@@ -344,7 +344,8 @@ static int zynq_wdt_probe(struct platform_device *pdev)
 
 	/* Initialize the members of zynq_wdt structure */
 	zynq_wdt_device.parent = &pdev->dev;
-	of_get_property(pdev->dev.of_node, "timeout", &zynq_wdt_device.timeout);
+	of_property_read_u32(pdev->dev.of_node, "timeout",
+			     &zynq_wdt_device.timeout);
 	if (wdt_timeout < ZYNQ_WDT_MAX_TIMEOUT &&
 			wdt_timeout > ZYNQ_WDT_MIN_TIMEOUT)
 		zynq_wdt_device.timeout = wdt_timeout;
-- 
1.7.5.4

