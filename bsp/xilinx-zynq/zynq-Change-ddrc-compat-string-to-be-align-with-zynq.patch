From 5b3e89b1d8589fe1c15f6c1577c9fe68a15d6c50 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 4 Feb 2014 15:26:09 +0100
Subject: [PATCH 123/182] zynq: Change ddrc compat string to be align with
 zynq

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Get rid of ps7 names in drivers and use zynq one
with version suffix.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 .../devicetree/bindings/edac/zynq_edac.txt         |    6 +++---
 drivers/edac/zynq_edac.c                           |   11 +++++------
 2 files changed, 8 insertions(+), 9 deletions(-)

diff --git a/Documentation/devicetree/bindings/edac/zynq_edac.txt b/Documentation/devicetree/bindings/edac/zynq_edac.txt
index c21ff83..40f02b2 100644
--- a/Documentation/devicetree/bindings/edac/zynq_edac.txt
+++ b/Documentation/devicetree/bindings/edac/zynq_edac.txt
@@ -3,14 +3,14 @@ corrected and double bit ecc errors that are detected by the DDR ECC controller.
 ECC support for DDR is available in half-bus width(16 bit) configuration only.
 
 Required properties:
-- compatible: Should be "xlnx,ps7-ddrc" or "xlnx,ps7-ddrc-1.00.a"
+- compatible: Should be "xlnx,zynq-ddrc-1.00.a"
 - reg: Should contain DDR controller registers location and length.
 
 Example:
 ++++++++
 
-ps7_ddrc_0: ps7-ddrc@f8006000 {
-	compatible = "xlnx,ps7-ddrc-1.00.a", "xlnx,ps7-ddrc";
+zynq_ddrc_0: zynq-ddrc@f8006000 {
+	compatible = "xlnx,zynq-ddrc-1.00.a";
 	reg = <0xf8006000 0x1000>;
 };
 
diff --git a/drivers/edac/zynq_edac.c b/drivers/edac/zynq_edac.c
index 0633c07..e6300ef 100644
--- a/drivers/edac/zynq_edac.c
+++ b/drivers/edac/zynq_edac.c
@@ -245,7 +245,7 @@ static void zynq_edac_generate_message(const struct mem_ctl_info *mci,
  * @mci:	Pointer to the edac memory controller instance
  * @perrstatus:	Pointer to the zynq ecc status structure
  *
- * This routine handles an xilinx,ps7-ddrc controller ECC correctable error.
+ * This routine handles the controller ECC correctable error.
  */
 static void zynq_edac_handle_error(struct mem_ctl_info *mci,
 			struct zynq_ecc_status *perrstatus)
@@ -332,8 +332,7 @@ static enum dev_type zynq_edac_get_dtype(void __iomem *base)
  * zynq_edac_get_eccstate - Return the controller ecc enable/disable status
  * @base:	Pointer to the ddr memory contoller base address
  *
- * This routine returns the ECC enable/diable status for the xlnx,ps7-ddrc
- * controller
+ * This routine returns the ECC enable/diable status for the controller
  *
  * Return: a ecc status boolean i.e true/false - enabled/disabled.
  */
@@ -445,7 +444,7 @@ static int zynq_edac_init_csrows(struct mem_ctl_info *mci)
  *
  * This routine performs initialization of the EDAC memory controller
  * instance and related driver-private data associated with the
- * xlnx,ps7-ddrc memory controller the instance is bound to.
+ * memory controller the instance is bound to.
  *
  * Return: 0 if OK; otherwise, < 0 on error.
  */
@@ -494,7 +493,7 @@ static int zynq_edac_mc_init(struct mem_ctl_info *mci,
  * zynq_edac_mc_probe - Check controller and bind driver
  * @pdev:	Pointer to the platform_device struct
  *
- * This routine probes a specific xilinx,ps7-ddrc controller
+ * This routine probes a specific controller
  * instance for binding with the driver.
  *
  * Return: 0 if the controller instance was successfully bound to the
@@ -573,7 +572,7 @@ free_edac_mc:
  * @pdev:	Pointer to the platform_device struct
  *
  * This routine unbinds the EDAC memory controller instance associated
- * with the specified xilinx,ps7-ddrc controller described by the
+ * with the specified controller described by the
  * OpenFirmware device tree node passed as a parameter.
  *
  * Return: Unconditionally 0
-- 
1.7.5.4

