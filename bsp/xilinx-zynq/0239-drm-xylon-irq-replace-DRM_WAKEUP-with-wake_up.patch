From e9bccd301ce1604734cee83d050a977372a28d62 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Mon, 5 May 2014 19:52:47 -0700
Subject: [PATCH 239/290] drm: xylon: irq: replace DRM_WAKEUP() with wake_up()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

DRM_WAKEUP() has been removed, so replace DRM_WAKEUP() call with wake_up().

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 14fa4d317bbbe5a1c0ff9d0b34a2120243485824)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xylon/xylon_irq.c | 4 ++--
 drivers/gpu/drm/xylon/xylon_irq.h | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/xylon/xylon_irq.c b/drivers/gpu/drm/xylon/xylon_irq.c
index 626c24b..ca3ddf3 100644
--- a/drivers/gpu/drm/xylon/xylon_irq.c
+++ b/drivers/gpu/drm/xylon/xylon_irq.c
@@ -20,7 +20,7 @@
 #include "xylon_crtc.h"
 #include "xylon_irq.h"
 
-irqreturn_t xylon_drm_irq_handler(DRM_IRQ_ARGS)
+irqreturn_t xylon_drm_irq_handler(int irq, void *arg)
 {
 	struct drm_device *dev = (struct drm_device *)arg;
 	struct xylon_drm_device *xdev;
@@ -113,7 +113,7 @@ int xylon_drm_irq_uninstall(struct drm_device *dev)
 	if (dev->num_crtcs) {
 		spin_lock_irqsave(&dev->vbl_lock, irqflags);
 		for (i = 0; i < dev->num_crtcs; i++) {
-			DRM_WAKEUP(&dev->vblank[i].queue);
+			wake_up(&dev->vblank[i].queue);
 			dev->vblank[i].enabled = 0;
 			dev->vblank[i].last =
 				dev->driver->get_vblank_counter(dev, i);
diff --git a/drivers/gpu/drm/xylon/xylon_irq.h b/drivers/gpu/drm/xylon/xylon_irq.h
index 414202b..0348c71 100644
--- a/drivers/gpu/drm/xylon/xylon_irq.h
+++ b/drivers/gpu/drm/xylon/xylon_irq.h
@@ -17,7 +17,7 @@
 #ifndef __XYLON_DRM_IRQ_H__
 #define __XYLON_DRM_IRQ_H__
 
-irqreturn_t xylon_drm_irq_handler(DRM_IRQ_ARGS);
+irqreturn_t xylon_drm_irq_handler(int irq, void *arg);
 
 void xylon_drm_irq_preinst(struct drm_device *dev);
 int xylon_drm_irq_postinst(struct drm_device *dev);
-- 
2.0.2

