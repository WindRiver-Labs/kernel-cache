From ead86fbf25d498da0ef660eea3e1e9bfb3238e50 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Fri, 28 Mar 2014 10:20:00 +0100
Subject: [PATCH 024/509] zynq: Fix compatible string for ddrc

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 5bb1fdce05f9c1250e75c88fa7022974629fa4c7

Get rid of ps7 prefix.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../devicetree/bindings/edac/zynq_edac.txt         |    4 ++--
 arch/arm/boot/dts/zynq-zc702.dts                   |    2 +-
 arch/arm/boot/dts/zynq-zc706.dts                   |    2 +-
 arch/arm/boot/dts/zynq-zed.dts                     |    2 +-
 arch/arm/mach-zynq/pm.c                            |    2 +-
 drivers/edac/zynq_edac.c                           |    2 +-
 6 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/Documentation/devicetree/bindings/edac/zynq_edac.txt b/Documentation/devicetree/bindings/edac/zynq_edac.txt
index 40f02b2..e97d78b 100644
--- a/Documentation/devicetree/bindings/edac/zynq_edac.txt
+++ b/Documentation/devicetree/bindings/edac/zynq_edac.txt
@@ -3,14 +3,14 @@ corrected and double bit ecc errors that are detected by the DDR ECC controller.
 ECC support for DDR is available in half-bus width(16 bit) configuration only.
 
 Required properties:
-- compatible: Should be "xlnx,zynq-ddrc-1.00.a"
+- compatible: Should be "xlnx,zynq-ddrc-1.0"
 - reg: Should contain DDR controller registers location and length.
 
 Example:
 ++++++++
 
 zynq_ddrc_0: zynq-ddrc@f8006000 {
-	compatible = "xlnx,zynq-ddrc-1.00.a";
+	compatible = "xlnx,zynq-ddrc-1.0";
 	reg = <0xf8006000 0x1000>;
 };
 
diff --git a/arch/arm/boot/dts/zynq-zc702.dts b/arch/arm/boot/dts/zynq-zc702.dts
index 730a5ca..b6b0e72 100644
--- a/arch/arm/boot/dts/zynq-zc702.dts
+++ b/arch/arm/boot/dts/zynq-zc702.dts
@@ -98,7 +98,7 @@
 			reg = <0xe0008000 0x1000>;
 		} ;
 		ps7_ddrc_0: ps7-ddrc@f8006000 {
-			compatible = "xlnx,ps7-ddrc-1.00.a", "xlnx,ps7-ddrc", "xlnx,zynq-ddrc-1.00.a";
+			compatible = "xlnx,zynq-ddrc-1.0";
 			reg = <0xf8006000 0x1000>;
 			xlnx,has-ecc = <0x0>;
 		} ;
diff --git a/arch/arm/boot/dts/zynq-zc706.dts b/arch/arm/boot/dts/zynq-zc706.dts
index 2f1a75e..dcffe79 100644
--- a/arch/arm/boot/dts/zynq-zc706.dts
+++ b/arch/arm/boot/dts/zynq-zc706.dts
@@ -90,7 +90,7 @@
 			reg = <0xf800b000 0x1000>;
 		} ;
 		ps7_ddrc_0: ps7-ddrc@f8006000 {
-			compatible = "xlnx,ps7-ddrc-1.00.a", "xlnx,ps7-ddrc", "xlnx,zynq-ddrc-1.00.a";
+			compatible = "xlnx,zynq-ddrc-1.0";
 			reg = <0xf8006000 0x1000>;
 			xlnx,has-ecc = <0x0>;
 		} ;
diff --git a/arch/arm/boot/dts/zynq-zed.dts b/arch/arm/boot/dts/zynq-zed.dts
index 4cca128..ffd2a5b 100644
--- a/arch/arm/boot/dts/zynq-zed.dts
+++ b/arch/arm/boot/dts/zynq-zed.dts
@@ -89,7 +89,7 @@
 			reg = <0xf800b000 0x1000>;
 		} ;
 		ps7_ddrc_0: ps7-ddrc@f8006000 {
-			compatible = "xlnx,ps7-ddrc-1.00.a", "xlnx,ps7-ddrc", "xlnx,zynq-ddrc-1.00.a";
+			compatible = "xlnx,zynq-ddrc-1.0";
 			reg = <0xf8006000 0x1000>;
 			xlnx,has-ecc = <0x0>;
 		} ;
diff --git a/arch/arm/mach-zynq/pm.c b/arch/arm/mach-zynq/pm.c
index 8c268a7..17704c2 100644
--- a/arch/arm/mach-zynq/pm.c
+++ b/arch/arm/mach-zynq/pm.c
@@ -263,7 +263,7 @@ static void __iomem *zynq_pm_remap_ocm(void)
 
 int __init zynq_pm_late_init(void)
 {
-	ddrc_base = zynq_pm_ioremap("xlnx,zynq-ddrc-1.00.a");
+	ddrc_base = zynq_pm_ioremap("xlnx,zynq-ddrc-1.0");
 	if (!ddrc_base)
 		pr_warn("%s: Unable to map DDRC IO memory.\n", __func__);
 
diff --git a/drivers/edac/zynq_edac.c b/drivers/edac/zynq_edac.c
index 4d3590f..2b7635f 100644
--- a/drivers/edac/zynq_edac.c
+++ b/drivers/edac/zynq_edac.c
@@ -591,7 +591,7 @@ static int zynq_edac_mc_remove(struct platform_device *pdev)
 
 /* Device tree node type and compatible tuples this driver can match on */
 static struct of_device_id zynq_edac_match[] = {
-	{ .compatible = "xlnx,ps7-ddrc-1.00.a", },
+	{ .compatible = "xlnx,zynq-ddrc-1.0", },
 	{ /* end of table */ }
 };
 
-- 
1.7.5.4

