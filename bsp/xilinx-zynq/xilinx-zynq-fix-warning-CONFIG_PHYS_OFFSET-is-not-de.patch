From 393988f247db72ec5bf336026f284e0c12626903 Mon Sep 17 00:00:00 2001
From: Michel Thebeau <michel.thebeau@windriver.com>
Date: Thu, 17 Jan 2013 13:04:24 -0500
Subject: [PATCH] xilinx-zynq: fix warning "CONFIG_PHYS_OFFSET" is not defined

There is a new warning for xilinx-zynq bsp:
arch/arm/mach-zynq/common.c: In function 'xilinx_memory_init':
arch/arm/mach-zynq/common.c:131:6: warning: "CONFIG_PHYS_OFFSET" is not defined [-Wundef]

It is introduced by commit "Xilinx: ARM: BSP: update memory
initialization".

"If we want to remove the warning message, actually the modification
should be:

Signed-off-by: Liming Wang <liming.wang@windriver.com>
Signed-off-by: Michel Thebeau <michel.thebeau@windriver.com>
---
 arch/arm/mach-zynq/common.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/arm/mach-zynq/common.c b/arch/arm/mach-zynq/common.c
index 0bebc64..18443de 100644
--- a/arch/arm/mach-zynq/common.c
+++ b/arch/arm/mach-zynq/common.c
@@ -128,7 +128,7 @@ void __init xilinx_map_io(void)
  */
 void __init xilinx_memory_init(void)
 {
-#if (CONFIG_PHYS_OFFSET == 0)
+#if (!defined(CONFIG_PHYS_OFFSET)) || (CONFIG_PHYS_OFFSET == 0)
 	/* Reserve the 0-0x4000 addresses (before page tables and kernel)
 	 * which can't be used for DMA
 	 */
-- 
1.7.9.7

