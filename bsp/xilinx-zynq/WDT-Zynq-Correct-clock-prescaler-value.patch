From 96075e6fda3cfaea166ee80161430529d5bf8828 Mon Sep 17 00:00:00 2001
From: Harini Katakam <harini.katakam@xilinx.com>
Date: Fri, 28 Mar 2014 15:55:58 +0530
Subject: [PATCH 435/509] WDT: Zynq: Correct clock prescaler value

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 2cbb3c6f09681b4dc9e0227ee2695718d8560dbc

Clock pre-scaler bits, when set to 2, use divisor 512, not 256.

Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/watchdog/zynq_wdt.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/watchdog/zynq_wdt.c b/drivers/watchdog/zynq_wdt.c
index 1f9f2eb..9759d15 100644
--- a/drivers/watchdog/zynq_wdt.c
+++ b/drivers/watchdog/zynq_wdt.c
@@ -374,7 +374,7 @@ static int zynq_wdt_probe(struct platform_device *pdev)
 		wdt->prescaler = 64;
 		wdt->ctrl_clksel = 1;
 	} else if (clock_f <= 75000000) {
-		wdt->prescaler = 256;
+		wdt->prescaler = 512;
 		wdt->ctrl_clksel = 2;
 	} else { /* For Zynq */
 		wdt->prescaler = 4096;
-- 
1.7.5.4

