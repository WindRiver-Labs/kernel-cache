From 2b345d6e3b430625a2b2416f9088c083adc3ca68 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Fri, 14 Feb 2014 11:19:03 +0100
Subject: [PATCH 475/509] gpio: zynq: Fix missing checking return value

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit c39e164dbd66fcca438eb2ee10aef92f07a7f8a0

LOG:
drivers/gpio/gpio-zynq.c: In function 'xgpiops_probe':
drivers/gpio/gpio-zynq.c:673:17: warning: ignoring return
value of 'gpiochip_remove', declared with attribute
warn_unused_result [-Wunused-result]

Reported-by: kbuild test robot <fengguang.wu@intel.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/gpio/gpio-zynq.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/gpio/gpio-zynq.c b/drivers/gpio/gpio-zynq.c
index 9108ec9..d8b86d7 100644
--- a/drivers/gpio/gpio-zynq.c
+++ b/drivers/gpio/gpio-zynq.c
@@ -622,13 +622,15 @@ static int zynq_gpio_probe(struct platform_device *pdev)
 	gpio->clk = devm_clk_get(&pdev->dev, NULL);
 	if (IS_ERR(gpio->clk)) {
 		dev_err(&pdev->dev, "input clock not found.\n");
-		gpiochip_remove(chip);
+		if (gpiochip_remove(chip))
+			dev_err(&pdev->dev, "Failed to remove gpio chip\n");
 		return PTR_ERR(gpio->clk);
 	}
 	ret = clk_prepare_enable(gpio->clk);
 	if (ret) {
 		dev_err(&pdev->dev, "Unable to enable clock.\n");
-		gpiochip_remove(chip);
+		if (gpiochip_remove(chip))
+			dev_err(&pdev->dev, "Failed to remove gpio chip\n");
 		return ret;
 	}
 
-- 
1.7.5.4

