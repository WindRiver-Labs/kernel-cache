From cb1685ad36ca504a279ac75781246c1b0417c449 Mon Sep 17 00:00:00 2001
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date: Wed, 26 Mar 2014 04:01:59 +0100
Subject: [PATCH 258/456] media: xilinx: Add missing mutex_destroy call

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 22ad504d697b6562160b5415d14e9531c61a6af1)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-dma.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-dma.c b/drivers/media/platform/xilinx/xilinx-dma.c
index b669cdb..d3ffef9 100644
--- a/drivers/media/platform/xilinx/xilinx-dma.c
+++ b/drivers/media/platform/xilinx/xilinx-dma.c
@@ -879,4 +879,6 @@ void xvip_dma_cleanup(struct xvip_dma *dma)
 
 	vb2_dma_contig_cleanup_ctx(dma->alloc_ctx);
 	media_entity_cleanup(&dma->video.entity);
+
+	mutex_destroy(&dma->lock);
 }
-- 
1.7.5.4

