From 64ea1beabb385a59227aca82aba21d523f726d43 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Thu, 18 Sep 2014 13:32:23 +0800
Subject: [PATCH 079/182] kgdboc, zynq: Using continue replace return to clean
 the context

Since this irq context is in the spin_lock_irqsave, just return will
break the critical area. Using continue to deal with the other char.
Let the irq handle auto clean the irq context.

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
(cherry picked from commit d12fa755f468f1ff5f1ebb723a646ac3bb3497ea)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/tty/serial/xilinx_uartps.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/tty/serial/xilinx_uartps.c b/drivers/tty/serial/xilinx_uartps.c
index bed84a6..2f9becc 100644
--- a/drivers/tty/serial/xilinx_uartps.c
+++ b/drivers/tty/serial/xilinx_uartps.c
@@ -242,7 +242,7 @@ static irqreturn_t xuartps_isr(int irq, void *dev_id)
 
 #ifdef CONFIG_CONSOLE_POLL
 			if (port->poll_rx_cb && port->poll_rx_cb((unsigned char)data))
-				return;
+				continue;
 #endif
 #ifdef SUPPORT_SYSRQ
 			/*
-- 
1.7.5.4

