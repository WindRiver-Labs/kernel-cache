From c3b807c7af1ae9852db87d4bbf267891f821f7bb Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 28 Jan 2016 13:49:01 +0800
Subject: [PATCH] arm: dts: zynq: disable i2c in PL part

There is something seriously wrong if i2c in PL part is enabled, which will
incur no interrupt coming, and the kernel scheduler is dead as well without
any calltraces or oops even if the related debugging option enabled.

And the further debugging is not easy since there is not so much documents
about these PL parts. What's more, the related PL design about this version
of mini-ITX is not available from Xilinx website.

So disable I2C of PL to avoid this sudden and silent dead.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/zynq-mini-itx-adv7511.dts |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/zynq-mini-itx-adv7511.dts b/arch/arm/boot/dts/zynq-mini-itx-adv7511.dts
index fdbe8d6..6299205 100644
--- a/arch/arm/boot/dts/zynq-mini-itx-adv7511.dts
+++ b/arch/arm/boot/dts/zynq-mini-itx-adv7511.dts
@@ -24,6 +24,7 @@ fpag-axi@0 {
 
 		i2c@41600000 {
 			compatible = "xlnx,axi-iic-1.02.a", "xlnx,xps-iic-2.00.a";
+			status = "disabled";
 			interrupt-parent = <&intc>;
 			interrupts = <0 58 4>;
 			reg = <0x41600000 0x10000>;
-- 
1.7.5.4

