From cc097b282e0bbddc682eed1547f56a8228629433 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Fri, 25 Apr 2014 19:38:41 -0700
Subject: [PATCH 135/290] drm: xilinx: vtc: Return IRQ_NONE for no interrupt

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Return IRQ_NONE in the interrupt handler, when there's no interrupt.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 682b7632d5d96997b70f9cfecf3afb1e20efefd7)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_vtc.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/gpu/drm/xilinx/xilinx_vtc.c b/drivers/gpu/drm/xilinx/xilinx_vtc.c
index 741713e..160f720 100644
--- a/drivers/gpu/drm/xilinx/xilinx_vtc.c
+++ b/drivers/gpu/drm/xilinx/xilinx_vtc.c
@@ -509,6 +509,9 @@ static irqreturn_t xilinx_vtc_intr_handler(int irq, void *data)
 
 	u32 intr = xilinx_vtc_intr_get(vtc);
 
+	if (!intr)
+		return IRQ_NONE;
+
 	if ((intr & VTC_IXR_G_VBLANK) && (vtc->vblank_fn))
 		vtc->vblank_fn(vtc->vblank_data);
 
-- 
2.0.2

