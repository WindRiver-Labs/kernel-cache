From e5341688aea443aac5af206437f300e2e3aa9c6d Mon Sep 17 00:00:00 2001
From: Nicolae Rosia <nicolae.rosia@certsign.ro>
Date: Mon, 5 Jan 2015 18:10:10 +0200
Subject: [PATCH 022/456] ARM: zynq: xilinx_axidma: get rid of start_transfer
 function pointer of struct xilinx_dma_chan

start_transfer always get assigned the same function, there's no
reason to keep it.

Signed-off-by: Nicolae Rosia <nicolae.rosia@certsign.ro>
Acked-by: Kedareswara rao Appana <appanad@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 41b03002185869589cb96ee7fbf974a5759f84ab)
---
 drivers/dma/xilinx/xilinx_axidma.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axidma.c b/drivers/dma/xilinx/xilinx_axidma.c
index a1bee1f..dfbfe03 100644
--- a/drivers/dma/xilinx/xilinx_axidma.c
+++ b/drivers/dma/xilinx/xilinx_axidma.c
@@ -127,7 +127,6 @@ struct xilinx_dma_chan {
 	int err;			/* Channel has errors */
 	struct tasklet_struct tasklet;	/* Cleanup work after irq */
 	u32 private;			/* Match info for channel request */
-	void (*start_transfer)(struct xilinx_dma_chan *chan);
 	struct xilinx_dma_config config;
 					/* Device configuration info */
 };
@@ -556,7 +555,7 @@ static irqreturn_t dma_intr_handler(int irq, void *data)
 
 	if (stat & XILINX_DMA_XR_IRQ_IOC_MASK) {
 		xilinx_dma_update_completed_cookie(chan);
-		chan->start_transfer(chan);
+		xilinx_dma_start_transfer(chan);
 	}
 
 	tasklet_schedule(&chan->tasklet);
@@ -903,8 +902,6 @@ static int xilinx_dma_chan_probe(struct xilinx_dma_device *xdev,
 		return err;
 	}
 
-	chan->start_transfer = xilinx_dma_start_transfer;
-
 	if (of_device_is_compatible(node, "xlnx,axi-dma-mm2s-channel")) {
 		chan->regs = xdev->regs;
 		chan->id = 0;
-- 
1.7.5.4

