From defe6618160dfaf2cc820cdd60a2fc1b536b78f0 Mon Sep 17 00:00:00 2001
From: Li Zhou <li.zhou@windriver.com>
Date: Tue, 12 Jul 2016 13:36:03 +0800
Subject: [PATCH] spi: Solve the conflicts in spi_master.flag definitions

When merging below two commits, there are conflicts between the
definitions of SPI_MASTER_U_PAGE/SPI_MASTER_QUAD_MODE and
SPI_MASTER_MUST_RX/SPI_MASTER_MUST_TX.
(1)spi: Introduce macro to set quad spi mode
(2)spi: Provide core support for full duplex devices

These definitions keep the original values in above commits.
In fact, they should get different values in sequence, just as the
newest Xilinx upstream code does here:
https://github.com/Xilinx/linux-xlnx.git

Signed-off-by: Li Zhou <li.zhou@windriver.com>
---
 include/linux/spi/spi.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/linux/spi/spi.h b/include/linux/spi/spi.h
index cf95f63..d2679fd 100644
--- a/include/linux/spi/spi.h
+++ b/include/linux/spi/spi.h
@@ -352,10 +352,10 @@ struct spi_master {
 #define SPI_MASTER_HALF_DUPLEX	BIT(0)		/* can't do full duplex */
 #define SPI_MASTER_NO_RX	BIT(1)		/* can't do buffer read */
 #define SPI_MASTER_NO_TX	BIT(2)		/* can't do buffer write */
-#define SPI_MASTER_U_PAGE	BIT(3)		/* select upper flash */
-#define SPI_MASTER_QUAD_MODE	BIT(4)		/* support quad mode */
 #define SPI_MASTER_MUST_RX      BIT(3)		/* requires rx */
 #define SPI_MASTER_MUST_TX      BIT(4)		/* requires tx */
+#define SPI_MASTER_U_PAGE	BIT(5)		/* select upper flash */
+#define SPI_MASTER_QUAD_MODE	BIT(6)		/* support quad mode */
 
 	/* lock and mutex for SPI bus locking */
 	spinlock_t		bus_lock_spinlock;
-- 
1.7.5.4

