From 3edfe5bae90b468c5ff9d1b7042334e6b8595a25 Mon Sep 17 00:00:00 2001
From: Harini Katakam <harini.katakam@xilinx.com>
Date: Fri, 7 Mar 2014 18:58:26 +0530
Subject: [PATCH 078/509] SPI: zynq: Use readl_relaxed and writel_relaxed

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 3770525796275a6a9413f32075c8878874266caf

Use readl_relaxed and writel_relaxed because
it has the advantage of taking care of endian-ness.
and also as raw_readl and raw_writel are not recommended
according to the below thread:
http://comments.gmane.org/gmane.linux.ports.arm.kernel/117626

Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/spi/spi-zynq.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/spi/spi-zynq.c b/drivers/spi/spi-zynq.c
index 479a99d..3314ab8 100644
--- a/drivers/spi/spi-zynq.c
+++ b/drivers/spi/spi-zynq.c
@@ -105,8 +105,8 @@
 #define ZYNQ_SPI_FIFO_DEPTH	128
 
 /* Macros for the SPI controller read/write */
-#define zynq_spi_read(addr)	__raw_readl(addr)
-#define zynq_spi_write(addr, val)	__raw_writel((val), (addr))
+#define zynq_spi_read(addr)	readl_relaxed(addr)
+#define zynq_spi_write(addr, val)	writel_relaxed((val), (addr))
 
 /* Driver state - suspend/ready */
 enum driver_state_val {
-- 
1.7.5.4

