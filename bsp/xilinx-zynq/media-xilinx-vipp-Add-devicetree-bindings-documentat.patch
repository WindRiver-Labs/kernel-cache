From 6790f56b1f61aceba175f8d432c6497dba9d8ec6 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Mon, 2 Jun 2014 08:38:58 -0700
Subject: [PATCH 297/456] media: xilinx: vipp: Add devicetree bindings
 documentation

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Add devicetree bindings documentation for the Xilinx Video IP pipeline driver.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 1069d5737c9a13636f4b05c760e88b4d25dd44fa)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 .../devicetree/bindings/media/xilinx/video.txt     |    3 +
 .../bindings/media/xilinx/xlnx,axi-video.txt       |   55 ++++++++++++++++++++
 2 files changed, 58 insertions(+), 0 deletions(-)
 create mode 100644 Documentation/devicetree/bindings/media/xilinx/xlnx,axi-video.txt

diff --git a/Documentation/devicetree/bindings/media/xilinx/video.txt b/Documentation/devicetree/bindings/media/xilinx/video.txt
index 10fd006..61f818f 100644
--- a/Documentation/devicetree/bindings/media/xilinx/video.txt
+++ b/Documentation/devicetree/bindings/media/xilinx/video.txt
@@ -9,6 +9,9 @@ Each video IP core is represented by an AMBA bus child node in the device
 tree using bindings documented in this directory. Connections between the IP
 cores are represented as defined in ../video-interfaces.txt.
 
+The whole  pipeline is represented by an AMBA bus child node in the device
+tree using bindings documented in ./xlnx,axi-video.txt.
+
 Common properties
 -----------------
 
diff --git a/Documentation/devicetree/bindings/media/xilinx/xlnx,axi-video.txt b/Documentation/devicetree/bindings/media/xilinx/xlnx,axi-video.txt
new file mode 100644
index 0000000..af140b4
--- /dev/null
+++ b/Documentation/devicetree/bindings/media/xilinx/xlnx,axi-video.txt
@@ -0,0 +1,55 @@
+Xilinx Video IP Pipeline (VIPP)
+-------------------------------
+
+General concept
+---------------
+
+Xilinx video IP pipeline processes video streams through one or more Xilinx
+video IP cores. Each video IP core is represented as documented in video.txt
+and IP core specific documentation, xlnx,axi-*.txt, in this directory. The DT
+node of the VIPP represents as a top level node of the pipeline and defines
+mappings between DMAs and the video IP cores.
+
+Required properties:
+
+- compatible: Must be "xlnx,axi-video".
+
+- dmas, dma-names: List of one DMA specifier and identifier string (as defined
+  in Documentation/devicetree/bindings/dma/dma.txt) per port. Each port
+  requires a DMA channel with the identifier string set to "port" followed by
+  the port index.
+
+- ports: Video port, using the DT bindings defined in ../video-interfaces.txt.
+
+Required port properties:
+
+- direction: should be either "input" or "output" depending on the direction
+  of stream.
+
+Example:
+
+	axi_video_cap {
+		compatible = "xlnx,axi-video";
+		dmas = <&axi_vdma_1 1>, <&axi_vdma_3 1>;
+		dma-names = "port0", "port1";
+
+		ports {
+			#address-cells = <1>;
+			#size-cells = <0>;
+
+			port@0 {
+				reg = <0>;
+				direction = "input";
+				vcap0_in0: endpoint {
+					remote-endpoint = <&scaler0_out>;
+				};
+			};
+			port@1 {
+				reg = <1>;
+				direction = "input";
+				vcap0_in1: endpoint {
+					remote-endpoint = <&switch_out1>;
+				};
+			};
+		};
+	};
-- 
1.7.5.4

