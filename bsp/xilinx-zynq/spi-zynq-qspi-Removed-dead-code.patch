From 275a7e0403accc1bf093c57c5834eb3e0388fc9a Mon Sep 17 00:00:00 2001
From: Punnaiah Choudary Kalluri <punnaia@xilinx.com>
Date: Mon, 7 Apr 2014 19:46:51 +0530
Subject: [PATCH 063/182] spi: zynq-qspi: Removed dead code

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Remove check for byte_to_receive < 0 as this is unecessary.

Signed-off-by: Punnaiah Choudary Kalluri <punnaia@xilinx.com>
Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 8aa82a3fa84e8c10d32272f315ad44a7c13e85b9)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/spi/spi-zynq-qspi.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/drivers/spi/spi-zynq-qspi.c b/drivers/spi/spi-zynq-qspi.c
index 112fce1..b79a6a9 100644
--- a/drivers/spi/spi-zynq-qspi.c
+++ b/drivers/spi/spi-zynq-qspi.c
@@ -227,8 +227,6 @@ static void zynq_qspi_copy_read_data(struct zynq_qspi *xqspi, u32 data, u8 size)
 		xqspi->rxbuf += size;
 	}
 	xqspi->bytes_to_receive -= size;
-	if (xqspi->bytes_to_receive < 0)
-		xqspi->bytes_to_receive = 0;
 }
 
 /**
@@ -249,8 +247,6 @@ static void zynq_qspi_copy_write_data(struct zynq_qspi *xqspi, u32 *data,
 	}
 
 	xqspi->bytes_to_transfer -= size;
-	if (xqspi->bytes_to_transfer < 0)
-		xqspi->bytes_to_transfer = 0;
 }
 
 /**
@@ -409,8 +405,6 @@ static void zynq_qspi_fill_tx_fifo(struct zynq_qspi *xqspi, u32 size)
 					ZYNQ_QSPI_TXD_00_00_OFFSET, 0x00);
 		}
 		xqspi->bytes_to_transfer -= 4;
-		if (xqspi->bytes_to_transfer < 0)
-			xqspi->bytes_to_transfer = 0;
 	}
 }
 
@@ -468,8 +462,6 @@ static irqreturn_t zynq_qspi_irq(int irq, void *dev_id)
 							ZYNQ_QSPI_RXD_OFFSET);
 				}
 				xqspi->bytes_to_receive -= 4;
-				if (xqspi->bytes_to_receive < 0)
-					xqspi->bytes_to_receive = 0;
 			}
 			rxindex++;
 		}
-- 
1.7.5.4

