From 30178329872b58366bfc42d5549fab4633691508 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Thu, 7 Nov 2013 16:53:21 +0100
Subject: [PATCH 394/509] char: devcfg: Clean driver probe function

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 020aee6126ef8781e66b0e481834977106e825c5

- Remove unneeded error message for devm_kzalloc
- Remove unneeded error message for devm_ioremap_resource

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/char/xilinx_devcfg.c |    9 ++-------
 1 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/drivers/char/xilinx_devcfg.c b/drivers/char/xilinx_devcfg.c
index f7f538a..872f231 100644
--- a/drivers/char/xilinx_devcfg.c
+++ b/drivers/char/xilinx_devcfg.c
@@ -1892,18 +1892,13 @@ static int xdevcfg_drv_probe(struct platform_device *pdev)
 	struct device *dev;
 
 	drvdata = devm_kzalloc(&pdev->dev, sizeof(*drvdata), GFP_KERNEL);
-	if (!drvdata) {
-		dev_err(&pdev->dev,
-				"Couldn't allocate device private record\n");
+	if (!drvdata)
 		return -ENOMEM;
-	}
 
 	res = platform_get_resource(pdev, IORESOURCE_MEM, 0);
 	drvdata->base_address = devm_ioremap_resource(&pdev->dev, res);
-	if (IS_ERR(drvdata->base_address)) {
-		dev_err(&pdev->dev, "ioremap() failed\n");
+	if (IS_ERR(drvdata->base_address))
 		return PTR_ERR(drvdata->base_address);
-	}
 
 	drvdata->irq = platform_get_irq(pdev, 0);
 	retval = devm_request_irq(&pdev->dev, drvdata->irq, &xdevcfg_irq,
-- 
1.7.5.4

