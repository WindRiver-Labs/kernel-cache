From 7d698500893d1a32ae66de6583baf09204f4a67f Mon Sep 17 00:00:00 2001
From: Harini Katakam <harini.katakam@xilinx.com>
Date: Tue, 6 May 2014 14:59:08 +0530
Subject: [PATCH 145/509] spi: cadence: Probe and remove cleanup

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 3a70c079dfced77101c14b445ab26c6d5392d1d8

Remove unbalanced master_put().
Remove unecessary prints.

Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/spi/spi-cadence.c |    5 -----
 1 files changed, 0 insertions(+), 5 deletions(-)

diff --git a/drivers/spi/spi-cadence.c b/drivers/spi/spi-cadence.c
index 7c4bdea..7569a4d 100644
--- a/drivers/spi/spi-cadence.c
+++ b/drivers/spi/spi-cadence.c
@@ -554,9 +554,6 @@ static int cdns_spi_probe(struct platform_device *pdev)
 		goto clk_dis_all;
 	}
 
-	dev_info(&pdev->dev, "at 0x%08X mapped to 0x%08X, irq=%d\n",
-		 res->start, (u32 __force)xspi->regs, irq);
-
 	return ret;
 
 clk_dis_all:
@@ -590,9 +587,7 @@ static int cdns_spi_remove(struct platform_device *pdev)
 	clk_disable_unprepare(xspi->pclk);
 
 	spi_unregister_master(master);
-	spi_master_put(master);
 
-	dev_dbg(&pdev->dev, "remove succeeded\n");
 	return 0;
 }
 
-- 
1.7.5.4

