From 40e3c551352a434932019cc17d21b8916ab756b3 Mon Sep 17 00:00:00 2001
From: Harini Katakam <harini.katakam@xilinx.com>
Date: Fri, 21 Feb 2014 13:28:35 +0530
Subject: [PATCH 196/509] I2C: cadence: Reduced I2C timeout

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 76adff33c01adf7dd53233d0ab7eebe7250f95a1

Reduced CDNS_I2C_TIMEOUT from 50 seconds to 2 seconds.
It is about twice the estimation for 1KB data @ 100KHz.

Reported-by: Andrew Worsley <amworsley@gmail.com>
Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/i2c/busses/i2c-cadence.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/i2c/busses/i2c-cadence.c b/drivers/i2c/busses/i2c-cadence.c
index 0e5404a..105960e 100644
--- a/drivers/i2c/busses/i2c-cadence.c
+++ b/drivers/i2c/busses/i2c-cadence.c
@@ -83,7 +83,7 @@
 #define CDNS_I2C_IXR_COMP		BIT(0)
 
 #define CDNS_I2C_FIFO_DEPTH	16		/* FIFO Depth */
-#define CDNS_I2C_TIMEOUT	(50 * HZ)	/* Timeout for bus busy check */
+#define CDNS_I2C_TIMEOUT	(2 * HZ)	/* Timeout for bus busy check */
 #define CDNS_I2C_ENABLED_INTR	0x2EF		/* Enabled Interrupts */
 
 /* FIFO depth at which the DATA interrupt occurs */
-- 
1.7.5.4

