From fd6704adec73500401b62d384b9a47dd5c020c42 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Fri, 12 Dec 2014 09:12:04 +0100
Subject: [PATCH 363/456] net: ll_temac: Remove null pointer checking in front
 of kfree

kfree is checking null pointers by default.

This patch will remove warning reported by coccicheck.
Warning:
./drivers/net/ethernet/xilinx/ll_temac_main.c:228:2-7: WARNING: NULL
check before freeing functions like kfree, debugfs_remove,
debugfs_remove_recursive or usb_free_urb is not needed. Maybe consider
reorganizing relevant code to avoid passing NULL values.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit d0c7770635f7491f5d5f43da45a72b590f81a2db)
---
 drivers/net/ethernet/xilinx/ll_temac_main.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/xilinx/ll_temac_main.c b/drivers/net/ethernet/xilinx/ll_temac_main.c
index 9ed5381..c0cce34 100644
--- a/drivers/net/ethernet/xilinx/ll_temac_main.c
+++ b/drivers/net/ethernet/xilinx/ll_temac_main.c
@@ -225,8 +225,7 @@ static void temac_dma_bd_release(struct net_device *ndev)
 		dma_free_coherent(ndev->dev.parent,
 				sizeof(*lp->tx_bd_v) * TX_BD_NUM,
 				lp->tx_bd_v, lp->tx_bd_p);
-	if (lp->rx_skb)
-		kfree(lp->rx_skb);
+	kfree(lp->rx_skb);
 }
 
 /**
-- 
1.7.5.4

