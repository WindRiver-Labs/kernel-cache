From 5f2066d951ea97bfd6a3a4ce5cca0ba16e529a0c Mon Sep 17 00:00:00 2001
From: Harini Katakam <harini.katakam@xilinx.com>
Date: Tue, 6 May 2014 14:59:10 +0530
Subject: [PATCH 147/509] spi: cadence: Remove MODULE_ALIAS; add xilinx
 compatible string too

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit a9d400b7c10702f09c12e05b8b20102e0e3fe316

Remove MODULE_ALIAS.
Add xilinx specific compatible string along with IP compatible string
according to mainline suggestions.

Signed-off-by: Harini Katakam <harinik@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/spi/spi-cadence.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/drivers/spi/spi-cadence.c b/drivers/spi/spi-cadence.c
index 88c653a..3278361 100644
--- a/drivers/spi/spi-cadence.c
+++ b/drivers/spi/spi-cadence.c
@@ -652,10 +652,8 @@ static int __maybe_unused cdns_spi_resume(struct device *dev)
 static SIMPLE_DEV_PM_OPS(cdns_spi_dev_pm_ops, cdns_spi_suspend,
 			 cdns_spi_resume);
 
-/* Work with hotplug and coldplug */
-MODULE_ALIAS("platform:" CDNS_SPI_NAME);
-
 static struct of_device_id cdns_spi_of_match[] = {
+	{ .compatible = "xlnx,zynq-spi-r1p6" },
 	{ .compatible = "cdns,spi-r1p6" },
 	{ /* end of table */ }
 };
-- 
1.7.5.4

