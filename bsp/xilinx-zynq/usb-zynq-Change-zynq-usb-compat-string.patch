From 25433b360e257ca6afe34dc9eb3463db6502bcdb Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 4 Feb 2014 15:40:16 +0100
Subject: [PATCH 392/509] usb: zynq: Change zynq usb compat string

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit a6ef084c8190d0393eda71acc95882ce87c44230

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/boot/dts/zynq-zc702.dts |    2 +-
 arch/arm/boot/dts/zynq-zc706.dts |    2 +-
 arch/arm/boot/dts/zynq-zed.dts   |    2 +-
 drivers/usb/host/zynq-dr-of.c    |    2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/zynq-zc702.dts b/arch/arm/boot/dts/zynq-zc702.dts
index e28c26a..2b2b951 100644
--- a/arch/arm/boot/dts/zynq-zc702.dts
+++ b/arch/arm/boot/dts/zynq-zc702.dts
@@ -396,7 +396,7 @@
 		} ;
 		ps7_usb_0: ps7-usb@e0002000 {
 			clocks = <&clkc 28>;
-			compatible = "xlnx,ps7-usb-1.00.a";
+			compatible = "xlnx,ps7-usb-1.00.a", "xlnx,zynq-usb-1.00.a";
 			dr_mode = "host";
 			interrupt-parent = <&ps7_scugic_0>;
 			interrupts = <0 21 4>;
diff --git a/arch/arm/boot/dts/zynq-zc706.dts b/arch/arm/boot/dts/zynq-zc706.dts
index 19c1adb..1c1ddaa 100644
--- a/arch/arm/boot/dts/zynq-zc706.dts
+++ b/arch/arm/boot/dts/zynq-zc706.dts
@@ -389,7 +389,7 @@
 		} ;
 		ps7_usb_0: ps7-usb@e0002000 {
 			clocks = <&clkc 28>;
-			compatible = "xlnx,ps7-usb-1.00.a";
+			compatible = "xlnx,ps7-usb-1.00.a", "xlnx,zynq-usb-1.00.a";
 			dr_mode = "host";
 			interrupt-parent = <&ps7_scugic_0>;
 			interrupts = <0 21 4>;
diff --git a/arch/arm/boot/dts/zynq-zed.dts b/arch/arm/boot/dts/zynq-zed.dts
index 38b4a9b..282b20b 100644
--- a/arch/arm/boot/dts/zynq-zed.dts
+++ b/arch/arm/boot/dts/zynq-zed.dts
@@ -304,7 +304,7 @@
 		} ;
 		ps7_usb_0: ps7-usb@e0002000 {
 			clocks = <&clkc 28>;
-			compatible = "xlnx,ps7-usb-1.00.a";
+			compatible = "xlnx,ps7-usb-1.00.a", "xlnx,zynq-usb-1.00.a";
 			dr_mode = "host";
 			interrupt-parent = <&ps7_scugic_0>;
 			interrupts = <0 21 4>;
diff --git a/drivers/usb/host/zynq-dr-of.c b/drivers/usb/host/zynq-dr-of.c
index 648c548..0613630 100644
--- a/drivers/usb/host/zynq-dr-of.c
+++ b/drivers/usb/host/zynq-dr-of.c
@@ -280,7 +280,7 @@ static SIMPLE_DEV_PM_OPS(zynq_pm_ops, zynq_dr_of_suspend,
 		zynq_dr_of_resume);
 
 static const struct of_device_id zynq_dr_of_match[] = {
-	{ .compatible = "xlnx,ps7-usb-1.00.a" },
+	{ .compatible = "xlnx,zynq-usb-1.00.a" },
 	{},
 };
 MODULE_DEVICE_TABLE(of, zynq_dr_of_match);
-- 
1.7.5.4

