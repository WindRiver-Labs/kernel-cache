From a8c8da91b02c1275fb792548f3827bb1e132dbac Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Fri, 25 Jul 2014 16:44:56 -0700
Subject: [PATCH 160/290] drm: xilinx: plane: Use 'dma' for the DMA channel
 name

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

As VDMA dependency is being removed, make the dma channel name
more generic, and use 'dma' instead of 'vdma'. Update the documentation
with a new dma-name string.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit cb4264a7e3a732799996e1b5b939731f7609dde8)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 Documentation/devicetree/bindings/drm/xilinx/xilinx_drm.txt | 8 ++++----
 drivers/gpu/drm/xilinx/xilinx_drm_plane.c                   | 2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/Documentation/devicetree/bindings/drm/xilinx/xilinx_drm.txt b/Documentation/devicetree/bindings/drm/xilinx/xilinx_drm.txt
index d6e817f..0093b04 100644
--- a/Documentation/devicetree/bindings/drm/xilinx/xilinx_drm.txt
+++ b/Documentation/devicetree/bindings/drm/xilinx/xilinx_drm.txt
@@ -34,7 +34,7 @@ Required planes properties:
 
 Required plane properties:
  - dmas: the phandle list of DMA specifiers
- - dma-names: the indentifier strings for DMAs
+ - dma-names: the indentifier strings for DMAs. The value should be "dma"
  - xlnx,rgb2yuv: the phandle for rgb2ycrcb IP if used for plane
  - xlnx,cresample: the phandle for chroma resampler IP if used for plane
 
@@ -53,7 +53,7 @@ vdma - [remap] - rgb2yuv - cresample - [axi2vid] - adv7511
 			xlnx,pixel-format = "yuv422";
 			plane0 {
 				dma = <&axi_vdma_0>;
-				dma-names = "vdma";
+				dma-names = "dma";
 				xlnx,rgb2yuv = <&v_rgb2ycrcb_0>;
 				xlnx,cresample = <&v_cresample_0>;
 			};
@@ -77,11 +77,11 @@ vdma - [remap] - rgb2yuv -|                               |
 			xlnx,pixel-format = "yuv422";
 			plane0 {
 				dma = <&axi_vdma_0>;
-				dma-names = "vdma";
+				dma-names = "dma";
 			};
 			plane1 {
 				dma = <&axi_vdma_1>;
-				dma-names = "vdma";
+				dma-names = "dma";
 				xlnx,rgb2yuv = <&v_rgb2ycrcb_0>;
 			};
 		};
diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_plane.c b/drivers/gpu/drm/xilinx/xilinx_drm_plane.c
index 820affc..1c1d20e 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_plane.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_plane.c
@@ -613,7 +613,7 @@ xilinx_drm_plane_create(struct xilinx_drm_plane_manager *manager,
 	plane->format = -1;
 	DRM_DEBUG_KMS("plane->id: %d\n", plane->id);
 
-	plane->dma.chan = of_dma_request_slave_channel(plane_node, "vdma");
+	plane->dma.chan = of_dma_request_slave_channel(plane_node, "dma");
 	if (IS_ERR(plane->dma.chan)) {
 		DRM_ERROR("failed to request dma channel\n");
 		ret = PTR_ERR(plane->dma.chan);
-- 
2.0.2

