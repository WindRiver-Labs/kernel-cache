From 735f91f1bf7b8296fcd9a84d4e5b1ff3f29e677c Mon Sep 17 00:00:00 2001
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date: Wed, 22 May 2013 23:08:00 +0200
Subject: [PATCH 299/509] dma: xilinx: vdma: Don't increment the DMA engine
 channel count

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 8564a03656482dc165d4748799e8a458d46bf605

The counter is updated by dma_async_device_register(), don't increment
it manually.

Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Acked-by: Srikanth Thokala <sthokal@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/dma/xilinx/xilinx_axivdma.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axivdma.c b/drivers/dma/xilinx/xilinx_axivdma.c
index 04b74df..316d821 100644
--- a/drivers/dma/xilinx/xilinx_axivdma.c
+++ b/drivers/dma/xilinx/xilinx_axivdma.c
@@ -1140,7 +1140,6 @@ static int xilinx_vdma_chan_probe(struct xilinx_vdma_device *xdev,
 	/* Add the channel to DMA device channel list */
 	list_add_tail(&chan->common.device_node, &xdev->common.channels);
 	xdev->chan[chan->id] = chan;
-	xdev->common.chancnt++;
 
 	return 0;
 
-- 
1.7.5.4

