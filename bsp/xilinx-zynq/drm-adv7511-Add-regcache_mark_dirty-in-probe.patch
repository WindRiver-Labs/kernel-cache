From 69c15b916e98d023f49768df616dede114034d8a Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Wed, 4 Jun 2014 10:29:42 -0700
Subject: [PATCH 190/456] drm: adv7511: Add regcache_mark_dirty() in probe()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Mark the register cache as dirty in probe(), otherwise the regcache doesn't
get synced properly in adv7511_encoder_dpms(). This results in some issue,
such as output format mismatch between adv7511 and some monitor.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Lars-Peter Clausen <lars@metafoo.de>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 8a6f15aa13898e4a1596b2d3853da6575a8fba0f)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/i2c/adv7511_core.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i2c/adv7511_core.c b/drivers/gpu/drm/i2c/adv7511_core.c
index 08a680a..43ce011 100644
--- a/drivers/gpu/drm/i2c/adv7511_core.c
+++ b/drivers/gpu/drm/i2c/adv7511_core.c
@@ -958,6 +958,8 @@ static int adv7511_probe(struct i2c_client *i2c, const struct i2c_device_id *id)
 
 	adv7511_set_link_config(adv7511, &link_config);
 
+	regcache_mark_dirty(adv7511->regmap);
+
 	return 0;
 
 err_i2c_unregister_device:
-- 
1.7.5.4

