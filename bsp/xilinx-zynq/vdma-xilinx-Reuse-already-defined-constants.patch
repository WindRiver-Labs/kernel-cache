From ea0d862f3a279196c1dcd2eaed3a16ca4e67ac22 Mon Sep 17 00:00:00 2001
From: Srikanth Thokala <srikanth.thokala@xilinx.com>
Date: Fri, 13 Dec 2013 14:37:30 +0530
Subject: [PATCH 334/509] vdma: xilinx: Reuse already defined constants

https://github.com/analogdevicesinc/linux.git xcomm_zynq
commit 6ee11d08b786cdc9a5b983dc3b36433ee01bbe1f

Use already defined constants instead of using the direct values.

Signed-off-by: Srikanth Thokala <sthokal@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/dma/xilinx/xilinx_axivdma.c |   28 ++++++++++++++++++++--------
 1 files changed, 20 insertions(+), 8 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axivdma.c b/drivers/dma/xilinx/xilinx_axivdma.c
index 3b6c7c4..6ccd850 100644
--- a/drivers/dma/xilinx/xilinx_axivdma.c
+++ b/drivers/dma/xilinx/xilinx_axivdma.c
@@ -43,29 +43,33 @@
 
 /* Control Registers */
 #define XILINX_VDMA_REG_DMACR			0x0000
-#define XILINX_VDMA_DMACR_DELAY_MASK		(0xff << 24)
 #define XILINX_VDMA_DMACR_DELAY_MAX		0xff
 #define XILINX_VDMA_DMACR_DELAY_SHIFT		24
-#define XILINX_VDMA_DMACR_FRAME_COUNT_MASK	(0xff << 16)
 #define XILINX_VDMA_DMACR_FRAME_COUNT_MAX	0xff
 #define XILINX_VDMA_DMACR_FRAME_COUNT_SHIFT	16
 #define XILINX_VDMA_DMACR_ERR_IRQ		(1 << 14)
 #define XILINX_VDMA_DMACR_DLY_CNT_IRQ		(1 << 13)
 #define XILINX_VDMA_DMACR_FRM_CNT_IRQ		(1 << 12)
-#define XILINX_VDMA_DMACR_MASTER_MASK		(0xf << 8)
 #define XILINX_VDMA_DMACR_MASTER_SHIFT		8
-#define XILINX_VDMA_DMACR_FSYNCSRC_MASK		(3 << 5)
 #define XILINX_VDMA_DMACR_FSYNCSRC_SHIFT	5
 #define XILINX_VDMA_DMACR_FRAMECNT_EN		(1 << 4)
 #define XILINX_VDMA_DMACR_GENLOCK_EN		(1 << 3)
 #define XILINX_VDMA_DMACR_RESET			(1 << 2)
 #define XILINX_VDMA_DMACR_CIRC_EN		(1 << 1)
 #define XILINX_VDMA_DMACR_RUNSTOP		(1 << 0)
+#define XILINX_VDMA_DMACR_DELAY_MASK		\
+				(XILINX_VDMA_DMACR_DELAY_MAX << \
+				XILINX_VDMA_DMACR_DELAY_SHIFT)
+#define XILINX_VDMA_DMACR_FRAME_COUNT_MASK	\
+				(XILINX_VDMA_DMACR_FRAME_COUNT_MAX << \
+				XILINX_VDMA_DMACR_FRAME_COUNT_SHIFT)
+#define XILINX_VDMA_DMACR_MASTER_MASK		\
+				(0xf << XILINX_VDMA_DMACR_MASTER_SHIFT)
+#define XILINX_VDMA_DMACR_FSYNCSRC_MASK		\
+				(3 << XILINX_VDMA_DMACR_FSYNCSRC_SHIFT)
 
 #define XILINX_VDMA_REG_DMASR			0x0004
-#define XILINX_VDMA_DMASR_DELAY_MASK		(0xff << 24)
 #define XILINX_VDMA_DMASR_DELAY_SHIFT		24
-#define XILINX_VDMA_DMASR_FRAME_COUNT_MASK	(0xff << 16)
 #define XILINX_VDMA_DMASR_FRAME_COUNT_SHIFT	16
 #define XILINX_VDMA_DMASR_EOL_LATE_ERR		(1 << 15)
 #define XILINX_VDMA_DMASR_ERR_IRQ		(1 << 14)
@@ -81,6 +85,10 @@
 #define XILINX_VDMA_DMASR_DMA_INT_ERR		(1 << 4)
 #define XILINX_VDMA_DMASR_IDLE			(1 << 1)
 #define XILINX_VDMA_DMASR_HALTED		(1 << 0)
+#define XILINX_VDMA_DMASR_DELAY_MASK		\
+				(0xff << XILINX_VDMA_DMASR_DELAY_SHIFT)
+#define XILINX_VDMA_DMASR_FRAME_COUNT_MASK	\
+				(0xff << XILINX_VDMA_DMASR_FRAME_COUNT_SHIFT)
 
 #define XILINX_VDMA_REG_CURDESC			0x0008
 #define XILINX_VDMA_REG_TAILDESC		0x0010
@@ -98,10 +106,14 @@
 #define XILINX_VDMA_REG_HSIZE			0x0004
 
 #define XILINX_VDMA_REG_FRMDLY_STRIDE		0x0008
-#define XILINX_VDMA_FRMDLY_STRIDE_FRMDLY_MASK	(0x1f << 24)
 #define XILINX_VDMA_FRMDLY_STRIDE_FRMDLY_SHIFT	24
-#define XILINX_VDMA_FRMDLY_STRIDE_STRIDE_MASK	(0xffff << 0)
 #define XILINX_VDMA_FRMDLY_STRIDE_STRIDE_SHIFT	0
+#define XILINX_VDMA_FRMDLY_STRIDE_FRMDLY_MASK	\
+				(0x1f <<	\
+				XILINX_VDMA_FRMDLY_STRIDE_FRMDLY_SHIFT)
+#define XILINX_VDMA_FRMDLY_STRIDE_STRIDE_MASK	\
+				(0xffff <<	\
+				XILINX_VDMA_FRMDLY_STRIDE_STRIDE_MASK)
 
 #define XILINX_VDMA_REG_START_ADDRESS(n)	(0x000c + 4 * (n))
 
-- 
1.7.5.4

