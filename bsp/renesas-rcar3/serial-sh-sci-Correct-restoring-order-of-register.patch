From cb971c5e0165e92fdb84b37f4f40d2b96b277594 Mon Sep 17 00:00:00 2001
From: Hien Dang <hien.dang.eb@renesas.com>
Date: Thu, 13 Oct 2016 18:53:47 +0700
Subject: [PATCH 1688/2066] serial: sh-sci: Correct restoring order of
 register

This patch is to make sure that interrupt registers are restored
after all other settings.
The order of register list is equal to the order of register setting.

Signed-off-by: Hien Dang <hien.dang.eb@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/tty/serial/sh-sci.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/drivers/tty/serial/sh-sci.c b/drivers/tty/serial/sh-sci.c
index 9ac9001..46ba6b4 100644
--- a/drivers/tty/serial/sh-sci.c
+++ b/drivers/tty/serial/sh-sci.c
@@ -461,11 +461,11 @@ static struct plat_sci_reg sci_regmap[SCIx_NR_REGTYPES][SCIx_NR_REGS] = {
 static struct hw_register scif0_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif0_ip = {
@@ -478,11 +478,11 @@ static struct rcar_ip scif0_ip = {
 static struct hw_register scif1_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif1_ip = {
@@ -495,11 +495,11 @@ static struct rcar_ip scif1_ip = {
 static struct hw_register scif2_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif2_ip = {
@@ -512,11 +512,11 @@ static struct rcar_ip scif2_ip = {
 static struct hw_register scif3_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif3_ip = {
@@ -529,11 +529,11 @@ static struct rcar_ip scif3_ip = {
 static struct hw_register scif4_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif4_ip = {
@@ -546,11 +546,11 @@ static struct rcar_ip scif4_ip = {
 static struct hw_register scif5_ip_regs[] = {
 	{"SCSMR",  0x0000, 16, 0},
 	{"SCBRR",  0x0004,  8, 0},
-	{"SCSCR",  0x0008, 16, 0},
 	{"SCFCR",  0x0018, 16, 0},
 	{"SCSPTR", 0x0020, 16, 0},
 	{"DL",     0x0030, 16, 0},
 	{"CKS",    0x0034, 16, 0},
+	{"SCSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip scif5_ip = {
@@ -563,13 +563,13 @@ static struct rcar_ip scif5_ip = {
 static struct hw_register hscif0_ip_regs[] = {
 	{"HSSMR",  0x0000, 16, 0},
 	{"HSBRR",  0x0004,  8, 0},
-	{"HSSCR",  0x0008, 16, 0},
 	{"HSFCR",  0x0018, 16, 0},
 	{"HSSPTR", 0x0020, 16, 0},
 	{"HSSRR",  0x0040, 16, 0},
 	{"HSRTGR", 0x0050, 16, 0},
 	{"HSRTRGR", 0x0054, 16, 0},
 	{"HSTTRGR", 0x0058, 16, 0},
+	{"HSSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip hscif0_ip = {
@@ -582,13 +582,13 @@ static struct rcar_ip hscif0_ip = {
 static struct hw_register hscif1_ip_regs[] = {
 	{"HSSMR",  0x0000, 16, 0},
 	{"HSBRR",  0x0004,  8, 0},
-	{"HSSCR",  0x0008, 16, 0},
 	{"HSFCR",  0x0018, 16, 0},
 	{"HSSPTR", 0x0020, 16, 0},
 	{"HSSRR",  0x0040, 16, 0},
 	{"HSRTGR", 0x0050, 16, 0},
 	{"HSRTRGR", 0x0054, 16, 0},
 	{"HSTTRGR", 0x0058, 16, 0},
+	{"HSSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip hscif1_ip = {
@@ -601,13 +601,13 @@ static struct rcar_ip hscif1_ip = {
 static struct hw_register hscif2_ip_regs[] = {
 	{"HSSMR",  0x0000, 16, 0},
 	{"HSBRR",  0x0004,  8, 0},
-	{"HSSCR",  0x0008, 16, 0},
 	{"HSFCR",  0x0018, 16, 0},
 	{"HSSPTR", 0x0020, 16, 0},
 	{"HSSRR",  0x0040, 16, 0},
 	{"HSRTGR", 0x0050, 16, 0},
 	{"HSRTRGR", 0x0054, 16, 0},
 	{"HSTTRGR", 0x0058, 16, 0},
+	{"HSSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip hscif2_ip = {
@@ -620,13 +620,13 @@ static struct rcar_ip hscif2_ip = {
 static struct hw_register hscif3_ip_regs[] = {
 	{"HSSMR",  0x0000, 16, 0},
 	{"HSBRR",  0x0004,  8, 0},
-	{"HSSCR",  0x0008, 16, 0},
 	{"HSFCR",  0x0018, 16, 0},
 	{"HSSPTR", 0x0020, 16, 0},
 	{"HSSRR",  0x0040, 16, 0},
 	{"HSRTGR", 0x0050, 16, 0},
 	{"HSRTRGR", 0x0054, 16, 0},
 	{"HSTTRGR", 0x0058, 16, 0},
+	{"HSSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip hscif3_ip = {
@@ -639,13 +639,13 @@ static struct rcar_ip hscif3_ip = {
 static struct hw_register hscif4_ip_regs[] = {
 	{"HSSMR",  0x0000, 16, 0},
 	{"HSBRR",  0x0004,  8, 0},
-	{"HSSCR",  0x0008, 16, 0},
 	{"HSFCR",  0x0018, 16, 0},
 	{"HSSPTR", 0x0020, 16, 0},
 	{"HSSRR",  0x0040, 16, 0},
 	{"HSRTGR", 0x0050, 16, 0},
 	{"HSRTRGR", 0x0054, 16, 0},
 	{"HSTTRGR", 0x0058, 16, 0},
+	{"HSSCR",  0x0008, 16, 0},
 };
 
 static struct rcar_ip hscif4_ip = {
-- 
1.7.5.4

