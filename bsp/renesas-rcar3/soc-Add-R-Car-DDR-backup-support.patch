From 70149ed45810b8ccba92114edffdceb17eb60de3 Mon Sep 17 00:00:00 2001
From: Khiem Nguyen <khiem.nguyen.xt@rvc.renesas.com>
Date: Tue, 28 Jun 2016 10:50:37 +0700
Subject: [PATCH 1635/2066] soc: Add R-Car DDR backup support

Signed-off-by: Khiem Nguyen <khiem.nguyen.xt@rvc.renesas.com>
Signed-off-by: Hien Dang <hien.dang.eb@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/soc/renesas/Kconfig  |    9 +++++++++
 drivers/soc/renesas/Makefile |    2 ++
 2 files changed, 11 insertions(+), 0 deletions(-)

diff --git a/drivers/soc/renesas/Kconfig b/drivers/soc/renesas/Kconfig
index 9397ae1..a9bdbbe 100644
--- a/drivers/soc/renesas/Kconfig
+++ b/drivers/soc/renesas/Kconfig
@@ -7,3 +7,12 @@ config RCAR_THERMAL_EMS_ENABLED
 	help
 	  Enable this option if you want to have support for Emergency Shutdown
 	  in R-Car Gen3.
+
+config RCAR_DDR_BACKUP
+	bool "Renesas R-Car DDR backup/restore function"
+	depends on SUSPEND
+	default y
+	help
+	  This enables DDR backup function for R-Car Gen3.
+	  It supports to backup/restore module register during suspend/resume
+	  sequence respectively when system enters S2RAM.
diff --git a/drivers/soc/renesas/Makefile b/drivers/soc/renesas/Makefile
index 59c39cb..a28b945 100644
--- a/drivers/soc/renesas/Makefile
+++ b/drivers/soc/renesas/Makefile
@@ -18,3 +18,5 @@ obj-$(CONFIG_ARCH_R8A7795)	+= rcar_ems_ctrl.o
 obj-$(CONFIG_ARCH_R8A7796)	+= rcar_ems_ctrl.o
 obj-$(CONFIG_ARCH_R8A7795)	+= rcar-avs.o
 obj-$(CONFIG_ARCH_R8A7796)	+= rcar-avs.o
+
+obj-$(CONFIG_RCAR_DDR_BACKUP)	+= s2ram_ddr_backup.o
-- 
1.7.5.4

