From ac39c7f1e8027c4404cf3ccaa89cf00761ab55e1 Mon Sep 17 00:00:00 2001
From: Dien Pham <dien.pham.ry@renesas.com>
Date: Thu, 25 Aug 2016 11:23:41 +0700
Subject: [PATCH 1680/2066] mmc: sh_mobile_sdhi: Fix build issue when disable
 SUSPEND

Signed-off-by: Dien Pham <dien.pham.ry@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/mmc/host/sh_mobile_sdhi.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/drivers/mmc/host/sh_mobile_sdhi.c b/drivers/mmc/host/sh_mobile_sdhi.c
index f6fd7df..615f836 100644
--- a/drivers/mmc/host/sh_mobile_sdhi.c
+++ b/drivers/mmc/host/sh_mobile_sdhi.c
@@ -843,10 +843,13 @@ static int sh_mobile_sdhi_remove(struct platform_device *pdev)
 }
 
 static const struct dev_pm_ops tmio_mmc_dev_pm_ops = {
-	.runtime_suspend = tmio_mmc_host_runtime_suspend,
-	.runtime_resume = tmio_mmc_host_runtime_resume,
+	SET_RUNTIME_PM_OPS(tmio_mmc_host_runtime_suspend,
+			tmio_mmc_host_runtime_resume,
+			NULL)
+#ifdef CONFIG_PM_SLEEP
 	.suspend_late = tmio_mmc_host_suspend,
 	.resume_early = tmio_mmc_host_resume,
+#endif
 };
 
 static struct platform_driver sh_mobile_sdhi_driver = {
-- 
1.7.5.4

