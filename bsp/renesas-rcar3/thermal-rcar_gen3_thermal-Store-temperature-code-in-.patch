From b675e2a0b6d8eb48e01020edf2dbf0ff11e59f32 Mon Sep 17 00:00:00 2001
From: Hien Dang <hien.dang.eb@rvc.renesas.com>
Date: Thu, 17 Dec 2015 09:07:20 +0700
Subject: [PATCH 1273/2066] thermal: rcar_gen3_thermal: Store temperature code
 in data structure

It is not necessary to convert temperature code for storing in data
structure. Therefore, calculation is dropped.

Signed-off-by: Hien Dang <hien.dang.eb@rvc.renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/thermal/rcar_gen3_thermal.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/thermal/rcar_gen3_thermal.c b/drivers/thermal/rcar_gen3_thermal.c
index d065531..635785b 100644
--- a/drivers/thermal/rcar_gen3_thermal.c
+++ b/drivers/thermal/rcar_gen3_thermal.c
@@ -132,7 +132,7 @@ static int rcar_gen3_thermal_update_temp(struct rcar_thermal_priv *priv)
 		udelay(150);
 	}
 
-	priv->ctemp = round_temp(TEMP_CONVERT(ctemp));
+	priv->ctemp = ctemp;
 	spin_unlock_irqrestore(&priv->lock, flags);
 
 	return 0;
@@ -150,7 +150,7 @@ static int rcar_gen3_thermal_get_temp(void *devdata, int *temp)
 	 */
 	ctemp = rcar_thermal_read(priv, REG_GEN3_TEMP) & CTEMP_MASK;
 	*temp = round_temp(TEMP_CONVERT(ctemp));
-	priv->ctemp = *temp;
+	priv->ctemp = ctemp;
 	spin_unlock_irqrestore(&priv->lock, flags);
 
 	return 0;
-- 
1.7.5.4

