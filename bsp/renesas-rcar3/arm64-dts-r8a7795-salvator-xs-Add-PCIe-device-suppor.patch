From c2ddfee40595148a4102f866a16801f88baf030d Mon Sep 17 00:00:00 2001
From: Takeshi Kihara <takeshi.kihara.df@renesas.com>
Date: Thu, 9 Feb 2017 10:14:10 +0900
Subject: [PATCH 1795/2066] arm64: dts: r8a7795-salvator-xs: Add PCIe device
 support

This patch adds PCIe{0,1} device support for Salvator-X 2nd version
board on R8A7795 ES2.0 SoC.

With the Salvator-X 2nd version board, the signal of PCIE1 (CN6) and
SATA (CN8) changes with PCI Express Passive Switches. Therefore, this
devices are used by exclusion.

As for the default of this DeviceTree, PCIE1 of a board default is used.

Signed-off-by: Takeshi Kihara <takeshi.kihara.df@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 .../arm64/boot/dts/renesas/r8a7795-salvator-xs.dts |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

diff --git a/arch/arm64/boot/dts/renesas/r8a7795-salvator-xs.dts b/arch/arm64/boot/dts/renesas/r8a7795-salvator-xs.dts
index 1597caf..c0d4500 100644
--- a/arch/arm64/boot/dts/renesas/r8a7795-salvator-xs.dts
+++ b/arch/arm64/boot/dts/renesas/r8a7795-salvator-xs.dts
@@ -951,6 +951,19 @@
 	};
 };
 
+&pcie_bus_clk {
+	clock-frequency = <100000000>;
+	status = "okay";
+};
+
+&pciec0 {
+	status = "okay";
+};
+
+&pciec1 {
+	status = "okay";
+};
+
 &vin0 {
 	status = "okay";
 };
-- 
1.7.5.4

