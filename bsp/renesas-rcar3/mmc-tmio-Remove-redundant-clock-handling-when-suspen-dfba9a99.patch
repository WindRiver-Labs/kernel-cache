From 8bbe047de33b00ce0725d8f4e7c56090f628efc0 Mon Sep 17 00:00:00 2001
From: Hien Dang <hien.dang.eb@renesas.com>
Date: Wed, 17 Aug 2016 16:11:09 +0700
Subject: [PATCH 1670/2066] mmc: tmio: Remove redundant clock handling when
 suspend

This is to adapt to the commit '39dd0f234fc37d ("PM / Domains:
Allow runtime PM during system PM phases")'.

Signed-off-by: Keita Kobayashi <keita.kobayashi.ym@renesas.com>
Signed-off-by: Hien Dang <hien.dang.eb@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/mmc/host/tmio_mmc_pio.c |   10 ++--------
 1 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/drivers/mmc/host/tmio_mmc_pio.c b/drivers/mmc/host/tmio_mmc_pio.c
index c18bdc6..460b842 100644
--- a/drivers/mmc/host/tmio_mmc_pio.c
+++ b/drivers/mmc/host/tmio_mmc_pio.c
@@ -1446,10 +1446,8 @@ EXPORT_SYMBOL(tmio_mmc_host_runtime_resume);
 int tmio_mmc_host_suspend(struct device *dev)
 {
 	struct mmc_host *mmc = dev_get_drvdata(dev);
-	struct tmio_mmc_host *host = mmc_priv(mmc);
 
-	if (host->clk_disable)
-		host->clk_disable(host);
+	tmio_mmc_hw_reset(mmc);
 
 	return 0;
 }
@@ -1457,11 +1455,7 @@ EXPORT_SYMBOL(tmio_mmc_host_suspend);
 
 int tmio_mmc_host_resume(struct device *dev)
 {
-	struct mmc_host *mmc = dev_get_drvdata(dev);
-	struct tmio_mmc_host *host = mmc_priv(mmc);
-
-	tmio_mmc_clk_enable(host);
-
+	/* Empty for now */
 	return 0;
 }
 EXPORT_SYMBOL(tmio_mmc_host_resume);
-- 
1.7.5.4

