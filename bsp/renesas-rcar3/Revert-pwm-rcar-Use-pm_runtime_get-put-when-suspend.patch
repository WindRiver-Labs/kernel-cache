From fbc2bec66f5b593bc2475ff8a498d6168b7a4cac Mon Sep 17 00:00:00 2001
From: Gaku Inami <gaku.inami.xw@bp.renesas.com>
Date: Tue, 27 Dec 2016 16:07:36 +0900
Subject: [PATCH 1696/2066] Revert "pwm: rcar: Use pm_runtime_get/put when
 suspend"

This reverts commit 7d78bf4e2b80 ("pwm: rcar: Use pm_runtime_get/put when")

For the suspend/resume function is revised in pwm-rcar driver,
the conventional implementation will be reverted once.

Signed-off-by: Gaku Inami <gaku.inami.xw@bp.renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/pwm/pwm-rcar.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/pwm/pwm-rcar.c b/drivers/pwm/pwm-rcar.c
index 1922512..9dced8d 100644
--- a/drivers/pwm/pwm-rcar.c
+++ b/drivers/pwm/pwm-rcar.c
@@ -392,9 +392,8 @@ static int rcar_pwm_suspend(struct device *dev)
 
 		if (!ip->virt_addr)
 			ip->virt_addr = pwm->base;
-		pm_runtime_get_sync(dev);
+
 		ret = rcar_handle_registers(ip, DO_BACKUP);
-		pm_runtime_put(dev);
 	} else {
 		pr_err("%s: Failed to find PWM device\n", __func__);
 		ret = -ENODEV;
-- 
1.7.5.4

