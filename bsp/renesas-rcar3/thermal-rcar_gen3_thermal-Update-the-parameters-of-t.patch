From c270ed760f4b0577a5094f0c3d33d27421c98531 Mon Sep 17 00:00:00 2001
From: Thao Nguyen <thao.nguyen.yb@rvc.renesas.com>
Date: Tue, 23 Feb 2016 09:11:46 +0700
Subject: [PATCH 1284/2066] thermal: rcar_gen3_thermal: Update the parameters
 of thermal calculation formula

The parameters are updated after practical evaluation in the board.
This patch modifies FPTAT[H/T/L] values
and set different FTHCODE[H/T/L] values for each THS1/2/3.

Signed-off-by: Thao Nguyen <thao.nguyen.yb@rvc.renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/thermal/rcar_gen3_thermal.c |   26 ++++++++++++++++++++------
 1 files changed, 20 insertions(+), 6 deletions(-)

diff --git a/drivers/thermal/rcar_gen3_thermal.c b/drivers/thermal/rcar_gen3_thermal.c
index ebfda63..e32ce82 100644
--- a/drivers/thermal/rcar_gen3_thermal.c
+++ b/drivers/thermal/rcar_gen3_thermal.c
@@ -186,12 +186,26 @@ static void thermal_read_fuse_factor(struct rcar_thermal_priv *priv)
 		priv->factor.fptat_l = rcar_thermal_read(priv, REG_GEN3_FPTATL)
 				& GEN3_FUSE_MASK;
 	} else {
-		priv->factor.fthcode_h = 3355;
-		priv->factor.fthcode_t = 2850;
-		priv->factor.fthcode_l = 2110;
-		priv->factor.fptat_h = 2320;
-		priv->factor.fptat_t = 1510;
-		priv->factor.fptat_l = 320;
+		priv->factor.fptat_h = 2351;
+		priv->factor.fptat_t = 1509;
+		priv->factor.fptat_l = 435;
+		switch (priv->id) {
+		case 0:
+			priv->factor.fthcode_h = 3248;
+			priv->factor.fthcode_t = 2800;
+			priv->factor.fthcode_l = 2221;
+			break;
+		case 1:
+			priv->factor.fthcode_h = 3245;
+			priv->factor.fthcode_t = 2795;
+			priv->factor.fthcode_l = 2216;
+			break;
+		case 2:
+			priv->factor.fthcode_h = 3250;
+			priv->factor.fthcode_t = 2805;
+			priv->factor.fthcode_l = 2237;
+			break;
+		}
 	}
 	iounmap(product_register);
 }
-- 
1.7.5.4

