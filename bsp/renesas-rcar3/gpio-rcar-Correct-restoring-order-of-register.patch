From 2cb62afc9b4ac415b285115d143bf6e7cfc1151a Mon Sep 17 00:00:00 2001
From: Hien Dang <hien.dang.eb@renesas.com>
Date: Thu, 13 Oct 2016 19:00:22 +0700
Subject: [PATCH 1689/2066] gpio: rcar: Correct restoring order of register

This patch is to make sure interrupt registers are restored
after all other settings.
The order of register list is equal to the order of register setting.

Signed-off-by: Hien Dang <hien.dang.eb@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/gpio/gpio-rcar.c |   80 +++++++++++++++++++++++-----------------------
 1 files changed, 40 insertions(+), 40 deletions(-)

diff --git a/drivers/gpio/gpio-rcar.c b/drivers/gpio/gpio-rcar.c
index 2767b1a..a1dcdec 100644
--- a/drivers/gpio/gpio-rcar.c
+++ b/drivers/gpio/gpio-rcar.c
@@ -63,18 +63,18 @@ static struct hw_register gpio0_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio0_ip = {
@@ -87,18 +87,18 @@ static struct hw_register gpio1_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio1_ip = {
@@ -111,18 +111,18 @@ static struct hw_register gpio2_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio2_ip = {
@@ -135,18 +135,18 @@ static struct hw_register gpio3_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio3_ip = {
@@ -159,18 +159,18 @@ static struct hw_register gpio4_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio4_ip = {
@@ -183,18 +183,18 @@ static struct hw_register gpio5_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio5_ip = {
@@ -207,18 +207,18 @@ static struct hw_register gpio6_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio6_ip = {
@@ -231,18 +231,18 @@ static struct hw_register gpio7_ip_regs[] = {
 	{"IOINTSEL",    0x0000, 32, 0},
 	{"INOUTSEL",    0x0004, 32, 0},
 	{"OUTDT",       0x0008, 32, 0},
-	{"INTCLR",      0x0014, 32, 0},
-	{"INTMSK",      0x0018, 32, 0},
-	{"MSKCLR",      0x001C, 32, 0},
 	{"POSNEG",      0x0020, 32, 0},
 	{"EDGLEVEL",    0x0024, 32, 0},
 	{"FILONOFF",    0x0028, 32, 0},
-	{"INTMSKS",     0x0038, 32, 0},
-	{"MSKCLRS",     0x003C, 32, 0},
 	{"OUTDTSEL",    0x0040, 32, 0},
 	{"OUTDTH",      0x0044, 32, 0},
 	{"OUTDTL",      0x0048, 32, 0},
 	{"BOTHEDGE",    0x004C, 32, 0},
+	{"INTCLR",      0x0014, 32, 0},
+	{"INTMSK",      0x0018, 32, 0},
+	{"MSKCLR",      0x001C, 32, 0},
+	{"INTMSKS",     0x0038, 32, 0},
+	{"MSKCLRS",     0x003C, 32, 0},
 };
 
 static struct rcar_ip gpio7_ip = {
-- 
1.7.5.4

