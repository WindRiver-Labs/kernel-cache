From c990d08ad8d462cbb01fc52be3cb6250a486bb57 Mon Sep 17 00:00:00 2001
From: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Date: Tue, 15 Sep 2015 02:44:37 +0000
Subject: [PATCH 0184/2066] ASoC: rsnd: fixup clkout_name[] index error for
 single AUDIO_CLKOUT SoC

upstream 462c30bc8b3457e2904c45babf4cb06c3b38ed4e commit

2a46db4a3("ASoC: rsnd: add AUDIO_CLKOUT support") added AUDIO_CLKOUT
support for ADG. But single AUDIO_CLKOUT needs clkout_name[CLKOUT],
not clkout_name[i]. Kernel will have NULL pointer access without this
patch.

Signed-off-by: Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
Signed-off-by: Mark Brown <broonie@kernel.org>
---
 sound/soc/sh/rcar/adg.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sound/soc/sh/rcar/adg.c b/sound/soc/sh/rcar/adg.c
index 3fecb87..c4ebbb7 100644
--- a/sound/soc/sh/rcar/adg.c
+++ b/sound/soc/sh/rcar/adg.c
@@ -532,7 +532,7 @@ static void rsnd_adg_get_clkout(struct rsnd_priv *priv,
 	 * for clkout
 	 */
 	if (!count) {
-		clk = clk_register_fixed_rate(dev, clkout_name[i],
+		clk = clk_register_fixed_rate(dev, clkout_name[CLKOUT],
 					      parent_clk_name,
 					      (parent_clk_name) ?
 					      0 : CLK_IS_ROOT, req_rate);
-- 
1.7.5.4

