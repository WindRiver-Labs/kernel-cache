From cbd0683f9e90414842f7eacb02bb808d573a9b98 Mon Sep 17 00:00:00 2001
From: Koji Matsuoka <koji.matsuoka.xm@renesas.com>
Date: Wed, 14 Dec 2016 12:49:58 +0900
Subject: [PATCH 1568/2066] arm64: dts: r8a7795-salvator-x: Add ADV7482 video
 decoder node

This patch adds ADV7482 video decoder node, and input support via CSI40
and CSI20 for Salvator-X board on R8A7796 SoC.

Signed-off-by: Koji Matsuoka <koji.matsuoka.xm@renesas.com>
Signed-off-by: Takeshi Kihara <takeshi.kihara.df@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 arch/arm64/boot/dts/renesas/r8a7796-salvator-x.dts |   40 ++++++++++++++++++++
 1 files changed, 40 insertions(+), 0 deletions(-)

diff --git a/arch/arm64/boot/dts/renesas/r8a7796-salvator-x.dts b/arch/arm64/boot/dts/renesas/r8a7796-salvator-x.dts
index fce7fc5..bcac46c 100644
--- a/arch/arm64/boot/dts/renesas/r8a7796-salvator-x.dts
+++ b/arch/arm64/boot/dts/renesas/r8a7796-salvator-x.dts
@@ -499,6 +499,44 @@
 
 	clock-frequency = <400000>;
 
+	adv7482_1: hdmi-in@34 {
+		compatible = "adi,adv7482";
+		reg = <0x34>;
+
+		adi,virtual-channel = <0>;
+		adi,input-interface = "rgb888";
+		adi,input-hdmi = "on";
+		adi,input-sdp = "on";
+		adi,sw-reset = "on";
+
+		port {
+			adv7482_1_out: endpoint@1 {
+				clock-lanes = <0>;
+				data-lanes = <1 2 3 4>;
+				remote-endpoint = <&csi2_40_0_in>;
+			};
+		};
+	};
+
+	adv7482_2: composite-in@70 {
+		compatible = "adi,adv7482";
+		reg = <0x70>;
+
+		adi,virtual-channel = <0>;
+		adi,input-interface = "ycbcr422";
+		adi,input-hdmi = "on";
+		adi,input-sdp = "on";
+		adi,sw-reset = "on";
+
+		port {
+			adv7482_2_out: endpoint@1 {
+				clock-lanes = <0>;
+				data-lanes = <1>;
+				remote-endpoint = <&csi2_20_0_in>;
+			};
+		};
+	};
+
 	clk_5p49v5923a: programmable_clk@6a {
 		compatible = "idt,5p49v5923a";
 		reg = <0x6a>;
@@ -566,6 +604,7 @@
 				clock-lanes = <0>;
 				data-lanes = <1>;
 				virtual-channel-number = <1>;
+				remote-endpoint = <&adv7482_2_out>;
 			};
 		};
 	};
@@ -585,6 +624,7 @@
 				clock-lanes = <0>;
 				data-lanes = <1 2 3 4>;
 				virtual-channel-number = <1>;
+				remote-endpoint = <&adv7482_1_out>;
 			};
 		};
 	};
-- 
1.7.5.4

