From 66178d918c7af9a267056fac449164a8717c0856 Mon Sep 17 00:00:00 2001
From: Hien Dang <hien.dang.eb@rvc.renesas.com>
Date: Thu, 21 Apr 2016 14:42:40 +0700
Subject: [PATCH 1306/2066] thermal: rcar_gen3_thermal: Support S2RAM
 operation

It is not necessary to backup/restore module registers.
They will initialized by init function.

Signed-off-by: Hien Dang <hien.dang.eb@rvc.renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/thermal/rcar_gen3_thermal.c |   14 ++++++++++++--
 1 files changed, 12 insertions(+), 2 deletions(-)

diff --git a/drivers/thermal/rcar_gen3_thermal.c b/drivers/thermal/rcar_gen3_thermal.c
index efd5a81..5161969 100644
--- a/drivers/thermal/rcar_gen3_thermal.c
+++ b/drivers/thermal/rcar_gen3_thermal.c
@@ -572,13 +572,23 @@ error_unregister:
 #ifdef CONFIG_PM_SLEEP
 static int rcar_gen3_thermal_suspend(struct device *dev)
 {
-	/* Empty functino for now */
+	struct rcar_thermal_priv *priv = dev_get_drvdata(dev);
+
+	pr_debug("%s\n", __func__);
+	rcar_thermal_irq_disable(priv);
+
 	return 0;
 }
 
 static int rcar_gen3_thermal_resume(struct device *dev)
 {
-	/* Empty function for now */
+	struct rcar_thermal_priv *priv = dev_get_drvdata(dev);
+
+	pr_debug("%s\n", __func__);
+	priv->data->thermal_init(priv);
+	rcar_thermal_irq_enable(priv);
+	rcar_gen3_thermal_update_temp(priv);
+
 	return 0;
 }
 
-- 
1.7.5.4

