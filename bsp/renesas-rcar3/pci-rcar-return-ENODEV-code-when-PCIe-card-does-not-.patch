From 9cc08163fb77af6685d3dd77da055f11a8f7a8bc Mon Sep 17 00:00:00 2001
From: Harunobu Kurokawa <harunobu.kurokawa.dn@renesas.com>
Date: Tue, 19 Jul 2016 16:41:57 +0900
Subject: [PATCH 1358/2066] pci: rcar: return ENODEV code when PCIe card does
 not insert

When PCIe card are not connected, driver returns ENODEV to
upper side.

Signed-off-by: Harunobu Kurokawa <harunobu.kurokawa.dn@renesas.com>
[zou:Original patch taken from
git://git.kernel.org/pub/scm/linux/kernel/git/horms/renesas-bsp.git
 v4.9/rcar-3.5.1]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/pci/host/pcie-rcar.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/pci/host/pcie-rcar.c b/drivers/pci/host/pcie-rcar.c
index 7398dbb..7c0e8d6 100644
--- a/drivers/pci/host/pcie-rcar.c
+++ b/drivers/pci/host/pcie-rcar.c
@@ -1191,7 +1191,7 @@ static int rcar_pcie_probe(struct platform_device *pdev)
 	err = hw_init_fn(pcie);
 	if (err) {
 		dev_info(dev, "PCIe link down\n");
-		err = 0;
+		err = -ENODEV;
 		goto err_pm_put;
 	}
 
-- 
1.7.5.4

