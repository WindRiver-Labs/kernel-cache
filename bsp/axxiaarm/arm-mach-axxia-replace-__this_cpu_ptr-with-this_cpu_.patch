From 635d43153e0984e7b71542347284da6513475397 Mon Sep 17 00:00:00 2001
From: Xulin Sun <xulin.sun@windriver.com>
Date: Mon, 23 Nov 2015 07:41:29 +0000
Subject: [PATCH 55/59] arm: mach-axxia: replace __this_cpu_ptr with
 this_cpu_ptr

Replaced with this_cpu_ptr to eliminate the compile error issue to avoid
the function no declaration.

Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm/mach-axxia/axxia-gic.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-axxia/axxia-gic.c b/arch/arm/mach-axxia/axxia-gic.c
index a4a9611..c8ba393 100644
--- a/arch/arm/mach-axxia/axxia-gic.c
+++ b/arch/arm/mach-axxia/axxia-gic.c
@@ -741,11 +741,11 @@ static void gic_cpu_save(void)
 	if (!dist_base || !cpu_base)
 		return;
 
-	ptr = __this_cpu_ptr(gic_data.saved_ppi_enable[this_cluster]);
+	ptr = this_cpu_ptr(gic_data.saved_ppi_enable[this_cluster]);
 	for (i = 0; i < DIV_ROUND_UP(32, 32); i++)
 		ptr[i] = readl_relaxed(dist_base + GIC_DIST_ENABLE_SET + i * 4);
 
-	ptr = __this_cpu_ptr(gic_data.saved_ppi_conf[this_cluster]);
+	ptr = this_cpu_ptr(gic_data.saved_ppi_conf[this_cluster]);
 	for (i = 0; i < DIV_ROUND_UP(32, 16); i++)
 		ptr[i] = readl_relaxed(dist_base + GIC_DIST_CONFIG + i * 4);
 
@@ -767,11 +767,11 @@ static void gic_cpu_restore(void)
 	if (!dist_base || !cpu_base)
 		return;
 
-	ptr = __this_cpu_ptr(gic_data.saved_ppi_enable[this_cluster]);
+	ptr = this_cpu_ptr(gic_data.saved_ppi_enable[this_cluster]);
 	for (i = 0; i < DIV_ROUND_UP(32, 32); i++)
 		writel_relaxed(ptr[i], dist_base + GIC_DIST_ENABLE_SET + i * 4);
 
-	ptr = __this_cpu_ptr(gic_data.saved_ppi_conf[this_cluster]);
+	ptr = this_cpu_ptr(gic_data.saved_ppi_conf[this_cluster]);
 	for (i = 0; i < DIV_ROUND_UP(32, 16); i++)
 		writel_relaxed(ptr[i], dist_base + GIC_DIST_CONFIG + i * 4);
 
-- 
1.7.5.4

