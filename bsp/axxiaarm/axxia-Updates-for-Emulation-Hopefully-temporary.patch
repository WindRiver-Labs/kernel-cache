From 9567ffd647e28de35ee85e0753d00885e576383c Mon Sep 17 00:00:00 2001
From: John Jacques <john.jacques@lsi.com>
Date: Fri, 27 Feb 2015 15:35:56 -0600
Subject: [PATCH 03/59] axxia: Updates for Emulation -- Hopefully temporary

git://git.yoctoproject.org/linux-yocto-4.1 standard/axxia/base
	commit 232a8b8f7ff0b15b31ee42954379a6f7cc95336b

Signed-off-by: John Jacques <john.jacques@lsi.com>
[Xulin: add CONFIG_ARCH_AXXIA to exclude the code]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/tty/serial/amba-pl011.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/tty/serial/amba-pl011.c b/drivers/tty/serial/amba-pl011.c
index d62a059..8022853 100644
--- a/drivers/tty/serial/amba-pl011.c
+++ b/drivers/tty/serial/amba-pl011.c
@@ -1889,8 +1889,10 @@ pl011_set_termios(struct uart_port *port, struct ktermios *termios,
 			quot -= 2;
 	}
 	/* Set baud rate */
+#ifndef CONFIG_ARCH_AXXIA
 	writew(quot & 0x3f, port->membase + UART011_FBRD);
 	writew(quot >> 6, port->membase + UART011_IBRD);
+#endif
 
 	/*
 	 * ----------v----------v----------v----------v-----
-- 
1.7.5.4

