From bbdd0be302d85eda2e800b56572daae99b035b9b Mon Sep 17 00:00:00 2001
From: John Jacques <john.jacques@intel.com>
Date: Fri, 8 Jan 2016 17:51:44 +0200
Subject: [PATCH 83/86] arch/arm: Fix Build Failure When CONFIG_SMP=n

Signed-off-by: John Jacques <john.jacques@intel.com>
Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
[Original patch is from linux-yocto-4.1 axxia/base branch.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm/include/asm/kmap_types.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/include/asm/kmap_types.h b/arch/arm/include/asm/kmap_types.h
index c7877de..e6c4b44 100644
--- a/arch/arm/include/asm/kmap_types.h
+++ b/arch/arm/include/asm/kmap_types.h
@@ -6,11 +6,15 @@
 /*
  * This is the "bare minimum".  AIO seems to require this.
  */
+#ifdef CONFIG_SMP
 #if (CONFIG_NR_CPUS > 15)
 /* Prevent overlap between fixmap mapping and CPU vector page for 16th core */
 #define KM_TYPE_NR 15
 #else
 #define KM_TYPE_NR 16
 #endif
+#else
+#define KM_TYPE_NR 16
+#endif
 
 #endif
-- 
1.7.5.4

