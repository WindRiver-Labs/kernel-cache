From b4728f3c460a2e0b2d1d29d2c826b0e3f1a71b1e Mon Sep 17 00:00:00 2001
From: John Jacques <john.jacques@intel.com>
Date: Mon, 25 Apr 2016 08:22:17 -0500
Subject: [PATCH 07/13] drivers/net: Avoid Possible Deadlock in the Axxia
 FEMAC Driver

This is to fix mount.nfs over TCP generating the  following circular
dependency and possible DEADLOCK  message. FEMAC driver has been
converted to LLTX to  avoid this issue. Tx lock is introduced in the
FEMAC driver.

 CPU0                    CPU1
 ----                    ----
lock(clock-AF_INET);
                        lock(_xmit_ETHER#2);
                        lock(clock-AF_INET);
lock(_xmit_ETHER#2);
*** DEADLOCK ***

Signed-off-by: Sreedevi Joshi <sreedevi.joshi@intel.com>
Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
Signed-off-by: John Jacques <john.jacques@intel.com>
[Original patch is from linux-yocto-4.1 axxia/base branch.]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/lsi/lsi_acp_net.h |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/lsi/lsi_acp_net.h b/drivers/net/ethernet/lsi/lsi_acp_net.h
index 9f5ae1d..b2622b4 100644
--- a/drivers/net/ethernet/lsi/lsi_acp_net.h
+++ b/drivers/net/ethernet/lsi/lsi_acp_net.h
@@ -14,7 +14,9 @@
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
- * along with this program.
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307
+ *  USA
  */
 
 #ifndef _LSI_ACP_NET_H
-- 
1.7.5.4

