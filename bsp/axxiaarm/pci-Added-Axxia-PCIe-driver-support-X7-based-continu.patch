From 4d64caca35cbe7a9ba6276add314e6f4664b8e62 Mon Sep 17 00:00:00 2001
From: SangeethaRao <sangeetha.rao@lsi.com>
Date: Fri, 12 Dec 2014 16:57:33 -0600
Subject: [PATCH 05/86] pci: Added Axxia PCIe driver support (X7 based)
 (continue)

Signed-off-by: SangeethaRao <sangeetha.rao@lsi.com>
[Original patch is from linux-yocto-4.1 axxia/base branch.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/arm64/boot/dts/intel/axm5604-sim.dts |   12 +++++
 arch/arm64/boot/dts/intel/axm56xx.dtsi    |   72 +++++++++++++++++++++++++++++
 2 files changed, 84 insertions(+), 0 deletions(-)

diff --git a/arch/arm64/boot/dts/intel/axm5604-sim.dts b/arch/arm64/boot/dts/intel/axm5604-sim.dts
index f8d8b41..af2a16d 100644
--- a/arch/arm64/boot/dts/intel/axm5604-sim.dts
+++ b/arch/arm64/boot/dts/intel/axm5604-sim.dts
@@ -110,3 +110,15 @@
 &gpdma1 {
 	status = "okay";
 };
+&pci0 {
+
+	status = "okay";
+};
+
+&pci1 {
+	status = "okay";
+};
+
+&pci2 {
+	status = "okay";
+};
diff --git a/arch/arm64/boot/dts/intel/axm56xx.dtsi b/arch/arm64/boot/dts/intel/axm56xx.dtsi
index b195713..9e10079 100644
--- a/arch/arm64/boot/dts/intel/axm56xx.dtsi
+++ b/arch/arm64/boot/dts/intel/axm56xx.dtsi
@@ -210,6 +210,78 @@
 			status = "disabled";
 		};
 
+		pci0: pci@c000000000 {
+			compatible = "lsi,plb-pciex";
+			device_type = "pci";
+			#interrupt-cells = <1>;
+			#size-cells = <2>;
+			#address-cells = <3>;
+			reg = < 0xc0 0x38000000 0x01000000
+				0xa0 0x02000000 0x00008000 >;
+			/* Outbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU (PLB) addr>
+			<2-cell size> >*/
+			ranges = <0x03000000 0x00000000 0x80000000
+				0xc0 0x00000000
+				0x00 0x20000000>;
+			/* Inbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU addr>
+			<2-cell size> > */
+			dma-ranges = <0x03000000 0x00000000 0x00000000
+				0x00 0x00000000
+				0x00 0x40000000>;
+			interrupts = <GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>;
+			status = "disabled";
+		};
+
+		pci1: pci@c800000000 {
+			compatible = "lsi,plb-pciex";
+			device_type = "pci";
+			#interrupt-cells = <1>;
+			#size-cells = <2>;
+			#address-cells = <3>;
+			reg = < 0xc8 0x38000000 0x01000000
+				0xa0 0x04000000 0x00008000 >;
+			/* Outbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU (PLB) addr>
+			<2-cell size> >*/
+			ranges = <0x03000000 0x00000000 0xa0000000
+				  0xc8 0x00000000
+				  0x00 0x20000000>;
+			/* Inbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU addr>
+			<2-cell size> > */
+			dma-ranges = <0x03000000 0x00000000 0x00000000
+				      0x00 0x00000000
+				      0x00 0x40000000>;
+			interrupts = <GIC_SPI 124 IRQ_TYPE_LEVEL_HIGH>;
+			status = "disabled";
+		};
+
+		pci2: pci@0xd000000000 {
+			compatible = "lsi,plb-pciex";
+			device_type = "pci";
+			#interrupt-cells = <1>;
+			#size-cells = <2>;
+			#address-cells = <3>;
+			reg = < 0xd0 0x38000000 0x01000000
+				0xa0 0x06000000 0x00008000 >;
+			/* Outbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU (PLB) addr>
+			<2-cell size> >*/
+			ranges = <0x03000000 0x00000000 0xc0000000
+				  0xd0 0x00000000
+				  0x00 0x20000000>;
+			/* Inbound ranges */
+			/* < <3-cell PCI addr> <2-cell CPU addr>
+			<2-cell size> > */
+			dma-ranges = <0x03000000 0x00000000 0x00000000
+				      0x00 0x00000000
+				      0x00 0x40000000>;
+			interrupts = <GIC_SPI 125 IRQ_TYPE_LEVEL_HIGH>;
+			status = "disabled";
+		};
+
 		amba {
 			compatible = "arm,amba-bus";
 			#address-cells = <2>;
-- 
1.7.5.4

