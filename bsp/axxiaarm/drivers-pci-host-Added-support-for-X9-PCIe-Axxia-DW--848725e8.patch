From 14a7eb54d064eaa89fb3fc88d5ace09db13357b4 Mon Sep 17 00:00:00 2001
From: SangeethaRao <sangeetha.rao@intel.com>
Date: Thu, 24 Sep 2015 19:39:03 +0300
Subject: [PATCH 52/86] drivers/pci/host: Added support for X9 PCIe Axxia DW
 MSI (continue)

Signed-off-by: SangeethaRao <sangeetha.rao@intel.com>
[Original patch is from linux-yocto-4.1 axxia/base branch.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/arm64/boot/dts/intel/axm5601-emu.dts |    3 ++
 arch/arm64/boot/dts/intel/axm56xx.dtsi    |   47 +++++++++++++++++++++++++----
 2 files changed, 44 insertions(+), 6 deletions(-)

diff --git a/arch/arm64/boot/dts/intel/axm5601-emu.dts b/arch/arm64/boot/dts/intel/axm5601-emu.dts
index 6d4577b..9388fa0 100644
--- a/arch/arm64/boot/dts/intel/axm5601-emu.dts
+++ b/arch/arm64/boot/dts/intel/axm5601-emu.dts
@@ -61,3 +61,6 @@
 &trng {
 	status = "okay";
 };
+&pci1 {
+       status = "okay";
+};
diff --git a/arch/arm64/boot/dts/intel/axm56xx.dtsi b/arch/arm64/boot/dts/intel/axm56xx.dtsi
index a41bf91..1c0b372 100644
--- a/arch/arm64/boot/dts/intel/axm56xx.dtsi
+++ b/arch/arm64/boot/dts/intel/axm56xx.dtsi
@@ -237,10 +237,43 @@
 			ranges = <0x00000000 0x000000c0 0x40000000
 				0xc0 0x40000000
 				0x00 0x10000000         /* config space */
-				0x03000000 0x00000000 0x00000000
+				0x03000000 0x00000000 0xa0000000
 				0xc0 0x00000000
 				0x00 0x40000000>;       /* outbound mem */
-			interrupts = <GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <GIC_SPI 91 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 94 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 97 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 98 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 99 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 100 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 101 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 102 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 103 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 104 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 105 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 106 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 107 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 108 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 109 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 110 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 111 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 112 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 113 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 114 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 115 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 116 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 117 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 118 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 119 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 120 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 121 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 122 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 123 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 124 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 125 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 126 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 127 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 128 IRQ_TYPE_LEVEL_HIGH>;
 			status = "disabled";
 		};
 		pci1: pcie@c800000000 {
@@ -257,10 +290,11 @@
 			ranges = <0x00000000 0x000000c8 0x40000000
 				0xc8 0x40000000
 				0x00 0x10000000         /* config space */
-				0x03000000 0x00000000 0x00000000
+				0x03000000 0x00000000 0xa0000000
 				0xc8 0x00000000
 				0x00 0x40000000>;       /* outbound mem */
-			interrupts = <GIC_SPI 124 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <GIC_SPI 92 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 95 IRQ_TYPE_LEVEL_HIGH>;
 			status = "disabled";
 		};
 		pci2: pcie@d000000000 {
@@ -277,10 +311,11 @@
 			ranges = <0x00000000 0x000000d0 0x40000000
 				0xd0 0x40000000
 				0x00 0x10000000         /* config space */
-				0x03000000 0x00000000 0x00000000
+				0x03000000 0x00000000 0xa0000000
 				0xd0 0x00000000
 				0x00 0x40000000>;       /* outbound mem */
-			interrupts = <GIC_SPI 125 IRQ_TYPE_LEVEL_HIGH>;
+			interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>,
+				<GIC_SPI 96 IRQ_TYPE_LEVEL_HIGH>;
 			status = "disabled";
 		};
 		amba {
-- 
1.7.5.4

