From 6f7f37fb0ba97a06595dc4360babec46002d6926 Mon Sep 17 00:00:00 2001
From: lwang1 <li.wang@windriver.com>
Date: Mon, 1 Sep 2008 09:45:04 +0800
Subject: [PATCH] Add flash support to fsl_8548cds

Update the DTS file to add flash support to the Freescale 8548cds.

Signed-off-by: Li Wang <Li.Wang@windriver.com>
---
 arch/powerpc/boot/dts/mpc8548cds.dts |   43 ++++++++++++++++++++++++++++++++++
 1 files changed, 43 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/mpc8548cds.dts b/arch/powerpc/boot/dts/mpc8548cds.dts
index 431b496..6d00074 100644
--- a/arch/powerpc/boot/dts/mpc8548cds.dts
+++ b/arch/powerpc/boot/dts/mpc8548cds.dts
@@ -483,4 +483,47 @@
 				  0x0 0x100000>;
 		};
 	};
+
+	localbus@e0000000 {
+		#address-cells = <2>;
+		#size-cells = <1>;
+		compatible = "simple-bus";
+		reg = <0xe0000000 0x5000>;
+		interrupt-parent = <&mpic>;
+
+		ranges = <0x0 0x0 0xff800000 0x00800000		/*8MB Flash boot bank*/
+			  0x1 0x0 0xff000000 0x00800000		/*8MB Flash 2nd bank*/
+			  0x3 0x0 0xf0000000 0x04000000>;	/*64MB SDRAM*/
+
+		flash@0,0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "cfi-flash";
+			reg = <0x0 0x0 0x800000>;
+			bank-width = <2>;
+			device-width = <1>;
+			partition@0x0 {
+				label = "space";
+				reg = <0x00000000 0x00100000>;
+			};
+			partition@0x100000 {
+				label = "bootloader";
+				reg = <0x00100000 0x00700000>;
+				read-only;
+			};
+		};
+
+		flash@1,0 {
+			#address-cells = <1>;
+			#size-cells = <1>;
+			compatible = "cfi-flash";
+			reg = <0x1 0x0 0x800000>;
+			bank-width = <2>;
+			device-width = <1>;
+			partition@0x0 {
+				label = "space";
+				reg = <0x00000000 0x00800000>;
+			};
+		};
+	};
 };
-- 
1.5.5.1

