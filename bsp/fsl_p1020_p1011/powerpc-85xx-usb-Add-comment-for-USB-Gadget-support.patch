From 7bf634e58c0c68c0c4f1979767d314d86798a994 Mon Sep 17 00:00:00 2001
From: Wu Zhangjin <zhangjin.wu@windriver.com>
Date: Thu, 15 Jul 2010 20:27:12 +0800
Subject: [PATCH 08/12] powerpc/85xx: usb: Add comment for USB Gadget support

To make P1020 USB controller work as gadget memory or ethenet, we must add the
following line into the usb node of the dts file.

	dr_mode = "peripheral";

Otherwise, it will function as a USB Host.

This patch comments the dr_mode line by default to make the USB controller work
as a host, If people need to use the controller as a gadget, they need to
uncomment the dr_mode line.

Signed-off-by: Wu Zhangjin <zhangjin.wu@windriver.com>
---
 arch/powerpc/boot/dts/p1020rdb.dts |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1020rdb.dts b/arch/powerpc/boot/dts/p1020rdb.dts
index 4644a4f..9e4aa77 100644
--- a/arch/powerpc/boot/dts/p1020rdb.dts
+++ b/arch/powerpc/boot/dts/p1020rdb.dts
@@ -490,6 +490,9 @@
 			interrupt-parent = <&mpic>;
 			interrupts = <28 0x2>;
 			phy_type = "ulpi";
+
+			/* Uncomment the following for USB Gadget Mode */
+			/* dr_mode = "peripheral"; */
 		};
 
 		/* USB2 is shared with localbus, so it must be disabled
-- 
1.6.5.2

