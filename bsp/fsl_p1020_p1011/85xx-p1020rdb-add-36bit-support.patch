From 2e74c73bfab04282f09a0873068206c7ee0077a0 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Fri, 26 Aug 2011 10:48:20 +0800
Subject: [PATCH 2/4] 85xx/p1020rdb: add 36bit support

Extracted from vendor drop QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso
linux-2.6.35-qoriq-powerpc-85xx-36bit-support-for-P1-P2-RD.patch.

Signed-off-by: Poonam Aggrwal <poonam.aggrwal@freescale.com>

[Split the needed code from the original patch.]

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 arch/powerpc/platforms/85xx/mpc85xx_rdb.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/mpc85xx_rdb.c b/arch/powerpc/platforms/85xx/mpc85xx_rdb.c
index befdcb7..3a6e516 100644
--- a/arch/powerpc/platforms/85xx/mpc85xx_rdb.c
+++ b/arch/powerpc/platforms/85xx/mpc85xx_rdb.c
@@ -138,6 +138,7 @@ static int __init mpc85xxrdb_publish_devices(void)
 }
 machine_device_initcall(p2020_rdb, mpc85xxrdb_publish_devices);
 machine_device_initcall(p1020_rdb, mpc85xxrdb_publish_devices);
+machine_arch_initcall(p1020_rdb, swiotlb_setup_bus_notifier);
 machine_arch_initcall(p2020_rdb, swiotlb_setup_bus_notifier);
 
 /*
-- 
1.7.0.4

