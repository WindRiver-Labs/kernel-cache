From 490c8aca3d3f1566a3c98e5161d0b9edfc989bd3 Mon Sep 17 00:00:00 2001
From: "Wong, Mun Choy" <mun.choy.wong@intel.com>
Date: Fri, 31 Jul 2015 18:25:31 +0800
Subject: [PATCH 5/8] platform: x86: intel_quark_platform_galileo: Change SPI,
 I2C & GPIO calling sequence (RTC:114524)

This is to rework the commit 541fd58adb2df103ccb6a011f9a3e861714e585d
(Patch Set 2) after the code review.

Signed-off-by: Wong, Mun Choy <mun.choy.wong@intel.com>
Change-Id: I97a48d5205418799800232761a522c5f228efad5
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/5953
Reviewed-by: Fung, Joshua <joshua.fung@intel.com>
Signed-off-by: Pengyu Ma <pengyu.ma@windriver.com>
---
 .../x86/intel-quark/intel_quark_platform_galileo.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/platform/x86/intel-quark/intel_quark_platform_galileo.c b/drivers/platform/x86/intel-quark/intel_quark_platform_galileo.c
index eba1a2e..942278b 100644
--- a/drivers/platform/x86/intel-quark/intel_quark_platform_galileo.c
+++ b/drivers/platform/x86/intel-quark/intel_quark_platform_galileo.c
@@ -304,8 +304,7 @@ static int intel_qrk_gpio_restrict_probe(struct platform_device *pdev)
 	if (NULL == i2c_adap) {
 		pr_info("%s: i2c adapter not ready yet. Deferring..\n",
 			__func__);
-		ret = -EPROBE_DEFER;
-		goto end;
+		return -EPROBE_DEFER;
 	}
 
 	ret = gpio_request_array(reserved_gpios, ARRAY_SIZE(reserved_gpios));
-- 
1.7.5.4

