From 4a13247c8242c98cf41d7614be6abdf5d6593958 Mon Sep 17 00:00:00 2001
From: Lans Zhang <jia.zhang@windriver.com>
Date: Tue, 29 Oct 2013 20:34:12 +0800
Subject: [PATCH] Add Digi Zigbee module support.

Signed-off-by: Lans Zhang <jia.zhang@windriver.com>
---
 arch/x86/platform/cln/intel_cln_plat_cross_hill.c |   31 +++++++++++++++++++--
 1 files changed, 28 insertions(+), 3 deletions(-)

diff --git a/arch/x86/platform/cln/intel_cln_plat_cross_hill.c b/arch/x86/platform/cln/intel_cln_plat_cross_hill.c
index b170bd1..2b7164a 100644
--- a/arch/x86/platform/cln/intel_cln_plat_cross_hill.c
+++ b/arch/x86/platform/cln/intel_cln_plat_cross_hill.c
@@ -93,12 +93,9 @@ static struct pxa2xx_spi_chip cln_ffrd_spi_1_cs_0 = {
 	.gpio_cs = 10,
 };
 
-#if 0
-/* TODO - not needed until dual-device blackburn peak modules are added */
 static struct pxa2xx_spi_chip cln_ffrd_spi_1_cs_1 = {
 	.gpio_cs = 11,
 };
-#endif
 
 
 /**
@@ -233,6 +230,34 @@ static int intel_cln_spi_add_bpeak_devs(void)
 			return spi_register_board_info(spi_bpeak_devs,
 						ARRAY_SIZE(spi_bpeak_devs));
 		}
+	case CLN_SPI_BPEAK_ID_ZB_EXEGIN_ATMEL:
+		{
+			struct spi_board_info spi_bpeak_devs[] = {
+				{
+				.modalias = "spidev",
+				.max_speed_hz = 1000000,
+				.platform_data = NULL,
+				.mode = SPI_MODE_0,
+				.bus_num = 1,
+				.chip_select = 0,
+				.controller_data = &cln_ffrd_spi_1_cs_0,
+				},
+
+				{
+				.modalias = "spidev",
+				.max_speed_hz = 1000000,
+				.platform_data = NULL,
+				.mode = SPI_MODE_0,
+				.bus_num = 1,
+				.chip_select = 1,
+				.controller_data = &cln_ffrd_spi_1_cs_1,
+				},
+
+			};
+
+			return spi_register_board_info(spi_bpeak_devs,
+						ARRAY_SIZE(spi_bpeak_devs));
+		}
 	/* TODO - add other Blackburn Peak variants when details available */
 	default:
 			pr_err("%s: Unsupported Blackburn Peak SPI ID %u\n",
-- 
1.7.5.4

