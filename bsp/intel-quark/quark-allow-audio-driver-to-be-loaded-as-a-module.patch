From 0ebe4cb3bf261c93de57034c67ccbee210c60f59 Mon Sep 17 00:00:00 2001
From: Mihaita Ivascu <mihaita.ivascu@windriver.com>
Date: Wed, 10 Sep 2014 19:08:53 +0300
Subject: [PATCH] quark: allow audio driver to be loaded as a module

Enabling support for the ReliaGATE audio control driver to be loaded as a module

Issue LIN5-19446

Signed-off-by: Mihaita Ivascu <mihaita.ivascu@windriver.com>
---
 drivers/platform/x86/quark/Kconfig  |    6 ++++++
 drivers/platform/x86/quark/Makefile |    2 +-
 2 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/drivers/platform/x86/quark/Kconfig b/drivers/platform/x86/quark/Kconfig
index c389434..bb9f149 100644
--- a/drivers/platform/x86/quark/Kconfig
+++ b/drivers/platform/x86/quark/Kconfig
@@ -39,3 +39,9 @@ config INTEL_QRK_AUDIO_CTRL
 	help
 	  Say Y here to enable Quark's audio control driver
 
+config INTEL_QRK_AUDIO_CTRL_RELIAGATE
+        tristate "Audio sub-system control driver for Eurotech ReliaGATE 15-10 Quark platform"
+        depends on INTEL_QUARK_X1000_SOC
+        help
+          Say Y here to enable ReliaGATE's audio control driver
+
diff --git a/drivers/platform/x86/quark/Makefile b/drivers/platform/x86/quark/Makefile
index 4abbc53..7dfd6de 100644
--- a/drivers/platform/x86/quark/Makefile
+++ b/drivers/platform/x86/quark/Makefile
@@ -16,4 +16,4 @@ obj-$(CONFIG_INTEL_QRK_ESRAM)	+= intel_qrk_esram_test.o
 obj-$(CONFIG_INTEL_QRK_THERMAL)	+= intel_qrk_thermal.o
 obj-$(CONFIG_INTEL_QRK_AUDIO_CTRL) += intel_qrk_audio_ctrl.o
 obj-$(CONFIG_INTEL_QUARK_X1000_SOC)	+= intel_qrk_plat_reliagate.o
-obj-$(CONFIG_INTEL_QUARK_X1000_SOC)	+= intel_qrk_audio_ctrl_reliagate.o
+obj-$(CONFIG_INTEL_QRK_AUDIO_CTRL_RELIAGATE)	+= intel_qrk_audio_ctrl_reliagate.o
-- 
1.7.5.4

