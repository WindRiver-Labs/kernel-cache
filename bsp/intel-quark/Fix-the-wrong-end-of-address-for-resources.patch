From 92b61fda77797adcd7fc739a4dce8dcbfbb79b25 Mon Sep 17 00:00:00 2001
From: Lans Zhang <jia.zhang@windriver.com>
Date: Thu, 10 Oct 2013 13:25:58 +0800
Subject: [PATCH] Fix the wrong end of address for resource.

The calculation of the end of a resource requiring minus 1.

Signed-off-by: Lans Zhang <jia.zhang@windriver.com>
---
 arch/x86/platform/cln/intel_cln_board_data.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/x86/platform/cln/intel_cln_board_data.c b/arch/x86/platform/cln/intel_cln_board_data.c
index 57ce766..6066598 100644
--- a/arch/x86/platform/cln/intel_cln_board_data.c
+++ b/arch/x86/platform/cln/intel_cln_board_data.c
@@ -98,7 +98,7 @@ static struct resource plat_res __initdata = {
 static struct resource mtd_res __initdata = {
 	.flags		= IORESOURCE_MEM,
 	.start		= SPIFLASH_BASEADDR + MTD_PART_OFFSET,
-	.end		= SPIFLASH_BASEADDR + MTD_PART_OFFSET + MTD_PART_LEN,
+	.end		= SPIFLASH_BASEADDR + MTD_PART_OFFSET + MTD_PART_LEN - 1,
 };
 
 static struct platform_device conf_pdev = {
@@ -174,7 +174,7 @@ static int __init intel_cln_board_data_init(void)
 		switch (item->type){
 		case MFH_ITEM_BUILD_INFO:
 			conf_res.start = item->addr;
-			conf_res.end = item->addr + item->len;
+			conf_res.end = item->addr + item->len - 1;
 			pdev = &conf_pdev;
 			break;
 		case MFH_ITEM_VERSION:
-- 
1.7.5.4

