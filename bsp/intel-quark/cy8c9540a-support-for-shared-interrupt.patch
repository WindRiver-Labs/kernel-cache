From 7c023bbb8b24d04e076e4d0aa230771191c9c2c5 Mon Sep 17 00:00:00 2001
From: Adrian Bradianu <adrian.bradianu@windriver.com>
Date: Thu, 5 Jun 2014 18:19:46 +0300
Subject: [PATCH 6/9] cy8c9540a : support for shared interrupt

Add the IRQF_SHARED flag to request_threaded_irq as on
ECS GEN2 board there are two I2C I/O expanders and both
share the same interrupt.

Signed-off-by: Adrian Bradianu <adrian.bradianu@windriver.com>
Signed-off-by: Pengyu Ma <pengyu.ma@windriver.com>
---
 drivers/mfd/cy8c9540a.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/mfd/cy8c9540a.c b/drivers/mfd/cy8c9540a.c
index 284fc72..fa8c396 100644
--- a/drivers/mfd/cy8c9540a.c
+++ b/drivers/mfd/cy8c9540a.c
@@ -479,7 +479,7 @@ static int cy8c9540a_irq_setup(struct cy8c9540a *dev)
 
 	ret = request_threaded_irq(client->irq, NULL, cy8c9540a_irq_handler,
 				   IRQF_TRIGGER_FALLING | IRQF_ONESHOT |
-				   IRQF_NO_SUSPEND,
+				   IRQF_NO_SUSPEND | IRQF_SHARED,
 				   dev_name(&client->dev), dev);
 	if (ret) {
 		dev_err(&client->dev, "failed to request irq %d\n",
-- 
1.7.5.4

