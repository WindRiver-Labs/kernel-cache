From 720141f85ac834f23888277414c30c66239b07f2 Mon Sep 17 00:00:00 2001
From: Mihai Ene <mihai.ene@windriver.com>
Date: Mon, 6 Oct 2014 11:38:27 +0300
Subject: [PATCH] lpc_sch: change wdt name and add support for quark

Changed tunnelcreek_wdt to ie6xx_wdt in order to reflect driver
name.
Add probe support for this driver also to Quark SoC.
ie6xx_wdt driver uses the same register and configuration/logic
as the watchdog inside Quark SoC.
See www.intel.com for:
Intel ATOM E6XX Document Number: 324208-005US (Chapter 11.10)
Intel Quark SoC Document Number: 329676-001US (Chapter 21.14)

Signed-off-by: Mihai Ene <mihai.ene@windriver.com>
---
 drivers/mfd/lpc_sch.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/mfd/lpc_sch.c b/drivers/mfd/lpc_sch.c
index 2f6b00d..8714dcb 100644
--- a/drivers/mfd/lpc_sch.c
+++ b/drivers/mfd/lpc_sch.c
@@ -88,7 +88,7 @@ static struct resource wdt_sch_resource = {
 
 static struct mfd_cell tunnelcreek_cells[] = {
 	{
-		.name = "tunnelcreek_wdt",
+		.name = "ie6xx_wdt",
 		.num_resources = 1,
 		.resources = &wdt_sch_resource,
 	},
@@ -175,7 +175,8 @@ static int __devinit lpc_sch_probe(struct pci_dev *dev,
 		goto out_dev;
 	}
 
-	if (id->device == PCI_DEVICE_ID_INTEL_ITC_LPC) {
+	if (id->device == PCI_DEVICE_ID_INTEL_ITC_LPC ||
+	    id->device == PCI_DEVICE_ID_INTEL_QUARK_ILB) {
 		pci_read_config_dword(dev, WDTBASE, &base_addr_cfg);
 		if (!(base_addr_cfg & (1 << 31))) {
 			dev_err(&dev->dev, "Decode of the WDT I/O range disabled\n");
-- 
1.7.5.4

