From 965bd0578d3c7bb840e5b5c68a2ccfb86ee78362 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Wed, 18 Apr 2012 19:53:23 +0800
Subject: [PATCH 06/23] powerpc/p5040: add missing usb compatible in dts

Current usb driver will read usb controller version from device-tree to
support ULPI and UTMI PHYs, but the compatible is missing in device-tree,
this will cause kernel hang when init usb.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso ISO image.
Patch p5040ds.dts directly instead of p5040si-post.dtsi]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/p5040ds.dts |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 3d65de8..075f627 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -921,7 +921,7 @@
 		};
 
 		usb0: usb@210000 {
-			compatible = "fsl,mpc85xx-usb2-mph", "fsl-usb2-mph";
+			compatible = "fsl-usb2-mph-v1.6", "fsl,mpc85xx-usb2-mph", "fsl-usb2-mph";
 			reg = <0x210000 0x1000>;
 			#address-cells = <1>;
 			#size-cells = <0>;
@@ -931,7 +931,7 @@
 		};
 
 		usb1: usb@211000 {
-			compatible = "fsl,mpc85xx-usb2-dr", "fsl-usb2-dr";
+			compatible = "fsl-usb2-dr-v1.6", "fsl,mpc85xx-usb2-dr", "fsl-usb2-dr";
 			reg = <0x211000 0x1000>;
 			#address-cells = <1>;
 			#size-cells = <0>;
-- 
1.7.0

