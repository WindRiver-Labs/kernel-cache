From 519310e1e36ada5920b4c3a975794a20c38ffc56 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Thu, 2 Aug 2012 14:30:28 +0800
Subject: [PATCH 23/23] powerpc: prevent to enable cpu hotplug on embedded 64bit kernel

Currently we still don't support the cpu hotplug on the
embedded 64bit kernel. So prevent to enable this option
in any case.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/Kconfig |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
index bd8d4e4..99f087b 100644
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@ -339,7 +339,8 @@ config SWIOTLB
 
 config HOTPLUG_CPU
 	bool "Support for enabling/disabling CPUs"
-	depends on SMP && HOTPLUG && EXPERIMENTAL && (PPC_PSERIES || PPC_PMAC || PPC_E500MC || (E500 && SUSPEND))
+	depends on SMP && HOTPLUG && EXPERIMENTAL && (PPC_PSERIES || PPC_PMAC || PPC_E500MC || (E500 && SUSPEND)) \
+			&& !CONFIG_PPC_BOOK3E_64
 	---help---
 	  Say Y here to be able to disable and re-enable individual
 	  CPUs at runtime on SMP machines.
-- 
1.7.0

