From 04829088d0a1a73f63c4d459c5e508bffde643a6 Mon Sep 17 00:00:00 2001
From: Yue Tao <yue.tao@windriver.com>
Date: Sun, 9 Dec 2012 17:45:53 -0800
Subject: [PATCH] p5040ds: update compilation flags to support e5500 instructions

ptrace 'mfcr 0,1' need flags -mcpu=e5500. workaround for
P5040DS under GCC4.4a-329.

Signed-off-by: Yongli He <yongli.he@windriver.com>
Signed-off-by: Yue Tao <yue.tao@windriver.com>
---
 arch/powerpc/platforms/85xx/Kconfig |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/Kconfig b/arch/powerpc/platforms/85xx/Kconfig
index 2677ba2..51ca38d 100644
--- a/arch/powerpc/platforms/85xx/Kconfig
+++ b/arch/powerpc/platforms/85xx/Kconfig
@@ -273,6 +273,7 @@ config P5040_DS
 	select HAS_FSL_QBMAN
 	select HAS_FSL_PME
 	select FSL_HYDRA_DS_MDIO if PHYLIB
+	select WORKAROUND_E5500_MFCR
 	help
 	  This option enables support for the Freescale P5040 DS
 	  ("Super Hydra") reference board.
-- 
1.7.0

