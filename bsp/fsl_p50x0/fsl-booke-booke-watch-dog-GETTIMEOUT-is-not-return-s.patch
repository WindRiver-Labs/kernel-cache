From 4e1152f2488bdfc6402a330a2fa440be2f8ec422 Mon Sep 17 00:00:00 2001
From: Yongli He <yongli.he@windriver.com>
Date: Tue, 13 Dec 2011 15:44:13 +0800
Subject: [PATCH 05/25] fsl booke: booke watch dog GETTIMEOUT is not return
 seconds

The book E wdt always use a "period" value which is interpreted in a
board-specific way. So we should convert that to a "seconds" value as the user
suppose.

Signed-off-by: Yongli He <yongli.he@windriver.com>
---
 drivers/watchdog/booke_wdt.c |    4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/watchdog/booke_wdt.c b/drivers/watchdog/booke_wdt.c
index 6c429b4..50c77f3 100644
--- a/drivers/watchdog/booke_wdt.c
+++ b/drivers/watchdog/booke_wdt.c
@@ -202,7 +202,11 @@ static long booke_wdt_ioctl(struct file *file,
 						WDTP(booke_wdt_period));
 		return 0;
 	case WDIOC_GETTIMEOUT:
+#if  defined(CONFIG_FSL_BOOKE) || defined(CONFIG_PPC_FSL_BOOK3E)
+		return put_user(period_to_sec(booke_wdt_period), p);
+#else
 		return put_user(booke_wdt_period, p);
+#endif
 	default:
 		return -ENOTTY;
 	}
-- 
1.7.9.7

