From 0ba61fbad7c997622ce39f554ce4270fc512841c Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Thu, 26 Jul 2012 14:33:55 +0800
Subject: [PATCH 19/23] usb/fsl_udc_core: fix the build warning for 64bit kernel

Fix the following warnings when building for a 64bit kernel:
linux/drivers/usb/gadget/fsl_udc_core.c: In function 'fsl_ep_dequeue':
linux/drivers/usb/gadget/fsl_udc_core.c:912: warning: cast from pointer to integer of different size
linux/drivers/usb/gadget/fsl_udc_core.c: In function 'ch9getstatus':
linux/drivers/usb/gadget/fsl_udc_core.c:1292: warning: cast from pointer to integer of different size
linux/drivers/usb/gadget/fsl_udc_core.c:1292: warning: cast from pointer to integer of different size

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/usb/gadget/fsl_udc_core.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/gadget/fsl_udc_core.c b/drivers/usb/gadget/fsl_udc_core.c
index e802077..b5b9d58 100644
--- a/drivers/usb/gadget/fsl_udc_core.c
+++ b/drivers/usb/gadget/fsl_udc_core.c
@@ -909,7 +909,7 @@ static int fsl_ep_dequeue(struct usb_ep *_ep, struct usb_request *_req)
 					queue);
 
 			/* Point the QH to the first TD of next request */
-			fsl_writel((u32) next_req->head, &qh->curr_dtd_ptr);
+			fsl_writel((unsigned long)next_req->head, &qh->curr_dtd_ptr);
 		}
 
 		/* The request hasn't been processed, patch up the TD chain */
@@ -1289,7 +1289,7 @@ static void ch9getstatus(struct fsl_udc *udc, u8 request_type, u16 value,
 	*((u16 *) req->req.buf) = cpu_to_le16(tmp);
 
 	/* flush cache for the req buffer */
-	flush_dcache_range((u32)req->req.buf, (u32)req->req.buf + 8);
+	flush_dcache_range((unsigned long)req->req.buf, (unsigned long)req->req.buf + 8);
 
 	req->ep = ep;
 	req->req.length = 2;
-- 
1.7.0

