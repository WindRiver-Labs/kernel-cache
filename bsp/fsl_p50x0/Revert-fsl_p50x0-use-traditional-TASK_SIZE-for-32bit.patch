From 05a88c8826e0465a51fa0c2f3caa24ee1d0d8b4d Mon Sep 17 00:00:00 2001
From: Zhang Xiao <xiao.zhang@windriver.com>
Date: Mon, 6 May 2013 12:48:08 +0800
Subject: [PATCH] Revert "fsl_p50x0: use traditional TASK_SIZE for 32bit program"

The commit reverted focused on the segmentation fault of ltp test case
mmapstress03. The root cause lies in test case's, "MAP_FIXED" of
the last mmap. So revert this workaround.
---
 arch/powerpc/include/asm/processor.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/include/asm/processor.h b/arch/powerpc/include/asm/processor.h
index 9f21a91..dafce2b 100644
--- a/arch/powerpc/include/asm/processor.h
+++ b/arch/powerpc/include/asm/processor.h
@@ -113,7 +113,7 @@ extern struct task_struct *last_task_used_spe;
  * 32-bit user address space is 4GB - 1 page 
  * (this 1 page is needed so referencing of 0xFFFFFFFF generates EFAULT
  */
-#define TASK_SIZE_USER32 (0x0000000c0000000UL - (1*PAGE_SIZE))
+#define TASK_SIZE_USER32 (0x0000000100000000UL - (1*PAGE_SIZE))
 
 #define TASK_SIZE_OF(tsk) (test_tsk_thread_flag(tsk, TIF_32BIT) ? \
 		TASK_SIZE_USER32 : TASK_SIZE_USER64)
-- 
1.7.0

