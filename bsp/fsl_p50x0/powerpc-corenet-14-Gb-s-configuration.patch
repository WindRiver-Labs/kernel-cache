From 653c3f80fb692794ec86f64db6b28df9f5582099 Mon Sep 17 00:00:00 2001
From: Stefan Szabo <szbs001@freescale.com>
Date: Thu, 17 May 2012 14:21:49 +0000
Subject: [PATCH 09/23] powerpc/corenet: 14 Gb/s configuration

New default FMan configuration (14G/FMan):
* Enable out-of-the-box the automatic FMan resource (FIFOs, TNUMs, DMAs)
  allocation configuration,
* disable one 1Gb Ethernet port of each FMan on P3/5 platforms
  (one that will -- in FSL-shipped configurations -- likely be NC,
   or connected to an SGMII),
* disable three of the Offline Parsing ports (save for O/H port #0,
  which is required for host commands),
This is the maximal configuration that supports jumbo frames out of the box
(with jumbo NOT enabled out-of-the-box).

Signed-off-by: Stefan Szabo <szbs001@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso ISO image.
Remove the parts for other boards.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/p3041ds.dts |    1 +
 arch/powerpc/boot/dts/p5020ds.dts |    1 +
 arch/powerpc/boot/dts/p5040ds.dts |    8 ++++++++
 3 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 3239f21..17edda9 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -1557,6 +1557,7 @@
 			compatible = "fsl,p3041-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,qman-channel = <&qpool1>;
 			fsl,fman-mac = <&enet2>;
+			status = "disabled";
 		};
 		ethernet@3 {
 			compatible = "fsl,p3041-dpa-ethernet", "fsl,dpa-ethernet";
diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index 8c82a6a..f4a359e 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -1636,6 +1636,7 @@
 			compatible = "fsl,p5020-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,qman-channel = <&qpool1>;
 			fsl,fman-mac = <&enet2>;
+			status = "disabled";
 		};
 		ethernet@3 {
 			compatible = "fsl,p5020-dpa-ethernet", "fsl,dpa-ethernet";
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index db8daf1..c607cfd 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -1113,6 +1113,7 @@
 				compatible = "fsl,fman-port-oh";
 				reg = <0x85000 0x1000>;
 				fsl,qman-channel-id = <0x4a>;
+				status = "disabled";
 			};
 
 			fman0_oh5: port@86000 {
@@ -1120,12 +1121,14 @@
 				compatible = "fsl,fman-port-oh";
 				reg = <0x86000 0x1000>;
 				fsl,qman-channel-id = <0x4b>;
+				status = "disabled";
 			};
 
 			fman0_oh6: port@87000 {
 				cell-index = <6>;
 				compatible = "fsl,fman-port-oh";
 				reg = <0x87000 0x1000>;
+				status = "disabled";
 			};
 
 			policer@c0000 {
@@ -1596,6 +1599,7 @@
 				compatible = "fsl,fman-port-oh";
 				reg = <0x85000 0x1000>;
 				fsl,qman-channel-id = <0x6a>;
+				status = "disabled";
 			};
 
 			fman1_oh5: port@86000 {
@@ -1603,12 +1607,14 @@
 				compatible = "fsl,fman-port-oh";
 				reg = <0x86000 0x1000>;
 				fsl,qman-channel-id = <0x6b>;
+				status = "disabled";
 			};
 
 			fman1_oh6: port@87000 {
 				cell-index = <6>;
 				compatible = "fsl,fman-port-oh";
 				reg = <0x87000 0x1000>;
+				status = "disabled";
 			};
 
 			policer@c0000 {
@@ -2075,6 +2081,7 @@
 		ethernet@0 {
 			compatible = "fsl,p5040-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&fm1dtsec1>;
+			status = "disabled";
 		};
 		ethernet@1 {
 			compatible = "fsl,p5040-dpa-ethernet", "fsl,dpa-ethernet";
@@ -2099,6 +2106,7 @@
 		ethernet@6 {
 			compatible = "fsl,p5040-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&fm2dtsec1>;
+			status = "disabled";
 		};
 		ethernet@7 {
 			compatible = "fsl,p5040-dpa-ethernet", "fsl,dpa-ethernet";
-- 
1.7.0

