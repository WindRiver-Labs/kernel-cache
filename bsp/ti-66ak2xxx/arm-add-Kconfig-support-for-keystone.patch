From 50b4ceb93d2d0de16008ed04a41e1463e6d80fd2 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 5 May 2015 15:34:05 +0800
Subject: [PATCH 003/256] arm: add Kconfig support for keystone

Adjust Kconfig for keystone matching 3.14.x kernel.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/Kconfig |   34 +++++++++++++++++++++++++++++++++-
 1 files changed, 33 insertions(+), 1 deletions(-)

diff --git a/arch/arm/Kconfig b/arch/arm/Kconfig
index 751747e..6f9467e 100644
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@ -560,6 +560,38 @@ config ARCH_KIRKWOOD
 	  Support for the following Marvell Kirkwood series SoCs:
 	  88F6180, 88F6192 and 88F6281.
 
+config ARCH_KEYSTONE
+	bool "Texas Instruments Keystone Devices"
+	select ARCH_REQUIRE_GPIOLIB
+	select ARCH_SUPPORTS_MSI
+	select ARCH_SUPPORTS_BIG_ENDIAN
+	select ARM_ERRATA_798181 if SMP
+	select ARM_GIC
+	select CLKDEV_LOOKUP
+	select COMMON_CLK
+	select COMMON_CLK_KEYSTONE
+	select CLK_KEYSTONE_PLL
+	select CLKSRC_MMIO
+	select CPU_V7
+	select DAVINCI_CLKS
+	select GENERIC_CLOCKEVENTS
+	select HAVE_ARM_ARCH_TIMER
+	select HAVE_SCHED_CLOCK
+	select HAVE_SMP
+	select MIGHT_HAVE_PCI
+	select MULTI_IRQ_HANDLER
+	select NEED_MACH_MEMORY_H
+	select PCI_DOMAINS if PCI
+	select SPARSE_IRQ
+	select TI_KEYSTONE
+	select USE_OF
+	select USB_ARCH_HAS_XHCI
+	select ZONE_DMA if ARM_LPAE
+
+	help
+	  Support for boards based on the Texas Instruments Keystone family of
+	  SoCs.
+
 config ARCH_MV78XX0
 	bool "Marvell MV78xx0"
 	select ARCH_REQUIRE_GPIOLIB
@@ -1836,7 +1868,7 @@ config ARCH_WANT_GENERAL_HUGETLB
 source "mm/Kconfig"
 
 config FORCE_MAX_ZONEORDER
-	int "Maximum zone order" if ARCH_SHMOBILE_LEGACY
+	int "Maximum zone order" if ARCH_SHMOBILE_LEGACY || ARCH_KEYSTONE
 	range 11 64 if ARCH_SHMOBILE_LEGACY
 	default "12" if SOC_AM33XX
 	default "9" if SA1111 || ARCH_EFM32
-- 
1.7.5.4

