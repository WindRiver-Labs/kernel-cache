From 3dd69f1658e15bd97493fdeb17054dace4f2dcc8 Mon Sep 17 00:00:00 2001
From: Cyril Chemparathy <cyril@ti.com>
Date: Thu, 25 Oct 2012 21:14:15 -0400
Subject: [PATCH 117/256] lib/ktree: bug fix to handle null tree puts (cherry
 picked from commit
 4b855b796ea97b73e6df3839f8cd01247b1199b6)

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 lib/ktree.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/lib/ktree.c b/lib/ktree.c
index b830043..af55656 100644
--- a/lib/ktree.c
+++ b/lib/ktree.c
@@ -124,7 +124,8 @@ static void ktree_node_destroy(struct ktree_node *node)
 	struct ktree *ktree = node->ktree;
 
 	WARN_ON(!ktree_is_leaf(node));
-	ktree->put(node);
+	if (ktree->put)
+		ktree->put(node);
 	ktree_put_node(parent);
 }
 
-- 
1.7.5.4

