From f711949426d78d35d0917e6143074eaa0add8e88 Mon Sep 17 00:00:00 2001
From: Vitaly Andrianov <vitalya@ti.com>
Date: Thu, 18 Apr 2013 14:25:00 -0400
Subject: [PATCH 224/257] rt: use rwlock_rt.h instead of rwlock.h

The "rt: Add the preempt-rt lock replacement APIs" replaced
locking API for PREEMPT_RT_FULL. We need to use the rwlock_rt.h
for full RT.

Signed-off-by: Vitaly Andrianov <vitalya@ti.com>
(cherry picked from commit 1aee3696004d917c0b3f6577cf440c82b5a25834)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 net/rpmsg/rpmsg_proto.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/net/rpmsg/rpmsg_proto.c b/net/rpmsg/rpmsg_proto.c
index e4836f0..d56e5cd 100644
--- a/net/rpmsg/rpmsg_proto.c
+++ b/net/rpmsg/rpmsg_proto.c
@@ -24,7 +24,11 @@
 #include <linux/list.h>
 #include <linux/errno.h>
 #include <linux/skbuff.h>
-#include <linux/rwlock.h>
+#ifdef CONFIG_PREEMPT_RT_FULL
+# include <linux/rwlock_rt.h>
+#else
+# include <linux/rwlock.h>
+#endif
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/rpmsg.h>
-- 
2.7.4

