From bc989306cb9f1f100c5694269dcc9b7a8e158249 Mon Sep 17 00:00:00 2001
From: Prabhu Kuttiyam <pkuttiyam@ti.com>
Date: Fri, 15 Feb 2013 13:07:16 -0500
Subject: [PATCH 043/257] keystone: dma: remove pushing to reg C

This commit removes the size parameter being set from the pktdma layer at the
time of a hwqueue push.

Signed-off-by: Prabhu Kuttiyam <pkuttiyam@ti.com>
(cherry picked from commit 8abbbc20f7ed9b3cef22c579b042181eb24114e7)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/dma/keystone-pktdma.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

diff --git a/drivers/dma/keystone-pktdma.c b/drivers/dma/keystone-pktdma.c
index b892855..4a565f2 100644
--- a/drivers/dma/keystone-pktdma.c
+++ b/drivers/dma/keystone-pktdma.c
@@ -1300,9 +1300,7 @@ static int chan_rxfree_refill(struct keystone_dma_chan *chan)
 			desc->status = DMA_IN_PROGRESS;
 			ret = hwqueue_push(chan->q_submit[i],
 					desc->hwdesc_dma_addr,
-					desc->hwdesc_dma_size,
-					((hwdesc->desc_info & BITS(17)) |
-					 HWQUEUE_HAS_PACKET_SIZE));
+					desc->hwdesc_dma_size, 0);
 			if (unlikely(ret < 0)) {
 				dev_warn(chan_dev(chan), "push error %d in %s\n",
 						ret, __func__);
-- 
2.7.4

