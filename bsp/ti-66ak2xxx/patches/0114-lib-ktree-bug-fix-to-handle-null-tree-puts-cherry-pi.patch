From edf0005dbfc48e7e131ebccb8f71bfc6aba0f50d Mon Sep 17 00:00:00 2001
From: Cyril Chemparathy <cyril@ti.com>
Date: Thu, 25 Oct 2012 21:14:15 -0400
Subject: [PATCH 114/257] lib/ktree: bug fix to handle null tree puts (cherry
 picked from commit 4b855b796ea97b73e6df3839f8cd01247b1199b6)

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 lib/ktree.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lib/ktree.c b/lib/ktree.c
index b830043..af55656 100644
--- a/lib/ktree.c
+++ b/lib/ktree.c
@@ -124,7 +124,8 @@ static void ktree_node_destroy(struct ktree_node *node)
 	struct ktree *ktree = node->ktree;
 
 	WARN_ON(!ktree_is_leaf(node));
-	ktree->put(node);
+	if (ktree->put)
+		ktree->put(node);
 	ktree_put_node(parent);
 }
 
-- 
2.7.4

