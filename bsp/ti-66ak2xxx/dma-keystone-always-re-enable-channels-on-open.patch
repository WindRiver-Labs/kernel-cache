From 50cb9934d8aa378861d16cd4307a7c9b3605e01d Mon Sep 17 00:00:00 2001
From: Prabhu Kuttiyam <pkuttiyam@ti.com>
Date: Wed, 7 Nov 2012 15:00:39 -0500
Subject: [PATCH 042/256] dma: keystone: always re-enable channels on open

This commit will be rolled into previous pktdma commits.

Signed-off-by: Prabhu Kuttiyam <pkuttiyam@ti.com>
(cherry picked from commit c39e6cf9cf62799a45a2a1ffdc57ca0cd4ba54a8)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/dma/keystone-pktdma.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/dma/keystone-pktdma.c b/drivers/dma/keystone-pktdma.c
index fa2e1f7..fecb814 100644
--- a/drivers/dma/keystone-pktdma.c
+++ b/drivers/dma/keystone-pktdma.c
@@ -878,7 +878,7 @@ static int chan_start(struct keystone_dma_chan *chan)
 {
 	u32 v;
 
-	if (chan->reg_chan && !chan->dma->enable_all) {
+	if (chan->reg_chan) {
 		__raw_writel(0, &chan->reg_chan->mode);
 		__raw_writel(DMA_ENABLE, &chan->reg_chan->control);
 	}
-- 
1.7.5.4

