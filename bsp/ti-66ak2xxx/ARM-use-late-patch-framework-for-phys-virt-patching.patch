From d4bcd8331d888f2a1ceaa82b08a15844aac9e9a7 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 16 Apr 2015 09:09:46 +0800
Subject: [PATCH 124/256] ARM: use late patch framework for phys-virt patching

This patch comes from:
  git://git.ti.com/keystone-linux/linux.git

This patch replaces the original physical offset patching implementation
with one that uses the newly added patching framework.

Signed-off-by: Cyril Chemparathy <cyril@ti.com>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/include/asm/module.h |   10 +---------
 1 files changed, 1 insertions(+), 9 deletions(-)

diff --git a/arch/arm/include/asm/module.h b/arch/arm/include/asm/module.h
index 620a2eb..e19306c 100644
--- a/arch/arm/include/asm/module.h
+++ b/arch/arm/include/asm/module.h
@@ -27,13 +27,6 @@ struct mod_arch_specific {
  */
 #define MODULE_ARCH_VERMAGIC_ARMVSN "ARMv" __stringify(__LINUX_ARM_ARCH__) " "
 
-/* Add __virt_to_phys patching state as well */
-#ifdef CONFIG_ARM_PATCH_PHYS_VIRT
-#define MODULE_ARCH_VERMAGIC_P2V "p2v8 "
-#else
-#define MODULE_ARCH_VERMAGIC_P2V ""
-#endif
-
 /* Add instruction set architecture tag to distinguish ARM/Thumb kernels */
 #ifdef CONFIG_THUMB2_KERNEL
 #define MODULE_ARCH_VERMAGIC_ARMTHUMB "thumb2 "
@@ -50,7 +43,6 @@ struct mod_arch_specific {
 #define MODULE_ARCH_VERMAGIC \
 	MODULE_ARCH_VERMAGIC_ARMVSN \
 	MODULE_ARCH_VERMAGIC_ARMTHUMB \
-	MODULE_ARCH_VERMAGIC_RT_PATCH \
-	MODULE_ARCH_VERMAGIC_P2V
+	MODULE_ARCH_VERMAGIC_RT_PATCH
 
 #endif /* _ASM_ARM_MODULE_H */
-- 
1.7.5.4

