From baec7c88d8c710172f1352f9904a6ff282211c7a Mon Sep 17 00:00:00 2001
From: Nava kishore Manne <nava.manne@xilinx.com>
Date: Fri, 15 Jul 2016 11:42:26 +0530
Subject: [PATCH 086/827] reset: Updated the Kconfig file for zynqmp reset-controller

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

The zynqmp reset controller needs Power Management API's to complete
the actual task. So this patch updates the Kconfig file with required PM
dependencies to avoid the compilation errors.

Signed-off-by: Nava kishore Manne <navam@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit b33f1eac3e8ac5155fe0a93fa4239af5e6c1f532)

Conflicts:
	drivers/reset/Makefile
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/reset/Kconfig  | 15 +++++++++++++++
 drivers/reset/Makefile |  2 +-
 2 files changed, 16 insertions(+), 1 deletion(-)

diff --git a/drivers/reset/Kconfig b/drivers/reset/Kconfig
index 0615f50..3a5fd10 100644
--- a/drivers/reset/Kconfig
+++ b/drivers/reset/Kconfig
@@ -12,4 +12,19 @@ menuconfig RESET_CONTROLLER
 
 	  If unsure, say no.
 
+if RESET_CONTROLLER
+
+config ZYNQMP_RESET_CONTROLLER
+	bool "Xilinx ZYNQMP Reset Controller Support"
+	depends on ZYNQMP_PM_API
+        help
+	 ZYNQMP Reset Controller support.
+
+         This framework is designed to abstract reset handling of devices
+         via SoC-internal reset controller modules.
+
+         If sure, say yes.If unsure, say no.
+
+endif
+
 source "drivers/reset/sti/Kconfig"
diff --git a/drivers/reset/Makefile b/drivers/reset/Makefile
index de44f2e..291f02a 100644
--- a/drivers/reset/Makefile
+++ b/drivers/reset/Makefile
@@ -3,4 +3,4 @@ obj-$(CONFIG_ARCH_SOCFPGA) += reset-socfpga.o
 obj-$(CONFIG_ARCH_BERLIN) += reset-berlin.o
 obj-$(CONFIG_ARCH_SUNXI) += reset-sunxi.o
 obj-$(CONFIG_ARCH_STI) += sti/
-obj-$(CONFIG_ARCH_ZYNQMP) += reset-zynqmp.o
+obj-$(CONFIG_ZYNQMP_RESET_CONTROLLER) += reset-zynqmp.o
-- 
2.9.3

