From 9b1ffe668b68aefadc9142192afcabf6f81b6699 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 29 Sep 2016 08:28:43 +0800
Subject: [PATCH 818/827] drm: xilinx: fix the ugly usage for const

drivers/gpu/drm/xilinx/xilinx_drm_fb.c:94:1: note: expected 'struct drm_mode_fb_cmd2 *' but argument is of type 'const struct drm_mode_fb_cmd2 *'
 xilinx_drm_fb_alloc(struct drm_device *drm,

drivers/gpu/drm/xilinx/xilinx_drm_fb.c:106:2: warning: passing argument 2 of 'drm_helper_mode_fill_fb_struct' discards 'const' qualifier from pointer target type
  drm_helper_mode_fill_fb_struct(&fb->base, mode_cmd);
  ^
In file included from drivers/gpu/drm/xilinx/xilinx_drm_fb.c:24:0:
include/drm/drm_crtc_helper.h:199:13: note: expected 'struct drm_mode_fb_cmd2 *' but argument is of type 'const struct drm_mode_fb_cmd2 *'
 extern void drm_helper_mode_fill_fb_struct(struct drm_framebuffer *fb,
             ^
drivers/gpu/drm/xilinx/xilinx_drm_fb.c: In function 'xilinx_drm_fb_create':
drivers/gpu/drm/xilinx/xilinx_drm_fb.c:517:7: warning: passing argument 2 of 'xilinx_drm_fb_alloc' discards 'const' qualifier from pointer target type
  fb = xilinx_drm_fb_alloc(drm, mode_cmd, objs, i);
       ^
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_fb.c | 4 ++--
 drivers/gpu/drm/xilinx/xilinx_drm_fb.h | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_fb.c b/drivers/gpu/drm/xilinx/xilinx_drm_fb.c
index f3d7372..8d7f4a6 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_fb.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_fb.c
@@ -92,7 +92,7 @@ static struct drm_framebuffer_funcs xilinx_drm_fb_funcs = {
  */
 static struct xilinx_drm_fb *
 xilinx_drm_fb_alloc(struct drm_device *drm,
-		    const struct drm_mode_fb_cmd2 *mode_cmd,
+		    struct drm_mode_fb_cmd2 *mode_cmd,
 		    struct drm_gem_cma_object **obj, unsigned int num_planes)
 {
 	struct xilinx_drm_fb *fb;
@@ -470,7 +470,7 @@ void xilinx_drm_fb_restore_mode(struct drm_fb_helper *fb_helper)
  */
 struct drm_framebuffer *
 xilinx_drm_fb_create(struct drm_device *drm, struct drm_file *file_priv,
-		     const struct drm_mode_fb_cmd2 *mode_cmd)
+		     struct drm_mode_fb_cmd2 *mode_cmd)
 {
 	struct xilinx_drm_fb *fb;
 	struct drm_gem_cma_object *objs[4];
diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_fb.h b/drivers/gpu/drm/xilinx/xilinx_drm_fb.h
index 1632ba6..08f794a 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_fb.h
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_fb.h
@@ -32,7 +32,7 @@ void xilinx_drm_fb_fini(struct drm_fb_helper *fb_helper);
 void xilinx_drm_fb_restore_mode(struct drm_fb_helper *fb_helper);
 struct drm_framebuffer *
 xilinx_drm_fb_create(struct drm_device *drm, struct drm_file *file_priv,
-		     const struct drm_mode_fb_cmd2 *mode_cmd);
+		     struct drm_mode_fb_cmd2 *mode_cmd);
 void xilinx_drm_fb_hotplug_event(struct drm_fb_helper *fb_helper);
 void xilinx_drm_fb_set_config(struct drm_fb_helper *fb_helper,
 				struct drm_mode_set *set);
-- 
2.9.3

