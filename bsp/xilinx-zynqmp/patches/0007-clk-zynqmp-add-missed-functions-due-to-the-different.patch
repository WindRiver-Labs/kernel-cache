From dd75223c359bd055f43ac2ba701bf00ff508a136 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 29 Sep 2016 13:55:12 +0800
Subject: [PATCH 007/827] clk: zynqmp: add missed functions due to the different base.

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Add missed function and constant definition

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/clk/clk.c            | 6 ++++++
 drivers/clk/zynqmp/divider.c | 1 +
 include/linux/clk-provider.h | 1 +
 3 files changed, 8 insertions(+)

diff --git a/drivers/clk/clk.c b/drivers/clk/clk.c
index 9f9cadd..dd6816a 100644
--- a/drivers/clk/clk.c
+++ b/drivers/clk/clk.c
@@ -744,6 +744,12 @@ bool __clk_is_enabled(struct clk *clk)
 }
 EXPORT_SYMBOL_GPL(__clk_is_enabled);
 
+unsigned int clk_hw_get_num_parents(const struct clk_hw *hw)
+{
+	return hw->core->num_parents;
+}
+EXPORT_SYMBOL_GPL(clk_hw_get_num_parents);
+
 static struct clk_core *__clk_lookup_subtree(const char *name,
 					     struct clk_core *clk)
 {
diff --git a/drivers/clk/zynqmp/divider.c b/drivers/clk/zynqmp/divider.c
index b16cdd2..4fa1c36 100644
--- a/drivers/clk/zynqmp/divider.c
+++ b/drivers/clk/zynqmp/divider.c
@@ -18,6 +18,7 @@
 #include <linux/string.h>
 #include <linux/log2.h>
 
+#define CLK_DIVIDER_MAX_AT_ZERO		BIT(6)
 /*
  * DOC: basic adjustable divider clock that cannot gate
  *
diff --git a/include/linux/clk-provider.h b/include/linux/clk-provider.h
index df69531..68eec7b 100644
--- a/include/linux/clk-provider.h
+++ b/include/linux/clk-provider.h
@@ -566,6 +566,7 @@ void devm_clk_unregister(struct device *dev, struct clk *clk);
 /* helper functions */
 const char *__clk_get_name(struct clk *clk);
 struct clk_hw *__clk_get_hw(struct clk *clk);
+unsigned int clk_hw_get_num_parents(const struct clk_hw *hw);
 u8 __clk_get_num_parents(struct clk *clk);
 struct clk *__clk_get_parent(struct clk *clk);
 struct clk *clk_get_parent_by_index(struct clk *clk, u8 index);
-- 
2.9.3

