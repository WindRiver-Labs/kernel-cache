From 7e86bc22d6c75c3991d903a3f8d74553675dc9cf Mon Sep 17 00:00:00 2001
From: Soren Brinkmann <soren.brinkmann@xilinx.com>
Date: Thu, 7 Jan 2016 16:50:46 -0800
Subject: [PATCH 077/827] ARM64: zynqmp: Remove sleep.c

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

The file was just a placeholder that is obsolete now as PSCI should
provide the framework for suspend etc.

Signed-off-by: Soren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 60dbd212558ef252dc9b6b0c199da9ed659ce539)

Conflicts:
	drivers/soc/xilinx/zynqmp/sleep.c
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/soc/xilinx/zynqmp/Makefile |  1 -
 drivers/soc/xilinx/zynqmp/sleep.c  | 50 --------------------------------------
 2 files changed, 51 deletions(-)
 delete mode 100644 drivers/soc/xilinx/zynqmp/sleep.c

diff --git a/drivers/soc/xilinx/zynqmp/Makefile b/drivers/soc/xilinx/zynqmp/Makefile
index 2c8a79c..9592e5a 100644
--- a/drivers/soc/xilinx/zynqmp/Makefile
+++ b/drivers/soc/xilinx/zynqmp/Makefile
@@ -1,2 +1 @@
-obj-$(CONFIG_SUSPEND)	+= sleep.o
 obj-$(CONFIG_ZYNQMP_PM_API) += pm.o
diff --git a/drivers/soc/xilinx/zynqmp/sleep.c b/drivers/soc/xilinx/zynqmp/sleep.c
deleted file mode 100644
index 5d1ca89..0000000
--- a/drivers/soc/xilinx/zynqmp/sleep.c
+++ /dev/null
@@ -1,50 +0,0 @@
-/*
- * Suspend support for ZynqMP
- *
- *  Copyright (C) 2015 Xilinx
- *
- *  SÃ¶ren Brinkmann <soren.brinkmann@xilinx.com>
- *
- * This program is free software: you can redistribute it and/or modify
- * it under the terms of the GNU General Public License as published by
- * the Free Software Foundation, either version 2 of the License, or
- * (at your option) any later version.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program.  If not, see <http://www.gnu.org/licenses/>.
- */
-
-#include <linux/suspend.h>
-#include <asm/suspend.h>
-
-static int zynqmp_pm_enter(suspend_state_t suspend_state)
-{
-	switch (suspend_state) {
-	case PM_SUSPEND_STANDBY:
-	case PM_SUSPEND_MEM:
-		cpu_suspend(0);
-		break;
-	default:
-		return -EINVAL;
-	}
-
-	return 0;
-}
-
-static const struct platform_suspend_ops zynqmp_pm_ops = {
-	.enter		= zynqmp_pm_enter,
-	.valid		= suspend_valid_only_mem,
-};
-
-static int __init zynqmp_pm_late_init(void)
-{
-	suspend_set_ops(&zynqmp_pm_ops);
-
-	return 0;
-}
-late_initcall(zynqmp_pm_late_init);
-- 
2.9.3

