From 36d44ec30689e28fa6aea9ae0cc896a317a019aa Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Wed, 13 Aug 2014 12:52:19 +0200
Subject: [PATCH 547/827] xilinx: Remove .owner field for drivers

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

All drivers using module_platform_driver or platform_driver_register
don't need to to init .owner field.

Based on the patch from Peter Griffin <peter.griffin@linaro.org>
"mmc: remove .owner field for drivers using module_platform_driver"

This patch removes the superflous .owner field for drivers which
use the module_platform_driver API, as this is overriden in
platform_driver_register anyway.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_drv.c          | 1 -
 drivers/media/platform/xilinx/xilinx-cfa.c       | 1 -
 drivers/media/platform/xilinx/xilinx-cresample.c | 1 -
 drivers/media/platform/xilinx/xilinx-hls.c       | 1 -
 drivers/media/platform/xilinx/xilinx-remapper.c  | 1 -
 drivers/media/platform/xilinx/xilinx-rgb2yuv.c   | 1 -
 drivers/media/platform/xilinx/xilinx-scaler.c    | 1 -
 drivers/media/platform/xilinx/xilinx-switch.c    | 1 -
 drivers/media/platform/xilinx/xilinx-tpg.c       | 1 -
 drivers/media/platform/xilinx/xilinx-vipp.c      | 1 -
 drivers/media/platform/xilinx/xilinx-vtc.c       | 1 -
 11 files changed, 11 deletions(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_drv.c b/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
index 68295bd..357473b 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
@@ -439,7 +439,6 @@ static struct platform_driver xilinx_drm_private_driver = {
 	.probe			= xilinx_drm_platform_probe,
 	.remove			= xilinx_drm_platform_remove,
 	.driver			= {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-drm",
 		.pm		= &xilinx_drm_pm_ops,
 		.of_match_table	= xilinx_drm_of_match,
diff --git a/drivers/media/platform/xilinx/xilinx-cfa.c b/drivers/media/platform/xilinx/xilinx-cfa.c
index 77853d4..32e8e91 100644
--- a/drivers/media/platform/xilinx/xilinx-cfa.c
+++ b/drivers/media/platform/xilinx/xilinx-cfa.c
@@ -377,7 +377,6 @@ MODULE_DEVICE_TABLE(of, xcfa_of_id_table);
 
 static struct platform_driver xcfa_driver = {
 	.driver			= {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-cfa",
 		.pm		= &xcfa_pm_ops,
 		.of_match_table	= xcfa_of_id_table,
diff --git a/drivers/media/platform/xilinx/xilinx-cresample.c b/drivers/media/platform/xilinx/xilinx-cresample.c
index 692c511..2a75545 100644
--- a/drivers/media/platform/xilinx/xilinx-cresample.c
+++ b/drivers/media/platform/xilinx/xilinx-cresample.c
@@ -429,7 +429,6 @@ MODULE_DEVICE_TABLE(of, xcresample_of_id_table);
 
 static struct platform_driver xcresample_driver = {
 	.driver			= {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-cresample",
 		.pm		= &xcresample_pm_ops,
 		.of_match_table	= xcresample_of_id_table,
diff --git a/drivers/media/platform/xilinx/xilinx-hls.c b/drivers/media/platform/xilinx/xilinx-hls.c
index 79ae3ad..989ec6a 100644
--- a/drivers/media/platform/xilinx/xilinx-hls.c
+++ b/drivers/media/platform/xilinx/xilinx-hls.c
@@ -477,7 +477,6 @@ MODULE_DEVICE_TABLE(of, xhls_of_id_table);
 
 static struct platform_driver xhls_driver = {
 	.driver = {
-		.owner = THIS_MODULE,
 		.name = "xilinx-axi-hls",
 		.of_match_table = xhls_of_id_table,
 	},
diff --git a/drivers/media/platform/xilinx/xilinx-remapper.c b/drivers/media/platform/xilinx/xilinx-remapper.c
index 2f8abd7..020c9ce 100644
--- a/drivers/media/platform/xilinx/xilinx-remapper.c
+++ b/drivers/media/platform/xilinx/xilinx-remapper.c
@@ -518,7 +518,6 @@ MODULE_DEVICE_TABLE(of, xremap_of_id_table);
 
 static struct platform_driver xremap_driver = {
 	.driver = {
-		.owner = THIS_MODULE,
 		.name = "xilinx-axi-remapper",
 		.of_match_table = xremap_of_id_table,
 	},
diff --git a/drivers/media/platform/xilinx/xilinx-rgb2yuv.c b/drivers/media/platform/xilinx/xilinx-rgb2yuv.c
index 8438494..7af416e 100644
--- a/drivers/media/platform/xilinx/xilinx-rgb2yuv.c
+++ b/drivers/media/platform/xilinx/xilinx-rgb2yuv.c
@@ -549,7 +549,6 @@ MODULE_DEVICE_TABLE(of, xrgb2yuv_of_id_table);
 
 static struct platform_driver xrgb2yuv_driver = {
 	.driver			= {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-rgb2yuv",
 		.pm		= &xrgb2yuv_pm_ops,
 		.of_match_table	= xrgb2yuv_of_id_table,
diff --git a/drivers/media/platform/xilinx/xilinx-scaler.c b/drivers/media/platform/xilinx/xilinx-scaler.c
index b757206..4fa244a 100644
--- a/drivers/media/platform/xilinx/xilinx-scaler.c
+++ b/drivers/media/platform/xilinx/xilinx-scaler.c
@@ -676,7 +676,6 @@ MODULE_DEVICE_TABLE(of, xscaler_of_id_table);
 
 static struct platform_driver xscaler_driver = {
 	.driver			= {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-scaler",
 		.of_match_table	= xscaler_of_id_table,
 	},
diff --git a/drivers/media/platform/xilinx/xilinx-switch.c b/drivers/media/platform/xilinx/xilinx-switch.c
index b7b5a57..dd7517f 100644
--- a/drivers/media/platform/xilinx/xilinx-switch.c
+++ b/drivers/media/platform/xilinx/xilinx-switch.c
@@ -439,7 +439,6 @@ MODULE_DEVICE_TABLE(of, xsw_of_id_table);
 
 static struct platform_driver xsw_driver = {
 	.driver = {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-axi-switch",
 		.of_match_table	= xsw_of_id_table,
 	},
diff --git a/drivers/media/platform/xilinx/xilinx-tpg.c b/drivers/media/platform/xilinx/xilinx-tpg.c
index 1050e7c..e7839c2 100644
--- a/drivers/media/platform/xilinx/xilinx-tpg.c
+++ b/drivers/media/platform/xilinx/xilinx-tpg.c
@@ -897,7 +897,6 @@ MODULE_DEVICE_TABLE(of, xtpg_of_id_table);
 
 static struct platform_driver xtpg_driver = {
 	.driver = {
-		.owner		= THIS_MODULE,
 		.name		= "xilinx-axi-tpg",
 		.pm		= &xtpg_pm_ops,
 		.of_match_table	= xtpg_of_id_table,
diff --git a/drivers/media/platform/xilinx/xilinx-vipp.c b/drivers/media/platform/xilinx/xilinx-vipp.c
index d823a64..80c85d3 100644
--- a/drivers/media/platform/xilinx/xilinx-vipp.c
+++ b/drivers/media/platform/xilinx/xilinx-vipp.c
@@ -649,7 +649,6 @@ MODULE_DEVICE_TABLE(of, xvip_composite_of_id_table);
 
 static struct platform_driver xvip_composite_driver = {
 	.driver = {
-		.owner = THIS_MODULE,
 		.name = "xilinx-axi-video",
 		.of_match_table = xvip_composite_of_id_table,
 	},
diff --git a/drivers/media/platform/xilinx/xilinx-vtc.c b/drivers/media/platform/xilinx/xilinx-vtc.c
index 83f6d53..d6e0d17 100644
--- a/drivers/media/platform/xilinx/xilinx-vtc.c
+++ b/drivers/media/platform/xilinx/xilinx-vtc.c
@@ -370,7 +370,6 @@ MODULE_DEVICE_TABLE(of, xvtc_of_id_table);
 
 static struct platform_driver xvtc_driver = {
 	.driver = {
-		.owner = THIS_MODULE,
 		.name = "xilinx-axi-vtc",
 		.of_match_table = xvtc_of_id_table,
 	},
-- 
2.9.3

