From d62de51de4d51ea25f0ddc0ab86af071d2bd7658 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Mon, 4 Jan 2016 17:39:44 -0800
Subject: [PATCH 660/827] drm: xilinx: dp: Add tests to print the debug messages

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Add tests so that the messages are printed only when the events occur.

Signed-off-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit b0ef96ea7d2ae5f2ccc12bb109a118577664110a)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_dp.c | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_dp.c b/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
index 0e201d2..112e03f 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_dp.c
@@ -1145,12 +1145,10 @@ static irqreturn_t xilinx_drm_dp_irq_handler(int irq, void *data)
 	if (!status)
 		return IRQ_NONE;
 
-	dev_dbg(dp->dev, "%s",
-		status & XILINX_DP_TX_INTR_CHBUF_UNDERFLW_MASK ?
-		"underflow interrupt\n" : "");
-	dev_dbg(dp->dev, "%s",
-		status & XILINX_DP_TX_INTR_CHBUF_OVERFLW_MASK ?
-		"overflow interrupt\n" : "");
+	if (status & XILINX_DP_TX_INTR_CHBUF_UNDERFLW_MASK)
+		dev_dbg(dp->dev, "underflow interrupt\n");
+	if (status & XILINX_DP_TX_INTR_CHBUF_OVERFLW_MASK)
+		dev_dbg(dp->dev, "overflow interrupt\n");
 
 	xilinx_drm_writel(dp->iomem, reg, status);
 
-- 
2.9.3

