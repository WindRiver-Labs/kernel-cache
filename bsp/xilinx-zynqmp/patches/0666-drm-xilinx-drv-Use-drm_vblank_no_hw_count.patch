From 1830fd2091775ded105df37a1ea966fb872571f4 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Thu, 4 Feb 2016 17:33:45 -0800
Subject: [PATCH 666/827] drm: xilinx: drv: Use drm_vblank_no_hw_count()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

drm_vblank_no_hw_count() has been added for for SW vblank counting.
Use the functino for .get_vblank_counter callback.

Signed-off-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 25c73a728a2a32041f57beec5ae048b6ed8e0849)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_drv.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_drv.c b/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
index 1e83862..53098d5 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_drv.c
@@ -397,7 +397,7 @@ static struct drm_driver xilinx_drm_driver = {
 	.lastclose			= xilinx_drm_lastclose,
 	.set_busid			= drm_platform_set_busid,
 
-	.get_vblank_counter		= drm_vblank_count,
+	.get_vblank_counter		= drm_vblank_no_hw_count,
 	.enable_vblank			= xilinx_drm_enable_vblank,
 	.disable_vblank			= xilinx_drm_disable_vblank,
 
-- 
2.9.3

