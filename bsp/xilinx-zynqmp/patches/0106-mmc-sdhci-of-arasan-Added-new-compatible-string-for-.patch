From 72d0a013977fa10b2fdc975beb7614dbdb71a090 Mon Sep 17 00:00:00 2001
From: P L Sai Krishna <lakshmis@xilinx.com>
Date: Tue, 16 Aug 2016 14:41:30 +0530
Subject: [PATCH 106/827] mmc: sdhci-of-arasan: Added new compatible string for ZynqMP.

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

This patch adds new compatible string "xlnx,zynqmp-8.9a"
for xilinx ZynqMP.

Signed-off-by: Sai Krishna Potthuri <lakshmis@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit e08fa9175252e6e768bf6b1b9bc62c2ce86694c0)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/mmc/host/sdhci-of-arasan.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/drivers/mmc/host/sdhci-of-arasan.c b/drivers/mmc/host/sdhci-of-arasan.c
index fdbf849..5753e10 100644
--- a/drivers/mmc/host/sdhci-of-arasan.c
+++ b/drivers/mmc/host/sdhci-of-arasan.c
@@ -249,7 +249,9 @@ static int sdhci_arasan_probe(struct platform_device *pdev)
 		goto clk_disable_all;
 	}
 
-	if (of_device_is_compatible(pdev->dev.of_node, "arasan,sdhci-8.9a")) {
+	if (of_device_is_compatible(pdev->dev.of_node, "xlnx,zynqmp-8.9a") ||
+		of_device_is_compatible(pdev->dev.of_node,
+					"arasan,sdhci-8.9a")) {
 		host->quirks |= SDHCI_QUIRK_MULTIBLOCK_READ_ACMD12;
 		host->quirks2 |= SDHCI_QUIRK2_CLOCK_STANDARD_25_BROKEN;
 	}
@@ -323,6 +325,7 @@ static const struct of_device_id sdhci_arasan_of_match[] = {
 	{ .compatible = "arasan,sdhci-8.9a" },
 	{ .compatible = "arasan,sdhci-5.1" },
 	{ .compatible = "arasan,sdhci-4.9a" },
+	{ .compatible = "xlnx,zynqmp-8.9a" },
 	{ }
 };
 MODULE_DEVICE_TABLE(of, sdhci_arasan_of_match);
-- 
2.9.3

