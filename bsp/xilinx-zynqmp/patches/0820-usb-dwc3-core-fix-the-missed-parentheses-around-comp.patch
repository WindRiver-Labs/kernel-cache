From c0b07b94d6221a9ba2576d2924492fb51fceca2c Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 29 Sep 2016 08:47:34 +0800
Subject: [PATCH 820/827] usb: dwc3: core: fix the missed parentheses around comparsion operand

In file included from ./arch/arm64/include/asm/bug.h:62:0,
                 from include/linux/bug.h:4,
                 from include/linux/thread_info.h:11,
                 from include/asm-generic/preempt.h:4,
                 from arch/arm64/include/generated/asm/preempt.h:1,
                 from include/linux/preempt.h:59,
                 from include/linux/spinlock.h:50,
                 from include/linux/seqlock.h:35,
                 from include/linux/time.h:5,
                 from include/linux/stat.h:18,
                 from include/linux/module.h:10,
                 from drivers/usb/dwc3/core.c:23:
drivers/usb/dwc3/core.c: In function 'dwc3_frame_length_adjustment':
drivers/usb/dwc3/core.c:168:64: warning: suggest parentheses around comparison in operand of '&' [-Wparentheses]
   if (!dev_WARN_ONCE(dwc->dev, (reg & DWC3_GFLADJ_REFCLK_FLADJ ==
                                                                ^
include/asm-generic/bug.h:121:27: note: in definition of macro 'WARN_ONCE'
  int __ret_warn_once = !!(condition);   \
                           ^
drivers/usb/dwc3/core.c:168:8: note: in expansion of macro 'dev_WARN_ONCE'
   if (!dev_WARN_ONCE(dwc->dev, (reg & DWC3_GFLADJ_REFCLK_FLADJ ==

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/usb/dwc3/core.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/dwc3/core.c b/drivers/usb/dwc3/core.c
index b85f125..319d21b 100644
--- a/drivers/usb/dwc3/core.c
+++ b/drivers/usb/dwc3/core.c
@@ -165,8 +165,8 @@ static void dwc3_frame_length_adjustment(struct dwc3 *dwc, u32 fladj,
 	reg = dwc3_readl(dwc->regs, DWC3_GFLADJ);
 
 	if (refclk_fladj) {
-		if (!dev_WARN_ONCE(dwc->dev, (reg & DWC3_GFLADJ_REFCLK_FLADJ ==
-		    fladj & DWC3_GFLADJ_REFCLK_FLADJ),
+		if (!dev_WARN_ONCE(dwc->dev, ((reg & DWC3_GFLADJ_REFCLK_FLADJ) ==
+		    (fladj & DWC3_GFLADJ_REFCLK_FLADJ)),
 		    "refclk fladj request value same as default, ignoring\n")) {
 			reg &= ~DWC3_GFLADJ_REFCLK_FLADJ;
 			reg |= (fladj & DWC3_GFLADJ_REFCLK_FLADJ);
-- 
2.9.3

