From b773c61f3f566d6851df2c7dcef504425992806e Mon Sep 17 00:00:00 2001
From: Kedareswara rao Appana <appana.durga.rao@xilinx.com>
Date: Fri, 1 Apr 2016 00:39:06 +0530
Subject: [PATCH 022/827] vdmatest: xilinx: Fix compilation warnings in test client

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

This patch fixes the below compilaiton warnings

In file included from include/linux/dma/xilinx_dma.h:16:0,
                 from drivers/dma/xilinx/vdmatest.c:20:
drivers/dma/xilinx/vdmatest.c: In function xilinx_vdmatest_slave_func:
include/linux/dmaengine.h:1096:9: warning: rx_cookie may be used uninitialized in this function [-Wmaybe-uninitialized]
  status = chan->device->device_tx_status(chan, cookie, &state);
         ^
drivers/dma/xilinx/vdmatest.c:235:26: note: rx_cookie was declared here
  dma_cookie_t tx_cookie, rx_cookie;
                          ^
In file included from include/linux/dma/xilinx_dma.h:16:0,
                 from drivers/dma/xilinx/vdmatest.c:20:
include/linux/dmaengine.h:1096:9: warning: tx_cookie may be used uninitialized in this function [-Wmaybe-uninitialized]
  status = chan->device->device_tx_status(chan, cookie, &state);
         ^
drivers/dma/xilinx/vdmatest.c:235:15: note: tx_cookie was declared here
  dma_cookie_t tx_cookie, rx_cookie;

Signed-off-by: Kedareswara rao Appana <appanad@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 5e1feee7dbb8276b572b842bd4e44d4fad8e11a4)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/dma/xilinx/vdmatest.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/dma/xilinx/vdmatest.c b/drivers/dma/xilinx/vdmatest.c
index 516bdc5..3e2ed65 100644
--- a/drivers/dma/xilinx/vdmatest.c
+++ b/drivers/dma/xilinx/vdmatest.c
@@ -232,7 +232,7 @@ static int xilinx_vdmatest_slave_func(void *data)
 	const char *thread_name;
 	unsigned int len, error_count;
 	unsigned int failed_tests = 0, total_tests = 0;
-	dma_cookie_t tx_cookie, rx_cookie;
+	dma_cookie_t tx_cookie = 0, rx_cookie = 0;
 	enum dma_status status;
 	enum dma_ctrl_flags flags;
 	int ret = -ENOMEM, i;
-- 
2.9.3

