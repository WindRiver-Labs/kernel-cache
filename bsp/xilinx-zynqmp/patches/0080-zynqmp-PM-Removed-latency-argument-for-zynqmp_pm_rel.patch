From c44a4ad75681cb4060fd04f25204de059d4b209f Mon Sep 17 00:00:00 2001
From: Filip Drazic <filip.drazic@aggios.com>
Date: Wed, 20 Jan 2016 12:40:56 +0100
Subject: [PATCH 080/827] zynqmp: PM: Removed latency argument for zynqmp_pm_release_node

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

This change is according to XEMI API Specification v1.08

Signed-off-by: Filip Drazic <filip.drazic@aggios.com>
Acked-by: SÃ¶ren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit bc05750e60ca3a9848c5e8634b92dcfa30dbc97d)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/soc/xilinx/zynqmp/pm.c       | 9 +++------
 include/linux/soc/xilinx/zynqmp/pm.h | 3 +--
 2 files changed, 4 insertions(+), 8 deletions(-)

diff --git a/drivers/soc/xilinx/zynqmp/pm.c b/drivers/soc/xilinx/zynqmp/pm.c
index 84c046e..a8d53ce 100644
--- a/drivers/soc/xilinx/zynqmp/pm.c
+++ b/drivers/soc/xilinx/zynqmp/pm.c
@@ -364,13 +364,12 @@ EXPORT_SYMBOL_GPL(zynqmp_pm_request_node);
 /**
  * zynqmp_pm_release_node - PM call to release a node
  * @node:	Node ID of the slave
- * @latency:	Requested maximum wakeup latency
  *
  * Return:	Returns status, either success or error+reason
  */
-int zynqmp_pm_release_node(const u32 node, const u32 latency)
+int zynqmp_pm_release_node(const u32 node)
 {
-	return invoke_pm_fn(RELEASE_NODE, node, latency, 0, 0, NULL);
+	return invoke_pm_fn(RELEASE_NODE, node, 0, 0, 0, NULL);
 }
 EXPORT_SYMBOL_GPL(zynqmp_pm_release_node);
 
@@ -742,9 +741,7 @@ static ssize_t zynqmp_pm_debugfs_api_write(struct file *file,
 				ZYNQMP_PM_REQUEST_ACK_CALLBACK_STANDARD);
 		break;
 	case RELEASE_NODE:
-		ret = zynqmp_pm_release_node(pm_api_arg[0],
-				pm_api_arg[1] ? pm_api_arg[1] :
-						ZYNQMP_PM_MAX_LATENCY);
+		ret = zynqmp_pm_release_node(pm_api_arg[0]);
 		break;
 	case SET_REQUIREMENT:
 		ret = zynqmp_pm_set_requirement(pm_api_arg[0],
diff --git a/include/linux/soc/xilinx/zynqmp/pm.h b/include/linux/soc/xilinx/zynqmp/pm.h
index 3f9863e..33107e1 100644
--- a/include/linux/soc/xilinx/zynqmp/pm.h
+++ b/include/linux/soc/xilinx/zynqmp/pm.h
@@ -93,8 +93,7 @@ int zynqmp_pm_request_node(const u32 node,
 				   const u32 capabilities,
 				   const u32 qos,
 				   const enum zynqmp_pm_request_ack ack);
-int zynqmp_pm_release_node(const u32,
-				const u32 latency);
+int zynqmp_pm_release_node(const u32 node);
 int zynqmp_pm_set_requirement(const u32 node,
 				   const u32 capabilities,
 				   const u32 qos,
-- 
2.9.3

