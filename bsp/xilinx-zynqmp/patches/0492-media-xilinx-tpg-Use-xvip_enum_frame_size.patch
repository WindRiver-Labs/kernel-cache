From 1a2bd08f10de377be1e1bc8e688fedd01a56da60 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Tue, 18 Mar 2014 09:18:48 -0700
Subject: [PATCH 492/827] media: xilinx: tpg: Use xvip_enum_frame_size()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Replace xtpg_enum_frame_size() with xvip_enum_frame_size().

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 1c113b4aef14004152fefc0e8b8dbbcc2314566f)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-tpg.c | 19 +------------------
 1 file changed, 1 insertion(+), 18 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-tpg.c b/drivers/media/platform/xilinx/xilinx-tpg.c
index 1dfc281..7dbd5b9 100644
--- a/drivers/media/platform/xilinx/xilinx-tpg.c
+++ b/drivers/media/platform/xilinx/xilinx-tpg.c
@@ -159,23 +159,6 @@ static int xtpg_s_stream(struct v4l2_subdev *subdev, int enable)
  * V4L2 Subdevice Pad Operations
  */
 
-static int xtpg_enum_frame_size(struct v4l2_subdev *subdev,
-				struct v4l2_subdev_fh *fh,
-				struct v4l2_subdev_frame_size_enum *fse)
-{
-	struct xtpg_device *xtpg = to_tpg(subdev);
-
-	if (fse->index || fse->code != xtpg->vip_format->code)
-		return -EINVAL;
-
-	fse->min_width = XTPG_MIN_WIDTH;
-	fse->max_width = XTPG_MAX_WIDTH;
-	fse->min_height = XTPG_MIN_HEIGHT;
-	fse->max_height = XTPG_MAX_HEIGHT;
-
-	return 0;
-}
-
 static struct v4l2_mbus_framefmt *
 __xtpg_get_pad_format(struct xtpg_device *xtpg, struct v4l2_subdev_fh *fh,
 		      unsigned int pad, u32 which)
@@ -336,7 +319,7 @@ static struct v4l2_subdev_video_ops xtpg_video_ops = {
 
 static struct v4l2_subdev_pad_ops xtpg_pad_ops = {
 	.enum_mbus_code		= xvip_enum_mbus_code,
-	.enum_frame_size	= xtpg_enum_frame_size,
+	.enum_frame_size	= xvip_enum_frame_size,
 	.get_fmt		= xtpg_get_format,
 	.set_fmt		= xtpg_set_format,
 };
-- 
2.9.3

