From 7027bbdd3e79a63ee59b4a9dd6a632daa6787b6f Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Tue, 18 Mar 2014 09:18:30 -0700
Subject: [PATCH 474/827] media: xilinx: vip: Add enable/disable reg update functions

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Add xvip_enable_reg_update() and xvip_disable_reg_update().
Sometimes drivers need to enable and disable register update for atomicity.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit b2fb60ebf95f277c84499b66d57a8fabcb5676f0)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-vip.h | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/drivers/media/platform/xilinx/xilinx-vip.h b/drivers/media/platform/xilinx/xilinx-vip.h
index 020efe3..be576e7 100644
--- a/drivers/media/platform/xilinx/xilinx-vip.h
+++ b/drivers/media/platform/xilinx/xilinx-vip.h
@@ -163,4 +163,14 @@ static inline void xvip_set_frame_size(struct xvip_device *xvip,
 		   (format->width << XVIP_ACTIVE_HSIZE_SHIFT));
 }
 
+static inline void xvip_enable_reg_update(struct xvip_device *xvip)
+{
+	xvip_set(xvip, XVIP_CTRL_CONTROL, XVIP_CTRL_CONTROL_REG_UPDATE);
+}
+
+static inline void xvip_disable_reg_update(struct xvip_device *xvip)
+{
+	xvip_clr(xvip, XVIP_CTRL_CONTROL, XVIP_CTRL_CONTROL_REG_UPDATE);
+}
+
 #endif /* __XILINX_VIP_H__ */
-- 
2.9.3

