From 79e263d3e638d0e742c1df449ebb6c230c6ba608 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Tue, 18 Mar 2014 09:18:53 -0700
Subject: [PATCH 497/827] media: xilinx: tpg: Use xvip_print_version()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

User xvip_print_version() to print out the version info of TPG.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 4909a78695269bd29bd3d8cf46aefde2b5ad1803)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-tpg.c | 12 ++----------
 1 file changed, 2 insertions(+), 10 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-tpg.c b/drivers/media/platform/xilinx/xilinx-tpg.c
index cc08477..8e91d34 100644
--- a/drivers/media/platform/xilinx/xilinx-tpg.c
+++ b/drivers/media/platform/xilinx/xilinx-tpg.c
@@ -536,7 +536,7 @@ static int xtpg_probe(struct platform_device *pdev)
 	struct v4l2_subdev *subdev;
 	struct xtpg_device *xtpg;
 	struct resource *res;
-	u32 version, i;
+	u32 i;
 	int ret;
 
 	xtpg = devm_kzalloc(&pdev->dev, sizeof(*xtpg), GFP_KERNEL);
@@ -605,15 +605,7 @@ static int xtpg_probe(struct platform_device *pdev)
 
 	platform_set_drvdata(pdev, xtpg);
 
-	version = xvip_read(&xtpg->xvip, XVIP_CTRL_VERSION);
-
-	dev_info(&pdev->dev, "device found, version %u.%02x%x\n",
-		 ((version & XVIP_CTRL_VERSION_MAJOR_MASK) >>
-		  XVIP_CTRL_VERSION_MAJOR_SHIFT),
-		 ((version & XVIP_CTRL_VERSION_MINOR_MASK) >>
-		  XVIP_CTRL_VERSION_MINOR_SHIFT),
-		 ((version & XVIP_CTRL_VERSION_REVISION_MASK) >>
-		  XVIP_CTRL_VERSION_REVISION_SHIFT));
+	xvip_print_version(&xtpg->xvip);
 
 	ret = v4l2_async_register_subdev(subdev);
 	if (ret < 0) {
-- 
2.9.3

