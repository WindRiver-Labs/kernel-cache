From 93838bcea11eee22fd9b4a5c442e8b44dac3ca3e Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Tue, 18 Mar 2014 09:18:28 -0700
Subject: [PATCH 472/827] media: xilinx: vip: Add xvip_stop()

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

Add xvip_stop(), which resets and stops the IP.

Signed-off-by: Hyun Kwon <hyunk@xilinx.com>
Acked-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 40452c34cf93c7fadc5ca6cbf1c80b80f4fd3d6e)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-vip.h | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/media/platform/xilinx/xilinx-vip.h b/drivers/media/platform/xilinx/xilinx-vip.h
index 31c70e3..8d1b8c8 100644
--- a/drivers/media/platform/xilinx/xilinx-vip.h
+++ b/drivers/media/platform/xilinx/xilinx-vip.h
@@ -150,4 +150,9 @@ static inline void xvip_start(struct xvip_device *xvip)
 		 XVIP_CTRL_CONTROL_SW_ENABLE | XVIP_CTRL_CONTROL_REG_UPDATE);
 }
 
+static inline void xvip_stop(struct xvip_device *xvip)
+{
+	xvip_clr(xvip, XVIP_CTRL_CONTROL, XVIP_CTRL_CONTROL_SW_ENABLE);
+}
+
 #endif /* __XILINX_VIP_H__ */
-- 
2.9.3

