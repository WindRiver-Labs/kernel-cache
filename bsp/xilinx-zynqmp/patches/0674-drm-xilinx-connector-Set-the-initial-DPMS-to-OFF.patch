From b80ebcb2c6a68afc5ae9b89e3431f3d58ab4e875 Mon Sep 17 00:00:00 2001
From: Hyun Kwon <hyun.kwon@xilinx.com>
Date: Fri, 25 Mar 2016 13:00:45 -0700
Subject: [PATCH 674/827] drm: xilinx: connector: Set the initial DPMS to OFF

This patch comes from:
  https://github.com/Xilinx/linux-xlnx.git

The initial power state should be DRM_MODE_DPMS_OFF. Otherwise,
the driver gets confused and assumes that the connector is on.

Reported-by: SÃ¶ren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Hyun Kwon <hyun.kwon@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
(cherry picked from commit 1d69e77562134e4a7fe8bd2a69434de6d03f49c4)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpu/drm/xilinx/xilinx_drm_connector.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/gpu/drm/xilinx/xilinx_drm_connector.c b/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
index 1740017..1ef9c4f 100644
--- a/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
+++ b/drivers/gpu/drm/xilinx/xilinx_drm_connector.c
@@ -192,6 +192,7 @@ xilinx_drm_connector_create(struct drm_device *drm,
 		goto err_attach;
 	}
 	connector->encoder = base_encoder;
+	connector->base.dpms = DRM_MODE_DPMS_OFF;
 
 	return &connector->base;
 
-- 
2.9.3

