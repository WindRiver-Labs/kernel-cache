From 8dea6010e33b9e3cf36af2b8385dd92bd79980a1 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Wed, 28 Sep 2016 15:30:08 +0800
Subject: [PATCH 814/827] media: xilinx: fix compiling warnings and errors

CC  drivers/media/platform/xilinx/xilinx-switch.o
drivers/media/platform/xilinx/xilinx-switch.c:181:14: warning: 'struct v4l2_subdev_routing' declared inside parameter list
       struct v4l2_subdev_routing *route)

drivers/media/platform/xilinx/xilinx-switch.c:406:2: error: implicit declaration of function 'media_entity_init' [-Werror=implicit-function-declaration]
  ret = media_entity_init(&subdev->entity, npads, xsw->pads, 0);
  ^
              ^
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/xilinx/xilinx-switch.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/media/platform/xilinx/xilinx-switch.c b/drivers/media/platform/xilinx/xilinx-switch.c
index cc79de6..0017c06 100644
--- a/drivers/media/platform/xilinx/xilinx-switch.c
+++ b/drivers/media/platform/xilinx/xilinx-switch.c
@@ -349,7 +349,7 @@ static int xsw_parse_of(struct xswitch_device *xsw)
 
 static int xsw_probe(struct platform_device *pdev)
 {
-	struct v4l2_subdev *subdev;
+	struct v4l2_subdev *subdev = NULL;
 	struct xswitch_device *xsw;
 	unsigned int npads;
 	unsigned int i;
@@ -403,7 +403,7 @@ static int xsw_probe(struct platform_device *pdev)
 
 	xsw_init_formats(subdev, NULL);
 
-	ret = media_entity_init(&subdev->entity, npads, xsw->pads, 0);
+	ret = media_entity_pads_init(&subdev->entity, npads, xsw->pads, 0);
 	if (ret < 0)
 		goto error;
 
-- 
2.9.3

