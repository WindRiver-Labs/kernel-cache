From 6127a2381ebbd3567e962095578f261326f14838 Mon Sep 17 00:00:00 2001
From: Feng Mu <Feng.Mu@windriver.com>
Date: Thu, 8 Sep 2011 15:42:26 +0800
Subject: [PATCH 7/7] Repartition Mindspeed c1k NOR flash to support PFG

Currently there is only one partition in Mindspeed c1k flash, while PFG
needs both kernel and filesystem to run on flash. So change the default
partitions for PFG.

Signed-off-by: Feng Mu <Feng.Mu@windriver.com>
---
 arch/arm/mach-comcerto/board-c1kmfcn_evm.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-comcerto/board-c1kmfcn_evm.c b/arch/arm/mach-comcerto/board-c1kmfcn_evm.c
index 5c2cabb..a808d8d 100644
--- a/arch/arm/mach-comcerto/board-c1kmfcn_evm.c
+++ b/arch/arm/mach-comcerto/board-c1kmfcn_evm.c
@@ -79,7 +79,13 @@ struct mtd_partition c1kmfcn_evm_nor_partition[] = {
 	},
 	{
 		.name           = "kernel",
-		.offset         = SZ_2M,
+		.offset         = MTDPART_OFS_APPEND,
+		.size           = 0x003A0000,
+		.mask_flags     = 0,
+	},
+	{
+		.name           = "filesystem",
+		.offset         = MTDPART_OFS_APPEND,
 		.size           = MTDPART_SIZ_FULL,
 		.mask_flags     = 0,
 	},
-- 
1.7.0

