From 83ad1c4d42510c508048d1232bc3788f3bf2c52a Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@cavium.com>
Date: Wed, 25 Jan 2012 08:49:34 -0800
Subject: [PATCH 185/236] MIPS: Octeon: Use OCTEON_FEATURE_NAND for Nand support.

Source: Cavium SDK 2.3-427

Signed-off-by: Chandrakala Chavva <cchavva@cavium.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-nand.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-nand.c b/arch/mips/cavium-octeon/octeon-nand.c
index 753d47e..82279af 100644
--- a/arch/mips/cavium-octeon/octeon-nand.c
+++ b/arch/mips/cavium-octeon/octeon-nand.c
@@ -485,9 +485,7 @@ static struct platform_driver octeon_nand_driver = {
 static int __init octeon_nand_init(void)
 {
 	struct resource irq_resource;
-	if (!(OCTEON_IS_MODEL(OCTEON_CN6XXX) ||
-		OCTEON_IS_MODEL(OCTEON_CN52XX)) ||
-		OCTEON_IS_MODEL(OCTEON_CN52XX_PASS1_X))
+	if (!octeon_has_feature(OCTEON_FEATURE_NAND))
 		return -ENODEV;
 
 	if (platform_driver_register(&octeon_nand_driver)) {
-- 
1.7.0

