From 5a72bb3b7fcb31413cb8c69f67f6331782e336f1 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Thu, 27 Oct 2011 09:49:35 -0700
Subject: [PATCH 205/236] NET: octeon-ethernet: Initialize the link state to down.

Source: Cavium SDK 2.3-427

If the link is up the state will be quickly corrected. But it needs
to correctly say it is down if it is in fact down.

Signed-off-by: David Daney <david.daney@cavium.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 drivers/net/octeon/ethernet.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/net/octeon/ethernet.c b/drivers/net/octeon/ethernet.c
index 7c53c48..2419d94 100644
--- a/drivers/net/octeon/ethernet.c
+++ b/drivers/net/octeon/ethernet.c
@@ -957,6 +957,7 @@ static int __init cvm_oct_init_module(void)
 #endif
 			}
 
+			netif_carrier_off(dev);
 			if (!dev->netdev_ops) {
 				free_netdev(dev);
 			} else if (register_netdev(dev) < 0) {
-- 
1.7.0

