From b7f12a9fc5e93036f88663926674be95acbad04c Mon Sep 17 00:00:00 2001
From: Jiang Bin <bin.jiang@windriver.com>
Date: Wed, 2 May 2012 18:37:58 +0800
Subject: [PATCH 174/238] Revert "genirq: cavium octeon_cn56xx: prevent threading of interrupts"

Revert I2C part which is only used for CGL to prevent threading of
interrupts.

Another patch used for CGL and non-CGL will add CONFIG_PREEMPT_HARDIRQS
macro to prevent threading of interrupts.

Signed-off-by: Jiang Bin <bin.jiang@windriver.com>
---
 drivers/i2c/busses/i2c-octeon.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/i2c/busses/i2c-octeon.c b/drivers/i2c/busses/i2c-octeon.c
index aabbef8..59a2c15 100644
--- a/drivers/i2c/busses/i2c-octeon.c
+++ b/drivers/i2c/busses/i2c-octeon.c
@@ -962,7 +962,7 @@ static int __devinit octeon_i2c_probe(struct platform_device *pdev)
 
 	i2c->irq = irq;
 
-	result = request_irq(i2c->irq, octeon_i2c_isr, IRQF_NODELAY, DRV_NAME, i2c);
+	result = request_irq(i2c->irq, octeon_i2c_isr, 0, DRV_NAME, i2c);
 	if (result < 0) {
 		dev_err(i2c->dev, "failed to attach interrupt\n");
 		goto fail_irq;
-- 
1.7.0

