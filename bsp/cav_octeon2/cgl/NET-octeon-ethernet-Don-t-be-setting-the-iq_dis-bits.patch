From 67b6ef530b7c2494afaec54517b2cbf3fbd9e139 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 3 Feb 2012 16:02:11 -0800
Subject: [PATCH 214/238] NET: octeon-ethernet: Don't be setting the iq_dis bits.

Source: Cavium SDK 2.3-427

In the case where get work returns no-work even when there are packets
in the SSO (perhaps queued out to RAM), the interrupt will be masked
forever and we will never proceed.  So never mask them.

Signed-off-by: David Daney <david.daney@cavium.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 drivers/net/octeon/ethernet-rx.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/net/octeon/ethernet-rx.c b/drivers/net/octeon/ethernet-rx.c
index 52f06bc..f3559ba 100644
--- a/drivers/net/octeon/ethernet-rx.c
+++ b/drivers/net/octeon/ethernet-rx.c
@@ -192,14 +192,12 @@ static irqreturn_t cvm_oct_do_interrupt(int cpl, void *dev_id)
 	if (OCTEON_IS_MODEL(OCTEON_CN68XX)) {
 		cvmx_write_csr(CVMX_SSO_WQ_INT_THRX(pow_receive_group), 0);
 		cvmx_write_csr(CVMX_SSO_WQ_INT, 1ULL << pow_receive_group);
-		cvmx_write_csr(CVMX_SSO_WQ_IQ_DIS, 1ULL << pow_receive_group);
 	} else {
 		union cvmx_pow_wq_int wq_int;
 
 		cvmx_write_csr(CVMX_POW_WQ_INT_THRX(pow_receive_group), 0);
 
 		wq_int.u64 = 0;
-		wq_int.s.iq_dis = 1 << pow_receive_group;
 		wq_int.s.wq_int = 1 << pow_receive_group;
 		cvmx_write_csr(CVMX_POW_WQ_INT, wq_int.u64);
 	}
-- 
1.7.0

