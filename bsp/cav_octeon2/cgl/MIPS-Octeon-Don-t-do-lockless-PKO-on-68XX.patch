From e321ccbc8bc71cf2b6202e9fd0f912623db1ac8b Mon Sep 17 00:00:00 2001
From: David Daney <ddaney@caviumnetworks.com>
Date: Fri, 8 Apr 2011 11:02:58 -0700
Subject: [PATCH 084/238] MIPS: Octeon: Don't do lockless PKO on 68XX

Source: Cavium SDK 2.1.0-407

It doesn't work yet.

Signed-off-by: David Daney <ddaney@caviumnetworks.com>
Integrated-by: Phil Staub <Phil.Staub@windriver.com>
---
 arch/mips/include/asm/octeon/cvmx-config.h |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/mips/include/asm/octeon/cvmx-config.h b/arch/mips/include/asm/octeon/cvmx-config.h
index 59b0b3f..8efb0bc 100644
--- a/arch/mips/include/asm/octeon/cvmx-config.h
+++ b/arch/mips/include/asm/octeon/cvmx-config.h
@@ -28,6 +28,9 @@ static inline int octeon_pko_lockless(void)
 	if (OCTEON_IS_MODEL(OCTEON_CN3XXX))
 		return 0;
 
+	if (OCTEON_IS_MODEL(OCTEON_CN68XX))
+		return 0;
+
 	queues += 4; /* For PCI/PCIe */
 
 	if ((OCTEON_IS_MODEL(OCTEON_CN56XX) || OCTEON_IS_MODEL(OCTEON_CN52XX) || OCTEON_IS_MODEL(OCTEON_CN6XXX)))
-- 
1.7.0

