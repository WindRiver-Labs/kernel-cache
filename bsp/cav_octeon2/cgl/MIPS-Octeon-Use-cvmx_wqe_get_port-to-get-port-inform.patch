From f18d1564cba05565a14f0c9a3af26304bb3ec55d Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Mon, 24 Oct 2011 15:33:54 -0700
Subject: [PATCH 177/238] MIPS: Octeon: Use cvmx_wqe_get_port() to get port information.

Source: Cavium SDK 2.3-427

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 drivers/net/octeon/ethernet-rx.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/octeon/ethernet-rx.c b/drivers/net/octeon/ethernet-rx.c
index 33a4d5b..52f06bc 100644
--- a/drivers/net/octeon/ethernet-rx.c
+++ b/drivers/net/octeon/ethernet-rx.c
@@ -269,13 +269,13 @@ static inline int cvm_oct_check_rcv_error(cvmx_wqe_t *work)
 
 			if (*ptr == 0xd5) {
 				/*
-				   DEBUGPRINT("Port %d received 0xd5 preamble\n", work->ipprt);
+				   DEBUGPRINT("Port %d received 0xd5 preamble\n", cvmx_wqe_get_work(work));
 				 */
 				work->packet_ptr.s.addr += i + 1;
 				work->word1.len -= i + 5;
 			} else if ((*ptr & 0xf) == 0xd) {
 				/*
-				   DEBUGPRINT("Port %d received 0x?d preamble\n", work->ipprt);
+				   DEBUGPRINT("Port %d received 0x?d preamble\n", cvmx_wqe_get_work(work));
 				 */
 				work->packet_ptr.s.addr += i;
 				work->word1.len -= i + 4;
-- 
1.7.0

