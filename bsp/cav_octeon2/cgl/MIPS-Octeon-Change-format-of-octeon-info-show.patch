From c2ae8f69876635526f3073072ca00570c5b41ab9 Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@cavium.com>
Date: Fri, 6 Jan 2012 09:59:45 -0800
Subject: [PATCH 184/238] MIPS: Octeon: Change format of octeon info show

Source: Cavium SDK 2.3-427

Signed-off-by: Chandrakala Chavva <cchavva@cavium.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 arch/mips/cavium-octeon/octeon_info.c |   20 ++++++++++----------
 1 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon_info.c b/arch/mips/cavium-octeon/octeon_info.c
index 1db9fb0..c32f8cf 100644
--- a/arch/mips/cavium-octeon/octeon_info.c
+++ b/arch/mips/cavium-octeon/octeon_info.c
@@ -29,12 +29,12 @@ extern uint64_t octeon_reserve32_memory;
  */
 static int octeon_info_show(struct seq_file *m, void *v)
 {
+	struct cvmx_sysinfo *sysinfo = cvmx_sysinfo_get();
 
 	seq_printf(m, "processor_id:        0x%x\n", read_c0_prid());
 	seq_printf(m, "boot_flags:          0x%x\n", octeon_bootinfo->flags);
 	seq_printf(m, "dram_size:           %u\n", octeon_bootinfo->dram_size);
-	seq_printf(m, "phy_mem_desc_addr:   0x%x\n",
-		   octeon_bootinfo->phy_mem_desc_addr);
+	seq_printf(m, "phy_mem_desc_addr:   0x%x\n", (uint32_t)sysinfo->phy_mem_desc_addr);
 	seq_printf(m, "eclock_hz:           %u\n", octeon_bootinfo->eclock_hz);
 	seq_printf(m, "io_clock_hz:         %llu\n", octeon_get_io_clock_rate());
 	seq_printf(m, "dclock_hz:           %u\n", octeon_bootinfo->dclock_hz);
@@ -44,16 +44,16 @@ static int octeon_info_show(struct seq_file *m, void *v)
 	seq_printf(m, "board_rev_minor:     %u\n",
 		   octeon_bootinfo->board_rev_minor);
 	seq_printf(m, "board_serial_number: %s\n",
-		   octeon_bootinfo->board_serial_number);
+		   sysinfo->board_serial_number);
 	seq_printf(m, "mac_addr_base:       %02x:%02x:%02x:%02x:%02x:%02x\n",
-		   (int) octeon_bootinfo->mac_addr_base[0],
-		   (int) octeon_bootinfo->mac_addr_base[1],
-		   (int) octeon_bootinfo->mac_addr_base[2],
-		   (int) octeon_bootinfo->mac_addr_base[3],
-		   (int) octeon_bootinfo->mac_addr_base[4],
-		   (int) octeon_bootinfo->mac_addr_base[5]);
+		   (int) sysinfo->mac_addr_base[0],
+		   (int) sysinfo->mac_addr_base[1],
+		   (int) sysinfo->mac_addr_base[2],
+		   (int) sysinfo->mac_addr_base[3],
+		   (int) sysinfo->mac_addr_base[4],
+		   (int) sysinfo->mac_addr_base[5]);
 	seq_printf(m, "mac_addr_count:      %u\n",
-		   octeon_bootinfo->mac_addr_count);
+		   sysinfo->mac_addr_count);
 #if CONFIG_CAVIUM_RESERVE32
 	seq_printf(m, "32bit_shared_mem_base: 0x%lx\n",
 		   (long int) octeon_reserve32_memory);
-- 
1.7.0

