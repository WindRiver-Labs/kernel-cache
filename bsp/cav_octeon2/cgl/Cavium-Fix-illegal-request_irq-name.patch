From 043e9d1c6126a9fbdaf6471075e20deedbd9e6fe Mon Sep 17 00:00:00 2001
From: Phil Staub <Phil.Staub@windriver.com>
Date: Fri, 7 Oct 2011 13:28:16 -0700
Subject: [PATCH 097/238] Cavium: Fix illegal request_irq name

Use of a slash ('/') in the string associated with a request_irq
("RML/RSL") is not handled well (compiles ok, but causes a Call Trace
upon boot; only affects non-CN68XX targets, so this was missed during
unit testing).

The fix is to replace '/' with '_'.

This was resolved in the SDK 2.0 BSP, but missed on the SDK 2.1
update.

Signed-off-by: Phil Staub <Phil.Staub@windriver.com>
---
 arch/mips/cavium-octeon/setup.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/setup.c b/arch/mips/cavium-octeon/setup.c
index df723a0..e5aa3ac 100644
--- a/arch/mips/cavium-octeon/setup.c
+++ b/arch/mips/cavium-octeon/setup.c
@@ -1185,7 +1185,7 @@ void prom_free_prom_memory(void)
 #endif
 	if (!OCTEON_IS_MODEL(OCTEON_CN68XX)) {
 		if (request_irq(OCTEON_IRQ_RML, octeon_rml_interrupt, irq_flags,
-					"RML/RSL", octeon_rml_interrupt)) {
+					"RML_RSL", octeon_rml_interrupt)) {
 			panic("Unable to request_irq(OCTEON_IRQ_RML)\n");
 		}
 	}
-- 
1.7.0

