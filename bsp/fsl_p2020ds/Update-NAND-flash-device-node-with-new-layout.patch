From 05560b8afd224eec28ba293e42c6f0bb11241395 Mon Sep 17 00:00:00 2001
From: Andrew Liu <shengping.liu@windriver.com>
Date: Tue, 12 Jan 2010 17:06:52 +0800
Subject: [PATCH 7/7] Update NAND flash device node with new layout

Update NAND flash device node with new layout to be consistent
with README description.

CQID: WIND00196152

Signed-off-by: Andrew Liu <shengping.liu@windriver.com>
---
 arch/powerpc/boot/dts/p2020rdb.dts |   49 ++++++++++++++++++++++--------------
 1 files changed, 30 insertions(+), 19 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2020rdb.dts b/arch/powerpc/boot/dts/p2020rdb.dts
index 501dfe7..ede4286 100644
--- a/arch/powerpc/boot/dts/p2020rdb.dts
+++ b/arch/powerpc/boot/dts/p2020rdb.dts
@@ -103,34 +103,45 @@
 				     "fsl,elbc-fcm-nand";
 			reg = <0x1 0x0 0x40000>;
 
-			ramdisk@0 {
-				reg = <0x00000000 0x00a00000>;
-				label = "ramdisk_nand";
+			u-boot@0 {
+				/* This location must not be altered  */
+				/* 512KB for u-boot Bootloader Image */
+				reg = <0x0 0x00080000>;
+				label = "NAND (RO) U-Boot Image";
+				read-only;
 			};
 
-			jffs2@a00000 {
-				reg = <0x00a00000 0x00c00000>;
-				label = "jffs2_nand";
+			dtb@80000 {
+				/* 512KB for DTB Image */
+				reg = <0x00080000 0x00080000>;
+				label = "NAND (RO) DTB Image";
+				read-only;
 			};
 
-			kernel@1600000 {
-				reg = <0x01600000 0x00400000>;
-				label = "kernel_nand";
+			uImage@100000 {
+				/* 4MB for Linux Kernel Image */
+				reg = <0x00100000 0x00400000>;
+				label = "NAND (RO) Linux Kernel Image";
+				read-only;
 			};
 
-			dtb@1a00000 {
-				reg = <0x01a00000 0x00080000>;
-				label = "dtb_nand";
+			rfs@500000 {
+				/* 4MB for Compressed Root file System Image */
+				reg = <0x00500000 0x00400000>;
+				label = "NAND (RO) Compressed RFS Image";
+				read-only;
 			};
 
-			u-boot@1a80000 {
-				reg = <0x01a80000 0x00080000>;
-				label = "u-boot_nand";
-				read-only;
+			jffs2@900000 {
+				/* 7MB for JFFS2 based Root file System */
+				reg = <0x00900000 0x00700000>;
+				label = "NAND (RW) JFFS2 Root File System";
 			};
-			empty@1b00000 {
-				reg = <0x01b00000 0x00500000>;
-				label = "empty_nand";
+
+			user@1000000 {
+				/* 16MB for JFFS2 based Root file System */
+				reg = <0x01000000 0x01000000>;
+				label = "NAND (RW) Writable User area";
 			};
 		};
 
-- 
1.6.5.2

