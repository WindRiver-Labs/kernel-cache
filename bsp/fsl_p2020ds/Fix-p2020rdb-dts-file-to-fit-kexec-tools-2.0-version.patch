From 3b0b35f046f51bbda9670842556fb3c84c1098e0 Mon Sep 17 00:00:00 2001
From: shuo.kang <shuo.kang@windriver.com>
Date: Fri, 25 Dec 2009 13:16:47 +0800
Subject: [PATCH 2/7] Fix p2020rdb dts file to fit kexec-tools 2.0 version

Since kexec tools 2.0 just can recognize two cells (one address cell
and one size cell) memory reg property style, but it's four cells
(two address cells and two size cells) in P2020RDB dts file. This caused
 kexec tools can't find out suitable memrory range for kernel image. So
fix memory reg property style in P2020RDB dts file to fix kexec tools
2.0 version.

Signed-off-by: shuo.kang <shuo.kang@windriver.com>
---
 arch/powerpc/boot/dts/p2020rdb.dts |   26 +++++++++++++-------------
 1 files changed, 13 insertions(+), 13 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2020rdb.dts b/arch/powerpc/boot/dts/p2020rdb.dts
index ade7add..a839cbd 100644
--- a/arch/powerpc/boot/dts/p2020rdb.dts
+++ b/arch/powerpc/boot/dts/p2020rdb.dts
@@ -14,8 +14,8 @@
 / {
 	model = "fsl,P2020";
 	compatible = "fsl,P2020RDB";
-	#address-cells = <2>;
-	#size-cells = <2>;
+	#address-cells = <1>;
+	#size-cells = <1>;
 
 	aliases {
 		ethernet0 = &enet0;
@@ -52,14 +52,14 @@
 		#address-cells = <2>;
 		#size-cells = <1>;
 		compatible = "fsl,p2020-elbc", "fsl,elbc", "simple-bus";
-		reg = <0 0xffe05000 0 0x1000>;
+		reg = <0xffe05000 0x1000>;
 		interrupts = <19 2>;
 		interrupt-parent = <&mpic>;
 
 		/* NOR and NAND Flashes */
-		ranges = <0x0 0x0 0x0 0xef000000 0x01000000
-			  0x1 0x0 0x0 0xffa00000 0x00040000
-			  0x2 0x0 0x0 0xffb00000 0x08000000>;
+		ranges = <0x0 0x0 0xef000000 0x01000000
+			  0x1 0x0 0xffa00000 0x00040000
+			  0x2 0x0 0xffb00000 0x08000000>;
 
 		nor@0,0 {
 			#address-cells = <1>;
@@ -148,7 +148,7 @@
 		#size-cells = <1>;
 		device_type = "soc";
 		compatible = "simple-bus";
-		ranges = <0x0  0x0 0xffe00000 0x100000>;
+		ranges = <0x0  0xffe00000 0x100000>;
 		bus-frequency = <0>;		// Filled out by uboot.
 
 		memory-controller@2000 {
@@ -460,10 +460,10 @@
 		#interrupt-cells = <1>;
 		#size-cells = <2>;
 		#address-cells = <3>;
-		reg = <0 0xffe09000 0 0x1000>;
+		reg = <0xffe09000 0x1000>;
 		bus-range = <0 255>;
-		ranges = <0x2000000 0x0 0xa0000000 0 0xa0000000 0x0 0x20000000
-			  0x1000000 0x0 0x00000000 0 0xffc30000 0x0 0x10000>;
+		ranges = <0x2000000 0x0 0xa0000000 0xa0000000 0x0 0x20000000
+			  0x1000000 0x0 0x00000000 0xffc30000 0x0 0x10000>;
 		clock-frequency = <33333333>;
 		interrupt-parent = <&mpic>;
 		interrupts = <25 2>;
@@ -489,10 +489,10 @@
 		#interrupt-cells = <1>;
 		#size-cells = <2>;
 		#address-cells = <3>;
-		reg = <0 0xffe0a000 0 0x1000>;
+		reg = <0xffe0a000 0x1000>;
 		bus-range = <0 255>;
-		ranges = <0x2000000 0x0 0xc0000000 0 0xc0000000 0x0 0x20000000
-			  0x1000000 0x0 0x00000000 0 0xffc20000 0x0 0x10000>;
+		ranges = <0x2000000 0x0 0xc0000000 0xc0000000 0x0 0x20000000
+			  0x1000000 0x0 0x00000000 0xffc20000 0x0 0x10000>;
 		clock-frequency = <33333333>;
 		interrupt-parent = <&mpic>;
 		interrupts = <26 2>;
-- 
1.6.5.2

