From 9f1a4f5ad9d66007bb43ae47dbdbe084ef4c0a58 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Mon, 13 Jul 2009 15:08:49 +0800
Subject: [PATCH 12/15] p2020ds: Fix P2020DS dts file to fit kexec-tools 2.0 version

Since kexec tools 2.0 just can recognize two cells (one address cell
and one size cell) memory reg property style, but it's four cells
(two address cells and two size cells) in P2020DS dts file. This caused
kexec tools can't find out suitable memrory range for kernel image. So
fix memory reg property style in P2020DS dts file to fix kexec tools
2.0 version.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/powerpc/boot/dts/p2020ds.dts |   40 ++++++++++++++++++------------------
 1 files changed, 20 insertions(+), 20 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2020ds.dts b/arch/powerpc/boot/dts/p2020ds.dts
index be1097d..3ff49aa 100644
--- a/arch/powerpc/boot/dts/p2020ds.dts
+++ b/arch/powerpc/boot/dts/p2020ds.dts
@@ -13,8 +13,8 @@
 / {
        model = "fsl,P2020";
        compatible = "fsl,P2020DS";
-       #address-cells = <2>;
-       #size-cells = <2>;
+       #address-cells = <1>;
+       #size-cells = <1>;
 
        aliases {
                ethernet0 = &enet0;
@@ -52,17 +52,17 @@
                #address-cells = <2>;
                #size-cells = <1>;
                compatible = "fsl,elbc", "simple-bus";
-               reg = <0 0xffe05000 0 0x1000>;
+               reg = <0xffe05000 0x1000>;
                interrupts = <19 2>;
                interrupt-parent = <&mpic>;
 
-               ranges = <0x0 0x0 0x0 0xe8000000 0x08000000
-                         0x1 0x0 0x0 0xe0000000 0x08000000
-                         0x2 0x0 0x0 0xffa00000 0x00040000
-                         0x3 0x0 0x0 0xffdf0000 0x00008000
-                         0x4 0x0 0x0 0xffa40000 0x00040000
-                         0x5 0x0 0x0 0xffa80000 0x00040000
-                         0x6 0x0 0x0 0xffac0000 0x00040000>;
+               ranges = <0x0 0x0 0xe8000000 0x08000000
+                         0x1 0x0 0xe0000000 0x08000000
+                         0x2 0x0 0xffa00000 0x00040000
+                         0x3 0x0 0xffdf0000 0x00008000
+                         0x4 0x0 0xffa40000 0x00040000
+                         0x5 0x0 0xffa80000 0x00040000
+                         0x6 0x0 0xffac0000 0x00040000>;
 
                nor@0,0 {
                        #address-cells = <1>;
@@ -162,7 +162,7 @@
                #size-cells = <1>;
                device_type = "soc";
                compatible = "fsl,p2020-immr", "simple-bus";
-               ranges = <0x0 0 0xffe00000 0x100000>;
+               ranges = <0x0 0xffe00000 0x100000>;
                bus-frequency = <0>;            // Filled out by uboot.
 
                ecm-law@0 {
@@ -523,10 +523,10 @@
                #interrupt-cells = <1>;
                #size-cells = <2>;
                #address-cells = <3>;
-               reg = <0 0xffe08000 0 0x1000>;
+               reg = <0xffe08000 0x1000>;
                bus-range = <0 255>;
-               ranges = <0x2000000 0x0 0x80000000 0 0x80000000 0x0 0x20000000
-                         0x1000000 0x0 0x00000000 0 0xffc00000 0x0 0x10000>;
+               ranges = <0x2000000 0x0 0x80000000 0x80000000 0x0 0x20000000
+                         0x1000000 0x0 0x00000000 0xffc00000 0x0 0x10000>;
                clock-frequency = <33333333>;
                interrupt-parent = <&mpic>;
                interrupts = <24 2>;
@@ -559,10 +559,10 @@
                #interrupt-cells = <1>;
                #size-cells = <2>;
                #address-cells = <3>;
-               reg = <0 0xffe09000 0 0x1000>;
+               reg = <0xffe09000 0x1000>;
                bus-range = <0 255>;
-               ranges = <0x2000000 0x0 0xa0000000 0 0xa0000000 0x0 0x20000000
-                         0x1000000 0x0 0x00000000 0 0xffc10000 0x0 0x10000>;
+               ranges = <0x2000000 0x0 0xa0000000 0xa0000000 0x0 0x20000000
+                         0x1000000 0x0 0x00000000 0xffc10000 0x0 0x10000>;
                clock-frequency = <33333333>;
                interrupt-parent = <&mpic>;
                interrupts = <25 2>;
@@ -698,10 +698,10 @@
                #interrupt-cells = <1>;
                #size-cells = <2>;
                #address-cells = <3>;
-               reg = <0 0xffe0a000 0 0x1000>;
+               reg = <0xffe0a000 0x1000>;
                bus-range = <0 255>;
-               ranges = <0x2000000 0x0 0xc0000000 0 0xc0000000 0x0 0x20000000
-                         0x1000000 0x0 0x00000000 0 0xffc20000 0x0 0x10000>;
+               ranges = <0x2000000 0x0 0xc0000000 0xc0000000 0x0 0x20000000
+                         0x1000000 0x0 0x00000000 0xffc20000 0x0 0x10000>;
                clock-frequency = <33333333>;
                interrupt-parent = <&mpic>;
                interrupts = <26 2>;
-- 
1.6.3.3

