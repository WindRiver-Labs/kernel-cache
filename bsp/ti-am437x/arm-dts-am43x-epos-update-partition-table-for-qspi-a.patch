From 19ad7ff21f8cf9336261105c03f3b9b8f2b938f0 Mon Sep 17 00:00:00 2001
From: Sourav Poddar <sourav.poddar@ti.com>
Date: Wed, 5 Mar 2014 20:35:22 +0530
Subject: [PATCH 231/285] arm: dts: am43x-epos: update partition table for
 qspi according to XIP

Change partition table for qspi on am43x epos according to XIP
bootcase.

Signed-off-by: Sourav Poddar <sourav.poddar@ti.com>
Acked-by: Tom Rini <trini@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/am43x-epos-evm.dts |   45 ++++++++++++----------------------
 1 files changed, 16 insertions(+), 29 deletions(-)

diff --git a/arch/arm/boot/dts/am43x-epos-evm.dts b/arch/arm/boot/dts/am43x-epos-evm.dts
index 2944733..132dab9 100644
--- a/arch/arm/boot/dts/am43x-epos-evm.dts
+++ b/arch/arm/boot/dts/am43x-epos-evm.dts
@@ -577,49 +577,36 @@
 		#size-cells = <1>;
 
 		/* MTD partition table.
-		 * The ROM checks the first four physical blocks
-		 * for a valid file to boot and the flash here is
-		 * 64KiB block size.
+		 * The ROM checks the first 512KiB
+		 * for a valid file to boot(XIP).
 		 */
 		partition@0 {
-			label = "QSPI.SPL";
-			reg = <0x00000000 0x000010000>;
+			label = "QSPI.U_BOOT";
+			reg = <0x00000000 0x000080000>;
 		};
 		partition@1 {
-			label = "QSPI.SPL.backup1";
-			reg = <0x00010000 0x00010000>;
+			label = "QSPI.U_BOOT.backup";
+			reg = <0x00080000 0x00080000>;
 		};
 		partition@2 {
-			label = "QSPI.SPL.backup2";
-			reg = <0x00020000 0x00010000>;
+			label = "QSPI.U-BOOT-SPL_OS";
+			reg = <0x00100000 0x00010000>;
 		};
 		partition@3 {
-			label = "QSPI.SPL.backup3";
-			reg = <0x00030000 0x00010000>;
+			label = "QSPI.U_BOOT_ENV";
+			reg = <0x00110000 0x00010000>;
 		};
 		partition@4 {
-			label = "QSPI.u-boot";
-			reg = <0x00040000 0x00180000>;
+			label = "QSPI.U-BOOT-ENV.backup";
+			reg = <0x00120000 0x00010000>;
 		};
 		partition@5 {
-			label = "QSPI.u-boot-spl-os";
-			reg = <0x001c0000 0x00010000>;
+			label = "QSPI.KERNEL";
+			reg = <0x00130000 0x0800000>;
 		};
 		partition@6 {
-			label = "QSPI.u-boot-env";
-			reg = <0x001d0000 0x00010000>;
-		};
-		partition@7 {
-			label = "QSPI.u-boot-env.backup1";
-			reg = <0x001e0000 0x0010000>;
-		};
-		partition@8 {
-			label = "QSPI.kernel";
-			reg = <0x001f0000 0x00500000>;
-		};
-		partition@9 {
-			label = "QSPI.file-system";
-			reg = <0x006f0000 0x03910000>;
+			label = "QSPI.FILESYSTEM";
+			reg = <0x00930000 0x36D0000>;
 		};
 	};
 };
-- 
1.7.5.4

