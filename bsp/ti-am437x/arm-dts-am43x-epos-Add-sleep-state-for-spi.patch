From 48f40d981f92c1aca04008dd1dddf47aca280b98 Mon Sep 17 00:00:00 2001
From: Sourav Poddar <sourav.poddar@ti.com>
Date: Fri, 31 Jan 2014 16:29:48 -0600
Subject: [PATCH 194/285] arm: dts: am43x-epos: Add "sleep" state for spi.

Add "sleep" state for spi pincontrol nodes. This will ensure that during
suspend pins are set to the values that optimize power savings.

Signed-off-by: Sourav Poddar <sourav.poddar@ti.com>
Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
Tested-by: Sourav Poddar <sourav.poddar@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/am43x-epos-evm.dts |   32 ++++++++++++++++++++++++++------
 1 files changed, 26 insertions(+), 6 deletions(-)

diff --git a/arch/arm/boot/dts/am43x-epos-evm.dts b/arch/arm/boot/dts/am43x-epos-evm.dts
index c4afd9d..cd8f8de 100644
--- a/arch/arm/boot/dts/am43x-epos-evm.dts
+++ b/arch/arm/boot/dts/am43x-epos-evm.dts
@@ -241,7 +241,7 @@
 		>;
 	};
 
-	spi0_pins: pinmux_spi0_pins {
+	spi0_default: pinmux_spi0_default {
 		pinctrl-single,pins = <
 			0x150 (PIN_INPUT_PULLUP | MUX_MODE0)	/* spi0_clk.spi0_clk */
 			0x154 (PIN_INPUT_PULLUP | MUX_MODE0)	/* spi0_d0.spi0_d0 */
@@ -250,7 +250,16 @@
 		>;
 	};
 
-	spi1_pins: pinmux_spi1_pins {
+	spi0_sleep: pinmux_spi0_sleep {
+		pinctrl-single,pins = <
+			0x150 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x154 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x158 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x15c (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+		>;
+	};
+
+	spi1_default: pinmux_spi1_default {
 		pinctrl-single,pins = <
 			0x190 (PIN_INPUT_PULLUP | MUX_MODE3)	/* mcasp0_aclkx.spi1_clk */
 			0x194 (PIN_INPUT_PULLUP | MUX_MODE3)	/* mcasp0_fsx.spi1_d0 */
@@ -259,6 +268,15 @@
 		>;
 	};
 
+	spi1_sleep: pinmux_spi1_sleep {
+		pinctrl-single,pins = <
+			0x190 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x194 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x198 (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+			0x19c (DS0_PULL_UP_DOWN_EN | INPUT_EN | MUX_MODE7)
+		>;
+        };
+
 	pixcir_ts_pins: pixcir_ts_pins {
 		pinctrl-single,pins = <
 			0x44 (PIN_INPUT_PULLUP | MUX_MODE7)  /* gpmc_a1.gpio1_17 */
@@ -621,14 +639,16 @@
 };
 
 &spi0 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&spi0_pins>;
+	pinctrl-names = "default", "sleep";
+	pinctrl-0 = <&spi0_default>;
+	pinctrl-1 = <&spi0_sleep>;
 	status = "okay";
 };
 
 &spi1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&spi1_pins>;
+	pinctrl-names = "default", "sleep";
+	pinctrl-0 = <&spi1_default>;
+	pinctrl-1 = <&spi1_sleep>;
 	status = "okay";
 };
 
-- 
1.7.5.4

