From b3571a77998bc9a086a0362959493ad2c704403b Mon Sep 17 00:00:00 2001
From: Jyri Sarha <jsarha@ti.com>
Date: Tue, 19 Nov 2013 20:26:47 +0200
Subject: [PATCH 145/285] ARM: dts: am43x-epos-evm: Add sound and
 tlv320aic3111 nodes

Signed-off-by: Jyri Sarha <jsarha@ti.com>
Signed-off-by: Darren Etheridge <detheridge@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/am43x-epos-evm.dts |   25 +++++++++++++++++++++++++
 1 files changed, 25 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/am43x-epos-evm.dts b/arch/arm/boot/dts/am43x-epos-evm.dts
index 358fb61..0e04296 100644
--- a/arch/arm/boot/dts/am43x-epos-evm.dts
+++ b/arch/arm/boot/dts/am43x-epos-evm.dts
@@ -120,6 +120,21 @@
 			cpu0-supply = <&dcdc2>;
 		};
 	};
+
+	sound {
+		compatible = "ti,am43xx-epos-evm-audio";
+		ti,model = "AM43x-EPOS-EVM";
+		ti,audio-codec = <&tlv320aic3111>;
+		ti,mcasp-controller = <&mcasp1>;
+		ti,codec-clock-rate = <12000000>;
+		ti,audio-routing =
+			"Speaker", 		"SPL",
+			"Speaker", 		"SPR",
+			"Headphone Jack",       "HPL",
+			"Headphone Jack",       "HPR",
+			"MIC1LP",               "Mic Jack",
+			"MIC1RP",               "Mic Jack";
+	};
 };
 
 &am43xx_pinmux {
@@ -498,6 +513,16 @@
 			regulator-always-on;
 		};
 	};
+
+	tlv320aic3111: tlv320aic3111@18 {
+		compatible = "ti,tlv320aic311x";
+		reg = <0x18>;
+		status = "okay";
+		pinctrl-names = "default";
+		pinctrl-0 = <&tlv320aic3111_reset_pin>;
+
+		gpio-reset = <&gpio1 28 GPIO_ACTIVE_HIGH>;
+	};
 };
 
 &i2c2 {
-- 
1.7.5.4

