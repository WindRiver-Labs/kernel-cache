From 092a72a4702cfd1b691bb9249ce1455f35985d3a Mon Sep 17 00:00:00 2001
From: Pekon Gupta <pekon@ti.com>
Date: Tue, 15 Oct 2013 18:57:35 +0530
Subject: [PATCH 083/285] mtd: nand: omap: fix warning on un-used
 omap_calculate_ecc_bch()

omap_calculate_ecc_bch() is unused when neither of following is defined:
CONFIG_MTD_NAND_ECC_BCH (required for OMAP_ECC_BCHx_CODE_HW_SW_DETECTION)
CONFIG_MTD_NAND_OMAP_BCH (required for OMAP_ECC_BCHxx_CODE_HW)

Signed-off-by: Pekon Gupta <pekon@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/mtd/nand/omap2.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/mtd/nand/omap2.c b/drivers/mtd/nand/omap2.c
index f552b65..a932990 100644
--- a/drivers/mtd/nand/omap2.c
+++ b/drivers/mtd/nand/omap2.c
@@ -1103,6 +1103,7 @@ static void omap_enable_hwecc(struct mtd_info *mtd, int mode)
 	writel(ECCCLEAR | ECC1, info->reg.gpmc_ecc_control);
 }
 
+#if defined(CONFIG_MTD_NAND_ECC_BCH) || defined(CONFIG_MTD_NAND_OMAP_BCH)
 /**
  * omap_calculate_ecc_bch - Generate bytes of ECC bytes
  * @mtd:	MTD device structure
@@ -1238,6 +1239,7 @@ static int omap_calculate_ecc_bch(struct mtd_info *mtd, const u_char *dat,
 	}
 	return 0;
 }
+#endif /*defined(CONFIG_MTD_NAND_ECC_BCH) || defined(CONFIG_MTD_NAND_OMAP_BCH)*/
 
 #ifdef CONFIG_MTD_NAND_OMAP_BCH
 /**
-- 
1.7.5.4

