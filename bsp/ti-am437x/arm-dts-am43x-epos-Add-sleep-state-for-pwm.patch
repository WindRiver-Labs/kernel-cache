From 3301a4827f47fc9814de202d8555d2d7396568ca Mon Sep 17 00:00:00 2001
From: Sourav Poddar <sourav.poddar@ti.com>
Date: Fri, 31 Jan 2014 16:29:50 -0600
Subject: [PATCH 196/285] arm: dts: am43x-epos: Add "sleep" state for pwm.

Add "sleep" state for pwm pincontrol nodes. This will ensure that during
suspend pins are set to the values that optimize power savings.

Signed-off-by: Sourav Poddar <sourav.poddar@ti.com>
Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
Tested-by: Sourav Poddar <sourav.poddar@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/am43x-epos-evm.dts |   14 +++++++++++---
 1 files changed, 11 insertions(+), 3 deletions(-)

diff --git a/arch/arm/boot/dts/am43x-epos-evm.dts b/arch/arm/boot/dts/am43x-epos-evm.dts
index cd8f8de..417b77e 100644
--- a/arch/arm/boot/dts/am43x-epos-evm.dts
+++ b/arch/arm/boot/dts/am43x-epos-evm.dts
@@ -328,13 +328,20 @@
 		>;
 	};
 
-	ecap0_pins: backlight_pins {
+
+	ecap0_default: backlight_default {
 		pinctrl-single,pins = <
 			0x164 MUX_MODE0		/* eCAP0_in_PWM0_out.eCAP0_in_PWM0_out MODE0 */
 		>;
 
 	};
 
+	ecap0_sleep: backlight_sleep {
+		pinctrl-single,pins = <
+			0x164 (INPUT_EN | MUX_MODE7)
+		>;
+	};
+
 	mcasp1_pins: pinmux_mcasp1_pins {
 		pinctrl-single,pins = <
 			0x1a0 (PIN_INPUT_PULLDOWN | MUX_MODE3) /* MCASP0_ACLKR/MCASP1_ACLKX */
@@ -662,8 +669,9 @@
 
 &ecap0 {
 	status = "okay";
-	pinctrl-names = "default";
-	pinctrl-0 = <&ecap0_pins>;
+	pinctrl-names = "default", "sleep";
+	pinctrl-0 = <&ecap0_default>;
+	pinctrl-1 = <&ecap0_sleep>;
 };
 
 &epwmss0 {
-- 
1.7.5.4

