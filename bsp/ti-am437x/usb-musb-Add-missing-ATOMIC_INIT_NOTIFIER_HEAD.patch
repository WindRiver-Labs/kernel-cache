From 8e57df343215e3ea15ad2fcaa05d71f18d857a9a Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Pali=20Roh=C3=A1r?= <pali.rohar@gmail.com>
Date: Wed, 18 Sep 2013 19:03:33 +0200
Subject: [PATCH 075/285] usb: musb: Add missing ATOMIC_INIT_NOTIFIER_HEAD
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

commit 80d2e76c2e162264dff1c5107a31b8d99e816cd4 upstream

&twl->phy.notifier is not initalized

Signed-off-by: Pali Roh√°r <pali.rohar@gmail.com>
Signed-off-by: Felipe Balbi <balbi@ti.com>
---
 drivers/phy/phy-twl4030-usb.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/phy/phy-twl4030-usb.c b/drivers/phy/phy-twl4030-usb.c
index c437211..2e81b80 100644
--- a/drivers/phy/phy-twl4030-usb.c
+++ b/drivers/phy/phy-twl4030-usb.c
@@ -724,6 +724,8 @@ static int twl4030_usb_probe(struct platform_device *pdev)
 	if (device_create_file(&pdev->dev, &dev_attr_vbus))
 		dev_warn(&pdev->dev, "could not create sysfs file\n");
 
+	ATOMIC_INIT_NOTIFIER_HEAD(&twl->phy.notifier);
+
 	/* Our job is to use irqs and status from the power module
 	 * to keep the transceiver disabled when nothing's connected.
 	 *
-- 
1.7.5.4

