From eb732040ca189a8fe71d0523b2fb620cbc00fa83 Mon Sep 17 00:00:00 2001
From: Mark Jackson <mpfj-list@newflow.co.uk>
Date: Thu, 15 Aug 2013 08:53:44 +0100
Subject: [PATCH 03/71] OMAP: serial: Remove incorrect disabling of IER
 interrupt

commit e438ac9ade074932383bb00d51b8ded8a0ee164b upstream

The recent patch to add RS485 contained a bug whereby the IER
interrupt was cleared down incorrectly.

This patch fixes the problem.

Signed-off-by: Mark Jackson <mpfj@newflow.co.uk>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/tty/serial/omap-serial.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

diff --git a/drivers/tty/serial/omap-serial.c b/drivers/tty/serial/omap-serial.c
index e6ee243..593e0ef 100644
--- a/drivers/tty/serial/omap-serial.c
+++ b/drivers/tty/serial/omap-serial.c
@@ -1331,9 +1331,6 @@ serial_omap_config_rs485(struct uart_port *port, struct serial_rs485 *rs485conf)
 	pm_runtime_get_sync(up->dev);
 	spin_lock_irqsave(&up->port.lock, flags);
 
-	up->ier &= ~(UART_IER_RLSI | UART_IER_RDI);
-	serial_out(up, UART_IER, up->ier);
-
 	/* Disable interrupts from this port */
 	mode = up->ier;
 	up->ier = 0;
-- 
1.7.5.4

