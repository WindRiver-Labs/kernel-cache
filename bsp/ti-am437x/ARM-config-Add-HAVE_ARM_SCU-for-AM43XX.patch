From 28aa2043c3c4ec4c3eef0e635beb3f63297d9ab6 Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Thu, 20 Feb 2014 22:25:33 -0600
Subject: [PATCH 173/188] ARM: config: Add HAVE_ARM_SCU for AM43XX

This commit comes from branch ti-linux-3.12.y:
  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

CONFIG_HAVE_ARM_SCU only gets selected if CONFIG_SMP is selected in an OMAP
system however AM43XX needs this option regardless of CONFIG_SMP as it is
important for controlling power in the SoC. Without this suspend will
not work as scu_power_mode becomes an empty function.

AM43XX requires SCU CPU Power Status bits for A9 core to be set to off mode
in order for the MSTANDBY signal to be asserted from the MPU during WFI.
This signal is used by the PRCM to determine when it is appropriate to
clock gate the MPU clock domain and also trigger M3_IRQ2 to tell the wkup_m3
firmware to put the part into the desired sleep more.

Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
Tested-by: Sekhar Nori <nsekhar@ti.com>
(cherry picked from commit d3d0710d9a4388751eeec5110818685730f3d40e)
---
 arch/arm/mach-omap2/Kconfig |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/Kconfig b/arch/arm/mach-omap2/Kconfig
index c9b6130..46edf2c 100644
--- a/arch/arm/mach-omap2/Kconfig
+++ b/arch/arm/mach-omap2/Kconfig
@@ -84,6 +84,7 @@ config SOC_AM43XX
 	depends on ARCH_MULTI_V7
 	select CPU_V7
 	select ARCH_OMAP2PLUS
+	select HAVE_ARM_SCU
 	select MULTI_IRQ_HANDLER
 	select ARM_GIC
 	select COMMON_CLK
-- 
1.7.5.4

