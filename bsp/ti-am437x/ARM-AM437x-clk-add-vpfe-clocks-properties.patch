From e7656c42328c7e8ff6ffa342bf37fd12a01674a0 Mon Sep 17 00:00:00 2001
From: Benoit Parrot <bparrot@ti.com>
Date: Tue, 21 Jan 2014 16:24:23 -0600
Subject: [PATCH 140/188] ARM: AM437x: clk: add vpfe clocks properties

This commit comes from branch ti-linux-3.12.y:

  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

Add clock property for both TI Video Processing Front End (VPFE)
instance (aka Dual cam) for AM43xx family of devices.

Signed-off-by: Benoit Parrot <bparrot@ti.com>
(cherry picked from commit 9ec956287a0218fc6381432b4b9a2813a28834ea)
---
 arch/arm/boot/dts/am43xx-clocks.dtsi |   16 ++++++++++++++++
 drivers/clk/ti/clk-43xx.c            |    2 ++
 2 files changed, 18 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/am43xx-clocks.dtsi b/arch/arm/boot/dts/am43xx-clocks.dtsi
index 3cb6302..412740c 100644
--- a/arch/arm/boot/dts/am43xx-clocks.dtsi
+++ b/arch/arm/boot/dts/am43xx-clocks.dtsi
@@ -420,6 +420,22 @@ l3_gclk: l3_gclk {
 	clock-div = <1>;
 };
 
+vpfe0_fck: vpfe0_fck@44df8868 {
+	#clock-cells = <0>;
+	compatible = "mux-clock";
+	clocks = <&l3_gclk>;
+	reg = <0x44df8868 0x4>;
+	bit-mask = <0x1>;
+};
+
+vpfe1_fck: vpfe1_fck@44df8870 {
+	#clock-cells = <0>;
+	compatible = "mux-clock";
+	clocks = <&l3_gclk>;
+	reg = <0x44df8870 0x4>;
+	bit-mask = <0x1>;
+};
+
 dpll_core_m4_div2_ck: dpll_core_m4_div2_ck {
 	#clock-cells = <0>;
 	compatible = "fixed-factor-clock";
diff --git a/drivers/clk/ti/clk-43xx.c b/drivers/clk/ti/clk-43xx.c
index b5f491f..de68508 100644
--- a/drivers/clk/ti/clk-43xx.c
+++ b/drivers/clk/ti/clk-43xx.c
@@ -107,6 +107,8 @@ static struct omap_dt_clk am43xx_clks[] = {
 	DT_CLK(NULL, "func_12m_clk", "func_12m_clk"),
 	DT_CLK(NULL, "vtp_clk_div", "vtp_clk_div"),
 	DT_CLK(NULL, "usbphy_32khz_clkmux", "usbphy_32khz_clkmux"),
+	DT_CLK(NULL, "vpfe0_fck", "vpfe0_fck"),
+	DT_CLK(NULL, "vpfe1_fck", "vpfe1_fck"),
 	{ .node_name = NULL },
 };
 
-- 
1.7.5.4

