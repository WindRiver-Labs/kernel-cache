From 387ab5839960d24639f0c52d8a9764f3f6bebfb0 Mon Sep 17 00:00:00 2001
From: Felipe Balbi <balbi@ti.com>
Date: Fri, 10 Jan 2014 10:41:38 -0600
Subject: [PATCH 139/188] arm: omap: wkup_m3: use FW_ACTION_HOTPLUG

This commit comes from branch ti-linux-3.12.y:

  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

with that, udev will load firmware for us.

Signed-off-by: Felipe Balbi <balbi@ti.com>
(cherry picked from commit 7beb3ddd73dfb439191191603b9355f598cfcc18)
---
 arch/arm/mach-omap2/wkup_m3.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/mach-omap2/wkup_m3.c b/arch/arm/mach-omap2/wkup_m3.c
index 0765a4b..45fb78b 100644
--- a/arch/arm/mach-omap2/wkup_m3.c
+++ b/arch/arm/mach-omap2/wkup_m3.c
@@ -416,9 +416,9 @@ static int wkup_m3_probe(struct platform_device *pdev)
 	pr_info("PM: Loading am335x-pm-firmware.bin");
 
 	/* We don't want to delay boot */
-	ret = request_firmware_nowait(THIS_MODULE, 0, "am335x-pm-firmware.bin",
-				&pdev->dev, GFP_KERNEL, NULL,
-				wkup_m3_firmware_cb);
+	ret = request_firmware_nowait(THIS_MODULE, FW_ACTION_HOTPLUG,
+			"am335x-pm-firmware.bin", &pdev->dev, GFP_KERNEL, NULL,
+			wkup_m3_firmware_cb);
 
 err:
 	return ret;
-- 
1.7.5.4

