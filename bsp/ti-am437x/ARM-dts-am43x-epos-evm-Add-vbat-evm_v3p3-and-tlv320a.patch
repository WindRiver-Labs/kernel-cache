From c856f7aa022b2a8e8f25a5578f03add0b0bfdc3e Mon Sep 17 00:00:00 2001
From: Jyri Sarha <jsarha@ti.com>
Date: Tue, 26 Nov 2013 20:38:25 +0200
Subject: [PATCH 146/285] ARM: dts: am43x-epos-evm: Add vbat, evm_v3p3 and
 tlv320aic3111 regulators

- Add vbat and evm_v3p3 regulator nodes
- Add regulator properties to tlv320aic3111 node

Signed-off-by: Jyri Sarha <jsarha@ti.com>
Signed-off-by: Darren Etheridge <detheridge@ti.com>
[Kevin: The original patch taken from TI
ti-sdk-am437x-evm-07.01.00.00-Linux-x86-Install.bin]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/am43x-epos-evm.dts |   23 +++++++++++++++++++++++
 1 files changed, 23 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/am43x-epos-evm.dts b/arch/arm/boot/dts/am43x-epos-evm.dts
index 0e04296..3d182ec 100644
--- a/arch/arm/boot/dts/am43x-epos-evm.dts
+++ b/arch/arm/boot/dts/am43x-epos-evm.dts
@@ -44,6 +44,21 @@
 		pinctrl-names = "default";
 	};
 
+	evm_v3p3: tps63031 {
+		compatible = "regulator-fixed";
+		regulator-name = "evm_v3p3";
+		regulator-min-microvolt = <3300000>;
+		regulator-max-microvolt = <3300000>;
+	};
+
+	vbat: fixedregulator@0 {
+		compatible = "regulator-fixed";
+		regulator-name = "vbat";
+		regulator-min-microvolt = <5000000>;
+		regulator-max-microvolt = <5000000>;
+		regulator-boot-on;
+	};
+
 	aliases {
 		display0 = &lcd0;
 		display1 = &hdmi0;
@@ -522,6 +537,14 @@
 		pinctrl-0 = <&tlv320aic3111_reset_pin>;
 
 		gpio-reset = <&gpio1 28 GPIO_ACTIVE_HIGH>;
+
+		/* Regulators */
+		HPVDD-supply = <&evm_v3p3>; /* v3_3d */
+		SPRVDD-supply = <&vbat>; /* vbat */
+		SPLVDD-supply = <&vbat>; /* vbat */
+		AVDD-supply = <&evm_v3p3>; /* v3_3d */
+		IOVDD-supply = <&evm_v3p3>; /* v3_3d */
+		DVDD-supply = <&ldo1>; /* v1_8d */
 	};
 };
 
-- 
1.7.5.4

