From 2e21c28f2bc05873804643460e71cf2b5084c043 Mon Sep 17 00:00:00 2001
From: Qiu Wujie <b49553@freescale.com>
Date: Mon, 17 Nov 2014 14:06:29 +0800
Subject: [PATCH 125/451] mmc: sdio: make sure sdio_irq_thread pointer is not
 NULL.

Signed-off-by: Wujie Qiu <B49553@freescale.com>
Change-Id: Icf01605c71a19e0ffa01e85b1ed93eb0704493da
Reviewed-on: http://git.am.freescale.net:8181/23831
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 include/linux/mmc/host.h |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/include/linux/mmc/host.h b/include/linux/mmc/host.h
index 87b1f4f..bbb8686 100644
--- a/include/linux/mmc/host.h
+++ b/include/linux/mmc/host.h
@@ -395,7 +395,8 @@ static inline void mmc_signal_sdio_irq(struct mmc_host *host)
 {
 	host->ops->enable_sdio_irq(host, 0);
 	host->sdio_irq_pending = true;
-	wake_up_process(host->sdio_irq_thread);
+	if (host->sdio_irq_thread)
+		wake_up_process(host->sdio_irq_thread); 
 }
 
 #ifdef CONFIG_REGULATOR
-- 
1.7.5.4

