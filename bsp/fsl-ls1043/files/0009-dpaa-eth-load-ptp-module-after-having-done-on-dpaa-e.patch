From 8b17dda9186fa013676871f323fa20607b3e5762 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Wed, 10 Aug 2016 16:33:47 +0800
Subject: [PATCH 09/18] dpaa-eth: load ptp module after having done on dpaa
 ethernet.

This patch is to protect ptp module safely loaded when dpaa_eth
devices have been initialized.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/freescale/sdk_dpaa/Makefile | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/sdk_dpaa/Makefile b/drivers/net/ethernet/freescale/sdk_dpaa/Makefile
index b44b917..ebf3f20 100644
--- a/drivers/net/ethernet/freescale/sdk_dpaa/Makefile
+++ b/drivers/net/ethernet/freescale/sdk_dpaa/Makefile
@@ -9,7 +9,6 @@ include $(srctree)/drivers/net/ethernet/freescale/sdk_fman/ncsw_config.mk
 ccflags-y += -I$(NET_DPA)
 
 obj-$(CONFIG_FSL_SDK_DPAA_ETH) += fsl_mac.o fsl_dpa.o
-obj-$(CONFIG_PTP_1588_CLOCK_DPAA) += dpaa_ptp.o
 
 fsl_dpa-objs += dpaa_ethtool.o dpaa_eth_sysfs.o dpaa_eth.o dpaa_eth_sg.o dpaa_eth_common.o
 ifeq ($(CONFIG_FSL_DPAA_DBG_LOOP),y)
@@ -48,6 +47,9 @@ fsl_oh-objs += offline_port.o
 endif
 endif
 
+# Load ptp module later after having done on dpaa_eth devices.
+obj-$(CONFIG_PTP_1588_CLOCK_DPAA) += dpaa_ptp.o
+
 # Generic driver
 ifeq ($(CONFIG_FSL_DPAA_GENERIC_DRIVER),y)
 obj-$(CONFIG_FSL_SDK_DPAA_ETH) += fsl_generic.o
-- 
2.7.4

