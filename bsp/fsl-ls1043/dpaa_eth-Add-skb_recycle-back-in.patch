From 279aa9370576f233040b8999b18709a8c7e24f69 Mon Sep 17 00:00:00 2001
From: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Date: Thu, 18 Jun 2015 15:10:41 +0300
Subject: [PATCH 239/451] dpaa_eth: Add skb_recycle() back in

Signed-off-by: Cristian Sovaiala <cristian.sovaiala@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
index 77a0de1..9d49a29 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
@@ -965,7 +965,7 @@ int __hot dpa_tx(struct sk_buff *skb, struct net_device *net_dev)
 		goto skb_to_fd_failed;
 
 	if (fd.bpid != 0xff) {
-		/* skb_recycle(skb); */
+		skb_recycle(skb);
 		/* skb_recycle() reserves NET_SKB_PAD as skb headroom,
 		 * but we need the skb to look as if returned by build_skb().
 		 * We need to manually adjust the tailptr as well.
-- 
1.7.5.4

