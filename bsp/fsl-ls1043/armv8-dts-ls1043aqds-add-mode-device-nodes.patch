From a533ae4ea62a217655899147dc4d64991df1f77e Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Fri, 29 May 2015 19:41:26 +0800
Subject: [PATCH 170/451] armv8/dts/ls1043aqds: add mode device nodes

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |  174 +++++++++++++++++++++
 1 files changed, 174 insertions(+), 0 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index 3a1f671..2cc522b 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -36,6 +36,87 @@
 	};
 };
 
+&dspi0 {
+	bus-num = <0>;
+	status = "okay";
+
+	dspiflash: at45db021d@0 {
+		compatible = "atmel,at45db021d", "atmel,at45", "atmel,dataflash";
+		#address-cells = <1>;
+		#size-cells = <1>;
+		spi-max-frequency = <3000000>;
+		spi-cpol;
+		spi-cpha;
+		reg = <0>;
+	};
+};
+
+&ftm0 {
+	status = "okay";
+};
+
+&i2c0 {
+	status = "okay";
+	pca9547@77 {
+		compatible = "philips,pca9547";
+		reg = <0x77>;
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		i2c@0 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0x0>;
+
+			rtc@68 {
+				compatible = "dallas,ds3232";
+				reg = <0x68>;
+				/* IRQ10_B */
+				interrupts = <0 150 0x4>;
+			};
+		};
+
+		i2c@2 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0x2>;
+
+			ina220@40 {
+				compatible = "ti,ina220";
+				reg = <0x40>;
+				shunt-resistor = <1000>;
+			};
+
+			ina220@41 {
+				compatible = "ti,ina220";
+				reg = <0x41>;
+				shunt-resistor = <1000>;
+			};
+		};
+
+		i2c@3 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			reg = <0x3>;
+
+			eeprom@56 {
+				compatible = "at24,24c512";
+				reg = <0x56>;
+			};
+
+			eeprom@57 {
+				compatible = "at24,24c512";
+				reg = <0x57>;
+			};
+
+			adt7461a@4c {
+				compatible = "adt7461a";
+				reg = <0x4c>;
+			};
+		};
+	};
+};
+
 &ifc {
 	#address-cells = <2>;
 	#size-cells = <1>;
@@ -52,6 +133,87 @@
 		reg = <0x0 0x0 0x8000000>;
 		bank-width = <2>;
 		device-width = <1>;
+
+		partition@0 {
+			/* 128KB for rcw */
+			reg = <0x00000000 0x0020000>;
+			label = "NOR bank0 RCW Image";
+		};
+
+		partition@20000 {
+			/* 1MB for DTB */
+			reg = <0x00020000 0x00100000>;
+			label = "NOR DTB Image";
+		};
+
+		partition@120000 {
+			/* 8 MB for Linux Kernel Image */
+			reg = <0x00120000 0x00800000>;
+			label = "NOR Linux Kernel Image";
+		};
+
+		partition@920000 {
+			/* 56MB for Ramdisk Root File System */
+			reg = <0x00920000 0x03600000>;
+			label = "NOR Ramdisk Root File System Image";
+		};
+
+		partition@3f80000 {
+			/* 512KB for bank4 u-boot Image */
+			reg = <0x03f80000 0x80000>;
+			label = "NOR bank4 u-boot Image";
+		};
+
+		partition@4000000 {
+			/* 128KB for bank4 RCW Image */
+			reg = <0x04000000 0x20000>;
+			label = "NOR bank4 RCW Image";
+		};
+
+		partition@4020000 {
+			/* 63MB JFFS2 ROOT File System Image */
+			reg = <0x04020000 0x3f00000>;
+			label = "NOR JFFS2 ROOT File System Image";
+		};
+
+		partition@7f80000 {
+			/* 512KB for bank0 u-boot Image */
+			reg = <0x07f80000 0x80000>;
+			label = "NOR bank0 u-boot Image";
+		};
+	};
+
+	nand@2,0 {
+		compatible = "fsl,ifc-nand";
+		#address-cells = <1>;
+		#size-cells = <1>;
+		reg = <0x2 0x0 0x10000>;
+
+		partition@0 {
+			/* This location must not be altered  */
+			/* 1MB for u-boot Bootloader Image */
+			reg = <0x0 0x00100000>;
+			label = "NAND U-Boot Image";
+			read-only;
+		};
+
+		partition@100000 {
+			/* 1MB for DTB Image */
+			reg = <0x00100000 0x00100000>;
+			label = "NAND DTB Image";
+		};
+
+		partition@200000 {
+			/* 10MB for Linux Kernel Image */
+			reg = <0x00200000 0x00a00000>;
+			label = "NAND Linux Kernel Image";
+		};
+
+		partition@c00000 {
+			/* 500MB for Root file System Image */
+			reg = <0x00c00000 0x1f400000>;
+			label = "NAND Compressed RFS Image";
+		};
 	};
 
 	fpga: board-control@3,0 {
@@ -214,3 +376,15 @@
 		};
 	};
 };
+
+&lpuart0 {
+	status = "okay";
+};
+
+&duart0 {
+	status = "okay";
+};
+
+&duart1 {
+	status = "okay";
+};
-- 
1.7.5.4

