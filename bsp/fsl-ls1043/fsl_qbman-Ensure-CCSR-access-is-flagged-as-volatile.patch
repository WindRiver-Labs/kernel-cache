From ccfaa99c669ad339fb5eba3f6ce3a066b93b1e0b Mon Sep 17 00:00:00 2001
From: Roy Pledge <Roy.Pledge@freescale.com>
Date: Mon, 15 Jun 2015 12:02:34 -0400
Subject: [PATCH 202/451] fsl_qbman: Ensure CCSR access is flagged as volatile

Mark CCSR accesses as volatile so the compiler knows not to
cache the value in a register

Signed-off-by: Roy Pledge <Roy.Pledge@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/staging/fsl_qbman/dpa_sys_arm64.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_qbman/dpa_sys_arm64.h b/drivers/staging/fsl_qbman/dpa_sys_arm64.h
index 0f32db4..c770e9b 100644
--- a/drivers/staging/fsl_qbman/dpa_sys_arm64.h
+++ b/drivers/staging/fsl_qbman/dpa_sys_arm64.h
@@ -70,7 +70,7 @@ static inline u64 mfatb(void)
 	return get_cycles();
 }
 
-static inline u32 in_be32(void *addr)
+static inline u32 in_be32(volatile void *addr)
 {
 	return be32_to_cpu(*((u32 *) addr));
 }
-- 
1.7.5.4

