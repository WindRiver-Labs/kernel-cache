From f9f6a23af98913a545ca63b56860beff59b34451 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Wed, 27 May 2015 12:44:14 +0800
Subject: [PATCH 161/451] armv8/ls1043a: dts: add fman ethernet nodes

Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi |  283 +++++++++++++++++++++++-
 1 files changed, 282 insertions(+), 1 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index b966627..58d9b26 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -168,7 +168,7 @@
 		interrupts = <0 45 0x4>;
 	};
 
-	fman0: fman@1a000000 {
+	fman0: fman@1a00000 {
 		#address-cells = <1>;
 		#size-cells = <1>;
 		cell-index = <0>;
@@ -278,6 +278,252 @@
 			reg = <0xfd000 0x1000>;
 		};
 
+		/* tx - 10g - 2 */
+		port@a8000 {
+			fsl,qman-channel-id = <0x802>;
+		};
+		/* tx - 10g - 3 */
+		port@a9000 {
+			fsl,qman-channel-id = <0x803>;
+		};
+		/* tx - 1g - 2 */
+		port@aa000 {
+			fsl,qman-channel-id = <0x804>;
+		};
+		/* tx - 1g - 3 */
+		port@ab000 {
+			fsl,qman-channel-id = <0x805>;
+		};
+		/* tx - 1g - 4 */
+		port@ac000 {
+			fsl,qman-channel-id = <0x806>;
+		};
+		/* tx - 1g - 5 */
+		port@ad000 {
+			fsl,qman-channel-id = <0x807>;
+		};
+		/* tx - 10g - 0 */
+		port@b0000 {
+			fsl,qman-channel-id = <0x800>;
+		};
+		/* tx - 10g - 1 */
+		port@b1000 {
+			fsl,qman-channel-id = <0x801>;
+		};
+		/* offline - 1 */
+		port@82000 {
+			fsl,qman-channel-id = <0x809>;
+		};
+		/* offline - 2 */
+		port@83000 {
+			fsl,qman-channel-id = <0x80a>;
+		};
+		/* offline - 3 */
+		port@84000 {
+			fsl,qman-channel-id = <0x80b>;
+		};
+		/* offline - 4 */
+		port@85000 {
+			fsl,qman-channel-id = <0x80c>;
+		};
+		/* offline - 5 */
+		port@86000 {
+			fsl,qman-channel-id = <0x80d>;
+		};
+		/* offline - 6 */
+		port@87000 {
+			fsl,qman-channel-id = <0x80e>;
+		};
+
+		fman0_rx0: port@88000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x88000 0x1000>;
+		};
+
+		fman0_tx0: port@a8000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xa8000 0x1000>;
+		};
+
+		ethernet@e0000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-memac";
+			reg = <0xe0000 0x1000>;
+			fsl,port-handles = <&fman0_rx0 &fman0_tx0>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@e1000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xe1000 0x1000>;
+		};
+
+		fman0_rx1: port@89000 {
+			cell-index = <1>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x89000 0x1000>;
+		};
+
+		fman0_tx1: port@a9000 {
+			cell-index = <1>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xa9000 0x1000>;
+		};
+
+		ethernet@e2000 {
+			cell-index = <1>;
+			compatible = "fsl,fman-memac";
+			reg = <0xe2000 0x1000>;
+			fsl,port-handles = <&fman0_rx1 &fman0_tx1>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@e3000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xe3000 0x1000>;
+		};
+
+		fman0_rx2: port@8a000 {
+			cell-index = <2>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x8a000 0x1000>;
+		};
+
+		fman0_tx2: port@aa000 {
+			cell-index = <2>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xaa000 0x1000>;
+		};
+
+		ethernet@e4000 {
+			cell-index = <2>;
+			compatible = "fsl,fman-memac";
+			reg = <0xe4000 0x1000>;
+			fsl,port-handles = <&fman0_rx2 &fman0_tx2>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@e5000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xe5000 0x1000>;
+		};
+
+		fman0_rx3: port@8b000 {
+			cell-index = <3>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x8b000 0x1000>;
+		};
+
+		fman0_tx3: port@ab000 {
+			cell-index = <3>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xab000 0x1000>;
+		};
+
+		ethernet@e6000 {
+			cell-index = <3>;
+			compatible = "fsl,fman-memac";
+			reg = <0xe6000 0x1000>;
+			fsl,port-handles = <&fman0_rx3 &fman0_tx3>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@e7000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xe7000 0x1000>;
+		};
+
+		fman0_rx4: port@8c000 {
+			cell-index = <4>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x8c000 0x1000>;
+		};
+
+		fman0_tx4: port@ac000 {
+			cell-index = <4>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xac000 0x1000>;
+		};
+
+		ethernet@e8000 {
+			cell-index = <4>;
+			compatible = "fsl,fman-memac";
+			reg = <0xe8000 0x1000>;
+			fsl,port-handles = <&fman0_rx4 &fman0_tx4>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@e9000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xe9000 0x1000>;
+		};
+
+		fman0_rx5: port@8d000 {
+			cell-index = <5>;
+			compatible = "fsl,fman-port-1g-rx";
+			reg = <0x8d000 0x1000>;
+		};
+
+		fman0_tx5: port@ad000 {
+			cell-index = <5>;
+			compatible = "fsl,fman-port-1g-tx";
+			reg = <0xad000 0x1000>;
+		};
+
+		ethernet@ea000 {
+			cell-index = <5>;
+			compatible = "fsl,fman-memac";
+			reg = <0xea000 0x1000>;
+			fsl,port-handles = <&fman0_rx5 &fman0_tx5>;
+			ptimer-handle = <&ptp_timer0>;
+		};
+
+		mdio@eb000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xeb000 0x1000>;
+		};
+
+		fman0_10g_rx0: port@90000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-port-10g-rx";
+			reg = <0x90000 0x1000>;
+		};
+
+		fman0_10g_tx0: port@b0000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-port-10g-tx";
+			reg = <0xb0000 0x1000>;
+			fsl,qman-channel-id = <0x800>;
+		};
+
+		ethernet@f0000 {
+			cell-index = <0>;
+			compatible = "fsl,fman-memac";
+			reg = <0xf0000 0x1000>;
+			fsl,port-handles = <&fman0_10g_rx0 &fman0_10g_tx0>;
+		};
+
+		mdio@f1000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "fsl,fman-memac-mdio";
+			reg = <0xf1000 0x1000>;
+		};
+
 		ptp_timer0: rtc@fe000 {
 			compatible = "fsl,fman-rtc";
 			reg = <0xfe000 0x1000>;
@@ -746,6 +992,41 @@
 	alloc-ranges = <0 0 0x10000 0>;
 };
 
+	fsl,dpaa {
+		compatible = "fsl,ls1043a-dpaa", "fsl,dpaa";
+		ethernet@0 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac1>;
+		};
+		ethernet@1 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac2>;
+		};
+		ethernet@2 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac3>;
+		};
+		ethernet@3 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac4>;
+		};
+		ethernet@4 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac5>;
+		};
+		ethernet@5 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac6>;
+		};
+		ethernet@8 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac9>;
+		};
+		ethernet@9 {
+			compatible = "fsl,dpa-ethernet";
+			fsl,fman-mac = <&fm1mac10>;
+		};
+	};
 
 /include/ "qoriq-qman1-portals.dtsi"
 /include/ "qoriq-bman1-portals.dtsi"
-- 
1.7.5.4

