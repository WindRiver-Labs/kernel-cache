From 9ed09e53c0416e5cc937caf7f4df88af0596456f Mon Sep 17 00:00:00 2001
From: Roy Pledge <Roy.Pledge@freescale.com>
Date: Fri, 6 Feb 2015 14:29:10 -0500
Subject: [PATCH 137/451] bman: Fix error that could cause release command to
 be consumed prematurely

Signed-off-by: Roy Pledge <Roy.Pledge@freescale.com>
Change-Id: Ic924ec6e500afa72fb65ac39b1907aa4cee684fe
Reviewed-on: http://git.am.freescale.net:8181/30283
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Yang Li <LeoLi@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/staging/fsl_qbman/bman_high.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_qbman/bman_high.c b/drivers/staging/fsl_qbman/bman_high.c
index dfca3e0..927faf2 100644
--- a/drivers/staging/fsl_qbman/bman_high.c
+++ b/drivers/staging/fsl_qbman/bman_high.c
@@ -849,7 +849,7 @@ static inline int __bman_release(struct bman_pool *pool,
 		return -EBUSY;
 	/* We can copy all but the first entry, as this can trigger badness
 	 * with the valid-bit. Use the overlay to mask the verb byte. */
-	r->bufs[0].opaque =  r->bufs[0].opaque |
+	r->bufs[0].opaque =
 		((cpu_to_be64((bufs[0].opaque |
 			      ((u64)pool->params.bpid<<48))
 			      & 0x00ffffffffffffff)));
-- 
1.7.5.4

