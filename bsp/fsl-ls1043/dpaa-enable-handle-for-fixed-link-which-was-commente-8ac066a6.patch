From 384388734ea2ace569ba0448d1eac8f7e26f576a Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Sat, 13 Jun 2015 07:35:49 +0800
Subject: [PATCH 301/451] dpaa: enable handle for fixed-link which was
 commented for EMULATOR

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
Change-Id: I6c1c0b657505b4c17d89db6c7ef9b28897d16395
Reviewed-on: http://git.am.freescale.net:8181/39547
Tested-by: Marian Cristian Rotariu <marian.rotariu@freescale.com>
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/mac.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/mac.c b/drivers/net/ethernet/freescale/dpa/mac.c
index cc9ee5b..f6e4b3d 100644
--- a/drivers/net/ethernet/freescale/dpa/mac.c
+++ b/drivers/net/ethernet/freescale/dpa/mac.c
@@ -355,7 +355,6 @@ static int __cold mac_probe(struct platform_device *_of_dev)
 	if (strstr(char_prop, "xgmii"))
 		mac_dev->if_support = SUPPORTED_10000baseT_Full;
 
-#ifndef CONFIG_FSL_DPAA_DBG_EMULATOR
 	/* Get the rest of the PHY information */
 	mac_dev->phy_node = of_parse_phandle(mac_node, "phy-handle", 0);
 	if (mac_dev->phy_node == NULL) {
@@ -371,7 +370,6 @@ static int __cold mac_probe(struct platform_device *_of_dev)
 		sprintf(mac_dev->fixed_bus_id, PHY_ID_FMT, "fixed-0",
 			phy_id);
 	}
-#endif
 
 	_errno = mac_dev->init(mac_dev);
 	if (unlikely(_errno < 0)) {
-- 
1.7.5.4

