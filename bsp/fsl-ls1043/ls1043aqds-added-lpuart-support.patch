From 2471cb9b56d6d87a6ca578b484252d8cff794d03 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Fri, 19 Jun 2015 00:35:31 +0800
Subject: [PATCH 242/451] ls1043aqds: added lpuart support

issue:
driver name was not showed correctly.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |    6 ++++++
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi    |   10 +++++-----
 2 files changed, 11 insertions(+), 5 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index 2386ca9..1b2df51 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -17,6 +17,12 @@
 	model = "LS1043A QDS Board";
 
 	aliases {
+		serial0 = &lpuart0;
+		serial1 = &lpuart1;
+		serial2 = &lpuart2;
+		serial3 = &lpuart3;
+		serial4 = &lpuart4;
+		serial5 = &lpuart5;
 		sgmii_riser_s1_p1 = &sgmii_phy_s1_p1;
 		sgmii_riser_s2_p1 = &sgmii_phy_s2_p1;
 		sgmii_riser_s3_p1 = &sgmii_phy_s3_p1;
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 8d0618e..f58d2e1d 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -735,7 +735,7 @@
 		compatible = "fsl,ls1021a-lpuart";
 		reg = <0x0 0x2960000 0x0 0x1000>;
 		interrupts = <0 49 0x4>;
-		clocks = <400000000>;
+		clocks = <&sysclk>;
 		clock-names = "ipg";
 		status = "disabled";
 	};
@@ -744,8 +744,8 @@
 		compatible = "fsl,ls1021a-lpuart";
 		reg = <0x0 0x2970000 0x0 0x1000>;
 		interrupts = <0 50 0x4>;
-		clocks = <400000000>;
 		clock-names = "ipg";
+		clocks = <&sysclk>;
 		status = "disabled";
 	};
 
@@ -753,7 +753,7 @@
 		compatible = "fsl,ls1021a-lpuart";
 		reg = <0x0 0x2980000 0x0 0x1000>;
 		interrupts = <0 51 0x4>;
-		clocks = <400000000>;
+		clocks = <&sysclk>;
 		clock-names = "ipg";
 		status = "disabled";
 	};
@@ -762,7 +762,7 @@
 		compatible = "fsl,ls1021a-lpuart";
 		reg = <0x0 0x2990000 0x0 0x1000>;
 		interrupts = <0 52 0x4>;
-		clocks = <400000000>;
+		clocks = <&sysclk>;
 		clock-names = "ipg";
 		status = "disabled";
 	};
@@ -771,7 +771,7 @@
 		compatible = "fsl,ls1021a-lpuart";
 		reg = <0x0 0x29a0000 0x0 0x1000>;
 		interrupts = <0 53 0x4>;
-		clocks = <400000000>;
+		clocks = <&sysclk>;
 		clock-names = "ipg";
 		status = "disabled";
 	};
-- 
1.7.5.4

