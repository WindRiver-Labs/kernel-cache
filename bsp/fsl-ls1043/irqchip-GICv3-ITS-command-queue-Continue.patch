From 5e46fd857c5c4d494cf332bed8fa8df38f624a1e Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Thu, 16 Jul 2015 17:18:46 +0800
Subject: [PATCH 015/451] irqchip: GICv3: ITS command queue(Continue)

commit cc2d3216f53c9fff0030eb71cacc4ce5f39d1d7e upstream

The ITS is configured through a number commands that the driver
issues to the HW using a memory-based circular buffer.

This patch implements the subset of commands that are required
for Linux.

Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
Link: https://lkml.kernel.org/r/1416839720-18400-5-git-send-email-marc.zyngier@arm.com
Signed-off-by: Jason Cooper <jason@lakedaemon.net>
[WRL already has a similar patch, pick the missing part]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/irqchip/irq-gic-v3-its.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/irqchip/irq-gic-v3-its.c b/drivers/irqchip/irq-gic-v3-its.c
index c68a60f..08e5615 100644
--- a/drivers/irqchip/irq-gic-v3-its.c
+++ b/drivers/irqchip/irq-gic-v3-its.c
@@ -96,6 +96,9 @@ struct its_device {
 	struct its_node		*its;
 	struct its_collection	*collection;
 	void			*itt;
+	unsigned long		*lpi_map;
+	irq_hw_number_t		lpi_base;
+	int			nr_lpis;
 	u32			nr_ites;
 	struct list_head	hwirq_list;
 	u32			device_id;
-- 
1.7.5.4

