From bdf92d7263f8698c6e6775a0ad7ec2f9766ac7ce Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Tue, 16 Jun 2015 23:59:24 +0800
Subject: [PATCH 234/451] ls1043aqds: enable dspi support

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |   24 ++++++++++++++++----
 1 files changed, 19 insertions(+), 5 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index cfc9817..9c8d4a3 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -48,14 +48,28 @@
 	bus-num = <0>;
 	status = "okay";
 
-	dspiflash: at45db021d@0 {
-		compatible = "atmel,at45db021d", "atmel,at45", "atmel,dataflash";
+	flash@0 {
 		#address-cells = <1>;
 		#size-cells = <1>;
-		spi-max-frequency = <3000000>;
-		spi-cpol;
-		spi-cpha;
+		compatible = "micron,n25q128a11";  /* 16MB */
 		reg = <0>;
+		spi-max-frequency = <40000000>; /* input clock */
+	};
+
+	flash@1 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "sst,sst25wf040";  /* 512KB */
+		reg = <1>;
+		spi-max-frequency = <35000000>; /* input clock */
+	};
+
+	flash@2 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "eon,en25s64";   /* 8MB */
+		reg = <2>;
+		spi-max-frequency = <35000000>; /* input clock */
 	};
 };
 
-- 
1.7.5.4

