From 6fa1f0ee11cabf83478c0a8e2cdc70607784e250 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Horia=20Geant=C4=83?= <horia.geanta@freescale.com>
Date: Mon, 6 Jul 2015 12:39:01 +0300
Subject: [PATCH 279/451] qbman: fix caam channel number
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Similar to:
b113ca650494 ("qbman: Adjust pool channel base and fix init_fq error")

Change-Id: Ide0951c92648bb30003c58771e5f12dd73640621
Reported-by: Ion Grigore <ion.grigore@freescale.com>
Signed-off-by: Horia GeantÄƒ <horia.geanta@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/staging/fsl_qbman/qman_driver.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_qbman/qman_driver.c b/drivers/staging/fsl_qbman/qman_driver.c
index 2f7da7f..a5cd392 100644
--- a/drivers/staging/fsl_qbman/qman_driver.c
+++ b/drivers/staging/fsl_qbman/qman_driver.c
@@ -774,6 +774,9 @@ __init int qman_init(void)
 	/* TEMP for LS1043 until uboot fixup is complete */
 	qm_channel_pool1 = QMAN_CHANNEL_POOL1_REV3;
 	pr_info("QMan Pool Channel base 0x%x\n", qm_channel_pool1);
+	qm_channel_caam = QMAN_CHANNEL_CAAM_REV3;
+	pr_info("qm_channel_caam = %04x\n", qm_channel_caam);
+
 	/*
 	 * Parse the ceetm node to get how many ceetm instances are supported
 	 * on the current silicon. num_ceetms must be confirmed before portals
-- 
1.7.5.4

