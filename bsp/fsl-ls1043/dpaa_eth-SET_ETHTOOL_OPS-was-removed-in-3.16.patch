From 138b3e5e77d42d01e417f7ca02d65186fb01db2a Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Thu, 9 Jul 2015 12:14:50 +0300
Subject: [PATCH 284/451] dpaa_eth: SET_ETHTOOL_OPS was removed in 3.16

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 .../net/ethernet/freescale/dpa/dpaa_eth_common.c   |    2 +-
 .../net/ethernet/freescale/dpa/dpaa_eth_generic.c  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
index c701e13..bdeefd2 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
@@ -124,7 +124,7 @@ int dpa_netdev_init(struct net_device *net_dev,
 	memcpy(net_dev->perm_addr, mac_addr, net_dev->addr_len);
 	memcpy(net_dev->dev_addr, mac_addr, net_dev->addr_len);
 
-	SET_ETHTOOL_OPS(net_dev, &dpa_ethtool_ops);
+	net_dev->ethtool_ops = &dpa_ethtool_ops;
 
 	net_dev->needed_headroom = priv->tx_headroom;
 	net_dev->watchdog_timeo = msecs_to_jiffies(tx_timeout);
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
index bf065ee..37effc1 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
@@ -751,7 +751,7 @@ static int dpa_generic_netdev_init(struct device_node *dpa_node,
 	memcpy(netdev->perm_addr, mac_addr, netdev->addr_len);
 	memcpy(netdev->dev_addr, mac_addr, netdev->addr_len);
 
-	SET_ETHTOOL_OPS(netdev, &dpa_generic_ethtool_ops);
+	netdev->ethtool_ops = &dpa_generic_ethtool_ops;
 
 	netdev->needed_headroom = priv->tx_headroom;
 	netdev->watchdog_timeo = msecs_to_jiffies(tx_timeout);
-- 
1.7.5.4

