From ba07c39176c3aa6caa4e889c6296f416b6d015db Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Thu, 28 May 2015 13:40:33 +0800
Subject: [PATCH 162/451] armv8/ls1043a: dts: reorganize fman ethernet nodes

Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi |  163 ++++++++++++------------
 1 files changed, 80 insertions(+), 83 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 58d9b26..41c6a5f 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -278,63 +278,6 @@
 			reg = <0xfd000 0x1000>;
 		};
 
-		/* tx - 10g - 2 */
-		port@a8000 {
-			fsl,qman-channel-id = <0x802>;
-		};
-		/* tx - 10g - 3 */
-		port@a9000 {
-			fsl,qman-channel-id = <0x803>;
-		};
-		/* tx - 1g - 2 */
-		port@aa000 {
-			fsl,qman-channel-id = <0x804>;
-		};
-		/* tx - 1g - 3 */
-		port@ab000 {
-			fsl,qman-channel-id = <0x805>;
-		};
-		/* tx - 1g - 4 */
-		port@ac000 {
-			fsl,qman-channel-id = <0x806>;
-		};
-		/* tx - 1g - 5 */
-		port@ad000 {
-			fsl,qman-channel-id = <0x807>;
-		};
-		/* tx - 10g - 0 */
-		port@b0000 {
-			fsl,qman-channel-id = <0x800>;
-		};
-		/* tx - 10g - 1 */
-		port@b1000 {
-			fsl,qman-channel-id = <0x801>;
-		};
-		/* offline - 1 */
-		port@82000 {
-			fsl,qman-channel-id = <0x809>;
-		};
-		/* offline - 2 */
-		port@83000 {
-			fsl,qman-channel-id = <0x80a>;
-		};
-		/* offline - 3 */
-		port@84000 {
-			fsl,qman-channel-id = <0x80b>;
-		};
-		/* offline - 4 */
-		port@85000 {
-			fsl,qman-channel-id = <0x80c>;
-		};
-		/* offline - 5 */
-		port@86000 {
-			fsl,qman-channel-id = <0x80d>;
-		};
-		/* offline - 6 */
-		port@87000 {
-			fsl,qman-channel-id = <0x80e>;
-		};
-
 		fman0_rx0: port@88000 {
 			cell-index = <0>;
 			compatible = "fsl,fman-port-1g-rx";
@@ -347,7 +290,7 @@
 			reg = <0xa8000 0x1000>;
 		};
 
-		ethernet@e0000 {
+		fm1mac1: ethernet@e0000 {
 			cell-index = <0>;
 			compatible = "fsl,fman-memac";
 			reg = <0xe0000 0x1000>;
@@ -374,7 +317,7 @@
 			reg = <0xa9000 0x1000>;
 		};
 
-		ethernet@e2000 {
+		fm1mac2: ethernet@e2000 {
 			cell-index = <1>;
 			compatible = "fsl,fman-memac";
 			reg = <0xe2000 0x1000>;
@@ -401,7 +344,7 @@
 			reg = <0xaa000 0x1000>;
 		};
 
-		ethernet@e4000 {
+		fm1mac3: ethernet@e4000 {
 			cell-index = <2>;
 			compatible = "fsl,fman-memac";
 			reg = <0xe4000 0x1000>;
@@ -428,7 +371,7 @@
 			reg = <0xab000 0x1000>;
 		};
 
-		ethernet@e6000 {
+		fm1mac4: ethernet@e6000 {
 			cell-index = <3>;
 			compatible = "fsl,fman-memac";
 			reg = <0xe6000 0x1000>;
@@ -455,7 +398,7 @@
 			reg = <0xac000 0x1000>;
 		};
 
-		ethernet@e8000 {
+		fm1mac5: ethernet@e8000 {
 			cell-index = <4>;
 			compatible = "fsl,fman-memac";
 			reg = <0xe8000 0x1000>;
@@ -482,7 +425,7 @@
 			reg = <0xad000 0x1000>;
 		};
 
-		ethernet@ea000 {
+		fm1mac6: ethernet@ea000 {
 			cell-index = <5>;
 			compatible = "fsl,fman-memac";
 			reg = <0xea000 0x1000>;
@@ -510,7 +453,7 @@
 			fsl,qman-channel-id = <0x800>;
 		};
 
-		ethernet@f0000 {
+		fm1mac9: ethernet@f0000 {
 			cell-index = <0>;
 			compatible = "fsl,fman-memac";
 			reg = <0xf0000 0x1000>;
@@ -975,22 +918,6 @@
 			alignment = <0 0x2000000>;
 		};
 	};
-};
-
-&bman_fbpr {
-	compatible = "fsl,bman-fbpr";
-	alloc-ranges = <0 0 0x10000 0>;
-};
-
-&qman_fqd {
-	compatible = "fsl,qman-fqd";
-	alloc-ranges = <0 0 0x10000 0>;
-};
-
-&qman_pfdr {
-	compatible = "fsl,qman-pfdr";
-	alloc-ranges = <0 0 0x10000 0>;
-};
 
 	fsl,dpaa {
 		compatible = "fsl,ls1043a-dpaa", "fsl,dpaa";
@@ -1022,11 +949,81 @@
 			compatible = "fsl,dpa-ethernet";
 			fsl,fman-mac = <&fm1mac9>;
 		};
-		ethernet@9 {
-			compatible = "fsl,dpa-ethernet";
-			fsl,fman-mac = <&fm1mac10>;
+	};
+};
+&fman0 {
+		/* offline - 1 */
+		port@82000 {
+			fsl,qman-channel-id = <0x809>;
+		};
+
+		/* tx - 10g - 2 */
+		port@a8000 {
+			fsl,qman-channel-id = <0x802>;
+		};
+		/* tx - 10g - 3 */
+		port@a9000 {
+			fsl,qman-channel-id = <0x803>;
+		};
+		/* tx - 1g - 2 */
+		port@aa000 {
+			fsl,qman-channel-id = <0x804>;
+		};
+		/* tx - 1g - 3 */
+		port@ab000 {
+			fsl,qman-channel-id = <0x805>;
+		};
+		/* tx - 1g - 4 */
+		port@ac000 {
+			fsl,qman-channel-id = <0x806>;
+		};
+		/* tx - 1g - 5 */
+		port@ad000 {
+			fsl,qman-channel-id = <0x807>;
+		};
+		/* tx - 10g - 0 */
+		port@b0000 {
+			fsl,qman-channel-id = <0x800>;
+		};
+		/* tx - 10g - 1 */
+		port@b1000 {
+			fsl,qman-channel-id = <0x801>;
+		};
+		/* offline - 2 */
+		port@83000 {
+			fsl,qman-channel-id = <0x80a>;
+		};
+		/* offline - 3 */
+		port@84000 {
+			fsl,qman-channel-id = <0x80b>;
+		};
+		/* offline - 4 */
+		port@85000 {
+			fsl,qman-channel-id = <0x80c>;
+		};
+		/* offline - 5 */
+		port@86000 {
+			fsl,qman-channel-id = <0x80d>;
+		};
+		/* offline - 6 */
+		port@87000 {
+			fsl,qman-channel-id = <0x80e>;
 		};
 	};
+&bman_fbpr {
+	compatible = "fsl,bman-fbpr";
+	alloc-ranges = <0 0 0x10000 0>;
+};
+
+&qman_fqd {
+	compatible = "fsl,qman-fqd";
+	alloc-ranges = <0 0 0x10000 0>;
+};
+
+&qman_pfdr {
+	compatible = "fsl,qman-pfdr";
+	alloc-ranges = <0 0 0x10000 0>;
+};
 
 /include/ "qoriq-qman1-portals.dtsi"
 /include/ "qoriq-bman1-portals.dtsi"
-- 
1.7.5.4

