From 71fb378171d0940bf102c7639aecca9cecd65f9d Mon Sep 17 00:00:00 2001
From: Hou Zhiqiang <B48286@freescale.com>
Date: Tue, 16 Jun 2015 20:13:29 +0800
Subject: [PATCH 235/451] ls1043aqds/dspi: Modified the DT node of DSPI

1. Reduce the clock frequency to 10MHz for CS0.
2. Add four partitions for SPI flash connected to CS0.

Signed-off-by: Hou Zhiqiang <B48286@freescale.com>
Signed-off-by: Mingkai Hu <Mingkai.Hu@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |   21 ++++++++++++++++++++-
 1 files changed, 20 insertions(+), 1 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index 9c8d4a3..2386ca9 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -53,7 +53,26 @@
 		#size-cells = <1>;
 		compatible = "micron,n25q128a11";  /* 16MB */
 		reg = <0>;
-		spi-max-frequency = <40000000>; /* input clock */
+		spi-max-frequency = <10000000>; /* input clock */
+		partition@u-boot {
+			label = "u-boot";
+			reg = <0x00000000 0x00100000>;
+			read-only;
+		};
+		partition@kernel {
+			label = "kernel";
+			reg = <0x00100000 0x00500000>;
+			read-only;
+		};
+		partition@dtb {
+			label = "dtb";
+			reg = <0x00600000 0x00100000>;
+			read-only;
+		};
+		partition@fs {
+			label = "file system";
+			reg = <0x00700000 0x00900000>;
+		};
 	};
 
 	flash@1 {
-- 
1.7.5.4

