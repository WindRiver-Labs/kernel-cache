From 3b154e0e148f565ea1dab8ee05a68e8b97aeef83 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Horia=20Geant=C4=83?= <horia.geanta@freescale.com>
Date: Tue, 7 Jul 2015 12:30:22 +0300
Subject: [PATCH 278/451] armv8/ls1043a: dts - add crypto node alias
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

U-boot patches up the device tree crypto node for the era property,
looking for the "crypto" alias.
Thus the alias must be present in the device trees.

Change-Id: Id434894651c5417fc7501e675f56e896bfe8cfad
Signed-off-by: Horia GeantÄƒ <horia.geanta@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts  |    4 +++-
 arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts  |    3 ++-
 arch/arm64/boot/dts/freescale/fsl-ls1043a-simu.dts |    4 ++++
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi     |    2 +-
 4 files changed, 10 insertions(+), 3 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index d4588c0..2ea7f07 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -11,7 +11,7 @@
  */
 
 /dts-v1/;
-#include "fsl-ls1043a.dtsi"
+/include/ "fsl-ls1043a.dtsi"
 
 / {
 	model = "LS1043A QDS Board";
@@ -53,6 +53,8 @@
 		ethernet4 = &fm1mac5;
 		ethernet5 = &fm1mac6;
 		ethernet6 = &fm1mac9;
+
+		crypto = &crypto;
 	};
 };
 
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
index 900064a..141549e 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
@@ -11,7 +11,7 @@
  */
 
 /dts-v1/;
-#include "fsl-ls1043a.dtsi"
+/include/ "fsl-ls1043a.dtsi"
 
 / {
 	model = "LS1043A RDB Board";
@@ -24,6 +24,7 @@
 		ethernet4 = &fm1mac5;
 		ethernet5 = &fm1mac6;
 		ethernet6 = &fm1mac9;
+		crypto = &crypto;
 	};
 
 };
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-simu.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-simu.dts
index 90f1624..4464339 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-simu.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-simu.dts
@@ -41,6 +41,10 @@
 / {
 	model = "Freescale Layerscape 1043a software Simulator model";
 	compatible = "fsl,ls1043a-simu", "fsl,ls1043a";
+
+	aliases {
+		crypto = &crypto;
+	};
 };
 
 &i2c0 {
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 91e9aff..dc397fb 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -148,7 +148,7 @@
 		big-endian;
 	};
 
-	caam: crypto@1700000 {
+	crypto: crypto@1700000 {
 		compatible = "fsl,sec-v4.4", "fsl,sec-v4.0";
 		fsl,sec-era = <3>;
 		#address-cells = <1>;
-- 
1.7.5.4

