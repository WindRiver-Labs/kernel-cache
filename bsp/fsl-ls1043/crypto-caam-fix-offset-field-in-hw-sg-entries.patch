From 8f203181f219ddf52fd0224680c9aa171c43c5b9 Mon Sep 17 00:00:00 2001
From: Cristian Stoica <cristian.stoica@freescale.com>
Date: Mon, 22 Sep 2014 18:15:07 +0300
Subject: [PATCH 261/451] crypto: caam: fix offset field in hw sg entries

The offset field is 13 bits wide; make sure we don't overwrite more than
that in the caam hardware scatter gather structure

Signed-off-by: Cristian Stoica <cristian.stoica@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/19801
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Mircea Pop <mircea.pop@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
(cherry picked from commit 566ac91003c8a14f034b4e5a9bb92f7f8dec84aa)

Change-Id: I73dad6555b0c1041b95ae3179d17869287fa7ae5
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 include/linux/fsl_qman.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/fsl_qman.h b/include/linux/fsl_qman.h
index 61211d2..ca6fec3 100644
--- a/include/linux/fsl_qman.h
+++ b/include/linux/fsl_qman.h
@@ -255,6 +255,7 @@ static inline dma_addr_t qm_fd_addr(const struct qm_fd *fd)
 	{ cmd } }
 
 /* See 2.2.1.3 Multi-Core Datapath Acceleration Architecture */
+#define QM_SG_OFFSET_MASK 0x1FFF
 struct qm_sg_entry {
 	union {
 		struct {
-- 
1.7.5.4

