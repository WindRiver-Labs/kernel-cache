From 7478624da2233d8fe01499e01e2ad8dabf112bd9 Mon Sep 17 00:00:00 2001
From: Gong Qianyu <Qianyu.Gong@freescale.com>
Date: Mon, 20 Jul 2015 16:57:40 +0800
Subject: [PATCH 312/451] armv8/ls1043a: fixed nor flash partition in dts file

Signed-off-by: Gong Qianyu <Qianyu.Gong@freescale.com>
[Xulin: Original patch taken from
Linux-LS1043A-SDK-V0.4-SOURCE-20150826-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |   68 ++++++++++++---------
 arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts |   68 ++++++++++++---------
 2 files changed, 80 insertions(+), 56 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index 2ea7f07..bc638be 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -190,51 +190,63 @@
 		device-width = <1>;
 
 		partition@0 {
-			/* 128KB for rcw */
-			reg = <0x00000000 0x0020000>;
+			/* 1MB for RCW and PBI Image */
+			reg = <0x00000000 0x00100000>;
 			label = "NOR bank0 RCW Image";
 		};
 
-		partition@20000 {
-			/* 1MB for DTB */
-			reg = <0x00020000 0x00100000>;
-			label = "NOR DTB Image";
+		partition@100000 {
+			/* 1MB for bank0 u-boot Image */
+			reg = <0x00100000 0x00100000>;
+			label = "NOR bank0 U-Boot Image";
 		};
 
-		partition@120000 {
-			/* 8 MB for Linux Kernel Image */
-			reg = <0x00120000 0x00800000>;
-			label = "NOR Linux Kernel Image";
+		partition@200000 {
+			/* 1 MB for bank0 u-boot Env */
+			reg = <0x00200000 0x00100000>;
+			label = "NOR bank0 U-Boot Env";
 		};
 
-		partition@920000 {
-			/* 56MB for Ramdisk Root File System */
-			reg = <0x00920000 0x03600000>;
-			label = "NOR Ramdisk Root File System Image";
+		partition@300000 {
+			/* 1MB for FMan ucode */
+			reg = <0x00300000 0x00100000>;
+			label = "NOR bank0 FMan ucode";
 		};
 
-		partition@3f80000 {
-			/* 512KB for bank4 u-boot Image */
-			reg = <0x03f80000 0x80000>;
-			label = "NOR bank4 u-boot Image";
+		partition@1100000 {
+			/* 40MB for bank0 FIT Image */
+			reg = <0x01100000 0x2800000>;
+			label = "NOR bank0 FIT Image";
 		};
 
 		partition@4000000 {
-			/* 128KB for bank4 RCW Image */
-			reg = <0x04000000 0x20000>;
+			/* 1MB for bank4 RCW and PBI Image */
+			reg = <0x04000000 0x100000>;
 			label = "NOR bank4 RCW Image";
 		};
 
-		partition@4020000 {
-			/* 63MB JFFS2 ROOT File System Image */
-			reg = <0x04020000 0x3f00000>;
-			label = "NOR JFFS2 ROOT File System Image";
+		partition@4100000 {
+			/* 1MB for bank4 u-boot Image */
+			reg = <0x04100000 0x100000>;
+			label = "NOR bank4 U-Boot Image";
+		};
+
+		partition@4200000 {
+			/* 1 MB for bank4 u-boot Env */
+			reg = <0x04200000 0x100000>;
+			label = "NOR bank4 U-Boot Env";
+		};
+
+		partition@4300000 {
+			/* 1 MB for bank4 FMan ucode */
+			reg = <0x04300000 0x100000>;
+			label = "NOR bank4 FMan ucode";
 		};
 
-		partition@7f80000 {
-			/* 512KB for bank0 u-boot Image */
-			reg = <0x07f80000 0x80000>;
-			label = "NOR bank0 u-boot Image";
+		partition@5100000 {
+			/* 40MB for bank4 FIT Image */
+			reg = <0x05100000 0x2800000>;
+			label = "NOR bank4 FIT Image";
 		};
 	};
 
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
index 141549e..72f550d 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-rdb.dts
@@ -118,51 +118,63 @@
 			device-width = <1>;
 
 			partition@0 {
-				/* 128KB for rcw */
-				reg = <0x00000000 0x0020000>;
+				/* 1MB for RCW and PBI Image */
+				reg = <0x00000000 0x00100000>;
 				label = "NOR bank0 RCW Image";
 			};
 
-			partition@20000 {
-				/* 1MB for DTB */
-				reg = <0x00020000 0x00100000>;
-				label = "NOR DTB Image";
+			partition@100000 {
+				/* 1MB for bank0 u-boot Image */
+				reg = <0x00100000 0x00100000>;
+				label = "NOR bank0 U-Boot Image";
 			};
 
-			partition@120000 {
-				/* 8 MB for Linux Kernel Image */
-				reg = <0x00120000 0x00800000>;
-				label = "NOR Linux Kernel Image";
+			partition@200000 {
+				/* 1 MB for bank0 u-boot Env */
+				reg = <0x00200000 0x00100000>;
+				label = "NOR bank0 U-Boot Env";
 			};
 
-			partition@920000 {
-				/* 56MB for Ramdisk Root File System */
-				reg = <0x00920000 0x03600000>;
-				label = "NOR Ramdisk Root File System Image";
+			partition@300000 {
+				/* 1MB for FMan ucode */
+				reg = <0x00300000 0x00100000>;
+				label = "NOR bank0 FMan ucode";
 			};
 
-			partition@3f80000 {
-				/* 512KB for bank4 u-boot Image */
-				reg = <0x03f80000 0x80000>;
-				label = "NOR bank4 u-boot Image";
+			partition@1100000 {
+				/* 40MB for bank0 FIT Image */
+				reg = <0x01100000 0x2800000>;
+				label = "NOR bank0 FIT Image";
 			};
 
 			partition@4000000 {
-				/* 128KB for bank4 RCW Image */
-				reg = <0x04000000 0x20000>;
+				/* 1MB for bank4 RCW and PBI Image */
+				reg = <0x04000000 0x100000>;
 				label = "NOR bank4 RCW Image";
 			};
 
-			partition@4020000 {
-				/* 63MB JFFS2 ROOT File System Image */
-				reg = <0x04020000 0x3f00000>;
-				label = "NOR JFFS2 ROOT File System Image";
+			partition@4100000 {
+				/* 1MB for bank4 u-boot Image */
+				reg = <0x04100000 0x100000>;
+				label = "NOR bank4 U-Boot Image";
+			};
+
+			partition@4200000 {
+				/* 1 MB for bank4 u-boot Env */
+				reg = <0x04200000 0x100000>;
+				label = "NOR bank4 U-Boot Env";
+			};
+
+			partition@4300000 {
+				/* 1 MB for bank4 FMan ucode */
+				reg = <0x04300000 0x100000>;
+				label = "NOR bank4 FMan ucode";
 			};
 
-			partition@7f80000 {
-				/* 512KB for bank0 u-boot Image */
-				reg = <0x07f80000 0x80000>;
-				label = "NOR bank0 u-boot Image";
+			partition@5100000 {
+				/* 40MB for bank4 FIT Image */
+				reg = <0x05100000 0x2800000>;
+				label = "NOR bank4 FIT Image";
 			};
 		};
 
-- 
1.7.5.4

