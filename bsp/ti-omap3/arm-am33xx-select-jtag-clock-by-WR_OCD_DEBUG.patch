From 70e3e533ea3c8802882b3b727ae1f9affd0c369b Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 24 Jan 2013 11:25:03 +0800
Subject: [PATCH] arm: am33xx: select jtag clock by WR_OCD_DEBUG

It should be more convenient for OCD to enable Jtag clock by default
on am33xx, so DEBUG_JTAG_ENABLE will be selected by WR_OCD_DEBUG on
soc_am33xx.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/Kconfig.debug |    1 +
 lib/Kconfig.debug      |    1 +
 2 files changed, 2 insertions(+)

diff --git a/arch/arm/Kconfig.debug b/arch/arm/Kconfig.debug
index 66f1320..143b2ce 100644
--- a/arch/arm/Kconfig.debug
+++ b/arch/arm/Kconfig.debug
@@ -367,6 +367,7 @@ config DEBUG_TRACE_CLOCK
 	depends on HAVE_TRACE_CLOCK
 
 config DEBUG_JTAG_ENABLE
+	depends on SOC_AM33XX
 	bool "Enable JTAG clock for debugger connectivity"
 	help
 	 Say Y here if you want to enable the JTAG clock to enable
diff --git a/lib/Kconfig.debug b/lib/Kconfig.debug
index 44322c3..b9521d7 100644
--- a/lib/Kconfig.debug
+++ b/lib/Kconfig.debug
@@ -36,6 +36,7 @@ config WR_OCD_DEBUG
 	bool "WR_OCD_DEBUG: Debugging with WindRiver System OCD"
 	select DEBUG_INFO
 	select BDI_SWITCH
+	select DEBUG_JTAG_ENABLE
 	help
 	  If you say Y here, WindRiver OCD tool can get module symbols
 	  for module debug. It will also disable any potential manipulation
-- 
1.7.9.7

