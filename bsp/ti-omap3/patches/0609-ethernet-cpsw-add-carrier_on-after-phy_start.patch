From 8f1bfca007266a4e045ed17284b0b7ef46472a01 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Sun, 4 Nov 2012 19:38:24 +0800
Subject: [PATCH 609/609] ethernet: cpsw: add carrier_on after phy_start

This issue is only shown in preempt-rt, which will incur a delay
about CONF_CARRIER_TIMEOUT in the boot process, but obviously the
same issue should be in standard kernel too.

Of course the same action has been done on the most ethernet drivers.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/net/ethernet/ti/cpsw.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/ti/cpsw.c b/drivers/net/ethernet/ti/cpsw.c
index d4abd49..ce4265d 100644
--- a/drivers/net/ethernet/ti/cpsw.c
+++ b/drivers/net/ethernet/ti/cpsw.c
@@ -821,6 +821,7 @@ static void cpsw_slave_open(struct cpsw_slave *slave, struct cpsw_priv *priv)
 			 slave->phy->phy_id);
 		cpsw_set_phy_config(priv, slave->phy);
 		phy_start(slave->phy);
+		netif_carrier_on(priv->ndev);
 	}
 }
 
-- 
1.7.5.4

