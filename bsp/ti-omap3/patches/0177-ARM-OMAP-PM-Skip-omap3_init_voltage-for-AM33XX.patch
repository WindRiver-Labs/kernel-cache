From 05d9a4bd6e16be2c01839c4e5a396bcac17e0c47 Mon Sep 17 00:00:00 2001
From: Vaibhav Bedia <vaibhav.bedia@ti.com>
Date: Tue, 6 Mar 2012 11:10:13 +0530
Subject: [PATCH 177/609] ARM: OMAP: PM: Skip omap3_init_voltage for AM33XX

Original commit: 23d295b6b585bb8b47f586abb9095694052d446b

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

Right now this helps to get rid of the following warnings during
bootup

[...]
omap2_set_init_voltage: unable to get clk dpll1_ck
omap2_set_init_voltage: unable to set vdd_mpu_iva
omap2_set_init_voltage: unable to find boot up OPP for vdd_core
omap2_set_init_voltage: unable to set vdd_core
[...]

We need to explore whether an AM33XX specific init_voltage is
required or we can make do with that OMAP3/4 has to offer.

Signed-off-by: Vaibhav Bedia <vaibhav.bedia@ti.com>
---
 arch/arm/mach-omap2/pm.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/pm.c b/arch/arm/mach-omap2/pm.c
index d0c1c96..a141592 100644
--- a/arch/arm/mach-omap2/pm.c
+++ b/arch/arm/mach-omap2/pm.c
@@ -268,7 +268,7 @@ static const struct platform_suspend_ops omap_pm_ops = {
 
 static void __init omap3_init_voltages(void)
 {
-	if (!cpu_is_omap34xx())
+	if (!cpu_is_omap34xx() || cpu_is_am33xx())
 		return;
 
 	omap2_set_init_voltage("mpu_iva", "dpll1_ck", "mpu");
-- 
1.7.5.4

