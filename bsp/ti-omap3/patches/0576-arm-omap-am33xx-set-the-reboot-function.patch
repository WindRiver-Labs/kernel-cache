From 40a10fd3770bf2dba995fc5f9835e4c051765a56 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Fri, 17 Aug 2012 16:02:13 +0800
Subject: [PATCH 576/609] arm: omap: am33xx: set the reboot function

This patch sets the proper arm_pm_restart for am33xx, otherwise
the reboot process will be stuck.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/board-am335xevm.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335xevm.c b/arch/arm/mach-omap2/board-am335xevm.c
index cc7a9fb..5465a4b 100644
--- a/arch/arm/mach-omap2/board-am335xevm.c
+++ b/arch/arm/mach-omap2/board-am335xevm.c
@@ -51,6 +51,7 @@
 #include <asm/mach/arch.h>
 #include <asm/mach/map.h>
 #include <asm/hardware/asp.h>
+#include <asm/system_misc.h>
 
 #include <plat/omap_device.h>
 #include <plat/irqs.h>
@@ -2550,6 +2551,7 @@ static void __init am33xx_cpuidle_init(void)
 
 static void __init am335x_evm_init(void)
 {
+	arm_pm_restart = omap_prcm_restart;
 	am33xx_cpuidle_init();
 	am33xx_mux_init(board_mux);
 	omap_serial_init();
-- 
1.7.5.4

