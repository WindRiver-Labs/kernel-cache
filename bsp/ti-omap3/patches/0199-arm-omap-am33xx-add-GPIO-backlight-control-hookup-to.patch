From 26d4f0006e1332f52449ab532cc818cf7c297f83 Mon Sep 17 00:00:00 2001
From: "Manjunathappa, Prakash" <prakash.pm@ti.com>
Date: Sun, 12 Aug 2012 22:25:19 +0800
Subject: [PATCH 199/609] arm: omap: am33xx: add GPIO backlight control hookup
 to LCD FB driver

Original commit: 9e95119ddf178de22d2f5aa388f2fa4f9482c6e5

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

Patch adds hookup to toggle GPIO backlight from da8xx-fb LCD frame
buffer driver.

Signed-off-by: Manjunathappa, Prakash <prakash.pm@ti.com>
---
 arch/arm/mach-omap2/board-am335xevm.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335xevm.c b/arch/arm/mach-omap2/board-am335xevm.c
index 74e23793..4ffe3bc 100644
--- a/arch/arm/mach-omap2/board-am335xevm.c
+++ b/arch/arm/mach-omap2/board-am335xevm.c
@@ -112,10 +112,13 @@ static struct lcd_ctrl_config lcd_cfg = {
 	.raster_order		= 0,
 };
 
+static void am335x_gpio_bl_ctrl(int val);
+
 struct da8xx_lcdc_platform_data TFC_S9700RTWV35TR_01B_pdata = {
 	.manu_name		= "ThreeFive",
 	.controller_data	= &lcd_cfg,
 	.type			= "TFC_S9700RTWV35TR_01B",
+	.panel_power_ctrl	= am335x_gpio_bl_ctrl,
 };
 
 #include "common.h"
@@ -871,6 +874,12 @@ static struct pwmss_platform_data  pwm_pdata[3] = {
 	},
 };
 
+static void am335x_gpio_bl_ctrl(int val)
+{
+	/* lcd backlight */
+	gpio_set_value(AM335X_LCD_BL_PIN, val);
+}
+
 static int __init ecap0_init(void)
 {
 	int status = 0;
-- 
1.7.5.4

