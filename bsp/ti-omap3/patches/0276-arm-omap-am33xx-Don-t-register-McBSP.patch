From d5f49f9d1ff96f788b5f117e29967f89f804afdc Mon Sep 17 00:00:00 2001
From: Vaibhav Bedia <vaibhav.bedia@ti.com>
Date: Wed, 15 Aug 2012 10:33:34 +0800
Subject: [PATCH 276/609] arm:omap:am33xx: Don't register McBSP

Original commit: ee81ec0f0595d74d65e778616bab639c244a07e0

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

...since AM33XX doesn't have any instance of McBSP

Note: This needs to be merged with the commit
08037c12036110c79b8fa2adf486aefaee
(arm:omap:am33xx: Don't register non-existent...)

Signed-off-by: Vaibhav Bedia <vaibhav.bedia@ti.com>
---
 arch/arm/mach-omap2/devices.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/devices.c b/arch/arm/mach-omap2/devices.c
index c2c7036..d998bb0 100644
--- a/arch/arm/mach-omap2/devices.c
+++ b/arch/arm/mach-omap2/devices.c
@@ -423,6 +423,9 @@ static struct platform_device omap_pcm = {
 
 static void omap_init_audio(void)
 {
+	if (cpu_is_am33xx())
+		return;
+
 	platform_device_register(&omap_pcm);
 }
 
-- 
1.7.5.4

