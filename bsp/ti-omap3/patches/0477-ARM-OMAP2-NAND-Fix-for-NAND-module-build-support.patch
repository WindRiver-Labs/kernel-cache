From 892e2100eb55e8817d0cae8e706520ed59eee277 Mon Sep 17 00:00:00 2001
From: "Philip, Avinash" <avinashphilip@ti.com>
Date: Sun, 1 Jul 2012 01:08:45 +0800
Subject: [PATCH 477/609] ARM: OMAP2+: NAND: Fix for NAND module build support

Original commit: e0d0d4c4fb4e82e696033cbfa1f3f1cc12c1fbb6

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

NAND driver fails to build as module with following error.

ERROR: "gpmc_enable_hwecc" [drivers/mtd/nand/omap2.ko] undefined!

This fixes the same by using EXPORT_SYMBOL.

Note:
This patch was actually reverted before moving gpmc from
postcore_initcall to module_platform_driver. Since moving is completes,
we need this patch.

Signed-off-by: Philip, Avinash <avinashphilip@ti.com>
Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
---
 arch/arm/mach-omap2/gpmc.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/gpmc.c b/arch/arm/mach-omap2/gpmc.c
index fe25829..fb5b9c9 100644
--- a/arch/arm/mach-omap2/gpmc.c
+++ b/arch/arm/mach-omap2/gpmc.c
@@ -863,6 +863,7 @@ void omap3_gpmc_save_context(void)
 		}
 	}
 }
+EXPORT_SYMBOL(gpmc_enable_hwecc);
 
 void omap3_gpmc_restore_context(void)
 {
-- 
1.7.5.4

