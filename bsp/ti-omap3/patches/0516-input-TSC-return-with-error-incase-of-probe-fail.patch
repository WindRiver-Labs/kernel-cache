From b37f3150f11b0415fdf2a6d48e7df62d40fd109d Mon Sep 17 00:00:00 2001
From: "Patil, Rachna" <rachna@ti.com>
Date: Sun, 1 Jul 2012 01:06:06 +0800
Subject: [PATCH 516/609] input: TSC: return with error incase of probe fail

Original commit: deadac4fec55eabc2e3df86b9ccacf09d18109ed

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

This patch corrects error handling in touchscreen.

Signed-off-by: Patil, Rachna <rachna@ti.com>
---
 drivers/input/touchscreen/ti_tscadc.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/input/touchscreen/ti_tscadc.c b/drivers/input/touchscreen/ti_tscadc.c
index fb248d8..dbbb26f 100644
--- a/drivers/input/touchscreen/ti_tscadc.c
+++ b/drivers/input/touchscreen/ti_tscadc.c
@@ -384,6 +384,7 @@ static int __devinit tscadc_probe(struct platform_device *pdev)
 
 	if (clk_value < 7) {
 		dev_err(&pdev->dev, "clock input less than min clock requirement\n");
+		err = -EINVAL;
 		goto err_disable_clk;
 	}
 	/* CLKDIV needs to be configured to the value minus 1 */
-- 
1.7.5.4

