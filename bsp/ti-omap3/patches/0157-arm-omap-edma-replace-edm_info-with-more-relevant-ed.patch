From b306de2257501d23c791addb8f40a23ddf67931b Mon Sep 17 00:00:00 2001
From: "Hebbar, Gururaja" <gururaja.hebbar@ti.com>
Date: Mon, 9 Jan 2012 14:53:52 +0530
Subject: [PATCH 157/609] arm:omap:edma - replace edm_info with more relevant
 edma_cc

Original commit: 3a376844afa0eb5db1a197fc9e937ca1aca72c50

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

Signed-off-by: Hebbar, Gururaja <gururaja.hebbar@ti.com>
---
 arch/arm/mach-omap2/devices.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-omap2/devices.c b/arch/arm/mach-omap2/devices.c
index 7066396..bc56667 100644
--- a/arch/arm/mach-omap2/devices.c
+++ b/arch/arm/mach-omap2/devices.c
@@ -991,15 +991,15 @@ int map_xbar_event_to_channel(unsigned int event, unsigned int *channel,
 	unsigned int mask = 0;
 
 	ctrl = EDMA_CTLR(event);
-	xbar_evt_no = event - (edma_info[ctrl]->num_channels);
+	xbar_evt_no = event - (edma_cc[ctrl]->num_channels);
 
-	if (event < edma_info[ctrl]->num_channels) {
+	if (event < edma_cc[ctrl]->num_channels) {
 		*channel = event;
-	} else if (event < edma_info[ctrl]->num_events) {
+	} else if (event < edma_cc[ctrl]->num_events) {
 		*channel = xbar_event_mapping[xbar_evt_no].channel_no;
 		/* confirm the range */
 		if (*channel < EDMA_MAX_DMACH)
-			clear_bit(*channel, edma_info[ctrl]->edma_unused);
+			clear_bit(*channel, edma_cc[ctrl]->edma_unused);
 		mask = (*channel)%4;
 		offset = (*channel)/4;
 		offset *= 4;
-- 
1.7.5.4

