From 3b6d015fa119aa7c2dc320f92b83f8f4312dee6c Mon Sep 17 00:00:00 2001
From: "Hebbar, Gururaja" <gururaja.hebbar@ti.com>
Date: Sat, 30 Jun 2012 23:38:44 +0800
Subject: [PATCH 493/609] ARM: OMAP: AM33XX: HSMMC: fix the platform setup

Original commit: 4ebc7556b2d78ee71e65eacdb14874f686d28ae7

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

AM335x don't have the register CONTROL_PBIAS_LITE, so we set a
noop "set_power" function for it. This was already been done
for MMC0 instance. This patch applies this to instance 1 as well.

Signed-off-by: Hebbar, Gururaja <gururaja.hebbar@ti.com>
---
 arch/arm/mach-omap2/hsmmc.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/hsmmc.c b/arch/arm/mach-omap2/hsmmc.c
index 2fe3d56..8443351 100644
--- a/arch/arm/mach-omap2/hsmmc.c
+++ b/arch/arm/mach-omap2/hsmmc.c
@@ -408,6 +408,9 @@ static int __init omap_hsmmc_pdata_init(struct omap2_hsmmc_info *c,
 		if (soc_is_am35xx())
 			mmc->slots[0].set_power = am35x_hsmmc2_set_power;
 
+		if (cpu_is_am33xx())
+			mmc->slots[0].set_power = nop_mmc_set_power;
+
 		if (c->ext_clock)
 			c->transceiver = 1;
 		if (c->transceiver && (c->caps & MMC_CAP_8_BIT_DATA)) {
-- 
1.7.5.4

