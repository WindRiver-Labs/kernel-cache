From e4a2be888ea54d22983d0cced252d67b03f11583 Mon Sep 17 00:00:00 2001
From: "Philip, Avinash" <avinashphilip@ti.com>
Date: Sun, 12 Aug 2012 22:37:47 +0800
Subject: [PATCH 200/609] arm: omap: am33xx: Backlight Removed backlight data
 related to GPIO

Original commit: 40b5dfcd0a861d4b5b2a60d795f5757d6732d335

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

As backlight is enabled through PWM, cleaning up the GPIO based
backlight data.

Signed-off-by: Philip, Avinash <avinashphilip@ti.com>
---
 arch/arm/mach-omap2/board-am335xevm.c |   25 ++++++++-----------------
 1 files changed, 8 insertions(+), 17 deletions(-)

diff --git a/arch/arm/mach-omap2/board-am335xevm.c b/arch/arm/mach-omap2/board-am335xevm.c
index 4ffe3bc..0662db5 100644
--- a/arch/arm/mach-omap2/board-am335xevm.c
+++ b/arch/arm/mach-omap2/board-am335xevm.c
@@ -79,7 +79,6 @@ static const struct display_panel disp_panel = {
 	COLOR_ACTIVE,
 };
 
-#define AM335X_LCD_BL_PIN	GPIO_TO_PIN(0, 7)
 /* LCD backlight platform Data */
 #define AM335X_BACKLIGHT_MAX_BRIGHTNESS        250
 #define AM335X_BACKLIGHT_DEFAULT_BRIGHTNESS    250
@@ -112,13 +111,10 @@ static struct lcd_ctrl_config lcd_cfg = {
 	.raster_order		= 0,
 };
 
-static void am335x_gpio_bl_ctrl(int val);
-
 struct da8xx_lcdc_platform_data TFC_S9700RTWV35TR_01B_pdata = {
 	.manu_name		= "ThreeFive",
 	.controller_data	= &lcd_cfg,
 	.type			= "TFC_S9700RTWV35TR_01B",
-	.panel_power_ctrl	= am335x_gpio_bl_ctrl,
 };
 
 #include "common.h"
@@ -853,14 +849,6 @@ static void enable_ecap0(int evm_id, int profile)
 	backlight_enable = true;
 	setup_pin_mux(ecap0_pin_mux);
 }
-/* Setup pwm-backlight */
-static struct platform_device am335x_backlight = {
-	.name           = "pwm-backlight",
-	.id             = -1,
-	.dev            = {
-		.platform_data  = &am335x_backlight_data,
-	}
-};
 
 static struct pwmss_platform_data  pwm_pdata[3] = {
 	{
@@ -874,11 +862,14 @@ static struct pwmss_platform_data  pwm_pdata[3] = {
 	},
 };
 
-static void am335x_gpio_bl_ctrl(int val)
-{
-	/* lcd backlight */
-	gpio_set_value(AM335X_LCD_BL_PIN, val);
-}
+/* Setup pwm-backlight */
+static struct platform_device am335x_backlight = {
+	.name           = "pwm-backlight",
+	.id             = -1,
+	.dev            = {
+		.platform_data  = &am335x_backlight_data,
+	}
+};
 
 static int __init ecap0_init(void)
 {
-- 
1.7.5.4

