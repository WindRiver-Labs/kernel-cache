From ebbec3e6874d8ae77eabb0d9c0d2ae96a8b8582c Mon Sep 17 00:00:00 2001
From: Ravi B <ravibabu@ti.com>
Date: Thu, 22 Sep 2011 11:30:01 +0530
Subject: [PATCH 414/609] musb:ti81xx: removed warning while using toolchain
 arago-gcc-4.5.3

Original commit: 90be077f75d75d0f83e6033ed866735964c57013

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

Signed-off-by: Ravi B <ravibabu@ti.com>
Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
---
 drivers/usb/musb/cppi41_dma.c |    2 +-
 drivers/usb/musb/ti81xx.c     |    6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/usb/musb/cppi41_dma.c b/drivers/usb/musb/cppi41_dma.c
index d3acc67..13050f5 100644
--- a/drivers/usb/musb/cppi41_dma.c
+++ b/drivers/usb/musb/cppi41_dma.c
@@ -1457,7 +1457,7 @@ static void usb_process_rx_queue(struct cppi41 *cppi, unsigned index)
 		struct usb_pkt_desc *curr_pd;
 		struct cppi41_channel *rx_ch;
 		u8 ch_num, ep_num;
-		u32 length, orig_buf_len, timeout = 50;
+		u32 length = 0, orig_buf_len, timeout = 50;
 
 		curr_pd = usb_get_pd_ptr(cppi, pd_addr);
 		if (curr_pd == NULL) {
diff --git a/drivers/usb/musb/ti81xx.c b/drivers/usb/musb/ti81xx.c
index 9efdc6c..f0aa597 100644
--- a/drivers/usb/musb/ti81xx.c
+++ b/drivers/usb/musb/ti81xx.c
@@ -1160,7 +1160,7 @@ static int __devinit ti81xx_create_musb_pdev(struct ti81xx_glue *glue, u8 id)
 	struct resource *res;
 	struct resource	resources[2];
 	char res_name[10];
-	int ret;
+	int ret = 0;
 
 	/* get memory resource */
 	sprintf(res_name, "musb%d", id);
@@ -1232,7 +1232,7 @@ static int __init ti81xx_probe(struct platform_device *pdev)
 	struct device *dev = &pdev->dev;
 	struct musb_hdrc_platform_data *plat = dev->platform_data;
 	struct omap_musb_board_data *data = plat->board_data;
-	int ret, i;
+	int ret = 0, i;
 	struct resource *res;
 
 	/* allocate glue */
@@ -1317,7 +1317,7 @@ static int __init ti81xx_probe(struct platform_device *pdev)
 		/* initialize the cppi41dma init */
 		cppi41_init(i, glue->irq);
 #endif
-		ret |= ti81xx_create_musb_pdev(glue, i);
+		ret = ti81xx_create_musb_pdev(glue, i);
 		if (ret != 0)
 			goto err6;
 	}
-- 
1.7.5.4

