From 934f741452606fa1283bd0280fe9c97654fcd70f Mon Sep 17 00:00:00 2001
From: Ajay Kumar Gupta <ajay.gupta@ti.com>
Date: Tue, 28 Jul 2009 19:33:06 +0530
Subject: [PATCH 369/609] cppi41: fix channel program for actual len

Original commit: c97b2a0409809c7820eea32a9aa34af62abb29b6

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

actual length has to be zero at the start of new dma programming.

Signed-off-by: Ajay Kumar Gupta <ajay.gupta@ti.com>
Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
---
 drivers/usb/musb/cppi41_dma.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/usb/musb/cppi41_dma.c b/drivers/usb/musb/cppi41_dma.c
index 9e146d8..33c5461 100644
--- a/drivers/usb/musb/cppi41_dma.c
+++ b/drivers/usb/musb/cppi41_dma.c
@@ -805,6 +805,7 @@ static int cppi41_channel_program(struct dma_channel *channel,	u16 maxpacket,
 	cppi_ch->length = length;
 	cppi_ch->transfer_mode = mode;
 	cppi_ch->zlp_queued = 0;
+	cppi_ch->channel.actual_len = 0;
 
 	/* Tx or Rx channel? */
 	if (cppi_ch->transmit)
-- 
1.7.5.4

