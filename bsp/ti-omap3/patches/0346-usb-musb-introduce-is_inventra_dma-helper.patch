From 62a9311e0fb4a1adcb8774b8346af3b6dbc4f6fa Mon Sep 17 00:00:00 2001
From: Ming Lei <tom.leiming@gmail.com>
Date: Thu, 23 Dec 2010 23:13:58 +0800
Subject: [PATCH 346/609] usb: musb: introduce is_inventra_dma helper

Original commit: 6334dd831c57f6b12eb2e5a0e815b78ae674d706

  From git://arago-project.org/git/projects/linux-am33x.git
  And ti-sdk-am335x-evm-05.05.00.00-Linux-x86-Install image

This patch introduces is_inventra_dma helper, so that
we can remove dependency on CONFIG_USB_INVENTRA_DMA
in source file of musb core driver in later patches.

Signed-off-by: Ming Lei <tom.leiming@gmail.com>
Signed-off-by: Felipe Balbi <balbi@ti.com>
Signed-off-by: Ajay Kumar Gupta <ajay.gupta@ti.com>
Signed-off-by: Sriramakrishnan A G <srk@ti.com>
Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
---
 drivers/usb/musb/musb_dma.h |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/drivers/usb/musb/musb_dma.h b/drivers/usb/musb/musb_dma.h
index a6d9613..e5293d2 100644
--- a/drivers/usb/musb/musb_dma.h
+++ b/drivers/usb/musb/musb_dma.h
@@ -68,6 +68,18 @@ struct musb_hw_ep;
 #define	is_dma_capable()	(0)
 #endif
 
+#ifdef CONFIG_USB_UX500_DMA
+#define	is_ux500_dma(musb)	(musb->ops->flags & MUSB_GLUE_DMA_UX500)
+#else
+#define	is_ux500_dma(musb)	0
+#endif
+
+#ifdef CONFIG_USB_INVENTRA_DMA
+#define	is_inventra_dma()	1
+#else
+#define	is_inventra_dma()	0
+#endif
+
 #ifdef CONFIG_USB_TI_CPPI_DMA
 #define	is_cppi_enabled()	1
 #else
-- 
1.7.5.4

