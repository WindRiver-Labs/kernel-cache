From 7f46cb36c91f64d2a74f3115890490a82dc73906 Mon Sep 17 00:00:00 2001
From: Wang Hui <Hui.Wang@windriver.com>
Date: Wed, 27 May 2009 09:58:49 +0800
Subject: [PATCH 68/77] imx27_mach/conflict: solve several device conflicts on imx27ads

remove soc_uart1 and soc_uart3 registration, because they are
conflicted with usb host1 in hardware, moreover there is no
corresponding jacks on the board for uart1 and uart3.
solve the conflict between usb host2 and cspi1 by removing
one cspi1 pin from cspi1 init. In fact, this cspi pin is not
used by cspi1 because of hardware design on mx27ads board.

Signed-off-by: Wang Hui <Hui.Wang@windriver.com>
---
 arch/arm/mach-mx2/mx27ads.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-mx2/mx27ads.c b/arch/arm/mach-mx2/mx27ads.c
index bbe5f0e..024d580 100644
--- a/arch/arm/mach-mx2/mx27ads.c
+++ b/arch/arm/mach-mx2/mx27ads.c
@@ -837,7 +837,6 @@ static struct i2c_board_info mx27ads_i2c_devices[] = {
 #ifdef CONFIG_SPI_MXC_SELECT1
 static int mxc_cspi0_pins[] = {
 	PD25_PF_CSPI1_RDY,
-	PD26_PF_CSPI1_SS2,
 	PD27_PF_CSPI1_SS1,
 	PD28_PF_CSPI1_SS0,
 	PD29_PF_CSPI1_SCLK,
@@ -1612,9 +1611,7 @@ static void __init mx27ads_board_init(void)
 	gpio_fec_active();
 
 	mxc_register_device(&mxc_uart_device0, &uart_pdata[0]);
-	mxc_register_device(&mxc_uart_device1, &uart_pdata[1]);
 	mxc_register_device(&mxc_uart_device2, &uart_pdata[2]);
-	mxc_register_device(&mxc_uart_device3, &uart_pdata[3]);
 
 	mxc_init_extuart();
 
@@ -1678,8 +1675,8 @@ static void __init mx27ads_board_init(void)
 #ifdef CONFIG_USB
 	/* USB_HOST1 conflicts with UART3 pins */
 	mxc_register_device(&mxc_ehci1, &ehci1_pdata);
-#if (!defined(CONFIG_SPI_MXC_SELECT1) && !defined(CONFIG_SPI_MXC_SELECT2))
-	/* USB_HOST2 conflicts with SPI1 and SPI2 pins */
+#ifndef CONFIG_SPI_MXC_SELECT2
+	/* USB_HOST2 conflicts with SPI2 pins */
 	mxc_register_device(&mxc_ehci2, &ehci2_pdata);
 #endif
 #endif
-- 
1.6.3.1

