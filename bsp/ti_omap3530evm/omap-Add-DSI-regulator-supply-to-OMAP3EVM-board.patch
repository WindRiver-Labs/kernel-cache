From 49d0d2c1b30c0aa45bf1cf2a1983d8a362d873a8 Mon Sep 17 00:00:00 2001
From: Wang Hui <Hui.Wang@windriver.com>
Date: Mon, 22 Mar 2010 14:14:05 +0800
Subject: [PATCH 1/2] omap: Add DSI regulator supply to OMAP3EVM board

With recent changes happened in OMAP2/3 DSS library for regulator
interface, it is required to define DSI regulator supply, without
this DSS (in turn Fbdev) fails to get regulator.

Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
Acked-by: Tomi Valkeinen <tomi.valkeinen@nokia.com>
Signed-off-by: Tony Lindgren <tony@atomide.com>

[Original patch taken from this linux kernel mailing list archive:
https://patchwork.kernel.org/patch/85197/]

Integrated-by: Wang Hui <hui.wang@windriver.com>
---
 arch/arm/mach-omap2/board-omap3evm.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-omap2/board-omap3evm.c b/arch/arm/mach-omap2/board-omap3evm.c
index 017bb2f..f5c815a 100644
--- a/arch/arm/mach-omap2/board-omap3evm.c
+++ b/arch/arm/mach-omap2/board-omap3evm.c
@@ -514,10 +514,8 @@ static struct regulator_init_data omap3_evm_vdac = {
 };
 
 /* VPLL2 for digital video outputs */
-static struct regulator_consumer_supply omap3_evm_vpll2_supply = {
-	.supply		= "vdvi",
-	.dev		= &omap3_evm_lcd_device.dev,
-};
+static struct regulator_consumer_supply omap3_evm_vpll2_supply =
+	REGULATOR_SUPPLY("vdds_dsi", "omapdss");
 
 static struct regulator_init_data omap3_evm_vpll2 = {
 	.constraints = {
-- 
1.6.5.2

