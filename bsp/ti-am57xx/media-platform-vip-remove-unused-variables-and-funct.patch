From b5aae3e36424234d9e478624c6eae6874741b572 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Sun, 20 Jul 2014 15:21:42 +0800
Subject: [PATCH 142/263] media: platform: vip: remove unused variables and
 functions

remove warning informationfor vip

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/ti-vps/vip.c |   69 +----------------------------------
 1 files changed, 1 insertions(+), 68 deletions(-)

diff --git a/drivers/media/platform/ti-vps/vip.c b/drivers/media/platform/ti-vps/vip.c
index 442a5ed..6604a59 100644
--- a/drivers/media/platform/ti-vps/vip.c
+++ b/drivers/media/platform/ti-vps/vip.c
@@ -347,33 +347,6 @@ static void vip_top_vpdma_reset(struct vip_shared *shared)
 	write_sreg(shared, VIP_CLK_RESET, val);
 }
 
-static void vip_xtra_set_repack_sel(struct vip_port *port, int repack_mode)
-{
-	u32 val;
-
-	if (port->port_id == 0 && port->dev->slice_id == VIP_SLICE1) {
-		val = read_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTA_1);
-		insert_field(&val, repack_mode, VIP_REPACK_SEL_MASK, VIP_REPACK_SEL_SHFT);
-
-		write_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTA_1, val);
-	} else if (port->port_id == 0 && port->dev->slice_id == VIP_SLICE2) {
-		val = read_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTA_1);
-		insert_field(&val, repack_mode, VIP_REPACK_SEL_MASK, VIP_REPACK_SEL_SHFT);
-
-		write_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTA_1, val);
-	} else if (port->port_id == 1 && port->dev->slice_id == VIP_SLICE1) {
-		val = read_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTB_1);
-		insert_field(&val, repack_mode, VIP_REPACK_SEL_MASK, VIP_REPACK_SEL_SHFT);
-
-		write_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTB_1, val);
-	} else if (port->port_id == 1 && port->dev->slice_id == VIP_SLICE2) {
-		val = read_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTB_1);
-		insert_field(&val, repack_mode, VIP_REPACK_SEL_MASK, VIP_REPACK_SEL_SHFT);
-
-		write_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTB_1, val);
-	}
-}
-
 static void vip_set_discrete_basic_mode(struct vip_port *port)
 {
 	u32 val;
@@ -548,44 +521,6 @@ static void vip_set_actvid_polarity(struct vip_port *port, int polarity)
 	}
 }
 
-static void vip_set_actvid_hsync_n(struct vip_port *port, int enable)
-{
-	u32 val;
-
-	if (port->port_id == 0 && port->dev->slice_id == VIP_SLICE1) {
-		val = read_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTA_0);
-		if (enable)
-			val |= VIP_USE_ACTVID_HSYNC_ONLY;
-		else
-			val &= ~VIP_USE_ACTVID_HSYNC_ONLY;
-
-		write_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTA_0, val);
-	} else if (port->port_id == 0 && port->dev->slice_id == VIP_SLICE2) {
-		val = read_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTA_0);
-		if (enable)
-			val |= VIP_USE_ACTVID_HSYNC_ONLY;
-		else
-			val &= ~VIP_USE_ACTVID_HSYNC_ONLY;
-		write_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTA_0, val);
-	} else if (port->port_id == 1 && port->dev->slice_id == VIP_SLICE1) {
-		val = read_vreg(port->dev, VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTB_0);
-		if (enable)
-			val |= VIP_USE_ACTVID_HSYNC_ONLY;
-		else
-			val &= ~VIP_USE_ACTVID_HSYNC_ONLY;
-		write_vreg(port->dev,  VIP1_PARSER_REG_OFFSET + VIP_PARSER_PORTB_0, val);
-	} else if (port->port_id == 1 && port->dev->slice_id == VIP_SLICE2) {
-		val = read_vreg(port->dev, VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTB_0);
-		if (enable)
-			val |= VIP_USE_ACTVID_HSYNC_ONLY;
-		else
-			val &= ~VIP_USE_ACTVID_HSYNC_ONLY;
-
-		write_vreg(port->dev,  VIP2_PARSER_REG_OFFSET + VIP_PARSER_PORTB_0, val);
-	}
-}
-
-
 static void vip_sync_type(struct vip_port *port, enum sync_types sync)
 {
 	u32 val;
@@ -889,7 +824,6 @@ static void populate_desc_list(struct vip_stream *stream)
 static void start_dma(struct vip_dev *dev, struct vip_buffer *buf)
 {
 	struct vpdma_data *vpdma = dev->shared->vpdma;
-	struct vpdma_dtd *write_dtd;
 	dma_addr_t dma_addr;
 	int drop_data;
 
@@ -1286,7 +1220,6 @@ int vip_s_fmt_vid_cap(struct file *file, void *priv,
 	struct vip_stream *stream = file2stream(file);
 	struct vip_port *port = stream->port;
 	struct vip_dev *dev = port->dev;
-	struct vb2_queue *vq = &stream->vb_vidq;
 	struct v4l2_subdev_format sfmt;
 	struct v4l2_mbus_framefmt *mf;
 	int ret;
@@ -1516,7 +1449,7 @@ static int vip_start_streaming(struct vb2_queue *vq, unsigned int count)
 	struct vip_port *port = stream->port;
 	struct vip_dev *dev = port->dev;
 	struct vip_buffer *buf;
-	unsigned long flags, i;
+	unsigned long flags;
 
 	if (count <= VIP_VPDMA_FIFO_SIZE) {
 		vip_dprintk(dev, "Less buffers queued, at least %d needed\n",
-- 
1.7.5.4

