From 886303480931feaf9bf0feea37193d58fbc69d4f Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 24 Jul 2014 16:26:13 +0800
Subject: [PATCH 224/263] fix correct dependency between DSS_HDMI and SOC_HDMI

The commit 083368fe comes from branch ti-linux-3.12.y:
  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

Select DSS HDMI audio for OMAP5 and OMAP4. DSS will select
at runtime the correct set of functions to enable HDMI audio
functionality.

Signed-off-by: Ricardo Neri <ricardo.neri@ti.com>
Signed-off-by: Sebastien Guiriec <s-guiriec@ti.com>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 sound/soc/omap/Kconfig |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/sound/soc/omap/Kconfig b/sound/soc/omap/Kconfig
index 1c267f0..b52231e 100644
--- a/sound/soc/omap/Kconfig
+++ b/sound/soc/omap/Kconfig
@@ -110,10 +110,11 @@ config SND_OMAP_SOC_OMAP_ABE_TWL6040
 
 config SND_OMAP_SOC_OMAP_HDMI
 	tristate "SoC Audio support for Texas Instruments OMAP HDMI"
-	depends on SND_OMAP_SOC && OMAP4_DSS_HDMI && OMAP2_DSS
+	depends on SND_OMAP_SOC && (OMAP4_DSS_HDMI || OMAP5_DSS_HDMI)
 	select SND_OMAP_SOC_HDMI
 	select SND_SOC_HDMI_CODEC
-	select OMAP4_DSS_HDMI_AUDIO
+	select OMAP4_DSS_HDMI_AUDIO if OMAP4_DSS_HDMI
+	select OMAP5_DSS_HDMI_AUDIO if OMAP5_DSS_HDMI
 	help
 	  Say Y if you want to add support for SoC HDMI audio on Texas Instruments
 	  OMAP4 chips
-- 
1.7.5.4

