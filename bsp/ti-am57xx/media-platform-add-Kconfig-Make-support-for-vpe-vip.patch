From 2ec2d6cf229fc7145e9c0cbb8e224488a1779e2f Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Sun, 20 Jul 2014 15:11:43 +0800
Subject: [PATCH 137/263] media: platform: add Kconfig/Make support for
 vpe/vip

This patch comes from the following git repo:

  git://git.omapzoom.org/kernel/omap.git

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/platform/Kconfig  |   28 ++++++++++++++++++++++++++++
 drivers/media/platform/Makefile |    1 +
 2 files changed, 29 insertions(+), 0 deletions(-)

diff --git a/drivers/media/platform/Kconfig b/drivers/media/platform/Kconfig
index e4a3de5..0dbdc99 100644
--- a/drivers/media/platform/Kconfig
+++ b/drivers/media/platform/Kconfig
@@ -121,6 +121,16 @@ config VIDEO_S3C_CAMIF
 	  To compile this driver as a module, choose M here: the module
 	  will be called s3c-camif.
 
+config VIDEO_TI_VIP
+        tristate "TI VIP (Video Input Port) driver"
+        depends on VIDEO_DEV && VIDEO_V4L2 && SOC_DRA7XX
+        select VIDEOBUF2_DMA_CONTIG
+        select VIDEO_TI_VPDMA
+        default n
+	---help---
+	  This is a v4l2 driver for the TI VIP(Video Input Port) block
+	  found on DRA7XX SoC.
+
 source "drivers/media/platform/soc_camera/Kconfig"
 source "drivers/media/platform/exynos4-is/Kconfig"
 source "drivers/media/platform/s5p-tv/Kconfig"
@@ -220,8 +230,26 @@ config VIDEO_RENESAS_VSP1
 	  To compile this driver as a module, choose M here: the module
 	  will be called vsp1.
 
+config VIDEO_TI_VPE
+	tristate "TI VPE (Video Processing Engine) driver"
+	depends on VIDEO_DEV && VIDEO_V4L2 && SOC_DRA7XX
+	select VIDEOBUF2_DMA_CONTIG
+	select V4L2_MEM2MEM_DEV
+	default n
+	---help---
+	  This is a v4l2 driver for the TI VPE(Video Processing Engine) block
+	  found on DRA7XX SoC.
+
 endif # V4L_MEM2MEM_DRIVERS
 
+config VIDEO_TI_VPDMA
+	bool
+	depends on VIDEO_TI_VIP || VIDEO_TI_VPE
+	default n
+	help
+	  A helper library used for TI Video processing subsystem
+	  found on DRA7xx SoC.
+
 menuconfig V4L_TEST_DRIVERS
 	bool "Media test drivers"
 	depends on MEDIA_CAMERA_SUPPORT
diff --git a/drivers/media/platform/Makefile b/drivers/media/platform/Makefile
index 4e4da48..0897cfa 100644
--- a/drivers/media/platform/Makefile
+++ b/drivers/media/platform/Makefile
@@ -51,5 +51,6 @@ obj-$(CONFIG_VIDEO_RENESAS_VSP1)	+= vsp1/
 obj-y	+= davinci/
 
 obj-$(CONFIG_ARCH_OMAP)	+= omap/
+obj-$(CONFIG_SOC_DRA7XX) += ti-vps/
 
 ccflags-y += -I$(srctree)/drivers/media/i2c
-- 
1.7.5.4

