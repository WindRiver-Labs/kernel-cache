From 575db58d3072d6ac942a570ba403f100a2cc9e33 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 5 Aug 2014 10:53:34 +0800
Subject: [PATCH 232/263] arm: omap2: dra7-evm: add dss hwmon data for DSS
 system.

This patch comes from the following git repo:

  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git
  git://git.omapzoom.org/kernel/omap.git

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/omap_hwmod_7xx_data.c |   39 +++++++++++++++++++++++++++++
 1 files changed, 39 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
index 6358ef0..5ed8ade7 100644
--- a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
@@ -626,17 +626,36 @@ static struct omap_hwmod_class dra7xx_hdmi_hwmod_class = {
 };
 
 /* dss_hdmi */
+static struct omap_hwmod_irq_info dra7xx_dss_hdmi_irqs[] = {
+	{ .irq = 101 + DRA7XX_IRQ_GIC_START },
+	{ .irq = -1 }
+};
+
+static struct omap_hwmod_dma_info dra7xx_dss_hdmi_sdma_reqs[] = {
+	{ .dma_req = 75 + DRA7XX_DMA_REQ_START },
+	{ .dma_req = -1 }
+};
+
+static struct omap_hwmod_opt_clk dss_hdmi_opt_clks[] = {
+	{ .role = "sys_clk", .clk = "dss_hdmi_clk" },
+};
 
 static struct omap_hwmod dra7xx_dss_hdmi_hwmod = {
 	.name		= "dss_hdmi",
 	.class		= &dra7xx_hdmi_hwmod_class,
 	.clkdm_name	= "dss_clkdm",
+	.mpu_irqs	= dra7xx_dss_hdmi_irqs,
+	.sdma_reqs	= dra7xx_dss_hdmi_sdma_reqs,
+	.main_clk	= "dss_48mhz_clk",
+	.flags		= HWMOD_SWSUP_SIDLE_ACT,
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_DSS_DSS_CLKCTRL_OFFSET,
 			.flags = HWMOD_OMAP4_NO_CONTEXT_LOSS_BIT,
 		},
 	},
+	.opt_clks	= dss_hdmi_opt_clks,
+	.opt_clks_cnt	= ARRAY_SIZE(dss_hdmi_opt_clks),
 };
 
 /*
@@ -3115,6 +3134,26 @@ static struct omap_hwmod_addr_space dra7xx_dss_hdmi_addrs[] = {
 		.pa_end		= 0x580400ff,
 		.flags		= ADDR_TYPE_RT
 	},
+	{
+		.name		= "pllctrl",
+		.pa_start	= 0x58040200,
+		.pa_end		= 0x5804023f,
+	},
+	{
+		.name		= "hdmitxphy",
+		.pa_start	= 0x58040300,
+		.pa_end		= 0x5804033f,
+	},
+	{
+		.name		= "hdmi_core",
+		.pa_start	= 0x58060000,
+		.pa_end		= 0x58078fff,
+	},
+	{
+		.name		= "deshdcp",
+		.pa_start	= 0x58007000,
+		.pa_end		= 0x5800707f,
+	},
 	{ }
 };
 
-- 
1.7.5.4

