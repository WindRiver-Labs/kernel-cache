From c6ddc40c1a607f47d1214d85fe302700188c9f4b Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 31 Jul 2014 11:13:42 +0800
Subject: [PATCH 230/263] snd: soc: codec: advance the initialization for
 aic3x

Although probe deferral will be actived, but we still don't hope random
initial sequence on aic3x codes, cause it should be in front of mcasp.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 sound/soc/codecs/tlv320aic3x.c |   13 ++++++++++++-
 1 files changed, 12 insertions(+), 1 deletions(-)

diff --git a/sound/soc/codecs/tlv320aic3x.c b/sound/soc/codecs/tlv320aic3x.c
index 7786e4b..1d801d7 100644
--- a/sound/soc/codecs/tlv320aic3x.c
+++ b/sound/soc/codecs/tlv320aic3x.c
@@ -1607,7 +1607,18 @@ static struct i2c_driver aic3x_i2c_driver = {
 	.id_table = aic3x_i2c_id,
 };
 
-module_i2c_driver(aic3x_i2c_driver);
+
+static int __init aic3x_i2c_init(void)
+{
+	return i2c_add_driver(&aic3x_i2c_driver);
+}
+
+static void __exit aic3x_i2c_exit(void)
+{
+}
+
+subsys_initcall_sync(aic3x_i2c_init);
+module_exit(aic3x_i2c_exit);
 
 MODULE_DESCRIPTION("ASoC TLV320AIC3X codec driver");
 MODULE_AUTHOR("Vladimir Barinov");
-- 
1.7.5.4

