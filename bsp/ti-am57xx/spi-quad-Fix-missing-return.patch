From 1df4f85b2f811d1ee52c328b71bf05a5b11d858c Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 17 Jul 2014 13:26:24 +0800
Subject: [PATCH 114/263] spi: quad: Fix missing return

This commit d5ee722a from:

 git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

Delete a "return" when commit the patch to a new kernel version by mistake.
So recover it.

Signed-off-by: wangyuhang <wangyuhang2014@gmail.com>
Signed-off-by: Mark Brown <broonie@linaro.org>
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/spi/spi.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/spi/spi.c b/drivers/spi/spi.c
index 43e1482..a85699a 100644
--- a/drivers/spi/spi.c
+++ b/drivers/spi/spi.c
@@ -1480,6 +1480,7 @@ static int __spi_async(struct spi_device *spi, struct spi_message *message)
 			return -EINVAL;
 		if (xfer->speed_hz && master->max_speed_hz &&
 		    xfer->speed_hz > master->max_speed_hz)
+			return -EINVAL;
 
 		if (xfer->tx_buf && !xfer->tx_nbits)
 			xfer->tx_nbits = SPI_NBITS_SINGLE;
-- 
1.7.5.4

