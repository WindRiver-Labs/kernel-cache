From 28d950c362eb323a2f217e14063bdcbe880c0f04 Mon Sep 17 00:00:00 2001
From: Tom Zanussi <tom.zanussi@intel.com>
Date: Tue, 13 Mar 2012 16:34:13 -0500
Subject: [PATCH 17/17] drm-psb: change udelay to mdelay in
 intel_wait_for_vblank()

This fixes the compile error>

ERROR: "__bad_udelay" [drivers/gpu/drm-psb/psb.ko] undefined!

This is the same fix as in gma500:

  commit 243dd2809a5edd2e0e3e62781083aa44049af37d
  Author: Stephen Rothwell <sfr@canb.auug.org.au>
  Date:   Mon Jul 25 15:18:44 2011 +1000

    gma500: udelay(20000) it too long again

Signed-off-by: Tom Zanussi <tom.zanussi@intel.com>
---
 drivers/gpu/drm-psb/intel_display.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm-psb/intel_display.c b/drivers/gpu/drm-psb/intel_display.c
index f81cde3..d28051d 100644
--- a/drivers/gpu/drm-psb/intel_display.c
+++ b/drivers/gpu/drm-psb/intel_display.c
@@ -354,7 +354,7 @@ void
 intel_wait_for_vblank(struct drm_device *dev)
 {
 	/* Wait for 20ms, i.e. one cycle at 50hz. */
-	udelay(20000);
+	mdelay(20);
 }
 
 void
-- 
1.7.5.4

