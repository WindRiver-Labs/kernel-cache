From 2ef3e527cd6d67267575befff02317b1bcde729b Mon Sep 17 00:00:00 2001
From: Anders Berg <anders.berg@intel.com>
Date: Thu, 9 Apr 2015 13:48:21 +0200
Subject: [PATCH 021/131] arm64: dts: Add NEMAC device nodes

Signed-off-by: Anders Berg <anders.berg@intel.com>
[Original patch is from linux-yocto-4.1 axxia/base branch.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm64/boot/dts/intel/axm5601-emu.dts | 9 +++++++--
 arch/arm64/boot/dts/intel/axm56xx.dtsi    | 8 +++++---
 2 files changed, 12 insertions(+), 5 deletions(-)

diff --git a/arch/arm64/boot/dts/intel/axm5601-emu.dts b/arch/arm64/boot/dts/intel/axm5601-emu.dts
index ba0cb5b..f519112 100644
--- a/arch/arm64/boot/dts/intel/axm5601-emu.dts
+++ b/arch/arm64/boot/dts/intel/axm5601-emu.dts
@@ -40,17 +40,22 @@
 };
 
 &femac {
-       status = "okay";
+       status = "disabled";
        phy-handle = <&phy0>;
 };
 
+&nemac {
+	status = "okay";
+	phy-handle = <&phy0>;
+};
+
 &mdio {
       status = "okay";
       lsi,mdio-clk-offset = <0x5>;
       lsi,mdio-clk-period = <0xc>;
-      max-speed = <10>;
 
       phy0: ethernet-phy@3 {
            reg = <0x3>;
+	    max-speed = <10>;
       };
 };
diff --git a/arch/arm64/boot/dts/intel/axm56xx.dtsi b/arch/arm64/boot/dts/intel/axm56xx.dtsi
index e24b13f..cebc9a5 100644
--- a/arch/arm64/boot/dts/intel/axm56xx.dtsi
+++ b/arch/arm64/boot/dts/intel/axm56xx.dtsi
@@ -101,9 +101,11 @@
 		};
 
 		nemac: ethernet@8080240000 {
-			compatible = "lsi,nemac";
-			reg = <0x80 0x80240000 0x1000>;
-			interrupts = <GIC_SPI 4 IRQ_TYPE_LEVEL_HIGH>;
+			compatible = "intel,nemac";
+			reg = <0x80 0x80240000 0x10000>;
+			interrupts = <GIC_SPI 0 IRQ_TYPE_LEVEL_HIGH>,
+				     <GIC_SPI 1 IRQ_TYPE_LEVEL_HIGH>;
+			dma-coherent;
 			status = "disabled";
 		};
 
-- 
2.8.1

