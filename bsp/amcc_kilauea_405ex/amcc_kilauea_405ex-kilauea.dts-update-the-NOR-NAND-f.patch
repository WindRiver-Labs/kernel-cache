From 104278aa64e4dd70155ddf2dce688cdfabff5ca8 Mon Sep 17 00:00:00 2001
From: Wu Zhangjin <zhangjin.wu@windriver.com>
Date: Wed, 21 Jul 2010 10:50:42 +0800
Subject: [PATCH 2/3] amcc_kilauea_405ex: kilauea.dts: update the NOR, NAND flash info

- NOR flash partitions
    0x00000000-0x002c0000 : "kernel"
    0x002c0000-0x00300000 : "dtb"
    0x00300000-0x01300000 : "root"
    0x01300000-0x03f60000 : "user"
    0x03f60000-0x03fa0000 : "env"
    0x03fa0000-0x04000000 : "u-boot"

  - NAND flash partitions
    - PPC4xx NAND controller (NDFC)
    0x00000000-0x00060000 : "u-boot"
    0x00060000-0x00068000 : "env"
    0x00068000-0x000a8000 : "dtb"
    0x000a8000-0x00368000 : "kernel"
    0x00368000-0x01368000 : "root"
    0x01368000-0x04000000 : "User"

Signed-off-by: Wu Zhangjin <zhangjin.wu@windriver.com>
---
 arch/powerpc/boot/dts/kilauea.dts |   42 +++++++++++++++++++++++++++---------
 1 files changed, 31 insertions(+), 11 deletions(-)

diff --git a/arch/powerpc/boot/dts/kilauea.dts b/arch/powerpc/boot/dts/kilauea.dts
index 3bd1dde..13f1e58 100644
--- a/arch/powerpc/boot/dts/kilauea.dts
+++ b/arch/powerpc/boot/dts/kilauea.dts
@@ -150,27 +150,29 @@
 					#size-cells = <1>;
 					partition@0 {
 						label = "kernel";
-						reg = <0x00000000 0x001e0000>;
+						reg = <0x00000000 0x002c0000>;
 					};
-					partition@1e0000 {
+					partition@2c0000 {
 						label = "dtb";
-						reg = <0x001e0000 0x00020000>;
+						reg = <0x002c0000 0x00040000>;
 					};
-					partition@200000 {
+					partition@300000 {
 						label = "root";
-						reg = <0x00200000 0x00200000>;
+						reg = <0x00300000 0x01000000>;
 					};
-					partition@400000 {
+					partition@1300000 {
 						label = "user";
-						reg = <0x00400000 0x03b60000>;
+						reg = <0x01300000 0x02c60000>;
 					};
 					partition@3f60000 {
 						label = "env";
 						reg = <0x03f60000 0x00040000>;
+						read-only;
 					};
 					partition@3fa0000 {
 						label = "u-boot";
 						reg = <0x03fa0000 0x00060000>;
+						read-only;
 					};
 				};
 
@@ -188,11 +190,29 @@
 
 						partition@0 {
 							label = "u-boot";
-							reg = <0x00000000 0x00100000>;
+							reg = <0x00000000 0x00060000>;
+							read-only;
 						};
-						partition@100000 {
-							label = "user";
-							reg = <0x00000000 0x03f00000>;
+						partition@60000 {
+							label = "env";
+							reg = <0x00060000 0x00008000>;
+							read-only;
+						};
+						partition@68000 {
+							label = "dtb";
+							reg = <0x00068000 0x00040000>;
+						};
+						partition@a8000 {
+							label = "kernel";
+							reg = <0x000a8000 0x002c0000>;
+						};
+						partition@368000 {
+							label = "root";
+							reg = <0x00368000 0x01000000>;
+						};
+						partition@1368000 {
+							label = "User";
+							reg = <0x01368000 0x02c98000>;
 						};
 					};
 				};
-- 
1.6.5.2

