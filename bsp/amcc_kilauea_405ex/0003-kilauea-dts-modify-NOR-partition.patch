From 89a1efe6c98df0c8a4ecbaed269996d62ea73a44 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 11 Aug 2009 12:40:32 +0800
Subject: [PATCH 3/3] kilauea/dts: modify NOR partition

Add the dtb partition, and modify all partition size to match the real size.

0x00000000-0x002c0000 : "kernel"
0x002c0000-0x00300000 : "dtb"
0x00300000-0x01300000 : "root"
0x01300000-0x03f60000 : "user"
0x03f60000-0x03fa0000 : "env"
0x03fa0000-0x04000000 : "u-boot"

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/boot/dts/kilauea.dts |   16 +++++++++++-----
 1 files changed, 11 insertions(+), 5 deletions(-)

diff --git a/arch/powerpc/boot/dts/kilauea.dts b/arch/powerpc/boot/dts/kilauea.dts
index e51b9d6..9cdb96a 100644
--- a/arch/powerpc/boot/dts/kilauea.dts
+++ b/arch/powerpc/boot/dts/kilauea.dts
@@ -147,23 +147,29 @@
 					#size-cells = <1>;
 					partition@0 {
 						label = "kernel";
-						reg = <0x00000000 0x00200000>;
+						reg = <0x00000000 0x002c0000>;
 					};
-					partition@200000 {
+					partition@2c0000 {
+						label = "dtb";
+						reg = <0x002c0000 0x00040000>;
+					};
+					partition@300000 {
 						label = "root";
-						reg = <0x00200000 0x00200000>;
+						reg = <0x00300000 0x01000000>;
 					};
-					partition@400000 {
+					partition@1300000 {
 						label = "user";
-						reg = <0x00400000 0x03b60000>;
+						reg = <0x01300000 0x02c60000>;
 					};
 					partition@3f60000 {
 						label = "env";
 						reg = <0x03f60000 0x00040000>;
+						read-only;
 					};
 					partition@3fa0000 {
 						label = "u-boot";
 						reg = <0x03fa0000 0x00060000>;
+						read-only;
 					};
 				};
 
-- 
1.6.3.3

