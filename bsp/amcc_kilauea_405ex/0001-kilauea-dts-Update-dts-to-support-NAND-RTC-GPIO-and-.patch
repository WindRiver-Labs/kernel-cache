From c58df174b1470476dd4eadfe6a39da737c869a47 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 11 Aug 2009 12:40:24 +0800
Subject: [PATCH 1/3] kilauea/dts: Update dts to support NAND, RTC, GPIO and HWMON

Support for the following devices on the dts:
- PPC4xx NAND controller (NDFC)
0x00000000-0x00060000 : "u-boot"
0x00060000-0x00068000 : "env"
0x00068000-0x000a8000 : "dtb"
0x000a8000-0x00368000 : "kernel"
0x00368000-0x01368000 : "root"
0x01368000-0x04000000 : "User"

- I2C RTC (Dallas DS1338)
- GPIO (GPIO on PPC40x and PPC44x SOCs)
- I2C HWMON (Dallas DS1775)

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/boot/dts/kilauea.dts |   57 +++++++++++++++++++++++++++++++++++++
 1 files changed, 57 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/kilauea.dts b/arch/powerpc/boot/dts/kilauea.dts
index 272b87f..e51b9d6 100644
--- a/arch/powerpc/boot/dts/kilauea.dts
+++ b/arch/powerpc/boot/dts/kilauea.dts
@@ -166,6 +166,47 @@
 						reg = <0x03fa0000 0x00060000>;
 					};
 				};
+
+				ndfc@1,0 {
+					compatible = "ibm,ndfc";
+					reg = <0x00000001 0x00000000 0x00002000>;
+					ccr = <0x00001000>;
+					bank-settings = <0x80002222>;
+					#address-cells = <1>;
+					#size-cells = <1>;
+
+					nand {
+						#address-cells = <1>;
+						#size-cells = <1>;
+
+						partition@0 {
+							label = "u-boot";
+							reg = <0x00000000 0x00060000>;
+							read-only;
+						};
+						partition@60000 {
+							label = "env";
+							reg = <0x00060000 0x00008000>;
+							read-only;
+						};
+						partition@68000 {
+							label = "dtb";
+							reg = <0x00068000 0x00040000>;
+						};
+						partition@a8000 {
+							label = "kernel";
+							reg = <0x000a8000 0x002c0000>;
+						};
+						partition@368000 {
+							label = "root";
+							reg = <0x00368000 0x01000000>;
+						};
+						partition@1368000 {
+							label = "User";
+							reg = <0x01368000 0x02c98000>;
+						};
+					};
+				};
 			};
 
 			UART0: serial@ef600200 {
@@ -195,6 +236,18 @@
 				reg = <0xef600400 0x00000014>;
 				interrupt-parent = <&UIC0>;
 				interrupts = <0x2 0x4>;
+				#address-cells = <1>;
+				#size-cells = <0>;
+
+				ad7414@48 {
+					compatible = "adi,ad7414";
+					reg = <0x48>;
+				};
+
+				rtc@68 {
+					compatible = "dallas,ds1338";
+					reg = <0x68>;
+				};
 			};
 
 			IIC1: i2c@ef600500 {
@@ -204,6 +257,10 @@
 				interrupts = <0x7 0x4>;
 			};
 
+			GPIO0: gpio@ef600800 {
+				compatible = "ibm,ppc4xx-gpio";
+				reg = <0xef600800 0x00000048>;
+			};
 
 			RGMII0: emac-rgmii@ef600b00 {
 				compatible = "ibm,rgmii-405ex", "ibm,rgmii";
-- 
1.6.3.3

