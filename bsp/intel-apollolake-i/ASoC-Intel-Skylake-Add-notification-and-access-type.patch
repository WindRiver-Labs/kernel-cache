From 1fba501ca3445fd90c7d8c1c7953fce71f689073 Mon Sep 17 00:00:00 2001
From: G Kranthi <gudishax.kranthikumar@intel.com>
Date: Thu, 31 Mar 2016 02:10:06 +0530
Subject: [PATCH 2026/2508] ASoC: Intel: Skylake: Add notification and access
 type

commit 0306bd7b3b65cf47ec54627b0a87853f61e7d7c6 from
https://github.com/01org/linux-apollolake-i

This patch will add the support for module kcontrol flags
notificaiton control, access type(read or write) and
value cacheable.

Change-Id: I0bbbaca668d24c90933b8733381fac538f282977
Tracked-On: https://jira01.devtools.intel.com/browse/OAM-25262
Signed-off-by: G Kranthi <gudishax.kranthikumar@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/8804
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Jayanti, Satya Charitardha <satya.charitardha.jayanti@intel.com>
---
 sound/soc/intel/skylake/skl-topology.c       |    4 ++++
 sound/soc/intel/skylake/skl-topology.h       |   11 +++++++++++
 sound/soc/intel/skylake/skl-tplg-interface.h |    6 +++++-
 3 files changed, 20 insertions(+), 1 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-topology.c b/sound/soc/intel/skylake/skl-topology.c
index a392f46..26503c5 100644
--- a/sound/soc/intel/skylake/skl-topology.c
+++ b/sound/soc/intel/skylake/skl-topology.c
@@ -2097,6 +2097,10 @@ static int skl_init_algo_data(struct device *dev, struct soc_bytes_ext *be,
 	ac->max = dfw_ac->max;
 	ac->param_id = dfw_ac->param_id;
 	ac->set_params = dfw_ac->set_params;
+	ac->access_type = dfw_ac->access_type;
+	ac->value_cacheable = dfw_ac->value_cacheable;
+	ac->notification_ctrl = dfw_ac->notification_ctrl;
+
 
 	if (ac->max) {
 		ac->params = (char *) devm_kzalloc(dev, ac->max, GFP_KERNEL);
diff --git a/sound/soc/intel/skylake/skl-topology.h b/sound/soc/intel/skylake/skl-topology.h
index 95812a3..5a64935 100644
--- a/sound/soc/intel/skylake/skl-topology.h
+++ b/sound/soc/intel/skylake/skl-topology.h
@@ -99,6 +99,12 @@ struct probe_pt_param {
 	u32 node_id;
 };
 
+enum skl_widget_access {
+	SKL_WIDGET_READ = 0,
+	SKL_WIDGET_WRITE = 1,
+	SKL_WIDGET_READ_WRITE = 2
+};
+
 struct skl_audio_data_format {
 	enum skl_s_freq s_freq;
 	enum skl_bitdepth bit_depth;
@@ -336,6 +342,11 @@ struct skl_module_cfg {
 
 struct skl_algo_data {
 	u32 param_id;
+	u32 runtime_applicable:1;
+	u32 access_type:2;
+	u32 value_cacheable:1;
+	u32 notification_ctrl:1;
+	u32 rsvd:27;
 	u32 set_params;
 	u32 max;
 	char *params;
diff --git a/sound/soc/intel/skylake/skl-tplg-interface.h b/sound/soc/intel/skylake/skl-tplg-interface.h
index ea1d2cd..5175d69 100644
--- a/sound/soc/intel/skylake/skl-tplg-interface.h
+++ b/sound/soc/intel/skylake/skl-tplg-interface.h
@@ -257,7 +257,11 @@ struct skl_gain_config {
 
 struct skl_dfw_algo_data {
 	u32 set_params:2;
-	u32 rsvd:30;
+	u32 runtime_applicable:1;
+	u32 access_type:2;
+	u32 value_cacheable:1;
+	u32 notification_ctrl:1;
+	u32 rsvd:25;
 	u32 param_id;
 	u32 max;
 	char params[0];
-- 
1.7.5.4

