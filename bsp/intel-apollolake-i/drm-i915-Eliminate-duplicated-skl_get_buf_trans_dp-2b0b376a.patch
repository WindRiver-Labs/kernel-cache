From e972ee6a6540c3e57896ee91b3dee3a5eb9a62b3 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Ville=20Syrj=C3=A4l=C3=A4?= <ville.syrjala@linux.intel.com>
Date: Tue, 8 Dec 2015 19:59:40 +0200
Subject: [PATCH 2201/4706] drm/i915: Eliminate duplicated
 skl_get_buf_trans_dp()
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

commit cd1101cb271ba6b7cd407ca750a038d89df357a1 upstream

skl_get_buf_trans_edp() effectively contains another copy of
skl_get_buf_trans_dp(). Remove the duplication and just call
skl_get_buf_trans_dp() from  skl_get_buf_trans_edp().

v2: Resolve conflicts due to KBL

Signed-off-by: Ville Syrjälä <ville.syrjala@linux.intel.com>
Reviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch> (v1)
---
 drivers/gpu/drm/i915/intel_ddi.c |   21 +++++----------------
 1 files changed, 5 insertions(+), 16 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_ddi.c b/drivers/gpu/drm/i915/intel_ddi.c
index 7f57b6e..2780ac4 100644
--- a/drivers/gpu/drm/i915/intel_ddi.c
+++ b/drivers/gpu/drm/i915/intel_ddi.c
@@ -368,31 +368,20 @@ skl_get_buf_trans_edp(struct drm_device *dev, int *n_entries)
 {
 	struct drm_i915_private *dev_priv = dev->dev_private;
 
-	if (IS_SKL_ULX(dev) || IS_KBL_ULX(dev)) {
-		if (dev_priv->edp_low_vswing) {
+	if (dev_priv->edp_low_vswing) {
+		if (IS_SKL_ULX(dev) || IS_KBL_ULX(dev)) {
 			*n_entries = ARRAY_SIZE(skl_y_ddi_translations_edp);
 			return skl_y_ddi_translations_edp;
-		} else {
-			*n_entries = ARRAY_SIZE(skl_y_ddi_translations_dp);
-			return skl_y_ddi_translations_dp;
-		}
-	} else if (IS_SKL_ULT(dev) || IS_KBL_ULT(dev)) {
-		if (dev_priv->edp_low_vswing) {
+		} else if (IS_SKL_ULT(dev) || IS_KBL_ULT(dev)) {
 			*n_entries = ARRAY_SIZE(skl_u_ddi_translations_edp);
 			return skl_u_ddi_translations_edp;
 		} else {
-			*n_entries = ARRAY_SIZE(skl_u_ddi_translations_dp);
-			return skl_u_ddi_translations_dp;
-		}
-	} else {
-		if (dev_priv->edp_low_vswing) {
 			*n_entries = ARRAY_SIZE(skl_ddi_translations_edp);
 			return skl_ddi_translations_edp;
-		} else {
-			*n_entries = ARRAY_SIZE(skl_ddi_translations_dp);
-			return skl_ddi_translations_dp;
 		}
 	}
+
+	return skl_get_buf_trans_dp(dev, n_entries);
 }
 
 static const struct ddi_buf_trans *
-- 
1.7.5.4

