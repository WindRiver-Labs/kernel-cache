From d5964d0d223d5f6b2e10c3784c6c504c6215a041 Mon Sep 17 00:00:00 2001
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Tue, 26 May 2015 07:46:21 +0200
Subject: [PATCH 0426/4706] Revert "drm/i915: Force clean compilation with
 -Werror"

commit 908d759b210effb33d927a8cb6603a16448474e4 upstream

This reverts commit 118182e9d7d5afa0c7c10f568afb46ab78b462e9.

It's causing too much trouble when compile-testing for non-i915 folks.

Cc: Chris Wilson <chris@chris-wilson.co.uk>
Cc: Jani Nikula <jani.nikula@intel.com>
Cc: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
---
 drivers/gpu/drm/i915/Kconfig       |    8 --------
 drivers/gpu/drm/i915/Kconfig.debug |    5 -----
 drivers/gpu/drm/i915/Makefile      |    2 --
 3 files changed, 0 insertions(+), 15 deletions(-)
 delete mode 100644 drivers/gpu/drm/i915/Kconfig.debug

diff --git a/drivers/gpu/drm/i915/Kconfig b/drivers/gpu/drm/i915/Kconfig
index 5e3aa87..74acca9 100644
--- a/drivers/gpu/drm/i915/Kconfig
+++ b/drivers/gpu/drm/i915/Kconfig
@@ -71,11 +71,3 @@ config DRM_I915_PRELIMINARY_HW_SUPPORT
 	  option changes the default for that module option.
 
 	  If in doubt, say "N".
-
-menu "DRM i915 Debugging"
-
-depends on DRM_I915
-
-source drivers/gpu/drm/i915/Kconfig.debug
-
-endmenu
diff --git a/drivers/gpu/drm/i915/Kconfig.debug b/drivers/gpu/drm/i915/Kconfig.debug
deleted file mode 100644
index 070a035..0000000
--- a/drivers/gpu/drm/i915/Kconfig.debug
+++ /dev/null
@@ -1,5 +0,0 @@
-config DRM_I915_WERROR
-	bool "Force GCC to throw an error instead of a warning when compiling"
-	default n
-	---help---
-	  Add -Werror to the build flags for (and only for) i915.ko
diff --git a/drivers/gpu/drm/i915/Makefile b/drivers/gpu/drm/i915/Makefile
index 93d99b7..b7ddf48 100644
--- a/drivers/gpu/drm/i915/Makefile
+++ b/drivers/gpu/drm/i915/Makefile
@@ -2,8 +2,6 @@
 # Makefile for the drm device driver.  This driver provides support for the
 # Direct Rendering Infrastructure (DRI) in XFree86 4.1.0 and higher.
 
-subdir-ccflags-$(CONFIG_DRM_I915_WERROR) := -Werror
-
 # Please keep these build lists sorted!
 
 # core driver code
-- 
1.7.5.4

