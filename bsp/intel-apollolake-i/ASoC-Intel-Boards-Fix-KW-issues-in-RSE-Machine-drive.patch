From 730b7708f9ffd9804c75e992b260e6fdcf209594 Mon Sep 17 00:00:00 2001
From: Pardha Saradhi K <pardha.saradhi.kesapragada@intel.com>
Date: Mon, 21 Mar 2016 17:39:15 +0530
Subject: [PATCH 1912/2508] ASoC: Intel: Boards: Fix KW issues in RSE Machine
 driver

commit d4b17100d0c35c815a4edb9b954a85cecaf17a50 from
https://github.com/01org/linux-apollolake-i

Change-Id: I245893535a752f52683a0a9b17e41acfb7e95d8e
Signed-off-by: Pardha Saradhi K <pardha.saradhi.kesapragada@intel.com>
---
 sound/soc/intel/boards/bxtp_ivi_rse_rt298.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/boards/bxtp_ivi_rse_rt298.c b/sound/soc/intel/boards/bxtp_ivi_rse_rt298.c
index 222d7f5..ea76450 100644
--- a/sound/soc/intel/boards/bxtp_ivi_rse_rt298.c
+++ b/sound/soc/intel/boards/bxtp_ivi_rse_rt298.c
@@ -64,6 +64,10 @@ static int bxtp_ssp0_gpio_init(struct snd_soc_pcm_runtime *rtd)
 	u32 gpio_value2 = 0x44000600;
 
 	gpio_addr = (void *)ioremap_nocache(0xd0c40610, 0x30);
+        if (gpio_addr == NULL) {
+                printk("failed to remap the address for SSP0\n");
+                return(-EIO);
+        }
 
 	memcpy_toio(gpio_addr + 0x8, &gpio_value1, sizeof(gpio_value1));
 	memcpy_toio(gpio_addr + 0x10, &gpio_value2, sizeof(gpio_value2));
@@ -87,6 +91,10 @@ static int bxtp_ssp1_gpio_init(struct snd_soc_pcm_runtime *rtd)
         u32 gpio_value1 = 0x44000400;
 
         gpio_addr = (void *)ioremap_nocache(0xd0c40660, 0x30);
+        if (gpio_addr == NULL) {
+                printk("failed to remap the address for SSP1\n");
+                return(-EIO);
+        }
 
         printk("%p has %#x\n", gpio_addr, *(u32 *)gpio_addr);
 
@@ -113,6 +121,10 @@ static int bxtp_ssp4_gpio_init(struct snd_soc_pcm_runtime *rtd)
         u32 gpio_value2 = 0x44000800;
 
         gpio_addr = (void *)ioremap_nocache(0xd0c705A0, 0x30);
+        if (gpio_addr == NULL) {
+                printk("failed to remap the address for SSP4\n");
+                return(-EIO);
+        }
 
         printk("%p has %#x\n", gpio_addr, *(u32 *)gpio_addr);
 
-- 
1.7.5.4

