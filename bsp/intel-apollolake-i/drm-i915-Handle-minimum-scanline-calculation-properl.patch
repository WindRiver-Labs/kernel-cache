From 3e49ead3648762be78d87974ed7444b27409ae21 Mon Sep 17 00:00:00 2001
From: Matt Roper <matthew.d.roper@intel.com>
Date: Fri, 20 May 2016 09:44:33 -0700
Subject: [PATCH 1445/2508] drm/i915: Handle minimum scanline calculation
 properly for 4 & 8 bpp formats

commit 95a7a154c01e32d35c4ba592787608599a8574f5 from
https://github.com/01org/linux-apollolake-i

Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
---
 drivers/gpu/drm/i915/intel_pm.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_pm.c b/drivers/gpu/drm/i915/intel_pm.c
index 1b28503..b869678 100644
--- a/drivers/gpu/drm/i915/intel_pm.c
+++ b/drivers/gpu/drm/i915/intel_pm.c
@@ -3131,6 +3131,12 @@ skl_ddb_min_alloc(const struct drm_plane_state *pstate,
 		case 2:
 			min_scanlines = 16;
 			break;
+		case 4:
+			min_scanlines = 8;
+			break;
+		case 8:
+			min_scanlines = 4;
+			break;
 		default:
 			WARN(1, "Unsupported pixel depth %u for rotation",
 			     plane_bpp);
-- 
1.7.5.4

