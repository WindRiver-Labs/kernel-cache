From e7304ba63d135ba96f231861c798112515a1c378 Mon Sep 17 00:00:00 2001
From: Bard Liao <bardliao@realtek.com>
Date: Tue, 25 Aug 2015 10:54:48 +0800
Subject: [PATCH 1765/2508] ASoC: rt298: K4.1 backport fix

commit 22afefe9c7b53c0967e3cc5136f09e52995fbdee from
https://github.com/01org/linux-apollolake-i

This patch fixes couple of lines of code,
since required APIs are not available in
kernel 4.1

Change-Id: I21cb7f0fc0a28ef3674015f1b4d2bb4f6ff2d7d7
Signed-off-by: Bard Liao <bardliao@realtek.com>
Signed-off-by: Ramesh Babu <ramesh.babu@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/7507
---
 sound/soc/codecs/rt298.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/sound/soc/codecs/rt298.c b/sound/soc/codecs/rt298.c
index 6ff68a3..1aaf30e 100644
--- a/sound/soc/codecs/rt298.c
+++ b/sound/soc/codecs/rt298.c
@@ -230,7 +230,7 @@ static int rt298_jack_detect(struct rt298_priv *rt298, bool *hp, bool *mic)
 	if (!rt298->codec)
 		return -EINVAL;
 
-	dapm = snd_soc_codec_get_dapm(rt298->codec);
+	dapm = &rt298->codec->dapm;
 
 	if (rt298->pdata.cbj_en) {
 		regmap_read(rt298->regmap, RT298_GET_HP_SENSE, &buf);
@@ -925,7 +925,7 @@ static int rt298_set_bias_level(struct snd_soc_codec *codec,
 	switch (level) {
 	case SND_SOC_BIAS_PREPARE:
 		if (SND_SOC_BIAS_STANDBY ==
-			snd_soc_codec_get_bias_level(codec)) {
+			codec->dapm.bias_level) {
 			snd_soc_write(codec,
 				RT298_SET_AUDIO_POWER, AC_PWRST_D0);
 			snd_soc_update_bits(codec, 0x0d, 0x200, 0x200);
-- 
1.7.5.4

