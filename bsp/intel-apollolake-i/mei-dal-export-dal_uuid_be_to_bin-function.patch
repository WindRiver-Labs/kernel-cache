From 677bc296f4af24a39f4a08834802e96944043e4f Mon Sep 17 00:00:00 2001
From: Yael Samet <yael.samet@intel.com>
Date: Mon, 16 Jan 2017 13:54:06 +0200
Subject: [PATCH 4662/4706] mei: dal: export dal_uuid_be_to_bin function

commit bb607715cef816d9c443c3167d79a7968f08106c from
git://git.yoctoproject.org/linux-yocto-4.1

Export dal_uuid_be_to_bin, which convert uuid string to bin.
The allowed formats are either standard format or hypenless format.

Change-Id: I15328b16cdd2903400c6faf0ebd3dcf3e0118cd8
Signed-off-by: Yael Samet <yael.samet@intel.com>
---
 drivers/misc/mei/dal/bhp_impl_ta.c |    6 ++++--
 include/linux/dal.h                |    2 ++
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/drivers/misc/mei/dal/bhp_impl_ta.c b/drivers/misc/mei/dal/bhp_impl_ta.c
index 4cf446a..1ec12c7 100644
--- a/drivers/misc/mei/dal/bhp_impl_ta.c
+++ b/drivers/misc/mei/dal/bhp_impl_ta.c
@@ -69,6 +69,7 @@
 #include <linux/string.h>
 #include <linux/uuid.h>
 #include <linux/ctype.h>
+#include <linux/dal.h>
 
 #include "bh_errcode.h"
 #include "bhp_impl.h"
@@ -98,7 +99,7 @@ static void uuid_normalize_hyphenless(const char *uuid_hl, char *uuid_str)
 	uuid_str[i] = '\0';
 }
 
-static int __uuid_be_to_bin(const char *uuid_str, uuid_be *uuid)
+int dal_uuid_be_to_bin(const char *uuid_str, uuid_be *uuid)
 {
 	char __uuid_str[UUID_STRING_LEN + 1];
 
@@ -109,6 +110,7 @@ static int __uuid_be_to_bin(const char *uuid_str, uuid_be *uuid)
 
 	return uuid_be_to_bin(uuid_str, uuid);
 }
+EXPORT_SYMBOL(dal_uuid_be_to_bin);
 
 /*
  * 4 bytes array to identify BH headers
@@ -454,7 +456,7 @@ int bhp_open_ta_session(u64 *session, const char *app_id,
 	if (!init_buffer && init_len != 0)
 		return -EINVAL;
 
-	if (__uuid_be_to_bin(app_id, &ta_id))
+	if (dal_uuid_be_to_bin(app_id, &ta_id))
 		return -EINVAL;
 
 	*session = 0;
diff --git a/include/linux/dal.h b/include/linux/dal.h
index 5d0833c..35c18a8 100644
--- a/include/linux/dal.h
+++ b/include/linux/dal.h
@@ -152,4 +152,6 @@ int dal_set_ta_exclusive_access(uuid_be ta_id);
 
 int dal_unset_ta_exclusive_access(uuid_be ta_id);
 
+int dal_uuid_be_to_bin(const char *uuid_str, uuid_be *uuid);
+
 #endif /* _DAL_H_ */
-- 
1.7.5.4

