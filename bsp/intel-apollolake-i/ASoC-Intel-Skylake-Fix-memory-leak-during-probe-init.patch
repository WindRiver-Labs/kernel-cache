From b7a2d52f6a0ee5b6c490e50fe7a5f5e3b6cbe79b Mon Sep 17 00:00:00 2001
From: G Kranthi <gudishax.kranthikumar@intel.com>
Date: Thu, 28 Apr 2016 18:45:26 +0530
Subject: [PATCH 2055/2508] ASoC: Intel: Skylake: Fix memory leak during probe
 init instance

commit 1ec16128e095c464eecb621bbb9d1e15f5bda442 from
https://github.com/01org/linux-apollolake-i

param_data variable is allocated during set module format of init
instance is not getting freed and hence can cause a memory leak.
So free it up.

Change-Id: I5411158bac950d97d50660d8968e2f2b0a41eb1f
Signed-off-by: G Kranthi <gudishax.kranthikumar@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/9922
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Jayanti, Satya Charitardha <satya.charitardha.jayanti@intel.com>
---
 sound/soc/intel/skylake/skl-messages.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-messages.c b/sound/soc/intel/skylake/skl-messages.c
index 030dda6..4d73834 100644
--- a/sound/soc/intel/skylake/skl-messages.c
+++ b/sound/soc/intel/skylake/skl-messages.c
@@ -987,7 +987,7 @@ int skl_init_probe_module(struct skl_sst *ctx,
 		return ret;
 	}
 	mconfig->m_state = SKL_MODULE_INIT_DONE;
-
+	kfree(param_data);
 	return ret;
 }
 
-- 
1.7.5.4

