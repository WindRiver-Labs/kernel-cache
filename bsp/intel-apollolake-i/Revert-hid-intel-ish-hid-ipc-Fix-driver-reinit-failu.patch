From 9b7d9c342d2461a90059f69a589b227271bbe885 Mon Sep 17 00:00:00 2001
From: "Ooi, Joyce" <joyce.ooi@intel.com>
Date: Fri, 2 Dec 2016 10:57:41 +0800
Subject: [PATCH 4557/4706] Revert "hid: intel-ish-hid: ipc: Fix driver reinit
 failure"

commit 26ee52adddffa2afc81e4c2fb1995d0dbbe311d9 from
git://git.yoctoproject.org/linux-yocto-4.1

This reverts commit 70b638c23b57 ("hid: intel-ish-hid: ipc: Fix driver
reinit failure").
Patches related to ISH drivers are reverted to pick up upstream ISH
drivers.

Signed-off-by: Ooi, Joyce <joyce.ooi@intel.com>
---
 drivers/hid/intel-ish-hid/ipc/ipc.c |   16 +---------------
 1 files changed, 1 insertions(+), 15 deletions(-)

diff --git a/drivers/hid/intel-ish-hid/ipc/ipc.c b/drivers/hid/intel-ish-hid/ipc/ipc.c
index dff0ea0..8f933cb 100644
--- a/drivers/hid/intel-ish-hid/ipc/ipc.c
+++ b/drivers/hid/intel-ish-hid/ipc/ipc.c
@@ -741,22 +741,8 @@ struct ishtp_device *ish_dev_init(struct pci_dev *pdev)
 	return dev;
 }
 
-void ish_device_disable(struct ishtp_device *dev)
+void	ish_device_disable(struct ishtp_device *dev)
 {
-	struct pci_dev *pdev = dev->pdev;
-
-	if (!pdev)
-		return;
-
-	/* Must disable dma before disable ish device */
-	if (ish_disable_dma(dev)) {
-		dev_err(&pdev->dev,
-			"Can't disable - stuck with DMA in-progress\n");
-		return;
-	}
-
-	pci_set_power_state(pdev, PCI_D3hot);
-
 	dev->dev_state = ISHTP_DEV_DISABLED;
 	ish_clr_host_rdy(dev);
 }
-- 
1.7.5.4

