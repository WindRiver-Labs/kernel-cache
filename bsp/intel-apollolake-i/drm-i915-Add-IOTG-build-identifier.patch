From 4cb0dd3d260e137e8a7c1c9ece347b28038c2242 Mon Sep 17 00:00:00 2001
From: Matt Roper <matthew.d.roper@intel.com>
Date: Mon, 16 May 2016 15:25:51 -0700
Subject: [PATCH 1438/2508] drm/i915: Add IOTG build identifier

commit f7c5022b6313384f01675f23a08410fadd621fac from
https://github.com/01org/linux-apollolake-i

A small printout at startup will help us recognize what driver is
actually running in bug reports so we can make sure the proper code was
integrated into the OS image.

Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
(cherry picked from commit 0ba8f5da29f300b94f47ff7d553b1a6ad953df0b)
Signed-off-by: Matt Roper <matthew.d.roper@intel.com>

Conflicts:
	drivers/gpu/drm/i915/i915_dma.c
---
 drivers/gpu/drm/i915/i915_dma.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_dma.c b/drivers/gpu/drm/i915/i915_dma.c
index 1305483..50db6a4 100644
--- a/drivers/gpu/drm/i915/i915_dma.c
+++ b/drivers/gpu/drm/i915/i915_dma.c
@@ -50,6 +50,7 @@
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 #include <linux/oom.h>
+#include "iotg_build.h"
 
 static unsigned int i915_load_fail_count;
 
@@ -1443,7 +1444,11 @@ int i915_driver_load(struct drm_device *dev, unsigned long flags)
 
 	dev_priv->profile.driver_load = sched_clock() - start_tm;
 
+#ifndef IOTG_BUILD_ID
+#define IOTG_BUILD_ID "unknown"
+#endif
 	printk(KERN_INFO "IOTG i915 forklift 2016-03-25\n");
+	printk(KERN_INFO "IOTG i915 build " IOTG_BUILD_ID "\n");
 
 	return 0;
 
-- 
1.7.5.4

