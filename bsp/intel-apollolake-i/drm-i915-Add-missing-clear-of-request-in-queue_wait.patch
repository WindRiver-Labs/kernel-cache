From f9b210b19a7dbef7525315746818c5c54e52aca2 Mon Sep 17 00:00:00 2001
From: Jeff McGee <jeff.mcgee@intel.com>
Date: Fri, 8 Apr 2016 13:44:40 -0700
Subject: [PATCH 1337/2508] drm/i915: Add missing clear of request in
 queue_wait

commit b6e16d1fcb9da42f2f0f2733b640f4d151d13560 from
https://github.com/01org/linux-apollolake-i

Fix suggested by John Harrison.

Signed-off-by: Jeff McGee <jeff.mcgee@intel.com>
Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
---
 drivers/gpu/drm/i915/i915_scheduler.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_scheduler.c b/drivers/gpu/drm/i915/i915_scheduler.c
index f74feef..2f4fd4f 100644
--- a/drivers/gpu/drm/i915/i915_scheduler.c
+++ b/drivers/gpu/drm/i915/i915_scheduler.c
@@ -1196,6 +1196,7 @@ bool i915_scheduler_file_queue_wait(struct drm_file *file)
 		 * still be correct and that case is not rare enough to add
 		 * jiffy based inter-engine checks.
 		 */
+		req = NULL;
 		for_each_engine(engine, dev_priv) {
 			for_each_scheduler_node(node, engine->id) {
 				if (I915_SQS_IS_COMPLETE(node))
-- 
1.7.5.4

