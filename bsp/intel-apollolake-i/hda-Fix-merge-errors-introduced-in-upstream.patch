From f651921e4b5c7ee5da7eea958a1762fe20292ef3 Mon Sep 17 00:00:00 2001
From: "Sodhi, VunnyX" <vunnyx.sodhi@intel.com>
Date: Tue, 27 Oct 2015 11:51:32 +0530
Subject: [PATCH 1605/2508] hda: Fix merge errors introduced in upstream

commit b6370598668cb85373184c89a67da42ed871bd94 from
https://github.com/01org/linux-apollolake-i

Resolve the non-trivial conflict due to the hdac regmap API changes.
Upstream Commit ID: 8654844cf51d434dad5d4d9f48dc99d1ac89aad7

Change-Id: I25db8362b7e8e72cb3ca1e119151c649f074ada8
Signed-off-by: Takashi Iwai <tiwai@suse.de>
---
 sound/pci/hda/hda_codec.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/sound/pci/hda/hda_codec.c b/sound/pci/hda/hda_codec.c
index b6d5b5e..ca37446 100644
--- a/sound/pci/hda/hda_codec.c
+++ b/sound/pci/hda/hda_codec.c
@@ -436,8 +436,9 @@ static unsigned int get_num_devices(struct hda_codec *codec, hda_nid_t nid)
 	    get_wcaps_type(wcaps) != AC_WID_PIN)
 		return 0;
 
-	if (_snd_hdac_read_parm(&codec->core, nid, AC_PAR_DEVLIST_LEN, &parm))
-		return 0; /* error */
+	parm = snd_hdac_read_parm_uncached(&codec->core, nid, AC_PAR_DEVLIST_LEN);
+	if (parm == -1)
+		parm = 0;
 	return parm & AC_DEV_LIST_LEN_MASK;
 }
 
-- 
1.7.5.4

