From 49353e20e61f0463e65d3e7e5d1eaf805861833a Mon Sep 17 00:00:00 2001
From: Uma Shankar <uma.shankar@intel.com>
Date: Tue, 20 Dec 2016 10:24:26 -0800
Subject: [PATCH 4455/4706] drm/i915: Check for platform specific GPIO config

commit 677552e1c96c6095cb4ae44889ab9b45e92bcf85 from
git://git.yoctoproject.org/linux-yocto-4.1

Panel GPIO control should be done based on platform. Add a check
to restrict BYT specific GPIO confirguration for only BYT. Avoid
the same for BXT.

Signed-off-by: Uma Shankar <uma.shankar@intel.com>
Signed-off-by: Bob Paauwe <bob.j.paauwe@intel.com>
Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
---
 drivers/gpu/drm/i915/intel_dsi.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_dsi.c b/drivers/gpu/drm/i915/intel_dsi.c
index adb9fd6..bc871da 100644
--- a/drivers/gpu/drm/i915/intel_dsi.c
+++ b/drivers/gpu/drm/i915/intel_dsi.c
@@ -1584,7 +1584,8 @@ void intel_dsi_init(struct drm_device *dev)
 	 * In case of BYT with CRC PMIC, we need to use GPIO for
 	 * Panel control.
 	 */
-	if (dev_priv->vbt.dsi.config->pwm_blc == PPS_BLC_PMIC) {
+	if (!IS_BROXTON(dev) &&
+		(dev_priv->vbt.dsi.config->pwm_blc == PPS_BLC_PMIC)) {
 		intel_dsi->gpio_panel =
 			gpiod_get(dev->dev, "panel", GPIOD_OUT_HIGH);
 
-- 
1.7.5.4

