From a351ed4ba4cba428954792b6eb4592d482efc97a Mon Sep 17 00:00:00 2001
From: Ramesh Babu <ramesh.babu@intel.com>
Date: Mon, 13 Jun 2016 19:03:38 +0530
Subject: [PATCH 1993/2508] ALSA: hda: remove duplicate code for get_spibfifo

commit 6a2b5e44304ead8169c0490c8f41460d8305b531 from
https://github.com/01org/linux-apollolake-i

While backporting to kernel 4.1, get_spibfifo
functionality got added twice.
This patch removes the duplicate code.

Change-Id: I991a27e627be785a339739f3e98b9b4e872e11c9
Signed-off-by: Ramesh Babu <ramesh.babu@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/9593
---
 include/sound/hdaudio_ext.h     |    3 +--
 sound/hda/ext/hdac_ext_stream.c |   21 ---------------------
 2 files changed, 1 insertions(+), 23 deletions(-)

diff --git a/include/sound/hdaudio_ext.h b/include/sound/hdaudio_ext.h
index 8a9a757..a83a19b 100644
--- a/include/sound/hdaudio_ext.h
+++ b/include/sound/hdaudio_ext.h
@@ -125,10 +125,9 @@ void snd_hdac_ext_stop_streams(struct hdac_ext_bus *sbus);
 
 int snd_hdac_ext_stream_set_spib(struct hdac_ext_bus *ebus,
 				 struct hdac_ext_stream *stream, u32 value);
-int snd_hdac_ext_stream_spbmaxfifo(struct hdac_ext_bus *ebus,
-				 struct hdac_ext_stream *stream);
 int snd_hdac_ext_stream_get_spbmaxfifo(struct hdac_ext_bus *ebus,
 				 struct hdac_ext_stream *stream);
+
 void snd_hdac_ext_stream_drsm_enable(struct hdac_ext_bus *ebus,
 				bool enable, int index);
 int snd_hdac_ext_stream_set_dpibr(struct hdac_ext_bus *ebus,
diff --git a/sound/hda/ext/hdac_ext_stream.c b/sound/hda/ext/hdac_ext_stream.c
index fea9fe9..26f4b8f 100644
--- a/sound/hda/ext/hdac_ext_stream.c
+++ b/sound/hda/ext/hdac_ext_stream.c
@@ -466,27 +466,6 @@ int snd_hdac_ext_stream_set_spib(struct hdac_ext_bus *ebus,
 EXPORT_SYMBOL_GPL(snd_hdac_ext_stream_set_spib);
 
 /**
- * snd_hdac_ext_stream_spbmaxfifo - sets the spib value of a stream
- * @ebus: HD-audio ext core bus
- * @stream: hdac_ext_stream
- *
- * Return maxfifo for the stream
- */
-int snd_hdac_ext_stream_spbmaxfifo(struct hdac_ext_bus *ebus,
-				 struct hdac_ext_stream *stream)
-{
-	struct hdac_bus *bus = &ebus->bus;
-
-	if (!ebus->spbcap) {
-		dev_err(bus->dev, "Address of SPB capability is NULL");
-		return -EINVAL;
-	}
-
-	return readl(stream->fifo_addr);
-}
-EXPORT_SYMBOL_GPL(snd_hdac_ext_stream_spbmaxfifo);
-
-/**
  * snd_hdac_ext_stream_get_spbmaxfifo - gets the spib value of a stream
  * @ebus: HD-audio ext core bus
  * @stream: hdac_ext_stream
-- 
1.7.5.4

