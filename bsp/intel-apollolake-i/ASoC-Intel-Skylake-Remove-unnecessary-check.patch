From 4b86b5d7f018eac3f7f96c51e9b91a939b73b53e Mon Sep 17 00:00:00 2001
From: Ramesh Babu <ramesh.babu@intel.com>
Date: Fri, 9 Oct 2015 02:08:23 +0530
Subject: [PATCH 1760/2508] ASoC: Intel: Skylake: Remove unnecessary check

commit 71f1eb07a891ddf29e8195fffb9353efa3970b3e from
https://github.com/01org/linux-apollolake-i

Remove wrong check for SKL PCI ID while
checking for appropriate machine driver.

Change-Id: I5bde325a613886043e5823f23d0182ced6c33d30
Signed-off-by: Ramesh Babu <ramesh.babu@intel.com>
---
 sound/soc/intel/skylake/skl.c |   11 ++---------
 1 files changed, 2 insertions(+), 9 deletions(-)

diff --git a/sound/soc/intel/skylake/skl.c b/sound/soc/intel/skylake/skl.c
index 2328724..234a964 100644
--- a/sound/soc/intel/skylake/skl.c
+++ b/sound/soc/intel/skylake/skl.c
@@ -286,7 +286,6 @@ static int skl_machine_device_register(struct skl *skl, void *driver_data)
 	struct hdac_bus *bus = ebus_to_hbus(&skl->ebus);
 	struct platform_device *pdev;
 	struct sst_machines *mach = driver_data;
-	char *mach_name;
 	int ret;
 
 	mach = sst_acpi_find_machine(mach);
@@ -295,14 +294,8 @@ static int skl_machine_device_register(struct skl *skl, void *driver_data)
 		return -ENODEV;
 	}
 
-	if (skl->pci->device == 0x9d70) {
-		mach_name = mach->machine;
-	} else {
-		dev_err(bus->dev, "invalid pci id %s\n", __func__);
-		return -EINVAL;
-	}
-
-	pdev = platform_device_alloc(mach_name, -1);
+	dev_dbg(bus->dev, "Machine driver found:%s\n", mach->machine);
+	pdev = platform_device_alloc(mach->machine, -1);
 	if (pdev == NULL) {
 		dev_err(bus->dev, "platform device alloc failed\n");
 		return -EIO;
-- 
1.7.5.4

