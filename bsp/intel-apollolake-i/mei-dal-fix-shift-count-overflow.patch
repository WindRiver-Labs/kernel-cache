From 5965afd0a5ed4690494b5e43bc6b62efc7c82f4f Mon Sep 17 00:00:00 2001
From: Tomas Winkler <tomas.winkler@intel.com>
Date: Thu, 27 Oct 2016 17:21:40 +0300
Subject: [PATCH 4632/4706] mei: dal: fix shift count overflow

commit 434b224bea9301679af2c8244cadf1e432c71fc2 from
git://git.yoctoproject.org/linux-yocto-4.1

Fix 32 bit compilation issue.

drivers/misc/mei/dal/bhp_impl.c:68:30: note: in expansion of macro
'MSG_SEQ_START_NUMBER'
drivers/misc/mei/dal/bhp_impl.h:115:36: warning: left shift count >=
width of type [-Wshift-count-overflow]

Change-Id: Ife38218dcc3d74981d233751e07191cb8a68f8a6
Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
---
 drivers/misc/mei/dal/bhp_impl.h |    8 +++++---
 1 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/misc/mei/dal/bhp_impl.h b/drivers/misc/mei/dal/bhp_impl.h
index 01ff613..25df58d 100644
--- a/drivers/misc/mei/dal/bhp_impl.h
+++ b/drivers/misc/mei/dal/bhp_impl.h
@@ -60,12 +60,14 @@
 #ifndef _BHP_IMPL_H_
 #define _BHP_IMPL_H_
 
+#include <linux/list.h>
+#include <linux/slab.h>
+#include <linux/bitops.h>
+
 #include "bh_types.h"
 #include "bhp_exp.h"
 #include "bh_acp_exp.h"
 #include "bhp_heci.h"
-#include <linux/list.h>
-#include <linux/slab.h>
 
 /** struct bh_response_record
  *   represents a beihai response record
@@ -112,7 +114,7 @@ struct bh_connection_item {
 #define CMDBUF_SIZE 100
 
 /* TODO: review to avoid seq conflicts */
-# define MSG_SEQ_START_NUMBER (1UL << 32)
+# define MSG_SEQ_START_NUMBER BIT_ULL(32)
 
 /**
  * enum bhp_connection_index -
-- 
1.7.5.4

