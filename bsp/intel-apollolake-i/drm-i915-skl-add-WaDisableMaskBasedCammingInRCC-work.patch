From 720eaa444c594c1cd0750c944ffe2d566e9feeed Mon Sep 17 00:00:00 2001
From: Ben Widawsky <benjamin.widawsky@intel.com>
Date: Wed, 11 Mar 2015 11:23:12 +0200
Subject: [PATCH 0137/4706] drm/i915/skl: add WaDisableMaskBasedCammingInRCC
 workaround

commit 8d09c8123db62859886bbbc504a56ff5d9d9e8cd upstream

Signed-off-by: Ben Widawsky <ben@bwidawsk.net>
Signed-off-by: Imre Deak <imre.deak@intel.com>
Reviewed-by: Nick Hoath <nicholas.hoath@intel.com>
Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
---
 drivers/gpu/drm/i915/intel_ringbuffer.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_ringbuffer.c b/drivers/gpu/drm/i915/intel_ringbuffer.c
index 5f61672..6f53af5 100644
--- a/drivers/gpu/drm/i915/intel_ringbuffer.c
+++ b/drivers/gpu/drm/i915/intel_ringbuffer.c
@@ -966,8 +966,8 @@ static int gen9_init_workarounds(struct intel_engine_cs *ring)
 	 * FIXME: don't apply the following on BXT for stepping C. On BXT A0
 	 * the flag reads back as 0.
 	 */
-	/* WaDisableMaskBasedCammingInRCC:bxtA */
-	if (IS_BROXTON(dev))
+	/* WaDisableMaskBasedCammingInRCC:sklC,bxtA */
+	if (INTEL_REVID(dev) == SKL_REVID_C0 || IS_BROXTON(dev))
 		WA_SET_BIT_MASKED(SLICE_ECO_CHICKEN0,
 				  PIXEL_MASK_CAMMING_DISABLE);
 
-- 
1.7.5.4

