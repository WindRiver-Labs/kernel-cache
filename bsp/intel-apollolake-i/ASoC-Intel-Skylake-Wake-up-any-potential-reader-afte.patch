From bb0e361b21a3e24b7efafc5ec53c5cf85d3a6a87 Mon Sep 17 00:00:00 2001
From: "Panwar, Ashish" <ashish.panwar@intel.com>
Date: Fri, 4 Mar 2016 11:14:28 +0530
Subject: [PATCH 1895/2508] ASoC: Intel: Skylake: Wake up any potential reader
 after copying log data

commit af16cdaf641ec7a4ce7c7391934e2a4f80b79b99 from
https://github.com/01org/linux-apollolake-i

Change-Id: I0f9587d0c7f6bdd83b5b0cd62afc51f767cffb92
Signed-off-by: Panwar, Ashish <ashish.panwar@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/8332
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/soc/intel/skylake/skl-fwlog.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-fwlog.c b/sound/soc/intel/skylake/skl-fwlog.c
index 60c9b62..8346422 100644
--- a/sound/soc/intel/skylake/skl-fwlog.c
+++ b/sound/soc/intel/skylake/skl-fwlog.c
@@ -121,6 +121,7 @@ void skl_dsp_write_log(struct sst_dsp *sst, void __iomem *src, int core,
 		data++;
 	}
 	buff->total_avail += count;
+	wake_up(&buff->stream->runtime->sleep);
 }
 
 int skl_dsp_copy_log_user(struct sst_dsp *sst, int core,
-- 
1.7.5.4

