From 79d7a3ffc56768ccaf0ad952de1c403e54c493a7 Mon Sep 17 00:00:00 2001
From: Divya Prakash <divya1.prakash@intel.com>
Date: Tue, 8 Mar 2016 08:07:19 +0530
Subject: [PATCH 1903/2508] ASoC: core: compress: Add trigger dai op

commit 58b3babf966a0a65765cb6924e24389e94201e01 from
https://github.com/01org/linux-apollolake-i

Adding the trigger dai op to start the
compress stream

Change-Id: Iead18611cf71d3a703f3d8dd0a1b950cf0b22b23
Signed-off-by: Divya Prakash <divya1.prakash@intel.com>
Signed-off-by: Panwar, Ashish <ashish.panwar@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/8354
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/soc/soc-compress.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/sound/soc/soc-compress.c b/sound/soc/soc-compress.c
index 5743721..5ebbe4e 100644
--- a/sound/soc/soc-compress.c
+++ b/sound/soc/soc-compress.c
@@ -316,6 +316,7 @@ static int soc_compr_trigger(struct snd_compr_stream *cstream, int cmd)
 
 	struct snd_soc_pcm_runtime *rtd = cstream->private_data;
 	struct snd_soc_platform *platform = rtd->platform;
+	struct snd_soc_dai *cpu_dai = rtd->cpu_dai;
 	struct snd_soc_dai *codec_dai = rtd->codec_dai;
 	int ret = 0;
 
@@ -327,6 +328,9 @@ static int soc_compr_trigger(struct snd_compr_stream *cstream, int cmd)
 			goto out;
 	}
 
+	if (cpu_dai->driver->cops && cpu_dai->driver->cops->trigger)
+			cpu_dai->driver->cops->trigger(cstream, cmd, cpu_dai);
+
 	switch (cmd) {
 	case SNDRV_PCM_TRIGGER_START:
 		snd_soc_dai_digital_mute(codec_dai, 0, cstream->direction);
-- 
1.7.5.4

