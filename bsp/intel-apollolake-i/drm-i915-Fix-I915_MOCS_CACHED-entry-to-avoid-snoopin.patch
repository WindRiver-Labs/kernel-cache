From e45b9c2f6f73861406d7c34e7861c18de1a98b6c Mon Sep 17 00:00:00 2001
From: Matt Roper <matthew.d.roper@intel.com>
Date: Thu, 15 Dec 2016 10:50:08 -0800
Subject: [PATCH 4391/4706] drm/i915: Fix I915_MOCS_CACHED entry to avoid
 snooping

commit e9d5c444a0145a1cc827ebf3b775f55bd7a976ba from
git://git.yoctoproject.org/linux-yocto-4.1

This entry should be UC instead of WB to avoid snooping.  This brings
the table inline with the upstream changes made in

        commit 1542f5d90a16375201f24c8a06e7b6637f054218
        Author: Imre Deak <imre.deak@intel.com>
        Date:   Fri Jul 1 16:40:05 2016 +0300

            drm/i915/bxt: Fix inadvertent CPU snooping due to incorrect MOCS config

Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
---
 drivers/gpu/drm/i915/intel_mocs_gmm_table.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_mocs_gmm_table.c b/drivers/gpu/drm/i915/intel_mocs_gmm_table.c
index 3939448..862c119 100644
--- a/drivers/gpu/drm/i915/intel_mocs_gmm_table.c
+++ b/drivers/gpu/drm/i915/intel_mocs_gmm_table.c
@@ -44,7 +44,7 @@ static const struct drm_i915_mocs_entry gen_9_mocs_table[] = {
 static const struct drm_i915_mocs_entry broxton_mocs_table[] = {
 	{0x00000009, 0x0010}, /* ED_UC LLC/eLLC EDSCC:0 L3SCC:0 L3_UC */
 	{0x00000038, 0x0030}, /* ED_PTE LLC/eLLC LRU_L EDSCC:0 L3SCC:0 L3_WB */
-	{0x0000003b, 0x0030}, /* ED_WB LLC/eLLC LRU_L EDSCC:0 L3SCC:0 L3_WB */
+	{0x00000039, 0x0030}, /* ED_UC LLC/eLLC LRU_L EDSCC:0 L3SCC:0 L3_WB */
 	{0x00000005, 0x0010}, /* ED_UC LLC EDSCC:0 L3SCC:0 L3_UC */
 	{0x00000005, 0x0030}, /* ED_UC LLC EDSCC:0 L3SCC:0 L3_WB */
 };
-- 
1.7.5.4

