From 98700f3d6a3b153830b92fda3da8616b05cb21ee Mon Sep 17 00:00:00 2001
From: "Panwar, Ashish" <ashish.panwar@intel.com>
Date: Wed, 23 Mar 2016 11:15:33 +0530
Subject: [PATCH 1918/2508] ASoC: Intel: Skylake: Code cleanup for logging.

commit ac7ecdb76ce3cec46b978848049b784ac716b831 from
https://github.com/01org/linux-apollolake-i

Removed an unnecessary function.

Change-Id: I1b590cd59067c6efa8122c5e0e5f2ffb889e2d95
Signed-off-by: Panwar, Ashish <ashish.panwar@intel.com>
---
 sound/soc/intel/skylake/skl-pcm.c |   18 +++++++-----------
 1 files changed, 7 insertions(+), 11 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-pcm.c b/sound/soc/intel/skylake/skl-pcm.c
index 638ffa0..80f74ae 100644
--- a/sound/soc/intel/skylake/skl-pcm.c
+++ b/sound/soc/intel/skylake/skl-pcm.c
@@ -574,14 +574,6 @@ static int skl_link_hw_free(struct snd_pcm_substream *substream,
 	return 0;
 }
 
-static bool skl_is_core_valid(int core)
-{
-	if (core != INT_MIN)
-		return true;
-	else
-		return false;
-}
-
 static int skl_get_compr_core(struct snd_compr_stream *stream)
 {
 	struct snd_soc_pcm_runtime *rtd = stream->private_data;
@@ -597,6 +589,10 @@ static int skl_get_compr_core(struct snd_compr_stream *stream)
 
 static int skl_is_logging_core(int core)
 {
+	/*
+	 * disabled on core 2 and 3 for cnl for now.
+	 * will be added when LogState struct is fixed in fw.
+	 */
 	if (core == 0 || core == 1)
 		return 1;
 	else
@@ -625,7 +621,7 @@ static int skl_trace_compr_set_params(struct snd_compr_stream *stream,
 	int size = params->buffer.fragment_size * params->buffer.fragments;
 	int core = skl_get_compr_core(stream);
 
-	if (!skl_is_core_valid(core))
+	if (!skl_is_logging_core(core))
 		return -EINVAL;
 
 	size = size / sizeof(u32);
@@ -660,7 +656,7 @@ static int skl_trace_compr_tstamp(struct snd_compr_stream *stream,
 	struct sst_dsp *sst = skl_sst->dsp;
 	int core = skl_get_compr_core(stream);
 
-	if (!skl_is_core_valid(core))
+	if (!skl_is_logging_core(core))
 		return -EINVAL;
 
 	tstamp->copied_total = skl_dsp_log_avail(sst, core);
@@ -689,7 +685,7 @@ static int skl_trace_compr_free(struct snd_compr_stream *stream,
 	int core = skl_get_compr_core(stream);
 	int is_enabled = sst->trace_wind.flags & BIT(core);
 
-	if (!skl_is_core_valid(core))
+	if (!skl_is_logging_core(core))
 		return -EINVAL;
 	if (is_enabled) {
 		sst->trace_wind.flags &= ~BIT(core);
-- 
1.7.5.4

