From 2758aec2ddcf840ab4821419d044ce5e6a419a0b Mon Sep 17 00:00:00 2001
From: "Pawse, GuruprasadX" <guruprasadx.pawse@intel.com>
Date: Fri, 12 Feb 2016 15:53:13 +0530
Subject: [PATCH 1874/2508] ASoC: Intel: Add DMIC Backend-Backend link

commit beb9dfa2058051dad7725955a30ab1f79b5f7892 from
https://github.com/01org/linux-apollolake-i

This patch adds BE-BE link for DMIC01 and DMIC23

Change-Id: I5eaaf9ce7800b13b9667fdf707d5fa8d54dd597b
Tracked-On: https://jira01.devtools.intel.com/browse/OAM-16708
Signed-off-by: Sodhi <vunnyx.sodhi@intel.com>
Signed-off-by: Pawse, GuruprasadX <guruprasadx.pawse@intel.com>
Reviewed-on: https://android.intel.com:443/469794
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/8258
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/soc/intel/boards/mrgfld_dpcm_florida.c |   62 ++++++++++++++++++++++++++
 1 files changed, 62 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/boards/mrgfld_dpcm_florida.c b/sound/soc/intel/boards/mrgfld_dpcm_florida.c
index 56a6d6d..dc11561 100644
--- a/sound/soc/intel/boards/mrgfld_dpcm_florida.c
+++ b/sound/soc/intel/boards/mrgfld_dpcm_florida.c
@@ -110,6 +110,24 @@ static const struct snd_soc_pcm_stream bxtn_florida_dai_params_bt[] = {
 	},
 };
 
+static const struct snd_soc_pcm_stream bxtn_florida_dai_params_dmic01 = {
+	.stream_name = "dmic01",
+	.formats = SNDRV_PCM_FMTBIT_S16_LE,
+	.rate_min = 48000,
+	.rate_max = 48000,
+	.channels_min = 2,
+	.channels_max = 2,
+};
+
+static const struct snd_soc_pcm_stream bxtn_florida_dai_params_dmic23 = {
+	.stream_name = "dmic23",
+	.formats = SNDRV_PCM_FMTBIT_S16_LE,
+	.rate_min = 48000,
+	.rate_max = 48000,
+	.channels_min = 2,
+	.channels_max = 2,
+};
+
 /* set_osc_clk0-	enable/disables the osc clock0
  * addr:		address of the register to write to
  * enable:		bool to enable or disable the clock
@@ -639,6 +657,28 @@ struct snd_soc_dai_link mrgfld_florida_msic_dailink[] = {
 	},
 
 	{
+		.name = "Bxtn DMIC01-Loop Port",
+		.stream_name = "Bxtn DMIC01-Loop",
+		.cpu_dai_name = "DMIC01 Pin",
+		.platform_name = "0000:00:0e.0",
+		.codec_dai_name = "dmic-hifi",
+		.codec_name = "dmic-codec",
+		.params = &bxtn_florida_dai_params_dmic01,
+		.dsp_loopback = true,
+	},
+
+	{
+		.name = "Bxtn DMIC23-Loop Port",
+		.stream_name = "Bxtn DMIC23-Loop",
+		.cpu_dai_name = "DMIC23 Pin",
+		.platform_name = "0000:00:0e.0",
+		.codec_dai_name = "dmic-hifi",
+		.codec_name = "dmic-codec",
+		.params = &bxtn_florida_dai_params_dmic23,
+		.dsp_loopback = true,
+	},
+
+	{
 		.name = "Bxtn HDMI Port",
 		.stream_name = "Hdmi",
 		.cpu_dai_name = "HDMI Pin",
@@ -789,6 +829,28 @@ struct snd_soc_dai_link mrgfld_wm8998_msic_dailink[] = {
 	},
 
 	{
+		.name = "Bxtn DMIC01-Loop Port",
+		.stream_name = "Bxtn DMIC01-Loop",
+		.cpu_dai_name = "DMIC01 Pin",
+		.platform_name = "0000:00:0e.0",
+		.codec_dai_name = "dmic-hifi",
+		.codec_name = "dmic-codec",
+		.params = &bxtn_florida_dai_params_dmic01,
+		.dsp_loopback = true,
+	},
+
+	{
+		.name = "Bxtn DMIC23-Loop Port",
+		.stream_name = "Bxtn DMIC23-Loop",
+		.cpu_dai_name = "DMIC23 Pin",
+		.platform_name = "0000:00:0e.0",
+		.codec_dai_name = "dmic-hifi",
+		.codec_name = "dmic-codec",
+		.params = &bxtn_florida_dai_params_dmic23,
+		.dsp_loopback = true,
+	},
+
+	{
 		.name = "Bxtn HDMI Port",
 		.stream_name = "Hdmi",
 		.cpu_dai_name = "HDMI Pin",
-- 
1.7.5.4

