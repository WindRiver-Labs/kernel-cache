From ceba80a83722e3ace4fc7891f8d1d3d7b3633f33 Mon Sep 17 00:00:00 2001
From: Vinod Koul <vinod.koul@intel.com>
Date: Wed, 22 Jun 2016 19:44:19 +0530
Subject: [PATCH 2069/2508] ASoC: Intel: Skylake: Disable async suspend

commit a23f4254f58fcd975d3a29c82683f0043ecb0339 from
https://github.com/01org/linux-apollolake-i

We do not support async suspend due to dependency with rest of
card and require suspend/resume be executed synchronously, mark
the device accordingly.

Change-Id: Ieb4338c6751c7dad61ed6352ab8dbcf259bf1513
Signed-off-by: Vinod Koul <vinod.koul@intel.com>
Signed-off-by: Mark Brown <broonie@kernel.org>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/10030
Reviewed-by: Jayanti, Satya Charitardha <satya.charitardha.jayanti@intel.com>
Tested-by: Jayanti, Satya Charitardha <satya.charitardha.jayanti@intel.com>
---
 sound/soc/intel/skylake/skl.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/skylake/skl.c b/sound/soc/intel/skylake/skl.c
index ad09320..a78cc3c 100644
--- a/sound/soc/intel/skylake/skl.c
+++ b/sound/soc/intel/skylake/skl.c
@@ -765,6 +765,8 @@ static int skl_probe(struct pci_dev *pci,
 	err = skl_first_init(ebus);
 	if (err < 0)
 		goto out_free;
+
+	device_disable_async_suspend(bus->dev);
 #if 0
 	/* NO NHLT On FPGA */
 	skl->nhlt = skl_nhlt_init(bus->dev);
-- 
1.7.5.4

