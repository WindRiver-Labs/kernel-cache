From 6833bd6f7b34be86023ac00190cf6a484cc3f6b7 Mon Sep 17 00:00:00 2001
From: Senthilnathan Veppur <senthilnathanx.veppur@intel.com>
Date: Mon, 21 Mar 2016 17:59:06 +0530
Subject: [PATCH 1916/2508] ASoC: Intel: Skylake: Fix memory leak.

commit da3ebf7aee8e3e68baea3776e9949f2ff77dd60d from
https://github.com/01org/linux-apollolake-i

Release memory before returning from the
function.

Change-Id: I992ad417673111e15248f490f7b5510218c56e38
Signed-off-by: Senthilnathan Veppur <senthilnathanx.veppur@intel.com>
---
 sound/soc/intel/skylake/skl-debug.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-debug.c b/sound/soc/intel/skylake/skl-debug.c
index 1bdc4a4..d1a12c9 100644
--- a/sound/soc/intel/skylake/skl-debug.c
+++ b/sound/soc/intel/skylake/skl-debug.c
@@ -589,6 +589,7 @@ static ssize_t adsp_control_write(struct file *file,
 
 	default:
 	mutex_unlock(&d->fw_ipc_data.mutex);
+	kfree(ipc_data);
 	return -EINVAL;
 	}
 
-- 
1.7.5.4

