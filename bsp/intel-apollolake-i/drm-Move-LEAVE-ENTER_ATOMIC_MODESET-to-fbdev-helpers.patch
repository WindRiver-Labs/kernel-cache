From 31ff07d8034360f85f78a32af3fa429e3805e276 Mon Sep 17 00:00:00 2001
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Mon, 8 Feb 2016 15:09:24 -0800
Subject: [PATCH 0484/2508] drm: Move LEAVE/ENTER_ATOMIC_MODESET to fbdev
 helpers

commit 498d2f0089aa2c90d87faa45e83eac58efcbbfb7 from
https://github.com/01org/linux-apollolake-i

This is only used for kgdb (and previously panic) handlers in
the fbdev emulation, so belongs there.

Note that this means we'll leave behind a forward declaration, but
once all the helper vtables are consolidated (in the next patch) that
will make more sense.

v2: fixup radone/amdgpu.

Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Link: http://patchwork.freedesktop.org/patch/msgid/1449218769-16577-3-git-send-email-daniel.vetter@ffwll.ch
Reviewed-by: Thierry Reding <treding@nvidia.com> (v2)
(cherry picked from commit b516a9efb7af38733ba2308fc7c0f49f034f53bd)
Signed-off-by: Matt Roper <matthew.d.roper@intel.com>
---
 include/drm/drm_crtc_helper.h |    5 +----
 include/drm/drm_fb_helper.h   |    5 +++++
 2 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/include/drm/drm_crtc_helper.h b/include/drm/drm_crtc_helper.h
index e22ab29..26cc978 100644
--- a/include/drm/drm_crtc_helper.h
+++ b/include/drm/drm_crtc_helper.h
@@ -41,10 +41,7 @@
 
 #include <drm/drm_crtc.h>
 
-enum mode_set_atomic {
-	LEAVE_ATOMIC_MODE_SET,
-	ENTER_ATOMIC_MODE_SET,
-};
+enum mode_set_atomic;
 
 /**
  * struct drm_crtc_helper_funcs - helper operations for CRTCs
diff --git a/include/drm/drm_fb_helper.h b/include/drm/drm_fb_helper.h
index d2d4ad1..d8a40df 100644
--- a/include/drm/drm_fb_helper.h
+++ b/include/drm/drm_fb_helper.h
@@ -34,6 +34,11 @@ struct drm_fb_helper;
 
 #include <linux/kgdb.h>
 
+enum mode_set_atomic {
+	LEAVE_ATOMIC_MODE_SET,
+	ENTER_ATOMIC_MODE_SET,
+};
+
 struct drm_fb_offset {
 	int x, y;
 };
-- 
1.7.5.4

