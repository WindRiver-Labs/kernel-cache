From 1b1742a8a34e12c06880d12c32c3ca8a3b60f251 Mon Sep 17 00:00:00 2001
From: Guneshwor Singh <guneshwor.o.singh@intel.com>
Date: Tue, 3 May 2016 01:41:53 +0530
Subject: [PATCH 1939/2508] ASoC: Intel: Skylake: Fix not to stop src pipe in
 pre pmd event handler

commit 322ff0c67ea4fa311623b69db755134ad6710fe8 from
https://github.com/01org/linux-apollolake-i

If the widget is a mixin module, just unbind between source and sink and
don't stop the source pipe as there can be mutiple sinks connected.

Change-Id: I08bc2c918f36765f67c76570f6eaa152b9625001
Signed-off-by: Guneshwor Singh <guneshwor.o.singh@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/9042
Reviewed-by: R, Dharageswari <dharageswari.r@intel.com>
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/soc/intel/skylake/skl-topology.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-topology.c b/sound/soc/intel/skylake/skl-topology.c
index 2dcf334..50da959 100644
--- a/sound/soc/intel/skylake/skl-topology.c
+++ b/sound/soc/intel/skylake/skl-topology.c
@@ -956,15 +956,6 @@ static int skl_tplg_mixer_dapm_pre_pmd_event(struct snd_soc_dapm_widget *w,
 			src_mconfig = sink_mconfig->m_in_pin[i].tgt_mcfg;
 			if (!src_mconfig)
 				continue;
-			/*
-			 * If path_found == 1, that means pmd for source
-			 * pipe has not occurred, source is connected to
-			 * some other sink. so its responsibility of sink
-			 * to unbind itself from source.
-			 */
-			ret = skl_stop_pipe(ctx, src_mconfig->pipe);
-			if (ret < 0)
-				return ret;
 
 			ret = skl_unbind_modules(ctx,
 						src_mconfig, sink_mconfig);
-- 
1.7.5.4

