From bd97279fdae0f7e90a54b53dca9fd1975e0de9f9 Mon Sep 17 00:00:00 2001
From: Jeeja KP <jeeja.kp@intel.com>
Date: Fri, 9 Oct 2015 09:01:51 +0100
Subject: [PATCH 1638/2508] ASoC: Intel: Skylake: power down all link in
 suspend

commit 01bb84b5001e4a6221582b163b34e90b3095f451 upstream

This ensures that the link is not requesting any clock and the
PLL can turn off. The link is powered when controller is brought
out of reset.

Signed-off-by: Jeeja KP <jeeja.kp@intel.com>
Signed-off-by: Vinod Koul <vinod.koul@intel.com>
Signed-off-by: Mark Brown <broonie@kernel.org>
---
 sound/soc/intel/skylake/skl.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/sound/soc/intel/skylake/skl.c b/sound/soc/intel/skylake/skl.c
index ca135b8..5319529 100644
--- a/sound/soc/intel/skylake/skl.c
+++ b/sound/soc/intel/skylake/skl.c
@@ -173,6 +173,9 @@ static int skl_runtime_suspend(struct device *dev)
 
 	/* enable controller wake up event */
 	snd_hdac_chip_updatew(bus, WAKEEN, 0, STATESTS_INT_MASK);
+
+	snd_hdac_ext_bus_link_power_down_all(ebus);
+
 	ret = skl_suspend_dsp(skl);
 	if (ret < 0)
 		return ret;
-- 
1.7.5.4

