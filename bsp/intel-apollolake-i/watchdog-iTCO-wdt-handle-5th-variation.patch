From ca571142ee170c92a9c7f12a60368c760ce0fce6 Mon Sep 17 00:00:00 2001
From: Jonathan Yong <jonathan.yong@intel.com>
Date: Tue, 28 Jun 2016 01:28:21 +0000
Subject: [PATCH 0100/2508] watchdog: iTCO-wdt handle 5th variation

commit 0a89f910f6a5cc38b3905e2d371195d86b999a63 from
https://github.com/01org/linux-apollolake-i

Apollo Lake Watchdog is not on the SMBUS, but on the PMC, most
register locations remains unchanged except for the NO_REBOOT bit
in the SMI_EN register.

Signed-off-by: Jonathan Yong <jonathan.yong@intel.com>
Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 drivers/watchdog/iTCO_wdt.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/watchdog/iTCO_wdt.c b/drivers/watchdog/iTCO_wdt.c
index 0acc6c5..54cab18 100644
--- a/drivers/watchdog/iTCO_wdt.c
+++ b/drivers/watchdog/iTCO_wdt.c
@@ -150,6 +150,7 @@ static inline u32 no_reboot_bit(void)
 	u32 enable_bit;
 
 	switch (iTCO_wdt_private.iTCO_version) {
+	case 5:
 	case 3:
 		enable_bit = 0x00000010;
 		break;
@@ -512,6 +513,7 @@ static int iTCO_wdt_probe(struct platform_device *dev)
 
 	/* Clear out the (probably old) status */
 	switch (iTCO_wdt_private.iTCO_version) {
+	case 5:
 	case 4:
 		outw(0x0008, TCO1_STS);	/* Clear the Time Out Status bit */
 		outw(0x0002, TCO2_STS);	/* Clear SECOND_TO_STS bit */
-- 
1.7.5.4

