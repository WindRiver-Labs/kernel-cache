From ee3a3c9b306991083f85062faaf54fef7ef919cc Mon Sep 17 00:00:00 2001
From: Yael Samet <yael.samet@intel.com>
Date: Wed, 18 Jan 2017 11:09:53 +0200
Subject: [PATCH 4674/4706] mei: dal: map BHE_VM_INSTANCE_INIT_FAIL to
 DAL_KDI_STATUS_OUT_OF_RESOURCE

commit cfe5ba16c2e62a494e9bc1866be626eacdf3f8ff from
git://git.yoctoproject.org/linux-yocto-4.1

This error occurs in the FW when initialization fails
due to lack of resources.

Change-Id: I85b78ab4dce7ed242507504828ebb67eb9f9e78a
Signed-off-by: Yael Samet <yael.samet@intel.com>
Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
---
 drivers/misc/mei/dal/dal_kdi.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/misc/mei/dal/dal_kdi.c b/drivers/misc/mei/dal/dal_kdi.c
index 6194fd0..e2c2319 100644
--- a/drivers/misc/mei/dal/dal_kdi.c
+++ b/drivers/misc/mei/dal/dal_kdi.c
@@ -104,6 +104,7 @@ static int to_kdi_err(int err)
 	case BHE_APPLET_SMALL_BUFFER:
 		return DAL_KDI_STATUS_BUFFER_TOO_SMALL;
 	case BPE_OUT_OF_RESOURCE:
+	case BHE_VM_INSTANCE_INIT_FAIL:
 		return DAL_KDI_STATUS_OUT_OF_RESOURCE;
 	case BHE_SESSION_NUM_EXCEED:
 		return DAL_KDI_STATUS_MAX_SESSIONS_REACHED;
-- 
1.7.5.4

