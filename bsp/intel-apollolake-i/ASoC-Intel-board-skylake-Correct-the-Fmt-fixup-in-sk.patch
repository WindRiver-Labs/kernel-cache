From 6141da9d2fc2d52af5a6d4c82a0f80b6ab368bdd Mon Sep 17 00:00:00 2001
From: Jeeja KP <jeeja.kp@intel.com>
Date: Mon, 19 Oct 2015 21:51:57 +0530
Subject: [PATCH 1732/2508] ASoC: Intel: board: skylake: Correct the Fmt fixup
 in skl_rt5650 machine

commit 70cd3ec73b5c1e6e52a762ed790eb4915d0173b6 from
https://github.com/01org/linux-apollolake-i

SSP0 FMT used is 24 bit, This patch updates the fmt to 24 bit.

Signed-off-by: Jeeja KP <jeeja.kp@intel.com>
---
 sound/soc/intel/boards/skl_rt5650.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/sound/soc/intel/boards/skl_rt5650.c b/sound/soc/intel/boards/skl_rt5650.c
index d3077c8..373da6d 100644
--- a/sound/soc/intel/boards/skl_rt5650.c
+++ b/sound/soc/intel/boards/skl_rt5650.c
@@ -183,15 +183,16 @@ static int skylake_ssp0_fixup(struct snd_soc_pcm_runtime *rtd,
 			SNDRV_PCM_HW_PARAM_RATE);
 	struct snd_interval *channels = hw_param_interval(params,
 						SNDRV_PCM_HW_PARAM_CHANNELS);
+	struct snd_mask *fmt = hw_param_mask(params, SNDRV_PCM_HW_PARAM_FORMAT);
+
 
 	/* The ADSP will covert the FE rate to 48k, stereo */
 	rate->min = rate->max = 48000;
 	channels->min = channels->max = 2;
 
-	/* set SSP0 to 16 bit */
-	snd_mask_set(&params->masks[SNDRV_PCM_HW_PARAM_FORMAT -
-				    SNDRV_PCM_HW_PARAM_FIRST_MASK],
-				    SNDRV_PCM_FORMAT_S16_LE);
+	/* set SSP0 to 24 bit */
+	snd_mask_none(fmt);
+	snd_mask_set(fmt, SNDRV_PCM_FORMAT_S24_LE);
 
 	return 0;
 }
-- 
1.7.5.4

