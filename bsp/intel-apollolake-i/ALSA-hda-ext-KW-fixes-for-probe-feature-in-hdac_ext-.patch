From 9c71fdcce370b0c1ebb832f5bc08d48e14dd3fb0 Mon Sep 17 00:00:00 2001
From: G Kranthi <gudishax.kranthikumar@intel.com>
Date: Tue, 10 May 2016 11:10:01 +0530
Subject: [PATCH 1959/2508] ALSA: hda: ext: KW fixes for probe feature in
 hdac_ext stream

commit 1ce6cb14c901ed7309326c79d15a0c1484481a85 from
https://github.com/01org/linux-apollolake-i

This patch will add fixes for below klocwork errors,

1. Null pointer 'res' that comes from line 528 may be
   dereferenced at line 560.
2. Pointer 'res' checked for NULL at line 552 may be
   dereferenced at line 560.

Change-Id: I083c779466589db36d38ccfdda2483004deaeb43
Signed-off-by: G Kranthi <gudishax.kranthikumar@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/9120
Reviewed-by: B, Jayachandran <jayachandran.b@intel.com>
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/hda/ext/hdac_ext_stream.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/sound/hda/ext/hdac_ext_stream.c b/sound/hda/ext/hdac_ext_stream.c
index 15a5d00..6a07bab 100644
--- a/sound/hda/ext/hdac_ext_stream.c
+++ b/sound/hda/ext/hdac_ext_stream.c
@@ -555,9 +555,9 @@ hdac_ext_host_stream_compr_assign(struct hdac_ext_bus *ebus,
 		res->hstream.running = 0;
 		res->hstream.stream = substream;
 		spin_unlock_irq(&hbus->reg_lock);
-	}
-	 dev_dbg(hbus->dev, "Stream tag = %d, index = %d\n",
+		dev_dbg(hbus->dev, "Stream tag = %d, index = %d\n",
 				res->hstream.stream_tag, res->hstream.index);
+	}
 	return res;
 }
 EXPORT_SYMBOL_GPL(hdac_ext_host_stream_compr_assign);
-- 
1.7.5.4

