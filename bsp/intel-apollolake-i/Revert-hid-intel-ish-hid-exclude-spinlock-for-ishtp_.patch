From ab2e9f35e35376292a87cf874dd9961f07b2ab48 Mon Sep 17 00:00:00 2001
From: "Ooi, Joyce" <joyce.ooi@intel.com>
Date: Fri, 2 Dec 2016 10:58:28 +0800
Subject: [PATCH 4561/4706] Revert "hid: intel-ish-hid: exclude spinlock for
 ishtp_bus_remove_device"

commit b919d93ce22acdc710389488241822d51234e61d from
git://git.yoctoproject.org/linux-yocto-4.1

This reverts commit 2b5a835b956a ("hid: intel-ish-hid: exclude spinlock for
ishtp_bus_remove_device").
The changes of this patch are already included in upstream ISH drivers.

Signed-off-by: Ooi, Joyce <joyce.ooi@intel.com>
---
 drivers/hid/intel-ish-hid/ishtp/bus.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/hid/intel-ish-hid/ishtp/bus.c b/drivers/hid/intel-ish-hid/ishtp/bus.c
index 753fd6f..add502f 100644
--- a/drivers/hid/intel-ish-hid/ishtp/bus.c
+++ b/drivers/hid/intel-ish-hid/ishtp/bus.c
@@ -718,9 +718,7 @@ void	ishtp_bus_remove_all_clients(struct ishtp_device *ishtp_dev,
 			continue;
 
 		list_del(&cl_device->device_link);
-		spin_unlock_irqrestore(&ishtp_dev->device_list_lock, flags);
 		ishtp_bus_remove_device(cl_device);
-		spin_lock_irqsave(&ishtp_dev->device_list_lock, flags);
 	}
 	spin_unlock_irqrestore(&ishtp_dev->device_list_lock, flags);
 
-- 
1.7.5.4

