From fd255762934686f3126626a92955590900492d99 Mon Sep 17 00:00:00 2001
From: Jayachandran B <jayachandran.b@intel.com>
Date: Tue, 8 Mar 2016 12:11:11 +0530
Subject: [PATCH 1909/2508] ASoC: Intel: Skylake: Use IPC wrapper API for load
 library IPC

commit f4946e535d059c400c8db7542935ffaa39b09332 from
https://github.com/01org/linux-apollolake-i

The load library IPC utility function currently uses the IPC
libray API. Instead use the IPC wrapper skl_ipc_tx_message()
just like other IPC utility functions do.

Change-Id: I2e8775d4b2be629cc1a06f54871eac95f85b8f4e
Signed-off-by: Jayachandran B <jayachandran.b@intel.com>
Reviewed-on: https://git-gar-1.devtools.intel.com/gerrit/8360
Reviewed-by: Babu, Ramesh <ramesh.babu@intel.com>
Tested-by: Babu, Ramesh <ramesh.babu@intel.com>
---
 sound/soc/intel/skylake/skl-sst-ipc.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/sound/soc/intel/skylake/skl-sst-ipc.c b/sound/soc/intel/skylake/skl-sst-ipc.c
index f4e73f9..8d0a3b2 100644
--- a/sound/soc/intel/skylake/skl-sst-ipc.c
+++ b/sound/soc/intel/skylake/skl-sst-ipc.c
@@ -1017,7 +1017,7 @@ int skl_sst_ipc_load_library(struct sst_generic_ipc *ipc,
 	header.primary |= IPC_MOD_INSTANCE_ID(table_id);
 	header.primary |= IPC_MOD_ID(dma_id);
 
-	ret = sst_ipc_tx_message_wait(ipc, *ipc_header, NULL, 0, NULL, 0);
+	ret = skl_ipc_tx_message(ipc, *ipc_header, NULL, 0, NULL, 0, true);
 
 	if (ret < 0)
 		dev_err(ipc->dev, "ipc: load lib failed\n");
-- 
1.7.5.4

