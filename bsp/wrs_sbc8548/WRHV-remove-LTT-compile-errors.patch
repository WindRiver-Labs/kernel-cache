From 6c4329fed65f1ba66c3df104f5b23375d1272827 Mon Sep 17 00:00:00 2001
From: Jeremy McNicoll <jeremy.mcnicoll@windriver.com>
Date: Wed, 2 Jun 2010 15:18:59 -0400
Subject: [PATCH 2/3] WRHV: remove LTT compile errors

Comment these compile errors for now.  Deal with this
after FC.

Signed-off-by: Jeremy McNicoll <jeremy.mcnicoll@windriver.com>
---
 arch/powerpc/kernel/vbi/wrhv.c |   13 ++++++++++---
 1 files changed, 10 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/kernel/vbi/wrhv.c b/arch/powerpc/kernel/vbi/wrhv.c
index 6686483..54a344f 100644
--- a/arch/powerpc/kernel/vbi/wrhv.c
+++ b/arch/powerpc/kernel/vbi/wrhv.c
@@ -605,7 +605,9 @@ void wrhv_do_IRQ(struct pt_regs *regs)
 	struct pt_regs *old_regs = set_irq_regs(regs);
 	unsigned int irq;
 
-	trace_irq_entry(regs);
+	/* For now until we get the new LTT rebase
+	   sorted out.
+	   trace_irq_entry(regs); */
 
 	irq_enter();
 
@@ -632,7 +634,9 @@ check_again:
 	}
 #endif
 
-	trace_irq_exit(regs);
+	/** For now until we get the new LTT
+	   rebase sorted out.
+	trace_irq_exit(regs); **/
 }
 
 unsigned int wrhv_map_irq_of_desc(char *irq_name, int32_t irq_dir)
@@ -745,7 +749,8 @@ static inline void clear_perf_event_pending(void)
 
 #else /* 32-bit */
 
-DEFINE_PER_CPU(u8, perf_event_pending);
+/*** This is colliding with arch/powerpc/time.c
+DEFINE_PER_CPU(u8, perf_event_pending); **/
 
 #define set_perf_event_pending_flag()	__get_cpu_var(perf_event_pending) = 1
 #define test_perf_event_pending()	__get_cpu_var(perf_event_pending)
@@ -778,10 +783,12 @@ void wrhv_hw_timer_interrupt(struct pt_regs * regs)
 
 	calculate_steal_time();
 
+/**** LTT? Look at this later 
 	if (test_perf_event_pending()) {
 		clear_perf_event_pending();
 		perf_event_do_pending();
 	}
+***/
 
 	wrhv_timer_interrupt(0, NULL);
 
-- 
1.6.5.2

