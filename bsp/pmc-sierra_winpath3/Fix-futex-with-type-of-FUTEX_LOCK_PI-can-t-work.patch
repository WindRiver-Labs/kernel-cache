From 4696cff4d9bec048726c66301f7b5ac9e19a80de Mon Sep 17 00:00:00 2001
From: Jiang Bin <bin.jiang@windriver.com>
Date: Thu, 21 Apr 2011 15:22:06 +0800
Subject: [PATCH 13/13] Fix: futex with type of FUTEX_LOCK_PI can't work

futex with type of FUTEX_LOCK_PI depends on LLSC. But LLSC
is disabled since CONFIG_CPU_HAS_LLSC config isn't defined.

LLSC is supported, so cpu_has_llsc should be set to 1 to
enable LLSC.

Signed-off-by: Jiang Bin<bin.jiang@windriver.com>
---
 .../asm/mach-winpath/cpu-feature-overrides.h       |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/arch/mips/include/asm/mach-winpath/cpu-feature-overrides.h b/arch/mips/include/asm/mach-winpath/cpu-feature-overrides.h
index 834c56b..823ab37 100644
--- a/arch/mips/include/asm/mach-winpath/cpu-feature-overrides.h
+++ b/arch/mips/include/asm/mach-winpath/cpu-feature-overrides.h
@@ -26,11 +26,7 @@
 #define cpu_has_prefetch	1
 #define cpu_has_mcheck		1
 #define cpu_has_ejtag          1
-#ifdef CONFIG_CPU_HAS_LLSC
 #define cpu_has_llsc		1
-#else
-#define cpu_has_llsc		0
-#endif
 #define cpu_has_vtag_icache	0
 #define cpu_has_dc_aliases	0
 #define cpu_has_ic_fills_f_dc	0
-- 
1.7.0.4

