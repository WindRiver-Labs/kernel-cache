From 83b35620d3142117adc35f66f18dddb8794bef27 Mon Sep 17 00:00:00 2001
From: Junxiao Bi <junxiao.bi@windriver.com>
Date: Thu, 11 Aug 2011 16:19:59 +0800
Subject: [PATCH] ARM: VEXPRESS: resize flash partitions

The partition for jffs2 is only 5M and not enough for many root
filesystems, which are larger than 5M. The partition for kernel is only
3M and may be soon used up. So change flash size to 32M, jffs2
partiotion to 16M, and kernel partition to 8M.

Signed-off-by: Junxiao Bi <junxiao.bi@windriver.com>
---
 arch/arm/mach-vexpress/v2m.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-vexpress/v2m.c b/arch/arm/mach-vexpress/v2m.c
index 9e940e4..a0382a5 100644
--- a/arch/arm/mach-vexpress/v2m.c
+++ b/arch/arm/mach-vexpress/v2m.c
@@ -221,7 +221,7 @@ static struct mtd_partition v2m_flash_partitions[] = {
 	}, {
 		.name           = "kernel",
 		.offset         = MTDPART_OFS_APPEND,
-		.size           = 0x300000,
+		.size           = SZ_8M,
 		.mask_flags     = 0,
 	}, {
 		.name           = "jffs2",
@@ -243,7 +243,7 @@ static struct flash_platform_data v2m_flash_data = {
 
 static struct resource v2m_flash_resources = {
 	.start	= V2M_NOR0,
-	.end	= V2M_NOR0 + SZ_16M - 1,
+	.end	= V2M_NOR0 + SZ_32M - 1,
 	.flags	= IORESOURCE_MEM,
 };
 
-- 
1.7.0.4

