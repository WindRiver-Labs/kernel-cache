From 60ba06c4997fcd40cb2867e0f78de32afa3a1890 Mon Sep 17 00:00:00 2001
From: chunguang yang <chunguang.yang@windriver.com>
Date: Tue, 22 Sep 2015 13:48:56 +0800
Subject: [PATCH] Fix build error when build with kts layer

When build with kernel config CONFIG_DEBUG_LOCK_ALLOC enabled, the following
build error will occur:
include/linux/mutex.h:190:57: error: '#' is not followed by a macro parameter
|  # define __WW_CLASS_MUTEX_INITIALIZER(lockname, ww_class) \

the macro is defined, but has no proper definition. the following commit introduce
this error:
Date:   Wed Feb 11 13:05:18 2015 +0800

    preempt-rt: adjust backport radeon driver support to WRL6

it moved the macro location and not added the definition later, Add it
to fix this issue.
Signed-off-by: chunguang yang <chunguang.yang@windriver.com>
---
 include/linux/mutex.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/mutex.h b/include/linux/mutex.h
index 7d2fc45..c8f6043 100644
--- a/include/linux/mutex.h
+++ b/include/linux/mutex.h
@@ -188,6 +188,7 @@ extern void mutex_unlock(struct mutex *lock);
 #if 1
 #ifdef CONFIG_DEBUG_LOCK_ALLOC
 # define __WW_CLASS_MUTEX_INITIALIZER(lockname, ww_class) \
+		, .ww_class = &ww_class
 #else
 # define __WW_CLASS_MUTEX_INITIALIZER(lockname, ww_class)
 #endif
-- 
1.7.5.4

