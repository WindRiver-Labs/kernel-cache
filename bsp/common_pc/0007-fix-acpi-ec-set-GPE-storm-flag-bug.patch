From b3a5b98dc5b3ac553bf97eee4cc71ff1204d70f9 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Thu, 9 Oct 2008 11:28:40 +0800
Subject: [PATCH] fix acpi ec set GPE storm flag bug

The intent of the code was clear, however the missing braces
meant that EC_FLAGS_GPE_STORM was incorrectly being set
all the time

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/acpi/ec.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/acpi/ec.c b/drivers/acpi/ec.c
index 1f96f0e..ef202b7 100644
--- a/drivers/acpi/ec.c
+++ b/drivers/acpi/ec.c
@@ -267,9 +267,10 @@ end:
 		/* it is safe to enable GPE outside of transaction */
 		acpi_enable_gpe(NULL, ec->gpe, ACPI_NOT_ISR);
 	} else if (test_bit(EC_FLAGS_GPE_MODE, &ec->flags) &&
-		   atomic_read(&ec->irq_count) > ACPI_EC_STORM_THRESHOLD)
+		   atomic_read(&ec->irq_count) > ACPI_EC_STORM_THRESHOLD) {
 		pr_debug(PREFIX "GPE storm detected\n");
 		set_bit(EC_FLAGS_GPE_STORM, &ec->flags);
+	}
 	return 0;
 }
 
-- 
1.5.5.1

