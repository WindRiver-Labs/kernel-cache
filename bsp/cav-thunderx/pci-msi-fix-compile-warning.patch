From d0db1dd7f7bdbcff8f10727dd98cb533f275a3f4 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Tue, 28 Jul 2015 07:29:54 +0000
Subject: [PATCH] pci:msi:fix compile warning

Fix following compile warning in msi.c:
drivers/pci/msi.c: In function 'alloc_msi_entry':
drivers/pci/msi.c:471:12: warning: assignment from incompatible pointer type
  desc->dev = dev;
            ^
drivers/pci/msi.c: In function 'msi_capability_init':
drivers/pci/msi.c:672:10: warning: passing argument 1 of 'alloc_msi_entry' from incompatible pointer type
  entry = alloc_msi_entry(&dev->dev);
          ^
drivers/pci/msi.c:464:25: note: expected 'struct pci_dev *' but argument is of type 'struct device *'
 static struct msi_desc *alloc_msi_entry(struct pci_dev *dev)
                         ^
drivers/pci/msi.c: In function 'msix_setup_entries':
drivers/pci/msi.c:749:11: warning: passing argument 1 of 'alloc_msi_entry' from incompatible pointer type
   entry = alloc_msi_entry(&dev->dev);
           ^
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/pci/msi.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/pci/msi.c b/drivers/pci/msi.c
index 4a8f4aa..0677a21 100644
--- a/drivers/pci/msi.c
+++ b/drivers/pci/msi.c
@@ -461,7 +461,7 @@ static void free_msi_irqs(struct pci_dev *dev)
 	}
 }
 
-static struct msi_desc *alloc_msi_entry(struct pci_dev *dev)
+static struct msi_desc *alloc_msi_entry(struct device *dev)
 {
 	struct msi_desc *desc = kzalloc(sizeof(*desc), GFP_KERNEL);
 	if (!desc)
-- 
1.7.5.4

