From 5353b3dc4fb8eef288095fd94495c929a637a9ea Mon Sep 17 00:00:00 2001
From: Guoqing Jiang <Guoqing.Jiang@windriver.com>
Date: Wed, 17 Jul 2013 16:14:16 +0800
Subject: [PATCH 25/61] ARM: keystone: add nand driver support

Commit 8eeb652eb40c7e050c8654aed7377852aa3d98df from arago tree
git://arago-project.org/git/projects/linux-keystone.git releases/03.00.00.11/master

Add davinci-aemif device_id to the list of platform bus to probe for
NAND driver.

Signed-off-by: Murali Karicheri <m-karicheri2@ti.com>
Signed-off-by: Guoqing Jiang <Guoqing.Jiang@windriver.com>
---
 arch/arm/mach-keystone/keystone.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-keystone/keystone.c b/arch/arm/mach-keystone/keystone.c
index a0d2702..d4a7c36 100644
--- a/arch/arm/mach-keystone/keystone.c
+++ b/arch/arm/mach-keystone/keystone.c
@@ -51,6 +51,12 @@ static const struct of_device_id irq_match[] = {
 	{}
 };
 
+static struct of_device_id tci6614_dt_match_table[] __initdata = {
+	{ .compatible = "simple-bus",},
+	{ .compatible = "ti,davinci-aemif", },
+	{}
+};
+
 static void __init keystone_init_irq(void)
 {
 	of_irq_init(irq_match);
@@ -71,7 +77,7 @@ static struct sys_timer keystone_timer = {
 
 static void __init keystone_init(void)
 {
-	of_platform_populate(NULL, of_default_bus_match_table, NULL, NULL);
+	of_platform_populate(NULL, tci6614_dt_match_table, NULL, NULL);
 }
 
 static const char *keystone_match[] __initconst = {
-- 
1.7.5.4

