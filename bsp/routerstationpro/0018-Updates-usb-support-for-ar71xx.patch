From 3b959afe184b4c3804af2533a674909fecda75c8 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 24 Nov 2011 14:48:01 +0800
Subject: [PATCH 18/41] Updates usb support for ar71xx

which from the following git repo.
  git://nbd.name/openwrt.git
  110-usb-ehci-add-war-for-synopsys-hc-bug.patch
  003-ar71xx_usb_host.patch

Integrated-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/usb/host/Kconfig       |   14 +++++++-------
 drivers/usb/host/ehci-ar71xx.c |    6 +++---
 drivers/usb/host/ohci-ar71xx.c |    8 ++++----
 3 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/drivers/usb/host/Kconfig b/drivers/usb/host/Kconfig
index d6a23503..2209295 100644
--- a/drivers/usb/host/Kconfig
+++ b/drivers/usb/host/Kconfig
@@ -115,13 +115,6 @@ config USB_EHCI_BIG_ENDIAN_DESC
 				    PPC_MPC512x || PMC_MSP || SPARC_LEON)
 	default y
 
-config USB_EHCI_AR71XX
-	bool "USB EHCI support for AR71xx"
-	depends on USB_EHCI_HCD && ATHEROS_AR71XX
-	default y
-	help
-	  Support for Atheros AR71xx built-in EHCI controller
-
 config XPS_USB_HCD_XILINX
 	bool "Use Xilinx usb host EHCI controller core"
 	depends on USB_EHCI_HCD && (PPC32 || MICROBLAZE)
@@ -136,6 +129,13 @@ config XPS_USB_HCD_XILINX
 config USB_FSL_MPH_DR_OF
 	tristate
 
+config USB_EHCI_AR71XX
+	bool "USB EHCI support for AR71xx"
+	depends on USB_EHCI_HCD && ATHEROS_AR71XX
+	default y
+	help
+	  Support for Atheros AR71xx built-in EHCI controller
+
 config USB_EHCI_FSL
 	bool "Support for Freescale on-chip EHCI USB controller"
 	depends on USB_EHCI_HCD && FSL_SOC
diff --git a/drivers/usb/host/ehci-ar71xx.c b/drivers/usb/host/ehci-ar71xx.c
index 01433c2..b08db5b 100644
--- a/drivers/usb/host/ehci-ar71xx.c
+++ b/drivers/usb/host/ehci-ar71xx.c
@@ -117,12 +117,12 @@ static int ehci_ar71xx_probe(const struct hc_driver *driver,
 
 	return 0;
 
- err_iounmap:
+err_iounmap:
 	iounmap(hcd->regs);
 
- err_release_region:
+err_release_region:
 	release_mem_region(hcd->rsrc_start, hcd->rsrc_len);
- err_put_hcd:
+err_put_hcd:
 	usb_put_hcd(hcd);
 	return ret;
 }
diff --git a/drivers/usb/host/ohci-ar71xx.c b/drivers/usb/host/ohci-ar71xx.c
index 48457e0..1ab33f3 100644
--- a/drivers/usb/host/ohci-ar71xx.c
+++ b/drivers/usb/host/ohci-ar71xx.c
@@ -70,11 +70,11 @@ static int usb_hcd_ar71xx_probe(const struct hc_driver *driver,
 
 	return 0;
 
- err_stop_hcd:
+err_stop_hcd:
 	iounmap(hcd->regs);
- err_release_region:
+err_release_region:
 	release_mem_region(hcd->rsrc_start, hcd->rsrc_len);
- err_put_hcd:
+err_put_hcd:
 	usb_put_hcd(hcd);
 	return ret;
 }
@@ -102,7 +102,7 @@ static int __devinit ohci_ar71xx_start(struct usb_hcd *hcd)
 
 	return 0;
 
- err:
+err:
 	ohci_stop(hcd);
 	return ret;
 }
-- 
1.7.4.1

