From e95695454901b4538b2fa4c814da1bb11448492e Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Tue, 23 Jul 2013 13:48:53 +0300
Subject: [PATCH 0877/1825] alp: added initial support for RD-6660 board

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 4b225eb2074c5793b71b9d3df687e3794fbbfde3

	- Added RD-6660 board information structs
	- Added hardcoded MPP & GPIO values

Change-Id: I23f501a64173a046f207333425943738462ad4b7
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2797
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.c     |   92 ++++++++++++++++++++
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.h     |   23 +++++
 2 files changed, 115 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
index 5e3970e..83178dc 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
@@ -504,10 +504,102 @@ MV_BOARD_INFO rd88f6650_board_info = {
 /*******************************************************************************
  * AvantaLP RD-88F6660 board */
 /*******************************************************************************/
+
+MV_BOARD_MAC_INFO rd88f6660InfoBoardMacInfo[] = {
+	/* {{MV_BOARD_MAC_SPEED boardMacSpeed, MV_8 boardEthSmiAddr}} */
+	{ BOARD_MAC_SPEED_1000M, -1},
+	{ BOARD_MAC_SPEED_AUTO, 0x1},
+	{ BOARD_MAC_SPEED_1000M, -1}
+};
+MV_BOARD_MPP_TYPE_INFO rd88f6660InfoBoardModTypeInfo[] = {
+	{
+		.boardMppSlic = MV_BOARD_SLIC_EXTERNAL_ID,
+		.ethSataComplexOpt = MV_ETHCOMP_SW_P0_2_GE_PHY_P0 |
+				     MV_ETHCOMP_SW_P1_2_GE_PHY_P1 |
+				     MV_ETHCOMP_SW_P2_2_GE_PHY_P2 |
+				     MV_ETHCOMP_SW_P3_2_GE_PHY_P3 |
+				     MV_ETHCOMP_GE_MAC1_2_SW_P4   |
+				     MV_ETHCOMP_GE_MAC0_2_SW_P6,
+		.ethPortsMode = 0x0
+	}
+};
+
+MV_DEV_CS_INFO rd88f6660InfoBoardDeCsInfo[] = {
+	/*{deviceCS, params, devType, devWidth, busWidth }*/
+#if defined(MV_INCLUDE_SPI)
+	{ SPI_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
+#endif
+};
+
+MV_BOARD_MPP_INFO rd88f6660InfoBoardMppConfigValue[] = {
+	{ {
+		RD_88F6660_MPP0_7,
+		RD_88F6660_MPP8_15,
+		RD_88F6660_MPP16_23,
+		RD_88F6660_MPP24_31,
+		RD_88F6660_MPP32_39,
+		RD_88F6660_MPP40_47,
+		RD_88F6660_MPP48_55,
+		RD_88F6660_MPP56_63,
+		RD_88F6660_MPP64_67,
+	} }
+};
+
 MV_BOARD_INFO rd88f6660_board_info = {
+	.boardName			= "RD-88F6660",
+	.numBoardMppTypeValue		= ARRSZ(rd88f6660InfoBoardModTypeInfo),
+	.pBoardModTypeValue		= rd88f6660InfoBoardModTypeInfo,
+	.pBoardMppConfigValue		= rd88f6660InfoBoardMppConfigValue,
+	.intsGppMaskLow			= 0,
+	.intsGppMaskMid			= 0,
+	.intsGppMaskHigh		= 0,
+	.numBoardDeviceIf		= ARRSZ(rd88f6660InfoBoardDeCsInfo),
+	.pDevCsInfo			= rd88f6660InfoBoardDeCsInfo,
+	.numBoardMacInfo		= ARRSZ(rd88f6660InfoBoardMacInfo),
+	.pBoardMacInfo			= rd88f6660InfoBoardMacInfo,
+	.numBoardGppInfo		= 0,
+	.pBoardGppInfo			= 0,
+	.activeLedsNumber		= 0,
+	.pLedGppPin			= NULL,
+	.ledsPolarity			= 0,
+
+	/* PMU Power */
+	.pmuPwrUpPolarity		= 0,
+	.pmuPwrUpDelay			= 80000,
+
+	/* GPP values */
+	.gppOutEnValLow			= RD_88F6660_GPP_OUT_ENA_LOW,
+	.gppOutEnValMid			= RD_88F6660_GPP_OUT_ENA_MID,
+	.gppOutEnValHigh		= RD_88F6660_GPP_OUT_ENA_HIGH,
+	.gppOutValLow			= RD_88F6660_GPP_OUT_VAL_LOW,
+	.gppOutValMid			= RD_88F6660_GPP_OUT_VAL_MID,
+	.gppOutValHigh			= RD_88F6660_GPP_OUT_VAL_HIGH,
+	.gppPolarityValLow		= RD_88F6660_GPP_POL_LOW,
+	.gppPolarityValMid		= RD_88F6660_GPP_POL_MID,
+	.gppPolarityValHigh		= RD_88F6660_GPP_POL_HIGH,
+
+	/* External Switch Configuration */
+	.switchforceLinkMask		= 0x0,
 
+	/* TDM */
+	.numBoardTdmInfo		= {},
+	.pBoardTdmInt2CsInfo		= {},
+	.boardTdmInfoIndex		= -1,
+
+	.pBoardSpecInit			= NULL,
+
+	/* NAND init params */
+	.nandFlashReadParams		= 0,
+	.nandFlashWriteParams		= 0,
+	.nandFlashControl		= 0,
+	/* NOR init params */
+	.norFlashReadParams		= 0,
+	.norFlashWriteParams		= 0,
+	/* Enable modules auto-detection. */
+	.configAutoDetect		= MV_FALSE
 };
 
+
 /*******************************************************************************
  * AvantaLP FPGA board
 *******************************************************************************/
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
index 2df96c4..e4a40be 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
@@ -156,6 +156,29 @@
 #define DB_88F6650_GPP_POL_HIGH         0x0
 
 /*******************************************************************************
+* Avanata LP RD-6660 board
+*******************************************************************************/
+#define RD_88F6660_MPP0_7               0x55555555  /* NAND */
+#define RD_88F6660_MPP8_15              0x22555555  /* NAND , I2C */
+#define RD_88F6660_MPP16_23             0x11110022  /* UA0, SSI, GPIO's */
+#define RD_88F6660_MPP24_31             0x04606101  /* PCIe0CLKREQ, P0,C0_Leds & DYING GASP */
+#define RD_88F6660_MPP32_39             0x04420000  /* GE_SMI, PON & GPIO's */
+#define RD_88F6660_MPP40_47             0x22120020  /* GE0, PON_[XVR,TX_PD,TX_SD] */
+#define RD_88F6660_MPP48_55             0x22222222  /* GE0 */
+#define RD_88F6660_MPP56_63             0x44004422  /* GE0 , LED, GPIO's */
+#define RD_88F6660_MPP64_67             0x004	    /* GPIO's */
+
+#define RD_88F6660_GPP_OUT_ENA_LOW      (~(BIT19 | BIT25))
+#define RD_88F6660_GPP_OUT_ENA_MID      0xFFFFFFFF
+#define RD_88F6660_GPP_OUT_ENA_HIGH     0xFFFFFFFF
+#define RD_88F6660_GPP_OUT_VAL_LOW      (BIT19 | BIT25)
+#define RD_88F6660_GPP_OUT_VAL_MID      0x0
+#define RD_88F6660_GPP_OUT_VAL_HIGH     0x0
+#define RD_88F6660_GPP_POL_LOW          0x0
+#define RD_88F6660_GPP_POL_MID          0x0
+#define RD_88F6660_GPP_POL_HIGH         0x0
+
+/*******************************************************************************
 * Avanata LP RD-6650 board
 *******************************************************************************/
 #define RD_88F6650_MPP0_7               0x55555555  /* NAND */
-- 
1.7.5.4

