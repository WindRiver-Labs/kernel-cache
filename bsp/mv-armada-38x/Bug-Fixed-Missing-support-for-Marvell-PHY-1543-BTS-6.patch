From afbdb4af6e4497a1950408d87bdd8af8d9590ca1 Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Mon, 22 Apr 2013 12:25:26 +0300
Subject: [PATCH 0609/1825] Bug-Fixed: Missing support for Marvell PHY 1543
 (BTS #64)

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 4b668f0b7c670cf0cff9d58afe1118ad8b2164e5

Change-Id: Ie474a375335f218114c37930820c341a09c87d19
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/1629
Reviewed-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c |    1 +
 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.h |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)
 mode change 100755 => 100644 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c

diff --git a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
old mode 100755
new mode 100644
index fc21ba0..2e9db88
--- a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
+++ b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
@@ -171,6 +171,7 @@ MV_STATUS mvEthPhyInit(MV_U32 ethPortNum, MV_BOOL eeeEnable)
 		mvEth1145PhyBasicInit(ethPortNum);
 		break;
 	case MV_PHY_88E154X:
+	case MV_PHY_88E1543:
 	case MV_PHY_88E1340M: /* BUG IN THE 1543 IS RETURNING THE 1340 ID FOR PORTS 3-4 */
 	/* case MV_PHY_KW2_INTERNAL_GE:
 		if (ethPortNum != ((MV_U32) -1))
diff --git a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.h b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.h
index e86045d..2706820 100644
--- a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.h
+++ b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.h
@@ -87,6 +87,7 @@ extern "C" {
 #define MV_PHY_88E1340S 0x1C    /* 88E1340S */
 #define MV_PHY_88E1512  0x1D
 #define MV_PHY_88E1340  0x1E    /* 88E1340/x0a */
+#define MV_PHY_88E1543  0x2A     /* 88E15453 */
 #define MV_PHY_88E154X  0x2B     /* 88E1545M */
 #define MV_PHY_88E1340M 0x1F    /* 88E1340M/x0a */
 #define MV_PHY_88E1116R 0x24
-- 
1.7.5.4

