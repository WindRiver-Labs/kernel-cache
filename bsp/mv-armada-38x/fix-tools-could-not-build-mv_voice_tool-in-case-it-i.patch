From 440361d0cfe2065e3c4ff2ccee94544417c803f4 Mon Sep 17 00:00:00 2001
From: Victor Gu <xigu@marvell.com>
Date: Tue, 13 May 2014 18:02:06 +0800
Subject: [PATCH 1652/1825] fix: tools: could not build mv_voice_tool in case
 it is once build

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit c23fded9887fa691f39c87b23bad76d8f025cc1f

Change-Id: Ic61e9de39803d66ded5f9ecad550b452e21341a4
Signed-off-by: Victor Gu <xigu@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7969
Reviewed-by: Yehuda Yitschak <yehuday@marvell.com>
Tested-by: Yehuda Yitschak <yehuday@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 tools/voice/build-lantiq-dfev.sh |    4 ++++
 tools/voice/build-silabs.sh      |    1 +
 tools/voice/build-zarlink.sh     |    1 +
 3 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/tools/voice/build-lantiq-dfev.sh b/tools/voice/build-lantiq-dfev.sh
index 58cd5b8..98758a8 100755
--- a/tools/voice/build-lantiq-dfev.sh
+++ b/tools/voice/build-lantiq-dfev.sh
@@ -117,6 +117,10 @@ find ./lantiq/dfev/ -name "*.ko" | xargs cp -t $mod_path/lantiq/dfev
 # Zarlink voice tool
 cd $kernel_path
 cd tools/voice/lantiq-dfev
+make EXTRA_CFLAGS="-I/tmp/slic/lantiq/dfev/lib_ifxos/src/include        \
+                -I/tmp/slic/lantiq/dfev/drv_tapi/include                \
+                -I/tmp/slic/lantiq/dfev/drv_sdd/include                 \
+                -I/$kernel_path/arch/arm/plat-armada/mv_drivers_lsp/mv_phone" clean
 make EXTRA_CFLAGS="-I/tmp/slic/lantiq/dfev/lib_ifxos/src/include	\
 		-I/tmp/slic/lantiq/dfev/drv_tapi/include		\
 		-I/tmp/slic/lantiq/dfev/drv_sdd/include			\
diff --git a/tools/voice/build-silabs.sh b/tools/voice/build-silabs.sh
index a1f52ea..3fb9b50 100755
--- a/tools/voice/build-silabs.sh
+++ b/tools/voice/build-silabs.sh
@@ -43,6 +43,7 @@ cd -
 # Silabs voice tool
 cd $kernel_path
 cd tools/voice/silabs
+make SILABS_SLIC=/tmp/slic/silabs_proslic_api clean
 make SILABS_SLIC=/tmp/slic/silabs_proslic_api
 if [ $? != 0 ]; then
 	echo "Failed to build Silabs voice tool"
diff --git a/tools/voice/build-zarlink.sh b/tools/voice/build-zarlink.sh
index 89a7ec9..a8e84ad 100755
--- a/tools/voice/build-zarlink.sh
+++ b/tools/voice/build-zarlink.sh
@@ -37,6 +37,7 @@ cd -
 # Zarlink voice tool
 cd $kernel_path
 cd tools/voice/zarlink/kernel/
+make clean
 make ZARLINK_VPAPI=/tmp/slic/zarlink_vpapi
 if [ $? != 0 ]; then
 	echo "Failed to build Zarlink voice tool"
-- 
1.7.5.4

