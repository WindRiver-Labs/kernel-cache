From 2a2dec20e5c0bf33e9cd11c640a1feb5d56712ff Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Tue, 6 Nov 2012 18:04:42 +0200
Subject: [PATCH 0335/1825] pex hal : added KW40 init sequence

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit bf92f4897311448fb843504baaf9a6d484d57837

Change-Id: I1550e4273f43abc031c4e8a11a583e6400d2a2d9

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/pex/mvPex.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/pex/mvPex.c b/arch/arm/plat-armada/mv_hal/pex/mvPex.c
index fd32a0d..e21b4ff 100755
--- a/arch/arm/plat-armada/mv_hal/pex/mvPex.c
+++ b/arch/arm/plat-armada/mv_hal/pex/mvPex.c
@@ -148,6 +148,12 @@ MV_STATUS mvPexInit(MV_U32 pexIf, MV_PEX_TYPE pexType, MV_PEX_HAL_DATA *halData)
 			MV_REG_WRITE(PEX_DBG_CTRL_REG(pexIf), regVal);
 		}
 	}
+	
+	if ((ctrlModel == MV_6710_DEV_ID) ||
+		(ctrlModel == MV_6W11_DEV_ID) ||
+		(ctrlModel == MV_6707_DEV_ID)) {
+		 mvCpuIfEnablePex(pexIf);
+	}
 	/* now wait 1ms to be sure the link is valid */
 	mvOsDelay(1);
 	/* Check if we have link */
-- 
1.7.5.4

