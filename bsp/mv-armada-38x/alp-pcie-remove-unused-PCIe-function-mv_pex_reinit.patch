From ec739721e2f92f85acf8b9a873e69a3766b49f8d Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Mon, 8 Jul 2013 16:59:57 +0300
Subject: [PATCH 0835/1825] alp: pcie: remove unused PCIe function
 mv_pex_reinit

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 36b9bc87073a36abd9a32b0b0c6b792ceb013969

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I9979609676c747263d645a69c35a59b9a904b318
Reviewed-on: http://vgitil04.il.marvell.com:8080/2652
Reviewed-by: Igor Patrik <igorp@marvell.com>
Tested-by: Igor Patrik <igorp@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/pex.c |   36 +-----------------------------------
 1 files changed, 1 insertions(+), 35 deletions(-)

diff --git a/arch/arm/mach-avantalp/pex.c b/arch/arm/mach-avantalp/pex.c
index 0c7421e..a636aa3 100644
--- a/arch/arm/mach-avantalp/pex.c
+++ b/arch/arm/mach-avantalp/pex.c
@@ -13,6 +13,7 @@
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  */
+
 #include <linux/kernel.h>
 #include <linux/pci.h>
 #include <linux/ptrace.h>
@@ -116,41 +117,6 @@ void __init mv_pex_preinit(void)
 	}
 }
 
-void mv_pex_reinit(void)
-{
-	MV_BOARD_PEX_INFO *boardPexInfo = mvBoardPexInfoGet();
-	static MV_U32 pex0flg = 0;
-	unsigned int pci_if;
-
-	for (pci_if = 0; pci_if < boardPexInfo->boardPexIfNum; pci_if++) {
-		if (mvUnitMapIsPexMine(pci_if) == MV_FALSE)
-			continue;
-
-		if (mvCtrlPwrClckGet(PEX_UNIT_ID, pci_if) == MV_FALSE)
-			continue;
-
-		if ((MV_REG_READ(PEX_DBG_STATUS_REG(pci_if)) & 0x7f) != 0x7E) {
-			pr_info("no link, disabled\n");
-			mvCtrlPwrClckSet(PEX_UNIT_ID, pci_if, MV_FALSE);
-			continue;
-		}
-
-		if (mvSysPexInit(pci_if, MV_PEX_ROOT_COMPLEX) != MV_OK) {
-			pr_warn("%s: Error: mvSysPexInit(%d) failed\n", __func__, pci_if);
-			mvCtrlPwrClckSet(PEX_UNIT_ID, pci_if, MV_FALSE);
-			continue;
-		}
-
-		/* Assign bus number 0 to first active/available bus */
-		if (pex0flg == 0) {
-			mvPexLocalBusNumSet(pci_if, 0x0);
-			pex0flg = 1;
-		}
-
-		MV_REG_BIT_SET(PEX_MASK_REG(pci_if), MV_PEX_MASK_ABCD);
-	}
-}
-
 static int mv_pci_read_config(struct pci_bus *bus, unsigned int devfn,
 			      int where, int size, u32 *val)
 {
-- 
1.7.5.4

