From bdfaa04f02106fed685e1c54fa28e1b31f336375 Mon Sep 17 00:00:00 2001
From: Yoni Farhadian <yonif@marvell.com>
Date: Thu, 2 May 2013 15:48:07 +0300
Subject: [PATCH 0632/1825] PPv2: Fix parser MAC find

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit c0d46fcd4a060079b2a173afe0ab6426b663b86d

Change-Id: I1b0ef641aadf393e4fccfda928471daae60d86c3
Signed-off-by: Yoni Farhadian <yonif@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/1743
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/pp2/prs/mvPp2Prs.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/pp2/prs/mvPp2Prs.c b/arch/arm/plat-armada/mv_hal/pp2/prs/mvPp2Prs.c
index ef14834..ec7b0b0 100644
--- a/arch/arm/plat-armada/mv_hal/pp2/prs/mvPp2Prs.c
+++ b/arch/arm/plat-armada/mv_hal/pp2/prs/mvPp2Prs.c
@@ -234,7 +234,9 @@ static MV_PP2_PRS_ENTRY *mvPrsMacDaRangeFind(int portMap, unsigned char *da, uns
 
 static MV_PP2_PRS_ENTRY *mvPrsMacDaFind(int port, unsigned char *da)
 {
-	unsigned char mask[] = {0xff, 0xff, 0xff, 0xff, 0xff, 0xff};
+	unsigned char mask[6];
+
+	mask[0] = 0xff; mask[1] = 0xff; mask[2] = 0xff; mask[3] = 0xff; mask[4] = 0xff; mask[5] = 0xff;
 
 	/* Scan TCAM and see if entry with this <MAC DA, port> already exist */
 	return mvPrsMacDaRangeFind((1 << port), da, mask, PRS_UDF_MAC_DEF);
-- 
1.7.5.4

