From 16f0abc945fc4a5c0ed5f4ab7db9607745278c15 Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Wed, 22 May 2013 21:32:38 +0300
Subject: [PATCH 0674/1825] ALP: EthComp: Serdes config is fully done in bin
 header

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ce28edaa799d1b6365f0dca7e354e9db05bdb15c

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I318c1a277e23dca265583ccb011c09fd7125c75e
Reviewed-on: http://vgitil04.il.marvell.com:8080/1944
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c    |   17 -----------------
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h    |    8 --------
 2 files changed, 0 insertions(+), 25 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
index 7634101..b21afaa 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
@@ -234,21 +234,6 @@ static void mvEthComplexSwResetSet(MV_BOOL setReset)
 	MV_REG_WRITE(MV_ETHCOMP_SW_CONFIG_RESET_CTRL, reg);
 }
 
-static void mvEthComplexComPhySelectorSet(MV_U32 phy, MV_U32 val)
-{
-	MV_U32 reg;
-
-	reg = MV_REG_READ(MV_COMMON_PHY_SELECTORS_REG);
-	reg &= ~ETHCPS_COMPHY_SELECTOR_MASK(phy);
-
-	val <<= ETHCPS_COMPHY_SELECTOR_OFFSET(phy);
-	val &= ETHCPS_COMPHY_SELECTOR_MASK(phy);
-
-	reg |= val;
-
-	MV_REG_WRITE(MV_COMMON_PHY_SELECTORS_REG, reg);
-}
-
 static void mvEthComplexGbePhyPowerSet(MV_U32 phy, MV_BOOL setPowerUp)
 {
 	MV_U32 reg;
@@ -352,7 +337,6 @@ static void mvEthComplexMacToSwPort(MV_U32 port, MV_U32 swPort,
 		mvEthComplexPortDpClkSrcSet(port, 0x1);
 
 	mvEthComplexGopInit(port, MV_FALSE, MV_FALSE, MV_FALSE);
-	mvEthComplexComPhySelectorSet(2, 0x1);
 }
 
 static void mvEthComplexSwPortToRgmii(MV_U32 swPort, MV_U32 port)
@@ -377,7 +361,6 @@ static void mvEthComplexMacToGbePhy(MV_U32 port, MV_U32 phy, MV_U32 phyAddr)
 	mvEthComplexGbePhyPdConfigEdetASet(phy, 0x0);
 	mvEthComplexGbePhyPsEnaXcSSet(phy, 0x0);
 	mvEthComplexGbePhyResetSet(MV_FALSE);
-	mvEthComplexComPhySelectorSet(2, 0x1);
 	mvEthComplexGopInit(port, MV_FALSE, MV_FALSE, MV_TRUE);
 	mvEthPhyAddrSet(port, phy);
 }
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
index ce96e25..2205e07 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
@@ -153,14 +153,6 @@ enum mvSwPortSrc {
 #define     ETHQPCS_DPLL_RESET_OFFSET			4
 #define     ETHQPCS_DPLL_RESET_MASK			(0x1 << ETHQPCS_DPLL_RESET_OFFSET)
 
-/*******************************************************************************
- * Common PHYs Selectors
- */
-#define MV_COMMON_PHY_SELECTORS_REG			MV_COMMON_PHY_REGS_OFFSET
-
-#define     ETHCPS_COMPHY_SELECTOR_OFFSET(phy)		(phy)
-#define     ETHCPS_COMPHY_SELECTOR_MASK(phy)		(0x1 << ETHCPS_COMPHY_SELECTOR_OFFSET(phy))
-
 MV_STATUS mvEthComplexInit(MV_U32 ethCompConfig);
 
 #endif /* __INCmvCtrlEthCompLibh */
-- 
1.7.5.4

