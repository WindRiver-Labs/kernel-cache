From ddb54038969faf99d4312d3bb2e87b6e2005e6fa Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:35:36 +0300
Subject: [PATCH 0189/1825] fix build NFP modules w/wo Netfilter

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ef2e153c90ebbd20350fdba0b8720888642fca0f

Change-Id: Ia34c1dadfaa7cfff07428913a26c7a76f3727948
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 include/linux/mv_nfp.h |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/include/linux/mv_nfp.h b/include/linux/mv_nfp.h
index a9c7872..b551ac2 100644
--- a/include/linux/mv_nfp.h
+++ b/include/linux/mv_nfp.h
@@ -66,8 +66,13 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #ifndef LINUX_MV_NFP_H
 #define LINUX_MV_NFP_H
 
+#ifdef CONFIG_NETFILTER
 #include <net/netfilter/nf_conntrack.h>
 #include <net/netfilter/nf_nat.h>
+#endif
+#include <linux/types.h>
+#include <linux/netdevice.h>
+
 
 #if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 
@@ -119,9 +124,14 @@ struct nfp_hook_ops {
 
 	int (*nfp_hook_ct_del)(int family, u8 *src_l3, u8 *dst_l3, u16 sport, u16 dport, u8 proto);
 	int (*nfp_hook_ct_age)(int family, u8 *src_l3, u8 *dst_l3, u16 sport, u16 dport, u8 proto);
+#ifdef CONFIG_NETFILTER
 	int (*nfp_hook_ct_nat_add)(const struct nf_conntrack_tuple *tuple,
 				const struct nf_conntrack_tuple *target, enum nf_nat_manip_type maniptype);
 	int  (*nfp_hook_ct_fwd_add)(const struct nf_conntrack_tuple *tuple, int mode);
+#else
+	int (*nfp_hook_ct_nat_add)(void);
+	int (*nfp_hook_ct_fwd_add)(void);
+#endif
 	int  (*nfp_ct_is_learning_enabled)(void);
 };
 
-- 
1.7.5.4

