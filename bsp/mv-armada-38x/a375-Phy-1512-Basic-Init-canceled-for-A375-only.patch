From 5b42081111fa442ffb2637d065bc233d558b0e70 Mon Sep 17 00:00:00 2001
From: Igor Patrik <igorp@marvell.com>
Date: Mon, 15 Jul 2013 12:48:13 +0200
Subject: [PATCH 0828/1825] a375: Phy 1512 Basic Init canceled for A375 only

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ef16d505262ba5175c84be08a4b6fbb1d28e3872

	In 88F6720 DB board, phy might loose the link after reset.
	This related to second time initialization as the PHY does not
	receive a reset signal.
	The default PHY configurations are sufficient.

Change-Id: Iba63c2ee4c5260a69b5c5827cd91d39a8d40816c
Signed-off-by: Igor Patrik <igorp@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2634
Reviewed-by: Tawfik Bayouk <tawfik@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
index 832b87e..4758ef1 100644
--- a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
+++ b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
@@ -2045,12 +2045,24 @@ MV_VOID mvEth1340PhyBasicInit(void)
 *******************************************************************************/
 MV_VOID mvEthE1512PhyBasicInit(MV_U32 ethPortNum)
 {
+#if defined(MV88F672X)
+	/*
+	 * In 88F6720 DB board, phy might loose the link after reset.
+	 * This related to second time initialization as the PHY does not
+	 * receive a reset signal.
+	 * The default PHY configurations are sufficient.
+	 */
+
+	return;
+#endif
+
 /*
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x12);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x14, 0x201);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x14, 0x8201);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0);
 */
+
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x00FF);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x11, 0x214B);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x10, 0x2144);
-- 
1.7.5.4

