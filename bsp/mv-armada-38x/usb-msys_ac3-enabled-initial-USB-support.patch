From 265c56dfa80daeaf69ee65bc779b82da09f0a703 Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Thu, 5 Jun 2014 18:53:05 +0300
Subject: [PATCH 1732/1825] usb: msys_ac3: enabled initial USB support

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 382a6a2a01b23d18ca799fcb929a6dda758a561f

	- Enabled compilation of USB glue for MSYS AC3
	- Added distinction to mvSysUsbWinInit() if xHCI is not compiled (MSYS uses only eHCI/USB2.0)
	- Fixed compilation errors

Change-Id: If244bb8bd31416ec7fad09afd7b70bf97f27aaa8
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/8400
Tested-by: Star_Automation <star@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/8584
Reviewed-by: Hanna Hawa <hannah@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.c   |    6 ++++++
 .../mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.h   |    1 +
 .../mach-msys/msys_family/ctrlEnv/mvCtrlEnvSpec.h  |    1 +
 3 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.c b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.c
index 46473ee..5dadc28 100644
--- a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.c
+++ b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.c
@@ -111,6 +111,7 @@ MV_UNIT_ID mvCtrlSocUnitNums[MAX_UNITS_ID][MV_MSYS_INDEX_MAX] = {
 /* SDIO_UNIT_ID         */ { 1,		1, },
 /* I2C_UNIT_ID          */ { 2,		2, },
 /* USB_UNIT_ID          */ { 0,		1, },
+/* USB3_UNIT_ID         */ { 0,		0, },
 };
 
 static MV_U32 mvCtrlDevIdIndexGet(MV_U32 devId)
@@ -451,6 +452,11 @@ MV_U32 mvCtrlUsbMaxGet(void)
 	return mvCtrlSocUnitInfoNumGet(USB_UNIT_ID);
 }
 
+MV_U32 mvCtrlUsb3MaxGet(void)
+{
+	return 0; /* no USB3.0 */
+}
+
 /*******************************************************************************
 * mvCtrlUtmiPhySelectorSet - configures the shared MAC access between USB2/3
 *
diff --git a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.h b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.h
index 412ae88..f1faf13 100644
--- a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.h
+++ b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvLib.h
@@ -164,6 +164,7 @@ MV_U32	  mvCtrlEthMaxPortGet(MV_VOID);
 MV_U8	  mvCtrlEthMaxCPUsGet(MV_VOID);
 #if defined(MV_INCLUDE_USB)
 MV_U32 mvCtrlUsbMaxGet(MV_VOID);
+MV_U32 mvCtrlUsb3MaxGet(MV_VOID);
 MV_VOID mvCtrlUtmiPhySelectorSet(MV_U32 usbUnitId);
 #endif
 #if defined(MV_INCLUDE_XOR)
diff --git a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvSpec.h b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvSpec.h
index c0a60e1..137ab86 100644
--- a/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvSpec.h
+++ b/arch/arm/mach-msys/msys_family/ctrlEnv/mvCtrlEnvSpec.h
@@ -232,6 +232,7 @@ typedef enum _mvUnitId {
 	SDIO_UNIT_ID,
 	I2C_UNIT_ID,
 	USB_UNIT_ID,
+	USB3_UNIT_ID,
 	MAX_UNITS_ID
 } MV_UNIT_ID;
 
-- 
1.7.5.4

