From f695a25e2ba67f3c37367ab805eadc8efd4d0410 Mon Sep 17 00:00:00 2001
From: Uri Eliyahu <uriel@marvell.com>
Date: Tue, 31 Dec 2013 19:19:32 +0200
Subject: [PATCH 1260/1825] pp3: GOP additional API functions

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit fec1fcf14ae5019ee9fe7a252adc2e8db2448dfd

	- add gop basic API

Change-Id: Icb6ebe5a108b1a171e17e738a8868c296b1e6ef7
Signed-off-by: Uri Eliyahu <uriel@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4986
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Reviewed-by: Yelena Krivosheev <yelena@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/net/ethernet/marvell/pp3/Makefile     |    2 +-
 drivers/net/ethernet/marvell/pp3/gop/mv_gop.c |  123 +++++++++++++++++++++++++
 drivers/net/ethernet/marvell/pp3/gop/mv_gop.h |  119 ++++++++++++++++++++++++
 3 files changed, 243 insertions(+), 1 deletions(-)
 create mode 100644 drivers/net/ethernet/marvell/pp3/gop/mv_gop.c
 create mode 100644 drivers/net/ethernet/marvell/pp3/gop/mv_gop.h

diff --git a/drivers/net/ethernet/marvell/pp3/Makefile b/drivers/net/ethernet/marvell/pp3/Makefile
index 3c26206..b377d07 100644
--- a/drivers/net/ethernet/marvell/pp3/Makefile
+++ b/drivers/net/ethernet/marvell/pp3/Makefile
@@ -6,4 +6,4 @@ obj-$(CONFIG_MV_PP3) += mv_pp3.o
 
 ccflags-y       += -Idrivers/net/ethernet/marvell/pp3
 
-mv_pp3-objs := net_dev/mv_netdev.o hmac/mv_hmac.o emac/mv_emac.o emac/mv_emac_sysfs.o
+mv_pp3-objs := net_dev/mv_netdev.o hmac/mv_hmac.o emac/mv_emac.o emac/mv_emac_sysfs.o gop/mv_gop.o
diff --git a/drivers/net/ethernet/marvell/pp3/gop/mv_gop.c b/drivers/net/ethernet/marvell/pp3/gop/mv_gop.c
new file mode 100644
index 0000000..90890ad
--- /dev/null
+++ b/drivers/net/ethernet/marvell/pp3/gop/mv_gop.c
@@ -0,0 +1,123 @@
+/*******************************************************************************
+Copyright (C) Marvell International Ltd. and its affiliates
+
+This software file (the "File") is owned and distributed by Marvell
+International Ltd. and/or its affiliates ("Marvell") under the following
+alternative licensing terms.  Once you have made an election to distribute the
+File under one of the following license alternatives, please (i) delete this
+introductory statement regarding license alternatives, (ii) delete the two
+license alternatives that you have not elected to use and (iii) preserve the
+Marvell copyright notice above.
+
+********************************************************************************
+Marvell Commercial License Option
+
+If you received this File from Marvell and you have entered into a commercial
+license agreement (a "Commercial License") with Marvell, the File is licensed
+to you under the terms of the applicable Commercial License.
+
+********************************************************************************
+Marvell GPL License Option
+
+If you received this File from Marvell, you may opt to use, redistribute and/or
+modify this File in accordance with the terms and conditions of the General
+Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+available along with the File in the license.txt file or by writing to the Free
+Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+DISCLAIMED.  The GPL License provides additional details about this warranty
+disclaimer.
+********************************************************************************
+Marvell BSD License Option
+
+If you received this File from Marvell, you may opt to use, redistribute and/or
+modify this File under the following licensing terms.
+Redistribution and use in source and binary forms, with or without modification,
+are permitted provided that the following conditions are met:
+
+    *   Redistributions of source code must retain the above copyright notice,
+	this list of conditions and the following disclaimer.
+
+    *   Redistributions in binary form must reproduce the above copyright
+	notice, this list of conditions and the following disclaimer in the
+	documentation and/or other materials provided with the distribution.
+
+    *   Neither the name of Marvell nor the names of its contributors may be
+	used to endorse or promote products derived from this software without
+	specific prior written permission.
+
+THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+*******************************************************************************/
+
+#include "gop/mv_gop.h"
+
+/*--------------------------------------------------------------*/
+/*------------------------- LINK -------------------------------*/
+/*--------------------------------------------------------------*/
+
+/* TODO: change ret val to bool */
+int mv_gop_is_link_up(int port)
+{
+	/* TODO */
+	return 0;
+}
+
+int mv_gop_link_status(int port, struct mv_link_status *p_status)
+{
+	/* TODO */
+	return 0;
+/*
+	pStatus->is_up = 0;
+	pStatus->speed = 0;
+	pStatus->duplex = 0;
+	pStatus->fc = 0;
+*/
+}
+
+char *mv_gop_link_speed_str_get(enum mv_link_speed speed)
+{
+	char *str;
+
+	switch (speed) {
+	case MV_ETH_SPEED_10:
+		str = "10 Mbps";
+		break;
+	case MV_ETH_SPEED_100:
+		str = "100 Mbps";
+		break;
+	case MV_ETH_SPEED_1000:
+		str = "1 Gbps";
+		break;
+	case MV_ETH_SPEED_2000:
+		str = "2 Gbps";
+		break;
+	case MV_ETH_SPEED_AN:
+		str = "AutoNeg";
+		break;
+	default:
+		str = "Unknown";
+	}
+	return str;
+}
+
+/*--------------------------------------------------------------*/
+/*-------------------------- RX --------------------------------*/
+/*--------------------------------------------------------------*/
+
+
+/*--------------------------------------------------------------*/
+/*-------------------------- TX --------------------------------*/
+/*--------------------------------------------------------------*/
diff --git a/drivers/net/ethernet/marvell/pp3/gop/mv_gop.h b/drivers/net/ethernet/marvell/pp3/gop/mv_gop.h
new file mode 100644
index 0000000..9d4b443
--- /dev/null
+++ b/drivers/net/ethernet/marvell/pp3/gop/mv_gop.h
@@ -0,0 +1,119 @@
+/*******************************************************************************
+Copyright (C) Marvell International Ltd. and its affiliates
+
+This software file (the "File") is owned and distributed by Marvell
+International Ltd. and/or its affiliates ("Marvell") under the following
+alternative licensing terms.  Once you have made an election to distribute the
+File under one of the following license alternatives, please (i) delete this
+introductory statement regarding license alternatives, (ii) delete the two
+license alternatives that you have not elected to use and (iii) preserve the
+Marvell copyright notice above.
+
+
+********************************************************************************
+Marvell GPL License Option
+
+If you received this File from Marvell, you may opt to use, redistribute and/or
+modify this File in accordance with the terms and conditions of the General
+Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+available along with the File in the license.txt file or by writing to the Free
+Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+DISCLAIMED.  The GPL License provides additional details about this warranty
+disclaimer.
+*******************************************************************************/
+#ifndef __mv_gop_h__
+#define __mv_gop_h__
+
+/*--------------------------------------------------------------*/
+/*------------------------- LINK -------------------------------*/
+/*--------------------------------------------------------------*/
+enum mv_link_speed {
+	MV_ETH_SPEED_AN,
+	MV_ETH_SPEED_10,
+	MV_ETH_SPEED_100,
+	MV_ETH_SPEED_1000,
+	MV_ETH_SPEED_2000,
+};
+
+enum mv_link_duplex {
+	MV_ETH_DUPLEX_AN,
+	MV_ETH_DUPLEX_HALF,
+	MV_ETH_DUPLEX_FULL
+};
+
+enum mv_link_fc {
+	MV_ETH_FC_AN_ADV_DIS,
+	MV_ETH_FC_AN_ADV_SYM,
+	MV_ETH_FC_DISABLE,
+	MV_ETH_FC_ENABLE
+};
+
+struct mv_link_status {
+	/* TODO: change is_up val to bool */
+	int is_up;
+	enum mv_link_speed speed;
+	enum mv_link_duplex duplex;
+	enum mv_link_fc fc;
+};
+
+int	mv_gop_is_link_up(int port); /* TODO: change ret val to bool */
+int	mv_gop_link_status(int port, struct mv_link_status *pStatus);
+char	*mv_gop_link_speed_str_get(enum mv_link_speed speed);
+
+/*--------------------------------------------------------------*/
+/*---------------------- Interrupts ----------------------------*/
+/*--------------------------------------------------------------*/
+static inline void mv_gop_isr_sum_mask(void)
+{
+	/* TODO */
+}
+
+static inline void mv_gop_isr_sum_unmask(void)
+{
+	/* TODO */
+}
+
+static inline void mv_pp3_gop_cpu_interrupt_enable(int port, int cpu_mask)
+{
+	/* TODO */
+}
+
+static inline void mv_pp3_gop_cpu_interrupt_disable(int port, int cpu_mask)
+{
+	/* TODO */
+}
+
+static inline unsigned int mv_gop_isr_cause_get(int port)
+{
+	/* TODO */
+	return 0;
+}
+
+static inline unsigned int mv_gop_isr_sum_get_cause_get(void)
+{
+	/* TODO */
+	return 0;
+}
+
+static inline void mv_gop_isr_unmask(int port)
+{
+	/* TODO */
+}
+
+static inline void mv_gop_isr_mask(int port)
+{
+	/* TODO */
+}
+/*--------------------------------------------------------------*/
+/*-------------------------- RX --------------------------------*/
+/*--------------------------------------------------------------*/
+
+/*--------------------------------------------------------------*/
+/*-------------------------- TX --------------------------------*/
+/*--------------------------------------------------------------*/
+
+#endif /* __mv_gop_h__ */
-- 
1.7.5.4

