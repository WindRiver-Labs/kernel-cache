From a2c28fa417644e64d0aededdf6ee0769bc6b27ba Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 10 Oct 2014 14:58:13 +0800
Subject: [PATCH 1812/1825] mv_cesa: export the function for the cesa_ocf_drv
 module

In the cesa_ocf_drv module, It reference the external function.
When the module is compiled, It need the symbol table to support it.

ERROR: "mvCesaIfFinish" [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.ko] undefined!
ERROR: "mvCesaIfAction" [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.ko] undefined!
ERROR: "mvCesaIfSessionOpen" [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.ko] undefined!
ERROR: "mvCesaIfSessionClose" [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.ko] undefined!
ERROR: "mvCesaIfReadyGet" [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.ko] undefined!

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-armada/mv_drivers_lsp/mv_cesa/cesa_if.c   |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_if.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_if.c
index 2f534d7..bb932f4 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_if.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_if.c
@@ -62,6 +62,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
+#include <linux/export.h>
 #include "mvCommon.h"
 #include "mvOs.h"
 #include "cesa_if.h"
@@ -233,6 +234,7 @@ MV_STATUS mvCesaIfAction(MV_CESA_COMMAND *pCmd)
 
 	return status;
 }
+EXPORT_SYMBOL(mvCesaIfAction);
 
 MV_STATUS mvCesaIfReadyGet(MV_U8 chan, MV_CESA_RESULT *pResult)
 {
@@ -330,6 +332,7 @@ out:
 
 	return status;
 }
+EXPORT_SYMBOL(mvCesaIfReadyGet);
 
 MV_STATUS mvCesaIfPolicySet(MV_CESA_POLICY policy, MV_CESA_FLOW_TYPE flow)
 {
@@ -395,16 +398,19 @@ MV_STATUS mvCesaIfFinish(void)
 
 	return mvCesaFinish();
 }
+EXPORT_SYMBOL(mvCesaIfFinish);
 
 MV_STATUS mvCesaIfSessionOpen(MV_CESA_OPEN_SESSION *pSession, short *pSid)
 {
 	return mvCesaSessionOpen(pSession, pSid);
 }
+EXPORT_SYMBOL(mvCesaIfSessionOpen);
 
 MV_STATUS mvCesaIfSessionClose(short sid)
 {
 	return mvCesaSessionClose(sid);
 }
+EXPORT_SYMBOL(mvCesaIfSessionClose);
 
 MV_VOID mvCesaIfDebugMbuf(const char *str, MV_CESA_MBUF *pMbuf, int offset, int size)
 {
-- 
1.7.5.4

