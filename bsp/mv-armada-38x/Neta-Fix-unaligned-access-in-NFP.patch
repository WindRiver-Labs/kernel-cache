From ab0d981fa7b42e15b172968006651c2fff4651af Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:35:32 +0300
Subject: [PATCH 0184/1825] Neta: Fix unaligned access in NFP

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit e92c835b66ab54f0a4f35d006d0934535e2f835c

Change-Id: I00fdf4d5941af5ab61d7a6a8d4dd56bc333eed72
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c     |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
index 5c35eb5..7f712cb 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
@@ -169,7 +169,7 @@ __setup("mv_port3_config=", mv_eth_cmdline_port3_config);
 struct mv_eth_nfp_ops *mv_eth_nfp_ops = NULL;
 int mv_eth_nfp_register(mv_eth_nfp_func_t *func)
 {
-	mv_eth_nfp_ops = kmalloc(sizeof(struct nfpHookMgr *), GFP_ATOMIC);
+	mv_eth_nfp_ops = kmalloc(sizeof(struct mv_eth_nfp_ops), GFP_ATOMIC);
 	if (mv_eth_nfp_ops == NULL) {
 		printk(KERN_ERR "%s: Error allocating memory for mv_eth_nfp_ops\n", __func__);
 		return -ENOMEM;
-- 
1.7.5.4

