From 38c38db8cb94322eeb8d9bd3db00ae52cbc0afbc Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 10 Oct 2014 09:25:21 +0800
Subject: [PATCH 1809/1825] ahci: Add the miss variable for the resume
 function

commit ddaf205dbcd9 [sata: introduce new Marvell AHCI SATA platform driver] from
https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
introduces the following compile error:

The compile error information:
drivers/ata/ahci_mv.c: In function 'ahci_mv_resume':
error: 'pdata' undeclared (first use in this function)
  if (pdata->dram != NULL)
      ^
drivers/ata/ahci_mv.c:241:6:
note: each undeclared identifier is reported only once for each function
it appears in
drivers/ata/ahci_mv.c:242:26:
error: 'hpriv' undeclared (first use in this function)
   ahci_mv_windows_config(hpriv, pdata->dram);
                          ^
  LD      drivers/i2c/built-in.o
make[3]: *** [drivers/ata/ahci_mv.o] Error 1

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/ata/ahci_mv.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/ata/ahci_mv.c b/drivers/ata/ahci_mv.c
index 5407ce1..04d268c 100644
--- a/drivers/ata/ahci_mv.c
+++ b/drivers/ata/ahci_mv.c
@@ -233,6 +233,8 @@ static int ahci_mv_suspend(struct device *dev)
 static int ahci_mv_resume(struct device *dev)
 {
 	struct ata_host *host = dev_get_drvdata(dev);
+	struct ahci_host_priv *hpriv = host->private_data;
+	struct mv_sata_platform_data *pdata = dev_get_platdata(dev);
 	int rc;
 
 	/*
-- 
1.7.5.4

