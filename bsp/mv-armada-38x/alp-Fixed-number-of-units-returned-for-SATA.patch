From dc77a7b67c2389e011b5005e829c091fb885be6d Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Sun, 23 Feb 2014 13:07:43 +0200
Subject: [PATCH 1391/1825] alp: Fixed number of units returned for SATA

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 7259eff03d2ccbf2c6e4993ab1abd745f1ef76ed

Change-Id: I68f4279cdcc891a9230f7fa201839510badc8956
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/5874
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c        |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
index d652e87..64b94a3 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
@@ -1022,7 +1022,7 @@ MV_U32 mvCtrlSataMaxPortGet(MV_VOID)
 	MV_U32 sata_ports = mvCtrlSocUnitInfoNumGet(SATA_UNIT_ID);
 	MV_U32 revID = mvCtrlRevGet();
 	/* Z1, Z2, Z3 support 1 SATA port */
-	if (revID <= MV_88F66X0_Z3_ID)
+	if (revID <= MV_88F66X0_Z3_ID && mvCtrlModelGet() == MV_6660_DEV_ID)
 		return sata_ports - 1;
 	else
 		return sata_ports;
-- 
1.7.5.4

