From 88ebfeebcd5ad3d8bb45b0214d959c803c6a9711 Mon Sep 17 00:00:00 2001
From: Victor Gu <xigu@marvell.com>
Date: Wed, 21 May 2014 15:30:35 +0800
Subject: [PATCH 1680/1825] fix: alp: pon: GPON MIB for received octects and
 frames

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b685d01c6e2df284b9f843f86d13ef525311ff1d

    need to count both good and bad octects and frames
Signed-off-by: Victor Gu <xigu@marvell.com>

Change-Id: I2d7d55b78cbdda1b76aad0d492d414d50bd48b6c
Reviewed-on: http://vgitil04.il.marvell.com:8080/8159
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Yehuda Yitschak <yehuday@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_pon/core/gpon/gponCustomerApi.c             |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_pon/core/gpon/gponCustomerApi.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_pon/core/gpon/gponCustomerApi.c
index 4490521..d41c487 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_pon/core/gpon/gponCustomerApi.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_pon/core/gpon/gponCustomerApi.c
@@ -751,8 +751,8 @@ int mrvl_api_gpon_get_gemport_stat(unsigned int gem, MRVL_GEM_STAT *stat)
 	gemMibCounters.gem_port  = gem;
 	gemMibCounters.direction = GEMPORTPMDIRECTION_DS;
 	onuGponApiGemPortPmGet(&gemMibCounters);
-	stat->rcvoctets  = gemMibCounters.good_octets;
-	stat->rcvframes  = gemMibCounters.good_frames;
+	stat->rcvoctets  = gemMibCounters.good_octets + gemMibCounters.bad_octets;
+	stat->rcvframes  = gemMibCounters.good_frames + gemMibCounters.bad_frames;
 
 	gemMibCounters.direction = GEMPORTPMDIRECTION_US;
 	onuGponApiGemPortPmGet(&gemMibCounters);
-- 
1.7.5.4

