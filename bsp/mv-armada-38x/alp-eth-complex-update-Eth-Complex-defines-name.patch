From 6ba6b8bfca5a6685be8d03e82037eb3907e9ec8c Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Mon, 17 Feb 2014 16:14:11 +0200
Subject: [PATCH 1362/1825] alp: eth complex: update Eth Complex defines name

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 36b0dff64d06643f891a4d3ff7c7ce55e2dbe300

	Set wrong name for Eth Complex define of bits 14 and 17
	the correct names is "GPHY Port Source" and not "GPHY Port SMI Source"

Change-Id: Ieebc210f9605ba5e4e4ec650be306fcde22724f2
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/5692
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c    |    6 +++---
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h    |    4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
index b444706..5bdd56a 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
@@ -93,10 +93,10 @@ static void mvEthComplexGbePhySrcSet(MV_U32 phy, MV_U32 src)
 	MV_U32 reg;
 
 	reg = MV_REG_READ(MV_ETHCOMP_CTRL_REG);
-	reg &= ~ETHCC_GBE_PHY_PORT_SMI_SRC_MASK(phy);
+	reg &= ~ETHCC_GBE_PHY_PORT_SRC_MASK(phy);
 
-	src <<= ETHCC_GBE_PHY_PORT_SMI_SRC_OFFSET(phy);
-	src &= ETHCC_GBE_PHY_PORT_SMI_SRC_MASK(phy);
+	src <<= ETHCC_GBE_PHY_PORT_SRC_OFFSET(phy);
+	src &= ETHCC_GBE_PHY_PORT_SRC_MASK(phy);
 
 	reg |= src;
 
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
index 1829e52..290003f 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
@@ -106,8 +106,8 @@ enum mvSwPortSrc {
 #define     ETHCC_GBE_MAC_SRC_OFFSET(port)		(port == 0 ? 10 : (port == 1 ? 12 : 10))
 #define     ETHCC_GBE_MAC_SRC_MASK(port)		(0x3 << ETHCC_GBE_MAC_SRC_OFFSET(port))
 
-#define     ETHCC_GBE_PHY_PORT_SMI_SRC_OFFSET(phy)	((phy >= 0 && phy <= 3) ? 14 + phy : 14)
-#define     ETHCC_GBE_PHY_PORT_SMI_SRC_MASK(phy)	(0x1 << ETHCC_GBE_PHY_PORT_SMI_SRC_OFFSET(phy))
+#define     ETHCC_GBE_PHY_PORT_SRC_OFFSET(phy)		((phy >= 0 && phy <= 3) ? 14 + phy : 14)
+#define     ETHCC_GBE_PHY_PORT_SRC_MASK(phy)		(0x1 << ETHCC_GBE_PHY_PORT_SRC_OFFSET(phy))
 
 #define     ETHCC_GE_MAC0_SW_PORT_6_SPEED_OFFSET	18
 #define     ETHCC_GE_MAC0_SW_PORT_6_SPEED_MASK		(0x1 << ETHCC_GE_MAC0_SW_PORT_6_SPEED_OFFSET)
-- 
1.7.5.4

