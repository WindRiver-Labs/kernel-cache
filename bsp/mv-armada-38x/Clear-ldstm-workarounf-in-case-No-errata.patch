From 33afc518a22646e206960ce85ff046c75ca0745b Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:35:25 +0300
Subject: [PATCH 0176/1825] Clear ldstm workarounf in case No errata

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 2789b7d3f6ec2acc92f3dd4254f47c390b429a10

Change-Id: Ie37ba30eb16ec053d31479067afda46220c1fffa
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mm/proc-sheeva_pj4bv7.S |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mm/proc-sheeva_pj4bv7.S b/arch/arm/mm/proc-sheeva_pj4bv7.S
index 7fea579..ec52d8f 100644
--- a/arch/arm/mm/proc-sheeva_pj4bv7.S
+++ b/arch/arm/mm/proc-sheeva_pj4bv7.S
@@ -408,6 +408,8 @@ defined(CONFIG_SMP)
 	mrc        p15, 1, r0, c15, c1, 0                         /* Read */
 #ifdef CONFIG_SHEEVA_ERRATA_ARM_CPU_6136
 	orr          r0, r0, #0x001000                              /* BIT12 ldstm_first Two_sgl --> '1' Force first issue to be single */
+#else
+        bic          r0, r0, #0x001000                              /* BIT12 ldstm_first Two_sgl --> '0' The first issue is double word */
 #endif
 	orr          r0, r0, #0x400000                              /* BIT22 dvm_wakeup_dis --> '1' WFI/WFE will serve the DVM and back to idle */
 	mcr        p15, 1, r0, c15, c1, 0                         /* Write */
-- 
1.7.5.4

