From 4401bb6f227613773f0193a6a1f4c9e883032bda Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:33:03 +0300
Subject: [PATCH 0032/1825] update L2 Aux Control Register mappings to A0

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 84b83edc56c24fe166649be1fb2d8fd263f161b5

Change-Id: I8c8a2cae002b00901f162defcb18ec78207edd43
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../arm/plat-armada/include/plat/cache-aurora-l2.h |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/include/plat/cache-aurora-l2.h b/arch/arm/plat-armada/include/plat/cache-aurora-l2.h
index 197891d..d2e4e06 100644
--- a/arch/arm/plat-armada/include/plat/cache-aurora-l2.h
+++ b/arch/arm/plat-armada/include/plat/cache-aurora-l2.h
@@ -123,12 +123,21 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #define L2ACR_ASSOCIATIVITY_8WAY	(7 << L2ACR_ASSOCIATIVITY_OFFSET)
 #define L2ACR_WAY_SIZE_OFFSET		17			
 #define L2ACR_WAY_SIZE_MASK		(0x7 << L2ACR_WAY_SIZE_OFFSE)
+#ifdef CONFIG_ARMADA_XP_REV_Z1
 #define L2ACR_WAY_SIZE_16KB		(1 << L2ACR_WAY_SIZE_OFFSET)
 #define L2ACR_WAY_SIZE_32KB		(2 << L2ACR_WAY_SIZE_OFFSET)
 #define L2ACR_WAY_SIZE_64KB		(3 << L2ACR_WAY_SIZE_OFFSET)
 #define L2ACR_WAY_SIZE_128KB		(4 << L2ACR_WAY_SIZE_OFFSET)
 #define L2ACR_WAY_SIZE_256KB		(5 << L2ACR_WAY_SIZE_OFFSET)
 #define L2ACR_WAY_SIZE_512KB		(6 << L2ACR_WAY_SIZE_OFFSET)
+#else  /* A0 and over */
+#define L2ACR_WAY_SIZE_16KB		(2 << L2ACR_WAY_SIZE_OFFSET)
+#define L2ACR_WAY_SIZE_32KB		(3 << L2ACR_WAY_SIZE_OFFSET)
+#define L2ACR_WAY_SIZE_64KB		(4 << L2ACR_WAY_SIZE_OFFSET)
+#define L2ACR_WAY_SIZE_128KB		(5 << L2ACR_WAY_SIZE_OFFSET)
+#define L2ACR_WAY_SIZE_256KB		(6 << L2ACR_WAY_SIZE_OFFSET)
+#define L2ACR_WAY_SIZE_512KB		(7 << L2ACR_WAY_SIZE_OFFSET)
+#endif
 #define L2ACR_ECC_ENABLE		BIT20
 #define L2ACR_PARITY_ENABLE		BIT21
 #define L2ACR_INV_EVIC_LINE_UC_ERR	BIT22
@@ -136,7 +145,6 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #define L2ACR_FORCE_WR_ALLOC_MASK	(0x3 << L2ACR_FORCE_WR_ALLOC_OFFSET)
 #define L2ACR_FORCE_WR_ALLOC_DISABLE	(0 << L2ACR_FORCE_WR_ALLOC_OFFSET)
 #define L2ACR_FORCE_NO_WR_ALLOC		(1 << L2ACR_FORCE_WR_ALLOC_OFFSET)
-#define L2ACR_FORCE_WR_ALLOC		(2 << L2ACR_FORCE_WR_ALLOC_OFFSET)
 #define L2ACR_REPLACEMENT_OFFSET	27
 #define L2ACR_REPLACEMENT_MASK		(0x3 << L2ACR_REPLACEMENT_OFFSET)
 #define L2ACR_REPLACEMENT_TYPE_WAYRR	(0 << L2ACR_REPLACEMENT_OFFSET)
-- 
1.7.5.4

