From 44c80c320ad2f6c08b962e1c2c573ae4114e6e7a Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Thu, 24 Apr 2014 16:54:51 +0300
Subject: [PATCH 1587/1825] dfev: Updated DFEV reamde file

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit f7dbf450dab9f999947d8f0e2d9bf3d4c6c9e184

Change-Id: I4763f3d151a4972d4c434433d5457a32acc6df96
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7196
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Victor Gu <xigu@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 tools/voice/lantiq-dfev/README |   49 +++++++++++++++++++--------------------
 1 files changed, 24 insertions(+), 25 deletions(-)

diff --git a/tools/voice/lantiq-dfev/README b/tools/voice/lantiq-dfev/README
index c119d11..874b6c8 100644
--- a/tools/voice/lantiq-dfev/README
+++ b/tools/voice/lantiq-dfev/README
@@ -2,15 +2,17 @@
 | How to compile Lantiq DFEV drivers and mv_voice_tool |
 +------------------------------------------------------+
 
-1. Unpack configure and build LSP using avanta_lp_amp_defconfig.
+1. Unpack configure and build LSP using avanta_lp_defconfig.
    Make sure that the following options are configured as shown below:
 
-	CONFIG_DFEV_SLIC_SUPPORT=y
-	# CONFIG_MV_IPC_NET is not set
+	CONFIG_LANTIQ_DFEV_SLIC_SUPPORT=y
+	CONFIG_MV_IPC_FREERTOS_DRIVER=y
+	CONFIG_MV_INCLUDE_DRAGONITE=y
+	CONFIG_MV_TDM_PCM_CLK_8MHZ=y
 
-2. Build Lantiq lib_ifxos-1.5.17:
+2. Build Lantiq lib_ifxos:
 
-	$ cd lib_ifxos-1.5.17
+	$ cd <path-to-slic-drivers>/dfev/lib_ifxos
 	$ ./configure								\
 		--host=arm-marvell-linux-gnueabi				\
 		--enable-linux-26						\
@@ -20,16 +22,16 @@
 	$ make
 	$ ls -l src/drv_ifxos.ko
 
-3. Build Lantiq drv_tapi-4.11.0.1:
+3. Build Lantiq drv_tapi:
 
-	$ cd drv_tapi-4.11.0.1
+	$ cd <path-to-slic-drivers>/dfev/drv_tapi
 	$ ./configure								\
 		--host=arm-marvell-linux-gnueabi				\
 		--enable-linux-26						\
 		--with-kernel-build=<path-to-lsp>				\
 		--with-kernel-incl=<path-to-lsp>/include			\
 		--with-kernel-module						\
-		--with-ifxos-incl=<path-to-lib_ifxos-1.5.17>/src/include	\
+		--with-ifxos-incl=<path-to-lib_ifxos>/src/include	\
 		--enable-module							\
 		--enable-tapi4							\
 		--enable-cont-measurement					\
@@ -43,44 +45,44 @@
 	$ make
 	$ ls -l src/drv_tapi.ko
 
-4. Build Lantiq drv_sdd-1.0.3.0:
+4. Build Lantiq drv_sdd:
 
-	$ cd drv_sdd-1.0.3.0
+	$ cd <path-to-slic-drivers>/dfev/drv_sdd
 	$ ./configure								\
 		--host=arm-marvell-linux-gnueabi				\
 		--enable-linux-26						\
 		--with-kernel-build=<path-to-lsp>				\
 		--with-kernel-incl=<path-to-lsp>/include			\
-		--with-ifxos-incl=<path-to-lib_ifxos-1.5.17>/src/include	\
-		--with-tapi-incl=<path-to-drv_tapi-4.11.0.1>/include
+		--with-ifxos-incl=<path-to-lib_ifxos>/src/include	\
+		--with-tapi-incl=<path-to-drv_tapi>/include
 	$ make
 	$ ls -l src/drv_sdd.ko
 
 5. Build DFEV driver:
 
-	$ cd drv_dfev
+	$ cd <path-to-slic-drivers>/dfev/drv_dfev
 	$ make -C <path-to-lsp> M=$PWD						\
 		ARCH=arm CROSS_COMPILE=arm-marvell-linux-gnueabi-		\
-		DRV_SDD=<path-to-drv_sdd-1.0.3.0>				\
-		LIB_IFXOS=<path-to-lib_ifxos-1.5.17>
+		DRV_SDD=<path-to-drv_sdd>				\
+		LIB_IFXOS=<path-to-lib_ifxos>
 	$ ls -l drv_dfev.ko
 
 6. Build VMMC interface:
 
-	$ cd vmmc_if
+	$ cd <path-to-slic-drivers>/dfev/vmmc_if
 	$ make -C <path-to-lsp> M=$PWD						\
 		ARCH=arm CROSS_COMPILE=arm-marvell-linux-gnueabi-		\
-		DRV_SDD=<path-to-drv_sdd-1.0.3.0>				\
-		LIB_IFXOS=<path-to-lib_ifxos-1.5.17>
+		DRV_SDD=<path-to-drv_sdd>				\
+		LIB_IFXOS=<path-to-lib_ifxos>
 	$ ls -l vmmc_if.ko
 
 7. Build mv_voice_tool for Lantiq SLIC:
 
 	$ cd mv_voice_tool
 	$ make ARCH=arm CROSS_COMPILE=arm-marvell-linux-gnueabi-		\
-		EXTRA_CFLAGS="-I<path-to-lib_ifxos-1.5.17>/src/include		\
-			-I<path-to-drv_tapi-4.11.0.1>/include			\
-			-I<path-to-drv_sdd-1.0.3.0>/include			\
+		EXTRA_CFLAGS="-I<path-to-lib_ifxos>/src/include		\
+			-I<path-to-drv_tapi>/include			\
+			-I<path-to-drv_sdd>/include			\
 			-I<path-to-lsp>/arch/arm/plat-armada/mv_drivers_lsp/mv_phone"
 	$ ls -l mv_voice_tool
 
@@ -94,12 +96,9 @@
 	# mknod /dev/tal c 10 74
 	# mknod /dev/sdd c 253 0
 
-3a. Load drivers (on Host CPU):
+3. Load drivers:
 	# insmod drv_ifxos.ko && insmod drv_tapi.ko && insmod drv_sdd.ko && insmod vmmc_if.ko
 
-3b. Load drivers (on DFEV CPU):
-	# insmod drv_dfev.ko
-
 4. Run mv_voice_tool (on Host CPU):
 	# ./mv_voice_tool
 
-- 
1.7.5.4

