From 1805ba3297703ed503742fed2525b7f250d12bcd Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Thu, 12 Dec 2013 11:29:08 +0200
Subject: [PATCH 1212/1825] fix: a38x: fixed MPP 20 for RD-AP and IO expander
 values for RD boards

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b2097f7b1d2b3338b7b38e297d381422de3d5727

	1. Fixed IO expander for RD MPP 19 MUX settings
	2. Change GPIO 20 to input for RD-AP to diactive SATA led

Change-Id: I8d41ae4047c136d88a968cf09acde8d5525c4332
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4725
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../armada_38x_family/boardEnv/mvBoardEnvSpec.c    |    6 +++---
 .../armada_38x_family/boardEnv/mvBoardEnvSpec.h    |    5 ++++-
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
index e6b2ee0..aa989dc 100644
--- a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
@@ -234,7 +234,7 @@ struct MV_BOARD_IO_EXPANDER ioExpNas[] = {
 	{1, 6, 0xE7},
 	{1, 7, 0xF9},
 	{1, 2, 0x08},
-	{1, 3, 0x02}
+	{1, 3, 0x00}
 };
 
 MV_BOARD_INFO rdNas88f68XX_board_info = {
@@ -312,7 +312,7 @@ struct MV_BOARD_IO_EXPANDER ioExpWap[] = {
 	{1, 6, 0xE7},
 	{1, 7, 0xF9},
 	{1, 2, 0x18},
-	{1, 3, 0x04}
+	{1, 3, 0x06}
 };
 MV_BOARD_INFO rdWAP88f68XX_board_info = {
 	.boardName			= "RD-AP-88F6820-DDR3",
@@ -339,7 +339,7 @@ MV_BOARD_INFO rdWAP88f68XX_board_info = {
 	.pmuPwrUpDelay			= 80000,
 
 	/* GPP values */
-	.gppOutEnValLow			= RD_88F68XX_GPP_OUT_ENA_LOW,
+	.gppOutEnValLow			= RD_WAP_88F68XX_GPP_OUT_ENA_LOW,
 	.gppOutEnValMid			= RD_88F68XX_GPP_OUT_ENA_MID,
 	.gppOutValLow			= RD_88F68XX_GPP_OUT_VAL_LOW,
 	.gppOutValMid			= RD_88F68XX_GPP_OUT_VAL_MID,
diff --git a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.h
index fc8391c..583139f 100644
--- a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.h
@@ -168,7 +168,7 @@
 #define RD_88F68XX_MPP0_7               0x11111111
 #define RD_88F68XX_MPP8_15              0x11111111
 #define RD_NAS_88F68XX_MPP16_23         0x11244011
-#define RD_WAP_88F68XX_MPP16_23         0x11243011
+#define RD_WAP_88F68XX_MPP16_23         0x11203011
 #define RD_88F68XX_MPP24_31             0x22222111
 #define RD_88F68XX_MPP32_39             0x22200002
 #define RD_88F68XX_MPP40_47             0x30042022
@@ -179,6 +179,9 @@
 					   BIT11 | BIT19 | BIT20 | BIT22 | BIT23 | BIT25 | BIT26 | \
 					   BIT27 | BIT29 | BIT30 | BIT31))
 #define RD_88F68XX_GPP_OUT_ENA_MID	(~(BIT0 | BIT1 | BIT2 | BIT3 | BIT4 | BIT15 | BIT16 | BIT17 | BIT18))
+#define RD_WAP_88F68XX_GPP_OUT_ENA_LOW      (~(BIT1  | BIT4  | BIT6  | BIT7  | BIT8  | BIT9  | BIT10 | \
+					   BIT11 | BIT19 | BIT22 | BIT23 | BIT25 | BIT26 | \
+					   BIT27 | BIT29 | BIT30 | BIT31))
 #define RD_88F68XX_GPP_OUT_VAL_LOW	0x0
 #define RD_88F68XX_GPP_OUT_VAL_MID	0x0
 #define RD_88F68XX_GPP_POL_LOW		0x0
-- 
1.7.5.4

