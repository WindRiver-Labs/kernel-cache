From 7cb6d44ab43a15d104de00f7482ae484a39573e4 Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Tue, 23 Jun 2015 15:35:18 -0400
Subject: [PATCH 143/150] mvneta: Enable change MAC address when interface is
 up

	- Function eth_prepare_mac_addr_change() is called as part of MAC
	address change. This function check if interface is running.
	To enable change MAC address when interface is running:
	IFF_LIVE_ADDR_CHANGE flag must be set to dev->priv_flags field
	- Fix bug [JIRA] # (SYSTEMSW-1826)
	"Changing MAC address is  possible only at port down on Main Line
	Linux 3.18.7-2015_T2.0p1"

Change-Id: Ie8ef267f83e51c10282454c655f789594a53966d
Signed-off-by: Dmitri Epshtein <dima@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/20411
Reviewed-by: Ken Ma <make@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/20475
Reviewed-on: http://vgitil04.il.marvell.com:8080/27282
---
 drivers/net/ethernet/marvell/mvneta.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/marvell/mvneta.c b/drivers/net/ethernet/marvell/mvneta.c
index 0360b0c..c3ad955 100644
--- a/drivers/net/ethernet/marvell/mvneta.c
+++ b/drivers/net/ethernet/marvell/mvneta.c
@@ -3713,7 +3713,7 @@ static int mvneta_probe(struct platform_device *pdev)
 	dev->features = NETIF_F_SG | NETIF_F_IP_CSUM | NETIF_F_TSO;
 	dev->hw_features |= dev->features;
 	dev->vlan_features |= dev->features;
-	dev->priv_flags |= IFF_UNICAST_FLT;
+	dev->priv_flags |= IFF_UNICAST_FLT | IFF_LIVE_ADDR_CHANGE;
 	dev->gso_max_segs = MVNETA_MAX_TSO_SEGS;
 
 	err = register_netdev(dev);
-- 
1.7.5.4

