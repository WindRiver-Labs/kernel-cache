From 860a3579baadfa3aacea9b7cf18a3196b996d5d6 Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Tue, 30 Apr 2013 14:58:03 +0300
Subject: [PATCH 0611/1825] ALP: Sync with avanta_lp_family up to I0752a6b0
 changeId

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 97e6137b850a27cd4be8a9eba8fef1d07d1a0c00

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: Icc0f51b1e70a1e2bde07c762849bdb806c9e0839
Reviewed-on: http://vgitil04.il.marvell.com:8080/1697
Reviewed-by: Star_Automation <star@marvell.com>
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/core.c |    1 -
 arch/arm/mach-avantalp/pex.c  |   12 ++++++------
 2 files changed, 6 insertions(+), 7 deletions(-)

diff --git a/arch/arm/mach-avantalp/core.c b/arch/arm/mach-avantalp/core.c
index 1fce02d..6407efe 100644
--- a/arch/arm/mach-avantalp/core.c
+++ b/arch/arm/mach-avantalp/core.c
@@ -162,7 +162,6 @@ void mv_early_printk(char *fmt, ...)
 
 extern unsigned int elf_hwcap;
 extern u32 mvIsUsbHost;
-MV_BOOL mvBoardIdSet(MV_U32 boardId);
 
 static int __init parse_tag_mv_uboot(const struct tag *tag)
 {
diff --git a/arch/arm/mach-avantalp/pex.c b/arch/arm/mach-avantalp/pex.c
index 733b44d..191e64a 100644
--- a/arch/arm/mach-avantalp/pex.c
+++ b/arch/arm/mach-avantalp/pex.c
@@ -80,7 +80,7 @@ void __init mv_pex_preinit(void)
 	for (pciIf = 0; pciIf < boardPexInfo->boardPexIfNum; pciIf++)
 	{
 		/* Translate logical interface number to physical */
-		pexHWInf = boardPexInfo->pexMapping[pciIf];
+		pexHWInf = 0;
 
 		if (MV_FALSE == mvUnitMapIsPexMine(pexHWInf))
 			continue;
@@ -136,7 +136,7 @@ void mv_pex_reinit(void)
 	for (pciIf = 0; pciIf < boardPexInfo->boardPexIfNum; pciIf++)
 	{
 		/* Translate logical interface number to physical */
-		pexHWInf = boardPexInfo->pexMapping[pciIf];
+		pexHWInf = 0;
 
 		if (MV_FALSE == mvUnitMapIsPexMine(pexHWInf))
 			continue;
@@ -285,7 +285,7 @@ int __init mv_pex_setup(int nr, struct pci_sys_data *sys)
 	MV_U32 pexHWInf = 0;
 
 	/* Translate logical interface number to physical */
-	pexHWInf = boardPexInfo->pexMapping[nr];
+	pexHWInf = 0;
 
 	if (MV_FALSE == mvUnitMapIsPexMine(pexHWInf))
 		return 0;
@@ -358,7 +358,7 @@ struct pci_bus *mv_pex_scan_bus(int nr, struct pci_sys_data *sys)
 	/* Set the bus number in the following controller */
 	for (ifnum = (nr+1); ifnum < boardPexInfo->boardPexIfNum; ifnum++) {
 
-		pexNextHWInf = boardPexInfo->pexMapping[ifnum];
+		pexNextHWInf = 0;
 
 		if (MV_FALSE == mvUnitMapIsPexMine(pexNextHWInf))
 			continue;
@@ -405,7 +405,7 @@ static int mv_pex_suspend(struct platform_device *dev, pm_message_t state)
 
 	/* Save PCI Express status Register */
 	for (pciIf = 0; pciIf < pex_ifnum; pciIf++) {
-		pexHWInf = boardPexInfo->pexMapping[pciIf];
+		pexHWInf = 0;
 
 		if (MV_FALSE == mvUnitMapIsPexMine(pexHWInf))
 			continue;
@@ -428,7 +428,7 @@ static int mv_pex_resume(struct platform_device *dev)
 
 	/* Restore PCI Express status Register */
 	for (pciIf = 0; pciIf < pex_ifnum; pciIf++) {
-		pexHWInf = boardPexInfo->pexMapping[pciIf];
+		pexHWInf = 0;
 
 		if (MV_FALSE == mvUnitMapIsPexMine(pexHWInf))
 			continue;
-- 
1.7.5.4

