From c777da63f379326ec7bb43f59f52cd4832aa7f7a Mon Sep 17 00:00:00 2001
From: Jing Hua <jinghua@marvell.com>
Date: Mon, 7 Jul 2014 15:12:30 +0800
Subject: [PATCH 1763/1825] fix: alp: tpm: reserve policer_id 0, since it is a
 default value for all C2/3 entries

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 66cc128d8a861327211744375a5b23c6db4de94e

	policer_id 0 should not be used for user, since it is a default value for all
	C2/3 entries which do not want to configure any policer. Now Policer_id 0 is
	configured, it affects all the other non-policer C2/3 entries.
	SYSTEMSW-718 - <TPM policer configuration should forbid to use policer 0>

Signed-off-by: Jing Hua <jinghua@marvell.com>

Change-Id: I7e10b5a38577849bd5f0989e9a29a952fc071cb4
Reviewed-on: http://vgitil04.il.marvell.com:8080/9009
Reviewed-by: Ken Ma <make@marvell.com>
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Tested-by: Yehuda Yitschak <yehuday@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_tpm/inc/tpm_policer.h        |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_tpm/inc/tpm_policer.h b/arch/arm/plat-armada/mv_drivers_lsp/mv_tpm/inc/tpm_policer.h
index e928406..0d485e3 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_tpm/inc/tpm_policer.h
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_tpm/inc/tpm_policer.h
@@ -36,7 +36,8 @@ disclaimer.
 /*                                 MACROS                                     */
 /******************************************************************************/
 #define TPM_PLCR_INVALID_Q_THESH_IDX	(0xff)	/* invalid queue theshold index	*/
-#define TPM_PLCR_MIN_ENTRY_ID		(0)	/* minimium policer ID		*/
+/* minimium policer ID, start	with 1, sice 0 is used for all C2/3 enties without Policer configuration */
+#define TPM_PLCR_MIN_ENTRY_ID		(1)
 #define TPM_TOKEN_PERIOD_400_CORE_CLOCK	(400)	/* 400 core clock		*/
 #define TPM_TOKEN_PERIOD_480_CORE_CLOCK	(480)	/* 480 core clock		*/
 #define TPM_TOKEN_PERIOD_600_CORE_CLOCK	(600)	/* 600 core clock		*/
-- 
1.7.5.4

