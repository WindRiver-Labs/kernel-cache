From ac605be0418ccd4404abd6297f25aac002c1f1fd Mon Sep 17 00:00:00 2001
From: Yoni Farhadian <yonif@marvell.com>
Date: Tue, 21 May 2013 14:51:59 +0300
Subject: [PATCH 0669/1825] PPv2: use mvBoard to get connected switch ports

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 29fea0684bf45bb795e78e1e629a2baa193e7c1c

Change-Id: Ic8aef275b0a7046c964006dd2a17bf0bea34f632
Signed-off-by: Yoni Farhadian <yonif@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/1902
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Dmitri Epshtein <dima@marvell.com>
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/core.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-avantalp/core.c b/arch/arm/mach-avantalp/core.c
index 1ccb3c3..18adfd5 100644
--- a/arch/arm/mach-avantalp/core.c
+++ b/arch/arm/mach-avantalp/core.c
@@ -684,6 +684,7 @@ static void mv_switch_pdev_register(struct platform_device *pdev)
 	plat_data->phy_addr = mvBoardPhyAddrGet(plat_data->gbe_port);
 	plat_data->switch_cpu_port = mvBoardSwitchCpuPortGet(plat_data->index);
 	plat_data->smi_scan_mode = mvBoardSmiScanModeGet(plat_data->index);
+	plat_data->connected_port_mask = mvBoardSwitchPortsMaskGet(0);
 	plat_data->switch_irq = IRQ_GLOBAL_ETH_COMPLEX;
 
 	platform_device_register(pdev);
-- 
1.7.5.4

