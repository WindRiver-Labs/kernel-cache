From de70dbbab35f394a6ad8c86c725cbbd120705658 Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Tue, 24 Sep 2013 17:42:17 +0300
Subject: [PATCH 0993/1825] fix: alp: support l2x0 sync in case of swiocc

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 29cdc2ade243cd8c2a14fdae35692fee0a49afba

	In case working in SW I/O cache coherency
	mode, PL310 L2 cache sync operation
	is required.

Change-Id: I283d3e348e4505b7005fd9ba958b996bb283b92e
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3548
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mm/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mm/Kconfig b/arch/arm/mm/Kconfig
index 0677f06..eedca05 100644
--- a/arch/arm/mm/Kconfig
+++ b/arch/arm/mm/Kconfig
@@ -1269,7 +1269,7 @@ config CACHE_L2X0
 	bool "Enable the L2x0 outer cache controller" if MIGHT_HAVE_CACHE_L2X0
 	default MIGHT_HAVE_CACHE_L2X0
 	select OUTER_CACHE
-	select OUTER_CACHE_SYNC if !ARCH_AVANTA_LP
+	select OUTER_CACHE_SYNC if ARCH_AVANTA_LP && !AURORA_IO_CACHE_COHERENCY
 	help
 	  This option enables the L2x0 PrimeCell.
 
-- 
1.7.5.4

