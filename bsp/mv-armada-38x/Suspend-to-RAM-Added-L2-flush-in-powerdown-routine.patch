From e39398b03fb4f60b2b2402d09bf03ff1f16c1ceb Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Thu, 15 Nov 2012 10:20:33 +0200
Subject: [PATCH 0330/1825] Suspend to RAM: Added L2 flush in powerdown
 routine

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit a44fc66fcf2367f9cb505e45d202cad25f20cf6a

Change-Id: I15aa3b0fe041d13052429c89cc2a229df9646ac2
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/armada_suspend.S |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/armada_suspend.S b/arch/arm/plat-armada/armada_suspend.S
index de6c7a5..afe5e3c 100644
--- a/arch/arm/plat-armada/armada_suspend.S
+++ b/arch/arm/plat-armada/armada_suspend.S
@@ -61,6 +61,9 @@ ENTRY(armadaxp_powerdown)
 	*/
 	bl v7_flush_kern_cache_all
 
+	/* Flush L2 Cache */
+	bl auroraL2_flush_all
+
 	/*
 	* Issue a Data Synchronization Barrier instruction to ensure that all
 	* state saving has been	completed.
-- 
1.7.5.4

