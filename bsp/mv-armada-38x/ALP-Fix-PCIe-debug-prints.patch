From 4c5d100eea83ac0e3038f5baa5b5924b4f3da02a Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Wed, 1 May 2013 11:30:21 +0300
Subject: [PATCH 0620/1825] ALP: Fix PCIe debug prints

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ada4daa701011691b13d0bfd16d7a3b47ce7e361

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: Iff820bdd095a53e7e1a81266c4e153d595e9247d
Reviewed-on: http://vgitil04.il.marvell.com:8080/1712
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/pex.c |   11 +++++------
 1 files changed, 5 insertions(+), 6 deletions(-)

diff --git a/arch/arm/mach-avantalp/pex.c b/arch/arm/mach-avantalp/pex.c
index 0f0be0e..1c89a96 100644
--- a/arch/arm/mach-avantalp/pex.c
+++ b/arch/arm/mach-avantalp/pex.c
@@ -203,8 +203,6 @@ static int mv_pci_read_config(struct pci_bus *bus,
 	func = PCI_FUNC(devfn);
 	regOff = (MV_U32)where & (PXCAR_REG_NUM_MASK | PXCAR_REAL_EXT_REG_NUM_MASK); /* total of 12 bits: 8 legacy + 4 extended */
 
-	DB(printk("PCI %d read: bus = %x dev = %x func = %x regOff = %x ",pciIf, bus_num,dev_no,func,regOff));
-
 	temp = (u32) mvPexConfigRead(pciIf, bus_num, dev_no, func, regOff);
 	switch (size) {
 		case 1:
@@ -221,9 +219,10 @@ static int mv_pci_read_config(struct pci_bus *bus,
 
 	*val = temp;
 
-	DB(printk(" got %x \n",temp));
+	DB(printk(KERN_INFO "PCI %2d read : (b.d.f) = (%2d,%2d,%2d); reg = %4d: val = 0x%08x\n",
+		  pciIf, bus_num, dev_no, func, regOff, temp));
 
-    return 0;
+	return 0;
 }
 
 static int mv_pci_write_config(struct pci_bus *bus, unsigned int devfn, int where,
@@ -240,8 +239,8 @@ static int mv_pci_write_config(struct pci_bus *bus, unsigned int devfn, int wher
 	func = PCI_FUNC(devfn);
 	regOff = (MV_U32)where & (PXCAR_REG_NUM_MASK | PXCAR_REAL_EXT_REG_NUM_MASK); /* total of 12 bits: 8 legacy + 4 extended */
 
-	DB(printk("PCI %d: writing data %x size %x to bus %x dev %x func %x offs %x \n",
-			  pciIf, val,size,bus_num,dev_no,func,regOff));
+	DB(printk(KERN_INFO "PCI %2d write: (b.d.f) = (%2d,%2d,%2d); reg = %4d: val = 0x%08x\n",
+		  pciIf, bus_num, dev_no, func, regOff, val));
 	if (size != 4)
 	{
 		temp = (u32) mvPexConfigRead(pciIf, bus_num, dev_no, func, regOff);
-- 
1.7.5.4

