From 1c73a27856f2a4cac09cdeae9d6390677040addd Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Mon, 11 Mar 2013 11:42:02 +0200
Subject: [PATCH 0461/1825] ALP: Set board id using correct API

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 2e1a268f4ae61b7583334c8c12f532b60c5d1e5a

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I1b6240396040f5fa2a43e5dd8d95b9732bb1799b
Reviewed-on: http://vgitil04.il.marvell.com:8080/1237
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/core.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-avantalp/core.c b/arch/arm/mach-avantalp/core.c
index cd4c2b4..1e1235f 100755
--- a/arch/arm/mach-avantalp/core.c
+++ b/arch/arm/mach-avantalp/core.c
@@ -182,9 +182,9 @@ void mv_early_printk(char *fmt,...)
 #define read_mtu(a)    a
 #endif
 
-extern MV_U32 gBoardId; 
 extern unsigned int elf_hwcap;
 extern u32 mvIsUsbHost;
+MV_BOOL mvBoardIdSet(MV_U32 boardId);
 
 static int __init parse_tag_mv_uboot(const struct tag *tag)
 {
@@ -196,7 +196,8 @@ static int __init parse_tag_mv_uboot(const struct tag *tag)
 #ifdef CONFIG_MV_INCLUDE_USB
 	mvIsUsbHost = read_tag(tag->u.mv_uboot.isUsbHost);
 #endif
-	gBoardId =  (mvUbootVer & 0xff);
+
+	mvBoardIdSet(mvUbootVer & 0xff);
 
 #ifdef CONFIG_MV_INCLUDE_GIG_ETH
 	for (i = 0; i < CONFIG_MV_ETH_PORTS_NUM; i++) {
-- 
1.7.5.4

