From 8af4bbeda1b0f3e6e79c90f8412db26fb2d8e686 Mon Sep 17 00:00:00 2001
From: Yoni Farhadia <yonif@marvell.com>
Date: Thu, 17 Oct 2013 10:12:57 +0200
Subject: [PATCH 1027/1825] fix: alp: fix mvBoardIsEthConnected for LB port

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit fbc802f358996b1ee31045b45faf9906da007b91

	- return true for LB port (port 2) in mvBoardIsEthConnected

Change-Id: I106b70613541a969374e35c1827277e9fefcebe9
Signed-off-by: Yoni Farhadia <yonif@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3724
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.c      |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
index 23cf9e0..699390b 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
@@ -2683,6 +2683,9 @@ MV_BOOL mvBoardIsEthConnected(MV_U32 ethNum)
 			((c & MV_ETHCOMP_GE_MAC1_2_SW_P4) && mvBoardMacCpuPortGet() == 1)))
 			isConnected = MV_TRUE;
 
+	if ((ethNum == 2) && mvBoardIsPortLoopback(ethNum))
+			isConnected = MV_TRUE;
+
 	return isConnected;
 }
 
-- 
1.7.5.4

