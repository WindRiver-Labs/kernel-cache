From dae6169a27e7703d41ef7087bc92e297ded483dc Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Tue, 12 Nov 2013 15:57:13 +0200
Subject: [PATCH 1078/1825] fix: usb: a375: fix USB3 instability

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit c846b5cea8eee4c90f3615e407908ac436a811ef

	The UTMI PHY (USB2) init flow is wrong and needs to be disabled until updated.

Change-Id: I8367a81cc11c51daa22d327b8b6ebd11153a76aa
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4303
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/usb/mvUsb.c |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/usb/mvUsb.c b/arch/arm/plat-armada/mv_hal/usb/mvUsb.c
index 7951fd2..adb6861 100755
--- a/arch/arm/plat-armada/mv_hal/usb/mvUsb.c
+++ b/arch/arm/plat-armada/mv_hal/usb/mvUsb.c
@@ -816,8 +816,9 @@ MV_STATUS mvUsbUtmiPhyInit(int dev, MV_USB_HAL_DATA *usbHalData)
 		if (mvUsbPhy40nmInit(dev))
 			status = MV_NOT_READY;
 
-	} else if ((usbHalData->ctrlFamily == MV_88F66X0) ||
-		   (usbHalData->ctrlFamily == MV_88F67X0)) {
+	} else if (usbHalData->ctrlFamily == MV_88F66X0) {
+		/* The below init flow is incorrect for MVF67X0 and disabled until updated */
+		/*    (usbHalData->ctrlFamily == MV_88F67X0)) */
 		status = mvUsbPhy40nmLpInit(dev);
 
 	} else
-- 
1.7.5.4

