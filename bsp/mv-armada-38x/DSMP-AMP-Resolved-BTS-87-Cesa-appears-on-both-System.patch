From c9779a6e57e8772d6d6e0f0d69a998969c9512eb Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:34:33 +0300
Subject: [PATCH 0122/1825] DSMP: AMP: Resolved BTS #87 - Cesa appears on both
 Systems

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 5b01e028e5e68e966e18e67d5e32b88a42e92aa0

Change-Id: I601e97783ce41bdb76fef5b7f801a765a5c4acb8
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-armada/mv_drivers_lsp/mv_cesa/cesa_dev.c  |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_dev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_dev.c
index 81502f8..fc983f4 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_dev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/cesa_dev.c
@@ -27,6 +27,7 @@
 #include "mvOs.h"
 #include "mvCommon.h"
 #include "ctrlEnv/mvCtrlEnvLib.h"
+#include "ctrlEnv/mvUnitMap.h"
 #include "cesa/mvCesa.h" 
 #include "mvSysCesaApi.h"
 
@@ -244,6 +245,8 @@ cesadev_init(void)
 		return -ENODEV;
 	}		
 #endif
+	if(mvUnitMapIsMine(CESA) == MV_FALSE)
+		return -ENODEV;
 
 #ifdef CONFIG_MV_CESA_TEST
     cesaTestStart(buf_num, buf_size);
-- 
1.7.5.4

