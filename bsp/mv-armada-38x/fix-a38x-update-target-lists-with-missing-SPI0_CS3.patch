From 5b8183518b884f7079b395e54eeae15ee2adf13f Mon Sep 17 00:00:00 2001
From: Marcin Wojtas <mw@semihalf.com>
Date: Thu, 21 Nov 2013 17:34:15 +0200
Subject: [PATCH 1169/1825] fix: a38x: update target lists with missing
 SPI0_CS3

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 0e2be686e77441997251a87650a142ede551ddbc

	- in both linux and u-boot align SPI controllers and CS naming
	  with common convention SPI<x>_CS<y> in following tables:
	  SYSMAP_A38X_68XX
	  MV_TARGET
	  TARGETS_DEF_ARRAY
	  TARGETS_NAME_ARRAY
	  MV_CPU_IF_ADDR_WIN_MAP_TBL

Change-Id: I73abe87b8203a5183e024a50eadc0e7cdf988014
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4405
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../armada_38x_family/boardEnv/mvBoardEnvSpec.c    |    6 +-
 .../armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h      |   54 ++++++++++---------
 2 files changed, 31 insertions(+), 29 deletions(-)

diff --git a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
index 7f4b3f8..e82c1fb 100644
--- a/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-armada38x/armada_38x_family/boardEnv/mvBoardEnvSpec.c
@@ -114,7 +114,7 @@ MV_BOARD_MAC_INFO db88f68xxInfoBoardMacInfo[] = {
 MV_DEV_CS_INFO db88f68xxInfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
-	{ SPI_CS0,	N_A, BOARD_DEV_SPI_FLASH,	8,	8 } /* SPI DEV */
+	{ SPI0_CS0,	N_A, BOARD_DEV_SPI_FLASH,	8,	8 } /* SPI DEV */
 #endif
 #ifdef MV_NAND
 	{ DEVICE_CS0,	N_A, BOARD_DEV_NAND_FLASH,	8,	8},  /* NAND DEV */
@@ -207,7 +207,7 @@ MV_BOARD_MAC_INFO rd88F68XXInfoBoardMacInfo[] = {
 MV_DEV_CS_INFO rd88F68XXInfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
-	{ SPI_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
+	{ SPI0_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
 #endif
 };
 
@@ -301,7 +301,7 @@ MV_BOARD_MAC_INFO A380_customerInfoBoardMacInfo[] = {
 MV_DEV_CS_INFO A380_customerInfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
-	{ SPI_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
+	{ SPI0_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
 #endif
 };
 
diff --git a/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h b/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
index 4fdd394..d8a23d5 100644
--- a/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
+++ b/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
@@ -322,15 +322,16 @@ typedef enum _mvTarget {
 	PEX3_IO,	/* 15 PCI Express 3 IO		*/
 	INTER_REGS,	/* 16 Internal registers	*/
 	DMA_UART,	/* 17 DMA based UART request	*/
-	SPI_CS0,	/* 18 SPI0_CS0			*/
+	SPI0_CS0,	/* 18 SPI0_CS0			*/
 	SPI0_CS1,	/* 19 SPI0_CS1			*/
 	SPI0_CS2,	/* 20 SPI0_CS2			*/
-	SPI1_CS0,	/* 21 SPI1_CS0			*/
-	SPI1_CS1,	/* 22 SPI1_CS1			*/
-	SPI1_CS2,	/* 23 SPI1_CS2			*/
-	SPI1_CS3,	/* 24 SPI1_CS3			*/
-	BOOT_ROM_CS,	/* 25 BOOT_ROM_CS		*/
-	DEV_BOOCS,	/* 26 DEV_BOOCS			*/
+	SPI0_CS3,	/* 21 SPI0_CS3			*/
+	SPI1_CS0,	/* 22 SPI1_CS0			*/
+	SPI1_CS1,	/* 23 SPI1_CS1			*/
+	SPI1_CS2,	/* 24 SPI1_CS2			*/
+	SPI1_CS3,	/* 25 SPI1_CS3			*/
+	BOOT_ROM_CS,	/* 26 BOOT_ROM_CS		*/
+	DEV_BOOCS,	/* 27 DEV_BOOCS			*/
 	CRYPT0_ENG,	/* 28 Crypto0 Engine		*/
 	PNC_BM,		/* 29 PNC + BM			*/
 	MAX_TARGETS
@@ -370,13 +371,14 @@ typedef enum _mvTarget {
 	{ 0x70, PEX_TARGET_ID_123 },		/* PEX3_IO               */ \
 	{ 0xFF, 0xFF		},		/* INTER_REGS            */ \
 	{ 0x01, DEV_TARGET_ID	},		/* DMA_UART              */ \
-	{ 0x1E, DEV_TARGET_ID	},		/* SPI_CS0               */ \
-	{ 0x5E, DEV_TARGET_ID	},		/* SPI0_CS1               */ \
-	{ 0x9E, DEV_TARGET_ID	},		/* SPI0_CS2               */ \
-	{ 0x1A, DEV_TARGET_ID	},		/* SPI1_CS0               */ \
-	{ 0x5A, DEV_TARGET_ID	},		/* SPI1_CS1               */ \
-	{ 0x9A, DEV_TARGET_ID	},		/* SPI1_CS2               */ \
-	{ 0xDA, DEV_TARGET_ID	},		/* SPI1_CS3               */ \
+	{ 0x1E, DEV_TARGET_ID	},		/* SPI0_CS0              */ \
+	{ 0x5E, DEV_TARGET_ID	},		/* SPI0_CS1              */ \
+	{ 0x9E, DEV_TARGET_ID	},		/* SPI0_CS2              */ \
+	{ 0xDE, DEV_TARGET_ID	},		/* SPI0_CS3              */ \
+	{ 0x1A, DEV_TARGET_ID	},		/* SPI1_CS0              */ \
+	{ 0x5A, DEV_TARGET_ID	},		/* SPI1_CS1              */ \
+	{ 0x9A, DEV_TARGET_ID	},		/* SPI1_CS2              */ \
+	{ 0xDA, DEV_TARGET_ID	},		/* SPI1_CS3              */ \
 	{ MAIN_BOOT_ATTR, DEV_TARGET_ID },	/* Main Boot device      */ \
 	{ SEC_BOOT_ATTR, DEV_TARGET_ID  },	/* Secondary Boot device */ \
 	{ 0x01, CRYPT_TARGET_ID	},		/* CRYPT_ENG0            */ \
@@ -397,20 +399,20 @@ typedef enum _mvTarget {
 	"PEX0_IO",		/* PEX0_IO */		\
 	"PEX1_MEM",		/* PEX1_MEM */		\
 	"PEX1_IO",		/* PEX1_IO */		\
-	"PEX2_MEM",		/* PEX0_MEM */		\
-	"PEX2_IO",		/* PEX0_IO */		\
-	"PEX3_MEM",		/* PEX1_MEM */		\
-	"PEX3_IO",		/* PEX1_IO */		\
+	"PEX2_MEM",		/* PEX2_MEM */		\
+	"PEX2_IO",		/* PEX2_IO */		\
+	"PEX3_MEM",		/* PEX3_MEM */		\
+	"PEX3_IO",		/* PEX3_IO */		\
 	"INTER_REGS",		/* INTER_REGS */	\
 	"DMA_UART",		/* DMA_UART */		\
-	"SPI_CS0",		/* SPI_CS0 */		\
-	"SPI_CS1",		/* SPI_CS1 */		\
-	"SPI_CS2",		/* SPI_CS2 */		\
-	"SPI_CS3",		/* SPI_CS3 */		\
-	"SPI_CS4",		/* SPI_CS4 */		\
-	"SPI_CS5",		/* SPI_CS5 */		\
-	"SPI_CS6",		/* SPI_CS6 */		\
-	"SPI_CS7",		/* SPI_CS7 */		\
+	"SPI0_CS0",		/* SPI0_CS0 */		\
+	"SPI0_CS1",		/* SPI0_CS1 */		\
+	"SPI0_CS2",		/* SPI0_CS2 */		\
+	"SPI0_CS3",		/* SPI0_CS3 */		\
+	"SPI1_CS0",		/* SPI1_CS0 */		\
+	"SPI1_CS1",		/* SPI1_CS1 */		\
+	"SPI1_CS2",		/* SPI1_CS2 */		\
+	"SPI1_CS3",		/* SPI1_CS3 */		\
 	"BOOT_ROM_CS",		/* BOOT_ROM_CS */	\
 	"DEV_BOOTCS",		/* DEV_BOOCS */		\
 	"CRYPT1_ENG",		/* CRYPT1_ENG */	\
-- 
1.7.5.4

