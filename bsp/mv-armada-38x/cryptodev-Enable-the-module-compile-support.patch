From 87eadd211b4850134746e9ac9f91e8971c6b4719 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 10 Oct 2014 14:31:19 +0800
Subject: [PATCH 1811/1825] cryptodev: Enable the module compile support

When build as a module, the we have the following build failure:

|   CC [M]  arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.o
| arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.c:47:23: fatal error: cryptodev.h: No such file or directory
| compilation terminated.
| make[4]: *** [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa/cesa_ocf_drv.o] Error 1
| make[3]: *** [arch/arm/mach-armada38x/../plat-armada/mv_drivers_lsp/mv_cesa] Error 2
| make[2]: *** [arch/arm/mach-armada38x] Error 2
| make[1]: *** [sub-make] Error 2
| make: *** [all] Error 2

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-armada/mv_drivers_lsp/mv_cesa/Makefile    |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/Makefile b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/Makefile
index ba805ad..fa55f5a 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/Makefile
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_cesa/Makefile
@@ -5,7 +5,7 @@ ifeq ($(CONFIG_PLAT_ARMADA),y)
 include $(srctree)/$(MACHINE)/config/mvRules.mk
 endif
 
-ifeq ($(CONFIG_MV_CESA_OCF),y)
+ifneq ($(CONFIG_MV_CESA_OCF),)
 EXTRA_CFLAGS    += -I$(srctree)/crypto/ocf
 endif
 
-- 
1.7.5.4

