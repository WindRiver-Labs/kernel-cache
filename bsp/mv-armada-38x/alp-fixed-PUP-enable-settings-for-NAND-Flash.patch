From 309c7f1c07a13dda7790331c4f336e26617c3678 Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Sun, 30 Jun 2013 16:10:08 +0300
Subject: [PATCH 0745/1825] alp: fixed PUP enable settings for NAND Flash

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 1b5159eb914118bd3beffd1ff6b468c4eb83be27

	Added write to enable PUP (Pack-Unpack) for NAND Flash
	PUP is a HW machanism to accelerate transactions.
	Controlled by SoC register - 0x1864c, BIT4
	(Relevant for all ALP and A375 boards)

Change-Id: I6d769c29be04c5da84a95c885dbc67414360dfaf
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2371
Reviewed-by: Star_Automation <star@marvell.com>
Reviewed-by: Kosta Zertsekel <konszert@marvell.com>
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c        |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
index 121374d..4bf1bc7 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
@@ -311,6 +311,13 @@ MV_STATUS mvCtrlEnvInit(MV_VOID)
 	}
 
 	mvEthComplexInit(mvBoardEthComplexConfigGet());
+
+	/*
+	 * Enable NAND Flash PUP (Pack-Unpack)
+	 * HW machanism to accelerate transactions (controlled by SoC register)
+	 */
+	MV_REG_BIT_SET(PUP_EN_REG, BIT4);
+
 	return MV_OK;
 }
 
-- 
1.7.5.4

