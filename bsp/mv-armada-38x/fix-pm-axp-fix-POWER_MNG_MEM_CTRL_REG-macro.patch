From ae7d709ada75a433c896ac836e2d9414c3fe90d7 Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Sun, 13 Oct 2013 16:55:32 +0200
Subject: [PATCH 1022/1825] fix: pm: axp: fix POWER_MNG_MEM_CTRL_REG macro

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 5379c55fee9ddeee7a5db3557a6a4ba14a876b9c

	Use correct register offset in the POWER_MNG_MEM_CTRL_REG macro

Change-Id: I3d42407693370d21ecf9cfead7c00e79bbde1191
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3692
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../armada_xp_family/ctrlEnv/mvCtrlEnvRegs.h       |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-armadaxp/armada_xp_family/ctrlEnv/mvCtrlEnvRegs.h b/arch/arm/mach-armadaxp/armada_xp_family/ctrlEnv/mvCtrlEnvRegs.h
index d7d97fd..92ebf45 100755
--- a/arch/arm/mach-armadaxp/armada_xp_family/ctrlEnv/mvCtrlEnvRegs.h
+++ b/arch/arm/mach-armadaxp/armada_xp_family/ctrlEnv/mvCtrlEnvRegs.h
@@ -117,7 +117,7 @@ extern "C" {
 #define PM_CPU_BOOT_ADDR_REDIRECT(cpu)		(MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x24)
 
 /* Power Management Memory Power Down Registers 1 - 6 */
-#define POWER_MNG_MEM_CTRL_REG(num)		((num) < 6 ? 0x1820C + (num) * 4 : 0x18228)
+#define POWER_MNG_MEM_CTRL_REG(num)		(((num) < 6) ? (0x1820C + ((num) - 1) * 4) : 0x18228)
 #define PMC_MCR_NUM_COMM			6
 #define PMC_MCR_NUM_PEX				2
 #define PMC_MCR_NUM_USB				4
-- 
1.7.5.4

