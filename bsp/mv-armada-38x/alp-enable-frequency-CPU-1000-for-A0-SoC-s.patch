From 8c471bc243c5c4518c155b6c4f426910d15b3408 Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Thu, 13 Mar 2014 10:57:51 +0200
Subject: [PATCH 1484/1825] alp: enable frequency CPU=1000 for A0 SoC's

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ae36f1e4c7b76cafac09370006aa91f90ea85e5f

	- This CPU frequency mode wasn't supported in Zx revisions, and tested
	  with A0 SOC's revision.

Change-Id: Ia124196bb8d85eda631e9eb40f3c984cd2469824
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/6389
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.c      |    5 ++++-
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h       |    7 ++++---
 2 files changed, 8 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
index 0010197..933df69 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
@@ -1653,7 +1653,10 @@ MV_U32 mvBoardFreqModesNumGet()
 		break;
 	case MV_6660_DEV_ID:
 	case MV_6665_DEV_ID:
-		freqNum = FREQ_MODES_NUM_6660;
+		if (mvCtrlRevGet() <= MV_88F66X0_Z3_ID)
+			freqNum = FREQ_MODES_NUM_6660_Z_REV;
+		else
+			freqNum = FREQ_MODES_NUM_6660;
 		break;
 	default:
 		mvOsPrintf("%s: Error: failed to read ctrlModel (SoC ID)\n", __func__);
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
index ebb1765..2f033cc 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
@@ -261,9 +261,10 @@ extern "C" {
 #ifndef MV_ASMLANGUAGE
 
 #define TBL_UNUSED      0       /* Used to mark unused entry */
-#define FREQ_MODES_NUM_6610	0
-#define FREQ_MODES_NUM_6650	4
-#define FREQ_MODES_NUM_6660	4
+#define FREQ_MODES_NUM_6610		0
+#define FREQ_MODES_NUM_6650		4
+#define FREQ_MODES_NUM_6660_Z_REV	4
+#define FREQ_MODES_NUM_6660		5
 
 
 #define MPP_GROUP_0_TYPE { \
-- 
1.7.5.4

