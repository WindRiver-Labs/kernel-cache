From 6bebd6894e48ab46ec26b06f3161a3659edd2dd2 Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Wed, 14 May 2014 10:34:50 +0300
Subject: [PATCH 1656/1825] wlan: Added script to build WLAN driver

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b41d32bd80166340dd63c3bc8b53682e00710d25

Change-Id: If215f789c990de9b942172a0fd454b252bb16ab4
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7992
Reviewed-by: Shadi Ammouri <shadi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 tools/mv_wlan/build_wlan.sh |   37 +++++++++++++++++++++++++++++++++++++
 1 files changed, 37 insertions(+), 0 deletions(-)
 create mode 100755 tools/mv_wlan/build_wlan.sh

diff --git a/tools/mv_wlan/build_wlan.sh b/tools/mv_wlan/build_wlan.sh
new file mode 100755
index 0000000..cd30a48
--- /dev/null
+++ b/tools/mv_wlan/build_wlan.sh
@@ -0,0 +1,37 @@
+#!/bin/bash
+leave() {
+	cd $org_path
+	rm -rf /tmp/mv_wlan
+	exit $1
+}
+
+mod_path="${1}/kernel/mv_wlan"
+kernel_path=$2
+org_path=`pwd`
+bin_path=$3
+
+# Create directory for build
+rm -rf /tmp/mv_wlan
+mkdir -p /tmp/mv_wlan
+cd /tmp/mv_wlan
+
+# Clone the sources
+git clone git://vgitil04.il.marvell.com/uni/mv_wlan .
+if [ $? != 0 ]; then
+	echo "Failed to clone WLAN GIT"
+	leave 1
+fi
+
+# Build the module
+make KDIR=$kernel_path M=/tmp/mv_wlan SOC=W8864
+if [ $? != 0 ]; then
+	echo "Failed to build WLAN driver"
+	leave 1
+fi
+
+# Copy the kernel object
+mkdir -p $mod_path
+find ./ -name "*.ko" | xargs cp -t $mod_path/.
+cd -
+
+leave 0
-- 
1.7.5.4

