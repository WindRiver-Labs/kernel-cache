From 72ff3cd77127ff7851d2a40c7b43e8742331f767 Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Thu, 6 Mar 2014 16:19:35 +0200
Subject: [PATCH 1435/1825] mtd: nand: Adjust nand_nfc driver to LK v3.10.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 23e58ca0c574e346bab08208365ea2115ac344a3

	- Use global variable mv_nand_base which holds base address of the unit and
	  which is initialized during driver probe - add new header for that
	  purpose
	- Move mvCtrlNandClkSet function to nand_nfc.c
	- Enable changing nand clock by HAL, using native linux clk_set_rate
	  function, which in fact is clk_corediv_set_rate from coredivclk driver
	- Acquire all parameters from FDT
	- use common OS wrapper (mvOs.h) and other headers (former 'common'
	  folder)
	- Introduce NAND driver to Linux build system
	- Add dts binding documentation

Change-Id: I45690065631bb344381f8ab7fc0b78cd6d361eef
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/6204
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/nfc/mvNfc.h     |    2 --
 arch/arm/plat-armada/mv_hal/nfc/mvNfcRegs.h |    2 --
 2 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/nfc/mvNfc.h b/arch/arm/plat-armada/mv_hal/nfc/mvNfc.h
index 36e73f3..22e1df7 100644
--- a/arch/arm/plat-armada/mv_hal/nfc/mvNfc.h
+++ b/arch/arm/plat-armada/mv_hal/nfc/mvNfc.h
@@ -147,8 +147,6 @@ extern "C" {
 #if !defined(CONFIG_OF)
 #include "ctrlEnv/mvCtrlEnvSpec.h"
 #include "mvSysNfcConfig.h"
-#else
-#include "mvSysHwConfig.h"
 #endif
 
 /********************************/
diff --git a/arch/arm/plat-armada/mv_hal/nfc/mvNfcRegs.h b/arch/arm/plat-armada/mv_hal/nfc/mvNfcRegs.h
index 63adcb1..213b0ce 100644
--- a/arch/arm/plat-armada/mv_hal/nfc/mvNfcRegs.h
+++ b/arch/arm/plat-armada/mv_hal/nfc/mvNfcRegs.h
@@ -69,9 +69,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 extern "C" {
 #endif
 
-#if !defined(CONFIG_OF)
 #include "mvSysNfcConfig.h"
-#endif
 
 /* NAND Flash Control Register */
 #define	NFC_CONTROL_REG			(MV_NFC_REGS_BASE + 0x0)
-- 
1.7.5.4

