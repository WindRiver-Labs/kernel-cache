From 09639705ead0f34f0644e80513f6af736485e2cd Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Mon, 28 Oct 2013 15:19:10 +0200
Subject: [PATCH 1114/1825] iocc: a38x: disable dma_io_sync

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit ef2927bf6d6ddf46435a6bdce271819b79c3ba2d

	disable dma_io_sync barrier for the rampup

Change-Id: I89c279d654fc1d7aff4e04f6c2ba2da2b3b6df91
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3891
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armada38x/core.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-armada38x/core.c b/arch/arm/mach-armada38x/core.c
index 29af572..6b68b8c 100644
--- a/arch/arm/mach-armada38x/core.c
+++ b/arch/arm/mach-armada38x/core.c
@@ -1166,6 +1166,9 @@ void dma_io_sync(void)
 	int idx = smp_processor_id();
 	volatile u32 data;
 
+	/* interrupts bug WA */
+	return 0;
+
 	/* Write '1' to the first word of the buffer */
 	*dma_io_sync_buff_virt[idx] = 0x1;
 
-- 
1.7.5.4

