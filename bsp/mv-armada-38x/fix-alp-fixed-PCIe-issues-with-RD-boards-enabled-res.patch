From a60b5b32e4adcc4220cd8d87ad3024f35decbb22 Mon Sep 17 00:00:00 2001
From: Moti Buskila <motib@marvell.com>
Date: Wed, 21 Aug 2013 18:00:48 +0300
Subject: [PATCH 0975/1825] fix: alp: fixed PCIe issues with RD boards -
 enabled reset GPIO

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit feac421732efe7e75f33df555d4a762c16cb98f5

	fixed GPIO values for RD-6660 and RD-6650 (Added PCIe reset signal)
	- updated values at bin_hdr (as a part of SerDes initializtion sequence),
	  and at u-boot GPIO initialization
	- Added mvPexAgentReset routine @ bin_hdr to enable reset GPIO

Change-Id: I8e4ebd93cbe20f10b2008eb3dcc7922a89a744be
Signed-off-by: Moti Buskila <motib@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3069
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.h     |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
index 4871edb..072f012 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
@@ -170,10 +170,10 @@
 
 #define RD_88F6660_GPP_OUT_ENA_LOW      0xFFFFFFFF
 #define RD_88F6660_GPP_OUT_ENA_MID      (~(BIT7 | BIT8 | BIT11))
-#define RD_88F6660_GPP_OUT_ENA_HIGH     (~(BIT0 | BIT1))
+#define RD_88F6660_GPP_OUT_ENA_HIGH     (~(BIT1 | BIT2))
 #define RD_88F6660_GPP_OUT_VAL_LOW      0x0
 #define RD_88F6660_GPP_OUT_VAL_MID      0x0
-#define RD_88F6660_GPP_OUT_VAL_HIGH     (BIT0)
+#define RD_88F6660_GPP_OUT_VAL_HIGH     (BIT1 | BIT2)
 #define RD_88F6660_GPP_POL_LOW          0x0
 #define RD_88F6660_GPP_POL_MID          0x0
 #define RD_88F6660_GPP_POL_HIGH         0x0
@@ -184,17 +184,17 @@
 #define RD_88F6650_MPP0_7               0x55555555  /* NAND */
 #define RD_88F6650_MPP8_15              0x22555555  /* NAND , I2C */
 #define RD_88F6650_MPP16_23             0x11110022  /* UA0, SSI, GPIO's */
-#define RD_88F6650_MPP24_31             0x04606101  /* PCIe0CLKREQ, P0,C0_Leds & DYING GASP*/
+#define RD_88F6650_MPP24_31             0x04606001  /* P0,C0_Leds & DYING GASP*/
 #define RD_88F6650_MPP32_39             0x04420000  /* GE_SMI, PON & GPIO's */
 #define RD_88F6650_MPP40_47             0x22120020  /* GE0, PON_[XVR,TX_PD,TX_SD]*/
 #define RD_88F6650_MPP48_55             0x22222222  /* GE0*/
 #define RD_88F6650_MPP56_63             0x44004422  /* GE0 , LED, GPIO's */
 #define RD_88F6650_MPP64_67             0x004	    /* GPIO's */
 
-#define RD_88F6650_GPP_OUT_ENA_LOW      (~(BIT19 | BIT25))
+#define RD_88F6650_GPP_OUT_ENA_LOW      (~(BIT19 | BIT25 | BIT29))
 #define RD_88F6650_GPP_OUT_ENA_MID      0xFFFFFFFF
 #define RD_88F6650_GPP_OUT_ENA_HIGH     0xFFFFFFFF
-#define RD_88F6650_GPP_OUT_VAL_LOW      0x0
+#define RD_88F6650_GPP_OUT_VAL_LOW      (BIT29)
 #define RD_88F6650_GPP_OUT_VAL_MID      0x0
 #define RD_88F6650_GPP_OUT_VAL_HIGH     0x0
 #define RD_88F6650_GPP_POL_LOW          0x0
-- 
1.7.5.4

