From 5eb085f76ea07a08c024c0ad0580f49a9e927ef6 Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Thu, 17 Oct 2013 13:20:58 +0200
Subject: [PATCH 1043/1825] alp: Added support for LEDS matrix configuration

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 3dd303496049b16b1a44825d57eeba2d653b855a

	Added :
	- Ethernet Complex indication BIT for RGMII-0 External PHY existance
	- LEDS matrix register definitions
	- LEDS initialization for switch internal PHYs and external PHY

Change-Id: I12bda2221a4b868a8172e416f5a3fb9dddd2eb28
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3733
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.c     |    1 +
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h        |    2 +-
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h       |    3 +++
 3 files changed, 5 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
index 923115f..2b9501a 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
@@ -325,6 +325,7 @@ MV_BOARD_MPP_TYPE_INFO rd88f6650InfoBoardModTypeInfo[] = {
 				     MV_ETHCOMP_SW_P3_2_GE_PHY_P3 |
 				     MV_ETHCOMP_P2P_MAC0_2_SW_SPEED_2G |
 				     MV_ETHCOMP_SW_P4_2_RGMII0   |
+				     MV_ETHCOMP_SW_P4_2_RGMII0_EXT_PHY |
 				     MV_ETHCOMP_GE_MAC0_2_SW_P6,
 		.ethPortsMode = 0x0
 	}
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
index eaa3da9..3ecd58f 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
@@ -161,7 +161,7 @@ typedef enum {
 	MV_ETHCOMP_SW_P2_2_GE_PHY_P2		=	BIT2,
 	MV_ETHCOMP_SW_P3_2_GE_PHY_P3		=	BIT3,
 	MV_ETHCOMP_SW_P4_2_RGMII0		=	BIT4,
-	/* Switch port 5 does not exist, ==> BIT5 is omitted */
+	MV_ETHCOMP_SW_P4_2_RGMII0_EXT_PHY	=	BIT5,
 	MV_ETHCOMP_GE_MAC0_2_SW_P6		=	BIT6,
 	MV_ETHCOMP_GE_MAC0_2_GE_PHY_P0		=	BIT7,
 	MV_ETHCOMP_GE_MAC0_2_RGMII0		=	BIT8,
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
index 2bccd25..1da5822 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
@@ -171,6 +171,9 @@ extern "C" {
 #define CHIP_BOND_REG                           0x18238
 #define PCKG_OPT_MASK                           0x3
 
+/* LED Matrix Control */
+#define LED_MATRIX_CONTROL_REG(unit)		(MV_MISC_REGS_OFFSET + 0xf0 + (unit * 4))
+
 /*****************/
 /* PUP registers */
 /*****************/
-- 
1.7.5.4

