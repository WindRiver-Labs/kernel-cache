From 1f4346ea73f3ebd76a5281d4e8a47355cde2e004 Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Wed, 12 Mar 2014 08:32:00 +0200
Subject: [PATCH 1450/1825] timer: alp: Fixed the TWD timer rate for ALP-A0

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 49c1237d6f079cd2b9aa8beac03e0ac49ae3f149

Change-Id: I670b9b29d35c0c71813a01d33e4b0144e287a264
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/6338
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/time.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-avantalp/time.c b/arch/arm/mach-avantalp/time.c
index de0254e..b7e1b37 100644
--- a/arch/arm/mach-avantalp/time.c
+++ b/arch/arm/mach-avantalp/time.c
@@ -343,7 +343,8 @@ static void __init alp_timer_init(void)
 		ca9_twd_rate = alp_ca9_twd_timer_rate_get();
 		mv_twd_rate = ca9_twd_rate / 2;
 	} else {
-		mv_twd_rate = ALP_TIMER_RATE;
+		mv_twd_rate  = ALP_TIMER_RATE;
+		ca9_twd_rate = mvBoardL2ClkGet();
 	}
 
 	ticks_per_jiffy = (mv_twd_rate + HZ/2) / HZ;
-- 
1.7.5.4

