From 539eacd206cc59630650f2ec84d139ed935c72ce Mon Sep 17 00:00:00 2001
From: Yelena <yelena@marvell.com>
Date: Sun, 23 Feb 2014 13:08:50 +0200
Subject: [PATCH 1387/1825] neta: init SMI PHY register address

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 195a8ba8a322c8115234e9c7b2b025de9822779c

	Call to mvEthPhySmiAddrSet() only for FDT support kernel

Change-Id: I284a71962a59367f84fc6c4593c7b72e45c83a33
Signed-off-by: Yelena <yelena@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c     |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
index 4896404..137e83e 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
@@ -4100,6 +4100,10 @@ static int mv_eth_probe(struct platform_device *pdev)
 			return -ENODEV;
 	}
 
+#ifdef CONFIG_OF
+	/* init SMI register */
+	mvEthPhySmiAddrSet(ETH_SMI_REG(port));
+#endif
 	mvNetaPortPowerUp(port, plat_data->is_sgmii, plat_data->is_rgmii);
 
 	mv_eth_win_init(port);
-- 
1.7.5.4

