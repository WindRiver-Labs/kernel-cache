From 1569ee3905ce5fd95a361e17b213a71381156656 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 10 Oct 2014 16:59:26 +0800
Subject: [PATCH 1816/1825] pcie: fix the compile warning

commit da303d18df0d [fix: pci-e: a38x: Fixed PCI-E device numbering] from
https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
introduces the following compile warning:

1. Fix the warning: 'struct mbus_dram_target_info' declared inside parameter list
2. Fix the warning: unused variable 'regOff'

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armada38x/core.h |    1 +
 arch/arm/mach-armada38x/pex.c  |    3 ++-
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-armada38x/core.h b/arch/arm/mach-armada38x/core.h
index 31b2f3c..818737b 100644
--- a/arch/arm/mach-armada38x/core.h
+++ b/arch/arm/mach-armada38x/core.h
@@ -1,5 +1,6 @@
 #include "ctrlEnv/sys/mvCpuIf.h"
 #include "ctrlEnv/mvCtrlEnvAddrDec.h"
+#include <linux/mbus.h>
 
 #define AMBA_DEVICE(name, busid, base, plat)	\
 struct amba_device name##_device = {		\
diff --git a/arch/arm/mach-armada38x/pex.c b/arch/arm/mach-armada38x/pex.c
index ea6853c..359fb92 100644
--- a/arch/arm/mach-armada38x/pex.c
+++ b/arch/arm/mach-armada38x/pex.c
@@ -217,9 +217,10 @@ static int mv_pci_read_config(struct pci_bus *bus,
 	u32 bus_num, func, dev_no, temp, localBus;
 	struct pci_sys_data *sysdata = (struct pci_sys_data *)bus->sysdata;
 	u32 pciIf = sysdata->mv_controller_num;
+#ifdef MV_DEBUG
 	u32 regOff = (MV_U32)where & (PXCAR_REG_NUM_MASK
 			| PXCAR_REAL_EXT_REG_NUM_MASK);
-
+#endif
 
 	*val = 0xffffffff;
 
-- 
1.7.5.4

