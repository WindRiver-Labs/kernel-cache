From 5161648332d683176e2036422d7a0e8b6be2dd92 Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Thu, 16 May 2013 15:39:55 +0300
Subject: [PATCH 0654/1825] ALP: Fixed remap register offset for PEX 1

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 33866718e9317b7bb903d0c8902a8e4581ccfa98

Change-Id: I9aaf10bbfa479e860dd179f37d4afb9fd484cd77
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/1836
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/sys/mvAhbToMbus.c     |   50 +++++++++++---------
 1 files changed, 28 insertions(+), 22 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvAhbToMbus.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvAhbToMbus.c
index 8b5da23..fb492d0 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvAhbToMbus.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvAhbToMbus.c
@@ -628,6 +628,8 @@ MV_STATUS mvAhbToMbusWinTargetSwap(MV_TARGET target1, MV_TARGET target2)
 *******************************************************************************/
 static MV_STATUS ahbToMbusRemapRegOffsGet(MV_U32 winNum, AHB_TO_MBUS_REMAP_REG_OFFS *pRemapRegs)
 {
+	MV_U16 ctrlMode = mvCtrlModelGet();
+
 	switch (winNum) {
 	case 0:
 	case 1:
@@ -636,17 +638,19 @@ static MV_STATUS ahbToMbusRemapRegOffsGet(MV_U32 winNum, AHB_TO_MBUS_REMAP_REG_O
 		break;
 	case 2:
 	case 3:
-		if ((mvCtrlModelGet() == MV_5281_DEV_ID) ||
-			(mvCtrlModelGet() == MV_1281_DEV_ID) ||
-			(mvCtrlModelGet() == MV_6183_DEV_ID) ||
-			(mvCtrlModelGet() == MV_6183L_DEV_ID) ||
-			(mvCtrlModelGet() == MV_6710_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78130_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78160_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78230_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78260_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78460_DEV_ID) ||
-			(mvCtrlModelGet() == MV_78000_DEV_ID)) {
+		if ((ctrlMode == MV_5281_DEV_ID) ||
+			(ctrlMode == MV_1281_DEV_ID) ||
+			(ctrlMode == MV_6183_DEV_ID) ||
+			(ctrlMode == MV_6183L_DEV_ID) ||
+			(ctrlMode == MV_6710_DEV_ID) ||
+			(ctrlMode == MV_78130_DEV_ID) ||
+			(ctrlMode == MV_78160_DEV_ID) ||
+			(ctrlMode == MV_78230_DEV_ID) ||
+			(ctrlMode == MV_78260_DEV_ID) ||
+			(ctrlMode == MV_78460_DEV_ID) ||
+			(ctrlMode == MV_6660_DEV_ID) ||
+			(ctrlMode == MV_6650_DEV_ID) ||
+			(ctrlMode == MV_78000_DEV_ID)) {
 			pRemapRegs->lowRegOffs = AHB_TO_MBUS_WIN_REMAP_LOW_REG(winNum);
 			pRemapRegs->highRegOffs = AHB_TO_MBUS_WIN_REMAP_HIGH_REG(winNum);
 			break;
@@ -662,17 +666,19 @@ static MV_STATUS ahbToMbusRemapRegOffsGet(MV_U32 winNum, AHB_TO_MBUS_REMAP_REG_O
 	case 5:
 	case 6:
 	case 7:
-		if ((mvCtrlModelGet() == MV_5281_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_1281_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_6183_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_6183L_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_6710_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78130_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78160_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78230_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78260_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78460_DEV_ID) ||
-			   (mvCtrlModelGet() == MV_78000_DEV_ID)) {
+		if ((ctrlMode == MV_5281_DEV_ID) ||
+			(ctrlMode == MV_1281_DEV_ID) ||
+			(ctrlMode == MV_6183_DEV_ID) ||
+			(ctrlMode == MV_6183L_DEV_ID) ||
+			(ctrlMode == MV_6710_DEV_ID) ||
+			(ctrlMode == MV_78130_DEV_ID) ||
+			(ctrlMode == MV_78160_DEV_ID) ||
+			(ctrlMode == MV_78230_DEV_ID) ||
+			(ctrlMode == MV_78260_DEV_ID) ||
+			(ctrlMode == MV_78460_DEV_ID) ||
+			(ctrlMode == MV_6660_DEV_ID) ||
+			(ctrlMode == MV_6650_DEV_ID) ||
+			(ctrlMode == MV_78000_DEV_ID)) {
 			pRemapRegs->lowRegOffs = AHB_TO_MBUS_WIN_REMAP_LOW_REG(winNum);
 			pRemapRegs->highRegOffs = AHB_TO_MBUS_WIN_REMAP_HIGH_REG(winNum);
 			break;
-- 
1.7.5.4

