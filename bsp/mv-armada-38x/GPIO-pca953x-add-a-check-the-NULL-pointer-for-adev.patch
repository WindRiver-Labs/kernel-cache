From 6fae6976666a25618100817eefe26bc394a81b62 Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Mon, 26 Sep 2016 10:00:35 +0800
Subject: [PATCH 2/2] GPIO-pca953x: add a check the NULL pointer for adev

If platform donesn't support ACPI, ACPI_COMPANION will return NULL
pointer, we need to check this pointer

Signed-off-by: czou <cao.zou@windriver.com>
---
 drivers/gpio/gpio-pca953x.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpio/gpio-pca953x.c b/drivers/gpio/gpio-pca953x.c
index f99706f..10b93bf 100644
--- a/drivers/gpio/gpio-pca953x.c
+++ b/drivers/gpio/gpio-pca953x.c
@@ -116,7 +116,7 @@ static void pca953x_setup_int3491(struct pca953x_chip *chip)
 	struct acpi_device *adev = ACPI_COMPANION(&chip->client->dev);
 	unsigned int uid;
 
-	if (kstrtouint(acpi_device_uid(adev), 0, &uid) || !uid--)
+	if (!adev || kstrtouint(acpi_device_uid(adev), 0, &uid) || !uid--)
 		return;
 
 	chip->gpio_start = 8 /* sch_gpio */ +
-- 
1.7.5.4

