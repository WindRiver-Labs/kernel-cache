From d6ea06679d04fbf1821abe8dd6f117cf4d275314 Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Tue, 16 Jul 2013 16:15:39 +0300
Subject: [PATCH 0840/1825] alp: cosmetics: fix boot prints

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b3f3c78d85fbed3a330d409d3df3abdd5cc9242a

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I19ba752b70307b0fc126068061ef136a347615bc
Reviewed-on: http://vgitil04.il.marvell.com:8080/2674
Reviewed-by: Igor Patrik <igorp@marvell.com>
Tested-by: Igor Patrik <igorp@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/core.c     |   33 +++++++++++++++++----------------
 arch/arm/mach-avantalp/flashmap.c |    2 --
 arch/arm/mach-avantalp/pex.c      |    9 +++++----
 3 files changed, 22 insertions(+), 22 deletions(-)

diff --git a/arch/arm/mach-avantalp/core.c b/arch/arm/mach-avantalp/core.c
index db26325..863c960 100644
--- a/arch/arm/mach-avantalp/core.c
+++ b/arch/arm/mach-avantalp/core.c
@@ -169,8 +169,8 @@ static int __init parse_tag_mv_uboot(const struct tag *tag)
 #endif
 
 	mvBoardIdSet(mvBoardIdGet());
-
 #ifdef CONFIG_MV_INCLUDE_GIG_ETH
+
 	for (i = 0; i < MV_UBOOT_ETH_PORTS; i++) {
 		memcpy(mvMacAddr[i], tag->u.mv_uboot.macAddr[i], 6);
 		mvMtu[i] = read_mtu(tag->u.mv_uboot.mtu[i]);
@@ -451,7 +451,6 @@ static struct resource mvsdio_resources[] = {
 		.end	= IRQ_GLOBAL_SDIO,
 		.flags	= IORESOURCE_IRQ,
 	},
-
 };
 
 static u64 mvsdio_dmamask = 0xffffffffUL;
@@ -499,10 +498,10 @@ void __init alp_sdio_init(void)
 	}
 #endif
 }
+
 /*******************************************************************************
  * USB
  */
-
 void __init alp_usb_init(void)
 {
 #ifdef CONFIG_MV_INCLUDE_USB
@@ -512,7 +511,7 @@ void __init alp_usb_init(void)
 
 /*******************************************************************************
  * GBE
- *******************************************************************************/
+ */
 #if defined(CONFIG_MV_ETH_PP2)
 static void mv_pp2_giga_pdev_register(struct platform_device *pdev)
 {
@@ -1184,30 +1183,32 @@ static void alp_spi_init(void)
 /*******************************************************************************
  * Helper Routines
  */
-
 static void print_board_info(void)
 {
+#if defined(MV_CPU_LE)
+	const char *endianness = "LE";
+#else
+	const char *endianness = "BE";
+#endif
 	char name_buff[50];
 
-	pr_info("\n  Marvell Avanta-LP");
+	pr_info("\n\tMarvell AvantaLP");
 
 	mvBoardNameGet(name_buff, 50);
-	pr_info(" %s Board - ", name_buff);
+	pr_info("\tBoard:        [%s]", name_buff);
 
 	mvCtrlModelRevNameGet(name_buff);
-	pr_info(" Soc: %s",  name_buff);
-#if defined(MV_CPU_LE)
-	pr_info(" LE\n");
-#else
-	pr_info(" BE\n");
-#endif
-	pr_info("  LSP version: %s\n", LSP_VERSION);
+	pr_info("\tSoc:          [%s]",  name_buff);
+
+	pr_info("\tEndianness:   [%s]",  endianness);
+	pr_info("\tLSP version:  [%s]\n", LSP_VERSION);
 #ifdef CONFIG_AURORA_IO_CACHE_COHERENCY
-	pr_info("  IOCC: Support IO coherency.\n");
+	pr_info("\tIOCC: Support IO coherency.\n");
 #ifdef CONFIG_ALP_IOCC_SYNC_BARRIER_WA
-	pr_info("     -> Sync Barrier WA enabled\n");
+	pr_info("\t   -> Sync Barrier WA enabled\n");
 #endif
 #endif
+
 #ifdef CONFIG_MV_AMP_ENABLE
 	mvUnitMapPrint();
 #endif
diff --git a/arch/arm/mach-avantalp/flashmap.c b/arch/arm/mach-avantalp/flashmap.c
index d3569ef..3c7ee29 100644
--- a/arch/arm/mach-avantalp/flashmap.c
+++ b/arch/arm/mach-avantalp/flashmap.c
@@ -46,8 +46,6 @@ disclaimer.
 #include "ctrlEnv/sys/mvCpuIf.h"
 #include "ctrlEnv/mvUnitMap.h"
 
-#define MTD_FLASH_MAP_DEBUG
-
 #ifdef MTD_FLASH_MAP_DEBUG
 #define DB(x)	x
 #else
diff --git a/arch/arm/mach-avantalp/pex.c b/arch/arm/mach-avantalp/pex.c
index f03e301..a59e0e7 100644
--- a/arch/arm/mach-avantalp/pex.c
+++ b/arch/arm/mach-avantalp/pex.c
@@ -80,25 +80,26 @@ static void __init mv_pex_preinit(void)
 		if (mvUnitMapIsPexMine(pci_if) == MV_FALSE)
 			continue;
 
-		pr_info("PCIe: Cheking physical bus #%d: ", pci_if);
 		if (mvCtrlPwrClckGet(PEX_UNIT_ID, pci_if) == MV_FALSE) {
-			pr_info("Disabled\n");
+			pr_info("PCIe bus #%d: disabled", pci_if);
 			continue;
 		}
+		pr_info("PCIe bus #%d: enabled", pci_if);
 
 		if ((MV_REG_READ(PEX_DBG_STATUS_REG(pci_if)) & 0x7f) != 0x7E) {
-			pr_info("no link, disabled\n");
+			pr_info("PCIe bus #%d: link down, => disabling...", pci_if);
 			mvCtrlPwrClckSet(PEX_UNIT_ID, pci_if, MV_FALSE);
 			continue;
 		}
 
 		if (mvSysPexInit(pci_if, MV_PEX_ROOT_COMPLEX) != MV_OK) {
 			pr_warn("%s: Error: mvSysPexInit(%d) failed\n", __func__, pci_if);
+			pr_info("PCIe bus #%d: init failed, => disabling...", pci_if);
 			mvCtrlPwrClckSet(PEX_UNIT_ID, pci_if, MV_FALSE);
 			continue;
 		}
 
-		pr_info("PCIe %d enabled - link up\n", pci_if);
+		pr_info("PCIe bus #%d: enabled - link up\n", pci_if);
 
 		/* Assign bus number 0 to first active/available bus */
 		if (pex0flg == 0) {
-- 
1.7.5.4

