From 94ad170f2c5f96a07e933cbb5942b22759d45b1b Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Mon, 30 Dec 2013 09:49:44 +0200
Subject: [PATCH 1248/1825] fix: sdio/mmc: avanta: Fix conversion of GPIO to
 IRQ number

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit f7e1ebadd02ac41d8478f1880297bff70feab435

	If gpio_to_irq is not defined in
	arch/arm/mach-feroceon-kw2/include/mach/gpio.h, then in the
	arch/arm/include/asm/gpio.h file, it will be defined to
	__gpio_to_irq, which is wrong function to convert GPIO to IRQ
	in case of Avanta.

Change-Id: I70ac5d213e67106eb4e90c112dc676dadcc16351
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4935
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-feroceon-kw2/include/mach/gpio.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-feroceon-kw2/include/mach/gpio.h b/arch/arm/mach-feroceon-kw2/include/mach/gpio.h
index 85837ff..71ccdc3 100644
--- a/arch/arm/mach-feroceon-kw2/include/mach/gpio.h
+++ b/arch/arm/mach-feroceon-kw2/include/mach/gpio.h
@@ -13,6 +13,8 @@
 #include <plat/gpio.h>
 #include <asm-generic/gpio.h>		/* cansleep wrappers */
 
+#define gpio_to_irq gpio_to_irq
+
 static inline int gpio_to_irq(int pin)
 {
 	return pin + IRQ_GPP_START;
-- 
1.7.5.4

