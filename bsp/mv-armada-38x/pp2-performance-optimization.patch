From 6f4c00fdf7f809314d2220e4187efb60526b59b2 Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Tue, 3 Dec 2013 21:03:03 -0500
Subject: [PATCH 1178/1825] pp2: performance optimization

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 6033267472429e088423134f35a3b235df739ebe

	- Improve data path functions
		Remove parameters checking
		Convert the functions to inline

Change-Id: I83b90723e596f25c025ae77cbb18d047c60500a2
Signed-off-by: Dmitri Epshtein <dima@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4576
Reviewed-by: Yelena Krivosheev <yelena@marvell.com>
Reviewed-by: Uri Eliyahu <uriel@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.c |   16 ----------------
 arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.h |   10 ++++++++++
 2 files changed, 10 insertions(+), 16 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.c b/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.c
index 0cf8729..279907d 100644
--- a/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.c
+++ b/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.c
@@ -1335,22 +1335,6 @@ MV_STATUS mvPp2RxFifoInit(int portNum)
 /*******************************/
 /*       Interrupts API        */
 /*******************************/
-MV_VOID mvPp2GbeCpuInterruptsDisable(int port, int cpuMask)
-{
-	if (mvPp2PortCheck(port))
-		return;
-
-	mvPp2WrReg(MV_PP2_ISR_ENABLE_REG(port), MV_PP2_ISR_DISABLE_INTERRUPT(cpuMask));
-}
-
-MV_VOID mvPp2GbeCpuInterruptsEnable(int port, int cpuMask)
-{
-	if (mvPp2PortCheck(port))
-		return;
-
-	mvPp2WrReg(MV_PP2_ISR_ENABLE_REG(port), MV_PP2_ISR_ENABLE_INTERRUPT(cpuMask));
-}
-
 MV_STATUS mvPp2RxqTimeCoalSet(int port, int rxq, MV_U32 uSec)
 {
 	MV_U32 regVal;
diff --git a/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.h b/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.h
index 136b06f..4706444 100644
--- a/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.h
+++ b/arch/arm/plat-armada/mv_hal/pp2/gbe/mvPp2Gbe.h
@@ -272,6 +272,16 @@ static INLINE MV_U32 mvPp2TxqDescCsum(int l3_offs, int l3_proto, int ip_hdr_len,
 	return command;
 }
 
+static INLINE MV_VOID mvPp2GbeCpuInterruptsDisable(int port, int cpuMask)
+{
+	mvPp2WrReg(MV_PP2_ISR_ENABLE_REG(port), MV_PP2_ISR_DISABLE_INTERRUPT(cpuMask));
+}
+
+static INLINE MV_VOID mvPp2GbeCpuInterruptsEnable(int port, int cpuMask)
+{
+	mvPp2WrReg(MV_PP2_ISR_ENABLE_REG(port), MV_PP2_ISR_ENABLE_INTERRUPT(cpuMask));
+}
+
 /* Get Giga port handler */
 static INLINE MV_PP2_PORT_CTRL *mvPp2PortHndlGet(int port)
 {
-- 
1.7.5.4

