From 0ac6900dddc10496ddd3f684177e0636dfc85a28 Mon Sep 17 00:00:00 2001
From: Yehuda Yitschak <yehuday@marvell.com>
Date: Tue, 13 May 2014 17:08:18 +0300
Subject: [PATCH 1653/1825] voice: Fixed Zarlink voice tool to compile only
 for relevant chip

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 5a631b8e538a8dd230ef1d229165e9b10b28de89

Change-Id: Ic858e5a70c6e61e1b711cb80d5820b155b21b1f0
Signed-off-by: Yehuda Yitschak <yehuday@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7977
Reviewed-by: Shadi Ammouri <shadi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 tools/voice/zarlink/kernel/Makefile |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

diff --git a/tools/voice/zarlink/kernel/Makefile b/tools/voice/zarlink/kernel/Makefile
index 4fc7ace..26c9639 100644
--- a/tools/voice/zarlink/kernel/Makefile
+++ b/tools/voice/zarlink/kernel/Makefile
@@ -31,7 +31,12 @@ ifeq ($(CONFIG_ZARLINK_SLIC_EXTERNAL_DRIVER),y)
 CFLAGS_VE792 = -I$(ZARLINK_VPAPI)/zarlink-ve792/api_lib/includes -I$(ZARLINK_VPAPI)/vp_hal -I$(ZARLINK_VPAPI)/vpapi_dev
 CFLAGS_VE8XX = -I$(ZARLINK_VPAPI)/api_lib/includes -I$(ZARLINK_VPAPI)/vp_hal -I$(ZARLINK_VPAPI)/vpapi_dev
 
-all: mv_voice_tool-ve792 mv_voice_tool-ve880 mv_voice_tool-ve886 mv_voice_tool-ve890
+tools-$(CONFIG_ZARLINK_SLIC_VE792) := mv_voice_tool-ve792
+tools-$(CONFIG_ZARLINK_SLIC_VE880) := mv_voice_tool-ve880
+tools-$(CONFIG_ZARLINK_SLIC_VE886) := mv_voice_tool-ve886
+tools-$(CONFIG_ZARLINK_SLIC_VE890) := mv_voice_tool-ve890
+
+all: $(tools-y)
 
 mv_voice_tool-ve792: mv_voice_tool.c vpapi_lib.c profile_79238.c
 	$(CC) $(CFLAGS) $(CFLAGS_VE792) -DZARLINK_SLIC_VE792 -static -o $@ $^
-- 
1.7.5.4

