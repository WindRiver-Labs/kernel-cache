From a34a1286057b436caf0a655474a10f1c077cfa8a Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Wed, 17 Apr 2013 15:58:42 +0300
Subject: [PATCH 0592/1825] ALP: Return PEX per-board-info, not NULL

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 1fe63c224e73493008a89dba49d6e5df91a5ffe0

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I865b377a799b7b562af04ad6b2a66b9a649eda93
Reviewed-on: http://vgitil04.il.marvell.com:8080/1600
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.c      |    2 +-
 .../avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h     |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
index 6c883b4..5dc482d 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
@@ -2624,7 +2624,7 @@ MV_32 mvBoardSwitchPortMap(MV_U32 switchIdx, MV_U32 switchPortNum)
 *******************************************************************************/
 MV_BOARD_PEX_INFO *mvBoardPexInfoGet(void)
 {
-	return NULL;
+	return &board->boardPexInfo;
 }
 
 /*******************************************************************************
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
index ca026e0..d6a48fa 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
@@ -82,7 +82,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #define CPU_CTRL_STAT_REG(cpu)			(MV_CPUIF_REGS_BASE(cpu) + 0x8)
 
 #define PCIE_BOOT_ADDR_REG			(MV_MISC_REGS_BASE + 0x2D4)
-#define CPU_RESUME_ADDR_REG			(MV_PCIE_BOOT_ADDR_REG)
+#define CPU_RESUME_ADDR_REG			(PCIE_BOOT_ADDR_REG)
 
 #define CPU_SOFT_RESET_REG(cpu)			(MV_MBUS_REGS_OFFSET + 0x800 + (cpu) * 0x8)
 
-- 
1.7.5.4

