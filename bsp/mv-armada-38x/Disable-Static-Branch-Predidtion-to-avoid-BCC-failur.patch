From 16c19fbafdf540982d61da01b62831d143cacfbb Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:34:39 +0300
Subject: [PATCH 0130/1825] Disable Static Branch Predidtion to avoid BCC
 failure

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 3e11a5509c658e082099c218e1214c4607f50f05

Change-Id: I993ffebe0fa6049f697927fd20bba931be473858
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mm/proc-sheeva_pj4bv7.S |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mm/proc-sheeva_pj4bv7.S b/arch/arm/mm/proc-sheeva_pj4bv7.S
index dc638a4..5335b95 100644
--- a/arch/arm/mm/proc-sheeva_pj4bv7.S
+++ b/arch/arm/mm/proc-sheeva_pj4bv7.S
@@ -350,6 +350,7 @@ defined(CONFIG_SMP)
 	mrc        p15, 1, r0, c15, c1, 1                         /* Read */
 	orr        r0, r0, #0x00020                                /* BIT5 STREX backoff_disable--> '1' enable the back off of STREX instr */
 	orr	   r0, r0, #0x00100                                /* BIT8 Internal Parity Handling Disable--> '1' Disable Internal Parity Handling */
+	bic        r0, r0, #0x4                                 /* Disable Static BP */
 	mcr        p15, 1, r0, c15, c1, 1                         /* Write */
 /* Auxiliary Functional Modes Control Register 0 */
 	mrc        p15, 1, r0, c15, c2, 0                         /* Read */
-- 
1.7.5.4

