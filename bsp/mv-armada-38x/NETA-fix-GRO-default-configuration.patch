From 3617e7a84cc8367a6b2e84ae445185a19b853c63 Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:33:48 +0300
Subject: [PATCH 0075/1825] NETA: fix GRO default configuration

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 22254861d02daf14aa79e479b63ff411848f8c09

Change-Id: I03741583412bf1eb2125fcc95698e2dfd95da194
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c     |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
index 2f003ac..169cee7 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_netdev.c
@@ -3100,14 +3100,14 @@ struct net_device *mv_eth_netdev_init(struct eth_port *pp, int mtu, u8 *mac)
 	pp->tx_done_timer.data = (unsigned long)dev;
 	pp->cleanup_timer.data = (unsigned long)dev;
 
-	mv_eth_netdev_set_features(dev);
-
 	if (pp->flags & MV_ETH_F_CONNECT_LINUX) {
 		if (register_netdev(dev)) {
 			printk(KERN_ERR "failed to register %s\n", dev->name);
 			free_netdev(dev);
 			return NULL;
 		} else {
+			mv_eth_netdev_set_features(dev);
+
 			printk(KERN_ERR "    o %s, ifindex = %d, GbE port = %d", dev->name, dev->ifindex, pp->port);
 #ifdef CONFIG_MV_ETH_SWITCH
 			if (!(pp->flags & MV_ETH_F_SWITCH))
-- 
1.7.5.4

