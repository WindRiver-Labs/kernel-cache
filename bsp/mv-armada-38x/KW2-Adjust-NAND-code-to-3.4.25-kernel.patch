From 6bdf34fa26996562961812a44495bc6ff4f2f45b Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Thu, 11 Jul 2013 18:09:54 +0300
Subject: [PATCH 0809/1825] KW2: Adjust NAND code to 3.4.25 kernel.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b8c808ae86758a1820b60cb45657accece6fa6df

Change-Id: I52c0d7d6ae1b6608b74f4968e452eb4202eb3931
Signed-off-by: Grzegorz Jaszczyk <jaz@semihalf.com>
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-feroceon/mv_drivers_lsp/mv_mtd/nand_lnc.c |    8 +++++++-
 1 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_mtd/nand_lnc.c b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_mtd/nand_lnc.c
index bdc00a9..70e2d20 100644
--- a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_mtd/nand_lnc.c
+++ b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_mtd/nand_lnc.c
@@ -29,6 +29,12 @@ unsigned int mv_nand_ecc;
 #ifdef CONFIG_MTD_CMDLINE_PARTS
 extern struct mtd_partition nand_parts_info[];
 extern int nand_parts_num;
+extern MV_U32    boardGetDevCSNum(MV_32 devNum, MV_BOARD_DEV_CLASS devType);
+extern int add_mtd_partitions(struct mtd_info *, const struct mtd_partition *,
+			      int);
+extern int parse_mtd_partitions(struct mtd_info *master, const char **types,
+				struct mtd_partition **pparts,
+				struct mtd_part_parser_data *data);
 
 static const char *part_probes[] __initdata = { "cmdlinepart", NULL };
 #define MV_NUM_OF_NAND_PARTS nand_parts_num
@@ -155,7 +161,7 @@ int __init mv_nand_init(void)
 
 #ifdef CONFIG_MTD_CMDLINE_PARTS
 	mv_mtd->name = "nand_mtd";
-	num_of_parts = parse_mtd_partitions(mv_mtd, part_probes, &mtd_parts, 0, "");
+	num_of_parts = parse_mtd_partitions(mv_mtd, part_probes, &mtd_parts, NULL);
 	if (num_of_parts > 0)
 		part_type = "command line";
 	else
-- 
1.7.5.4

