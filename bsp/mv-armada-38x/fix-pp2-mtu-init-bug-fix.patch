From f6da6705dd83fa4f9d4a27b476a3fe185c04285c Mon Sep 17 00:00:00 2001
From: Uri Eliyahu <uriel@marvell.com>
Date: Tue, 26 Nov 2013 14:42:37 +0200
Subject: [PATCH 1161/1825] fix: pp2: mtu init bug fix

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 1ce991fdba99a2da49000c4a59482c6cdcb92e47

	- set classifier mtu

Change-Id: I7c96255cad1d1e810c4d0738c9d69c3e1630e158
Signed-off-by: Uri Eliyahu <uriel@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4467
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c      |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
index cf895a3..1303b18 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
@@ -3368,7 +3368,7 @@ static int mv_eth_load_network_interfaces(struct platform_device *pdev)
 		/* the same MTU for all Ports/Queues */
 
 		for (txp = 0; txp < pp->txp_num; txp++)
-			mvPp2V0ClsHwMtuSet(MV_PPV2_PORT_PHYS(pp->port), txp, mtu/*TODO fix size*/);
+			mvPp2V0ClsHwMtuSet(MV_PPV2_PORT_PHYS(pp->port), txp, RX_PKT_SIZE(mtu));
 #endif /* CONFIG_MV_ETH_PP2_1 */
 
 		mvPp2ClsHwOversizeRxqSet(MV_PPV2_PORT_PHYS(pp->port), pp->first_rxq);
-- 
1.7.5.4

