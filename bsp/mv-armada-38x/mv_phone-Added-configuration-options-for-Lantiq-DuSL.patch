From 8f3997a1a92ceee68a95a26ef35e7bbd9f2deb5f Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Wed, 10 Jul 2013 19:18:11 +0300
Subject: [PATCH 0779/1825] mv_phone: Added configuration options for Lantiq
 DuSLIC-XT devices.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 72d7693c2ddb62162dd58bc533e9e3996d7e4849

	This commit introduces the LANTIQ_SLIC_SUPPORT and LANTIQ_SLIC_DUSLIC_XT
	options enabling support for DuSLIC-xT SLIC family from Lantiq.

Change-Id: Iaaa2db0f5dec81dcad9184fd66ad517bc519e567
Signed-off-by: Piotr Ziecik <kosmo@semihalf.com>
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-feroceon/mv_drivers_lsp/mv_phone/Kconfig  |   16 +++++++++++++++-
 .../plat-feroceon/mv_drivers_lsp/mv_phone/Makefile |    5 +++--
 2 files changed, 18 insertions(+), 3 deletions(-)

diff --git a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Kconfig b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Kconfig
index fac596e..e4188a8 100644
--- a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Kconfig
+++ b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Kconfig
@@ -29,12 +29,26 @@ choice
 	depends on MV_PHONE
 	default ZARLINK_SLIC_SUPPORT
 
+config LANTIQ_SLIC_SUPPORT
+	bool "Support Lantiq devices"
+
 config SILABS_SLIC_SUPPORT
 	bool "Support Silicon Labs devices"
 
 config ZARLINK_SLIC_SUPPORT
 	bool "Support Zarlink/Legirity devices"
 
+
+endchoice
+
+choice
+	prompt "SLIC Device"
+	depends on MV_PHONE && LANTIQ_SLIC_SUPPORT
+	default LANTIQ_SLIC_DUSLIC_XT
+
+config LANTIQ_SLIC_DUSLIC_XT
+	bool "Support Lantiq DUSLIC-xT SLIC family"
+
 endchoice
 
 choice
@@ -118,7 +132,7 @@ endchoice
 
 config MV_PHONE_USE_SLIC_LIBS
 	bool "Use binary SLIC drivers"
-	depends on MV_PHONE
+	depends on MV_PHONE && !LANTIQ_SLIC_SUPPORT
 	default y
 	---help---
 	Unselect this option only if you have source code of SLIC drivers.
diff --git a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Makefile b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Makefile
index 1390e33..d4da680 100644
--- a/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Makefile
+++ b/arch/arm/plat-feroceon/mv_drivers_lsp/mv_phone/Makefile
@@ -150,13 +150,14 @@ PHONE_OBJS += $(LSP_SLIC_PATH)/vpapi_dev.o
 
 endif
 
+mv_phone-objs := $(PHONE_OBJS) $(SILABS_CUSTOM_OBJS)
 ifeq ($(CONFIG_MV_PHONE_USE_SLIC_LIBS),y)
+mv_phone-objs += lib.a
 $(obj)/lib.a:
 	cp $(obj)/$(LSP_SLIC_PATH)/libs/$(SLIC_LIB_NAME) $(obj)/lib.a
+
 else
 	lib-y := $(ZARLINK_OBJS) $(SILABS_OBJS)
 endif
 
 obj-y := mv_phone.o $(LSP_TDM_TEST_PATH)/
-
-mv_phone-objs := $(PHONE_OBJS) $(SILABS_CUSTOM_OBJS) lib.a
-- 
1.7.5.4

