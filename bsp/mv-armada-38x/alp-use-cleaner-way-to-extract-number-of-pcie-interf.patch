From 4f3169e3ed8128e7c750579ad99abb57fd23d7a1 Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Sun, 21 Jul 2013 19:58:42 +0300
Subject: [PATCH 0872/1825] alp: use cleaner way to extract number of pcie
 interfaces

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 69559d91c2491dae29a3cac22ce9d1f8fad3344a

Change-Id: Id63c2c7c1b91bdcb106cfbae231b97fc40b9cda3
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2792
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Igor Patrik <igorp@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/pex.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-avantalp/pex.c b/arch/arm/mach-avantalp/pex.c
index 4e5d4af..6fa4ad1 100644
--- a/arch/arm/mach-avantalp/pex.c
+++ b/arch/arm/mach-avantalp/pex.c
@@ -74,9 +74,8 @@ static void __init mv_pex_preinit(void)
 	static MV_U32 pex0flg = 0;
 	unsigned int pci_if;
 	MV_ADDR_WIN pciIoRemap;
-	MV_BOARD_PEX_INFO* boardPexInfo = mvBoardPexInfoGet();
 
-	for (pci_if = 0; pci_if < boardPexInfo->boardPexIfNum; pci_if++) {
+	for (pci_if = 0; pci_if < mvCtrlPexMaxIfGet(); pci_if++) {
 		if (mvUnitMapIsPexMine(pci_if) == MV_FALSE)
 			continue;
 
-- 
1.7.5.4

