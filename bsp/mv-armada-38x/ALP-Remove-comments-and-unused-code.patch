From 7d546f8b12b69f931f643844e39153d695fe3a2e Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Sun, 14 Apr 2013 01:31:27 +0300
Subject: [PATCH 0589/1825] ALP: Remove comments and unused code

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit a6ceaa5b38045bbd297a55816578529555d65a98

Change-Id: I1474d35204f9c5943429a35165ecf1e86892dde9
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/1588
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.c      |   14 -----------
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.h      |    4 +-
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.h     |    2 +-
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c        |   24 ++++++++-----------
 .../avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h     |    2 +-
 5 files changed, 14 insertions(+), 32 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
index ea72d36..6c883b4 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
@@ -1047,22 +1047,9 @@ MV_BOARD_BOOT_SRC mvBoardBootDeviceGroupSet()
 			mvBoardMppTypeSet(4, SPI1_CPU_SMI_CTRL_TDM_LQ_UNIT);
 		else    /*REF_CLK_OUT*/
 			mvBoardMppTypeSet(4, SPI1_CPU_SMI_CTRL_REF_CLK_OUT);
-		// omriii : if nand/spi0 not for BOOT, enable Audio-SPDIF by default?
 		mvBoardMppTypeSet(0, SPI0_BOOT_SPDIF_AUDIO);
 		mvBoardMppTypeSet(1, SPI0_BOOT_SPDIF_AUDIO);
 		break;
-/* omriii : what to do with the next Boot devices  ?
-        case MSAR_0_BOOT_NOR_FLASH:
-                break;
-        case MSAR_0_BOOT_PROMPT:
-                break;
-        case MSAR_0_BOOT_UART:
-                break;
-        case MSAR_0_BOOT_SATA:
-                break;
-        case MSAR_0_BOOT_PEX:
-                break;
- */
 	default:
 		return MV_ERROR;
 	}
@@ -1394,7 +1381,6 @@ MV_VOID mvBoardConfigWrite(void)
 	MV_U32 mppGroup, i, reg;
 	MV_BOARD_SPEC_INIT *boardSpec;
 
-	/* Specific board initializations  ( from board->pBoardSpecInit ) omriii : see if can remove all these inits*/
 	for (mppGroup = 0; mppGroup < MV_MPP_MAX_GROUP; mppGroup++) {
 		MV_REG_WRITE(mvCtrlMppRegGet(mppGroup), mvBoardMppGet(mppGroup));
 	}
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
index b320789..0416c96 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
@@ -126,8 +126,8 @@ typedef enum _devTwsiBoardClass {
 	BOARD_DEV_TWSI_EXP,
 	BOARD_DEV_TWSI_SATR,
 	BOARD_TWSI_MUX,
-	BOARD_DEV_TWSI_EEPROM,          //omriii : _EEPROM should be added ? or used as _OTHER ?
-	BOARD_DEV_TWSI_IO_EXPANDER,     //omriii : _IO_EXPANDER should be added ? or used as _OTHER?
+	BOARD_DEV_TWSI_EEPROM,
+	BOARD_DEV_TWSI_IO_EXPANDER,
 	BOARD_TWSI_OTHER
 } MV_BOARD_TWSI_CLASS;
 
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
index b338f59..1c1d76c 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
@@ -67,7 +67,7 @@
 
 #include "mvSysHwConfig.h"
 
-/* I2C bus addresses TODO (omriii) - take from board design */
+/* I2C bus addresses */
 #define MV_BOARD_DIMM0_I2C_ADDR                 0x56
 #define MV_BOARD_DIMM0_I2C_ADDR_TYPE            ADDR7_BIT
 #define MV_BOARD_DIMM1_I2C_ADDR                 0x57
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
index 44f1c8e..f5dd2eb 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
@@ -128,12 +128,7 @@ MV_U32 boardOptionsConfig[MV_CONFIG_TYPE_MAX_OPTION];
 
 MV_U32 mvCtrlGetCpuNum(MV_VOID)
 {
-	return 0; /* kostaz: fix from cider */
-}
-
-MV_U32 mvCtrlGetQuadNum(MV_VOID)
-{
-	return 0; /* kostaz: fix */
+	return 0;
 }
 
 MV_BOOL mvCtrlIsValidSatR(MV_VOID)
@@ -620,7 +615,6 @@ MV_BOOL mvCtrlIsEepromEnabled()
 *******************************************************************************/
 MV_U32 mvCtrlDevFamilyIdGet(MV_U16 ctrlModel)
 {
-	/* omriii - check if needed to distinguish between controllers here */
 	return MV_88F66X0;
 }
 
@@ -843,7 +837,7 @@ MV_U32 mvCtrlXorMaxUnitGet(MV_VOID)
 
 #if defined(MV_INCLUDE_USB)
 /*******************************************************************************
-* mvCtrlUsbHostMaxGet - Get number of Marvell Usb  controllers
+* mvCtrlUsbMaxGet - Get number of Marvell Usb  controllers
 *
 * DESCRIPTION:
 *
@@ -1075,8 +1069,8 @@ MV_STATUS mvCtrlNameGet(char *pNameBuff)
 	if (mvCtrlModelGet() == 0x7800)
 		mvOsSPrintf(pNameBuff, "%s78XX", SOC_NAME_PREFIX);
 	else
-		mvOsSPrintf(pNameBuff, "%s%x Rev %d", SOC_NAME_PREFIX, mvCtrlModelGet(), mvCtrlRevGet());
-
+		mvOsSPrintf(pNameBuff, "%s%x Rev %d",
+			    SOC_NAME_PREFIX, mvCtrlModelGet(), mvCtrlRevGet());
 	return MV_OK;
 }
 
@@ -1171,7 +1165,7 @@ const MV_8 *mvCtrlTargetNameGet(MV_TARGET target)
 #if defined(MV_INCLUDE_PEX)
 static MV_VOID mvCtrlPexAddrDecShow(MV_VOID)
 {
-	/* kostaz: FIXME: will be filled for AvantaLP */
+	/* TBD */
 }
 
 #endif
@@ -1254,6 +1248,7 @@ MV_VOID mvCtrlAddrDecShow(MV_VOID)
 #if defined(MV_INCLUDE_PEX)
 	mvCtrlPexAddrDecShow();
 #endif
+
 #if defined(MV_INCLUDE_USB)
 	mvUnitAddrDecShow(mvCtrlUsbMaxGet(), USB_UNIT_ID, "USB", mvUsbWinRead);
 #endif
@@ -1265,12 +1260,13 @@ MV_VOID mvCtrlAddrDecShow(MV_VOID)
 	mvUnitAddrDecShow(mvCtrlEthMaxPortGet(), ETH_GIG_UNIT_ID, "ETH", mvNetaWinRead);
 #else
 	mvUnitAddrDecShow(mvCtrlEthMaxPortGet(), ETH_GIG_UNIT_ID, "ETH", mvPp2WinRead);
-#endif  /* MV_ETH_LEGACY  or NETA pr PP2 */
-#endif  /* MV_INCLUDE_GIG_ETH */
+#endif
+#endif
 
 #if defined(MV_INCLUDE_XOR)
 	mvUnitAddrDecShow(mvCtrlXorMaxChanGet(), XOR_UNIT_ID, "XOR", mvXorTargetWinRead);
 #endif
+
 #if defined(MV_INCLUDE_SATA)
 	mvUnitAddrDecShow(mvCtrlSataMaxPortGet(), SATA_UNIT_ID, "Sata", mvSataWinRead);
 #endif
@@ -1418,7 +1414,7 @@ MV_U32 ctrlRegToSize(MV_U32 regSize, MV_U32 alignment)
 * RETURN:
 *       32bit describing size value correspond to size in register.
 *******************************************************************************/
-MV_U32 ctrlSizeRegRoundUp(MV_U32 size, MV_U32 alignment) /* kostaz: FIXME: remove unused */
+MV_U32 ctrlSizeRegRoundUp(MV_U32 size, MV_U32 alignment)
 {
 	MV_U32 msbBit = 0;
 	MV_U32 retSize;
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
index 3ca000d..ca026e0 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/sys/mvCpuIfRegs.h
@@ -84,7 +84,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #define PCIE_BOOT_ADDR_REG			(MV_MISC_REGS_BASE + 0x2D4)
 #define CPU_RESUME_ADDR_REG			(MV_PCIE_BOOT_ADDR_REG)
 
-#define CPU_SOFT_RESET_REG(cpu)			(0x20800 + (cpu) * 0x8)
+#define CPU_SOFT_RESET_REG(cpu)			(MV_MBUS_REGS_OFFSET + 0x800 + (cpu) * 0x8)
 
 #define CPU_RSTOUTN_MASK_REG			(MV_MISC_REGS_BASE + 0x54)
 #define CPU_SYS_SOFT_RST_REG			(MV_MISC_REGS_BASE + 0x58)
-- 
1.7.5.4

