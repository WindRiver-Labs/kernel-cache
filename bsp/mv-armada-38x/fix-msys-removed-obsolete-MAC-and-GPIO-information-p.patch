From c46fe923533e66aca05a755f56b8eaac368a88f4 Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Mon, 9 Jun 2014 17:53:14 +0300
Subject: [PATCH 1710/1825] fix: msys: removed obsolete MAC and GPIO
 information parameters

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 3ed63e5cd220efa0f9e1da64d0ffd600c1e2c8cb

	- Removed unused legacy MAC board specification parameters (derrived from AXP originaly)
	- Removed corresponding API's from mvBoardEnvLib.c
	- Removed unused MV_BOARD_GPP_INFO struct

Change-Id: I76e5ed5ee2e7fc308f5507ff36b1f7a86aae4a06
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/8438
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Kostya Porotchkin <kostap@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mach-msys/msys_family/boardEnv/mvBoardEnvLib.c |   41 -------------------
 .../mach-msys/msys_family/boardEnv/mvBoardEnvLib.h |    4 --
 .../msys_family/boardEnv/mvBoardEnvSpec.c          |   42 +++++++-------------
 3 files changed, 15 insertions(+), 72 deletions(-)

diff --git a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.c
index 3b704c1..009524f 100644
--- a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.c
@@ -406,47 +406,6 @@ MV_32 mvBoardPhyAddrGet(MV_U32 ethPortNum)
 {
 	return board->pBoardMacInfo[ethPortNum].boardEthSmiAddr;
 }
-/*******************************************************************************
-* mvBoardQuadPhyAddr0Get - Get the phy address
-*
-* DESCRIPTION:
-*       This routine returns the Phy address of a given ethernet port.
-*
-* INPUT:
-*       ethPortNum - Ethernet port number.
-*
-* OUTPUT:
-*       None.
-*
-* RETURN:
-*       32bit describing Phy address, -1 if the port number is wrong.
-*
-*******************************************************************************/
-MV_32 mvBoardQuadPhyAddr0Get(MV_U32 ethPortNum)
-{
-	return board->pBoardMacInfo[ethPortNum].boardEthSmiAddr0;
-}
-
-/*******************************************************************************
-* mvBoardPhyLinkCryptPortAddrGet - Get the phy gbe address
-*
-* DESCRIPTION:
-*       This routine returns the Phy address of a given ethernet port.
-*
-* INPUT:
-*       ethPortNum - Ethernet port number.
-*
-* OUTPUT:
-*       None.
-*
-* RETURN:
-*       32bit describing Phy address, -1 if the port number is wrong.
-*
-*******************************************************************************/
-MV_32 mvBoardPhyLinkCryptPortAddrGet(MV_U32 ethPortNum)
-{
-	return board->pBoardMacInfo[ethPortNum].LinkCryptPortAddr;
-}
 
 MV_BOOL mvBoardIsPortInRgmii(MV_U32 ethPortNum)
 {
diff --git a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.h b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.h
index 4398aaf..43c802c 100644
--- a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.h
+++ b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvLib.h
@@ -185,8 +185,6 @@ typedef enum _boardMacSpeed {
 typedef struct _boardMacInfo {
 	MV_BOARD_MAC_SPEED boardMacSpeed;
 	MV_U8	boardEthSmiAddr;
-	MV_U16	LinkCryptPortAddr;
-	MV_U8	boardEthSmiAddr0;
 } MV_BOARD_MAC_INFO;
 
 typedef struct _boardMppInfo {
@@ -264,8 +262,6 @@ MV_BOOL mvBoardIsPortInMii(MV_U32 ethPortNum);
 MV_BOOL mvBoardIsPortInRgmii(MV_U32 ethPortNum);
 MV_32 mvBoardPhyAddrGet(MV_U32 ethPortNum);
 
-MV_32 mvBoardQuadPhyAddr0Get(MV_U32 ethPortNum);
-MV_32 mvBoardPhyLinkCryptPortAddrGet(MV_U32 ethPortNum);
 MV_32 mvBoardSwitchCpuPortGet(MV_U32 switchIdx);
 MV_32 mvBoardSmiScanModeGet(MV_U32 switchIdx);
 MV_U32 mvBoardTclkGet(MV_VOID);
diff --git a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvSpec.c
index 919d9ff..99e9638 100644
--- a/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-msys/msys_family/boardEnv/mvBoardEnvSpec.c
@@ -84,11 +84,11 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 MV_BOARD_TWSI_INFO	bobcat2_customer_board_0_InfoBoardTwsiDev[] = {
 /* {{MV_BOARD_DEV_CLASS	devClass, MV_U8	twsiDevAddr, MV_U8 twsiDevAddrType}} */
 	{BOARD_DEV_TWSI_PLD, 0x30, ADDR7_BIT},		/* Access to control PLD reg file */
-	{BOARD_DEV_TWSI_ZARLINK, 0x18, ADDR7_BIT},		/* Access to Zarlink */
+	{BOARD_DEV_TWSI_ZARLINK, 0x18, ADDR7_BIT},	/* Access to Zarlink */
 	{BOARD_DEV_TWSI_SATR, 0x4C, ADDR7_BIT},         /* SatR bios 0		*/
 	{BOARD_DEV_TWSI_SATR, 0x4D, ADDR7_BIT},         /* SatR bios 1		*/
-	{BOARD_DEV_TWSI_SATR, 0x4E, ADDR7_BIT},          /* SatR bios 2		*/
-	{BOARD_DEV_TWSI_SATR, 0x4F, ADDR7_BIT},          /* SatR bios 3		*/
+	{BOARD_DEV_TWSI_SATR, 0x4E, ADDR7_BIT},         /* SatR bios 2		*/
+	{BOARD_DEV_TWSI_SATR, 0x4F, ADDR7_BIT},         /* SatR bios 3		*/
 	{BOARD_DEV_TWSI_INIT_EPROM, 0x50, ADDR7_BIT},          /* Serial Ini EPROM	*/
 	{BOARD_DEV_TWSI_PCA9555_IO_EXPANDER, 0x20, ADDR7_BIT},          /* Qsgmii/sfp mux control PCA9555 IO expander */
 	{BOARD_DEV_TWSI_PCA9548_IO_MUX, 0x70, ADDR7_BIT},          /* PCA9548 I2C mux 0	*/
@@ -98,8 +98,8 @@ MV_BOARD_TWSI_INFO	bobcat2_customer_board_0_InfoBoardTwsiDev[] = {
 
 MV_BOARD_MAC_INFO bobcat2_customer_board_0_InfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
-	{BOARD_MAC_SPEED_AUTO, 0x0, 0x0, 0x0 },
-	{BOARD_MAC_SPEED_AUTO, 0x1, 0x0, 0x1 },
+	{BOARD_MAC_SPEED_AUTO, 0x0 },
+	{BOARD_MAC_SPEED_AUTO, 0x1 },
 };
 
 MV_BOARD_MODULE_TYPE_INFO bobcat2_customer_board_0_InfoBoardModTypeInfo[] = {
@@ -108,12 +108,6 @@ MV_BOARD_MODULE_TYPE_INFO bobcat2_customer_board_0_InfoBoardModTypeInfo[] = {
 	}
 };
 
-MV_BOARD_GPP_INFO bobcat2_customer_board_0_InfoBoardGppInfo[] = {
-	/* {{MV_BOARD_GPP_CLASS	devClass, MV_U8	gppPinNum}} */
-	{BOARD_GPP_USB_VBUS,    24} /* from MPP map */
-	/*{BOARD_GPP_RESET,       47},*/
-};
-
 MV_DEV_CS_INFO bobcat2_customer_board_0_InfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
@@ -149,8 +143,8 @@ MV_BOARD_INFO bobcat2_customer_board_0_Info = {
 	.pBoardTwsiDev			= bobcat2_customer_board_0_InfoBoardTwsiDev,
 	.numBoardMacInfo		= ARRSZ(bobcat2_customer_board_0_InfoBoardMacInfo),
 	.pBoardMacInfo			= bobcat2_customer_board_0_InfoBoardMacInfo,
-	.numBoardGppInfo		= ARRSZ(bobcat2_customer_board_0_InfoBoardGppInfo),
-	.pBoardGppInfo			= bobcat2_customer_board_0_InfoBoardGppInfo,
+	.numBoardGppInfo		= 0,
+	.pBoardGppInfo			= NULL,
 	.activeLedsNumber		= 0,
 	.pLedGppPin			= NULL,
 	.ledsPolarity			= 0,
@@ -213,8 +207,8 @@ MV_BOARD_TWSI_INFO	db_dx_bc2InfoBoardTwsiDev[] = {
 
 MV_BOARD_MAC_INFO db_dx_bc2InfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
-	{BOARD_MAC_SPEED_AUTO, 0x0,0x0 	  , 0x0 },
-	{BOARD_MAC_SPEED_AUTO, 0x1,0x0	  , 0x1 },
+	{BOARD_MAC_SPEED_AUTO, 0x0 },
+	{BOARD_MAC_SPEED_AUTO, 0x1 },
 };
 
 MV_BOARD_MODULE_TYPE_INFO db_dx_bc2InfoBoardModTypeInfo[] = {
@@ -223,12 +217,6 @@ MV_BOARD_MODULE_TYPE_INFO db_dx_bc2InfoBoardModTypeInfo[] = {
 	}
 };
 
-MV_BOARD_GPP_INFO db_dx_bc2InfoBoardGppInfo[] = {
-	/* {{MV_BOARD_GPP_CLASS	devClass, MV_U8	gppPinNum}} */
-	{BOARD_GPP_USB_VBUS,    24} /* from MPP map */
-	/*{BOARD_GPP_RESET,       47},*/
-};
-
 MV_DEV_CS_INFO db_dx_bc2InfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
@@ -269,8 +257,8 @@ MV_BOARD_INFO db_dx_bc2Info = {
 	.pBoardTwsiDev			= db_dx_bc2InfoBoardTwsiDev,
 	.numBoardMacInfo		= ARRSZ(db_dx_bc2InfoBoardMacInfo),
 	.pBoardMacInfo			= db_dx_bc2InfoBoardMacInfo,
-	.numBoardGppInfo		= ARRSZ(db_dx_bc2InfoBoardGppInfo),
-	.pBoardGppInfo			= db_dx_bc2InfoBoardGppInfo,
+	.numBoardGppInfo		= 0,
+	.pBoardGppInfo			= NULL,
 	.activeLedsNumber		= 0,
 	.pLedGppPin			= NULL,
 	.ledsPolarity			= 0,
@@ -309,8 +297,8 @@ MV_BOARD_INFO db_dx_bc2Info = {
 
 MV_BOARD_MAC_INFO rd_dx_bc2InfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
-	{BOARD_MAC_SPEED_1000M, 0x0, 0x0, 0x0},
-	{BOARD_MAC_SPEED_1000M, 0x1, 0x0, 0x1},
+	{BOARD_MAC_SPEED_1000M, 0x0 },
+	{BOARD_MAC_SPEED_1000M, 0x1 },
 };
 
 MV_BOARD_MODULE_TYPE_INFO rd_dx_bc2InfoBoardModTypeInfo[] = {
@@ -388,8 +376,8 @@ MV_BOARD_INFO rd_dx_bc2Info = {
 
 MV_BOARD_MAC_INFO bc2_rd_mtlInfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
-	{BOARD_MAC_SPEED_1000M, 0x0, 0x0, 0x0},
-	{BOARD_MAC_SPEED_1000M, 0x1, 0x0, 0x1},
+	{BOARD_MAC_SPEED_1000M, 0x0 },
+	{BOARD_MAC_SPEED_1000M, 0x1 },
 };
 
 MV_BOARD_MODULE_TYPE_INFO bc2_rd_mtlInfoBoardModTypeInfo[] = {
-- 
1.7.5.4

