From ec263761664ccd6605b49875cc8bed151024e0ca Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Wed, 28 May 2014 10:25:27 -0400
Subject: [PATCH 1690/1825] fix: pp2: Fix output for
 mv_eth_port_status_print()

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 7d9f48484a04cda6d74822ba2b9bfc0825fe9d5d

Signed-off-by: Dmitri Epshtein <dima@marvell.com>

Change-Id: I82d110e5417f3d40f926e0cd24ebb984acf63095
Reviewed-on: http://vgitil04.il.marvell.com:8080/8255
Reviewed-by: Yehuda Yitschak <yehuday@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c      |   17 +++++++++--------
 1 files changed, 9 insertions(+), 8 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
index 8a0749c..3f27901 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
@@ -5149,8 +5149,9 @@ void mv_eth_netdev_print(struct net_device *dev)
 		 (unsigned int)(dev->features), (unsigned int)(dev->vlan_features));
 #endif
 
-	pr_info("flags=0x%x, gflags=0x%x: running=%d, oper_up=%d\n",
-		(unsigned int)(dev->flags), (unsigned int)(dev->flags), netif_running(dev), netif_oper_up(dev));
+	pr_info("flags=0x%x, gflags=0x%x, priv_flags=0x%x: running=%d, oper_up=%d\n",
+		(unsigned int)(dev->flags), (unsigned int)(dev->gflags), (unsigned int)(dev->priv_flags),
+		netif_running(dev), netif_oper_up(dev));
 	pr_info("uc_promisc=%d, promiscuity=%d, allmulti=%d\n", dev->uc_promisc, dev->promiscuity, dev->allmulti);
 
 	if (mv_eth_netdev_find(dev->ifindex)) {
@@ -5191,8 +5192,8 @@ void mv_eth_port_status_print(unsigned int port)
 	if (!pp)
 		return;
 
-	printk(KERN_ERR "\n");
-	printk(KERN_ERR "port=%d, flags=0x%lx, rx_weight=%d\n", port, pp->flags, pp->weight);
+	pr_err("\n");
+	pr_err("port=%d, flags=0x%lx, rx_weight=%d\n", port, pp->flags, pp->weight);
 
 	pr_info("RX next descriptor prefetch  : %s\n",
 			pp->flags & MV_ETH_F_RX_DESC_PREFETCH ? "Enabled" : "Disabled");
@@ -5201,16 +5202,16 @@ void mv_eth_port_status_print(unsigned int port)
 			pp->flags & MV_ETH_F_RX_PKT_PREFETCH ? "Enabled" : "Disabled");
 
 	if (pp->flags & MV_ETH_F_CONNECT_LINUX)
-		printk(KERN_ERR "%s: ", pp->dev->name);
+		pr_info("%s: ", pp->dev->name);
 	else
-		printk(KERN_ERR "port %d: ", port);
+		pr_info("port %d: ", port);
 
 	mv_eth_link_status_print(port);
 
 	pr_cont("\n");
 	pr_info("rxq_coal(pkts)[ q]         = ");
 	for (q = 0; q < pp->rxq_num; q++)
-		printk(KERN_CONT "%4d ", mvPp2RxqPktsCoalGet(port, q));
+		pr_cont("%4d ", mvPp2RxqPktsCoalGet(port, q));
 
 	pr_cont("\n");
 	pr_info("rxq_coal(usec)[ q]         = ");
@@ -5220,7 +5221,7 @@ void mv_eth_port_status_print(unsigned int port)
 	pr_cont("\n");
 	pr_info("rxq_desc(num)[ q]          = ");
 	for (q = 0; q < pp->rxq_num; q++)
-		pr_info("%4d ", pp->rxq_ctrl[q].rxq_size);
+		pr_cont("%4d ", pp->rxq_ctrl[q].rxq_size);
 
 	pr_cont("\n");
 	for (txp = 0; txp < pp->txp_num; txp++) {
-- 
1.7.5.4

