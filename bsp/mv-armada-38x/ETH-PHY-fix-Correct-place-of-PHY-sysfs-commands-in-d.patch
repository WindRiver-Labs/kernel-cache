From b9bdc9a529798e07b46f05d5318ff29f73db463d Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Tue, 25 Jun 2013 17:27:12 -0400
Subject: [PATCH 0736/1825] ETH-PHY: fix: Correct place of PHY sysfs commands
 in device tree.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit caf923989e51a7b3712f410ab79c08074d3757f9

	old place: /sys/devices/platform/neta/phy
	new place: /sys/devices/platform/mv_phy

Change-Id: I9b436aff985e52c2cdc64774fb81a6233e57d052
Reviewed-on: http://vgitil04.il.marvell.com:8080/2353
Reviewed-by: Igor Patrik <igorp@marvell.com>
Tested-by: Igor Patrik <igorp@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../plat-armada/mv_drivers_lsp/mv_phy/phy_sysfs.c  |   13 ++-----------
 1 files changed, 2 insertions(+), 11 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_phy/phy_sysfs.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_phy/phy_sysfs.c
index 2eac635..42447bd 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_phy/phy_sysfs.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_phy/phy_sysfs.c
@@ -146,7 +146,7 @@ static struct attribute *phy_attrs[] = {
 };
 
 static struct attribute_group phy_group = {
-	.name = "phy",
+	.name = "mv_phy",
 	.attrs = phy_attrs,
 };
 
@@ -155,16 +155,7 @@ int __devinit phy_sysfs_init(void)
 		int err;
 		struct device *pd;
 
-		pd = bus_find_device_by_name(&platform_bus_type, NULL, "neta");
-		if (!pd) {
-			platform_device_register_simple("neta", -1, NULL, 0);
-			pd = bus_find_device_by_name(&platform_bus_type, NULL, "neta");
-		}
-
-		if (!pd) {
-			printk(KERN_ERR "%s: cannot find neta device\n", __func__);
-			pd = &platform_bus;
-		}
+		pd = &platform_bus;
 
 		err = sysfs_create_group(&pd->kobj, &phy_group);
 		if (err) {
-- 
1.7.5.4

