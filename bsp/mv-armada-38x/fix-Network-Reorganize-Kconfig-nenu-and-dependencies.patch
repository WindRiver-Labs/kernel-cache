From 78395b942fd7ee7886766625fa9fedf40a2de37d Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Sat, 22 Jun 2013 20:45:07 -0400
Subject: [PATCH 0730/1825] fix: Network: Reorganize Kconfig nenu and
 dependencies for Network drivers

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit d684b22c84bacf066e1e95ba8a6bce64fe004503

	Legacy driver for: ARCH_FEROCEON_KW
	NETA driver for:   ARCH_FEROCEON_KW2 || ARCH_ARMADA_XP || ARCH_ARMADA370
	PPv2 driver for:   ARCH_AVANTA_LP || ARCH_ARMADA375

Change-Id: I164473e57a3a4dcb98d6b9098301b7620bab6c3c
Reviewed-on: http://vgitil04.il.marvell.com:8080/2324
Reviewed-by: Igor Patrik <igorp@marvell.com>
Tested-by: Igor Patrik <igorp@marvell.com>
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/Kconfig |   64 +++++++++++++++++++++++-------------------
 1 files changed, 35 insertions(+), 29 deletions(-)

diff --git a/arch/arm/plat-armada/Kconfig b/arch/arm/plat-armada/Kconfig
index 5490db0..8578fbb 100644
--- a/arch/arm/plat-armada/Kconfig
+++ b/arch/arm/plat-armada/Kconfig
@@ -447,57 +447,63 @@ menu "SoC Networking support"
 depends on MV_INCLUDE_GIG_ETH
 
 config MV_ETHERNET
-	bool "Networking support"
+	bool
 	default y
 	help
-	  Choose this option to support Marvell Gigabit Ethernet Controller
-
-choice
-
-	prompt "GbE Mode"
-	default MV_ETH_LEGACY
+	  Obsolete
 
 config MV_ETH_LEGACY
-	bool "Legacy mode "
+	bool "Legacy driver"
+	depends on ARCH_FEROCEON_KW
+	default y
 	help
-	  TBD
+	  Use legacy network driver.
+	  HAL part of the driver located uner directory mv_hal/eth
+	  Linux part of the driver located under directory mv_drivers_lsp/mv_network
+
+if MV_ETH_LEGACY
+source arch/arm/plat-armada/mv_drivers_lsp/mv_network/Kconfig
+endif
 
 config MV_ETH_NETA
-	bool "Acceleration mode "
-	depends on ARCH_FEROCEON_KW2 || ARCH_ARMADA_XP \
-		|| ARCH_ARMADA370 || AVANTA_LP
+	bool "NETA driver"
+	depends on ARCH_FEROCEON_KW2 || ARCH_ARMADA_XP || ARCH_ARMADA370
+	default y
 	help
-	  TBD
+	  Use NETA network driver
+          HAL part of the driver located uner directory mv_hal/neta
+          Linux part of the driver located under directory mv_drivers_lsp/mv_neta
+
+if MV_ETH_NETA
+source arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Kconfig
+endif
 
 config MV_ETH_PP2
-	bool "PPv2 mode "
-	depends on ARCH_FEROCEON_KW2 || ARCH_ARMADA_XP || ARCH_ARMADA370 || AVANTA_LP
+	bool "PPv2 driver "
+	depends on ARCH_AVANTA_LP || ARCH_ARMADA375
+	default y
 	select MV_ETH_PP2_CLS2
 	select MV_ETH_PP2_CLS3
 	select MV_ETH_PP2_CLS4
 	select MV_ETH_PP2_CLS_MC
 	help
-	  TBD
+	  Use PPv2 network driver
+          HAL part of the driver located uner directory mv_hal/pp2
+          Linux part of the driver located under directory mv_drivers_lsp/mv_pp2
 
-endchoice
+if MV_ETH_PP2
+source arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/Kconfig
+endif
 
 config MV_INCLUDE_ETH_PHY
 	bool "Choose to compile Ethernet PHY support"
 	depends on MV_ETH_LEGACY || MV_ETH_NETA || MV_ETH_PP2
+	default y
 	help
-	  TBD
+	  Use HAL based PHY driver. Needed for all kind of Network drivers.
+          HAL part of the driver located uner directory mv_hal/eth-phy
+          Linux part of the driver located under directory mv_drivers_lsp/mv_phy
 
-if MV_ETH_LEGACY
-source arch/arm/plat-armada/mv_drivers_lsp/mv_network/Kconfig
-endif
-
-if MV_ETH_NETA
-source arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Kconfig
-endif
-
-if MV_ETH_PP2
-source arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/Kconfig
-endif
 
 endmenu # "SoC Networking support"
 
-- 
1.7.5.4

