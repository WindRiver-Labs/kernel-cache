From b8f07faaedfa7167fe6bfc56831f796288cf9cf7 Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Wed, 26 Feb 2014 10:12:04 +0200
Subject: [PATCH 1397/1825] Fix: Sdio3: Aligned SDIO3 definition to
 configuration file

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 1f5b18eb8f36b6ed0ff4944adef3b39d21e95508

	Replace MV_MMC_SDIO3 with CONFIG_MV_SDHCI(as in armada_38x.h)

Change-Id: Ia36efbee03e54d23500c07a33915610293bd5c2e
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/5944
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Igor Patrik <igorp@marvell.com>
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Omri Itach <omrii@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/sdmmc/mvSdmmcAddrDec.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-armada/mv_hal/sdmmc/mvSdmmcAddrDec.c b/arch/arm/plat-armada/mv_hal/sdmmc/mvSdmmcAddrDec.c
index ca1b880..09cdbe6 100644
--- a/arch/arm/plat-armada/mv_hal/sdmmc/mvSdmmcAddrDec.c
+++ b/arch/arm/plat-armada/mv_hal/sdmmc/mvSdmmcAddrDec.c
@@ -70,7 +70,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 #define MV_SDMMC_MAX_ADDR_DECODE_WIN 4
 
-#ifdef MV_MMC_SDIO3
+#ifdef CONFIG_MV_SDHCI
 #define MV_SDMMC_WIN_CTRL_REG(dev, win)        (MV_SDMMC_WINDOWS_REGS_OFFSET + 0x80 + ((win)<<3))
 #define MV_SDMMC_WIN_BASE_REG(dev, win)        (MV_SDMMC_WINDOWS_REGS_OFFSET + 0x84 + ((win)<<3))
 #else
@@ -108,7 +108,7 @@ MV_TARGET sdmmcAddrDecPrioTab[] = {
 #if defined(MV_INCLUDE_SDRAM_CS3)
 	SDRAM_CS3,
 #endif
-#ifndef MV_MMC_SDIO3
+#ifndef CONFIG_MV_SDHCI
 #if defined(MV_INCLUDE_PEX)
 	PEX0_MEM,
 #endif
-- 
1.7.5.4

