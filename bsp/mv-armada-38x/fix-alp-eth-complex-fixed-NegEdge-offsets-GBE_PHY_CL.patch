From 6a97067855083957fe85e58924f29c0e35b856f7 Mon Sep 17 00:00:00 2001
From: Hanna Hawa <hannah@marvell.com>
Date: Mon, 10 Mar 2014 10:15:46 +0200
Subject: [PATCH 1442/1825] fix: alp: eth complex: fixed NegEdge offsets
 (GBE_PHY_CLOCK_CTRL_REG reg)

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 27cd71af3193aa185f06cbaf334049a19217bb38

	Update Bit23 to select NegEdge (sampled at bit low)

Change-Id: I17349453301011beec9b063b3d0ff67dfe26ae2b
Signed-off-by: Hanna Hawa <hannah@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/6278
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Shadi Ammouri <shadi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c    |    4 ++--
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h    |    6 +++---
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
index d76b73e..daf12f3 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
@@ -97,10 +97,10 @@ static void mvEthComplexGbeClockControlSet(void)
 	if (mvCtrlRevGet() <= MV_88F66X0_Z3_ID)
 		return;
 
-	/* Change default value of Bit 22, and 28 to NegEdge(0) */
+	/* Change default value of Bit 23, and 28 to NegEdge(0) */
 	reg = MV_REG_READ(MV_ETHCOMP_GBE_PHY_CLOCK_CTRL_REG);
 	/* Field - Switch Port4 To MPP Data Sample */
-	reg &= ~(ETHCC_GBE_PHY_MPP_TO_SW_P4_EDGE_MASK);
+	reg &= ~(ETHCC_GBE_PHY_P4_SW_TO_MPP_EDGE_MASK);
 	/* Field - GbE Port 0 To MPP Data Sample */
 	reg &= ~(ETHCC_GBE_PHY_GBE_P0_TO_MPP_EDGE_MASK);
 
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
index 01199ca..6b5866b 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.h
@@ -82,11 +82,11 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * Ports Group Control and Status */
 #define MV_ETHCOMP_GBE_PHY_CLOCK_CTRL_REG		(MV_ETH_COMPLEX_BASE + 0x1C)
 
-#define     ETHCC_GBE_PHY_MPP_TO_SW_P4_EDGE_OFFSET	22
-#define     ETHCC_GBE_PHY_MPP_TO_SW_P4_EDGE_MASK        (0x1 << ETHCC_GBE_PHY_MPP_TO_SW_P4_EDGE_OFFSET)
+#define     ETHCC_GBE_PHY_P4_SW_TO_MPP_EDGE_OFFSET	23
+#define     ETHCC_GBE_PHY_P4_SW_TO_MPP_EDGE_MASK        (0x1 << ETHCC_GBE_PHY_P4_SW_TO_MPP_EDGE_OFFSET)
 
 #define     ETHCC_GBE_PHY_GBE_P0_TO_MPP_EDGE_OFFSET	28
-#define     ETHCC_GBE_PHY_GBE_P0_TO_MPP_EDGE_MASK	(0x1 << ETHCC_GBE_PHY_MPP_TO_SW_P4_EDGE_OFFSET)
+#define     ETHCC_GBE_PHY_GBE_P0_TO_MPP_EDGE_MASK	(0x1 << ETHCC_GBE_PHY_GBE_P0_TO_MPP_EDGE_OFFSET)
 
 /*******************************************************************************
  * Ethernet Complex Control 0 */
-- 
1.7.5.4

