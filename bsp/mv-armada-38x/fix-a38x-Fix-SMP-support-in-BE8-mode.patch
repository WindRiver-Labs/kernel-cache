From f54a25a02bac2fa71104decc269c6a4dd58cc7f2 Mon Sep 17 00:00:00 2001
From: Michal Mazur <arg@semihalf.com>
Date: Fri, 9 May 2014 12:24:43 +0200
Subject: [PATCH 1669/1825] fix: a38x: Fix SMP support in BE8 mode.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit c246363c539c92e1ff21336ffdc80800829af324

Change-Id: I298367801dabe91e5d8d06b19e15512feb69f356
Signed-off-by: Michal Mazur <arg@semihalf.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/8089
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Shadi Ammouri <shadi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armada38x/headsmp.S |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/mach-armada38x/headsmp.S b/arch/arm/mach-armada38x/headsmp.S
index 956bfa3..93d6314 100644
--- a/arch/arm/mach-armada38x/headsmp.S
+++ b/arch/arm/mach-armada38x/headsmp.S
@@ -45,11 +45,11 @@ ENTRY(v7_invalidate_l1)
         mov     pc, lr
 ENDPROC(v7_invalidate_l1)
 
-/*
- * This provides a "holding pen" into which all secondary cores are held
- * until we're ready for them to initialise.
- */
+/* Entry point for secondary CPUs */
 ENTRY(a38x_secondary_startup)
+#ifdef CONFIG_BE8_ON_LE
+	setend	be
+#endif
 	bl      v7_invalidate_l1
 	b	secondary_startup
 
-- 
1.7.5.4

