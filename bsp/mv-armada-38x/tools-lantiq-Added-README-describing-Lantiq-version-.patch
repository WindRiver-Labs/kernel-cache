From b831ef85d3b54933fb209efa9857e90d18e91f7d Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Thu, 11 Jul 2013 16:58:27 +0300
Subject: [PATCH 0790/1825] tools/lantiq: Added README describing Lantiq
 version of the mv_voice_tool.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 3f18aebd055d267c5636c8a914132d88a149213a

Change-Id: I07c1cc6aa0948cc566ce0a5fe03c6cbed4426f35
Signed-off-by: Piotr Ziecik <kosmo@semihalf.com>
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 tools/voice/lantiq/kernel/README |   93 ++++++++++++++++++++++++++++++++++++++
 1 files changed, 93 insertions(+), 0 deletions(-)
 create mode 100644 tools/voice/lantiq/kernel/README

diff --git a/tools/voice/lantiq/kernel/README b/tools/voice/lantiq/kernel/README
new file mode 100644
index 0000000..ced005d
--- /dev/null
+++ b/tools/voice/lantiq/kernel/README
@@ -0,0 +1,93 @@
++-------------------------------------------------+
+| How to compile Lantiq drivers and mv_voice_tool |
++-------------------------------------------------+
+
+1. Unpack configure and build LSP. Make sure that the following
+   options are set:
+
+	CONFIG_LANTIQ_SLIC_SUPPORT=y
+	CONFIG_LANTIQ_SLIC_DUSLIC_XT=y
+	CONFIG_MV_TDM_PCM_CLK_8MHZ=y
+	CONFIG_MV_TDM_USE_INTERNAL_PCLK_SOURCE=y
+
+2. Build Lantiq lib_ifxos-1.5.17:
+
+	$ cd lib_ifxos-1.5.17
+	$ ./configure								\
+		--host=arm-marvell-linux-gnueabi				\
+		--enable-linux-26						\
+		--enable-kernelbuild=<path-to-lsp>				\
+		--enable-kernelincl=<path-to-lsp>/include			\
+		--with-kernel-module
+	$ make
+	$ ls -l src/drv_ifxos.ko
+
+3. Build Lantiq drv_tapi-4.10.1.4:
+	$ cd drv_tapi-4.10.1.4
+	$ ./configure								\
+		--host=arm-marvell-linux-gnueabi				\
+		--enable-linux-26						\
+		--with-kernel-incl=<path-to-lsp>/include			\
+		--with-kernel-build=<path-to-lsp>				\
+		--with-kernel-module						\
+		--with-ifxos-incl=<path-to-lib_ifxos-1.5.17>/src/include	\
+		--enable-module							\
+		--enable-tapi4							\
+		--enable-cont-measurement					\
+		--enable-dtmf							\
+		--enable-hsm							\
+		--enable-metering						\
+		--enable-nlt							\
+		--enable-pcm							\
+		--enable-phone-detection					\
+		--enable-voice
+	$ make
+	$ ls -l src/drv_tapi.ko
+
+4. Build Lantiq drv_dxt-1.5.3.4:
+	$ cd drv_dxt-1.5.3.4
+	$ ./configure								\
+		--host=arm-marvell-linux-gnueabi				\
+		--enable-linux-26						\
+		--with-kernel-incl=<path-to-lsp>/include			\
+		--with-kernel-build=<path-to-lsp>				\
+		--with-ifxos-incl=<path-to-lib_ifxos-1.5.17>/src/include	\
+		--with-tapi-incl=<path-to-drv_tapi-4.10.1.4>/include		\
+		--enable-cap-measurement					\
+		--enable-cont-measurement					\
+		--enable-lt							\
+		--enable-proc							\
+		--enable-tone-generator
+	$ make
+	$ ls -l src/drv_dxt.ko
+
+5. Build mv_voice_tool for Lantiq SLIC (please note that if you have libtapi.a
+   binary, the EXTRA_CFLAGS parameter is not necessary):
+	$ cd <path-to-lsp>/tools/voice/lantiq/kernel
+	$ make ARCH=arm CROSS_COMPILE=arm-marvell-linux-gnueabi-		\
+		EXTRA_CFLAGS="-I<path-to-lib_ifxos-1.5.17>/src/include		\
+		-I<path-to-drv_tapi-4.10.1.4>/include				\
+		-I<path-to-drv_dxt-1.5.3.4>/include"
+	$ ls -l mv_voice_tool
+
++---------------------------------------------+
+| How to run Lantiq drivers and mv_voice_tool |
++---------------------------------------------+
+
+1. Copy all modules and mv_voice_tool to the target.
+
+2. Make device nodes under /dev:
+	# mknod /dev/tdm c 10 74
+	# mknod /dev/tapi c 253 0
+
+3. Load Lantiq drivers:
+	# insmod drv_ifxos.ko && insmod drv_tapi.ko && insmod drv_dxt.ko
+
+4. Run mv_voice_tool:
+	# ./mv_voice_tool
+
++------------+
+| Known Bugs |
++------------+
+
+1. The Channel Balancing test fails if 4-byte sample is selected.
-- 
1.7.5.4

