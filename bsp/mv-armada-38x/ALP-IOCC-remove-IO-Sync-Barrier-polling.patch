From 235b581977528d229a305ebb21ae066fba32feb8 Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Wed, 1 May 2013 11:36:18 +0300
Subject: [PATCH 0622/1825] ALP: IOCC: remove IO Sync Barrier polling

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit f64826376dccc11553847ed4c1bc4bc6d63ffdfd

Temporary solution. IOCC is still under investigation.

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I0677c44fb438059ab1a99b90b21cee01c2bf5896
Reviewed-on: http://vgitil04.il.marvell.com:8080/1714
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/include/mach/io.h |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-avantalp/include/mach/io.h b/arch/arm/mach-avantalp/include/mach/io.h
index 9d44c14..26c6af6 100644
--- a/arch/arm/mach-avantalp/include/mach/io.h
+++ b/arch/arm/mach-avantalp/include/mach/io.h
@@ -17,11 +17,11 @@
 #define __mem_isa(a)		(a)
 
 #ifdef CONFIG_AURORA_IO_CACHE_COHERENCY
-#define dma_io_sync()	do {				\
-	writel(0x1, INTER_REGS_VIRT_BASE + 0x21810);		\
-	while (readl(INTER_REGS_VIRT_BASE + 0x21810) & 0x1);	\
+#define dma_io_sync() do { \
+	writel(0x1, INTER_REGS_VIRT_BASE + 0x21810); \
 } while (0)
 #else
-#define dma_io_sync()	do { } while (0)
-#endif
+#define dma_io_sync() do { } while (0)
 #endif
+
+#endif /* __ASM_ARCH_IO_H */
-- 
1.7.5.4

