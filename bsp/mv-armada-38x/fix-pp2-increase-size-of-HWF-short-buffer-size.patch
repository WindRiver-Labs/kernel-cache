From 05b3244de95323ddb5ad8d13ca481376bb13b4c0 Mon Sep 17 00:00:00 2001
From: Yoni Farhadia <yonif@marvell.com>
Date: Tue, 12 Nov 2013 17:17:50 +0200
Subject: [PATCH 1071/1825] fix: pp2: increase size of HWF short buffer size

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 698cf8186ef6de51d762a9702bc8026027320b16

	- Default short buffer size is calculated in such way so that the total amount of allocated bytes will be 512B
	- The ifx is to calculate this size according to HWF buffer limitations (buffer header) instead of SWF (SKB pad, shinfo)

Change-Id: I97af74e6d06ac9875ae390b0b74e27606f04e342
Signed-off-by: Yoni Farhadia <yonif@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4305
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c      |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
index cdde686..23a486b 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_pp2/net_dev/mv_netdev.c
@@ -2983,7 +2983,7 @@ int mv_eth_hwf_bm_pool_init(struct eth_port *pp, int mtu)
 
 	if (pp->hwf_pool_short == NULL) {
 		pp->hwf_pool_short = mv_eth_pool_use(MV_ETH_BM_HWF_SHORT_POOL(pp->port),
-							MV_ETH_BM_HWF_SHORT, MV_ETH_BM_SHORT_PKT_SIZE);
+							MV_ETH_BM_HWF_SHORT, MV_ETH_BM_SHORT_HWF_PKT_SIZE);
 		if (pp->hwf_pool_short == NULL)
 			return -1;
 
-- 
1.7.5.4

