From 79349b075573934fc084e66853de064983177d59 Mon Sep 17 00:00:00 2001
From: Dovrat <dovrat@marvell.com>
Date: Mon, 21 Apr 2014 19:47:36 +0300
Subject: [PATCH 1560/1825] pp3: bm: pool status get

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit a41f014f185c39097100865c67525feb1daf7d08

Change-Id: Ie8bf88f0cf0acdc4282522ac5fc7764ee5a41b7c
Signed-off-by: Dovrat <dovrat@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7145
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Eliezer Ben Zeev <eliezerb@marvell.com>
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Tested-by: Dmitri Epshtein <dima@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/net/ethernet/marvell/pp3/bm/mv_bm_sysfs.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/marvell/pp3/bm/mv_bm_sysfs.c b/drivers/net/ethernet/marvell/pp3/bm/mv_bm_sysfs.c
index eed4788..75bdc72 100644
--- a/drivers/net/ethernet/marvell/pp3/bm/mv_bm_sysfs.c
+++ b/drivers/net/ethernet/marvell/pp3/bm/mv_bm_sysfs.c
@@ -436,10 +436,12 @@ static ssize_t mv_bm_config(struct device *dev,
 		PR_INFO_CALLED
 		pool = pool_nempty = dpool_ae = dpool_af = 0xFFFFFFFF;
 		/* Read input values */
-		sscanf(buf, "%d %d %d %d", &pool, &pool_nempty, &dpool_ae, &dpool_af);
+		sscanf(buf, "%d", &pool);
 		rc = bm_pool_status_get(pool, &pool_nempty, &dpool_ae, &dpool_af);
 		if (rc != OK)
 			PR_ERR_CODE(rc)
+		else
+			pr_info("pool %d nempty %d ae %d af %d\n", pool, pool_nempty, dpool_ae, dpool_af);
 	} else if (!strcmp(name, "idle_debug")) {
 		PR_INFO_CALLED
 		rc = bm_idle_debug();
-- 
1.7.5.4

