From 927ed4e04301c9dd8182185de3433e72f7c61c38 Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Sun, 20 Oct 2013 10:10:08 +0200
Subject: [PATCH 1105/1825] i2c: a38x: set I2C baudrate to lower value

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit cada3f2260b9c96db01c980b083ae7b0533d69b2

	 Previous divider values were setting baudrate to over 100kHz which is not
	 supported in S-Mode. Now it's 62.5kHz @ Tclk = 200MHz.

Change-Id: I5e672e9ff23070581f53c2ba1945d9110f10cd36
Signed-off-by: Marcin Wojtas <mw@semihalf.com>
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3758
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armada38x/core.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-armada38x/core.c b/arch/arm/mach-armada38x/core.c
index e594f03..867766e 100644
--- a/arch/arm/mach-armada38x/core.c
+++ b/arch/arm/mach-armada38x/core.c
@@ -267,8 +267,8 @@ unsigned char *mv_sram_usage_get(int *sram_size_ptr)
  */
 #ifdef CONFIG_I2C_MV64XXX
 static struct mv64xxx_i2c_pdata a38x_i2c_pdata = {
-	.freq_m = 8, /* assumes 166 MHz TCLK */
-	.freq_n = 3,
+	.freq_m = 4, /* assumes 200 MHz TCLK giving Fscl = 62.5 kHz */
+	.freq_n = 5,
 	.timeout = 1000, /* Default timeout of 1 second */
 };
 
-- 
1.7.5.4

