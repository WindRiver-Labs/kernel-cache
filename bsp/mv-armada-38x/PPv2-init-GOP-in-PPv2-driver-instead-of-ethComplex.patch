From 49a55c67163aa33f51da7b9382ce7dbe4093eb2a Mon Sep 17 00:00:00 2001
From: Yoni Farhadian <yonif@marvell.com>
Date: Thu, 20 Jun 2013 11:26:15 +0300
Subject: [PATCH 0731/1825] PPv2: init GOP in PPv2 driver instead of
 ethComplex

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit f2613b6d65e84bfa39ffa74a46c01ba779fceb99

Change-Id: Ib834b0dae988e8c65d69710887b7bffc20fc523b
Signed-off-by: Yoni Farhadian <yonif@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2294
Reviewed-by: Star_Automation <star@marvell.com>
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c    |   19 -------------------
 1 files changed, 0 insertions(+), 19 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
index b21afaa..5503051 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEthCompLib.c
@@ -306,19 +306,6 @@ static void mvEthComplexGbePhyResetSet(MV_BOOL setReset)
 	MV_REG_WRITE(MV_ETHCOMP_QUAD_GBE_PHY_CTRL_STAT_REG, reg);
 }
 
-static void mvEthComplexGopInit(int port, int isSgmii, int isPeriodicXon, int isAN)
-{
-	mvEthPortSgmiiSet(port, isSgmii);
-	mvEthPortPeriodicXonSet(port, isPeriodicXon);
-
-	if (isAN)
-		mvEthPortLinkSpeedFlowCtrl(port, MV_ETH_SPEED_AN, 0);
-	else
-		mvEthPortLinkSpeedFlowCtrl(port, MV_ETH_SPEED_1000, 1);
-
-	mvEthPortResetSet(port, MV_FALSE);
-}
-
 static void mvEthComplexMacToSwPort(MV_U32 port, MV_U32 swPort,
 				    MV_ETH_PORT_SPEED speed)
 {
@@ -335,8 +322,6 @@ static void mvEthComplexMacToSwPort(MV_U32 port, MV_U32 swPort,
 		mvEthComplexGbeToSwitchSpeedSet(speed);
 	else
 		mvEthComplexPortDpClkSrcSet(port, 0x1);
-
-	mvEthComplexGopInit(port, MV_FALSE, MV_FALSE, MV_FALSE);
 }
 
 static void mvEthComplexSwPortToRgmii(MV_U32 swPort, MV_U32 port)
@@ -361,8 +346,6 @@ static void mvEthComplexMacToGbePhy(MV_U32 port, MV_U32 phy, MV_U32 phyAddr)
 	mvEthComplexGbePhyPdConfigEdetASet(phy, 0x0);
 	mvEthComplexGbePhyPsEnaXcSSet(phy, 0x0);
 	mvEthComplexGbePhyResetSet(MV_FALSE);
-	mvEthComplexGopInit(port, MV_FALSE, MV_FALSE, MV_TRUE);
-	mvEthPhyAddrSet(port, phy);
 }
 
 static void mvEthComplexMacToComPhy(MV_U32 port, MV_U32 comPhy)
@@ -380,8 +363,6 @@ static void mvEthComplexMacToRgmii(MV_U32 port, MV_U32 phy)
 	mvEthComplexGbePortSrcSet(port, 0x0);
 	mvEthComplexPortDpClkSrcSet(port, 0x1);
 	mvEthComplexGopDevEnable();
-	mvEthComplexGopInit(port, MV_FALSE, MV_FALSE, MV_TRUE);
-	mvEthPhyAddrSet(port, phy);
 }
 
 static void mvEthComplexSwPortToGbePhy(MV_U32 swPort, MV_U32 phy)
-- 
1.7.5.4

