From 9bae9c0ad37eae1292c7ef0ce584e75c61c827ae Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Sun, 7 Apr 2013 16:05:45 +0300
Subject: [PATCH 0550/1825] ALP: Remove unused support_wait_for_interrupt

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 18a903c7173f7cad670d53ad4311692c01b8134d

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I707d8b6f7938cc9397cd3ac0c390c11719cc5379
Reviewed-on: http://vgitil04.il.marvell.com:8080/1497
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/core.c                      |   15 ---------------
 arch/arm/plat-armada/mv_drivers_lsp/mv_proc/proc.c |   10 ++--------
 2 files changed, 2 insertions(+), 23 deletions(-)

diff --git a/arch/arm/mach-avantalp/core.c b/arch/arm/mach-avantalp/core.c
index 8bb876a..422791b 100755
--- a/arch/arm/mach-avantalp/core.c
+++ b/arch/arm/mach-avantalp/core.c
@@ -244,21 +244,6 @@ static int __init noL2_setup(char *__unused)
 __setup("noL2", noL2_setup);
 #endif
 
-#ifdef CONFIG_JTAG_DEBUG
-	MV_U32 support_wait_for_interrupt = 0x0;
-#else
-	MV_U32 support_wait_for_interrupt = 0x1;
-#endif
-
-static int __init noWFI_setup(char *__unused)
-{
-     support_wait_for_interrupt = 0;
-     return 1;
-}
-
-__setup("noWFI", noWFI_setup);
-
-
 #ifdef CONFIG_SMP
 #if 0
 unsigned long mv_cpu_count = NR_CPUS;
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_proc/proc.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_proc/proc.c
index 8649cab..32cfeea 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_proc/proc.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_proc/proc.c
@@ -207,7 +207,6 @@ void mv_proc_show_dram_stats_cntrs(void)
 * Outputs: count
 *********************************************************************/
 unsigned int kernel_align = 0;
-extern unsigned int support_wait_for_interrupt;
 int evb_resource_dump_write(struct file *file, const char *buffer, unsigned long count, void *data)
 {
 
@@ -271,7 +270,7 @@ int evb_resource_dump_write(struct file *file, const char *buffer, unsigned long
 	}
 	if (!strncmp(buffer, "show__l2", 8))
 		mv_proc_show_l2_cntrs();
-#endif /*  */
+#endif
 
 #ifdef CONFIG_MV_DRAM_STATS_CNTRS
 	if (!strncmp(buffer, "start_dram_stats", strlen("start_dram_stats"))) {
@@ -285,12 +284,7 @@ int evb_resource_dump_write(struct file *file, const char *buffer, unsigned long
 	if (!strncmp(buffer, "show_dram_stats", strlen("show_dram_stats")))
 		mv_proc_show_dram_stats_cntrs();
 
-#endif /*  */
-	    if (!strncmp(buffer, "idle_wfi", strlen("idle_wfi"))) {
-		int en;
-		sscanf((char *)((unsigned int)buffer + strlen("idle_wfi")), "%d", &en);
-		support_wait_for_interrupt = en;
-	}
+#endif
 	if (!strncmp(buffer, "show__ua", 8)) {
 		if (kernel_align == 1)
 			kernel_align = 0;
-- 
1.7.5.4

