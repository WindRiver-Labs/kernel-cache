From 5c44278a94970d93fbee5b43d2217daed176c0e5 Mon Sep 17 00:00:00 2001
From: omri itach <omrii@marvell.com>
Date: Tue, 26 Feb 2013 16:53:48 +0200
Subject: [PATCH 0476/1825] ALP: add SatR and board config support :

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 8c4264400e2f5a6ab08228b6fd9776b758bfbac5

1. new mvCtrlEnvInit, with simplified mpp's detection and initialization process
2. DB-6600 Board info init
3. general controller information init
4. SAR mvCtrlSatrInit implementation

Change-Id: Iaf8f8736f2d07c0b9f01c744da545d45d5a01995
Reviewed-on: http://vgitil04.il.marvell.com:8080/1187
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.c      |  278 ++++---
 .../avanta_lp_family/boardEnv/mvBoardEnvLib.h      |  321 ++++---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.c     |  365 +++++---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.h     |  225 +++--
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c        |  451 ++++++----
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h        |  376 ++++----
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h       |  929 ++++++++++----------
 .../avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h       |  566 +++++++-----
 8 files changed, 2007 insertions(+), 1504 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
index a21924b..5d3aa19 100755
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.c
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -85,7 +85,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 /* defines  */
 #undef MV_DEBUG
 #ifdef MV_DEBUG
-#define DB(x)	x
+#define DB(x)   x
 #else
 #define DB(x)
 #endif
@@ -180,7 +180,7 @@ MV_VOID mvBoardEnvInit(MV_VOID)
 *******************************************************************************/
 MV_U16 mvBoardModelGet(MV_VOID)
 {
-	return (mvBoardIdGet() >> 16);
+	return mvBoardIdGet() >> 16;
 }
 
 /*******************************************************************************
@@ -205,7 +205,7 @@ MV_U16 mvBoardModelGet(MV_VOID)
 *******************************************************************************/
 MV_U16 mvBoardRevGet(MV_VOID)
 {
-	return (mvBoardIdGet() & 0xFFFF);
+	return mvBoardIdGet() & 0xFFFF;
 }
 
 /*******************************************************************************
@@ -310,6 +310,27 @@ MV_32 mvBoardPhyAddrGet(MV_U32 ethPortNum)
 }
 
 /*******************************************************************************
+* mvBoardSpecInitGet -
+*
+* DESCRIPTION:
+*       This routine returns the board specific initializtion information.
+*
+* INPUT:
+*       None.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*       A pointer to the array holding the board specific initializations.
+*
+*******************************************************************************/
+MV_BOARD_SPEC_INIT *mvBoardSpecInitGet(MV_VOID)
+{
+	return board->pBoardSpecInit;
+}
+
+/*******************************************************************************
 * mvBoardQuadPhyAddr0Get - Get the phy address
 *
 * DESCRIPTION:
@@ -498,7 +519,7 @@ MV_U32 mvBoardDebugLedNumGet(MV_U32 boardId)
 * mvBoardDebugLed - Set the board debug Leds
 *
 * DESCRIPTION: turn on/off status leds.
-* 	       Note: assume MPP leds are part of group 0 only.
+*              Note: assume MPP leds are part of group 0 only.
 *
 * INPUT:
 *       hexNum - Number to be displied in hex by Leds.
@@ -661,7 +682,7 @@ MV_BOOL mvBoardIsOurPciSlot(MV_U32 busNum, MV_U32 slotNum)
 
 	if (localBusNum != busNum) {
 		DB(mvOsPrintf("%s:: localBusNum %x != busNum %x.\n",
-					__func__, localBusNum, busNum));
+			      __func__, localBusNum, busNum));
 		return MV_FALSE;
 	}
 
@@ -726,13 +747,33 @@ MV_U32 mvBoardGpioIntMaskGet(MV_U32 gppGrp)
 *******************************************************************************/
 MV_32 mvBoardMppGet(MV_U32 mppGroupNum)
 {
-	MV_U32 mppMod;
+	return board->pBoardMppConfigValue[0].mppGroup[mppGroupNum];
+}
 
-	mppMod = board->pBoardModTypeValue->boardMppMod;
-	if (mppMod >= board->numBoardMppConfigValue)
-		mppMod = 0; /* default */
+MV_32 mvBoardMppTypeGet(MV_U32 mppGroupNum)
+{
+	return (MV_U32)board->pBoardMppGroupValue[mppGroupNum];
+}
+
+MV_STATUS mvBoardConfigInit(void)
+{
+/*   read S@R configuration From local array - already filled by mvCtrlSatrInit, and:
+ *   1. decide which group types is relevant for mpp init
+ *   2. build etherntComplex struct for kosta */
+	return MV_OK;
+}
+
+MV_VOID mvBoardConfigWrite(void)
+{
+	MV_U32 mppGroup, mppType, mppVal;
+	MV_U32 mppGroups[][10] = MPP_GROUP_TYPES;
+
+	for (mppGroup = 0; mppGroup < MV_MPP_MAX_GROUP; mppGroup++) {
+		mppType = mvBoardMppTypeGet(mppGroup);
+		mppVal = mppGroups[mppGroup][mppType];
+		MV_REG_WRITE(mvCtrlMppRegGet(mppGroup), mppVal);
+	}
 
-	return board->pBoardMppConfigValue[mppMod].mppGroup[mppGroupNum];
 }
 
 /*******************************************************************************
@@ -934,10 +975,9 @@ MV_32 mvBoardGetDevicesNumber(MV_BOARD_DEV_CLASS devClass)
 {
 	MV_U32 foundIndex = 0, devNum;
 
-	for (devNum = START_DEV_CS; devNum < board->numBoardDeviceIf; devNum++) {
+	for (devNum = START_DEV_CS; devNum < board->numBoardDeviceIf; devNum++)
 		if (board->pDevCsInfo[devNum].devClass == devClass)
 			foundIndex++;
-	}
 
 	return foundIndex;
 }
@@ -1186,6 +1226,34 @@ MV_U8 mvBoardTwsiAddrGet(MV_BOARD_TWSI_CLASS twsiClass, MV_U32 index)
 }
 
 /*******************************************************************************
+* mvBoardSarInfoGet
+*
+* DESCRIPTION:
+*	Return the SAR fields information for a given SAR class.
+*
+* INPUT:
+*	sarClass - The SAR field to return the information for.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*	MV_BOARD_SAR_INFO struct with mask, offset and register number.
+*
+*******************************************************************************/
+MV_STATUS mvBoardSarInfoGet(MV_SATR_TYPE_ID sarClass, MV_BOARD_SAR_INFO *sarInfo)
+{
+	int i;
+
+	for (i = 0; i < board->numBoardSarInfo; i++)
+		if (board->pBoardSarInfo[i].sarid == sarClass) {
+			*sarInfo = board->pBoardSarInfo[i];
+			return MV_OK;
+		}
+	return MV_ERROR;
+}
+
+/*******************************************************************************
 * mvBoardNandWidthGet -
 *
 * DESCRIPTION: Get the width of the first NAND device in bytes
@@ -1236,7 +1304,15 @@ MV_VOID mvBoardIdSet(MV_VOID)
 {
 #ifdef CONFIG_MACH_AVANTA_LP_FPGA
 	gBoardId = MV_BOARD_ID_AVANTA_LP_FPGA;
+#else
+	gBoardId = (MV_REG_READ(MPP_SAMPLE_AT_RESET(1)) & SAR1_BOARD_ID_MASK) >> SAR1_BOARD_ID_OFFSET;
 #endif
+
+	if (!((gBoardId >= BOARD_ID_BASE) && (gBoardId < MV_MAX_BOARD_ID))) {
+		mvOsPrintf("mvBoardIdSet: Board ID must be defined!\n");
+		while (1)
+			continue;
+	}
 	board = boardInfoTbl[gBoardId];
 }
 
@@ -1361,9 +1437,6 @@ MV_STATUS mvBoardTwsiSatRSet(MV_U8 devNum, MV_U8 regNum, MV_U8 regVal)
  * SatR Configuration functions
  */
 
-
-
-
 MV_U8 mvBoardCpuFreqGet(MV_VOID)
 {
 	MV_U8 sar;
@@ -1377,7 +1450,7 @@ MV_U8 mvBoardCpuFreqGet(MV_VOID)
 	if ((MV_8)MV_ERROR == (MV_8)sar)
 		return MV_ERROR;
 
-	return (((sarMsb & 0x1) << 3) | ((sar & 0x1C) >> 2));
+	return ((sarMsb & 0x1) << 3) | ((sar & 0x1C) >> 2);
 }
 
 MV_STATUS mvBoardCpuFreqSet(MV_U8 freqVal)
@@ -1419,44 +1492,11 @@ MV_STATUS mvBoardCpuFreqSet(MV_U8 freqVal)
 	return MV_OK;
 }
 
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
-
 MV_U8 mvBoardCpuCoresNumGet(MV_VOID)
 {
 	return 1;
 }
 
-
-
-
-
-
-
-
-
-
-
-
-
-
 /*******************************************************************************
 * End of SatR Configuration functions
 *******************************************************************************/
@@ -1693,7 +1733,7 @@ MV_STATUS mvBoardTwsiReadByteThruMux(MV_U8 muxChNum, MV_U8 chNum,
 *******************************************************************************/
 MV_32 mvBoardSmiScanModeGet(MV_U32 switchIdx)
 {
-	return NULL;
+	return 0;
 }
 
 /*******************************************************************************
@@ -1717,7 +1757,6 @@ MV_32 mvBoardSwitchCpuPortGet(MV_U32 switchIdx)
 	return 0;
 }
 
-
 /*******************************************************************************
 * mvBoardIsSerdesConfigurationEnabled
 *
@@ -1737,7 +1776,7 @@ MV_32 mvBoardSwitchCpuPortGet(MV_U32 switchIdx)
 MV_BOOL mvBoardIsSerdesConfigurationEnabled(void)
 {
 	if (board->pBoardSerdesConfigValue)
-		return (board->pBoardSerdesConfigValue->enableSerdesConfiguration);
+		return board->pBoardSerdesConfigValue->enableSerdesConfiguration;
 	else
 		return MV_FALSE;
 }
@@ -1798,3 +1837,32 @@ MV_BOARD_PEX_INFO *mvBoardPexInfoGet(void)
 {
 	return NULL;
 }
+
+/*******************************************************************************
+* mvBoardModuleAutoDetectEnabled
+*
+* DESCRIPTION:
+*	Indicate if the board supports auto configuration and detection of
+*	modules. This is usually enabled for DB boards only.
+*
+* INPUT:
+*	None.
+*
+* OUTPUT:
+*	None.
+*
+* RETURN:
+*       MV_TRUE if auto-config/detection is enabled.
+*	MV_FALSE otherwise.
+*
+*******************************************************************************/
+MV_BOOL mvBoardModuleAutoDetectEnabled(void)
+{
+	return board->moduleAutoDetect;
+}
+
+void setOtherBoardSimulation(MV_U32 ID_of_board)
+{
+	board = boardInfoTbl[ID_of_board];
+	printf("\nSimulationg Board enviroment according to : %s \n", board->boardName);
+}
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
index 8646e57..446857a 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvLib.h
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -78,48 +78,46 @@ extern "C" {
 #include "twsi/mvTwsi.h"
 
 /* DUART stuff for Tclk detection only */
-#define DUART_BAUD_RATE			115200
-#define MAX_CLOCK_MARGINE		5000000	/* Maximum detected clock margin */
+#define DUART_BAUD_RATE                 115200
+#define MAX_CLOCK_MARGINE               5000000 /* Maximum detected clock margin */
 
 /* Voice devices assembly modes */
-#define DAISY_CHAIN_MODE		1
-#define DUAL_CHIP_SELECT_MODE		0
-#define INTERRUPT_TO_MPP		1
-#define INTERRUPT_TO_TDM		0
-
-#define	MV_BOARD_MAX_USB_IF		3
-#define MV_BOARD_MAX_MPP		9	/* number of MPP conf registers */
-#define MV_BOARD_NAME_LEN  		0x20
+#define DAISY_CHAIN_MODE                1
+#define DUAL_CHIP_SELECT_MODE           0
+#define INTERRUPT_TO_MPP                1
+#define INTERRUPT_TO_TDM                0
+
+#define BOARD_ETH_PORT_NUM  MV_ETH_MAX_PORTS
+#define BOARD_ETH_SWITCH_PORT_NUM       8
+#define BOARD_ETH_QD_SWITCH_PORT_NUM    5
+#define BOARD_ETH_SWITCH_CPUPORT_NUM    2
+#define MV_BOARD_MAX_USB_IF             3
+#define MV_BOARD_MAX_MPP                9       /* number of MPP conf registers */
+#define MV_BOARD_MAX_MPP_GROUPS         9
+#define MV_BOARD_NAME_LEN               0x20
 
 /* EPPROM Modules detection information */
 
-#define MV_BOARD_EEPROM_MODULE_ADDR		0x50
-#define MV_BOARD_EEPROM_MODULE_ADDR_TYPE	ADDR7_BIT
-
-#define MV_BOARD_PEX_MODULE_ADDR		0x23
-#define MV_BOARD_PEX_MODULE_ADDR_TYPE		ADDR7_BIT
-#define MV_BOARD_PEX_MODULE_ID			0
+#define MV_BOARD_EEPROM_MODULE_ADDR             0x50
+#define MV_BOARD_EEPROM_MODULE_ADDR_TYPE        ADDR7_BIT
 
-#define MV_BOARD_LVDS_MODULE_ADDR		0x21
-#define MV_BOARD_LVDS_MODULE_ADDR_TYPE		ADDR7_BIT
-#define MV_BOARD_LVDS_MODULE_ID			0
+#define MV_BOARD_PEX_MODULE_ADDR                0x23
+#define MV_BOARD_PEX_MODULE_ADDR_TYPE           ADDR7_BIT
+#define MV_BOARD_PEX_MODULE_ID                  0
 
-#define MV_BOARD_SETM_MODULE_ADDR		0x23
-#define MV_BOARD_SETM_MODULE_ADDR_TYPE		ADDR7_BIT
-#define MV_BOARD_SETM_MODULE_ID			1
+#define MV_BOARD_LVDS_MODULE_ADDR               0x21
+#define MV_BOARD_LVDS_MODULE_ADDR_TYPE          ADDR7_BIT
+#define MV_BOARD_LVDS_MODULE_ID                 0
 
-#define MV_BOARD_MPP_MODULE_ADDR		0x20
-#define MV_BOARD_MPP_MODULE_ADDR_TYPE		ADDR7_BIT
-#define MV_BOARD_LCD_DVI_MODULE_ID		0
-#define MV_BOARD_TDM_MODULE_ID			1
-#define MV_BOARD_MII_GMII_MODULE_ID		4
+#define MV_BOARD_SETM_MODULE_ADDR               0x23
+#define MV_BOARD_SETM_MODULE_ADDR_TYPE          ADDR7_BIT
+#define MV_BOARD_SETM_MODULE_ID                 1
 
-typedef enum {
-	BOARD_EPON_CONFIG,
-	BOARD_GPON_CONFIG,
-	BOARD_PON_NONE,
-	BOARD_PON_AUTO
-} MV_BOARD_PON_CONFIG;
+#define MV_BOARD_MPP_MODULE_ADDR                0x20
+#define MV_BOARD_MPP_MODULE_ADDR_TYPE           ADDR7_BIT
+#define MV_BOARD_LCD_DVI_MODULE_ID              0
+#define MV_BOARD_TDM_MODULE_ID                  1
+#define MV_BOARD_MII_GMII_MODULE_ID             4
 
 typedef struct _boardData {
 	MV_U32 magic;
@@ -138,10 +136,12 @@ typedef enum _devBoardMppGroupClass {
 } MV_BOARD_MPP_GROUP_CLASS;
 
 typedef enum _devBoardMppTypeClass {
-	MV_BOARD_AUTO = 0,
+	MV_BOARD_AUTO,
+	MV_BOARD_TDM_2CH,
 	MV_BOARD_TDM_32CH,
-	MV_BOARD_LCD_DVI,
-	MV_BOARD_MII_GMII,
+	MV_BOARD_RGMII0,
+	MV_BOARD_RGMII1,
+	MV_BOARD_SW_P4,
 	MV_BOARD_OTHER
 } MV_BOARD_MPP_TYPE_CLASS;
 
@@ -150,18 +150,27 @@ typedef enum _devBoardOtherTypeClass {
 	MV_BOARD_LVDS    = 0x00000001,
 	MV_BOARD_PEX     = 0x00000002,
 	MV_BOARD_SWITCH  = 0x00000004,
-	MV_BOARD_SETM 	 = 0x00000008,
+	MV_BOARD_SETM    = 0x00000008,
 	MV_BOARD_UNKNOWN = 0x80000000
 } MV_BOARD_OTHER_TYPE_CLASS;
 
-
-#define MV_BOARD_TDM	MV_BOARD_TDM_32CH
+#define MV_BOARD_TDM    MV_BOARD_TDM_32CH
 
 typedef struct _boardModuleTypeInfo {
 	MV_BOARD_MPP_TYPE_CLASS boardMppMod;
 	MV_BOARD_OTHER_TYPE_CLASS boardOtherMod;
 } MV_BOARD_MODULE_TYPE_INFO;
 
+/* omriii:  decide between MODULE_TYPE or MPP_TYPE */
+typedef struct _boardMppTypeInfo {
+	MV_BOARD_MPP_TYPE_CLASS boardMppTdm;
+
+	/* Ethernet / Sata complex                      */
+	/* A bitmask of MV_ETH_SATA_COMPLEX_OPTIONS     */
+	MV_U32 ethSataComplexOpt;
+	MV_U32 ethPortsMode;    /* bitmask of MV_ETH_PORT_MODE */
+} MV_BOARD_MPP_TYPE_INFO;
+
 typedef enum _devBoardClass {
 	BOARD_DEV_NOR_FLASH,
 	BOARD_DEV_NAND_FLASH,
@@ -177,6 +186,8 @@ typedef enum _devTwsiBoardClass {
 	BOARD_DEV_TWSI_EXP,
 	BOARD_DEV_TWSI_SATR,
 	BOARD_TWSI_MUX,
+	BOARD_DEV_TWSI_EEPROM,          //omriii : _EEPROM should be added ? or used as _OTHER ?
+	BOARD_DEV_TWSI_IO_EXPANDER,     //omriii : _IO_EXPANDER should be added ? or used as _OTHER?
 	BOARD_TWSI_OTHER
 } MV_BOARD_TWSI_CLASS;
 
@@ -210,22 +221,36 @@ typedef enum _devGppBoardClass {
 	BOARD_GPP_SDIO_WP,
 	BOARD_GPP_SWITCH_PHY_INT,
 	BOARD_GPP_TSU_DIRCTION,
+	BOARD_GPP_PEX_RESET,
 	BOARD_GPP_CONF,
+	BOARD_GPP_PON_XVR_TX,
+	BOARD_GPP_SYS_LED,
+	BOARD_GPP_PON_LED,
 	BOARD_GPP_OTHER
 } MV_BOARD_GPP_CLASS;
 
 typedef struct _devCsInfo {
 	MV_U8 deviceCS;
 	MV_U32 params;
-	MV_U32 devClass;	/* MV_BOARD_DEV_CLASS */
+	MV_U32 devClass;        /* MV_BOARD_DEV_CLASS */
 	MV_U8 devWidth;
 	MV_U8 busWidth;
 } MV_DEV_CS_INFO;
 
+typedef struct _boardSwitchInfo {
+	MV_32 switchIrq;
+	MV_32 switchPort[BOARD_ETH_SWITCH_PORT_NUM];
+	MV_32 cpuPort;
+	MV_32 connectedPort[MV_ETH_MAX_PORTS];
+	MV_32 smiScanMode;
+	MV_32 quadPhyAddr[BOARD_ETH_QD_SWITCH_PORT_NUM];
+	MV_U32 forceLinkMask; /* Bitmask of switch ports to have force link (1Gbps) */
+} MV_BOARD_SWITCH_INFO;
+
 typedef struct _boardLedInfo {
 	MV_U8 activeLedsNumber;
-	MV_U8 ledsPolarity;	/* '0' or '1' to turn on led */
-	MV_U8 *gppPinNum;	/* Pointer to GPP values */
+	MV_U8 ledsPolarity;     /* '0' or '1' to turn on led */
+	MV_U8 *gppPinNum;       /* Pointer to GPP values */
 } MV_BOARD_LED_INFO;
 
 typedef struct _boardGppInfo {
@@ -239,6 +264,13 @@ typedef struct _boardTwsiInfo {
 	MV_U8 twsiDevAddrType;
 } MV_BOARD_TWSI_INFO;
 
+typedef struct _boardSarInfo {
+	MV_SATR_TYPE_ID sarid;
+	MV_U32 mask;
+	MV_U32 offset;
+	MV_U32 regNum;
+} MV_BOARD_SAR_INFO;
+
 typedef enum _boardMacSpeed {
 	BOARD_MAC_SPEED_10M,
 	BOARD_MAC_SPEED_100M,
@@ -250,28 +282,43 @@ typedef struct _boardMacInfo {
 	MV_BOARD_MAC_SPEED boardMacSpeed;
 	MV_U8 boardEthSmiAddr;
 	MV_U16 LinkCryptPortAddr;
-	MV_U8	boardEthSmiAddr0;
+	MV_U8 boardEthSmiAddr0;
 } MV_BOARD_MAC_INFO;
 
 typedef struct _boardMppInfo {
 	MV_U32 mppGroup[MV_BOARD_MAX_MPP];
 } MV_BOARD_MPP_INFO;
 
+typedef struct _boardMppGroupInfo {
+	MV_U32 mppGroupType[MV_BOARD_MAX_MPP_GROUPS];
+} MV_BOARD_MPP_GROUP_INFO;
+
+typedef enum {
+	BOARD_EPON_CONFIG,
+	BOARD_GPON_CONFIG,
+	BOARD_PON_NONE,
+	BOARD_PON_AUTO
+} MV_BOARD_PON_CONFIG;
+
 typedef struct {
 	MV_U8 spiCs;
 } MV_BOARD_TDM_INFO;
 
 typedef struct _boardPexUnitCfg {
-	MV_PEX_UNIT_CFG 	pexCfg;
-	MV_U8			pexLaneStat[4];	/* 1: enabled, 2: disabled */
+	MV_PEX_UNIT_CFG pexCfg;
+	MV_U8 pexLaneStat[4];                   /* 1: enabled, 2: disabled */
 } MV_BOARD_PEX_UNIT_CFG;
 
 typedef struct _boardPexInfo {
-	MV_PEXIF_INDX 		pexMapping[MV_PEX_MAX_IF];
-	MV_BOARD_PEX_UNIT_CFG 	pexUnitCfg[MV_PEX_MAX_UNIT];
-	MV_U32			boardPexIfNum;
+	MV_PEXIF_INDX pexMapping[MV_PEX_MAX_IF];
+	MV_BOARD_PEX_UNIT_CFG pexUnitCfg[MV_PEX_MAX_UNIT];
+	MV_U32 boardPexIfNum;
 } MV_BOARD_PEX_INFO;
 
+typedef struct {
+	MV_U8 spiId;
+} MV_BOARD_TDM_SPI_INFO;
+
 typedef enum {
 	BOARD_TDM_SLIC_880 = 0,
 	BOARD_TDM_SLIC_792,
@@ -280,12 +327,21 @@ typedef enum {
 	BOARD_TDM_SLIC_COUNT
 } MV_BOARD_TDM_SLIC_TYPE;
 
+/* Board specific initialization. Performed before initializing the SoC. */
+typedef struct {
+	MV_U32 reg;
+	MV_U32 mask;
+	MV_U32 val;
+} MV_BOARD_SPEC_INIT;
+
 typedef struct _boardInfo {
 	char boardName[MV_BOARD_NAME_LEN];
 	MV_U8 numBoardMppTypeValue;
-	MV_BOARD_MODULE_TYPE_INFO *pBoardModTypeValue;
+	MV_BOARD_MPP_TYPE_INFO *pBoardModTypeValue;
 	MV_U8 numBoardMppConfigValue;
 	MV_BOARD_MPP_INFO *pBoardMppConfigValue;
+	MV_U8 numBoardMppGroupValue;
+	MV_BOARD_MPP_GROUP_INFO **pBoardMppGroupValue;
 	MV_U8 numBoardSerdesConfigValue;
 	MV_SERDES_CFG *pBoardSerdesConfigValue;
 	MV_U32 intsGppMaskLow;
@@ -293,6 +349,8 @@ typedef struct _boardInfo {
 	MV_U32 intsGppMaskHigh;
 	MV_U8 numBoardDeviceIf;
 	MV_DEV_CS_INFO *pDevCsInfo;
+	MV_U8 numBoardSarInfo;
+	MV_BOARD_SAR_INFO *pBoardSarInfo;
 	MV_U8 numBoardTwsiDev;
 	MV_BOARD_TWSI_INFO *pBoardTwsiDev;
 	MV_U8 numBoardMacInfo;
@@ -301,10 +359,10 @@ typedef struct _boardInfo {
 	MV_BOARD_GPP_INFO *pBoardGppInfo;
 	MV_U8 activeLedsNumber;
 	MV_U8 *pLedGppPin;
-	MV_U8 ledsPolarity;	/* '0' or '1' to turn on led */
+	MV_U8 ledsPolarity;     /* '0' or '1' to turn on led */
 
-	MV_U8	pmuPwrUpPolarity;
-	MV_U32	pmuPwrUpDelay;
+	MV_U8 pmuPwrUpPolarity;
+	MV_U32 pmuPwrUpDelay;
 	/* GPP values */
 	MV_U32 gppOutEnValLow;
 	MV_U32 gppOutEnValMid;
@@ -316,8 +374,13 @@ typedef struct _boardInfo {
 	MV_U32 gppPolarityValMid;
 	MV_U32 gppPolarityValHigh;
 
-	/*
-	 * TDM configuration:
+	/* External Switch Configuration */
+	MV_BOARD_SWITCH_INFO *pSwitchInfo;
+	MV_U32 switchInfoNum;
+
+	/* PON configuration. */
+	MV_BOARD_PON_CONFIG ponConfigValue;
+	/* TDM configuration:
 	 * We hold a different configuration array for each possible slic that
 	 * can be connected to board.
 	 * When modules are scanned, then we select the index of the relevant
@@ -329,14 +392,23 @@ typedef struct _boardInfo {
 	MV_BOARD_TDM_INFO *pBoardTdmInt2CsInfo[BOARD_TDM_SLIC_COUNT];
 	MV_16 boardTdmInfoIndex;
 
+	/* Board specific initialization. Performed before initializing the SoC. */
+	MV_BOARD_SPEC_INIT      *pBoardSpecInit;
+	/* Deep-Idle power up delay */
+	MV_U32 deepIdlePwrUpDelay;
+
 	/* NAND init params */
 	MV_U32 nandFlashReadParams;
 	MV_U32 nandFlashWriteParams;
 	MV_U32 nandFlashControl;
+	MV_BOARD_TDM_SPI_INFO *pBoardTdmSpiInfo;
 	MV_BOARD_PEX_INFO	boardPexInfo;	/* filled in runtime */
 	MV_U32 norFlashReadParams;
 	MV_U32 norFlashWriteParams;
 
+	/* Indicates if auto-detection of modules is enabled on this board. */
+	/* Set to MV_FALSE for any board that is not a DB. */
+	MV_BOOL moduleAutoDetect;
 } MV_BOARD_INFO;
 
 /* For backward compatability with Legacy mode */
@@ -348,12 +420,15 @@ MV_VOID mvBoardEnvInit(MV_VOID);
 MV_U16 mvBoardModelGet(MV_VOID);
 MV_U16 mvBoardRevGet(MV_VOID);
 MV_STATUS mvBoardNameGet(char *pNameBuff);
+MV_BOARD_SPEC_INIT *mvBoardSpecInitGet(MV_VOID);
 MV_BOOL mvBoardIsPortInSgmii(MV_U32 ethPortNum);
 MV_BOOL mvBoardIsPortInGmii(MV_U32 ethPortNum);
 MV_BOOL mvBoardIsPortLb(MV_U32 ethPortNum);
 MV_32 mvBoardPhyAddrGet(MV_U32 ethPortNum);
 MV_32 mvBoardPhyLinkCryptPortAddrGet(MV_U32 ethPortNum);
 
+MV_32 mvBoardQuadPhyAddr0Get(MV_U32 ethPortNum);
+MV_STATUS mvBoardSarInfoGet(MV_SATR_TYPE_ID sarClass, MV_BOARD_SAR_INFO *sarInfo);
 MV_U32 mvBoardTclkGet(MV_VOID);
 MV_U32 mvBoardSysClkGet(MV_VOID);
 MV_U32 mvBoardDebugLedNumGet(MV_U32 boardId);
@@ -367,6 +442,7 @@ MV_32 mvBoardUSBVbusEnGpioPinGet(MV_32 devId);
 MV_BOOL mvBoardIsOurPciSlot(MV_U32 busNum, MV_U32 slotNum);
 MV_U32 mvBoardGpioIntMaskGet(MV_U32 gppGrp);
 MV_32 mvBoardMppGet(MV_U32 mppGroupNum);
+MV_32 mvBoardMppTypeGet(MV_U32 mppGroupNum);
 MV_U32 mvBoardGppConfigGet(void);
 MV_32 mvBoardTdmSpiModeGet(MV_VOID);
 MV_U8 mvBoardTdmDevicesCountGet(void);
@@ -389,33 +465,12 @@ MV_U32 mvBoardSledCpuNumGet(MV_VOID);
 
 MV_U8 mvBoardTwsiSatRGet(MV_U8 devNum, MV_U8 regNum);
 MV_STATUS mvBoardTwsiSatRSet(MV_U8 devNum, MV_U8 regNum, MV_U8 regVal);
-MV_U8 mvBoardFabFreqGet(MV_VOID);
-MV_STATUS mvBoardFabFreqSet(MV_U8 freqVal);
+
 MV_U8 mvBoardCpuFreqGet(MV_VOID);
 MV_STATUS mvBoardCpuFreqSet(MV_U8 freqVal);
-MV_U8 mvBoardCpuFreqModeGet(MV_VOID);
-MV_STATUS mvBoardCpuFreqModeSet(MV_U8 freqVal);
-MV_STATUS mvBoardFabFreqModeSet(MV_U8 freqVal);
-MV_U8 mvBoardBootDevGet(MV_VOID);
-MV_STATUS mvBoardBootDevSet(MV_U8 val);
-MV_U8 mvBoardBootDevWidthGet(MV_VOID);
-MV_STATUS mvBoardBootDevWidthSet(MV_U8 val);
-MV_U8 mvBoardCpu0EndianessGet(MV_VOID);
-MV_STATUS mvBoardCpu0EndianessSet(MV_U8 val);
-MV_U8 mvBoardL2SizeGet(MV_VOID);
-MV_STATUS mvBoardL2SizeSet(MV_U8 val);
+
 MV_U8 mvBoardCpuCoresNumGet(MV_VOID);
-MV_STATUS mvBoardCpuCoresNumSet(MV_U8 val);
-MV_STATUS mvBoardConIdSet(MV_U16 conf);
-MV_U16 mvBoardConfIdGet(MV_VOID);
-MV_STATUS mvBoardPexCapabilitySet(MV_U16 conf);
-MV_U16 mvBoardPexCapabilityGet(MV_VOID);
-MV_STATUS mvBoardDramEccSet(MV_U16 conf);
-MV_U16 mvBoardDramEccGet(MV_VOID);
-MV_STATUS mvBoardDramBusWidthSet(MV_U16 conf);
-MV_U16 mvBoardDramBusWidthGet(MV_VOID);
-MV_U8 mvBoardAltFabFreqGet(MV_VOID);
-MV_STATUS mvBoardAltFabFreqSet(MV_U8 freqVal);
+
 MV_STATUS mvBoardMppModulesScan(void);
 MV_STATUS mvBoardOtherModulesScan(void);
 MV_BOOL mvBoardIsPexModuleConnected(void);
@@ -437,6 +492,6 @@ MV_STATUS mvBoardPexModeSet(MV_U16 conf);
 
 #ifdef __cplusplus
 }
-#endif /* __cplusplus */
+#endif  /* __cplusplus */
 
-#endif /* __INCmvBoardEnvLibh */
+#endif  /* __INCmvBoardEnvLibh */
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
index e35cd55..1165ec8 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 #include "mvCommon.h"
@@ -67,7 +67,30 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #include "twsi/mvTwsi.h"
 #include "pex/mvPexRegs.h"
 
-#define ARRSZ(x)		(sizeof(x) / sizeof(x[0]))
+#define ARRSZ(x)                (sizeof(x) / sizeof(x[0]))
+
+MV_BOARD_SAR_INFO boardSarInfo[] = {
+/* {{MV_SATR_TYPE_ID SarID, MV_U32 Mask, MV_U32 Offset, MV_U32 regNum}} */
+	{ MV_SATR_CPU_FREQ,	       0x003E0000,	      17,		     1	      },
+	{ MV_SATR_CORE_CLK_SELECT,     0x00400000,	      22,		     1	      },
+	{ MV_SATR_CPU1_ENABLE,	       0x00008000,	      15,		     0	      },
+	{ MV_SATR_SSCG_DISABLE,	       0x00000002,	      1,		     0	      },
+	{ MV_SATR_I2C0_Serial_ROM,     0x00000001,	      0,		     0	      },
+	{ MV_SATR_External_CPU_Reset,  0x0,		      0,		     0	      },        /* omriii : check with max the relevance of these fields */
+	{ MV_SATR_External_CORE_Reset, 0x0,		      0,		     0	      },        /* omriii : check with max the relevance of these fields */
+	{ MV_SATR_BOOT_DEVICE,	       0X1F8,		      3,		     0	      },
+	{ MV_SATR_CPU_PLL_XTAL_BYPASS, 0x00000200,	      9,		     0	      },
+	{ MV_SATR_PEX0_CLOCK,	       0x00000400,	      10,		     0	      },
+	{ MV_SATR_PEX1_CLOCK,	       0x00000800,	      11,		     0	      },
+	{ MV_SATR_REF_CLOCK_ENABLE,    0x00000004,	      2,		     0	      },
+	{ MV_SATR_TESTER_OPTIONS,      0x00080000,	      19,		     0	      },
+	{ MV_SATR_CPU0_ENDIANESS,      0x00001000,	      12,		     0	      },
+	{ MV_SATR_CPU0_NMFI,	       0x00002000,	      13,		     0	      },
+	{ MV_SATR_CPU0_THUMB,	       0x00004000,	      14,		     0	      },
+	{ MV_SATR_EFUSE_BYPASS,	       0x00020000,	      17,		     0	      },
+	{ MV_SATR_POR_BYPASS,	       0x00100000,	      20,		     0	      },
+	{ MV_SATR_BOARD_ID,	       0xF0,		      4,		     1	      },
+};
 
 /*******************************************************************************
  * AvantaLP FPGA board
@@ -122,59 +145,160 @@ MV_BOARD_INFO avanta_lp_fpga_board_info = {
 };
 
 /*******************************************************************************
- * AvanataLP customer board
- */
-#define AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS	0x000C0282
-#define AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS	0x00010305
+ * AvantaLP DB-88F6600 board */
+/*******************************************************************************/
+
+MV_BOARD_TWSI_INFO db88f6600InfoBoardTwsiDev[] = {
+	/* {{MV_BOARD_DEV_CLASS devClass, MV_U8 twsiDevAddr, MV_U8 twsiDevAddrType}} */
+	{ BOARD_DEV_TWSI_SATR,	      0x4C,	   ADDR7_BIT	       },
+	{ BOARD_DEV_TWSI_SATR,	      0x4D,	   ADDR7_BIT	       },
+	{ BOARD_DEV_TWSI_EEPROM,      0x54,	   ADDR7_BIT	       },
+	{ BOARD_DEV_TWSI_IO_EXPANDER, 0x21,	   ADDR7_BIT	       },
+	{ BOARD_DEV_TWSI_IO_EXPANDER, 0x22,	   ADDR7_BIT	       },       /*omriii : re-verify that 0x22 is also IO_EXPANDER for 6600 board */
+	{ BOARD_DEV_TWSI_IO_EXPANDER, 0x24,	   ADDR7_BIT	       },       /*omriii : re-verify that 0x22 is also IO_EXPANDER for 6600 board */
+};
+MV_BOARD_MAC_INFO db88f6600InfoBoardMacInfo[] = {
+	/* {{MV_BOARD_MAC_SPEED boardMacSpeed, MV_U8 boardEthSmiAddr}} */
+	{ BOARD_MAC_SPEED_AUTO, 0x8		     },
+	{ BOARD_MAC_SPEED_AUTO, 0x9		     },
+	{ N_A,			N_A		     }
+};
+MV_BOARD_MPP_TYPE_INFO db88f6600InfoBoardModTypeInfo[] = {
+	{
+		.boardMppTdm = MV_BOARD_AUTO,
+		.ethSataComplexOpt = 0x0,
+		.ethPortsMode = 0x0
+	}
+};
+
+MV_BOARD_MPP_GROUP_INFO db88f6600InfoBoardMppGroupConfig[] = {
+	{ {
+		  DB_88F6600_GROUP_0_TYPE,
+		  DB_88F6600_GROUP_1_TYPE,
+		  DB_88F6600_GROUP_2_TYPE,
+		  DB_88F6600_GROUP_3_TYPE,
+		  DB_88F6600_GROUP_4_TYPE,
+		  DB_88F6600_GROUP_5_TYPE,
+		  DB_88F6600_GROUP_6_TYPE,
+		  DB_88F6600_GROUP_7_TYPE,
+		  DB_88F6600_GROUP_8_TYPE,
+	  } }
+};
+
+MV_BOARD_INFO db88f6600_board_info = {
+	.boardName			= "DB-88F6600",
+	.numBoardMppTypeValue		= ARRSZ(db88f6600InfoBoardModTypeInfo),
+	.pBoardModTypeValue		= db88f6600InfoBoardModTypeInfo,
+	.numBoardMppGroupValue		= ARRSZ(db88f6600InfoBoardMppGroupConfig),
+	.pBoardMppGroupValue		= db88f6600InfoBoardMppGroupConfig,
+	.numBoardSerdesConfigValue	= 0,
+	.pBoardSerdesConfigValue	= 0,
+	.intsGppMaskLow			= 0,
+	.intsGppMaskMid			= 0,
+	.intsGppMaskHigh		= 0,
+	.numBoardDeviceIf		= 0,
+	.pDevCsInfo			= 0,
+	.numBoardSarInfo		= ARRSZ(boardSarInfo),
+	.pBoardSarInfo			= boardSarInfo,
+	.numBoardTwsiDev		= ARRSZ(db88f6600InfoBoardTwsiDev),
+	.pBoardTwsiDev			= db88f6600InfoBoardTwsiDev,
+	.numBoardMacInfo		= ARRSZ(db88f6600InfoBoardMacInfo),
+	.pBoardMacInfo			= db88f6600InfoBoardMacInfo,
+	.numBoardGppInfo		= 0,
+	.pBoardGppInfo			= 0,
+	.activeLedsNumber		= 0,
+	.pLedGppPin			= NULL,
+	.ledsPolarity			= 0,
+
+	/* PMU Power */
+	.pmuPwrUpPolarity		= 0,
+	.pmuPwrUpDelay			= 80000,
+
+	/* GPP values */
+	.gppOutEnValLow			= DB_88F6600_GPP_OUT_ENA_LOW,
+	.gppOutEnValMid			= DB_88F6600_GPP_OUT_ENA_MID,
+	.gppOutEnValHigh		= DB_88F6600_GPP_OUT_ENA_HIGH,
+	.gppOutValLow			= DB_88F6600_GPP_OUT_VAL_LOW,
+	.gppOutValMid			= DB_88F6600_GPP_OUT_VAL_MID,
+	.gppOutValHigh			= DB_88F6600_GPP_OUT_VAL_HIGH,
+	.gppPolarityValLow		= DB_88F6600_GPP_POL_LOW,
+	.gppPolarityValMid		= DB_88F6600_GPP_POL_MID,
+	.gppPolarityValHigh		= DB_88F6600_GPP_POL_HIGH,
+
+	/* TDM */
+	.numBoardTdmInfo		= {},
+	.pBoardTdmInt2CsInfo		= {},
+	.boardTdmInfoIndex		= -1,
+
+	.pBoardSpecInit			= NULL,
+
+	/* NAND init params */
+	.nandFlashReadParams		= 0,
+	.nandFlashWriteParams		= 0,
+	.nandFlashControl		= 0,
+	/* NOR init params */
+	.norFlashReadParams		= 0,
+	.norFlashWriteParams		= 0,
+	/* Enable modules auto-detection. */
+	.moduleAutoDetect		= MV_TRUE
+};
+
+/*******************************************************************************
+* AvanataLP customer board
+*******************************************************************************/
+
+#define AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS       0x000C0282
+#define AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS      0x00010305
 /*NAND care support for small page chips*/
-#define AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL		0x01c00543
+#define AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL           0x01c00543
 
-#define AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS	0x403E07CF
-#define AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS	0x000F0F0F
+#define AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS        0x403E07CF
+#define AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS       0x000F0F0F
 
 MV_BOARD_MAC_INFO avanta_lp_customerInfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
-	{BOARD_MAC_SPEED_AUTO, 0x10,0x0},
-	{BOARD_MAC_SPEED_AUTO, 0x11,0x0},
-	{BOARD_MAC_SPEED_AUTO, 0x12,0x0},
-	{BOARD_MAC_SPEED_AUTO, 0x13,0x0}
+	{ BOARD_MAC_SPEED_AUTO, 0x10, 0x0 },
+	{ BOARD_MAC_SPEED_AUTO, 0x11, 0x0 },
+	{ BOARD_MAC_SPEED_AUTO, 0x12, 0x0 },
+	{ BOARD_MAC_SPEED_AUTO, 0x13, 0x0 }
 };
 
-MV_BOARD_MODULE_TYPE_INFO avanta_lp_customerInfoBoardModTypeInfo[] = {
+MV_BOARD_MPP_TYPE_INFO avanta_lp_customerInfoBoardModTypeInfo[] = {
 	{
-		.boardMppMod		= MV_BOARD_AUTO,
-		.boardOtherMod		= MV_BOARD_NONE
+		.boardMppTdm = MV_BOARD_AUTO,
+		.ethSataComplexOpt = 0x0,
+		.ethPortsMode = 0x0
 	}
 };
 
 MV_BOARD_GPP_INFO avanta_lp_customerInfoBoardGppInfo[] = {
 	/* {{MV_BOARD_GPP_CLASS	devClass, MV_U8	gppPinNum}} */
-	{BOARD_GPP_RESET, 21}
+	{ BOARD_GPP_RESET, 21 }
 };
 
 MV_DEV_CS_INFO avanta_lp_customerInfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
-	{SPI_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8} /* SPI DEV */
+	{ SPI_CS0, N_A, BOARD_DEV_SPI_FLASH, 8, 8 } /* SPI DEV */
 #endif
 };
 
 MV_BOARD_MPP_INFO avanta_lp_customerInfoBoardMppConfigValue[] = {
 	{ {
-	AVANTA_LP_CUSTOMER_MPP0_7,
-	AVANTA_LP_CUSTOMER_MPP8_15,
-	AVANTA_LP_CUSTOMER_MPP16_23,
-	AVANTA_LP_CUSTOMER_MPP24_31,
-	AVANTA_LP_CUSTOMER_MPP32_39,
-	AVANTA_LP_CUSTOMER_MPP40_47,
-	AVANTA_LP_CUSTOMER_MPP48_55,
-	AVANTA_LP_CUSTOMER_MPP56_63,
-	AVANTA_LP_CUSTOMER_MPP64_67,
-	} }
+		  AVANTA_LP_CUSTOMER_MPP0_7,
+		  AVANTA_LP_CUSTOMER_MPP8_15,
+		  AVANTA_LP_CUSTOMER_MPP16_23,
+		  AVANTA_LP_CUSTOMER_MPP24_31,
+		  AVANTA_LP_CUSTOMER_MPP32_39,
+		  AVANTA_LP_CUSTOMER_MPP40_47,
+		  AVANTA_LP_CUSTOMER_MPP48_55,
+		  AVANTA_LP_CUSTOMER_MPP56_63,
+		  AVANTA_LP_CUSTOMER_MPP64_67,
+	  } }
 };
 
 MV_SERDES_CFG avanta_lp_customerInfoBoardSerdesConfigValue[] = {
-	{ /* default */
+	{       /* default */
 		MV_TRUE,
 		0x00223001,
 		0x11111111,
@@ -184,7 +308,7 @@ MV_SERDES_CFG avanta_lp_customerInfoBoardSerdesConfigValue[] = {
 		PEX_BUS_MODE_X4,
 		0x00000030
 	},
-	{ /* Switch module */
+	{       /* Switch module */
 		MV_TRUE,
 		0x33320201,
 		0x11111111,
@@ -197,42 +321,42 @@ MV_SERDES_CFG avanta_lp_customerInfoBoardSerdesConfigValue[] = {
 };
 
 MV_BOARD_INFO avanta_lp_customer_board_info = {
-	.boardName			= "AvantaLP-CUSTOMER",
-	.numBoardMppTypeValue		= ARRSZ(avanta_lp_customerInfoBoardModTypeInfo),
-	.pBoardModTypeValue		= avanta_lp_customerInfoBoardModTypeInfo,
-	.numBoardMppConfigValue		= ARRSZ(avanta_lp_customerInfoBoardMppConfigValue),
-	.pBoardMppConfigValue		= avanta_lp_customerInfoBoardMppConfigValue,
-	.numBoardSerdesConfigValue	= ARRSZ(avanta_lp_customerInfoBoardSerdesConfigValue),
-	.pBoardSerdesConfigValue	= avanta_lp_customerInfoBoardSerdesConfigValue,
-	.intsGppMaskLow			= 0,
-	.intsGppMaskMid			= 0,
-	.intsGppMaskHigh		= 0,
-	.numBoardDeviceIf		= ARRSZ(avanta_lp_customerInfoBoardDeCsInfo),
-	.pDevCsInfo			= avanta_lp_customerInfoBoardDeCsInfo,
-	.numBoardTwsiDev		= 0,
-	.pBoardTwsiDev			= NULL,
-	.numBoardMacInfo		= ARRSZ(avanta_lp_customerInfoBoardMacInfo),
-	.pBoardMacInfo			= avanta_lp_customerInfoBoardMacInfo,
-	.numBoardGppInfo		= ARRSZ(avanta_lp_customerInfoBoardGppInfo),
-	.pBoardGppInfo			= avanta_lp_customerInfoBoardGppInfo,
-	.activeLedsNumber		= 0,
-	.pLedGppPin			= NULL,
-	.ledsPolarity			= 0,
+	.boardName				= "AvantaLP-CUSTOMER",
+	.numBoardMppTypeValue			= ARRSZ(avanta_lp_customerInfoBoardModTypeInfo),
+	.pBoardModTypeValue			= avanta_lp_customerInfoBoardModTypeInfo,
+	.numBoardMppConfigValue			= ARRSZ(avanta_lp_customerInfoBoardMppConfigValue),
+	.pBoardMppConfigValue			= avanta_lp_customerInfoBoardMppConfigValue,
+	.numBoardSerdesConfigValue		= ARRSZ(avanta_lp_customerInfoBoardSerdesConfigValue),
+	.pBoardSerdesConfigValue		= avanta_lp_customerInfoBoardSerdesConfigValue,
+	.intsGppMaskLow				= 0,
+	.intsGppMaskMid				= 0,
+	.intsGppMaskHigh			= 0,
+	.numBoardDeviceIf			= ARRSZ(avanta_lp_customerInfoBoardDeCsInfo),
+	.pDevCsInfo				= avanta_lp_customerInfoBoardDeCsInfo,
+	.numBoardTwsiDev			= 0,
+	.pBoardTwsiDev				= NULL,
+	.numBoardMacInfo			= ARRSZ(avanta_lp_customerInfoBoardMacInfo),
+	.pBoardMacInfo				= avanta_lp_customerInfoBoardMacInfo,
+	.numBoardGppInfo			= ARRSZ(avanta_lp_customerInfoBoardGppInfo),
+	.pBoardGppInfo				= avanta_lp_customerInfoBoardGppInfo,
+	.activeLedsNumber			= 0,
+	.pLedGppPin				= NULL,
+	.ledsPolarity				= 0,
 
 	/* PMU Power */
-	.pmuPwrUpPolarity		= 0,
-	.pmuPwrUpDelay			= 80000,
+	.pmuPwrUpPolarity			= 0,
+	.pmuPwrUpDelay				= 80000,
 
 	/* GPP values */
-	.gppOutEnValLow			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW,
-	.gppOutEnValMid			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID,
-	.gppOutEnValHigh		= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH,
-	.gppOutValLow			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW,
-	.gppOutValMid			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID,
-	.gppOutValHigh			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH,
-	.gppPolarityValLow		= AVANTA_LP_CUSTOMER_GPP_POL_LOW,
-	.gppPolarityValMid		= AVANTA_LP_CUSTOMER_GPP_POL_MID,
-	.gppPolarityValHigh		= AVANTA_LP_CUSTOMER_GPP_POL_HIGH,
+	.gppOutEnValLow				= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW,
+	.gppOutEnValMid				= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID,
+	.gppOutEnValHigh			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH,
+	.gppOutValLow				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW,
+	.gppOutValMid				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID,
+	.gppOutValHigh				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH,
+	.gppPolarityValLow			= AVANTA_LP_CUSTOMER_GPP_POL_LOW,
+	.gppPolarityValMid			= AVANTA_LP_CUSTOMER_GPP_POL_MID,
+	.gppPolarityValHigh			= AVANTA_LP_CUSTOMER_GPP_POL_HIGH,
 
 	/* TDM */
 	.numBoardTdmInfo			= {},
@@ -240,12 +364,12 @@ MV_BOARD_INFO avanta_lp_customer_board_info = {
 	.boardTdmInfoIndex			= -1,
 
 	/* NAND init params */
-	.nandFlashReadParams		= AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS,
-	.nandFlashWriteParams		= AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS,
-	.nandFlashControl		= AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL,
+	.nandFlashReadParams			= AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS,
+	.nandFlashWriteParams			= AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS,
+	.nandFlashControl			= AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL,
 	/* NOR init params */
-	.norFlashReadParams		= AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS,
-	.norFlashWriteParams		= AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS
+	.norFlashReadParams			= AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS,
+	.norFlashWriteParams			= AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS
 };
 
 /*
@@ -253,4 +377,5 @@ MV_BOARD_INFO avanta_lp_customer_board_info = {
  */
 MV_BOARD_INFO *boardInfoTbl[] = {
 	&avanta_lp_fpga_board_info,
-};
+	&db88f6600_board_info,
+};
\ No newline at end of file
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
index 0269109..dd5e95d 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -67,48 +67,93 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 #include "mvSysHwConfig.h"
 
-/* I2C bus addresses TODO - take from board design */
-#define MV_BOARD_DIMM0_I2C_ADDR			0x56
-#define MV_BOARD_DIMM0_I2C_ADDR_TYPE 		ADDR7_BIT
-#define MV_BOARD_DIMM1_I2C_ADDR			0x57
-#define MV_BOARD_DIMM1_I2C_ADDR_TYPE 		ADDR7_BIT
-#define MV_BOARD_DIMM_I2C_CHANNEL		0x0
+/* I2C bus addresses TODO (omriii) - take from board design */
+#define MV_BOARD_DIMM0_I2C_ADDR                 0x56
+#define MV_BOARD_DIMM0_I2C_ADDR_TYPE            ADDR7_BIT
+#define MV_BOARD_DIMM1_I2C_ADDR                 0x57
+#define MV_BOARD_DIMM1_I2C_ADDR_TYPE            ADDR7_BIT
+#define MV_BOARD_DIMM_I2C_CHANNEL               0x0
 
 /* Board specific configuration */
 /* ============================ */
+#ifndef MV_ASMLANGUAGE
+/* New board ID numbers */
+
+typedef enum _mvBoardId {
+	BOARD_ID_BASE,
+	MV_BOARD_ID_AVANTA_LP_FPGA,
+	DB_6660_ID,
+	RD_6660_ID,
+	DB_6650_ID,
+	RD_6650_ID,
+	MV_MAX_BOARD_ID
+} MV_BOARD_ID;
+
+#define MV_INVALID_BOARD_ID             0xFFFFFFFF
 
 /*******************************************************************************
- * AvanataLP customer board
+ * AvantaLP DB-88F6600 board */
+/******************************************************************************
+   MPP#			DEFAULT UNIT		        MPP Values (respectively)
+   -----------------------------------------------------------------------------------
+   0-13			Boot:Nand Flash                         (1)
+   14-15			I2C0					(2)
+   16-17			UART					(2)
+   18,20,22,23,39	TDM :   Lantiq					(3)
+   24-25			GbE : GE1				(2)
+   36,41,44,45		PON					(2,2,2,1)
+   37-38			SMI Management: Switch			(5)
+   39			REF_CLK_OUT				(4)
+   42			DYING_GASP (Power off signal)		(2)
+   43			SATA_PRESENT_ACTIVEn			(2)
+   46-57			Port 0 connected to: Switch		(2)
+   58-64			LED_MATRIX				(4)
  */
-#define AVANTA_LP_CUSTOMER_MPP0_7		0x00000000
-#define AVANTA_LP_CUSTOMER_MPP8_15		0x00000000
-#define AVANTA_LP_CUSTOMER_MPP16_23		0x33000000
-#define AVANTA_LP_CUSTOMER_MPP24_31		0x11000000
-#define AVANTA_LP_CUSTOMER_MPP32_39		0x11111111
-#define AVANTA_LP_CUSTOMER_MPP40_47		0x00221100
-#define AVANTA_LP_CUSTOMER_MPP48_55		0x00000003
-#define AVANTA_LP_CUSTOMER_MPP56_63		0x00000000
-#define AVANTA_LP_CUSTOMER_MPP64_67		0x00000000
-
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW	0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID	0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH	0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW	0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID	0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH	0x0
-#define AVANTA_LP_CUSTOMER_GPP_POL_LOW		0x0
-#define AVANTA_LP_CUSTOMER_GPP_POL_MID		0x0
-#define AVANTA_LP_CUSTOMER_GPP_POL_HIGH		0x0
 
-/* New board ID numbers */
-#define BOARD_ID_BASE				0x0
-#define MV_BOARD_ID_AVANTA_LP_FPGA		(BOARD_ID_BASE)
-#define DB_6660_ID				(MV_BOARD_ID_AVANTA_LP_FPGA+1)
-#define RD_6660_ID				(DB_6660_ID+1)
-#define DB_6650_ID				(RD_6660_ID+1)
-#define RD_6650_ID 				(DB_6650_ID+1)
-#define MV_MAX_BOARD_ID				(RD_6650_ID+1)
-#define MV_INVALID_BOARD_ID			0xFFFFFFFF
+/* default MPP Types */
+#define DB_88F6600_GROUP_0_TYPE         NAND_BOOT_V2
+#define DB_88F6600_GROUP_1_TYPE         NAND_BOOT_V2
+#define DB_88F6600_GROUP_2_TYPE         TDM_LQ_UNIT
+#define DB_88F6600_GROUP_3_TYPE         GE1_UNIT
+#define DB_88F6600_GROUP_4_TYPE         GE1_CPU_SMI_CTRL_TDM_LQ_UNIT
+#define DB_88F6600_GROUP_5_TYPE         SWITCH_P4_PON_TX_FAULT
+#define DB_88F6600_GROUP_6_TYPE         SWITCH_P4
+#define DB_88F6600_GROUP_7_TYPE         SWITCH_P4_LED_MATRIX
+#define DB_88F6600_GROUP_8_TYPE         LED_MATRIX_PTP
+
+#define DB_88F6600_GPP_OUT_ENA_LOW      0x0
+#define DB_88F6600_GPP_OUT_ENA_MID      0x0
+#define DB_88F6600_GPP_OUT_ENA_HIGH     0x0
+#define DB_88F6600_GPP_OUT_VAL_LOW      0x0
+#define DB_88F6600_GPP_OUT_VAL_MID      0x0
+#define DB_88F6600_GPP_OUT_VAL_HIGH     0x0
+#define DB_88F6600_GPP_POL_LOW          0x0
+#define DB_88F6600_GPP_POL_MID          0x0
+#define DB_88F6600_GPP_POL_HIGH         0x0
 
-
-#endif /* __INCmvBoardEnvSpech */
+/*******************************************************************************
+* AvanataLP customer board
+*******************************************************************************/
+#define AVANTA_LP_CUSTOMER_MPP0_7               0x00000000
+#define AVANTA_LP_CUSTOMER_MPP8_15              0x00000000
+#define AVANTA_LP_CUSTOMER_MPP16_23             0x33000000
+#define AVANTA_LP_CUSTOMER_MPP24_31             0x11000000
+#define AVANTA_LP_CUSTOMER_MPP32_39             0x11111111
+#define AVANTA_LP_CUSTOMER_MPP40_47             0x00221100
+#define AVANTA_LP_CUSTOMER_MPP48_55             0x00000003
+#define AVANTA_LP_CUSTOMER_MPP56_63             0x00000000
+#define AVANTA_LP_CUSTOMER_MPP64_67             0x00000000
+
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW      0x0
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID      0x0
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH     0x0
+#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW      0x0
+#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID      0x0
+#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH     0x0
+#define AVANTA_LP_CUSTOMER_GPP_POL_LOW          0x0
+#define AVANTA_LP_CUSTOMER_GPP_POL_MID          0x0
+#define AVANTA_LP_CUSTOMER_GPP_POL_HIGH         0x0
+
+#endif  /* MV_ASMLANGUAGE */
+
+#endif  /* __INCmvBoardEnvSpech */
\ No newline at end of file
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
index 7b7011b..542d956 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.c
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -105,7 +105,7 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 /* defines  */
 #undef MV_DEBUG
 #ifdef MV_DEBUG
-#define DB(x)	x
+#define DB(x)   x
 #else
 #define DB(x)
 #endif
@@ -114,11 +114,11 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  * Control Environment internal data structure
  * Note: it should be initialized dynamically only once.
  */
-#define MV_INVALID_CTRL_REV	0xff
+#define MV_INVALID_CTRL_REV     0xff
 
 typedef struct _ctrlEnvInfo {
-	MV_U16	ctrlModel;
-	MV_U8	ctrlRev;
+	MV_U16 ctrlModel;
+	MV_U8 ctrlRev;
 } CTRL_ENV_INFO;
 
 CTRL_ENV_INFO ctrlEnvInfo = {};
@@ -145,6 +145,7 @@ MV_STATUS mvCtrlUpdatePexId(MV_VOID)
 {
 	return MV_ERROR;
 }
+
 #endif
 
 /*******************************************************************************
@@ -170,26 +171,26 @@ MV_STATUS mvCtrlUpdatePexId(MV_VOID)
 *******************************************************************************/
 MV_STATUS mvCtrlEnvInit(MV_VOID)
 {
-#if !defined(CONFIG_MACH_AVANTA_LP_FPGA_FPGA)
-	MV_U32 mppGroup;
-	MV_U32 mppVal;
+	MV_BOARD_SPEC_INIT *boardSpec;
 	MV_U32 i, gppMask;
 
-	/* Disable MBus Error Propagation */
-	MV_REG_BIT_RESET(SOC_COHERENCY_FABRIC_CTRL_REG, BIT8);
-
-	/* Use Background sync barrier (polling) for I/O cache coherency */
-	MV_REG_BIT_SET(SOC_CIB_CTRL_CFG_REG, BIT8);
-
-	/* MPP Init - scan which modeule is connected */
-	mvBoardMppModulesScan();
-
-	/* Read MPP config values from board level and write MPP options to HW */
-	for (mppGroup = 0; mppGroup < MV_MPP_MAX_GROUP; mppGroup++) {
-		mppVal = mvBoardMppGet(mppGroup);	/* get pre-defined values */
-		MV_REG_WRITE(mvCtrlMppRegGet(mppGroup), mppVal);
+	/* Specific board initializations  ( from board->pBoardSpecInit ) omriii : see if can remove all these inits*/
+	boardSpec = mvBoardSpecInitGet();
+	if (boardSpec != NULL) {
+		MV_U32 reg;
+		i = 0;
+		while (boardSpec[i].reg != TBL_TERM) {
+			reg = MV_REG_READ(boardSpec[i].reg);
+			reg &= ~boardSpec[i].mask;
+			reg |= (boardSpec[i].val & boardSpec[i].mask);
+			MV_REG_WRITE(boardSpec[i].reg, reg);
+			i++;
+		}
 	}
 
+	mvBoardConfigInit();
+	mvBoardConfigWrite(); /* write MPP's config and Board general config */
+
 	/* disable all GPIO interrupts */
 	for (i = 0; i < MV_GPP_MAX_GROUP; i++) {
 		MV_REG_WRITE(GPP_INT_MASK_REG(i), 0x0);
@@ -203,20 +204,10 @@ MV_STATUS mvCtrlEnvInit(MV_VOID)
 	/* Set gpp interrupts as needed */
 	for (i = 0; i < MV_GPP_MAX_GROUP; i++) {
 		gppMask = mvBoardGpioIntMaskGet(i);
-		mvGppTypeSet(i, gppMask , (MV_GPP_IN & gppMask));
-		mvGppPolaritySet(i, gppMask , (MV_GPP_IN_INVERT & gppMask));
+		mvGppTypeSet(i, gppMask, (MV_GPP_IN & gppMask));
+		mvGppPolaritySet(i, gppMask, (MV_GPP_IN_INVERT & gppMask));
 	}
 
-	/* Scan for other modules (SERDES/LVDS/...) */
-	mvBoardOtherModulesScan();
-
-	/* Update interfaces configuration based on above scan */
-	if (MV_OK != mvCtrlSerdesPhyConfig())
-		mvOsPrintf("%s: Can't init some or all SERDES lanes\n", __func__);
-
-	mvOsDelay(100);
-#endif
-
 	return MV_OK;
 }
 
@@ -226,7 +217,7 @@ MV_STATUS mvCtrlEnvInit(MV_VOID)
 * DESCRIPTION: Write S@R configuration Field
 *
 * INPUT: satrField - Field description enum
-*  	 val       - value to write (if write action requested)
+*        val       - value to write (if write action requested)
 *
 * OUTPUT: None
 *
@@ -236,20 +227,22 @@ MV_STATUS mvCtrlEnvInit(MV_VOID)
 *       else if write failed - returns MV_ERROR
 *
 *******************************************************************************/
-MV_U32 mvCtrlSatRWrite(MV_SATR_TYPE_ID satrField ,MV_U8 val)
+MV_U32 mvCtrlSatRWrite(MV_SATR_TYPE_ID satrField, MV_U8 val)
 {
-	if (satrField<MV_SATR_MAX_OPTION) {
+	if (satrField < MV_SATR_MAX_OPTION) {
 		//TwsiSATRWrite (satrField , val);
-		satrOptionsConfig[satrField]=val;      /* simulate dummy write instead of TWSI - will be removed */
+		satrOptionsConfig[satrField] = val;      /* simulate dummy write instead of TWSI - will be removed */
 		//if ( val==TwsiSATRRead (satrField) )
 
-		if(satrOptionsConfig[satrField]==val)	 	/* omriii - replace ifs with if(TWSIRead==val) */
-			return (satrOptionsConfig[satrField]=val);
+		if (satrOptionsConfig[satrField] == val)        /* omriii - replace ifs with if(TWSIRead==val) */
+			return satrOptionsConfig[satrField] = val;
 		else
 			return MV_ERROR;
-	}
+	}else
+		return MV_ERROR;
 
 }
+
 /*******************************************************************************
 * mvCtrlSatRRead
 *
@@ -266,16 +259,19 @@ MV_U32 mvCtrlSatRWrite(MV_SATR_TYPE_ID satrField ,MV_U8 val)
 *******************************************************************************/
 MV_U32 mvCtrlSatRRead(MV_SATR_TYPE_ID satrField)
 {
-	if (satrField<MV_SATR_MAX_OPTION)
+	if (satrField < MV_SATR_MAX_OPTION)
 		return satrOptionsConfig[satrField];
+	else
+		return MV_ERROR;
 }
+
 /*******************************************************************************
 * mvCtrlSatrInit
 *
 * DESCRIPTION: Initialize S@R configuration
-* 		1. initialize all S@R fields with 0xFF
-* 		2. read boardID and according to ID, read relevant S@R fields(using TWSI/EEPROM)
-*	 	**from this point, all S@R reads will be done using mvCtrlSatRConfig function**
+*               1. initialize all S@R fields with 0xFF
+*               2. read boardID and according to ID, read relevant S@R fields(using TWSI/EEPROM)
+*	        **from this point, all S@R reads will be done using mvCtrlSatRRead/Write functions**
 *
 * INPUT:  None
 *
@@ -286,24 +282,28 @@ MV_U32 mvCtrlSatRRead(MV_SATR_TYPE_ID satrField)
 *******************************************************************************/
 void mvCtrlSatrInit(void)
 {
-	int i=0;
+	MV_U8 tempVal = 0;
+	MV_BOARD_SAR_INFO info;
+	int i = 0;
+
 	/* initialize all S@R fields to -1 (MV_ERROR) */
-	for (i=0; i<MV_SATR_MAX_OPTION ; i++)
-		satrOptionsConfig[i]=MV_ERROR;
+	for (i = 0; i < MV_SATR_MAX_OPTION; i++)
+		satrOptionsConfig[i] = MV_ERROR;
 
 	/* detect board ID to determine which S@R fields are relevant */
-	//boardIDget
+	//boardID=mvBoardIdGet();
 
+	for (i = 0; i < MV_SATR_MAX_OPTION; i++) {
+		if ( MV_OK == mvBoardSarInfoGet(i, &info)) {
+			tempVal = (MV_REG_READ(MPP_SAMPLE_AT_RESET(info.regNum)) & (info.mask) >> info.offset);
+			satrOptionsConfig[info.sarid] = tempVal;
+		}
+	}
 
-	/* read S@R register / TWSI read and save them in satrOptionsConfig */
-	// if boardID==X
-	// TWSIwrite(...
-
-	/* temp: simulate dummy twsi initalizations */
-	printf("\nmvCtrlSatrDetect : simulate Detecting S@R (1,2,3,...)\n");
-	for (i=0; i<MV_SATR_MAX_OPTION ; i++)
-		satrOptionsConfig[i]=i%3;
-	/* temp: simulate dummy initalizations */
+	/*omriii: temp: simulate dummy twsi initalizations */
+	for (i = 0; i < MV_SATR_MAX_OPTION; i++)
+		satrOptionsConfig[i] = i % 3;
+	/*omriii temp: simulate dummy initalizations */
 }
 
 /*******************************************************************************
@@ -355,6 +355,7 @@ MV_U32 mvCtrlPexMaxIfGet(MV_VOID)
 {
 	return 1;
 }
+
 #endif
 
 /*******************************************************************************
@@ -402,6 +403,7 @@ MV_U32 mvCtrlPciMaxIfGet(MV_VOID)
 {
 	return 1;
 }
+
 #endif
 #endif
 
@@ -476,6 +478,7 @@ MV_U32 mvCtrlSataMaxPortGet(MV_VOID)
 {
 	return 0;
 }
+
 #endif
 
 #if defined(MV_INCLUDE_XOR)
@@ -543,6 +546,7 @@ MV_U32 mvCtrlUsbMaxGet(void)
 {
 	return 0;
 }
+
 #endif
 
 #if defined(MV_INCLUDE_LEGACY_NAND)
@@ -565,6 +569,7 @@ MV_U32 mvCtrlNandSupport(MV_VOID)
 {
 	return 0; /* kostaz: what's that ??? */
 }
+
 #endif
 
 #if defined(MV_INCLUDE_SDIO)
@@ -587,6 +592,7 @@ MV_U32 mvCtrlSdioSupport(MV_VOID)
 {
 	return 0; /* kostaz: what's that ??? */
 }
+
 #endif
 
 #if defined(MV_INCLUDE_TDM)
@@ -634,7 +640,7 @@ MV_U32 mvCtrlTdmMaxGet(MV_VOID)
 * mvCtrlTdmUnitTypeGet
 *
 * DESCRIPTION:
-*	Return the TDM unit type being compiled in.
+*	Scan all relevant TDM units, and return the TDM unit type being used (if any)
 *
 * INPUT:
 *       None.
@@ -646,31 +652,39 @@ MV_U32 mvCtrlTdmMaxGet(MV_VOID)
 *	The TDM unit type.
 *
 *******************************************************************************/
-MV_UNIT_ID mvCtrlTdmUnitTypeGet(MV_VOID)
+MV_TDM_UNIT_TYPE mvCtrlTdmUnitTypeGet(MV_VOID)
 {
-	return TDM_UNIT_32CH; /* kostaz: FIXME */
+	return TDM_LQ_UNIT; /* omriii: FIXME */
+
+/*	implement a scan process for all 4 units, and return the enum for the correct unit being used
+ *      TDM_LQ_UNIT
+        TDM_SL_UNIT
+        TDM_ZL_UNIT
+        TDM_EXT_UNIT
+ */
 }
 
 /*******************************************************************************
-* mvCtrlTdmUnitIrqGet
-*
-* DESCRIPTION:
-*	Return the TDM unit IRQ number depending on the TDM unit compilation
-*	options.
-*
-* INPUT:
-*	None.
-*
-* OUTPUT:
-*	None.
-*
-* RETURN:
-*	None.
-******************************************************************************/
+ * mvCtrlTdmUnitIrqGet
+ *
+ * DESCRIPTION:
+ *	Return the TDM unit IRQ number depending on the TDM unit compilation
+ *	options.
+ *
+ * INPUT:
+ *	None.
+ *
+ * OUTPUT:
+ *	None.
+ *
+ * RETURN:
+ *	None.
+ ******************************************************************************/
 MV_U32 mvCtrlTdmUnitIrqGet(MV_VOID)
 {
 	return MV_TDM_IRQ_NUM;
 }
+
 #endif /* MV_INCLUDE_TDM */
 
 /*******************************************************************************
@@ -711,7 +725,7 @@ MV_U16 mvCtrlModelGet(MV_VOID)
 	if ((reg & PMC_PEXSTOPCLOCK_MASK(0)) == PMC_PEXSTOPCLOCK_STOP(0))
 		MV_REG_WRITE(POWER_MNG_CTRL_REG, reg);
 
-	ci->ctrlModel = (MV_U16) ((devId >> 16) & 0xFFFF);
+	ci->ctrlModel = (MV_U16)((devId >> 16) & 0xFFFF);
 	return ci->ctrlModel;
 }
 
@@ -749,7 +763,7 @@ MV_U8 mvCtrlRevGet(MV_VOID)
 #endif
 
 	revNum = (MV_U8)MV_REG_READ(PEX_CFG_DIRECT_ACCESS(
-				0, PCI_CLASS_CODE_AND_REVISION_ID));
+					    0, PCI_CLASS_CODE_AND_REVISION_ID));
 
 #if defined(MV_INCLUDE_CLK_PWR_CNTRL)
 	/* Return to power off state */
@@ -808,7 +822,7 @@ MV_STATUS mvCtrlNameGet(char *pNameBuff)
 *******************************************************************************/
 MV_U32 mvCtrlModelRevGet(MV_VOID)
 {
-	return ((mvCtrlModelGet() << 16) | mvCtrlRevGet());
+	return (mvCtrlModelGet() << 16) | mvCtrlRevGet();
 }
 
 /*******************************************************************************
@@ -886,6 +900,7 @@ static MV_VOID mvCtrlPexAddrDecShow(MV_VOID)
 {
 	/* kostaz: FIXME: will be filled for AvantaLP */
 }
+
 #endif
 
 /*******************************************************************************
@@ -914,7 +929,6 @@ static void mvUnitAddrDecShow(MV_U8 numUnits, MV_UNIT_ID unitId,
 	MV_U32 unit, i;
 
 	for (unit = 0; unit < numUnits; unit++) {
-
 		if (MV_FALSE == mvCtrlPwrClckGet(unitId, unit))
 			continue;
 		mvOsOutput("\n");
@@ -1023,29 +1037,29 @@ MV_U32 ctrlSizeToReg(MV_U32 size, MV_U32 alignment)
 	}
 
 	/* Take out the "alignment" portion out of the size parameter */
-	alignment--;		/* Now the alignmet is a sequance of '1' (e.g. 0xffff)          */
+	alignment--;                    /* Now the alignmet is a sequance of '1' (e.g. 0xffff)          */
 	/* and size is 0x1000000 (16MB) for example     */
-	while (alignment & 1) {	/* Check that alignmet LSB is set       */
-		size = (size >> 1);	/* If LSB is set, move 'size' one bit to right      */
+	while (alignment & 1) {         /* Check that alignmet LSB is set       */
+		size = (size >> 1);     /* If LSB is set, move 'size' one bit to right      */
 		alignment = (alignment >> 1);
 	}
 
 	/* If after the alignment first '0' was met we still have '1' in                */
 	/* it then aligment is invalid (not power of 2)                                 */
 	if (alignment) {
-		DB(mvOsPrintf("ctrlSizeToReg: ERR. Alignment parameter 0x%x invalid.\n", (MV_U32) alignment));
+		DB(mvOsPrintf("ctrlSizeToReg: ERR. Alignment parameter 0x%x invalid.\n", (MV_U32)alignment));
 		return -1;
 	}
 
 	/* Now the size is shifted right according to aligment: 0x0100                  */
-	size--;			/* Now the size is a sequance of '1': 0x00ff                    */
+	size--;                 /* Now the size is a sequance of '1': 0x00ff                    */
 	retVal = size;
 
 	/* Check that LSB to MSB is sequence of 1's followed by sequence of 0's         */
-	while (size & 1)	/* Check that LSB is set    */
-		size = (size >> 1);	/* If LSB is set, move one bit to the right         */
+	while (size & 1)                /* Check that LSB is set    */
+		size = (size >> 1);     /* If LSB is set, move one bit to the right         */
 
-	if (size) {		/* Sequance of 1's is over. Check that we have no other 1's         */
+	if (size) {                     /* Sequance of 1's is over. Check that we have no other 1's         */
 		DB(mvOsPrintf("ctrlSizeToReg: ERR. Size parameter 0x%x invalid.\n", size));
 		return -1;
 	}
@@ -1076,21 +1090,21 @@ MV_U32 ctrlRegToSize(MV_U32 regSize, MV_U32 alignment)
 	MV_U32 temp;
 
 	/* Check that LSB to MSB is sequence of 1's followed by sequence of 0's         */
-	temp = regSize;		/* Now the size is a sequance of '1': 0x00ff            */
+	temp = regSize;                 /* Now the size is a sequance of '1': 0x00ff            */
 
-	while (temp & 1)	/* Check that LSB is set                                    */
-		temp = (temp >> 1);	/* If LSB is set, move one bit to the right         */
+	while (temp & 1)                /* Check that LSB is set                                    */
+		temp = (temp >> 1);     /* If LSB is set, move one bit to the right         */
 
-	if (temp) {		/* Sequance of 1's is over. Check that we have no other 1's         */
+	if (temp) {                     /* Sequance of 1's is over. Check that we have no other 1's         */
 		DB(mvOsPrintf("%s: ERR: Size parameter 0x%x invalid.\n", __func__, regSize));
 		return -1;
 	}
 
 	/* Check that aligment is a power of two                                        */
-	temp = alignment - 1;	/* Now the alignmet is a sequance of '1' (0xffff)          */
+	temp = alignment - 1;           /* Now the alignmet is a sequance of '1' (0xffff)          */
 
-	while (temp & 1)	/* Check that alignmet LSB is set                           */
-		temp = (temp >> 1);	/* If LSB is set, move 'size' one bit to right      */
+	while (temp & 1)                /* Check that alignmet LSB is set                           */
+		temp = (temp >> 1);     /* If LSB is set, move 'size' one bit to right      */
 
 	/* If after the 'temp' first '0' was met we still have '1' in 'temp'            */
 	/* then 'temp' is invalid (not power of 2)                                      */
@@ -1099,13 +1113,13 @@ MV_U32 ctrlRegToSize(MV_U32 regSize, MV_U32 alignment)
 		return -1;
 	}
 
-	regSize++;		/* Now the size is 0x0100                                       */
+	regSize++;              /* Now the size is 0x0100                                       */
 
 	/* Add in the "alignment" portion to the register size parameter                */
-	alignment--;		/* Now the alignmet is a sequance of '1' (e.g. 0xffff)          */
+	alignment--;                            /* Now the alignmet is a sequance of '1' (e.g. 0xffff)          */
 
-	while (alignment & 1) {	/* Check that alignmet LSB is set                       */
-		regSize = (regSize << 1);	/* LSB is set, move 'size' one bit left     */
+	while (alignment & 1) {                 /* Check that alignmet LSB is set                       */
+		regSize = (regSize << 1);       /* LSB is set, move 'size' one bit left     */
 		alignment = (alignment >> 1);
 	}
 
@@ -1154,6 +1168,90 @@ MV_U32 ctrlSizeRegRoundUp(MV_U32 size, MV_U32 alignment) /* kostaz: FIXME: remov
 }
 
 /*******************************************************************************
+* mvCtrlIsLantiqTDM
+*
+* DESCRIPTION:
+*       Check if device being uesd is lantiq TDM
+*
+* INPUT:
+*	None.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*       MV_TRUE if device boot from SPI.
+*******************************************************************************/
+MV_BOOL mvCtrlIsLantiqTDM(MV_VOID)
+{
+	/* implement Scan process */
+	return MV_TRUE;
+}
+
+/*******************************************************************************
+* mvCtrlIsZarlinkTDM
+*
+* DESCRIPTION:
+*       Check if device being used is Zarlink TDM
+*
+* INPUT:
+*	None.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*       MV_TRUE if device boot from SPI.
+*******************************************************************************/
+MV_BOOL mvCtrlIsZarlinkTDM(MV_VOID)
+{
+	/* implement Scan process */
+	return MV_FALSE;
+}
+
+/*******************************************************************************
+* mvCtrlIsSiliconLabsTDM
+*
+* DESCRIPTION:
+*       Check if device being used is Silicon Labs TDM
+*
+* INPUT:
+*	None.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*       MV_TRUE if device boot from SPI.
+*******************************************************************************/
+MV_BOOL mvCtrlIsSiliconLabsTDM(MV_VOID)
+{
+	/* implement Scan process */
+	return MV_FALSE;
+}
+
+/*******************************************************************************
+* mvCtrlIsExternalTDM
+*
+* DESCRIPTION:
+*       Check if device being used is the External TDM Unit
+*
+* INPUT:
+*	None.
+*
+* OUTPUT:
+*       None.
+*
+* RETURN:
+*       MV_TRUE if device boot from SPI.
+*******************************************************************************/
+MV_BOOL mvCtrlIsExternalTDM(MV_VOID)
+{
+	/* implement Scan process */
+	return MV_FALSE;
+}
+
+/*******************************************************************************
 * mvCtrlIsBootFromNOR
 *
 * DESCRIPTION:
@@ -1192,7 +1290,7 @@ MV_BOOL mvCtrlIsBootFromNOR(MV_VOID)
 *******************************************************************************/
 MV_BOOL mvCtrlIsBootFromSPI(MV_VOID)
 {
-	return MV_FALSE;
+	return MV_TRUE; // omriii : return to false
 }
 
 /*******************************************************************************
@@ -1303,19 +1401,18 @@ MV_VOID mvCtrlPwrClckSet(MV_UNIT_ID unitId, MV_U32 index, MV_BOOL enable)
 }
 
 /*******************************************************************************
-* mvCtrlPwrClckGet - Get Power State of specific Unit
-*
-* DESCRIPTION:
-*
-* INPUT:
-*
-* OUTPUT:
-*
-* RETURN:
-******************************************************************************/
+ * mvCtrlPwrClckGet - Get Power State of specific Unit
+ *
+ * DESCRIPTION:
+ *
+ * INPUT:
+ *
+ * OUTPUT:
+ *
+ * RETURN:
+ ******************************************************************************/
 MV_BOOL mvCtrlPwrClckGet(MV_UNIT_ID unitId, MV_U32 index)
 {
-	MV_U32 reg = MV_REG_READ(POWER_MNG_CTRL_REG);
 	MV_BOOL state = MV_TRUE;
 
 	/* Clock gating is not supported on FPGA */
@@ -1324,6 +1421,7 @@ MV_BOOL mvCtrlPwrClckGet(MV_UNIT_ID unitId, MV_U32 index)
 
 	switch (unitId) {
 #if defined(MV_INCLUDE_PEX)
+		MV_U32 reg = MV_REG_READ(POWER_MNG_CTRL_REG);
 	case PEX_UNIT_ID:
 		if ((reg & PMC_PEXSTOPCLOCK_MASK(index)) == PMC_PEXSTOPCLOCK_STOP(index))
 			state = MV_FALSE;
@@ -1479,23 +1577,23 @@ MV_VOID mvCtrlPwrMemSet(MV_UNIT_ID unitId, MV_U32 index, MV_BOOL enable)
 }
 
 /*******************************************************************************
-* mvCtrlPwrMemGet - Get Power State of memory on specific Unit
-*
-* DESCRIPTION:
-*
-* INPUT:
-*
-* OUTPUT:
-*
-* RETURN:
-******************************************************************************/
+ * mvCtrlPwrMemGet - Get Power State of memory on specific Unit
+ *
+ * DESCRIPTION:
+ *
+ * INPUT:
+ *
+ * OUTPUT:
+ *
+ * RETURN:
+ ******************************************************************************/
 MV_BOOL mvCtrlPwrMemGet(MV_UNIT_ID unitId, MV_U32 index)
 {
-	MV_U32 reg;
 	MV_BOOL state = MV_TRUE;
 
 	switch (unitId) {
 #if defined(MV_INCLUDE_PEX)
+		MV_U32 reg;
 	case PEX_UNIT_ID:
 		reg = MV_REG_READ(POWER_MNG_MEM_CTRL_REG(PMC_MCR_NUM_PEX));
 		if ((reg & PMC_PEXSTOPMEM_MASK(index)) == PMC_PEXSTOPMEM_STOP(index))
@@ -1574,6 +1672,7 @@ MV_BOOL mvCtrlPwrMemGet(MV_UNIT_ID unitId, MV_U32 index)
 
 	return state;
 }
+
 #else
 MV_VOID mvCtrlPwrClckSet(MV_UNIT_ID unitId, MV_U32 index, MV_BOOL enable)
 {
@@ -1584,6 +1683,7 @@ MV_BOOL mvCtrlPwrClckGet(MV_UNIT_ID unitId, MV_U32 index)
 {
 	return MV_TRUE;
 }
+
 #endif /* #if defined(MV_INCLUDE_CLK_PWR_CNTRL) */
 
 /*******************************************************************************
@@ -1611,6 +1711,7 @@ MV_U32 mvCtrlSerdesMaxLinesGet(MV_VOID)
 MV_U32 mvCtrlDDRBudWidth(MV_VOID)
 {
 	MV_U32 reg;
+
 	reg = MV_REG_READ(0x1400);
 
 	return (reg & 0x8000) ? 64 : 32;
@@ -1619,6 +1720,7 @@ MV_U32 mvCtrlDDRBudWidth(MV_VOID)
 MV_BOOL mvCtrlDDRThruXbar(MV_VOID)
 {
 	MV_U32 reg;
+
 	reg = MV_REG_READ(0x20184);
 
 	return (reg & 0x1) ? MV_FALSE : MV_TRUE;
@@ -1627,6 +1729,7 @@ MV_BOOL mvCtrlDDRThruXbar(MV_VOID)
 MV_BOOL mvCtrlDDRECC(MV_VOID)
 {
 	MV_U32 reg;
+
 	reg = MV_REG_READ(REG_SDRAM_CONFIG_ADDR);
 
 	return (reg & (0x1 << REG_SDRAM_CONFIG_ECC_OFFS)) ? MV_TRUE : MV_FALSE;
@@ -1653,4 +1756,4 @@ static const MV_U8 serdesCfg[][8] = SERDES_CFG;
 MV_STATUS mvCtrlSerdesPhyConfig(MV_VOID)
 {
 	return MV_ERROR;
-}
+}
\ No newline at end of file
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
index 1739183..77e0aae 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvLib.h
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	    this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+            this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -75,160 +75,152 @@ SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 #include "ctrlEnv/mvCtrlEnvAddrDec.h"
 
 typedef enum _mvSatRTypeID {
-	/* "Bios" Device */
+	// "Bios" Device
 	MV_SATR_CPU_FREQ,
 	MV_SATR_CORE_CLK_SELECT,
-	MV_SATR_CPU_NUM,
+	MV_SATR_CPU1_ENABLE,
 	MV_SATR_SSCG_DISABLE,
-	/* Jumpers  - change by removing Jumper. S@R will be changed by this option */
+	// Jumpers  - change by removing Jumper. S@R will be changed by this option
 	MV_SATR_I2C0_Serial_ROM,
 	MV_SATR_External_CPU_Reset,
 	MV_SATR_External_CORE_Reset,
-	/* DIP Switch - change by removing Switch. S@R will be changed by this option: */
+	// DIP Switch - change by removing Switch. S@R will be changed by this option:
 	MV_SATR_BOOT_DEVICE,
-	/* DPR's -modified by moving resistor with solderer. S@R will be changed by this */
+	// DPR's -modified by moving resistor with solderer. S@R will be changed by this
 	MV_SATR_CPU_PLL_XTAL_BYPASS,
-	MV_SATR_CPU_CONFIG,
-	MV_SATR_PCI_EXPRESS,
+	MV_SATR_CPU0_ENDIANESS,
+	MV_SATR_CPU0_NMFI,
+	MV_SATR_CPU0_THUMB,
+	MV_SATR_PEX0_CLOCK,
+	MV_SATR_PEX1_CLOCK,
 	MV_SATR_REF_CLOCK_ENABLE,
+	MV_SATR_EFUSE_BYPASS,
+	MV_SATR_POR_BYPASS,
 	MV_SATR_TESTER_OPTIONS,
+	MV_SATR_BOARD_ID,
 	MV_SATR_MAX_OPTION
 } MV_SATR_TYPE_ID;
 
 /* 0 for Auto scan mode, 1 for manual. */
-#define MV_INTERNAL_SWITCH_SMI_SCAN_MODE	0
+#define MV_INTERNAL_SWITCH_SMI_SCAN_MODE        0
 
 /* typedefs */
-typedef MV_STATUS(*MV_WIN_GET_FUNC_PTR)(MV_U32, MV_U32, MV_UNIT_WIN_INFO*);
+typedef MV_STATUS (*MV_WIN_GET_FUNC_PTR)(MV_U32, MV_U32, MV_UNIT_WIN_INFO*);
 
-/* This enumerator describes the possible HW cache coherency policies the   */
-/* controllers supports.                                                    */
+/* This enumerator describes the possible HW cache coherency policies the
+ * controllers supports.
+ */
 typedef enum _mvCachePolicy {
-    NO_COHERENCY,   /* No HW cache coherency support                        */
-    WT_COHERENCY,   /* HW cache coherency supported in Write Through policy */
-    WB_COHERENCY    /* HW cache coherency supported in Write Back policy    */
+	NO_COHERENCY,   /* No HW cache coherency support                        */
+	WT_COHERENCY,   /* HW cache coherency supported in Write Through policy */
+	WB_COHERENCY    /* HW cache coherency supported in Write Back policy    */
 } MV_CACHE_POLICY;
 
-
-/* The swapping is referred to a 64-bit words (as this is the controller    */
-/* internal data path width). This enumerator describes the possible        */
-/* data swap types. Below is an example of the data 0x0011223344556677      */
+/* The swapping is referred to a 64-bit words (as this is the controller
+ * internal data path width). This enumerator describes the possible
+ * data swap types. Below is an example of the data 0x0011223344556677
+ */
 typedef enum _mvSwapType {
-    MV_BYTE_SWAP,       /* Byte Swap                77 66 55 44 33 22 11 00 */
-    MV_NO_SWAP,         /* No swapping              00 11 22 33 44 55 66 77 */
-    MV_BYTE_WORD_SWAP,  /* Both byte and word swap  33 22 11 00 77 66 55 44 */
-    MV_WORD_SWAP,       /* Word swap                44 55 66 77 00 11 22 33 */
-    SWAP_TYPE_MAX	/* Delimiter for this enumerator                    */
+	MV_BYTE_SWAP,           /* Byte Swap                77 66 55 44 33 22 11 00 */
+	MV_NO_SWAP,             /* No swapping              00 11 22 33 44 55 66 77 */
+	MV_BYTE_WORD_SWAP,      /* Both byte and word swap  33 22 11 00 77 66 55 44 */
+	MV_WORD_SWAP,           /* Word swap                44 55 66 77 00 11 22 33 */
+	SWAP_TYPE_MAX           /* Delimiter for this enumerator                    */
 } MV_SWAP_TYPE;
 
+/*
+ * Define the different Ethernet complex sources for the RGMIIA/B and
+ * the FE/GE phy interfaces.
+ */
+
+/* Define the different Ethernet & Sata complex connection options */
+typedef enum {
+	MV_ETH_COMPLEX_GE_MAC0_SW_P6    =       0x1,
+	MV_ETH_COMPLEX_GE_MAC0_QUAD_PHY_P0 =    0x2,
+	MV_ETH_COMPLEX_GE_MAC0_RGMII0   =       0x4,
+	MV_ETH_COMPLEX_GE_MAC0_COMPHY_1 =       0x8,
+	MV_ETH_COMPLEX_GE_MAC0_COMPHY_2 =       0x10,
+	MV_ETH_COMPLEX_GE_MAC0_COMPHY_3 =       0x20,
+	MV_ETH_COMPLEX_GE_MAC1_SW_P4    =       0x40,
+	MV_ETH_COMPLEX_GE_MAC1_QUAD_PHY_P3 =    0x80,
+	MV_ETH_COMPLEX_GE_MAC1_RGMII1   =       0x100,
+	MV_ETH_COMPLEX_GE_MAC1_PON_ETH_SERDES = 0x200,
+	MV_ETH_COMPLEX_SW_P0_QUAD_PHY_P0 =      0x400,
+	MV_ETH_COMPLEX_SW_P3_QUAD_PHY_P3 =      0x800,
+	MV_ETH_COMPLEX_SW_P4_RGMII0     =       0x1000,
+	MV_ETH_COMPLEX_P2P_MAC_PON_ETH_SERDES = 0x2000,
+	MV_ETH_COMPLEX_SW_P4_RMGII0     =       0x4000
+} MV_ETH_COMPLEX_TOPOLOGY;
+
 typedef enum {
-	SERDES_UNIT_UNCONNECTED	= 0x0,
-	SERDES_UNIT_PEX		= 0x1,
-	SERDES_UNIT_SATA	= 0x2,
-	SERDES_UNIT_SGMII0	= 0x3,
-	SERDES_UNIT_SGMII1	= 0x4,
-	SERDES_UNIT_SGMII2	= 0x5,
-	SERDES_UNIT_SGMII3	= 0x6,
-	SERDES_UNIT_QSGMII	= 0x7,
+	EPM_DEFAULT = 0x0,      /* RGMII */
+	EPM_MAC0_MII = 0x01,
+	EPM_MAC1_MII = 0x10,
+	EPM_SW_PORT_5_MII = 0x100,
+	EPM_SW_PORT_6_MII = 0x1000
+} MV_ETH_PORT_MODE;
+
+typedef enum {
+	SERDES_UNIT_UNCONNECTED = 0x0,
+	SERDES_UNIT_PEX         = 0x1,
+	SERDES_UNIT_SATA        = 0x2,
+	SERDES_UNIT_SGMII0      = 0x3,
+	SERDES_UNIT_SGMII1      = 0x4,
+	SERDES_UNIT_SGMII2      = 0x5,
+	SERDES_UNIT_SGMII3      = 0x6,
+	SERDES_UNIT_QSGMII      = 0x7,
 	SERDES_UNIT_LAST
 } MV_SERDES_UNIT_INDX;
 
 typedef enum {
-	PEX_BUS_DISABLED	= 0,
-	PEX_BUS_MODE_X1		= 1,
-	PEX_BUS_MODE_X4		= 2,
-	PEX_BUS_MODE_X8		= 3
+	PEX_BUS_DISABLED        = 0,
+	PEX_BUS_MODE_X1         = 1,
+	PEX_BUS_MODE_X4         = 2,
+	PEX_BUS_MODE_X8         = 3
 } MV_PEX_UNIT_CFG;
 
 /* Configuration per SERDES line.
    Each nibble is MV_SERDES_LINE_TYPE */
 typedef struct _boardSerdesConf {
-	MV_U32 enableSerdesConfiguration; /*This will determine if mvCtrlSerdesPhyConfig will configure the serdes*/
-	MV_U32	serdesLine0_7;	/* Lines 0 to 7 SERDES MUX one nibble per line */
-	MV_U32	serdesLine8_15;	/* Lines 8 to 15 SERDES MUX one nibble per line */
-	MV_PEX_UNIT_CFG		pex0Mod;
-	MV_PEX_UNIT_CFG		pex1Mod;
-	MV_PEX_UNIT_CFG		pex2Mod;
-	MV_PEX_UNIT_CFG		pex3Mod;
-	MV_U32	busSpeed;	/* Bus speed - one bit per SERDES line:
-	Low speed (0)		High speed (1)
-	PEX	2.5 G (10 bit)		5 G (20 bit)
-	SATA	1.5 G			3 G
-	SGMII 	1.25 Gbps		3.125 Gbps	*/
+	MV_U32 enableSerdesConfiguration;       /*This will determine if mvCtrlSerdesPhyConfig will configure the serdes*/
+	MV_U32 serdesLine0_7;                   /* Lines 0 to 7 SERDES MUX one nibble per line */
+	MV_U32 serdesLine8_15;                  /* Lines 8 to 15 SERDES MUX one nibble per line */
+	MV_PEX_UNIT_CFG pex0Mod;
+	MV_PEX_UNIT_CFG pex1Mod;
+	MV_PEX_UNIT_CFG pex2Mod;
+	MV_PEX_UNIT_CFG pex3Mod;
+	MV_U32 busSpeed;        /* Bus speed - one bit per SERDES line:
+	                           Low speed (0)		High speed (1)
+	                           PEX	2.5 G (10 bit)		5 G (20 bit)
+	                           SATA	1.5 G			3 G
+	                           SGMII        1.25 Gbps		3.125 Gbps	*/
 } MV_SERDES_CFG;
 
 /* Termal Sensor Registers */
-#define TSEN_STATUS_REG				0x184C4
-#define	TSEN_STATUS_TEMP_OUT_OFFSET		1
-#define	TSEN_STATUS_TEMP_OUT_MASK		(0x1FF << TSEN_STATUS_TEMP_OUT_OFFSET)
+#define TSEN_STATUS_REG                         0x184C4
+#define TSEN_STATUS_TEMP_OUT_OFFSET             1
+#define TSEN_STATUS_TEMP_OUT_MASK               (0x1FF << TSEN_STATUS_TEMP_OUT_OFFSET)
 
-#define TSEN_CONF_REG					0x184D0
-#define	TSEN_CONF_OTF_CALIB_MASK		(0x1 << 30)
-#define	TSEN_CONF_REF_CAL_MASK			(0x1FF << 11)
-#define	TSEN_CONF_SOFT_RESET_MASK		(0x1 << 1)
-#define	TSEN_CONF_START_CALIB_MASK		(0x1 << 25)
+#define TSEN_CONF_REG                                   0x184D0
+#define TSEN_CONF_OTF_CALIB_MASK                (0x1 << 30)
+#define TSEN_CONF_REF_CAL_MASK                  (0x1FF << 11)
+#define TSEN_CONF_SOFT_RESET_MASK               (0x1 << 1)
+#define TSEN_CONF_START_CALIB_MASK              (0x1 << 25)
 
 /* BIOS Modes related defines */
-#define SAR0_CPU_FREQ_MASK	0x00E00000
-#define SAR0_CPU_FREQ_OFFSET	21
-#define SAR0_FABRIC_FREQ_MASK	0x0F000000
-#define SAR0_FABRIC_FREQ_OFFSET	24
-#define SAR0_L2_SIZE_MASK	0x00180000
-#define SAR0_L2_SIZE_OFFSET	19
-#define SAR0_BOOTSRC_MASK	0X1E0
-#define SAR0_BOOTSRC_OFFSET	5
-#define SAR0_BOOTWIDTH_MASK	0X18
-#define SAR0_BOOTWIDTH_OFFSET	3
-#define SAR0_CPU0CORE_MASK	0X80000000
-#define SAR0_CPU0CORE_OFFSET	31
-#define PEX_CLK_100MHZ_MASK    0x00000004
-#define PEX_CLK_100MHZ_OFFSET  2
-#define SAR1_CPU0CORE_MASK	0x1
-#define SAR1_CPU0CORE_OFFSET	0
-#define SAR1_CPU_CORE_MASK	0x00000018
-#define SAR1_CPU_CORE_OFFSET	3
-#define SAR1_CPU_MODE_MASK	0x00100000
-#define SAR1_CPU_MODE_OFFSET	20
-#define SAR1_FABRIC_MODE_MASK	0x00080000
-#define SAR1_FABRIC_MODE_OFFSET	19
-
-#define SAR_CPU_FAB_GET(cpu, fab)	(((cpu & 0x7) << 21) | ((fab & 0xF) << 24))
-#ifdef MV88F78X60_Z1
-#define BIOS_MODES_NUM			7
-#else
-#define BIOS_MODES_NUM			6
-#endif
-
-typedef struct {
-	char *name;
-	MV_U16 confId;
-	MV_U16 code;
-	MV_U8 l2size;
-	MV_U8 cpuFreq;
-	MV_U8 cpuFreqMode;
-	MV_U8 fabricFreq;
-#ifndef MV88F78X60_Z1
-	MV_U8 AltfabricFreq;
-#endif
-	MV_U8 fabricFreqMode;
-	MV_U8 cpuEna;
-#ifdef MV88F78X60_Z1
-	MV_U8 cpuMode;
-#else
-	MV_U8 cpuEndianess;
-#endif
-	MV_U8 dramBusWidth;
-	MV_U8 bootSource;
-	MV_U8 bootWidth;
-} MV_BIOS_MODE;
-
-extern MV_BIOS_MODE bios_modes[];
-extern MV_BIOS_MODE bios_modes_b0[];
+#define SAR_CPU_FAB_GET(cpu, fab)       (((cpu & 0x7) << 21) | ((fab & 0xF) << 24))
 
 /* mcspLib.h API list */
-MV_U32 mvCtrlSatRWrite(MV_SATR_TYPE_ID satrField ,MV_U8 val);
+MV_U32 mvCtrlSatRWrite(MV_SATR_TYPE_ID satrField, MV_U8 val);
 MV_U32 mvCtrlSatRRead(MV_SATR_TYPE_ID satrField);
-MV_U32 mvCtrlSatRDetect(void);
+void mvCtrlSatrInit(MV_VOID);
+MV_STATUS mvBoardConfigInit(MV_VOID);
+void mvBoardConfigWrite(MV_VOID);
+MV_BOOL mvCtrlIsLantiqTDM(MV_VOID);
+MV_BOOL mvCtrlIsZarlinkTDM(MV_VOID);
+MV_BOOL mvCtrlIsExternalTDM(MV_VOID);
+MV_BOOL mvCtrlIsSiliconLabsTDM(MV_VOID);
+
 MV_U32 mvCtrlGetCpuNum(MV_VOID);
 MV_U32 mvCtrlGetQuadNum(MV_VOID);
 MV_STATUS mvCtrlUpdatePexId(MV_VOID);
@@ -238,61 +230,61 @@ MV_STATUS mvCtrlEnvInit(MV_VOID);
 MV_U32    mvCtrlMppRegGet(MV_U32 mppGroup);
 
 #if defined(MV_INCLUDE_PEX)
-MV_U32	mvCtrlPexMaxIfGet(MV_VOID);
-MV_U32	mvCtrlPexMaxUnitGet(MV_VOID);
+MV_U32 mvCtrlPexMaxIfGet(MV_VOID);
+MV_U32 mvCtrlPexMaxUnitGet(MV_VOID);
 #else
-#define mvCtrlPciMaxIfGet()		1
+#define mvCtrlPciMaxIfGet()             1
 #endif
 
 #if defined(MV_INCLUDE_PCI)
-#define mvCtrlPciIfMaxIfGet()		1
+#define mvCtrlPciIfMaxIfGet()           1
 #else
-#define mvCtrlPciIfMaxIfGet()		0
+#define mvCtrlPciIfMaxIfGet()           0
 #endif
 
-MV_U32	  mvCtrlEthMaxPortGet(MV_VOID);
-MV_U8	  mvCtrlEthMaxCPUsGet(MV_VOID);
+MV_U32 mvCtrlEthMaxPortGet(MV_VOID);
+MV_U8 mvCtrlEthMaxCPUsGet(MV_VOID);
 #if defined(MV_INCLUDE_XOR)
 MV_U32 mvCtrlXorMaxChanGet(MV_VOID);
 MV_U32 mvCtrlXorMaxUnitGet(MV_VOID);
 #endif
 #if defined(MV_INCLUDE_USB)
-MV_U32 	  mvCtrlUsbMaxGet(MV_VOID);
+MV_U32 mvCtrlUsbMaxGet(MV_VOID);
 #endif
 #if defined(MV_INCLUDE_LEGACY_NAND)
-MV_U32	  mvCtrlNandSupport(MV_VOID);
+MV_U32 mvCtrlNandSupport(MV_VOID);
 #endif
 #if defined(MV_INCLUDE_SDIO)
-MV_U32	  mvCtrlSdioSupport(MV_VOID);
+MV_U32 mvCtrlSdioSupport(MV_VOID);
 #endif
 #if defined(MV_INCLUDE_TDM)
-MV_U32	  mvCtrlTdmSupport(MV_VOID);
-MV_U32	  mvCtrlTdmMaxGet(MV_VOID);
+MV_U32 mvCtrlTdmSupport(MV_VOID);
+MV_U32 mvCtrlTdmMaxGet(MV_VOID);
 MV_UNIT_ID mvCtrlTdmUnitTypeGet(MV_VOID);
-MV_U32    mvCtrlTdmUnitIrqGet(MV_VOID);
+MV_U32 mvCtrlTdmUnitIrqGet(MV_VOID);
 #endif
 
-MV_U16    mvCtrlModelGet(MV_VOID);
-MV_U8     mvCtrlRevGet(MV_VOID);
+MV_U16 mvCtrlModelGet(MV_VOID);
+MV_U8 mvCtrlRevGet(MV_VOID);
 MV_STATUS mvCtrlNameGet(char *pNameBuff);
-MV_U32    mvCtrlModelRevGet(MV_VOID);
+MV_U32 mvCtrlModelRevGet(MV_VOID);
 MV_STATUS mvCtrlModelRevNameGet(char *pNameBuff);
-MV_VOID   mvCtrlAddrDecShow(MV_VOID);
+MV_VOID mvCtrlAddrDecShow(MV_VOID);
 const MV_8 *mvCtrlTargetNameGet(MV_TARGET target);
-MV_U32	  ctrlSizeToReg(MV_U32 size, MV_U32 alignment);
-MV_U32	  ctrlRegToSize(MV_U32 regSize, MV_U32 alignment);
-MV_U32	  ctrlSizeRegRoundUp(MV_U32 size, MV_U32 alignment);
-MV_U32	  mvCtrlSysRstLengthCounterGet(MV_VOID);
+MV_U32    ctrlSizeToReg(MV_U32 size, MV_U32 alignment);
+MV_U32    ctrlRegToSize(MV_U32 regSize, MV_U32 alignment);
+MV_U32    ctrlSizeRegRoundUp(MV_U32 size, MV_U32 alignment);
+MV_U32 mvCtrlSysRstLengthCounterGet(MV_VOID);
 MV_STATUS ctrlWinOverlapTest(MV_ADDR_WIN *pAddrWin1, MV_ADDR_WIN *pAddrWin2);
 MV_STATUS ctrlWinWithinWinTest(MV_ADDR_WIN *pAddrWin1, MV_ADDR_WIN *pAddrWin2);
 
 MV_VOID   mvCtrlPwrClckSet(MV_UNIT_ID unitId, MV_U32 index, MV_BOOL enable);
-MV_BOOL	  mvCtrlPwrClckGet(MV_UNIT_ID unitId, MV_U32 index);
+MV_BOOL   mvCtrlPwrClckGet(MV_UNIT_ID unitId, MV_U32 index);
 MV_VOID   mvCtrlPwrMemSet(MV_UNIT_ID unitId, MV_U32 index, MV_BOOL enable);
-MV_BOOL	  mvCtrlIsBootFromNOR(MV_VOID);
-MV_BOOL	  mvCtrlIsBootFromSPI(MV_VOID);
-MV_BOOL	  mvCtrlIsBootFromNAND(MV_VOID);
-MV_BOOL	  mvCtrlPwrMemGet(MV_UNIT_ID unitId, MV_U32 index);
+MV_BOOL mvCtrlIsBootFromNOR(MV_VOID);
+MV_BOOL mvCtrlIsBootFromSPI(MV_VOID);
+MV_BOOL mvCtrlIsBootFromNAND(MV_VOID);
+MV_BOOL   mvCtrlPwrMemGet(MV_UNIT_ID unitId, MV_U32 index);
 
 MV_U32 mvCtrlSerdesMaxLinesGet(MV_VOID);
 MV_STATUS mvCtrlSerdesPhyConfig(MV_VOID);
@@ -300,4 +292,4 @@ MV_U32 mvCtrlDDRBudWidth(MV_VOID);
 MV_BOOL mvCtrlDDRThruXbar(MV_VOID);
 MV_BOOL mvCtrlDDRECC(MV_VOID);
 
-#endif /* __INCmvCtrlEnvLibh */
+#endif /* __INCmvCtrlEnvLibh */
\ No newline at end of file
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
index cdf83ec..098e20f 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvRegs.h
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+        this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -71,393 +71,391 @@ extern "C" {
 #endif /* __cplusplus */
 
 /* CV Support */
-#define PEX0_MEM0 	PEX0_MEM
-#define PCI0_MEM0	PEX0_MEM
+#define PEX0_MEM0       PEX0_MEM
+#define PCI0_MEM0       PEX0_MEM
 
 /* Controller revision info */
-#define PCI_CLASS_CODE_AND_REVISION_ID		0x008
-#define PCCRIR_REVID_OFFS			0		/* Revision ID */
-#define PCCRIR_REVID_MASK			(0xff << PCCRIR_REVID_OFFS)
+#define PCI_CLASS_CODE_AND_REVISION_ID          0x008
+#define PCCRIR_REVID_OFFS                       0               /* Revision ID */
+#define PCCRIR_REVID_MASK                       (0xff << PCCRIR_REVID_OFFS)
 
 /* Controler environment registers offsets */
-#define MV_TDM_IRQ_NUM				56
-
+#define MV_TDM_IRQ_NUM                          56
 
 /* Coherent Fabric Control and Status */
-#define MV_COHERENCY_FABRIC_CTRL_REG		(MV_COHERENCY_FABRIC_OFFSET + 0x0)
-#define MV_COHERENCY_FABRIC_CFG_REG		(MV_COHERENCY_FABRIC_OFFSET + 0x4)
+#define MV_COHERENCY_FABRIC_CTRL_REG            (MV_COHERENCY_FABRIC_OFFSET + 0x0)
+#define MV_COHERENCY_FABRIC_CFG_REG             (MV_COHERENCY_FABRIC_OFFSET + 0x4)
 
 /* CIB registers offsets */
-#define MV_CIB_CTRL_CFG_REG			(MV_COHERENCY_FABRIC_OFFSET + 0x80)
+#define MV_CIB_CTRL_CFG_REG                     (MV_COHERENCY_FABRIC_OFFSET + 0x80)
 
 /* PMU_NFABRIC PMU_NFABRIC PMU_UNIT_SERVICE Units */
-#define MV_L2C_NFABRIC_PM_CTRL_CFG_REG		(MV_PMU_NFABRIC_UNIT_SERV_OFFSET + 0x4)
-#define MV_L2C_NFABRIC_PM_CTRL_CFG_PWR_DOWN	(1 << 20)
+#define MV_L2C_NFABRIC_PM_CTRL_CFG_REG          (MV_PMU_NFABRIC_UNIT_SERV_OFFSET + 0x4)
+#define MV_L2C_NFABRIC_PM_CTRL_CFG_PWR_DOWN     (1 << 20)
 
-#define MV_L2C_NFABRIC_PWR_DOWN_FLOW_CTRL_REG	(MV_PMU_NFABRIC_UNIT_SERV_OFFSET + 0x8)
+#define MV_L2C_NFABRIC_PWR_DOWN_FLOW_CTRL_REG   (MV_PMU_NFABRIC_UNIT_SERV_OFFSET + 0x8)
 
-#define PM_CONTROL_AND_CONFIG_REG(cpu)		(MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x4)
-#define PM_CONTROL_AND_CONFIG_DFS_REQ		(1 << 18)
-#define PM_CONTROL_AND_CONFIG_PWDDN_REQ		(1 << 16)
-#define PM_CONTROL_AND_CONFIG_L2_PWDDN		(1 << 20)
+#define PM_CONTROL_AND_CONFIG_REG(cpu)          (MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x4)
+#define PM_CONTROL_AND_CONFIG_DFS_REQ           (1 << 18)
+#define PM_CONTROL_AND_CONFIG_PWDDN_REQ         (1 << 16)
+#define PM_CONTROL_AND_CONFIG_L2_PWDDN          (1 << 20)
 
-#define PM_STATUS_AND_MASK_REG(cpu)		(MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0xc)
-#define PM_STATUS_AND_MASK_CPU_IDLE_WAIT	(1 << 16)
-#define PM_STATUS_AND_MASK_SNP_Q_EMPTY_WAIT	(1 << 17)
-#define PM_STATUS_AND_MASK_IRQ_WAKEUP		(1 << 20)
-#define PM_STATUS_AND_MASK_FIQ_WAKEUP		(1 << 21)
-#define PM_STATUS_AND_MASK_DBG_WAKEUP		(1 << 22)
-#define PM_STATUS_AND_MASK_IRQ_MASK		(1 << 24)
-#define PM_STATUS_AND_MASK_FIQ_MASK		(1 << 25)
+#define PM_STATUS_AND_MASK_REG(cpu)             (MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0xc)
+#define PM_STATUS_AND_MASK_CPU_IDLE_WAIT        (1 << 16)
+#define PM_STATUS_AND_MASK_SNP_Q_EMPTY_WAIT     (1 << 17)
+#define PM_STATUS_AND_MASK_IRQ_WAKEUP           (1 << 20)
+#define PM_STATUS_AND_MASK_FIQ_WAKEUP           (1 << 21)
+#define PM_STATUS_AND_MASK_DBG_WAKEUP           (1 << 22)
+#define PM_STATUS_AND_MASK_IRQ_MASK             (1 << 24)
+#define PM_STATUS_AND_MASK_FIQ_MASK             (1 << 25)
 
-#define PM_EVENT_STATUS_AND_MASK_REG(cpu)		(MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x20)
-#define PM_EVENT_STATUS_AND_MASK_DFS_DONE_OFFS			1
-#define PM_EVENT_STATUS_AND_MASK_DFS_DONE_MASK_OFFS		17
+#define PM_EVENT_STATUS_AND_MASK_REG(cpu)               (MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x20)
+#define PM_EVENT_STATUS_AND_MASK_DFS_DONE_OFFS                  1
+#define PM_EVENT_STATUS_AND_MASK_DFS_DONE_MASK_OFFS             17
 
-#define PM_CPU_BOOT_ADDR_REDIRECT(cpu)		(MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x24)
+#define PM_CPU_BOOT_ADDR_REDIRECT(cpu)          (MV_CPU_PMU_UNIT_SERV_OFFSET(cpu) + 0x24)
 
 /* Power Management Memory Power Down Registers 1 - 6 */
-#define POWER_MNG_MEM_CTRL_REG(num)		((num) < 6 ? 0x1820C + (num) * 4 : 0x18228)
-#define PMC_MCR_NUM_COMM			6
-#define PMC_MCR_NUM_PEX				2
-#define PMC_MCR_NUM_USB				4
-#define PMC_MCR_NUM_DUNIT			3
-#define PMC_MCR_NUM_DEVB			4
-#define PMC_MCR_NUM_NF				4
-#define PMC_MCR_NUM_XOR				4
-#define PMC_MCR_NUM_SATA			5
-#define PMC_MCR_NUM_CESA			4
-#define PMC_MCR_NUM_GE				5
-#define PMC_MCR_NUM_PNC				5
-#define PMC_MCR_NUM_BM				5
-#define PMC_MCR_NUM_PDMA			1
-#define PMC_MCR_NUM_NCS				3
-#define PMC_MCR_NUM_CFU				3
-#define PMC_MCR_NUM_L2				3
-#define PMC_MCR_NUM_CIB				3
-#define PMC_MCR_NUM_CPU				3
-#define PMC_MCR_NUM_IDMA			4
-#define PMC_MCR_NUM_LCD				4
-#define PMC_MCR_NUM_PMU				6
-
-#define PMC_COMMSTOPMEM_OFFS			4
-#define PMC_COMMSTOPMEM_MASK			(7 << PMC_COMMSTOPMEM_OFFS)
-#define PMC_COMMSTOPMEM_EN			(0 << PMC_COMMSTOPMEM_OFFS)
-#define PMC_COMMSTOPMEM_STOP			(1 << PMC_COMMSTOPMEM_OFFS)
-
-#define PMC_PEXSTOPMEM_OFFS(port)		((port) < 10 ? ((port) * 3) : 0)
-#define PMC_PEXSTOPMEM_MASK(port)		(7 << PMC_PEXSTOPMEM_OFFS(port))
-#define PMC_PEXSTOPMEM_EN(port)			(0 << PMC_PEXSTOPMEM_OFFS(port))
-#define PMC_PEXSTOPMEM_STOP(port)		(1 << PMC_PEXSTOPMEM_OFFS(port))
-
-#define PMC_USBSTOPMEM_OFFS(port)		((port) < 3 ? (3 + (port) * 3) : 0)
-#define PMC_USBSTOPMEM_MASK(port)		(7 << PMC_USBSTOPMEM_OFFS(port))
-#define PMC_USBSTOPMEM_EN(port)			(0 << PMC_USBSTOPMEM_OFFS(port))
-#define PMC_USBSTOPMEM_STOP(port)		(1 << PMC_USBSTOPMEM_OFFS(port))
-
-#define PMC_DUNITSTOPMEM_OFFS			12
-#define PMC_DUNITSTOPMEM_MASK			(7 << PMC_DUNITSTOPMEM_OFFS)
-#define PMC_DUNITSTOPMEM_EN			(0 << PMC_DUNITSTOPMEM_OFFS)
-#define PMC_DUNITSTOPMEM_STOP			(1 << PMC_DUNITSTOPMEM_OFFS)
-
-#define PMC_NFSTOPMEM_OFFS			27
-#define PMC_NFSTOPMEM_MASK			(7 << PMC_NFSTOPMEM_OFFS)
-#define PMC_NFSTOPMEM_EN			(0 << PMC_NFSTOPMEM_OFFS)
-#define PMC_NFSTOPMEM_STOP			(1 << PMC_NFSTOPMEM_OFFS)
-
-#define PMC_DEVBSTOPMEM_OFFS			21
-#define PMC_DEVBSTOPMEM_MASK			(7 << PMC_DEVBSTOPMEM_OFFS)
-#define PMC_DEVBSTOPMEM_EN			(0 << PMC_DEVBSTOPMEM_OFFS)
-#define PMC_DEVBSTOPMEM_STOP			(1 << PMC_DEVBSTOPMEM_OFFS)
-
-#define PMC_XORSTOPMEM_OFFS(port)		((port) == 0 ? 15 : 24)
-#define PMC_XORSTOPMEM_MASK(port)		(7 << PMC_XORSTOPMEM_OFFS(port))
-#define PMC_XORSTOPMEM_EN(port)			(0 << PMC_XORSTOPMEM_OFFS(port))
-#define PMC_XORSTOPMEM_STOP(port)		(1 << PMC_XORSTOPMEM_OFFS(port))
-
-#define PMC_SATASTOPMEM_OFFS(port)		((port) == 0 ? 18 : 24)
-#define PMC_SATASTOPMEM_MASK(port)		(0x3F << PMC_SATASTOPMEM_OFFS(port))
-#define PMC_SATASTOPMEM_EN(port)		(0 << PMC_SATASTOPMEM_OFFS(port))
-#define PMC_SATASTOPMEM_STOP(port)		(9 << PMC_SATASTOPMEM_OFFS(port))
-
-#define PMC_CESASTOPMEM_OFFS			18
-#define PMC_CESASTOPMEM_MASK			(7 << PMC_CESASTOPMEM_OFFS)
-#define PMC_CESASTOPMEM_EN			(0 << PMC_CESASTOPMEM_OFFS)
-#define PMC_CESASTOPMEM_STOP			(1 << PMC_CESASTOPMEM_OFFS)
-
-#define PMC_GESTOPMEM_OFFS(port)		((port) < 4 ? (9 - (port) * 3) : 0)
-#define PMC_GESTOPMEM_MASK(port)		(7 << PMC_GESTOPMEM_OFFS(port))
-#define PMC_GESTOPMEM_EN(port)			(0 << PMC_GESTOPMEM_OFFS(port))
-#define PMC_GESTOPMEM_STOP(port)		(1 << PMC_GESTOPMEM_OFFS(port))
-
-#define PMC_PNCSTOPMEM_OFFS			12
-#define PMC_PNCSTOPMEM_MASK			(7 << PMC_PNCSTOPMEM_OFFS)
-#define PMC_PNCSTOPMEM_EN			(0 << PMC_PNCSTOPMEM_OFFS)
-#define PMC_PNCSTOPMEM_STOP			(1 << PMC_PNCSTOPMEM_OFFS)
-
-#define PMC_BMSTOPMEM_OFFS			15
-#define PMC_BMSTOPMEM_MASK			(7 << PMC_BMSTOPMEM_OFFS)
-#define PMC_BMSTOPMEM_EN			(0 << PMC_BMSTOPMEM_OFFS)
-#define PMC_BMSTOPMEM_STOP			(1 << PMC_BMSTOPMEM_OFFS)
-
-#define PMC_PDMASTOPMEM_OFFS			0
-#define PMC_PDMATOPMEM_MASK			(7 << PMC_PDMASTOPMEM_OFFS)
-#define PMC_PDMASTOPMEM_EN			(0 << PMC_PDMASTOPMEM_OFFS)
-#define PMC_PDMASTOPMEM_STOP			(1 << PMC_PDMASTOPMEM_OFFS)
-
-#define PMC_NCSSTOPMEM_OFFS			24
-#define PMC_NCSSTOPMEM_MASK			(7 << PMC_NCSSTOPMEM_OFFS)
-#define PMC_NCSSTOPMEM_EN			(0 << PMC_NCSSTOPMEM_OFFS)
-#define PMC_NCSSTOPMEM_STOP			(1 << PMC_NCSSTOPMEM_OFFS)
-
-#define PMC_CFUSTOPMEM_OFFS			21
-#define PMC_CFUSTOPMEM_MASK			(7 << PMC_CFUSTOPMEM_OFFS)
-#define PMC_CFUSTOPMEM_EN			(0 << PMC_CFUSTOPMEM_OFFS)
-#define PMC_CFUSTOPMEM_STOP			(1 << PMC_CFUSTOPMEM_OFFS)
-
-#define PMC_L2STOPMEM_OFFS			18
-#define PMC_L2STOPMEM_MASK			(7 << PMC_L2STOPMEM_OFFS)
-#define PMC_L2STOPMEM_EN			(0 << PMC_L2STOPMEM_OFFS)
-#define PMC_L2STOPMEM_STOP			(1 << PMC_L2STOPMEM_OFFS)
-
-#define PMC_CIBSTOPMEM_OFFS			15
-#define PMC_CIBSTOPMEM_MASK			(7 << PMC_CIBSTOPMEM_OFFS)
-#define PMC_CIBSTOPMEM_EN			(0 << PMC_CIBSTOPMEM_OFFS)
-#define PMC_CIBSTOPMEM_STOP			(1 << PMC_CIBSTOPMEM_OFFS)
+#define POWER_MNG_MEM_CTRL_REG(num)             ((num) < 6 ? 0x1820C + (num) * 4 : 0x18228)
+#define PMC_MCR_NUM_COMM                        6
+#define PMC_MCR_NUM_PEX                         2
+#define PMC_MCR_NUM_USB                         4
+#define PMC_MCR_NUM_DUNIT                       3
+#define PMC_MCR_NUM_DEVB                        4
+#define PMC_MCR_NUM_NF                          4
+#define PMC_MCR_NUM_XOR                         4
+#define PMC_MCR_NUM_SATA                        5
+#define PMC_MCR_NUM_CESA                        4
+#define PMC_MCR_NUM_GE                          5
+#define PMC_MCR_NUM_PNC                         5
+#define PMC_MCR_NUM_BM                          5
+#define PMC_MCR_NUM_PDMA                        1
+#define PMC_MCR_NUM_NCS                         3
+#define PMC_MCR_NUM_CFU                         3
+#define PMC_MCR_NUM_L2                          3
+#define PMC_MCR_NUM_CIB                         3
+#define PMC_MCR_NUM_CPU                         3
+#define PMC_MCR_NUM_IDMA                        4
+#define PMC_MCR_NUM_LCD                         4
+#define PMC_MCR_NUM_PMU                         6
+
+#define PMC_COMMSTOPMEM_OFFS                    4
+#define PMC_COMMSTOPMEM_MASK                    (7 << PMC_COMMSTOPMEM_OFFS)
+#define PMC_COMMSTOPMEM_EN                      (0 << PMC_COMMSTOPMEM_OFFS)
+#define PMC_COMMSTOPMEM_STOP                    (1 << PMC_COMMSTOPMEM_OFFS)
+
+#define PMC_PEXSTOPMEM_OFFS(port)               ((port) < 10 ? ((port) * 3) : 0)
+#define PMC_PEXSTOPMEM_MASK(port)               (7 << PMC_PEXSTOPMEM_OFFS(port))
+#define PMC_PEXSTOPMEM_EN(port)                 (0 << PMC_PEXSTOPMEM_OFFS(port))
+#define PMC_PEXSTOPMEM_STOP(port)               (1 << PMC_PEXSTOPMEM_OFFS(port))
+
+#define PMC_USBSTOPMEM_OFFS(port)               ((port) < 3 ? (3 + (port) * 3) : 0)
+#define PMC_USBSTOPMEM_MASK(port)               (7 << PMC_USBSTOPMEM_OFFS(port))
+#define PMC_USBSTOPMEM_EN(port)                 (0 << PMC_USBSTOPMEM_OFFS(port))
+#define PMC_USBSTOPMEM_STOP(port)               (1 << PMC_USBSTOPMEM_OFFS(port))
+
+#define PMC_DUNITSTOPMEM_OFFS                   12
+#define PMC_DUNITSTOPMEM_MASK                   (7 << PMC_DUNITSTOPMEM_OFFS)
+#define PMC_DUNITSTOPMEM_EN                     (0 << PMC_DUNITSTOPMEM_OFFS)
+#define PMC_DUNITSTOPMEM_STOP                   (1 << PMC_DUNITSTOPMEM_OFFS)
+
+#define PMC_NFSTOPMEM_OFFS                      27
+#define PMC_NFSTOPMEM_MASK                      (7 << PMC_NFSTOPMEM_OFFS)
+#define PMC_NFSTOPMEM_EN                        (0 << PMC_NFSTOPMEM_OFFS)
+#define PMC_NFSTOPMEM_STOP                      (1 << PMC_NFSTOPMEM_OFFS)
+
+#define PMC_DEVBSTOPMEM_OFFS                    21
+#define PMC_DEVBSTOPMEM_MASK                    (7 << PMC_DEVBSTOPMEM_OFFS)
+#define PMC_DEVBSTOPMEM_EN                      (0 << PMC_DEVBSTOPMEM_OFFS)
+#define PMC_DEVBSTOPMEM_STOP                    (1 << PMC_DEVBSTOPMEM_OFFS)
+
+#define PMC_XORSTOPMEM_OFFS(port)               ((port) == 0 ? 15 : 24)
+#define PMC_XORSTOPMEM_MASK(port)               (7 << PMC_XORSTOPMEM_OFFS(port))
+#define PMC_XORSTOPMEM_EN(port)                 (0 << PMC_XORSTOPMEM_OFFS(port))
+#define PMC_XORSTOPMEM_STOP(port)               (1 << PMC_XORSTOPMEM_OFFS(port))
+
+#define PMC_SATASTOPMEM_OFFS(port)              ((port) == 0 ? 18 : 24)
+#define PMC_SATASTOPMEM_MASK(port)              (0x3F << PMC_SATASTOPMEM_OFFS(port))
+#define PMC_SATASTOPMEM_EN(port)                (0 << PMC_SATASTOPMEM_OFFS(port))
+#define PMC_SATASTOPMEM_STOP(port)              (9 << PMC_SATASTOPMEM_OFFS(port))
+
+#define PMC_CESASTOPMEM_OFFS                    18
+#define PMC_CESASTOPMEM_MASK                    (7 << PMC_CESASTOPMEM_OFFS)
+#define PMC_CESASTOPMEM_EN                      (0 << PMC_CESASTOPMEM_OFFS)
+#define PMC_CESASTOPMEM_STOP                    (1 << PMC_CESASTOPMEM_OFFS)
+
+#define PMC_GESTOPMEM_OFFS(port)                ((port) < 4 ? (9 - (port) * 3) : 0)
+#define PMC_GESTOPMEM_MASK(port)                (7 << PMC_GESTOPMEM_OFFS(port))
+#define PMC_GESTOPMEM_EN(port)                  (0 << PMC_GESTOPMEM_OFFS(port))
+#define PMC_GESTOPMEM_STOP(port)                (1 << PMC_GESTOPMEM_OFFS(port))
+
+#define PMC_PNCSTOPMEM_OFFS                     12
+#define PMC_PNCSTOPMEM_MASK                     (7 << PMC_PNCSTOPMEM_OFFS)
+#define PMC_PNCSTOPMEM_EN                       (0 << PMC_PNCSTOPMEM_OFFS)
+#define PMC_PNCSTOPMEM_STOP                     (1 << PMC_PNCSTOPMEM_OFFS)
+
+#define PMC_BMSTOPMEM_OFFS                      15
+#define PMC_BMSTOPMEM_MASK                      (7 << PMC_BMSTOPMEM_OFFS)
+#define PMC_BMSTOPMEM_EN                        (0 << PMC_BMSTOPMEM_OFFS)
+#define PMC_BMSTOPMEM_STOP                      (1 << PMC_BMSTOPMEM_OFFS)
+
+#define PMC_PDMASTOPMEM_OFFS                    0
+#define PMC_PDMATOPMEM_MASK                     (7 << PMC_PDMASTOPMEM_OFFS)
+#define PMC_PDMASTOPMEM_EN                      (0 << PMC_PDMASTOPMEM_OFFS)
+#define PMC_PDMASTOPMEM_STOP                    (1 << PMC_PDMASTOPMEM_OFFS)
+
+#define PMC_NCSSTOPMEM_OFFS                     24
+#define PMC_NCSSTOPMEM_MASK                     (7 << PMC_NCSSTOPMEM_OFFS)
+#define PMC_NCSSTOPMEM_EN                       (0 << PMC_NCSSTOPMEM_OFFS)
+#define PMC_NCSSTOPMEM_STOP                     (1 << PMC_NCSSTOPMEM_OFFS)
+
+#define PMC_CFUSTOPMEM_OFFS                     21
+#define PMC_CFUSTOPMEM_MASK                     (7 << PMC_CFUSTOPMEM_OFFS)
+#define PMC_CFUSTOPMEM_EN                       (0 << PMC_CFUSTOPMEM_OFFS)
+#define PMC_CFUSTOPMEM_STOP                     (1 << PMC_CFUSTOPMEM_OFFS)
+
+#define PMC_L2STOPMEM_OFFS                      18
+#define PMC_L2STOPMEM_MASK                      (7 << PMC_L2STOPMEM_OFFS)
+#define PMC_L2STOPMEM_EN                        (0 << PMC_L2STOPMEM_OFFS)
+#define PMC_L2STOPMEM_STOP                      (1 << PMC_L2STOPMEM_OFFS)
+
+#define PMC_CIBSTOPMEM_OFFS                     15
+#define PMC_CIBSTOPMEM_MASK                     (7 << PMC_CIBSTOPMEM_OFFS)
+#define PMC_CIBSTOPMEM_EN                       (0 << PMC_CIBSTOPMEM_OFFS)
+#define PMC_CIBSTOPMEM_STOP                     (1 << PMC_CIBSTOPMEM_OFFS)
 
 /* TODO - verify, the manual has no description */
-#define PMC_CPUSTOPMEM_OFFS(id)			((id) < 4 ? (id) * 3 : 0)
-#define PMC_CPUSTOPMEM_MASK(id)			(7 << PMC_CPUSTOPMEM_OFFS(id))
-#define PMC_CPUSTOPMEM_EN(id)			(0 << PMC_CPUSTOPMEM_OFFS(id))
-#define PMC_CPUSTOPMEM_STOP(id)			(1 << PMC_CPUSTOPMEM_OFFS(id))
-
-#define PMC_IDMASTOPMEM_OFFS			12
-#define PMC_IDMASTOPMEM_MASK			(7 << PMC_IDMASTOPMEM_OFFS)
-#define PMC_IDMASTOPMEM_EN			(0 << PMC_IDMASTOPMEM_OFFS)
-#define PMC_IDMASTOPMEM_STOP			(1 << PMC_IDMASTOPMEM_OFFS)
-
-#define PMC_LCDSTOPMEM_OFFS			0
-#define PMC_LCDSTOPMEM_MASK			(7 << PMC_LCDSTOPMEM_OFFS)
-#define PMC_LCDSTOPMEM_EN			(0 << PMC_LCDSTOPMEM_OFFS)
-#define PMC_LCDSTOPMEM_STOP			(1 << PMC_LCDSTOPMEM_OFFS)
-
-#define PMC_PMUSTOPMEM_OFFS			0
-#define PMC_PMUSTOPMEM_MASK			(7 << PMC_PMUSTOPMEM_OFFS)
-#define PMC_PMUSTOPMEM_EN			(0 << PMC_PMUSTOPMEM_OFFS)
-#define PMC_PMUSTOPMEM_STOP			(1 << PMC_PMUSTOPMEM_OFFS)
-
+#define PMC_CPUSTOPMEM_OFFS(id)                 ((id) < 4 ? (id) * 3 : 0)
+#define PMC_CPUSTOPMEM_MASK(id)                 (7 << PMC_CPUSTOPMEM_OFFS(id))
+#define PMC_CPUSTOPMEM_EN(id)                   (0 << PMC_CPUSTOPMEM_OFFS(id))
+#define PMC_CPUSTOPMEM_STOP(id)                 (1 << PMC_CPUSTOPMEM_OFFS(id))
+
+#define PMC_IDMASTOPMEM_OFFS                    12
+#define PMC_IDMASTOPMEM_MASK                    (7 << PMC_IDMASTOPMEM_OFFS)
+#define PMC_IDMASTOPMEM_EN                      (0 << PMC_IDMASTOPMEM_OFFS)
+#define PMC_IDMASTOPMEM_STOP                    (1 << PMC_IDMASTOPMEM_OFFS)
+
+#define PMC_LCDSTOPMEM_OFFS                     0
+#define PMC_LCDSTOPMEM_MASK                     (7 << PMC_LCDSTOPMEM_OFFS)
+#define PMC_LCDSTOPMEM_EN                       (0 << PMC_LCDSTOPMEM_OFFS)
+#define PMC_LCDSTOPMEM_STOP                     (1 << PMC_LCDSTOPMEM_OFFS)
+
+#define PMC_PMUSTOPMEM_OFFS                     0
+#define PMC_PMUSTOPMEM_MASK                     (7 << PMC_PMUSTOPMEM_OFFS)
+#define PMC_PMUSTOPMEM_EN                       (0 << PMC_PMUSTOPMEM_OFFS)
+#define PMC_PMUSTOPMEM_STOP                     (1 << PMC_PMUSTOPMEM_OFFS)
 
 /*  Power Management Clock Gating Control Register	*/
-#define POWER_MNG_CTRL_REG			0x18220
+#define POWER_MNG_CTRL_REG                      0x18220
 #define L2C_MTCMOS_CONTROL_0_REG    0x22F00
 #define L2C_MTCMOS_CONTROL_1_REG    0x22F04
 
-#define PMU_DFS_CTRL_REG(cpu)			(MV_RUNIT_PMU_REGS_OFFSET + 0x54 + ((cpu) * 0x4))
-#define PMU_DFS_CTRL_INIT_RATIO_OFFS	24
-#define PMU_DFS_CTRL_INIT_RATIO_MASK	0x3F
-#define PMU_DFS_CTRL_RATIO_OFFS			16
-#define PMU_DFS_CTRL_RATIO_MASK			0x3F
-
-#define PMC_TDMSTOPCLOCK_OFFS			25
-#define PMC_TDMSTOPCLOCK_MASK			(1 << PMC_TDMSTOPCLOCK_OFFS)
-#define PMC_TDMSTOPCLOCK_EN			(1 << PMC_TDMSTOPCLOCK_OFFS)
-#define PMC_TDMSTOPCLOCK_STOP			(0 << PMC_TDMSTOPCLOCK_OFFS)
-
-#define PMC_PEXSTOPCLOCK_OFFS(port)		((port) < 8 ? (5 + (port)) : (18 + (port)))
-#define PMC_PEXSTOPCLOCK_MASK(port)		(1 << PMC_PEXSTOPCLOCK_OFFS(port))
-#define PMC_PEXSTOPCLOCK_EN(port)		(1 << PMC_PEXSTOPCLOCK_OFFS(port))
-#define PMC_PEXSTOPCLOCK_STOP(port)		(0 << PMC_PEXSTOPCLOCK_OFFS(port))
-
-#define PMC_USBSTOPCLOCK_OFFS(port)		((port) < 3 ? (18 + (port)) : 0)
-#define PMC_USBSTOPCLOCK_MASK(port)		(1 << PMC_USBSTOPCLOCK_OFFS(port))
-#define PMC_USBSTOPCLOCK_EN(port)		(1 << PMC_USBSTOPCLOCK_OFFS(port))
-#define PMC_USBSTOPCLOCK_STOP(port)		(0 << PMC_USBSTOPCLOCK_OFFS(port))
-
-#define PMC_SDIOSTOPCLOCK_OFFS			17
-#define PMC_SDIOSTOPCLOCK_MASK			(1 << PMC_SDIOSTOPCLOCK_OFFS)
-#define PMC_SDIOSTOPCLOCK_EN			(1 << PMC_SDIOSTOPCLOCK_OFFS)
-#define PMC_SDIOSTOPCLOCK_STOP			(0 << PMC_SDIOSTOPCLOCK_OFFS)
-
-#define PMC_RUNITSTOPCLOCK_OFFS			24
-#define PMC_RUNITSTOPCLOCK_MASK			(1 << PMC_RUNITSTOPCLOCK_OFFS)
-#define PMC_RUNITSTOPCLOCK_EN			(1 << PMC_RUNITSTOPCLOCK_OFFS)
-#define PMC_RUNITSTOPCLOCK_STOP			(0 << PMC_RUNITSTOPCLOCK_OFFS)
-
-#define PMC_XORSTOPCLOCK_OFFS			22
-#define PMC_XORSTOPCLOCK_MASK			(1 << PMC_XORSTOPCLOCK_OFFS)
-#define PMC_XORSTOPCLOCK_EN			(1 << PMC_XORSTOPCLOCK_OFFS)
-#define PMC_XORSTOPCLOCK_STOP			(0 << PMC_XORSTOPCLOCK_OFFS)
-
-#define PMC_SATASTOPCLOCK_OFFS(ch)		(ch == 0 ? 14 : 29)
-#define PMC_SATASTOPCLOCK_MASK(ch)		(3 << PMC_SATASTOPCLOCK_OFFS(ch))
-#define PMC_SATASTOPCLOCK_EN(ch)		(3 << PMC_SATASTOPCLOCK_OFFS(ch))
-#define PMC_SATASTOPCLOCK_STOP(ch)		(0 << PMC_SATASTOPCLOCK_OFFS(ch))
-
-#define PMC_CESASTOPCLOCK_OFFS			23
-#define PMC_CESASTOPCLOCK_MASK			(1 << PMC_CESASTOPCLOCK_OFFS)
-#define PMC_CESASTOPCLOCK_EN			(1 << PMC_CESASTOPCLOCK_OFFS)
-#define PMC_CESASTOPCLOCK_STOP			(0 << PMC_CESASTOPCLOCK_OFFS)
-
-#define PMC_GESTOPCLOCK_OFFS(port)		((port) < 4 ? (4 - (port)) : 0)
-#define PMC_GESTOPCLOCK_MASK(port)		(1 << PMC_GESTOPCLOCK_OFFS(port))
-#define PMC_GESTOPCLOCK_EN(port)		(1 << PMC_GESTOPCLOCK_OFFS(port))
-#define PMC_GESTOPCLOCK_STOP(port)		(0 << PMC_GESTOPCLOCK_OFFS(port))
-
-#define PMC_NETASTOPCLOCK_OFFS			13
-#define PMC_NETASTOPCLOCK_MASK			(1 << PMC_NETASTOPCLOCK_OFFS)
-#define PMC_NETASTOPCLOCK_EN			(1 << PMC_NETASTOPCLOCK_OFFS)
-#define PMC_NETASTOPCLOCK_STOP			(0 << PMC_NETASTOPCLOCK_OFFS)
-
-#define PMC_LCDSTOPCLOCK_OFFS			16
-#define PMC_LCDSTOPCLOCK_MASK			(1 << PMC_LCDSTOPCLOCK_OFFS)
-#define PMC_LCDSTOPCLOCK_EN			(1 << PMC_LCDSTOPCLOCK_OFFS)
-#define PMC_LCDSTOPCLOCK_STOP			(0 << PMC_LCDSTOPCLOCK_OFFS)
-
-#define PMC_IDMASTOPCLOCK_OFFS			21
-#define PMC_IDMASTOPCLOCK_MASK			(1 << PMC_IDMASTOPCLOCK_OFFS)
-#define PMC_IDMASTOPCLOCK_EN			(1 << PMC_IDMASTOPCLOCK_OFFS)
-#define PMC_IDMASTOPCLOCK_STOP			(0 << PMC_IDMASTOPCLOCK_OFFS)
-
-#define PMC_DDRSTOPCLOCK_OFFS			28
-#define PMC_DDRSTOPCLOCK_MASK			(1 << PMC_DDRSTOPCLOCK_OFFS)
-#define PMC_DDRSTOPCLOCK_EN			(1 << PMC_DDRSTOPCLOCK_OFFS)
-#define PMC_DDRSTOPCLOCK_STOP			(0 << PMC_DDRSTOPCLOCK_OFFS)
-
-#define SATA_IMP_TX_SSC_CTRL_REG(port)		(0xA2810 + (port)*0x2000)
-#define SATA_GEN_1_SET_0_REG(port)			(0xA2834 + (port)*0x2000)
-#define SATA_GEN_1_SET_1_REG(port)			(0xA2838 + (port)*0x2000)
-#define SATA_GEN_2_SET_0_REG(port)			(0xA283C + (port)*0x2000)
-#define SATA_GEN_2_SET_1_REG(port)			(0xA2840 + (port)*0x2000)
-
-#define SATA_PWR_PLL_CTRL_REG(port)			(0xA2804 + (port)*0x2000)
-#define SATA_DIG_LP_ENA_REG(port)			(0xA288C + (port)*0x2000)
-#define SATA_REF_CLK_SEL_REG(port)			(0xA2918 + (port)*0x2000)
-#define SATA_COMPHY_CTRL_REG(port)			(0xA2920 + (port)*0x2000)
-#define SATA_LP_PHY_EXT_CTRL_REG(port)		(0xA2058 + (port)*0x2000)
-#define SATA_LP_PHY_EXT_STAT_REG(port)		(0xA205C + (port)*0x2000)
-
-#define SGMII_PWR_PLL_CTRL_REG(port)		(0x72E04 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define SGMII_DIG_LP_ENA_REG(port)		(0x72E8C + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define SGMII_REF_CLK_SEL_REG(port)		(0x72F18 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define SGMII_SERDES_CFG_REG(port)		(0x724A0 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define SGMII_SERDES_STAT_REG(port)		(0x724A4 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define SGMII_COMPHY_CTRL_REG(port)		(0x72F20 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-#define QSGMII_GEN_1_SETTING_REG(port)		(0x72E38 + ((port)%2)*0x4000 - ((port)/2)*0x40000)
-
-#define SERDES_LINE_MUX_REG_0_7			0x18270
-#define SERDES_LINE_MUX_REG_8_15		0x18274
+#define PMU_DFS_CTRL_REG(cpu)                   (MV_RUNIT_PMU_REGS_OFFSET + 0x54 + ((cpu) * 0x4))
+#define PMU_DFS_CTRL_INIT_RATIO_OFFS    24
+#define PMU_DFS_CTRL_INIT_RATIO_MASK    0x3F
+#define PMU_DFS_CTRL_RATIO_OFFS                 16
+#define PMU_DFS_CTRL_RATIO_MASK                 0x3F
+
+#define PMC_TDMSTOPCLOCK_OFFS                   25
+#define PMC_TDMSTOPCLOCK_MASK                   (1 << PMC_TDMSTOPCLOCK_OFFS)
+#define PMC_TDMSTOPCLOCK_EN                     (1 << PMC_TDMSTOPCLOCK_OFFS)
+#define PMC_TDMSTOPCLOCK_STOP                   (0 << PMC_TDMSTOPCLOCK_OFFS)
+
+#define PMC_PEXSTOPCLOCK_OFFS(port)             ((port) < 8 ? (5 + (port)) : (18 + (port)))
+#define PMC_PEXSTOPCLOCK_MASK(port)             (1 << PMC_PEXSTOPCLOCK_OFFS(port))
+#define PMC_PEXSTOPCLOCK_EN(port)               (1 << PMC_PEXSTOPCLOCK_OFFS(port))
+#define PMC_PEXSTOPCLOCK_STOP(port)             (0 << PMC_PEXSTOPCLOCK_OFFS(port))
+
+#define PMC_USBSTOPCLOCK_OFFS(port)             ((port) < 3 ? (18 + (port)) : 0)
+#define PMC_USBSTOPCLOCK_MASK(port)             (1 << PMC_USBSTOPCLOCK_OFFS(port))
+#define PMC_USBSTOPCLOCK_EN(port)               (1 << PMC_USBSTOPCLOCK_OFFS(port))
+#define PMC_USBSTOPCLOCK_STOP(port)             (0 << PMC_USBSTOPCLOCK_OFFS(port))
+
+#define PMC_SDIOSTOPCLOCK_OFFS                  17
+#define PMC_SDIOSTOPCLOCK_MASK                  (1 << PMC_SDIOSTOPCLOCK_OFFS)
+#define PMC_SDIOSTOPCLOCK_EN                    (1 << PMC_SDIOSTOPCLOCK_OFFS)
+#define PMC_SDIOSTOPCLOCK_STOP                  (0 << PMC_SDIOSTOPCLOCK_OFFS)
+
+#define PMC_RUNITSTOPCLOCK_OFFS                 24
+#define PMC_RUNITSTOPCLOCK_MASK                 (1 << PMC_RUNITSTOPCLOCK_OFFS)
+#define PMC_RUNITSTOPCLOCK_EN                   (1 << PMC_RUNITSTOPCLOCK_OFFS)
+#define PMC_RUNITSTOPCLOCK_STOP                 (0 << PMC_RUNITSTOPCLOCK_OFFS)
+
+#define PMC_XORSTOPCLOCK_OFFS                   22
+#define PMC_XORSTOPCLOCK_MASK                   (1 << PMC_XORSTOPCLOCK_OFFS)
+#define PMC_XORSTOPCLOCK_EN                     (1 << PMC_XORSTOPCLOCK_OFFS)
+#define PMC_XORSTOPCLOCK_STOP                   (0 << PMC_XORSTOPCLOCK_OFFS)
+
+#define PMC_SATASTOPCLOCK_OFFS(ch)              (ch == 0 ? 14 : 29)
+#define PMC_SATASTOPCLOCK_MASK(ch)              (3 << PMC_SATASTOPCLOCK_OFFS(ch))
+#define PMC_SATASTOPCLOCK_EN(ch)                (3 << PMC_SATASTOPCLOCK_OFFS(ch))
+#define PMC_SATASTOPCLOCK_STOP(ch)              (0 << PMC_SATASTOPCLOCK_OFFS(ch))
+
+#define PMC_CESASTOPCLOCK_OFFS                  23
+#define PMC_CESASTOPCLOCK_MASK                  (1 << PMC_CESASTOPCLOCK_OFFS)
+#define PMC_CESASTOPCLOCK_EN                    (1 << PMC_CESASTOPCLOCK_OFFS)
+#define PMC_CESASTOPCLOCK_STOP                  (0 << PMC_CESASTOPCLOCK_OFFS)
+
+#define PMC_GESTOPCLOCK_OFFS(port)              ((port) < 4 ? (4 - (port)) : 0)
+#define PMC_GESTOPCLOCK_MASK(port)              (1 << PMC_GESTOPCLOCK_OFFS(port))
+#define PMC_GESTOPCLOCK_EN(port)                (1 << PMC_GESTOPCLOCK_OFFS(port))
+#define PMC_GESTOPCLOCK_STOP(port)              (0 << PMC_GESTOPCLOCK_OFFS(port))
+
+#define PMC_NETASTOPCLOCK_OFFS                  13
+#define PMC_NETASTOPCLOCK_MASK                  (1 << PMC_NETASTOPCLOCK_OFFS)
+#define PMC_NETASTOPCLOCK_EN                    (1 << PMC_NETASTOPCLOCK_OFFS)
+#define PMC_NETASTOPCLOCK_STOP                  (0 << PMC_NETASTOPCLOCK_OFFS)
+
+#define PMC_LCDSTOPCLOCK_OFFS                   16
+#define PMC_LCDSTOPCLOCK_MASK                   (1 << PMC_LCDSTOPCLOCK_OFFS)
+#define PMC_LCDSTOPCLOCK_EN                     (1 << PMC_LCDSTOPCLOCK_OFFS)
+#define PMC_LCDSTOPCLOCK_STOP                   (0 << PMC_LCDSTOPCLOCK_OFFS)
+
+#define PMC_IDMASTOPCLOCK_OFFS                  21
+#define PMC_IDMASTOPCLOCK_MASK                  (1 << PMC_IDMASTOPCLOCK_OFFS)
+#define PMC_IDMASTOPCLOCK_EN                    (1 << PMC_IDMASTOPCLOCK_OFFS)
+#define PMC_IDMASTOPCLOCK_STOP                  (0 << PMC_IDMASTOPCLOCK_OFFS)
+
+#define PMC_DDRSTOPCLOCK_OFFS                   28
+#define PMC_DDRSTOPCLOCK_MASK                   (1 << PMC_DDRSTOPCLOCK_OFFS)
+#define PMC_DDRSTOPCLOCK_EN                     (1 << PMC_DDRSTOPCLOCK_OFFS)
+#define PMC_DDRSTOPCLOCK_STOP                   (0 << PMC_DDRSTOPCLOCK_OFFS)
+
+#define SATA_IMP_TX_SSC_CTRL_REG(port)          (0xA2810 + (port) * 0x2000)
+#define SATA_GEN_1_SET_0_REG(port)                      (0xA2834 + (port) * 0x2000)
+#define SATA_GEN_1_SET_1_REG(port)                      (0xA2838 + (port) * 0x2000)
+#define SATA_GEN_2_SET_0_REG(port)                      (0xA283C + (port) * 0x2000)
+#define SATA_GEN_2_SET_1_REG(port)                      (0xA2840 + (port) * 0x2000)
+
+#define SATA_PWR_PLL_CTRL_REG(port)                     (0xA2804 + (port) * 0x2000)
+#define SATA_DIG_LP_ENA_REG(port)                       (0xA288C + (port) * 0x2000)
+#define SATA_REF_CLK_SEL_REG(port)                      (0xA2918 + (port) * 0x2000)
+#define SATA_COMPHY_CTRL_REG(port)                      (0xA2920 + (port) * 0x2000)
+#define SATA_LP_PHY_EXT_CTRL_REG(port)          (0xA2058 + (port) * 0x2000)
+#define SATA_LP_PHY_EXT_STAT_REG(port)          (0xA205C + (port) * 0x2000)
+
+#define SGMII_PWR_PLL_CTRL_REG(port)            (0x72E04 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define SGMII_DIG_LP_ENA_REG(port)              (0x72E8C + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define SGMII_REF_CLK_SEL_REG(port)             (0x72F18 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define SGMII_SERDES_CFG_REG(port)              (0x724A0 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define SGMII_SERDES_STAT_REG(port)             (0x724A4 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define SGMII_COMPHY_CTRL_REG(port)             (0x72F20 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+#define QSGMII_GEN_1_SETTING_REG(port)          (0x72E38 + ((port) % 2) * 0x4000 - ((port) / 2) * 0x40000)
+
+#define SERDES_LINE_MUX_REG_0_7                 0x18270
+#define SERDES_LINE_MUX_REG_8_15                0x18274
 #define QSGMII_CONTROL_1_REG                    0x18404
 /* Controler environment registers offsets */
-#define GEN_PURP_RES_1_REG			0x182F4
-#define GEN_PURP_RES_2_REG			0x182F8
+#define GEN_PURP_RES_1_REG                      0x182F4
+#define GEN_PURP_RES_2_REG                      0x182F8
 
-#define MPP_CONTROL_REG(id)			(0x18000 + (id * 4))
+#define MPP_CONTROL_REG(id)                     (0x18000 + (id * 4))
 
 /* Sample at Reset */
-#define MPP_SAMPLE_AT_RESET(id)			(0x18230 + (id * 4))
+#define MPP_SAMPLE_AT_RESET(id)                 (0xE8200 + ( id * 0x4 ))
 
 /* SYSRSTn Length Counter */
-#define SYSRST_LENGTH_COUNTER_REG		0x18250
-#define SLCR_COUNT_OFFS				0
-#define SLCR_COUNT_MASK				(0x1FFFFFFF << SLCR_COUNT_OFFS)
-#define SLCR_CLR_OFFS				31
-#define SLCR_CLR_MASK				(1 << SLCR_CLR_OFFS)
+#define SYSRST_LENGTH_COUNTER_REG               0x18250
+#define SLCR_COUNT_OFFS                         0
+#define SLCR_COUNT_MASK                         (0x1FFFFFFF << SLCR_COUNT_OFFS)
+#define SLCR_CLR_OFFS                           31
+#define SLCR_CLR_MASK                           (1 << SLCR_CLR_OFFS)
 
 /* Device ID */
-#define CHIP_BOND_REG				0x18238
-#define PCKG_OPT_MASK				0x3
-
-#define MPP_OUTPUT_DRIVE_REG			0x184E4
-#define MPP_GE_A_OUTPUT_DRIVE_OFFS		6
-#define MPP_GE_A_1_8_OUTPUT_DRIVE		(0x1 << MPP_GE_A_OUTPUT_DRIVE_OFFS)
-#define MPP_GE_A_2_5_OUTPUT_DRIVE		(0x2 << MPP_GE_A_OUTPUT_DRIVE_OFFS)
-#define MPP_GE_B_OUTPUT_DRIVE_OFFS		14
-#define MPP_GE_B_1_8_OUTPUT_DRIVE		(0x1 << MPP_GE_B_OUTPUT_DRIVE_OFFS)
-#define MPP_GE_B_2_5_OUTPUT_DRIVE		(0x2 << MPP_GE_B_OUTPUT_DRIVE_OFFS)
-
-#define MSAR_BOOT_MODE_OFFS			5
-#define MSAR_BOOT_MODE_MASK			(0xF << MSAR_BOOT_MODE_OFFS)
-#define MSAR_BOOT_NOR				(0x0 << MSAR_BOOT_MODE_OFFS)
-#define MSAR_BOOT_SPI				(0x3 << MSAR_BOOT_MODE_OFFS)
-#define MSAR_BOOT_DOVE_NAND			(0x1 << MSAR_BOOT_MODE_OFFS)
-#define MSAR_BOOT_LEGACY_NAND			(0x6 << MSAR_BOOT_MODE_OFFS)
-
-#define MSAR_TCLK_OFFS				28
-#define MSAR_TCLK_MASK				(0x1 << MSAR_TCLK_OFFS)
+#define CHIP_BOND_REG                           0x18238
+#define PCKG_OPT_MASK                           0x3
+
+#define MPP_OUTPUT_DRIVE_REG                    0x184E4
+#define MPP_GE_A_OUTPUT_DRIVE_OFFS              6
+#define MPP_GE_A_1_8_OUTPUT_DRIVE               (0x1 << MPP_GE_A_OUTPUT_DRIVE_OFFS)
+#define MPP_GE_A_2_5_OUTPUT_DRIVE               (0x2 << MPP_GE_A_OUTPUT_DRIVE_OFFS)
+#define MPP_GE_B_OUTPUT_DRIVE_OFFS              14
+#define MPP_GE_B_1_8_OUTPUT_DRIVE               (0x1 << MPP_GE_B_OUTPUT_DRIVE_OFFS)
+#define MPP_GE_B_2_5_OUTPUT_DRIVE               (0x2 << MPP_GE_B_OUTPUT_DRIVE_OFFS)
+
+#define MSAR_BOOT_MODE_OFFS                     5
+#define MSAR_BOOT_MODE_MASK                     (0xF << MSAR_BOOT_MODE_OFFS)
+#define MSAR_BOOT_NOR                           (0x0 << MSAR_BOOT_MODE_OFFS)
+#define MSAR_BOOT_SPI                           (0x3 << MSAR_BOOT_MODE_OFFS)
+#define MSAR_BOOT_DOVE_NAND                     (0x1 << MSAR_BOOT_MODE_OFFS)
+#define MSAR_BOOT_LEGACY_NAND                   (0x6 << MSAR_BOOT_MODE_OFFS)
+
+#define MSAR_TCLK_OFFS                          28
+#define MSAR_TCLK_MASK                          (0x1 << MSAR_TCLK_OFFS)
 
 /*****************/
 /* PUP registers */
 /*****************/
-#define PUP_EN_REG				0x1864C
+#define PUP_EN_REG                              0x1864C
 
 /* Extract CPU, L2, DDR clocks SAR value from
 ** SAR bits 24-27
 */
-#define MSAR_CPU_CLK_IDX(sar0, sar1)		((((sar0) >> 21) & 0x7) + ((((sar1) >> 20) & 1) << 3))
-#define MSAR_CPU_CLK_TWSI(sar0, sar1)		((((sar0) >> 2)  & 0x7) + (((sar1) & 1) << 3))
-#define MSAR_DDR_L2_CLK_RATIO_IDX(sar0, sar1)	((((sar0) >> 24) & 0xF) + ((((sar1) >> 19) & 1) << 4))
-#define MSAR_DDR_L2_CLK_RATIO_TWSI(sar0)	(((sar0) >> 1)  & 0xF)
+#define MSAR_CPU_CLK_IDX(sar0, sar1)            ((((sar0) >> 21) & 0x7) + ((((sar1) >> 20) & 1) << 3))
+#define MSAR_CPU_CLK_TWSI(sar0, sar1)           ((((sar0) >> 2)  & 0x7) + (((sar1) & 1) << 3))
+#define MSAR_DDR_L2_CLK_RATIO_IDX(sar0, sar1)   ((((sar0) >> 24) & 0xF) + ((((sar1) >> 19) & 1) << 4))
+#define MSAR_DDR_L2_CLK_RATIO_TWSI(sar0)        (((sar0) >> 1)  & 0xF)
 
 #ifndef MV_ASMLANGUAGE
 
-#define MV_CPU_CLK_TBL { 1000, 1066, 1200, 1333, 1500, 1666, 1800, 2000,\
-			  600,  667,  800, 1600, 2133, 2200, 2400, 0 }
+#define MV_CPU_CLK_TBL { 1000, 1066, 1200, 1333, 1500, 1666, 1800, 2000, \
+			 600,  667,  800, 1600, 2133, 2200, 2400, 0 }
 
 /*		cpu	l2c	hclk	ddr	*/
 #define MV_DDR_L2_CLK_RATIO_TBL    { \
-/*00*/	{	1,	1,	4,	2	},\
-/*01*/	{	1,	2,	2,	2	},\
-/*02*/	{	2,	2,	6,	3	},\
-/*03*/	{	2,	2,	3,	3	},\
-/*04*/	{	1,	2,	3,	3	},\
-/*05*/	{	1,	2,	4,	2	},\
-/*06*/	{	1,	1,	2,	2	},\
-/*07*/	{	2,	3,	6,	6	},\
-/*08*/	{	2,	3,	5,	5	},\
-/*09*/	{	1,	2,	6,	3	},\
-/*10*/	{	2,	4,	10,	5	},\
-/*11*/	{	1,	3,	6,	6	},\
-/*12*/	{	1,	2,	4,	4	},\
-/*13*/	{	1,	3,	6,	3	},\
-/*14*/	{	1,	2,	5,	5	},\
-/*15*/	{	2,	2,	5,	5	},\
-/*16*/	{	1,	1,	3,	3	},\
-/*17*/	{	2,	5,	10,	10	},\
-/*18*/	{	1,	3,	8,	4	},\
-/*19*/	{	1,	1,	2,	1	},\
-/*20*/	{	2,	3,	6,	3	},\
-/*21*/	{	1,	2,	8,	4	},\
-/*22*/	{	2,	5,	10,	5	} \
+/*00*/ {       1,      1,      4,      2       }, \
+/*01*/ {       1,      2,      2,      2       }, \
+/*02*/ {       2,      2,      6,      3       }, \
+/*03*/ {       2,      2,      3,      3       }, \
+/*04*/ {       1,      2,      3,      3       }, \
+/*05*/ {       1,      2,      4,      2       }, \
+/*06*/ {       1,      1,      2,      2       }, \
+/*07*/ {       2,      3,      6,      6       }, \
+/*08*/ {       2,      3,      5,      5       }, \
+/*09*/ {       1,      2,      6,      3       }, \
+/*10*/ {       2,      4,      10,     5       }, \
+/*11*/ {       1,      3,      6,      6       }, \
+/*12*/ {       1,      2,      4,      4       }, \
+/*13*/ {       1,      3,      6,      3       }, \
+/*14*/ {       1,      2,      5,      5       }, \
+/*15*/ {       2,      2,      5,      5       }, \
+/*16*/ {       1,      1,      3,      3       }, \
+/*17*/ {       2,      5,      10,     10      }, \
+/*18*/ {       1,      3,      8,      4       }, \
+/*19*/ {       1,      1,      2,      1       }, \
+/*20*/ {       2,      3,      6,      3       }, \
+/*21*/ {       1,      2,      8,      4       }, \
+/*22*/ {       2,      5,      10,     5       } \
 }
 
 /* These macros help units to identify a target Mport Arbiter group */
 #define MV_TARGET_IS_DRAM(target)   \
-		((target >= SDRAM_CS0) && (target <= SDRAM_CS3))
+	((target >= SDRAM_CS0) && (target <= SDRAM_CS3))
 
 #define MV_TARGET_IS_PEX0(target)   \
-		((target >= PEX0_MEM) && (target <= PEX0_IO))
+	((target >= PEX0_MEM) && (target <= PEX0_IO))
 #define MV_TARGET_IS_PEX1(target)   \
-		((target >= PEX1_MEM) && (target <= PEX1_IO))
+	((target >= PEX1_MEM) && (target <= PEX1_IO))
 #define MV_TARGET_IS_PEX2(target)   \
-		((target >= PEX2_MEM) && (target <= PEX2_IO))
+	((target >= PEX2_MEM) && (target <= PEX2_IO))
 #define MV_TARGET_IS_PEX3(target)   \
-		((target >= PEX3_MEM) && (target <= PEX3_IO))
+	((target >= PEX3_MEM) && (target <= PEX3_IO))
 #define MV_TARGET_IS_PEX4(target)   \
-		((target >= PEX4_MEM) && (target <= PEX4_IO))
+	((target >= PEX4_MEM) && (target <= PEX4_IO))
 #define MV_TARGET_IS_PEX5(target)   \
-		((target >= PEX5_MEM) && (target <= PEX5_IO))
+	((target >= PEX5_MEM) && (target <= PEX5_IO))
 #define MV_TARGET_IS_PEX6(target)   \
-		((target >= PEX6_MEM) && (target <= PEX6_IO))
+	((target >= PEX6_MEM) && (target <= PEX6_IO))
 #define MV_TARGET_IS_PEX7(target)   \
-		((target >= PEX7_MEM) && (target <= PEX7_IO))
+	((target >= PEX7_MEM) && (target <= PEX7_IO))
 #define MV_TARGET_IS_PEX8(target)   \
-		((target >= PEX8_MEM) && (target <= PEX8_IO))
+	((target >= PEX8_MEM) && (target <= PEX8_IO))
 #define MV_TARGET_IS_PEX9(target)   \
-		((target >= PEX9_MEM) && (target <= PEX9_IO))
+	((target >= PEX9_MEM) && (target <= PEX9_IO))
 
-#define MV_TARGET_IS_PEX(target)	((target >= PEX0_MEM) && (target <= PEX9_IO))
+#define MV_TARGET_IS_PEX(target)        ((target >= PEX0_MEM) && (target <= PEX9_IO))
 
-#define MV_TARGET_IS_DEVICE(target)	((target >= DEVICE_CS0) && (target <= DEVICE_CS3))
+#define MV_TARGET_IS_DEVICE(target)     ((target >= DEVICE_CS0) && (target <= DEVICE_CS3))
 
 #define MV_PCI_DRAM_BAR_TO_DRAM_TARGET(bar)   0
 
@@ -465,119 +463,118 @@ extern "C" {
 
 #define TCLK_TO_COUNTER_RATIO   1   /* counters running in Tclk */
 
-
 #define BOOT_TARGETS_NAME_ARRAY {	\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	BOOT_ROM_CS,			\
-	TBL_TERM, 			\
-	TBL_TERM, 			\
-	TBL_TERM,			\
-	TBL_TERM,			\
-	TBL_TERM,			\
-	TBL_TERM,			\
-	TBL_TERM,			\
-	BOOT_ROM_CS			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		BOOT_ROM_CS,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		TBL_TERM,			\
+		BOOT_ROM_CS			\
 }
 
-#define START_DEV_CS   		DEV_CS0
-#define DEV_TO_TARGET(dev)	((dev) + START_DEV_CS)
+#define START_DEV_CS            DEV_CS0
+#define DEV_TO_TARGET(dev)      ((dev) + START_DEV_CS)
 
-#define PCI_IF0_MEM0		PEX0_MEM
-#define PCI_IF0_IO		PEX0_IO
+#define PCI_IF0_MEM0            PEX0_MEM
+#define PCI_IF0_IO              PEX0_IO
 
 /* This enumerator defines the Marvell controller target ID  (see Address map) */
 typedef enum _mvTargetId {
-    DRAM_TARGET_ID	= 0,	/* Port 0 -> DRAM interface		*/
-    DEV_TARGET_ID	= 1,	/* Port 1 -> Device port, BootROM, SPI	*/
-    PEX0_2_TARGET_ID	= 4,	/* Port 4 -> PCI Express 0 and 2	*/
-    PEX1_3_TARGET_ID	= 8,	/* Port 4 -> PCI Express 1 and 3	*/
-    CRYPT_TARGET_ID	= 9,	/* Port 9 --> Crypto Engine SRAM	*/
-    PNC_BM_TARGET_ID	= 12,  	/* Port 12 -> PNC + BM Unit		*/
-    MAX_TARGETS_ID
+	DRAM_TARGET_ID      = 0,        /* Port 0 -> DRAM interface		*/
+	DEV_TARGET_ID       = 1,        /* Port 1 -> Device port, BootROM, SPI	*/
+	PEX0_2_TARGET_ID    = 4,        /* Port 4 -> PCI Express 0 and 2	*/
+	PEX1_3_TARGET_ID    = 8,        /* Port 4 -> PCI Express 1 and 3	*/
+	CRYPT_TARGET_ID     = 9,        /* Port 9 --> Crypto Engine SRAM	*/
+	PNC_BM_TARGET_ID    = 12,       /* Port 12 -> PNC + BM Unit		*/
+	MAX_TARGETS_ID
 } MV_TARGET_ID;
 
 /*
-typedef enum {
-	SERDES_UNIT_UNCONNECTED	= 0x0,
-	SERDES_UNIT_PEX		= 0x1,
-	SERDES_UNIT_SATA	= 0x2,
-	SERDES_UNIT_SGMII0	= 0x3,
-	SERDES_UNIT_SGMII1	= 0x4,
-	SERDES_UNIT_SGMII2	= 0x5,
-	SERDES_UNIT_SGMII3	= 0x6,
-	SERDES_UNIT_QSGMII	= 0x7
-} MV_SERDES_UNIT_INDX;
-*/
+   typedef enum {
+        SERDES_UNIT_UNCONNECTED	= 0x0,
+        SERDES_UNIT_PEX		= 0x1,
+        SERDES_UNIT_SATA	= 0x2,
+        SERDES_UNIT_SGMII0	= 0x3,
+        SERDES_UNIT_SGMII1	= 0x4,
+        SERDES_UNIT_SGMII2	= 0x5,
+        SERDES_UNIT_SGMII3	= 0x6,
+        SERDES_UNIT_QSGMII	= 0x7
+   } MV_SERDES_UNIT_INDX;
+ */
 
 /*
-	This structure refrect registers:
-	Serdes 0-7 selectors		0x18270
-	and Serdes 8-15 selectors  	0x18274
-*/
+        This structure refrect registers:
+        Serdes 0-7 selectors		0x18270
+        and Serdes 8-15 selectors       0x18274
+ */
 #ifndef MV88F78X60_Z1
 #define SERDES_CFG {	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 0 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 1 */	\
-	{0, 1, -1 ,  2, -1, -1, -1, -1}, /* Lane 2 */	\
-	{0, 1, -1 , -1,  2, -1, -1,  3}, /* Lane 3 */	\
-	{0, 1,  2 , -1, -1,  3, -1, -1}, /* Lane 4 */	\
-	{0, 1,  2 , -1,  3, -1, -1,  4}, /* Lane 5 */	\
-	{0, 1,  2 ,  4, -1,  3, -1, -1}, /* Lane 6 */	\
-	{0, 1, -1 ,  2, -1, -1,  3, -1}, /* Lane 7*/	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 8 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 9 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 10 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 11 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 12 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 13 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 14 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}	 /* Lane 15 */	\
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 0 */   \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 1 */   \
+		{ 0, 1, -1,  2, -1, -1, -1, -1 },       /* Lane 2 */   \
+		{ 0, 1, -1, -1,  2, -1, -1,  3 },       /* Lane 3 */   \
+		{ 0, 1,  2, -1, -1,  3, -1, -1 },       /* Lane 4 */   \
+		{ 0, 1,  2, -1,  3, -1, -1,  4 },       /* Lane 5 */   \
+		{ 0, 1,  2,  4, -1,  3, -1, -1 },       /* Lane 6 */   \
+		{ 0, 1, -1,  2, -1, -1,  3, -1 },       /* Lane 7*/    \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 8 */   \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 9 */   \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 10 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 11 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 12 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 13 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 14 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 } /* Lane 15 */	\
 }
 
 #else
 #define SERDES_CFG {	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 0 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 1 */	\
-	{0, 1, -1 ,  2, -1, -1, -1, -1}, /* Lane 2 */	\
-	{0, 1, -1 , -1,  2, -1, -1, -1}, /* Lane 3 */	\
-	{0, 1,  2 , -1, -1,  3, -1, -1}, /* Lane 4 */	\
-	{0, 1,  2 , -1,  3, -1, -1,  4}, /* Lane 5 */	\
-	{0, 1, -1 , -1, -1,  2,  3, -1}, /* Lane 6 */	\
-	{0, 1, -1 ,  2, -1, -1,  3, -1}, /* Lane 7*/	\
-	{0, 1,  2 , -1, -1, -1,  3,  4}, /* Lane 8 */	\
-	{0, 1,  2 ,  3, -1, -1, -1, -1}, /* Lane 9 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 10 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 11 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 12 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 13 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}, /* Lane 14 */	\
-	{0, 1, -1 , -1, -1, -1, -1, -1}	 /* Lane 15 */	\
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 0 */   \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 1 */   \
+		{ 0, 1, -1,  2, -1, -1, -1, -1 },       /* Lane 2 */   \
+		{ 0, 1, -1, -1,  2, -1, -1, -1 },       /* Lane 3 */   \
+		{ 0, 1,  2, -1, -1,  3, -1, -1 },       /* Lane 4 */   \
+		{ 0, 1,  2, -1,  3, -1, -1,  4 },       /* Lane 5 */   \
+		{ 0, 1, -1, -1, -1,  2,  3, -1 },       /* Lane 6 */   \
+		{ 0, 1, -1,  2, -1, -1,  3, -1 },       /* Lane 7*/    \
+		{ 0, 1,  2, -1, -1, -1,  3,  4 },       /* Lane 8 */   \
+		{ 0, 1,  2,  3, -1, -1, -1, -1 },       /* Lane 9 */   \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 10 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 11 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 12 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 13 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 },       /* Lane 14 */  \
+		{ 0, 1, -1, -1, -1, -1, -1, -1 } /* Lane 15 */	\
 }
 #endif
 
 /*
-	This enum should reflect the units numbers in register
-	space which we will need when accessing the HW
-*/
+        This enum should reflect the units numbers in register
+        space which we will need when accessing the HW
+ */
 
 typedef enum {
-	PEX0_0x4	= 0,
-	PEX0_1x4	= 1,
-	PEX0_2x4	= 2,
-	PEX0_3x4	= 3,
-	PEX1_0x4	= 4,
-	PEX1_1x4	= 5,
-	PEX1_2x4	= 6,
-	PEX1_3x4	= 7,
-	PEX2_0x4	= 8,
-	PEX3_0x4	= 9,
-	PEXIF_MAX	= 10
+	PEX0_0x4        = 0,
+	PEX0_1x4        = 1,
+	PEX0_2x4        = 2,
+	PEX0_3x4        = 3,
+	PEX1_0x4        = 4,
+	PEX1_1x4        = 5,
+	PEX1_2x4        = 6,
+	PEX1_3x4        = 7,
+	PEX2_0x4        = 8,
+	PEX3_0x4        = 9,
+	PEXIF_MAX       = 10
 } MV_PEXIF_INDX;
 
 #endif /* MV_ASMLANGUAGE */
@@ -586,4 +583,4 @@ typedef enum {
 }
 #endif /* __cplusplus */
 
-#endif
+#endif
\ No newline at end of file
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
index 7732082..ce36513 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/ctrlEnv/mvCtrlEnvSpec.h
@@ -1,64 +1,64 @@
 /*******************************************************************************
-Copyright (C) Marvell International Ltd. and its affiliates
+   Copyright (C) Marvell International Ltd. and its affiliates
 
-This software file (the "File") is owned and distributed by Marvell
-International Ltd. and/or its affiliates ("Marvell") under the following
-alternative licensing terms.  Once you have made an election to distribute the
-File under one of the following license alternatives, please (i) delete this
-introductory statement regarding license alternatives, (ii) delete the two
-license alternatives that you have not elected to use and (iii) preserve the
-Marvell copyright notice above.
+   This software file (the "File") is owned and distributed by Marvell
+   International Ltd. and/or its affiliates ("Marvell") under the following
+   alternative licensing terms.  Once you have made an election to distribute the
+   File under one of the following license alternatives, please (i) delete this
+   introductory statement regarding license alternatives, (ii) delete the two
+   license alternatives that you have not elected to use and (iii) preserve the
+   Marvell copyright notice above.
 
 ********************************************************************************
-Marvell Commercial License Option
+   Marvell Commercial License Option
 
-If you received this File from Marvell and you have entered into a commercial
-license agreement (a "Commercial License") with Marvell, the File is licensed
-to you under the terms of the applicable Commercial License.
+   If you received this File from Marvell and you have entered into a commercial
+   license agreement (a "Commercial License") with Marvell, the File is licensed
+   to you under the terms of the applicable Commercial License.
 
 ********************************************************************************
-Marvell GPL License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File in accordance with the terms and conditions of the General
-Public License Version 2, June 1991 (the "GPL License"), a copy of which is
-available along with the File in the license.txt file or by writing to the Free
-Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
-on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
-
-THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
-WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
-DISCLAIMED.  The GPL License provides additional details about this warranty
-disclaimer.
+   Marvell GPL License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File in accordance with the terms and conditions of the General
+   Public License Version 2, June 1991 (the "GPL License"), a copy of which is
+   available along with the File in the license.txt file or by writing to the Free
+   Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 or
+   on the worldwide web at http://www.gnu.org/licenses/gpl.txt.
+
+   THE FILE IS DISTRIBUTED AS-IS, WITHOUT WARRANTY OF ANY KIND, AND THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE ARE EXPRESSLY
+   DISCLAIMED.  The GPL License provides additional details about this warranty
+   disclaimer.
 ********************************************************************************
-Marvell BSD License Option
-
-If you received this File from Marvell, you may opt to use, redistribute and/or
-modify this File under the following licensing terms.
-Redistribution and use in source and binary forms, with or without modification,
-are permitted provided that the following conditions are met:
-
-    *   Redistributions of source code must retain the above copyright notice,
-	this list of conditions and the following disclaimer.
-
-    *   Redistributions in binary form must reproduce the above copyright
-	notice, this list of conditions and the following disclaimer in the
-	documentation and/or other materials provided with the distribution.
-
-    *   Neither the name of Marvell nor the names of its contributors may be
-	used to endorse or promote products derived from this software without
-	specific prior written permission.
-
-THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
-ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
-WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
-DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
-ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
-(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
-LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
-ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
-(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
-SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+   Marvell BSD License Option
+
+   If you received this File from Marvell, you may opt to use, redistribute and/or
+   modify this File under the following licensing terms.
+   Redistribution and use in source and binary forms, with or without modification,
+   are permitted provided that the following conditions are met:
+
+*   Redistributions of source code must retain the above copyright notice,
+        this list of conditions and the following disclaimer.
+
+*   Redistributions in binary form must reproduce the above copyright
+        notice, this list of conditions and the following disclaimer in the
+        documentation and/or other materials provided with the distribution.
+
+*   Neither the name of Marvell nor the names of its contributors may be
+        used to endorse or promote products derived from this software without
+        specific prior written permission.
+
+   THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
+   ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+   WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+   DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
+   ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+   (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+   LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
+   ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+   (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
+   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 
 *******************************************************************************/
 
@@ -79,26 +79,18 @@ extern "C" {
 #define SOC_NAME_PREFIX				"MV88F"
 
 /*
- * Armada-XP Units Address decoding
+ * Avanta-LP Units Address decoding
  */
-#define MV_DRAM_REGS_OFFSET			(0x0)
-#define MV_AURORA_L2_REGS_OFFSET		(0x8000)
-#define MV_RTC_REGS_OFFSET			(0x10300)
-#define MV_DEV_BUS_REGS_OFFSET			(0x10400)
-#ifdef MV88F78X60_Z1
-#define MV_SPI_REGS_OFFSET(unit)               (0x10600)
-#else
+#define MV_DRAM_REGS_OFFSET                     (0x0)
+#define MV_AURORA_L2_REGS_OFFSET                (0x8000)
+#define MV_RTC_REGS_OFFSET                      (0x10300)
+#define MV_DEV_BUS_REGS_OFFSET                  (0x10400)
 #define MV_SPI_REGS_OFFSET(unit)		(0x10600 + (unit * 0x80))
-#endif
 #define MV_TWSI_SLAVE_REGS_OFFSET(chanNum)	(0x11000 + (chanNum * 0x100))
 #define MV_UART_REGS_OFFSET(chanNum)		(0x12000 + (chanNum * 0x100))
 #define MV_RUNIT_PMU_REGS_OFFSET		(0x1C000)
 #define MV_MPP_REGS_OFFSET			(0x18000)
-#ifdef MV88F78X60_Z1
-#define MV_GPP_REGS_OFFSET(unit)		(0x18100 + ((unit) * 0x20))
-#else
 #define MV_GPP_REGS_OFFSET(unit)		(0x18100 + ((unit) * 0x40))
-#endif
 #define MV_MISC_REGS_OFFSET			(0x18200)
 #define MV_CLK_CMPLX_REGS_OFFSET	(0x18700)
 #define MV_MBUS_REGS_OFFSET			(0x20000)
@@ -151,7 +143,7 @@ extern "C" {
 #ifdef CONFIG_ARMADA_XP_ERRATA_SMI_1
 	#define MV_ETH_SMI_PORT   1
 #else
-    #define MV_ETH_SMI_PORT   0
+	#define MV_ETH_SMI_PORT   0
 #endif
 
 #define MV_SERDES_NUM_TO_PEX_NUM(sernum)	((sernum < 8) ? (sernum) : (8 + (sernum/12)))
@@ -306,11 +298,137 @@ extern "C" {
 
 #ifndef MV_ASMLANGUAGE
 
-#define TBL_UNUSED	0	/* Used to mark unused entry */
+#define TBL_UNUSED      0       /* Used to mark unused entry */
+
+#define MPP_GROUP_0_TYPE { \
+		0x11111111,     /* NAND_V2_BOOT_DEVICE  */ \
+		0x00020020,     /* SPI_BOOT_DEVICE	*/ \
+		0x44024420,     /* SPI_BOOT_DEVICE & SPDIF Audio	*/ \
+		0x55555555,     /* NAND_V1_BOOT_DEVICE	*/ \
+}
+
+typedef enum {
+	NAND_BOOT_V2,
+	SPI0_BOOT,
+	SPI0_BOOT_SPDIF_AUDIO,
+	NAND_BOOT_V1
+} MV_GROUP_0_TYPE;
+
+#define MPP_GROUP_1_TYPE { \
+		0x22111111,     /* NAND_V2_BOOT_DEVICE  */ \
+		0x22000022,     /* SPI_BOOT_DEVICE	*/ \
+		0x22044022,     /* SPI_BOOT_DEVICE & SPDIF Audio	*/ \
+		0x22555555,     /* NAND_V1_BOOT_DEVICE	*/ \
+}
+
+#define MV_GROUP_1_TYPE         MV_GROUP_0_TYPE
+
+#define MPP_GROUP_2_TYPE { \
+		0x33030022,     /* TDM_LQ_UNIT  */ \
+		0x11110022,     /* TDM_SL_UNIT  */ \
+		0x44440022,     /* TDM_ZL_UNIT  */ \
+		0x22222222,     /* TDM_EXT_UNIT	*/ \
+}
+
+typedef enum {
+	TDM_LQ_UNIT,
+	TDM_SL_UNIT,
+	TDM_ZL_UNIT,
+	TDM_EXT_UNIT,
+} MV_GROUP_2_TYPE;
+
+#define MPP_GROUP_3_TYPE { \
+		0x22222222,     /* GE1  */ \
+		0x00333333,     /* SDIO	*/ \
+		0x33000000,     /* SPI1_BOOT	*/ \
+		0x33333333,     /* SDIO & SPI1	*/ \
+}
+
+typedef enum {
+	GE1_UNIT,
+	SDIO_UNIT,
+	SPI1_UNIT,
+	SDIO_SPI1_UNIT,
+} MV_GROUP_3_TYPE;
+
+#define MPP_GROUP_4_TYPE { \
+		0x22222440,     /* GE1,  CPU SMI CONTROL,    TDM_LQ_UNIT */ \
+		0x22222444,     /* GE1,  CPU SMI CONTROL,    REF_CLK_OUT */ \
+		0x22222550,     /* GE1,  SWITCH SMI CONTROL, TDM_LQ_UNIT */ \
+		0x22222554,     /* GE1,  SWITCH SMI CONTROL, REF_CLK_OUT */ \
+		0x33332440,     /* SPI1, CPU SMI CONTROL,    TDM_LQ_UNIT */ \
+		0x33332444,     /* SPI1, CPU SMI CONTROL,    REF_CLK_OUT */ \
+		0x33332550,     /* SPI1, SWITCH SMI CONTROL, TDM_LQ_UNIT */ \
+		0x33332554,     /* SPI1, SWITCH SMI CONTROL, REF_CLK_OUT */ \
+}
+
+typedef enum {
+	GE1_CPU_SMI_CTRL_TDM_LQ_UNIT,
+	GE1_CPU_SMI_CTRL_REF_CLK_OUT,
+	GE1_SW_SMI_CTRL_TDM_LQ_UNIT,
+	GE1_SW_SMI_CTRL_REF_CLK_OUT,
+	SPI1_CPU_SMI_CTRL_TDM_LQ_UNIT,
+	SPI1_CPU_SMI_CTRL_REF_CLK_OUT,
+	SPI1_SW_SMI_CTRL_TDM_LQ_UNIT,
+	SPI1_SW_SMI_CTRL_REF_CLK_OUT,
+} MV_GROUP_4_TYPE;
+
+#define MPP_GROUP_5_TYPE { \
+		0x22122220,     /* GE0      , PON_TX_FAULT */ \
+		0x22122222,     /* GE0      , PON_CLK_OUT */ \
+		0x44122220,     /* SWITCH_P4, PON_TX_FAULT	 */ \
+		0x44122222,     /* SWITCH_P4, PON_CLK_OUT	 */ \
+}
+typedef enum {
+	GE0_UNIT_PON_TX_FAULT,
+	GE0_UNIT_PON_CLK_OUT,
+	SWITCH_P4_PON_TX_FAULT,
+	SWITCH_P4_PON_CLK_OUT,
+} MV_GROUP_5_TYPE;
+
+#define MPP_GROUP_6_TYPE { \
+		0x22222222,     /* GE0  */ \
+		0x44444444,     /* SWITCH_P4	*/ \
+}
 
 typedef enum {
-	TDM_UNIT_32CH
-} MV_TDM_UNIT_TYPE;
+	GE0_UNIT,
+	SWITCH_P4,
+} MV_GROUP_6_TYPE;
+
+#define MPP_GROUP_7_TYPE { \
+		0x44444444,     /* SWITCH_P4 , LED_MATRIX       */ \
+		0x44444422,     /* GE0	     , LED_MATRIX       */ \
+		0x20220244,     /* SWITCH_P4 , UA1 ,  PTP       */ \
+		0x20220222,     /* GE0	     , UA1 ,  PTP       */ \
+}
+
+typedef enum {
+	SWITCH_P4_LED_MATRIX,
+	GE0_UNIT_LED_MATRIX,
+	SWITCH_P4_UA1_PTP,
+	GE0_UNIT_UA1_PTP,
+} MV_GROUP_7_TYPE;
+
+#define MPP_GROUP_8_TYPE { \
+		0x204, /* LED_MATRIX, PTP       */ \
+}
+
+typedef enum {
+	LED_MATRIX_PTP,
+} MV_GROUP_8_TYPE;
+
+#define MPP_GROUP_TYPES { \
+		MPP_GROUP_0_TYPE, \
+		MPP_GROUP_1_TYPE, \
+		MPP_GROUP_2_TYPE, \
+		MPP_GROUP_3_TYPE, \
+		MPP_GROUP_4_TYPE, \
+		MPP_GROUP_5_TYPE, \
+		MPP_GROUP_6_TYPE, \
+		MPP_GROUP_7_TYPE, \
+		MPP_GROUP_8_TYPE, \
+}
 
 /* This enumerator defines the Marvell Units ID      */
 typedef enum _mvUnitId {
@@ -325,7 +443,10 @@ typedef enum _mvUnitId {
 	UART_UNIT_ID,
 	CESA_UNIT_ID,
 	SPI_UNIT_ID,
+	AUDIO_UNIT_ID,
 	SDIO_UNIT_ID,
+	TS_UNIT_ID,
+	XPON_UNIT_ID,
 	BM_UNIT_ID,
 	PNC_UNIT_ID,
 	MAX_UNITS_ID
@@ -344,7 +465,7 @@ typedef enum _mvDevice {
 	DEV_CS2 = 2,        /* Device connected to dev CS[2]    */
 #endif
 #if defined(MV_INCLUDE_DEVICE_CS3)
-	DEV_CS3 = 3,        /* Device connected to dev CS[2]    */
+	DEV_CS3 = 3,    /* Device connected to dev CS[2]    */
 #endif
 	BOOT_CS,        /* Device connected to BOOT dev    */
 	MV_DEV_MAX_CS = MV_DEVICE_MAX_CS
@@ -354,176 +475,173 @@ typedef enum _mvDevice {
 /* Controller peripherals are designated memory/IO address spaces that the  */
 /* controller can access. They are also refered as "targets"                */
 typedef enum _mvTarget {
-	TBL_TERM = -1, 	/* none valid target, used as targets list terminator*/
-	SDRAM_CS0,	/*  0 SDRAM chip select 0		*/
-	SDRAM_CS1,	/*  1 SDRAM chip select 1		*/
-	SDRAM_CS2,	/*  2 SDRAM chip select 2		*/
-	SDRAM_CS3,	/*  3 SDRAM chip select 3		*/
-	DEVICE_CS0,	/*  4 Device chip select 0		*/
-	DEVICE_CS1,	/*  5 Device chip select 1		*/
-	DEVICE_CS2,	/*  6 Device chip select 2		*/
-	DEVICE_CS3,	/*  7 Device chip select 3		*/
-	PEX0_MEM,	/*  8 PCI Express 0 Memory		*/
-	PEX0_IO,	/*  9 PCI Express 0 IO			*/
-	PEX1_MEM,	/* 10 PCI Express 1 Memory		*/
-	PEX1_IO,	/* 11 PCI Express 1 IO			*/
-	PEX2_MEM,	/* 12 PCI Express 2 Memory		*/
-	PEX2_IO,	/* 13 PCI Express 2 IO			*/
-	PEX3_MEM,	/* 14 PCI Express 3 Memory		*/
-	PEX3_IO,	/* 15 PCI Express 3 IO			*/
-	PEX4_MEM,	/* 16 PCI Express 4 Memory		*/
-	PEX4_IO,	/* 17 PCI Express 4 IO			*/
-	PEX5_MEM,	/* 18 PCI Express 5 Memory		*/
-	PEX5_IO,	/* 19 PCI Express 5 IO			*/
-	PEX6_MEM,	/* 20 PCI Express 6 Memory		*/
-	PEX6_IO,	/* 21 PCI Express 6 IO			*/
-	PEX7_MEM,	/* 22 PCI Express 7 Memory		*/
-	PEX7_IO,	/* 23 PCI Express 7 IO			*/
-	PEX8_MEM,	/* 24 PCI Express 8 Memory		*/
-	PEX8_IO,	/* 25 PCI Express 8 IO			*/
-	PEX9_MEM,	/* 26 PCI Express 9 Memory		*/
-	PEX9_IO,	/* 27 PCI Express 9 IO			*/
-	INTER_REGS,	/* 28 Internal registers		*/
-	DMA_UART,	/* 29 DMA based UART request		*/
-	SPI_CS0,	/* 30 SPI_CS0				*/
-	SPI_CS1,	/* 31 SPI_CS1				*/
-	SPI_CS2,	/* 32 SPI_CS2				*/
-	SPI_CS3,	/* 33 SPI_CS3				*/
-	SPI_CS4,	/* 34 SPI_CS4				*/
-	SPI_CS5,	/* 35 SPI_CS5				*/
-	SPI_CS6,	/* 36 SPI_CS6				*/
-	SPI_CS7,	/* 37 SPI_CS7				*/
-	BOOT_ROM_CS,	/* 38 BOOT_ROM_CS			*/
-	DEV_BOOCS,	/* 39 DEV_BOOCS				*/
-	PMU_SCRATCHPAD,	/* 40 PMU Scratchpad			*/
-	CRYPT0_ENG,	/* 41 Crypto0 Engine			*/
-	CRYPT1_ENG,	/* 42 Crypto1 Engine			*/
-	PNC_BM,		/* 43 PNC + BM				*/
+	TBL_TERM = -1,  /* none valid target, used as targets list terminator*/
+	SDRAM_CS0,      /*  0 SDRAM chip select 0		*/
+	SDRAM_CS1,      /*  1 SDRAM chip select 1		*/
+	SDRAM_CS2,      /*  2 SDRAM chip select 2		*/
+	SDRAM_CS3,      /*  3 SDRAM chip select 3		*/
+	DEVICE_CS0,     /*  4 Device chip select 0		*/
+	DEVICE_CS1,     /*  5 Device chip select 1		*/
+	DEVICE_CS2,     /*  6 Device chip select 2		*/
+	DEVICE_CS3,     /*  7 Device chip select 3		*/
+	PEX0_MEM,       /*  8 PCI Express 0 Memory		*/
+	PEX0_IO,        /*  9 PCI Express 0 IO			*/
+	PEX1_MEM,       /* 10 PCI Express 1 Memory		*/
+	PEX1_IO,        /* 11 PCI Express 1 IO			*/
+	PEX2_MEM,       /* 12 PCI Express 2 Memory		*/
+	PEX2_IO,        /* 13 PCI Express 2 IO			*/
+	PEX3_MEM,       /* 14 PCI Express 3 Memory		*/
+	PEX3_IO,        /* 15 PCI Express 3 IO			*/
+	PEX4_MEM,       /* 16 PCI Express 4 Memory		*/
+	PEX4_IO,        /* 17 PCI Express 4 IO			*/
+	PEX5_MEM,       /* 18 PCI Express 5 Memory		*/
+	PEX5_IO,        /* 19 PCI Express 5 IO			*/
+	PEX6_MEM,       /* 20 PCI Express 6 Memory		*/
+	PEX6_IO,        /* 21 PCI Express 6 IO			*/
+	PEX7_MEM,       /* 22 PCI Express 7 Memory		*/
+	PEX7_IO,        /* 23 PCI Express 7 IO			*/
+	PEX8_MEM,       /* 24 PCI Express 8 Memory		*/
+	PEX8_IO,        /* 25 PCI Express 8 IO			*/
+	PEX9_MEM,       /* 26 PCI Express 9 Memory		*/
+	PEX9_IO,        /* 27 PCI Express 9 IO			*/
+	INTER_REGS,     /* 28 Internal registers		*/
+	DMA_UART,       /* 29 DMA based UART request		*/
+	SPI_CS0,        /* 30 SPI_CS0				*/
+	SPI_CS1,        /* 31 SPI_CS1				*/
+	SPI_CS2,        /* 32 SPI_CS2				*/
+	SPI_CS3,        /* 33 SPI_CS3				*/
+	SPI_CS4,        /* 34 SPI_CS4				*/
+	SPI_CS5,        /* 35 SPI_CS5				*/
+	SPI_CS6,        /* 36 SPI_CS6				*/
+	SPI_CS7,        /* 37 SPI_CS7				*/
+	BOOT_ROM_CS,    /* 38 BOOT_ROM_CS			*/
+	DEV_BOOCS,      /* 39 DEV_BOOCS				*/
+	PMU_SCRATCHPAD, /* 40 PMU Scratchpad			*/
+	CRYPT0_ENG,     /* 41 Crypto0 Engine			*/
+	CRYPT1_ENG,     /* 42 Crypto1 Engine			*/
+	PNC_BM,         /* 43 PNC + BM				*/
 	MAX_TARGETS
 } MV_TARGET;
 
 #ifdef AURORA_IO_CACHE_COHERENCY
-#define DRAM_CS0_ATTR		0x1E
-#define DRAM_CS1_ATTR		0x1D
-#define DRAM_CS2_ATTR		0x1B
-#define DRAM_CS3_ATTR		0x17
+#define DRAM_CS0_ATTR           0x1E
+#define DRAM_CS1_ATTR           0x1D
+#define DRAM_CS2_ATTR           0x1B
+#define DRAM_CS3_ATTR           0x17
 #else
-#define DRAM_CS0_ATTR		0x0E
-#define DRAM_CS1_ATTR		0x0D
-#define DRAM_CS2_ATTR		0x0B
-#define DRAM_CS3_ATTR		0x07
+#define DRAM_CS0_ATTR           0x0E
+#define DRAM_CS1_ATTR           0x0D
+#define DRAM_CS2_ATTR           0x0B
+#define DRAM_CS3_ATTR           0x07
 #endif
 
 #ifdef CONFIG_MACH_AVANTA_LP_FPGA
- #define MAIN_BOOT_ATTR		0x2F	/* Boot Device CS - NOR */
- #define SEC_BOOT_ATTR		0x1D	/* BootROM - Dummy */
+ #define MAIN_BOOT_ATTR         0x2F    /* Boot Device CS - NOR */
+ #define SEC_BOOT_ATTR          0x1D    /* BootROM - Dummy */
 #else
- #define MAIN_BOOT_ATTR		0x1D	/* BootROM */
- #define SEC_BOOT_ATTR		0x2F	/* Boot Device CS */
+ #define MAIN_BOOT_ATTR         0x1D    /* BootROM */
+ #define SEC_BOOT_ATTR          0x2F    /* Boot Device CS */
 #endif
 
-#define TARGETS_DEF_ARRAY	{			\
-	{DRAM_CS0_ATTR, DRAM_TARGET_ID   }, /* SDRAM_CS0 */	\
-	{DRAM_CS1_ATTR, DRAM_TARGET_ID   }, /* SDRAM_CS1 */	\
-	{DRAM_CS2_ATTR, DRAM_TARGET_ID   }, /* SDRAM_CS0 */	\
-	{DRAM_CS3_ATTR, DRAM_TARGET_ID   }, /* SDRAM_CS1 */	\
-	{0x3E, DEV_TARGET_ID    }, /* DEVICE_CS0 */	\
-	{0x3D, DEV_TARGET_ID    }, /* DEVICE_CS1 */	\
-	{0x3B, DEV_TARGET_ID    }, /* DEVICE_CS2 */	\
-	{0x37, DEV_TARGET_ID    }, /* DEVICE_CS3 */	\
-	{0xE8, PEX0_2_TARGET_ID }, /* PEX0_LANE0_MEM */	\
-	{0xE0, PEX0_2_TARGET_ID }, /* PEX0_LANE0_IO */	\
-	{0xD8, PEX0_2_TARGET_ID }, /* PEX0_LANE1_MEM */	\
-	{0xD0, PEX0_2_TARGET_ID }, /* PEX0_LANE1_IO */	\
-	{0xB8, PEX0_2_TARGET_ID }, /* PEX0_LANE2_MEM */	\
-	{0xB0, PEX0_2_TARGET_ID }, /* PEX0_LANE2_IO */	\
-	{0x78, PEX0_2_TARGET_ID }, /* PEX0_LANE3_MEM */	\
-	{0x70, PEX0_2_TARGET_ID }, /* PEX0_LANE3_IO */	\
-	{0xE8, PEX1_3_TARGET_ID }, /* PEX1_LANE0_MEM */	\
-	{0xE0, PEX1_3_TARGET_ID }, /* PEX1_LANE0_IO */	\
-	{0xD8, PEX1_3_TARGET_ID }, /* PEX1_LANE1_MEM */	\
-	{0xD0, PEX1_3_TARGET_ID }, /* PEX1_LANE1_IO */	\
-	{0xB8, PEX1_3_TARGET_ID }, /* PEX1_LANE2_MEM */	\
-	{0xB0, PEX1_3_TARGET_ID }, /* PEX1_LANE2_IO */	\
-	{0x78, PEX1_3_TARGET_ID }, /* PEX1_LANE3_MEM */	\
-	{0x70, PEX1_3_TARGET_ID }, /* PEX1_LANE3_IO */	\
-	{0xF8, PEX0_2_TARGET_ID }, /* PEX2_LANE0_MEM */	\
-	{0xF0, PEX0_2_TARGET_ID }, /* PEX2_LANE0_IO */	\
-	{0xF8, PEX1_3_TARGET_ID }, /* PEX3_LANE0_MEM */	\
-	{0xF0, PEX1_3_TARGET_ID }, /* PEX3_LANE0_IO */	\
-	{0xFF, 0xFF             }, /* INTER_REGS */	\
-	{0x01, DEV_TARGET_ID    }, /* DMA_UART */	\
-	{0x1E, DEV_TARGET_ID    }, /* SPI_CS0 */	\
-	{0x5E, DEV_TARGET_ID    }, /* SPI_CS1 */	\
-	{0x9E, DEV_TARGET_ID    }, /* SPI_CS2 */	\
-	{0xDE, DEV_TARGET_ID    }, /* SPI_CS3 */	\
-	{0x1F, DEV_TARGET_ID    }, /* SPI_CS4 */	\
-	{0x5F, DEV_TARGET_ID    }, /* SPI_CS5 */	\
-	{0x9F, DEV_TARGET_ID    }, /* SPI_CS6 */	\
-	{0xDF, DEV_TARGET_ID    }, /* SPI_CS7 */	\
-	{MAIN_BOOT_ATTR, DEV_TARGET_ID    }, /* Main Boot device */	\
-	{SEC_BOOT_ATTR, DEV_TARGET_ID    }, /* Secondary Boot device, */	\
-	{0x2D, DEV_TARGET_ID    }, /* PMU_SCRATCHPAD */	\
-	{0x01, CRYPT_TARGET_ID  }, /* CRYPT_ENG0 */	\
-	{0x05, CRYPT_TARGET_ID  }, /* CRYPT_ENG1 */     \
-	{0x00, PNC_BM_TARGET_ID }, /* PNC_BM */		\
+#define TARGETS_DEF_ARRAY       {			\
+		{ DRAM_CS0_ATTR, DRAM_TARGET_ID   },    /* SDRAM_CS0 */	    \
+		{ DRAM_CS1_ATTR, DRAM_TARGET_ID   },    /* SDRAM_CS1 */	    \
+		{ DRAM_CS2_ATTR, DRAM_TARGET_ID   },    /* SDRAM_CS0 */	    \
+		{ DRAM_CS3_ATTR, DRAM_TARGET_ID   },    /* SDRAM_CS1 */	    \
+		{ 0x3E, DEV_TARGET_ID    },             /* DEVICE_CS0 */     \
+		{ 0x3D, DEV_TARGET_ID    },             /* DEVICE_CS1 */     \
+		{ 0x3B, DEV_TARGET_ID    },             /* DEVICE_CS2 */     \
+		{ 0x37, DEV_TARGET_ID    },             /* DEVICE_CS3 */     \
+		{ 0xE8, PEX0_2_TARGET_ID },             /* PEX0_LANE0_MEM */ \
+		{ 0xE0, PEX0_2_TARGET_ID },             /* PEX0_LANE0_IO */  \
+		{ 0xD8, PEX0_2_TARGET_ID },             /* PEX0_LANE1_MEM */ \
+		{ 0xD0, PEX0_2_TARGET_ID },             /* PEX0_LANE1_IO */  \
+		{ 0xB8, PEX0_2_TARGET_ID },             /* PEX0_LANE2_MEM */ \
+		{ 0xB0, PEX0_2_TARGET_ID },             /* PEX0_LANE2_IO */  \
+		{ 0x78, PEX0_2_TARGET_ID },             /* PEX0_LANE3_MEM */ \
+		{ 0x70, PEX0_2_TARGET_ID },             /* PEX0_LANE3_IO */  \
+		{ 0xE8, PEX1_3_TARGET_ID },             /* PEX1_LANE0_MEM */ \
+		{ 0xE0, PEX1_3_TARGET_ID },             /* PEX1_LANE0_IO */  \
+		{ 0xD8, PEX1_3_TARGET_ID },             /* PEX1_LANE1_MEM */ \
+		{ 0xD0, PEX1_3_TARGET_ID },             /* PEX1_LANE1_IO */  \
+		{ 0xB8, PEX1_3_TARGET_ID },             /* PEX1_LANE2_MEM */ \
+		{ 0xB0, PEX1_3_TARGET_ID },             /* PEX1_LANE2_IO */  \
+		{ 0x78, PEX1_3_TARGET_ID },             /* PEX1_LANE3_MEM */ \
+		{ 0x70, PEX1_3_TARGET_ID },             /* PEX1_LANE3_IO */  \
+		{ 0xF8, PEX0_2_TARGET_ID },             /* PEX2_LANE0_MEM */ \
+		{ 0xF0, PEX0_2_TARGET_ID },             /* PEX2_LANE0_IO */  \
+		{ 0xF8, PEX1_3_TARGET_ID },             /* PEX3_LANE0_MEM */ \
+		{ 0xF0, PEX1_3_TARGET_ID },             /* PEX3_LANE0_IO */  \
+		{ 0xFF, 0xFF             },             /* INTER_REGS */     \
+		{ 0x01, DEV_TARGET_ID    },             /* DMA_UART */	     \
+		{ 0x1E, DEV_TARGET_ID    },             /* SPI_CS0 */	     \
+		{ 0x5E, DEV_TARGET_ID    },             /* SPI_CS1 */	     \
+		{ 0x9E, DEV_TARGET_ID    },             /* SPI_CS2 */	     \
+		{ 0xDE, DEV_TARGET_ID    },             /* SPI_CS3 */	     \
+		{ 0x1F, DEV_TARGET_ID    },             /* SPI_CS4 */	     \
+		{ 0x5F, DEV_TARGET_ID    },             /* SPI_CS5 */	     \
+		{ 0x9F, DEV_TARGET_ID    },             /* SPI_CS6 */	     \
+		{ 0xDF, DEV_TARGET_ID    },             /* SPI_CS7 */	     \
+		{ MAIN_BOOT_ATTR, DEV_TARGET_ID    },   /* Main Boot device */	   \
+		{ SEC_BOOT_ATTR, DEV_TARGET_ID    },    /* Secondary Boot device, */	    \
+		{ 0x2D, DEV_TARGET_ID    },             /* PMU_SCRATCHPAD */ \
+		{ 0x01, CRYPT_TARGET_ID  },             /* CRYPT_ENG0 */     \
+		{ 0x05, CRYPT_TARGET_ID  },             /* CRYPT_ENG1 */     \
+		{ 0x00, PNC_BM_TARGET_ID },             /* PNC_BM */	     \
 }
 
-#define CESA_TARGET_NAME_DEF	("CRYPT_ENG0", "CRYPT_ENG1")
-#define TARGETS_NAME_ARRAY	{		\
-	"SDRAM_CS0",    /* SDRAM_CS0 */		\
-	"SDRAM_CS1",    /* SDRAM_CS1 */		\
-	"SDRAM_CS2",    /* SDRAM_CS1 */		\
-	"SDRAM_CS3",    /* SDRAM_CS1 */		\
-	"DEVICE_CS0",	/* DEVICE_CS0 */	\
-	"DEVICE_CS1",	/* DEVICE_CS1 */	\
-	"DEVICE_CS2",	/* DEVICE_CS2 */	\
-	"DEVICE_CS3",	/* DEVICE_CS3 */	\
-	"PEX0_MEM",	/* PEX0_MEM */		\
-	"PEX0_IO",	/* PEX0_IO */		\
-	"PEX1_MEM",	/* PEX1_MEM */		\
-	"PEX1_IO",	/* PEX1_IO */		\
-	"PEX2_MEM",	/* PEX2_MEM */		\
-	"PEX2_IO",	/* PEX2_IO */		\
-	"PEX3_MEM",	/* PEX3_MEM */		\
-	"PEX3_IO",	/* PEX3_IO */		\
-	"PEX4_MEM",	/* PEX4_MEM */		\
-	"PEX4_IO",	/* PEX4_IO */		\
-	"PEX5_MEM",	/* PEX5_MEM */		\
-	"PEX5_IO",	/* PEX5_IO */		\
-	"PEX6_MEM",	/* PEX6_MEM */		\
-	"PEX6_IO",	/* PEX6_IO */		\
-	"PEX7_MEM",	/* PEX7_MEM */		\
-	"PEX7_IO",	/* PEX7_IO */		\
-	"PEX8_MEM",	/* PEX8_MEM */		\
-	"PEX8_IO",	/* PEX8_IO */		\
-	"PEX9_MEM",	/* PEX9_MEM */		\
-	"PEX9_IO",	/* PEX9_IO */		\
-	"INTER_REGS",	/* INTER_REGS */	\
-	"DMA_UART",	/* DMA_UART */		\
-	"SPI_CS0",	/* SPI_CS0 */		\
-	"SPI_CS1",	/* SPI_CS1 */		\
-	"SPI_CS2",	/* SPI_CS2 */		\
-	"SPI_CS3",	/* SPI_CS3 */		\
-	"SPI_CS4",	/* SPI_CS4 */		\
-	"SPI_CS5",	/* SPI_CS5 */		\
-	"SPI_CS6",	/* SPI_CS6 */		\
-	"SPI_CS7",	/* SPI_CS7 */		\
-	"BOOT_ROM_CS",	/* BOOT_ROM_CS */	\
-	"DEV_BOOTCS",	/* DEV_BOOCS */		\
-	"PMU_SCRATCHPAD",/* PMU_SCRATCHPAD */	\
-	"CRYPT1_ENG",	/* CRYPT1_ENG */	\
-	"CRYPT2_ENG",	/* CRYPT2_ENG */	\
-	"PNC_BM"	/* PNC_BM */		\
+#define CESA_TARGET_NAME_DEF    ("CRYPT_ENG0", "CRYPT_ENG1")
+#define TARGETS_NAME_ARRAY      {		\
+		"SDRAM_CS0",            /* SDRAM_CS0 */		\
+		"SDRAM_CS1",            /* SDRAM_CS1 */		\
+		"SDRAM_CS2",            /* SDRAM_CS1 */		\
+		"SDRAM_CS3",            /* SDRAM_CS1 */		\
+		"DEVICE_CS0",           /* DEVICE_CS0 */	\
+		"DEVICE_CS1",           /* DEVICE_CS1 */	\
+		"DEVICE_CS2",           /* DEVICE_CS2 */	\
+		"DEVICE_CS3",           /* DEVICE_CS3 */	\
+		"PEX0_MEM",             /* PEX0_MEM */		\
+		"PEX0_IO",              /* PEX0_IO */		\
+		"PEX1_MEM",             /* PEX1_MEM */		\
+		"PEX1_IO",              /* PEX1_IO */		\
+		"PEX2_MEM",             /* PEX2_MEM */		\
+		"PEX2_IO",              /* PEX2_IO */		\
+		"PEX3_MEM",             /* PEX3_MEM */		\
+		"PEX3_IO",              /* PEX3_IO */		\
+		"PEX4_MEM",             /* PEX4_MEM */		\
+		"PEX4_IO",              /* PEX4_IO */		\
+		"PEX5_MEM",             /* PEX5_MEM */		\
+		"PEX5_IO",              /* PEX5_IO */		\
+		"PEX6_MEM",             /* PEX6_MEM */		\
+		"PEX6_IO",              /* PEX6_IO */		\
+		"PEX7_MEM",             /* PEX7_MEM */		\
+		"PEX7_IO",              /* PEX7_IO */		\
+		"PEX8_MEM",             /* PEX8_MEM */		\
+		"PEX8_IO",              /* PEX8_IO */		\
+		"PEX9_MEM",             /* PEX9_MEM */		\
+		"PEX9_IO",              /* PEX9_IO */		\
+		"INTER_REGS",           /* INTER_REGS */	\
+		"DMA_UART",             /* DMA_UART */		\
+		"SPI_CS0",              /* SPI_CS0 */		\
+		"SPI_CS1",              /* SPI_CS1 */		\
+		"SPI_CS2",              /* SPI_CS2 */		\
+		"SPI_CS3",              /* SPI_CS3 */		\
+		"SPI_CS4",              /* SPI_CS4 */		\
+		"SPI_CS5",              /* SPI_CS5 */		\
+		"SPI_CS6",              /* SPI_CS6 */		\
+		"SPI_CS7",              /* SPI_CS7 */		\
+		"BOOT_ROM_CS",          /* BOOT_ROM_CS */	\
+		"DEV_BOOTCS",           /* DEV_BOOCS */		\
+		"PMU_SCRATCHPAD",       /* PMU_SCRATCHPAD */   \
+		"CRYPT1_ENG",           /* CRYPT1_ENG */	\
+		"CRYPT2_ENG",           /* CRYPT2_ENG */	\
+		"PNC_BM"                /* PNC_BM */		\
 }
 
-
-
-
 #endif /* MV_ASMLANGUAGE */
 
 #ifdef __cplusplus
 }
-#endif /* __cplusplus */
+#endif  /* __cplusplus */
 
-#endif /* __INCmvCtrlEnvSpech */
+#endif  /* __INCmvCtrlEnvSpech */
-- 
1.7.5.4

