From d6231fb21d8a4f43efa813ba2713a785910c9b43 Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Thu, 31 Oct 2013 18:40:28 +0200
Subject: [PATCH 1127/1825] fix: a38x: update USB, XOR base address offset.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit b309b9a362817578ae5c958061e14391bdd0928e

	Change the xor base address for unit 0 and 1 depend on unit number

Change-Id: I7d15265c4d6d7ad02e29648b52835b40d08b1464
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/4187
Reviewed-by: Nadav Haklai <nadavh@marvell.com>
Tested-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h      |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h b/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
index b1e9e41..a654b8d 100644
--- a/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
+++ b/arch/arm/mach-armada38x/armada_38x_family/ctrlEnv/mvCtrlEnvSpec.h
@@ -117,9 +117,9 @@ extern "C" {
 #define MV_ETH_SGMII_PHY_REGS_OFFSET(p)		(MV_ETH_REGS_OFFSET(p)+0x2000)
 
 #define MV_PEX_IF_REGS_OFFSET(pexIf)            (((pexIf) == 0) ? 0x80000 : (0x40000 + ((pexIf-1) * 0x4000)))
-#define MV_USB_REGS_OFFSET(dev)                 (0x50000)
-#define MV_USB3_REGS_OFFSET(dev)                (0x5FF80)
-#define MV_XOR_REGS_OFFSET(unit)                (0x60800)
+#define MV_USB_REGS_OFFSET(dev)                 (0x58000 + ((dev) * 0x1000))
+#define MV_USB3_REGS_OFFSET(dev)                (0xF0000 + ((dev) * 0x1000))
+#define MV_XOR_REGS_OFFSET(unit)                (0x60800 + (unit)*0x100)
 #define MV_CESA_TDMA_REGS_OFFSET(chanNum)       (0x90000 + (chanNum * 0x2000))
 #define MV_CESA_REGS_OFFSET(chanNum)            (0x9D000 + (chanNum * 0x2000))
 #define MV_SATA_REGS_OFFSET                     (0xA0000)
-- 
1.7.5.4

