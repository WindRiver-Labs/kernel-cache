From d438fc7e5800efb454257aa205ca115a5a91c6f0 Mon Sep 17 00:00:00 2001
From: Joe Zhou <shjzhou@marvell.com>
Date: Wed, 2 Jul 2014 14:34:13 +0800
Subject: [PATCH 1756/1825] fix: a38x: SPI Flash does not work

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit f3371e840e7fd2669ac018c7b88c64bf74e1642e

	The 4K erase command should be 0x20, 0xd8 is for 64k erase.

Change-Id: I3730820d6e0315fbfa29d50fc21ac97d55452028
Signed-off-by: Joe Zhou <shjzhou@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/8881
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Yehuda Yitschak <yehuday@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)
 mode change 100755 => 100644 arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h

diff --git a/arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h b/arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h
old mode 100755
new mode 100644
index 5b48792..77f3d92
--- a/arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h
+++ b/arch/arm/plat-armada/mv_hal/sflash/mvSFlashSpec.h
@@ -302,7 +302,7 @@ extern "C" {
 #define	MV_WB25Q_READ_CMND_OPCD			0x03	/* Sequential Read */
 #define	MV_WB25Q_FAST_RD_CMND_OPCD		0x0B	/* Fast Read */
 #define	MV_WB25Q_PP_CMND_OPCD			0x02	/* Page Program */
-#define	MV_WB25Q_SE_CMND_OPCD			0xD8	/* Sector Erase */
+#define	MV_WB25Q_SE_CMND_OPCD			0x20	/* Sector Erase */
 #define	MV_WB25Q_BE_CMND_OPCD			0xC7	/* Bulk Erase */
 #define	MV_WB25Q_DP_CMND_OPCD			0xB9	/* Deep Power Down */
 #define	MV_WB25Q_RES_CMND_OPCD			0xAB	/* Read Electronic Signature */
-- 
1.7.5.4

