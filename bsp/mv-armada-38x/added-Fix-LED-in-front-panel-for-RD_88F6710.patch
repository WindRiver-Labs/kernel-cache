From 4324ecfaff542ec7b11eea2afc3a8598a3e8d29b Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Tue, 30 Oct 2012 11:27:09 +0200
Subject: [PATCH 0295/1825] - added Fix LED in front panel for RD_88F6710

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 9ff1661ed59f7692a9623376f1dcb8584fed38e5

Change-Id: I234909dce17b14f692ef9290afcd72f1c5cf7733

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)
 mode change 100644 => 100755 arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c

diff --git a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
old mode 100644
new mode 100755
index 3a91f7d..4f11efb
--- a/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
+++ b/arch/arm/plat-armada/mv_hal/eth-phy/mvEthPhy.c
@@ -1857,10 +1857,6 @@ MV_VOID mvEth1340PhyBasicInit(void)
 		mvEthPhyRegWrite(i, 0x0, 0x1140);
 		/* Set page to 0. */
 		mvEthPhyRegWrite(i, 0x16, 0);
-
-
-	    mvEthPhyRegWrite(i, 0x16, 0x0000);
-
 		mvEthPhyRegRead(i, ETH_PHY_CTRL_REG, &reg);
 		reg &= ~(ETH_PHY_CTRL_POWER_DOWN_MASK);
 		reg |= 0x1<<9;	/* workaround - restart workaround - restart workaround - restart workaround - restart */
@@ -1902,6 +1898,12 @@ MV_VOID mvEthE1512PhyBasicInit(MV_U32 ethPortNum)
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x00FB);
 	mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x07, 0xC00D);
 
+	#ifdef RD_88F6710
+		/* Fix LED in front panel */
+		mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x0003);
+		mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x10, 0x1011);
+		mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x0000);
+	#endif
 	if (ethphyHalData.isSgmii[ethPortNum]) {
 
 		mvEthPhyRegWrite(ethphyHalData.phyAddr[ethPortNum], 0x16, 0x0012);
-- 
1.7.5.4

