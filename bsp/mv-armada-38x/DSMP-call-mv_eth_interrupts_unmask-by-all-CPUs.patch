From 25d7034b80662911e646133da7c4dfbb42aef333 Mon Sep 17 00:00:00 2001
From: Tawfik Bayouk <tawfik@marvell.com>
Date: Tue, 21 Aug 2012 17:34:00 +0300
Subject: [PATCH 0085/1825] DSMP call mv_eth_interrupts_unmask by all CPUs

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 6cedde212236d0cf6dd0c3899ce7fb588f98a466

Change-Id: I7b45690ec6c35c4befc9523a8e64f50a4d8be93b
Signed-off-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../mv_drivers_lsp/mv_neta/net_dev/mv_eth_switch.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_switch.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_switch.c
index ebc8e72..65b88b4 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_switch.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_switch.c
@@ -498,6 +498,7 @@ int    mv_eth_switch_start(struct net_device *dev)
 
 		/* unmask interrupts */
 		mv_eth_interrupts_unmask(priv);
+		smp_call_function_many(cpu_online_mask, (smp_call_func_t)mv_eth_interrupts_unmask, (void *)priv, 1);
 	}
 
 	mv_eth_switch_started++;
-- 
1.7.5.4

