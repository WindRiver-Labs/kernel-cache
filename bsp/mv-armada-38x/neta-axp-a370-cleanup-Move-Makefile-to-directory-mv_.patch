From 99a377542d4048b3c349a9a7b8fb30ec4c3d3107 Mon Sep 17 00:00:00 2001
From: Dmitri Epshtein <dima@marvell.com>
Date: Thu, 1 Aug 2013 14:57:50 -0400
Subject: [PATCH 0911/1825] neta: axp, a370: cleanup: Move Makefile to
 directory mv_neta

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit d88909a855bcb040d1c915b800fc16637f37922d

	Delete NFP relevant files from Makefile for axp and a370
	Remove Legacy drievr files from Makefile for axp and a370

Change-Id: I5c169b6255f02627e92ea20fad3c4244a25947ae
Signed-off-by: Dmitri Epshtein <dima@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armadaxp/Makefile                    |   79 +-------------------
 arch/arm/mach-armadaxp/config/mvRules.mk           |   38 +++++-----
 .../plat-armada/mv_drivers_lsp/mv_neta/Makefile    |   67 +++++++++++++++++
 .../mv_drivers_lsp/mv_neta/hwf/hwf_bm.c            |    2 +-
 .../mv_drivers_lsp/mv_neta/l2fw/mv_eth_l2sec.h     |    6 +-
 .../mv_drivers_lsp/mv_neta/net_dev/Makefile        |   13 ---
 .../mv_drivers_lsp/mv_neta/net_dev/mv_eth_nfp.c    |    2 +-
 drivers/net/Makefile                               |    4 -
 8 files changed, 92 insertions(+), 119 deletions(-)
 create mode 100644 arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Makefile
 delete mode 100644 arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/Makefile

diff --git a/arch/arm/mach-armadaxp/Makefile b/arch/arm/mach-armadaxp/Makefile
index 8d119ae..fb396c0 100755
--- a/arch/arm/mach-armadaxp/Makefile
+++ b/arch/arm/mach-armadaxp/Makefile
@@ -68,24 +68,10 @@ armadaxp-$(CONFIG_MV_INCLUDE_USB) 	+= $(HAL_USB_DIR)/mvUsb.o $(HAL_USB_DIR)/mvUs
 					   $(HAL_IF_DIR)/mvSysUsb.o
 armadaxp-y				+= $(HAL_ETHPHY_DIR)/mvEthPhy.o $(HAL_IF_DIR)/mvSysEthPhy.o
 
-# Legacy Giga driver
-ifeq ($(CONFIG_MV_ETH_LEGACY),y)
-armadaxp-$(CONFIG_MV_ETH_LEGACY)	+= $(HAL_ETH_GBE_DIR)/mvEth.o $(HAL_ETH_GBE_DIR)/mvEthDebug.o \
-					   $(HAL_ETH_GBE_DIR)/mvEthAddrDec.o $(HAL_IF_DIR)/mvSysEth.o
-endif
 
 # NETA Giga driver
-ifeq ($(CONFIG_MV_ETH_NETA),y)
-armadaxp-$(CONFIG_MV_ETH_NETA)	        += $(HAL_ETH_GBE_DIR)/mvNeta.o $(HAL_ETH_GBE_DIR)/mvNetaDebug.o \
-					   $(HAL_ETH_GBE_DIR)/mvNetaAddrDec.o $(HAL_IF_DIR)/mvSysNeta.o
-armadaxp-$(CONFIG_MV_ETH_PNC)    	+= $(HAL_ETH_PNC_DIR)/mvTcam.o  $(HAL_ETH_PNC_DIR)/mvPncAging.o \
-					   $(HAL_ETH_PNC_DIR)/mvPnc.o $(HAL_ETH_PNC_DIR)/mvPncLb.o
-armadaxp-$(CONFIG_MV_ETH_PNC_L3_FLOW)   += $(HAL_ETH_PNC_DIR)/mvPncRxq.o
-armadaxp-$(CONFIG_MV_ETH_PNC_WOL)       += $(HAL_ETH_PNC_DIR)/mvPncWol.o
-armadaxp-$(CONFIG_MV_ETH_BM) 	        += $(HAL_ETH_BM_DIR)/mvBm.o
-armadaxp-$(CONFIG_MV_ETH_PMT)	        += $(HAL_ETH_PMT_DIR)/mvPmt.o
-armadaxp-$(CONFIG_MV_ETH_HWF)           += $(HAL_ETH_GBE_DIR)/mvHwf.o
-endif
+armadaxp-$(CONFIG_MV_ETH_NETA)          += $(HAL_IF_DIR)/mvSysNeta.o
+obj-$(CONFIG_MV_ETH_NETA)		+= $(LSP_NETA_DIR)/
 
 armadaxp-$(CONFIG_MV_INCLUDE_CESA) 	+= $(HAL_CESA_DIR)/mvCesa.o $(HAL_CESA_DIR)/mvCesaDebug.o 	\
 					   $(HAL_CESA_DIR)/mvCesaAddrDec.o				\
@@ -112,19 +98,6 @@ obj-$(CONFIG_MV_INCLUDE_SWITCH) 	+= $(QD_OBJS)
 
 # drivers part
 
-ifeq ($(CONFIG_MV_ETH_NETA),y)
-obj-$(CONFIG_MV_ETH_PNC)                += $(LSP_PNC_DIR)/pnc_sysfs.o
-obj-$(CONFIG_MV_ETH_PNC_L3_FLOW)        += $(LSP_PNC_DIR)/rxq_map_sysfs.o
-obj-$(CONFIG_MV_ETH_BM)                 += $(LSP_BM_DIR)/bm_sysfs.o  $(LSP_BM_DIR)/mv_eth_bm.o
-obj-$(CONFIG_MV_ETH_PNC_WOL)            += $(LSP_PNC_DIR)/wol_sysfs.o
-obj-$(CONFIG_MV_ETH_PMT)		+= $(LSP_PMT_DIR)/pmt_sysfs.o
-obj-$(CONFIG_MV_ETH_HWF)        	+= $(LSP_HWF_DIR)/hwf_sysfs.o
-ifndef CONFIG_MV_ETH_BM_CPU
-obj-$(CONFIG_MV_ETH_HWF)		+=  $(LSP_HWF_DIR)/hwf_bm.o
-endif
-obj-$(CONFIG_MV_ETH_L2FW)               += $(LSP_L2FW_DIR)/l2fw_sysfs.o $(LSP_L2FW_DIR)/mv_eth_l2fw.o
-obj-$(CONFIG_MV_ETH_L2SEC)              += $(LSP_L2FW_DIR)/mv_eth_l2sec.o
-endif
 
 obj-$(CONFIG_MV_INCLUDE_GIG_ETH)        += $(LSP_PHY_DIR)/phy_sysfs.o
 obj-$(CONFIG_ERROR_HANDLING)		   += $(LSP_ERR_DIR)/mv_error.o
@@ -154,51 +127,3 @@ obj-$(CONFIG_FB_DOVE_CLCD)		+= clcd.o
 obj-$(CONFIG_PM)			+= pm.o
 
 
-ifdef CONFIG_MV_ETH_NFP
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/mv_nfp_mgr.o $(LSP_NFP_MGR_DIR)/nfp_sysfs.o
-NFP_OBJS += $(LSP_NET_DEV_DIR)/mv_eth_nfp.o $(HAL_ETH_NFP_DIR)/mvNfp.o
-endif
-
-ifdef CONFIG_MV_ETH_NFP_FIB
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_fib_arp_sysfs.o
-NFP_OBJS += $(HAL_ETH_NFP_DIR)/mvNfpFib.o
-ifdef CONFIG_IPV6
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/ipv6_parsing.o $(LSP_NFP_MGR_DIR)/nfp_fib6_arp_sysfs.o
-endif
-endif
-
-ifdef CONFIG_MV_ETH_NFP_CT
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_ct_sysfs.o
-NFP_OBJS += $(HAL_ETH_NFP_DIR)/mvNfpCt.o
-ifdef CONFIG_IPV6
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_ct6_sysfs.o
-endif
-endif
-
-ifdef CONFIG_MV_ETH_NFP_CLASSIFY
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_classification_sysfs.o $(LSP_NFP_MGR_DIR)/nfp_exact_classification_sysfs.o \
-	   $(LSP_NFP_MGR_DIR)/nfp_prio_classification_sysfs.o
-endif
-
-ifdef CONFIG_MV_ETH_NFP_BRIDGE
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_bridge_sysfs.o
-ifdef CONFIG_MV_ETH_NFP_FDB_MODE
-NFP_OBJS += $(HAL_ETH_NFP_DIR)/mvNfpFdb.o
-else
-NFP_OBJS += $(HAL_ETH_NFP_DIR)/mvNfpBridge.o
-endif
-endif
-
-ifdef CONFIG_MV_ETH_NFP_VLAN
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_vlan_sysfs.o
-endif
-
-ifdef CONFIG_MV_ETH_NFP_PPP
-NFP_OBJS += $(LSP_NFP_MGR_DIR)/nfp_ppp_sysfs.o
-endif
-
-nfp-objs = $(NFP_OBJS)
-obj-$(CONFIG_MV_ETH_NFP) += nfp.o
-
-nfp_learn-objs = $(LSP_NFP_MGR_DIR)/mv_nfp_hooks.o
-obj-$(CONFIG_MV_ETH_NFP_LEARN) += nfp_learn.o
diff --git a/arch/arm/mach-armadaxp/config/mvRules.mk b/arch/arm/mach-armadaxp/config/mvRules.mk
index 216f5bc..c11ac65 100644
--- a/arch/arm/mach-armadaxp/config/mvRules.mk
+++ b/arch/arm/mach-armadaxp/config/mvRules.mk
@@ -42,31 +42,29 @@ HAL_TWSI_DIR      = $(HAL_DIR)/twsi
 HAL_TWSI_ARCH_DIR = $(SOC_TWSI_DIR)/Arch$(CPU_ARCH)
 HAL_UART_DIR      = $(HAL_DIR)/uart
 
-ifeq ($(CONFIG_MV_ETH_NETA),y)
-HAL_ETH_DIR       = $(HAL_DIR)/neta 
-HAL_ETH_GBE_DIR   = $(HAL_DIR)/neta/gbe
-HAL_ETH_NFP_DIR   = $(HAL_DIR)/neta/nfp
-HAL_ETH_PNC_DIR   = $(HAL_DIR)/neta/pnc
-HAL_ETH_BM_DIR    = $(HAL_DIR)/neta/bm
-HAL_ETH_PMT_DIR   = $(HAL_DIR)/neta/pmt
-LSP_NETWORK_DIR   = $(PLAT_DRIVERS)/mv_neta
-LSP_NET_DEV_DIR   = $(LSP_NETWORK_DIR)/net_dev
-LSP_NFP_MGR_DIR   = $(LSP_NETWORK_DIR)/nfp_mgr
-LSP_PNC_DIR       = $(LSP_NETWORK_DIR)/pnc
-LSP_BM_DIR        = $(LSP_NETWORK_DIR)/bm
-LSP_PMT_DIR       = $(LSP_NETWORK_DIR)/pmt
-LSP_HWF_DIR       = $(LSP_NETWORK_DIR)/hwf
-LSP_L2FW_DIR      = $(LSP_NETWORK_DIR)/l2fw
-endif
-
-ifeq ($(CONFIG_MV_ETH_LEGACY),y)
+# NETA driver directories
+HAL_NETA_DIR      = $(HAL_DIR)/neta
+HAL_NETA_GBE_DIR  = $(HAL_DIR)/neta/gbe
+HAL_NETA_NFP_DIR  = $(HAL_DIR)/neta/nfp
+HAL_NETA_PNC_DIR  = $(HAL_DIR)/neta/pnc
+HAL_NETA_BM_DIR   = $(HAL_DIR)/neta/bm
+HAL_NETA_PMT_DIR  = $(HAL_DIR)/neta/pmt
+LSP_NETA_DIR      = $(PLAT_DRIVERS)/mv_neta
+LSP_NETA_DEV_DIR  = $(LSP_NETA_DIR)/net_dev
+LSP_NETA_NFP_DIR  = $(LSP_NETA_DIR)/nfp_mgr
+LSP_NETA_PNC_DIR  = $(LSP_NETA_DIR)/pnc
+LSP_NETA_BM_DIR   = $(LSP_NETA_DIR)/bm
+LSP_NETA_PMT_DIR  = $(LSP_NETA_DIR)/pmt
+LSP_NETA_HWF_DIR  = $(LSP_NETA_DIR)/hwf
+LSP_NETA_L2FW_DIR = $(LSP_NETA_DIR)/l2fw
+
+# Legacy network driver directoires
 HAL_ETH_DIR       = $(HAL_DIR)/eth
 HAL_ETH_GBE_DIR   = $(HAL_DIR)/eth/gbe
 HAL_ETH_NFP_DIR	  = $(HAL_DIR)/eth/nfp
 LSP_NETWORK_DIR   = $(PLAT_DRIVERS)/mv_network
 LSP_NET_DEV_DIR   = $(LSP_NETWORK_DIR)/mv_etherent
 LSP_NFP_MGR_DIR   = $(LSP_NETWORK_DIR)/nfp_mgr
-endif
 
 HAL_CPU_DIR       = $(HAL_DIR)/cpu
 HAL_SDMMC_DIR	  = $(HAL_DIR)/sdmmc
@@ -118,7 +116,7 @@ HAL_IF_DIR	= mv_hal_if
 LSP_PATH_I      = $(srctree)/arch/arm/mach-armadaxp
 PLAT_PATH_I	= $(srctree)/arch/arm/plat-armada
 
-HAL_PATH        = -I$(PLAT_PATH_I)/$(HAL_DIR) -I$(PLAT_PATH_I)/$(HAL_SATA_DIR) -I$(PLAT_PATH_I)/$(HAL_ETH_DIR)
+HAL_PATH        = -I$(PLAT_PATH_I)/$(HAL_DIR) -I$(PLAT_PATH_I)/$(HAL_SATA_DIR) -I$(PLAT_PATH_I)/$(HAL_NETA_DIR)
 AXP_FAM_PATH	= -I$(LSP_PATH_I)/$(AXP_FAM_DIR)
 QD_PATH         = -I$(PLAT_PATH_I)/$(HAL_QD_DIR)/Include  -I$(PLAT_PATH_I)/$(HAL_QD_DIR)/Include/h/msApi 	\
                   -I$(PLAT_PATH_I)/$(HAL_QD_DIR)/Include/h/driver -I$(PLAT_PATH_I)/$(HAL_QD_DIR)/Include/h/platform
@@ -130,7 +128,7 @@ LSP_PATH        = -I$(LSP_PATH_I)
 CONFIG_PATH     = -I$(LSP_PATH_I)/$(CONFIG_DIR)
 HAL_IF_PATH	= -I$(LSP_PATH_I)/$(HAL_IF)
 DRIVERS_LSP_PATH = -I$(PLAT_PATH_I)/$(PLAT_DRIVERS) -I$(PLAT_PATH_I)/$(LSP_NETWORK_DIR) -I$(PLAT_PATH_I)/$(LSP_SWITCH_DIR) \
-		 -I$(PLAT_PATH_I)/$(LSP_TRACE_DIR)
+		 -I$(PLAT_PATH_I)/$(LSP_TRACE_DIR) -I$(PLAT_PATH_I)/$(LSP_NETA_DIR)
 
 EXTRA_INCLUDE  	= $(OSSERV_PATH) $(COMMON_PATH) $(HAL_PATH)  $(AXP_FAM_PATH) \
                   $(LSP_PATH) $(CONFIG_PATH) $(DRIVERS_LSP_PATH) $(HAL_IF_PATH)
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Makefile b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Makefile
new file mode 100644
index 0000000..b95cc75
--- /dev/null
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/Makefile
@@ -0,0 +1,67 @@
+#
+# Makefile for the Marvell Gigabit Ethernet driver
+#
+
+ifneq ($(MACHINE),)
+include $(srctree)/$(MACHINE)/config/mvRules.mk
+endif
+
+NETA_DIR       = ../../mv_hal/neta
+NETA_GBE_DIR   = $(NETA_DIR)/gbe
+NETA_BM_DIR    = $(NETA_DIR)/bm
+NETA_PNC_DIR   = $(NETA_DIR)/pnc
+NETA_PMT_DIR   = $(NETA_DIR)/pmt
+
+mv_neta-objs += $(NETA_GBE_DIR)/mvNeta.o $(NETA_GBE_DIR)/mvNetaDebug.o \
+		$(NETA_GBE_DIR)/mvNetaAddrDec.o
+
+ifeq ($(CONFIG_MV_ETH_PNC),y)
+mv_neta-objs += $(NETA_PNC_DIR)/mvTcam.o  $(NETA_PNC_DIR)/mvPncAging.o \
+		$(NETA_PNC_DIR)/mvPnc.o $(NETA_PNC_DIR)/mvPncLb.o
+mv_neta-objs += pnc/pnc_sysfs.o
+
+ifeq ($(CONFIG_MV_ETH_PNC_L3_FLOW),y)
+mv_neta-objs += $(NETA_PNC_DIR)/mvPncRxq.o pnc/rxq_map_sysfs.o
+endif
+
+ifeq ($(CONFIG_MV_ETH_PNC_WOL),y)
+mv_neta-objs += $(NETA_PNC_DIR)/mvPncWol.o pnc/wol_sysfs.o
+endif
+endif
+
+ifeq ($(CONFIG_MV_ETH_BM),y)
+mv_neta-objs += $(NETA_BM_DIR)/mvBm.o bm/bm_sysfs.o bm/mv_eth_bm.o
+mv_neta-objs += hwf/hwf_bm.o
+endif
+
+ifeq ($(CONFIG_MV_ETH_PMT),y)
+mv_neta-objs += $(NETA_PMT_DIR)/mvPmt.o pmt/pmt_sysfs.o
+endif
+
+ifeq ($(CONFIG_MV_ETH_HWF),y)
+mv_neta-objs += $(NETA_GBE_DIR)/mvHwf.o hwf/hwf_sysfs.o
+endif
+
+mv_neta-objs += net_dev/mv_netdev.o net_dev/mv_ethernet.o net_dev/mv_eth_sysfs.o net_dev/mv_eth_tool.o
+
+ifeq ($(CONFIG_MV_ETH_NFP),y)
+mv_neta-objs += net_dev/mv_eth_nfp.o
+endif
+
+ifeq ($(CONFIG_MV_ETH_L2FW),y)
+mv_neta-objs += l2fw/l2fw_sysfs.o l2fw/mv_eth_l2fw.o
+
+ifeq ($(CONFIG_MV_ETH_L2SEC),y)
+mv_neta-objs += l2fw/mv_eth_l2sec.o
+endif
+endif
+
+ifeq ($(CONFIG_MV_PON),y)
+mv_neta-objs += mv_pon_sysfs.o
+endif
+
+ifeq ($(CONFIG_MV_ETH_SWITCH),y)
+mv_neta-objs += net_dev/mv_eth_switch.o
+endif
+
+obj-$(CONFIG_MV_ETH_NETA) += mv_neta.o
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/hwf/hwf_bm.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/hwf/hwf_bm.c
index cbb8eb0..6397337 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/hwf/hwf_bm.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/hwf/hwf_bm.c
@@ -102,7 +102,7 @@ MV_STATUS mv_eth_hwf_bm_create(int port, int mtuPktSize)
 
 	long_pool = mv_eth_bm_config_long_pool_get(port);
 	/* Check validity of the parameters */
-	if (mvNetaMaxCheck(long_pool,  MV_BM_POOLS))
+	if (mvNetaMaxCheck(long_pool,  MV_BM_POOLS, "bm pool"))
 		return MV_FAIL;
 
 	/* For HWF Packet offset in the packet is 8 bytes */
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/l2fw/mv_eth_l2sec.h b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/l2fw/mv_eth_l2sec.h
index a760b06..04d7964 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/l2fw/mv_eth_l2sec.h
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/l2fw/mv_eth_l2sec.h
@@ -82,13 +82,13 @@ struct mv_l2fw_sec_sa_entry {
 	MV_L2FW_SEC_ENCAP encap;
 	MV_U16 sid;
 	MV_U32 seqNum;			/* LE  */
-	MV_L2FW_SEC_TUNNEL_HDR tunnelHdr;
+	struct mv_l2fw_sec_tunnel_hdr tunnelHdr;
 	MV_U32 lifeTime;
 	MV_U8 ivSize;
 	MV_U8 cipherBlockSize;
 	MV_U8 digestSize;
 	MV_L2FW_SEC_OP secOp;
-	MV_L2FW_SA_STATS stats;
+	struct mv_l2fw_sa_stats stats;
 } MV_L2FW_SEC_SA_ENTRY;
 
 
@@ -107,7 +107,7 @@ struct mv_l2fw_sec_sa_entry {
 #define CESA_DEF_REQ_SIZE       (256*4)
 
 struct mv_l2fw_sec_cesa_priv {
-	MV_L2FW_SEC_SA_ENTRY *pSaEntry;
+	struct mv_l2fw_sec_sa_entry *pSaEntry;
 	MV_BUF_INFO *pBufInfo;
 	MV_U8 orgDigest[MV_CESA_MAX_DIGEST_SIZE];
 	MV_CESA_COMMAND *pCesaCmd;
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/Makefile b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/Makefile
deleted file mode 100644
index 184f2d2..0000000
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/Makefile
+++ /dev/null
@@ -1,13 +0,0 @@
-#
-# Makefile for the Marvell Gigabit Ethernet driver
-#
-
-ifneq ($(MACHINE),)
-include $(srctree)/$(MACHINE)/config/mvRules.mk
-endif
-
-obj-$(CONFIG_MV_ETH_NFP) += mv_eth_nfp.o
-obj-$(CONFIG_MV_ETHERNET) += mv_netdev.o mv_ethernet.o mv_eth_sysfs.o mv_eth_tool.o
-obj-$(CONFIG_MV_PON)      += mv_pon_sysfs.o
-obj-$(CONFIG_MV_ETH_SWITCH) +=  mv_eth_switch.o
-
diff --git a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_nfp.c b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_nfp.c
index 66de419..97b1908 100644
--- a/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_nfp.c
+++ b/arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/mv_eth_nfp.c
@@ -721,7 +721,7 @@ static int mv_eth_nfp_ext_tx(struct eth_port *pp, struct eth_pbuf *pkt, MV_NFP_R
 #ifdef CONFIG_NET_SKB_RECYCLE
 		if (mv_eth_is_recycle()) {
 			skb->skb_recycle = mv_eth_skb_recycle;
-			skb->hw_cookie = pkt;
+			skb->hw_cookie = (__u32)pkt;
 		}
 #endif /* CONFIG_NET_SKB_RECYCLE */
 	}
diff --git a/drivers/net/Makefile b/drivers/net/Makefile
index ebfc779..a6b8ce1 100644
--- a/drivers/net/Makefile
+++ b/drivers/net/Makefile
@@ -1,10 +1,6 @@
 #
 # Makefile for the Linux network device drivers.
 #
-ifeq ($(CONFIG_PLAT_ARMADA),y)
-obj-$(CONFIG_MV_ETH_LEGACY) += ../../arch/arm/plat-armada/mv_drivers_lsp/mv_network/mv_ethernet/
-obj-$(CONFIG_MV_ETH_NETA) += ../../arch/arm/plat-armada/mv_drivers_lsp/mv_neta/net_dev/
-endif
 
 #
 # Networking Core Drivers
-- 
1.7.5.4

