From c833332e120a0e4ea50162889b4f7b351b1dcbde Mon Sep 17 00:00:00 2001
From: Omri Itach <omrii@marvell.com>
Date: Tue, 27 Aug 2013 13:05:59 +0300
Subject: [PATCH 0979/1825] alp: updated customer board structures with all
 available board information

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 5b307646a28ebb9ce872295459c0028399ab0d19

	These structures are for customer reference usage only

Change-Id: Id0ec70d750cd1d2c9ad0d362b8634db8858930cb
Signed-off-by: Omri Itach <omrii@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3090
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.c     |  101 +++++++++++---------
 .../avanta_lp_family/boardEnv/mvBoardEnvSpec.h     |   54 ++++++-----
 2 files changed, 88 insertions(+), 67 deletions(-)

diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
index f6fcb53..277a582 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.c
@@ -559,6 +559,13 @@ MV_BOARD_INFO avanta_lp_fpga_board_info = {
 #define AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS        0x403E07CF
 #define AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS       0x000F0F0F
 
+MV_BOARD_TWSI_INFO avanta_lp_customerInfoBoardTwsiDev[] = {
+	/* {{MV_BOARD_DEV_CLASS devClass, MV_U8 devClassId,  MV_U8 twsiDevAddr, MV_U8 twsiDevAddrType}} */
+	{ BOARD_DEV_TWSI_SATR,		0,	0x4C,	   ADDR7_BIT	},
+	{ BOARD_DEV_TWSI_SATR,		1,	0x4D,	   ADDR7_BIT	},
+	{ BOARD_DEV_TWSI_EEPROM,	0,	0x54,	   ADDR7_BIT	},
+};
+
 MV_BOARD_MAC_INFO avanta_lp_customerInfoBoardMacInfo[] = {
 	/* {{MV_BOARD_MAC_SPEED	boardMacSpeed, MV_U8 boardEthSmiAddr}} */
 	{ BOARD_MAC_SPEED_AUTO, 0x10},
@@ -570,16 +577,17 @@ MV_BOARD_MAC_INFO avanta_lp_customerInfoBoardMacInfo[] = {
 MV_BOARD_MPP_TYPE_INFO avanta_lp_customerInfoBoardModTypeInfo[] = {
 	{
 		.boardMppSlic = MV_BOARD_SLIC_DISABLED,
-		.ethSataComplexOpt = 0x0,
+		.ethSataComplexOpt = MV_ETHCOMP_SW_P0_2_GE_PHY_P0 |
+				     MV_ETHCOMP_SW_P1_2_GE_PHY_P1 |
+				     MV_ETHCOMP_SW_P2_2_GE_PHY_P2 |
+				     MV_ETHCOMP_SW_P3_2_GE_PHY_P3 |
+				     MV_ETHCOMP_P2P_MAC0_2_SW_SPEED_2G |
+				     MV_ETHCOMP_GE_MAC1_2_SW_P4   |
+				     MV_ETHCOMP_GE_MAC0_2_SW_P6,
 		.ethPortsMode = 0x0
 	}
 };
 
-MV_BOARD_GPP_INFO avanta_lp_customerInfoBoardGppInfo[] = {
-	/* {{MV_BOARD_GPP_CLASS	devClass, MV_U8	gppPinNum}} */
-	{ BOARD_GPP_RESET, 21 }
-};
-
 MV_DEV_CS_INFO avanta_lp_customerInfoBoardDeCsInfo[] = {
 	/*{deviceCS, params, devType, devWidth, busWidth }*/
 #if defined(MV_INCLUDE_SPI)
@@ -587,6 +595,10 @@ MV_DEV_CS_INFO avanta_lp_customerInfoBoardDeCsInfo[] = {
 #endif
 };
 
+MV_BOARD_TDM_INFO avanta_lp_customerTdm880[] = { {0} };
+
+MV_BOARD_TDM_SPI_INFO avanta_lp_customerTdmSpiInfo[] = { {1} };
+
 MV_BOARD_MPP_INFO avanta_lp_customerInfoBoardMppConfigValue[] = {
 	{ {
 		  AVANTA_LP_CUSTOMER_MPP0_7,
@@ -602,52 +614,52 @@ MV_BOARD_MPP_INFO avanta_lp_customerInfoBoardMppConfigValue[] = {
 };
 
 MV_BOARD_INFO avanta_lp_customer_board_info = {
-	.boardName				= "AvantaLP-CUSTOMER",
-	.numBoardMppTypeValue			= ARRSZ(avanta_lp_customerInfoBoardModTypeInfo),
-	.pBoardModTypeValue			= avanta_lp_customerInfoBoardModTypeInfo,
-	.pBoardMppConfigValue			= avanta_lp_customerInfoBoardMppConfigValue,
-	.intsGppMaskLow				= 0,
-	.intsGppMaskMid				= 0,
-	.intsGppMaskHigh			= 0,
-	.numBoardDeviceIf			= ARRSZ(avanta_lp_customerInfoBoardDeCsInfo),
-	.pDevCsInfo				= avanta_lp_customerInfoBoardDeCsInfo,
-	.numBoardTwsiDev			= 0,
-	.pBoardTwsiDev				= NULL,
-	.numBoardMacInfo			= ARRSZ(avanta_lp_customerInfoBoardMacInfo),
-	.pBoardMacInfo				= avanta_lp_customerInfoBoardMacInfo,
-	.numBoardGppInfo			= ARRSZ(avanta_lp_customerInfoBoardGppInfo),
-	.pBoardGppInfo				= avanta_lp_customerInfoBoardGppInfo,
-	.activeLedsNumber			= 0,
-	.pLedGppPin				= NULL,
-	.ledsPolarity				= 0,
+	.boardName			= "AvantaLP-CUSTOMER",
+	.numBoardMppTypeValue		= ARRSZ(avanta_lp_customerInfoBoardModTypeInfo),
+	.pBoardModTypeValue		= avanta_lp_customerInfoBoardModTypeInfo,
+	.pBoardMppConfigValue		= avanta_lp_customerInfoBoardMppConfigValue,
+	.intsGppMaskLow			= 0,
+	.intsGppMaskMid			= 0,
+	.intsGppMaskHigh		= 0,
+	.numBoardDeviceIf		= ARRSZ(avanta_lp_customerInfoBoardDeCsInfo),
+	.pDevCsInfo			= avanta_lp_customerInfoBoardDeCsInfo,
+	.numBoardTwsiDev		= ARRSZ(avanta_lp_customerInfoBoardTwsiDev),
+	.pBoardTwsiDev			= avanta_lp_customerInfoBoardTwsiDev,
+	.numBoardMacInfo		= ARRSZ(avanta_lp_customerInfoBoardMacInfo),
+	.pBoardMacInfo			= avanta_lp_customerInfoBoardMacInfo,
+	.numBoardGppInfo		= 0,
+	.pBoardGppInfo			= NULL,
+	.activeLedsNumber		= 0,
+	.pLedGppPin			= NULL,
+	.ledsPolarity			= 0,
 
 	/* PMU Power */
-	.pmuPwrUpPolarity			= 0,
-	.pmuPwrUpDelay				= 80000,
+	.pmuPwrUpPolarity		= 0,
+	.pmuPwrUpDelay			= 80000,
 
 	/* GPP values */
-	.gppOutEnValLow				= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW,
-	.gppOutEnValMid				= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID,
-	.gppOutEnValHigh			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH,
-	.gppOutValLow				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW,
-	.gppOutValMid				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID,
-	.gppOutValHigh				= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH,
-	.gppPolarityValLow			= AVANTA_LP_CUSTOMER_GPP_POL_LOW,
-	.gppPolarityValMid			= AVANTA_LP_CUSTOMER_GPP_POL_MID,
-	.gppPolarityValHigh			= AVANTA_LP_CUSTOMER_GPP_POL_HIGH,
+	.gppOutEnValLow			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW,
+	.gppOutEnValMid			= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID,
+	.gppOutEnValHigh		= AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH,
+	.gppOutValLow			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW,
+	.gppOutValMid			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID,
+	.gppOutValHigh			= AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH,
+	.gppPolarityValLow		= AVANTA_LP_CUSTOMER_GPP_POL_LOW,
+	.gppPolarityValMid		= AVANTA_LP_CUSTOMER_GPP_POL_MID,
+	.gppPolarityValHigh		= AVANTA_LP_CUSTOMER_GPP_POL_HIGH,
 
 	/* TDM */
-	.numBoardTdmInfo			= {},
-	.pBoardTdmInt2CsInfo			= {},
-	.boardTdmInfoIndex			= -1,
+	.numBoardTdmInfo		= {1},
+	.pBoardTdmInt2CsInfo		= {avanta_lp_customerTdm880},
+	.boardTdmInfoIndex		= 0,
 
 	/* NAND init params */
-	.nandFlashReadParams			= AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS,
-	.nandFlashWriteParams			= AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS,
-	.nandFlashControl			= AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL,
+	.nandFlashReadParams		= AVANTA_LP_CUSTOMER_BOARD_NAND_READ_PARAMS,
+	.nandFlashWriteParams		= AVANTA_LP_CUSTOMER_BOARD_NAND_WRITE_PARAMS,
+	.nandFlashControl		= AVANTA_LP_CUSTOMER_BOARD_NAND_CONTROL,
 	/* NOR init params */
-	.norFlashReadParams			= AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS,
-	.norFlashWriteParams			= AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS
+	.norFlashReadParams		= AVANTA_LP_CUSTOMER_BOARD_NOR_READ_PARAMS,
+	.norFlashWriteParams		= AVANTA_LP_CUSTOMER_BOARD_NOR_WRITE_PARAMS
 };
 
 /*
@@ -658,6 +670,7 @@ MV_BOARD_INFO *boardInfoTbl[] = {
 	&db88f6650_board_info,
 	&rd88f6660_board_info,
 	&db88f6660_board_info,
-	&avanta_lp_fpga_board_info,
 	&avanta_lp_customer_board_info,
+	&avanta_lp_fpga_board_info,
 };
+
diff --git a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
index 072f012..19b37f0 100644
--- a/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
+++ b/arch/arm/mach-avantalp/avanta_lp_family/boardEnv/mvBoardEnvSpec.h
@@ -80,15 +80,16 @@
 /* New board ID numbers */
 
 /* boards ID numbers */
-#define BOARD_ID_BASE                   0x0
+#define BOARD_ID_BASE			0x0
 
-#define RD_6650_ID                      (BOARD_ID_BASE)
-#define DB_6650_ID                      (RD_6650_ID + 1)
-#define RD_6660_ID                      (DB_6650_ID + 1)
-#define DB_6660_ID                      (RD_6660_ID + 1)
-#define MV_BOARD_ID_AVANTA_LP_FPGA      (DB_6660_ID + 1)
-#define MV_MAX_BOARD_ID                 (MV_BOARD_ID_AVANTA_LP_FPGA + 1)
-#define MV_INVALID_BOARD_ID             0xFFFFFFFF
+#define RD_6650_ID			(BOARD_ID_BASE)
+#define DB_6650_ID			(RD_6650_ID + 1)
+#define RD_6660_ID			(DB_6650_ID + 1)
+#define DB_6660_ID			(RD_6660_ID + 1)
+#define AVANTA_LP_CUSTOMER_ID		(DB_6660_ID + 1)
+#define MV_BOARD_ID_AVANTA_LP_FPGA	(AVANTA_LP_CUSTOMER_ID + 1)
+#define MV_MAX_BOARD_ID			(MV_BOARD_ID_AVANTA_LP_FPGA + 1)
+#define MV_INVALID_BOARD_ID		0xFFFFFFFF
 
 /*******************************************************************************
  * AvantaLP DB-88F6600 board */
@@ -202,22 +203,29 @@
 #define RD_88F6650_GPP_POL_HIGH         0x0
 
 /*******************************************************************************
-* Avanata LP customer board
+* AVANTA_LP_CUSTOMER_ID - customer board
 *******************************************************************************/
-#define AVANTA_LP_CUSTOMER_MPP0_7               0x00000000
-#define AVANTA_LP_CUSTOMER_MPP8_15              0x00000000
-#define AVANTA_LP_CUSTOMER_MPP16_23             0x33000000
-#define AVANTA_LP_CUSTOMER_MPP24_31             0x11000000
-#define AVANTA_LP_CUSTOMER_MPP32_39             0x11111111
-#define AVANTA_LP_CUSTOMER_MPP40_47             0x00221100
-#define AVANTA_LP_CUSTOMER_MPP48_55             0x00000003
-#define AVANTA_LP_CUSTOMER_MPP56_63             0x00000000
-#define AVANTA_LP_CUSTOMER_MPP64_67             0x00000000
-
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW      0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID      0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH     0x0
-#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW      0x0
+#define AVANTA_LP_CUSTOMER_MPP0_7               0x55555555  /* NAND */
+#define AVANTA_LP_CUSTOMER_MPP8_15              0x22555555  /* NAND , I2C */
+#define AVANTA_LP_CUSTOMER_MPP16_23             0x11110022  /* UA0, SSI, GPIO's */
+#define AVANTA_LP_CUSTOMER_MPP24_31             0x04606101  /* PCIe0CLKREQ, P0,C0_Leds & DYING GASP*/
+#define AVANTA_LP_CUSTOMER_MPP32_39             0x04420000  /* GE_SMI, PON & GPIO's */
+#define AVANTA_LP_CUSTOMER_MPP40_47             0x22120020  /* GE0, PON_[XVR,TX_PD,TX_SD]*/
+#define AVANTA_LP_CUSTOMER_MPP48_55             0x22222222  /* GE0*/
+#define AVANTA_LP_CUSTOMER_MPP56_63             0x44004422  /* GE0 , LED, GPIO's */
+#define AVANTA_LP_CUSTOMER_MPP64_67             0x004	     /* GPIO's */
+
+/* GPPs
+MPP#	NAME			IN/OUT
+--------------------------------------
+19	TDM_reset		OUT
+25	Ethernet Reset		OUT
+29	PCIe0_RSTOUTn		OUT
+*/
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_LOW      (~(BIT19 | BIT25 | BIT29))
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_MID      0xFFFFFFFF
+#define AVANTA_LP_CUSTOMER_GPP_OUT_ENA_HIGH     0xFFFFFFFF
+#define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_LOW      BIT29
 #define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_MID      0x0
 #define AVANTA_LP_CUSTOMER_GPP_OUT_VAL_HIGH     0x0
 #define AVANTA_LP_CUSTOMER_GPP_POL_LOW          0x0
-- 
1.7.5.4

