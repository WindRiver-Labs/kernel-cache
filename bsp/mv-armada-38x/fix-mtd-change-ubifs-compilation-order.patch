From 8bef30d20d28d48022dc7a9466b2c2c07a3b522c Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Wed, 7 Aug 2013 11:15:15 +0300
Subject: [PATCH 0927/1825] fix: mtd: change ubifs compilation order

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 238e0826c9880740b7787e512008179befa67806

	Update MTD Makefile so UBIFS will be
	built after Marvell MTD drivers.
	It fixes UBIFS init failure during boot.

Change-Id: I6ace2640556e8b785c32e5860a7847625c32e3f9
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2961
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Igor Patrik <igorp@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/mtd/Makefile |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mtd/Makefile b/drivers/mtd/Makefile
index 3ba2ec4..cefd0d6 100644
--- a/drivers/mtd/Makefile
+++ b/drivers/mtd/Makefile
@@ -32,8 +32,6 @@ inftl-objs		:= inftlcore.o inftlmount.o
 
 obj-y		+= chips/ lpddr/ maps/ devices/ nand/ onenand/ tests/
 
-obj-$(CONFIG_MTD_UBI)		+= ubi/
-
 ifeq ($(CONFIG_PLAT_ARMADA),y)
 obj-$(CONFIG_MTD)		+= ../../arch/arm/plat-armada/mv_drivers_lsp/mv_mtd/
 endif
@@ -41,3 +39,5 @@ endif
 ifeq ($(CONFIG_ARCH_FEROCEON),y)
 obj-$(CONFIG_MV_FLASH_CTRL)     += ../../arch/arm/plat-feroceon/mv_drivers_lsp/mv_mtd/
 endif
+
+obj-$(CONFIG_MTD_UBI)		+= ubi/
-- 
1.7.5.4

