From 8419e9e3115b293cf529f9c1e84ab6afe0291bc7 Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Thu, 4 Jul 2013 16:19:00 +0300
Subject: [PATCH 0769/1825] axp: bug fix: AMC board port 1 is disconnected

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 8f2122d4107ce711c2542ac7fa6fefd90cbc6edb

	AMC board port 1 is disconncted and the mvBoardIsGbEportConnected return true for port 1
	The fix is return false for AMC board port 1

Change-Id: Ic311198920342ec20f640291b44b2ed94948874c
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2428
Reviewed-by: Omri Itach <omrii@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../armada_xp_family/boardEnv/mvBoardEnvLib.c      |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-armadaxp/armada_xp_family/boardEnv/mvBoardEnvLib.c b/arch/arm/mach-armadaxp/armada_xp_family/boardEnv/mvBoardEnvLib.c
index 555bc9a..7cbec8c 100755
--- a/arch/arm/mach-armadaxp/armada_xp_family/boardEnv/mvBoardEnvLib.c
+++ b/arch/arm/mach-armadaxp/armada_xp_family/boardEnv/mvBoardEnvLib.c
@@ -1065,11 +1065,15 @@ MV_BOOL mvBoardIsGbEPortConnected(MV_U32 ethPortNum)
 			return MV_FALSE;
 		break;
 	case 1:
+#ifdef DB_78X60_AMC
+		return MV_FALSE; /* port 1 on AMC board is disconnected */
+#else
 		if (mvBoardIsLcdDviModuleConnected())
 			return MV_FALSE;
 		else if (mvBoardIsGMIIModuleConnected())
 			return MV_FALSE;
 		break;
+#endif
 	case 2:
 		if (mvBoardIsSetmModuleConnected())
 			return MV_FALSE;
-- 
1.7.5.4

