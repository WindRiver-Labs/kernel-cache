From 5b4d3539a92d1ed099faa3a8d2640b3192198d8d Mon Sep 17 00:00:00 2001
From: Eran Ben-Avi <benavi@marvell.com>
Date: Thu, 11 Jul 2013 18:11:44 +0300
Subject: [PATCH 0811/1825] AMC: fix compilation error with netfilter enabled

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 0d30b17b10c01f73e8a7846f0044e0731c33d96f

Change-Id: I2bb1932272b1f88a3449a7b464297af34262c440
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 drivers/net/ppp/ppp_generic.c     |    2 ++
 drivers/net/ppp/pppoe.c           |    3 ++-
 net/8021q/vlan.c                  |    2 ++
 net/bridge/br_fdb.c               |    2 ++
 net/bridge/br_if.c                |    2 ++
 net/core/neighbour.c              |    2 ++
 net/ipv4/route.c                  |    2 ++
 net/ipv6/ip6_fib.c                |    3 ++-
 net/netfilter/nf_conntrack_core.c |    2 ++
 9 files changed, 18 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ppp/ppp_generic.c b/drivers/net/ppp/ppp_generic.c
index f679209..dd05473 100644
--- a/drivers/net/ppp/ppp_generic.c
+++ b/drivers/net/ppp/ppp_generic.c
@@ -51,7 +51,9 @@
 #include <linux/atomic.h>
 
 #include <linux/nsproxy.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include <net/net_namespace.h>
 #include <net/netns/generic.h>
 
diff --git a/drivers/net/ppp/pppoe.c b/drivers/net/ppp/pppoe.c
index 795b0c5..5b4d748 100644
--- a/drivers/net/ppp/pppoe.c
+++ b/drivers/net/ppp/pppoe.c
@@ -80,8 +80,9 @@
 #include <linux/if_arp.h>
 
 #include <linux/nsproxy.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
-
+#endif
 #include <net/net_namespace.h>
 #include <net/netns/generic.h>
 #include <net/sock.h>
diff --git a/net/8021q/vlan.c b/net/8021q/vlan.c
index 5f24037..6a40086 100644
--- a/net/8021q/vlan.c
+++ b/net/8021q/vlan.c
@@ -31,7 +31,9 @@
 #include <net/arp.h>
 #include <linux/rtnetlink.h>
 #include <linux/notifier.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include <net/rtnetlink.h>
 #include <net/net_namespace.h>
 #include <net/netns/generic.h>
diff --git a/net/bridge/br_fdb.c b/net/bridge/br_fdb.c
index 5538e05..ae0bf51 100644
--- a/net/bridge/br_fdb.c
+++ b/net/bridge/br_fdb.c
@@ -24,7 +24,9 @@
 #include <linux/slab.h>
 #include <linux/atomic.h>
 #include <asm/unaligned.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include "br_private.h"
 
 static struct kmem_cache *br_fdb_cache __read_mostly;
diff --git a/net/bridge/br_if.c b/net/bridge/br_if.c
index 22f853f..89c2ac2 100644
--- a/net/bridge/br_if.c
+++ b/net/bridge/br_if.c
@@ -22,7 +22,9 @@
 #include <linux/rtnetlink.h>
 #include <linux/if_ether.h>
 #include <linux/slab.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include <net/sock.h>
 
 #include "br_private.h"
diff --git a/net/core/neighbour.c b/net/core/neighbour.c
index 792458d..fba420c 100644
--- a/net/core/neighbour.c
+++ b/net/core/neighbour.c
@@ -36,7 +36,9 @@
 #include <linux/random.h>
 #include <linux/string.h>
 #include <linux/log2.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #define NEIGH_DEBUG 1
 
 #define NEIGH_PRINTK(x...) printk(x)
diff --git a/net/ipv4/route.c b/net/ipv4/route.c
index 21875a9..d33aa0b 100644
--- a/net/ipv4/route.c
+++ b/net/ipv4/route.c
@@ -92,7 +92,9 @@
 #include <linux/rcupdate.h>
 #include <linux/times.h>
 #include <linux/slab.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include <linux/prefetch.h>
 #include <net/dst.h>
 #include <net/net_namespace.h>
diff --git a/net/ipv6/ip6_fib.c b/net/ipv6/ip6_fib.c
index 9da5dec..f0228fd 100644
--- a/net/ipv6/ip6_fib.c
+++ b/net/ipv6/ip6_fib.c
@@ -28,8 +28,9 @@
 #include <linux/init.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
-
+#endif
 #include <net/ipv6.h>
 #include <net/ndisc.h>
 #include <net/addrconf.h>
diff --git a/net/netfilter/nf_conntrack_core.c b/net/netfilter/nf_conntrack_core.c
index cd32be1..41b52b3 100644
--- a/net/netfilter/nf_conntrack_core.c
+++ b/net/netfilter/nf_conntrack_core.c
@@ -32,7 +32,9 @@
 #include <linux/mm.h>
 #include <linux/nsproxy.h>
 #include <linux/rculist_nulls.h>
+#if defined(CONFIG_MV_ETH_NFP) || defined(CONFIG_MV_ETH_NFP_MODULE)
 #include <linux/mv_nfp.h>
+#endif
 #include <net/netfilter/nf_conntrack.h>
 #include <net/netfilter/nf_conntrack_l3proto.h>
 #include <net/netfilter/nf_conntrack_l4proto.h>
-- 
1.7.5.4

