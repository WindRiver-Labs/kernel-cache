From eec41c3c0a00db27a2485a8a683e9e6effaa41fb Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Wed, 14 Nov 2012 17:48:32 +0200
Subject: [PATCH 0322/1825] cpu_pj4bv7_set_pte_ext did not flush pte if not
 using 64KB page

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 766da2214728e8c8fcada820aabf8ab83a691c16

An #else is missing since commit bc0fbc5014847a499a24547339e54134235ff150.

Signed-off-by: Po-Yu Chuang <pychuang@marvell.com>
Signed-off-by: Shadi Ammouri <shadi@marvell.com>

Change-Id: I59d31eac657dee539b0220f59cbff09c142c8200
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mm/proc-sheeva_pj4bv7.S |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mm/proc-sheeva_pj4bv7.S b/arch/arm/mm/proc-sheeva_pj4bv7.S
index 1936ca3..0b49cfb 100644
--- a/arch/arm/mm/proc-sheeva_pj4bv7.S
+++ b/arch/arm/mm/proc-sheeva_pj4bv7.S
@@ -248,6 +248,7 @@ str	r1, [r0]			@ linux version
 #else
 	mcr		p15, 0, r0, c7, c10, 1			@ flush_pte
 #endif
+#else /* CONFIG_MV_SUPPORT_64KB_PAGE_SIZE */
 #if defined CONFIG_SHEEVA_ERRATA_ARM_CPU_6043 || defined(CONFIG_SHEEVA_ERRATA_ARM_CPU_6124) || defined(CONFIG_SHEEVA_ERRATA_ARM_CPU_6076)
 	mcr		p15, 0, r0, c7, c14, 1			@ clean & invalidate D entry
 #else
-- 
1.7.5.4

