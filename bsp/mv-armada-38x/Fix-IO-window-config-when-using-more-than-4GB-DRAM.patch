From 375ebd5acf5df9cefe58c8b09b1724fd1447f500 Mon Sep 17 00:00:00 2001
From: Nadav Haklai <nadavh@marvell.com>
Date: Wed, 24 Oct 2012 10:40:40 +0200
Subject: [PATCH 0262/1825] Fix IO window config when using more than 4GB DRAM

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 9eab3c97185925ef45141234712f5b8179111e85

Change-Id: Ibb6ba7b45a68807882ce45f4b2816b5f7936319a
Signed-off-by: Nadav Haklai <nadavh@marvell.com>
Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armadaxp/config/mvSysHwConfig.h  |    4 ++++
 arch/arm/mach-armadaxp/include/mach/armadaxp.h |    5 +++++
 2 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-armadaxp/config/mvSysHwConfig.h b/arch/arm/mach-armadaxp/config/mvSysHwConfig.h
index b0f7c6e..25e0f13 100644
--- a/arch/arm/mach-armadaxp/config/mvSysHwConfig.h
+++ b/arch/arm/mach-armadaxp/config/mvSysHwConfig.h
@@ -58,6 +58,10 @@ disclaimer.
 #define _1G         0x40000000
 #define _2G         0x80000000
 
+#ifdef CONFIG_DRAM_IO_RESERVE_BASE
+#define MV_DRAM_IO_RESERVE_BASE	CONFIG_DRAM_IO_RESERVE_BASE
+#endif
+
 /****************************************/
 /* Soc supporeted Units definitions	*/
 /****************************************/
diff --git a/arch/arm/mach-armadaxp/include/mach/armadaxp.h b/arch/arm/mach-armadaxp/include/mach/armadaxp.h
index 26a63aa..05e9bff 100644
--- a/arch/arm/mach-armadaxp/include/mach/armadaxp.h
+++ b/arch/arm/mach-armadaxp/include/mach/armadaxp.h
@@ -19,6 +19,11 @@
 /******************* System Address Mapping *********************/
 /****************************************************************/
 
+/* The base address of memory that should be reserved for IO windows.
+** The reserved end address is 0xFFFFFFFF.
+*/
+#define CONFIG_DRAM_IO_RESERVE_BASE	0xC0000000ll
+
 /*
  * Armada-XP address maps.
  *
-- 
1.7.5.4

