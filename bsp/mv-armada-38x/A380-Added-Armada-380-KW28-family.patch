From 30f365efd40c1f0171753124f5d3c1be5ce66c5c Mon Sep 17 00:00:00 2001
From: Eli Nidam <elini@marvell.com>
Date: Thu, 10 Oct 2013 16:20:29 +0200
Subject: [PATCH 1020/1825] A380: Added Armada 380 (KW28) family

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 7ab8f7bb3a87fbbfeba3252272838e8760d8316e

Change-Id: Iedc8818951ffc3bbbd08c0d35ed5b16e96e5daaf
Signed-off-by: Eli Nidam <elini@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/3672
Reviewed-by: Tawfik Bayouk <tawfik@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/plat-armada/common/mvCommon.c |   28 ++++++++++++++++++++++++++++
 arch/arm/plat-armada/common/mvCommon.h |    1 +
 2 files changed, 29 insertions(+), 0 deletions(-)
 mode change 100755 => 100644 arch/arm/plat-armada/common/mvCommon.h

diff --git a/arch/arm/plat-armada/common/mvCommon.c b/arch/arm/plat-armada/common/mvCommon.c
index 9789096..ac852f8 100644
--- a/arch/arm/plat-armada/common/mvCommon.c
+++ b/arch/arm/plat-armada/common/mvCommon.c
@@ -387,3 +387,31 @@ MV_U8 mvReverseBits(MV_U8 num)
 	num = (num & 0xAA) >> 1 | (num & 0x55) << 1;
 	return num;
 }
+/*******************************************************************************
+* mvCountMaskBits
+*
+* DESCRIPTION:
+*       This function count 1 in mask bit
+*
+* INPUT:
+*	num - MV_U8 number to count
+*
+* OUTPUT:
+*       None
+*
+* RETURN:
+*	number of 1 in mask
+*
+*******************************************************************************/
+MV_U32 mvCountMaskBits(MV_U8 mask)
+{
+	int i;
+	MV_U32 c = 0;
+
+	for (i = 0; i < 8; i++) {
+		if (mask & 1)
+			c++;
+		mask = mask >> 1;
+	}
+	return c;
+}
diff --git a/arch/arm/plat-armada/common/mvCommon.h b/arch/arm/plat-armada/common/mvCommon.h
old mode 100755
new mode 100644
index 54029dc..a84d0f0
--- a/arch/arm/plat-armada/common/mvCommon.h
+++ b/arch/arm/plat-armada/common/mvCommon.h
@@ -384,6 +384,7 @@ void mvAsciiToHex(const char *asciiStr, char *hexStr);
 void mvBinToHex(const MV_U8 *bin, char *hexStr, int size);
 void mvBinToAscii(const MV_U8 *bin, char *asciiStr, int size);
 MV_U8 mvReverseBits(MV_U8 num);
+MV_U32 mvCountMaskBits(MV_U8 mask);
 
 MV_STATUS mvMacStrToHex(const char *macStr, MV_U8 *macHex);
 MV_STATUS mvMacHexToStr(MV_U8 *macHex, char *macStr);
-- 
1.7.5.4

