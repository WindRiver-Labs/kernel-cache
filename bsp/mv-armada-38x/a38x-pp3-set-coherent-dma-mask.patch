From 4e0a6810e5cb15c42c217ea9671c2ad81339f27a Mon Sep 17 00:00:00 2001
From: Uri Eliyahu <uriel@marvell.com>
Date: Wed, 23 Apr 2014 16:51:44 +0300
Subject: [PATCH 1582/1825] a38x: pp3: set coherent dma mask

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 872343963f66f5e3d21273bbcc1496a7c922983c

Change-Id: Id4ed1a957e0e95d8940df00df8d7dd68d6851502
Signed-off-by: Uri Eliyahu <uriel@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/7172
Reviewed-by: Dmitri Epshtein <dima@marvell.com>
Tested-by: Star_Automation <star@marvell.com>
Reviewed-by: Yelena Krivosheev <yelena@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-armada38x/core.c |    1 +
 include/linux/mv_pp3.h         |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-armada38x/core.c b/arch/arm/mach-armada38x/core.c
index e78bdff..52b9bf3 100644
--- a/arch/arm/mach-armada38x/core.c
+++ b/arch/arm/mach-armada38x/core.c
@@ -585,6 +585,7 @@ static struct platform_device mv_pp3_shared_plat = {
 	.name			= MV_PP3_SHARED_NAME,
 	.dev			= {
 		.platform_data	= &mv_pp3_ge0_shared_data,
+		.coherent_dma_mask = DMA_BIT_MASK(32),
 	},
 
 };
diff --git a/include/linux/mv_pp3.h b/include/linux/mv_pp3.h
index aa9356e..68a6a4b 100644
--- a/include/linux/mv_pp3.h
+++ b/include/linux/mv_pp3.h
@@ -75,6 +75,7 @@ struct mv_pp3_plat_data {
 	/* Global parameters common for all ports */
 	unsigned int  tclk;
 	int           max_port;
+	int           irq_base;
 
 	/* Controller Model (Device ID) and Revision */
 	unsigned int  ctrl_model;
-- 
1.7.5.4

