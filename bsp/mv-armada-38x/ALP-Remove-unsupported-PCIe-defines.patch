From a0b37d9db5de35e1bdc4b920465453c21e061bc1 Mon Sep 17 00:00:00 2001
From: Kosta Zertsekel <konszert@marvell.com>
Date: Sun, 14 Apr 2013 17:16:22 +0300
Subject: [PATCH 0584/1825] ALP: Remove unsupported PCIe defines

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 866001c810d6451b59791c11639029bff8ad7d05

Signed-off-by: Kosta Zertsekel <konszert@marvell.com>
Change-Id: I205020b05b1850e6a72bb2b64cbe389f668cd8ff
Reviewed-on: http://vgitil04.il.marvell.com:8080/1562
Reviewed-by: Eran Ben-Avi <benavi@marvell.com>
Tested-by: Eran Ben-Avi <benavi@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-avantalp/include/mach/avantalp.h |   53 -----------------
 arch/arm/mach-avantalp/sysmap.c                |   75 +++---------------------
 2 files changed, 8 insertions(+), 120 deletions(-)

diff --git a/arch/arm/mach-avantalp/include/mach/avantalp.h b/arch/arm/mach-avantalp/include/mach/avantalp.h
index 15bf15a..3f478e7 100644
--- a/arch/arm/mach-avantalp/include/mach/avantalp.h
+++ b/arch/arm/mach-avantalp/include/mach/avantalp.h
@@ -37,43 +37,11 @@
 #define PEX0_MEM_SIZE			_32M
 #define PEX1_MEM_PHYS_BASE		0xE2000000
 #define PEX1_MEM_SIZE			_32M
-#define PEX2_MEM_PHYS_BASE		0xE4000000
-#define PEX2_MEM_SIZE			_32M
-#define PEX3_MEM_PHYS_BASE		0xE6000000
-#define PEX3_MEM_SIZE			_32M
-#define PEX4_MEM_PHYS_BASE		0xE8000000
-#define PEX4_MEM_SIZE			_32M
-#define PEX5_MEM_PHYS_BASE		0x0
-#define PEX5_MEM_SIZE			_32M
-#define PEX6_MEM_PHYS_BASE		0xEA000000
-#define PEX6_MEM_SIZE			_32M
-#define PEX7_MEM_PHYS_BASE		0x0
-#define PEX7_MEM_SIZE			_32M
-#define PEX8_MEM_PHYS_BASE		0xEC000000
-#define PEX8_MEM_SIZE			_32M
-#define PEX9_MEM_PHYS_BASE		0xEE000000
-#define PEX9_MEM_SIZE			_32M
 
 #define PEX0_IO_PHYS_BASE		0xF1100000
 #define PEX0_IO_SIZE			_1M
 #define PEX1_IO_PHYS_BASE		0xF1200000
 #define PEX1_IO_SIZE			_1M
-#define PEX2_IO_PHYS_BASE		0xF1300000
-#define PEX2_IO_SIZE			_1M
-#define PEX3_IO_PHYS_BASE		0xF1400000
-#define PEX3_IO_SIZE			_1M
-#define PEX4_IO_PHYS_BASE		0xF1500000
-#define PEX4_IO_SIZE			_1M
-#define PEX5_IO_PHYS_BASE		0xF1600000
-#define PEX5_IO_SIZE			_1M
-#define PEX6_IO_PHYS_BASE		0xF1700000
-#define PEX6_IO_SIZE			_1M
-#define PEX7_IO_PHYS_BASE		0xF1800000
-#define PEX7_IO_SIZE			_1M
-#define PEX8_IO_PHYS_BASE		0xF1900000
-#define PEX8_IO_SIZE			_1M
-#define PEX9_IO_PHYS_BASE		0xF1A00000
-#define PEX9_IO_SIZE			_1M
 
 #define SPI_CS0_PHYS_BASE		0xF0000000
 #define SPI_CS0_SIZE			_16M
@@ -107,9 +75,6 @@
 #define BOOTROM_PHYS_BASE		0xFFF00000
 #define BOOTROM_SIZE			_1M
 
-#define PMU_SCRATCH_PHYS_BASE		0xF4700000
-#define PMU_SCRATCH_SIZE		_1M
-
 #define LEGACY_NAND_PHYS_BASE		0xF4800000
 #define LEGACY_NAND_SIZE		_1M
 
@@ -132,14 +97,6 @@
 
 #define PEX0_IO_VIRT_BASE		0xFBE00000
 #define PEX1_IO_VIRT_BASE		0xFBF00000
-#define PEX2_IO_VIRT_BASE		0xFC000000
-#define PEX3_IO_VIRT_BASE		0xFC100000
-#define PEX4_IO_VIRT_BASE		0xFC200000
-#define PEX5_IO_VIRT_BASE		0xFC300000
-#define PEX6_IO_VIRT_BASE		0xFC400000
-#define PEX7_IO_VIRT_BASE		0xFC500000
-#define PEX8_IO_VIRT_BASE		0xFC600000
-#define PEX9_IO_VIRT_BASE		0xFC700000
 
 #define UART_VIRT_BASE			0xFC800000
 
@@ -152,7 +109,6 @@
 #define CRYPT_ENG_VIRT_BASE(chan)	((chan == 0) ? 0xFEE00000 : 0xFEE10000)
 #define PNC_BM_VIRT_BASE		0xFEF00000
 #define BOOTROM_VIRT_BASE		0xFF000000
-#define PMU_SCRATCH_VIRT_BASE		0xFF100000
 #define LEGACY_NAND_VIRT_BASE		0xFF200000
 
 #else /* !CONFIG_ARM_LPAE */
@@ -162,14 +118,6 @@
 
 #define PEX0_IO_VIRT_BASE		0xFBC00000
 #define PEX1_IO_VIRT_BASE		0xFBD00000
-#define PEX2_IO_VIRT_BASE		0xFBE00000
-#define PEX3_IO_VIRT_BASE		0xFBF00000
-#define PEX4_IO_VIRT_BASE		0xFC000000
-#define PEX5_IO_VIRT_BASE		0xFC100000
-#define PEX6_IO_VIRT_BASE		0xFC200000
-#define PEX7_IO_VIRT_BASE		0xFC300000
-#define PEX8_IO_VIRT_BASE		0xFC400000
-#define PEX9_IO_VIRT_BASE		0xFC500000
 
 #define UART_VIRT_BASE			0xFC600000
 
@@ -182,7 +130,6 @@
 #define CRYPT_ENG_VIRT_BASE(chan)	((chan == 0) ? 0xFEB00000 : 0xFEB10000)
 #define PNC_BM_VIRT_BASE		0xFEC00000
 #define BOOTROM_VIRT_BASE		0xFED00000
-#define PMU_SCRATCH_VIRT_BASE		0xFEE00000
 #define LEGACY_NAND_VIRT_BASE		0xFEF00000
 
 #endif /* CONFIG_ARM_LPAE */
diff --git a/arch/arm/mach-avantalp/sysmap.c b/arch/arm/mach-avantalp/sysmap.c
index 72ba05f..13c2c43 100644
--- a/arch/arm/mach-avantalp/sysmap.c
+++ b/arch/arm/mach-avantalp/sysmap.c
@@ -21,15 +21,13 @@
 #include <asm/smp_twd.h>
 #include "ca9x2.h"
 
-MV_CPU_DEC_WIN* mv_sys_map(void);
-
-struct map_desc  MEM_TABLE[] =	{
+struct map_desc MEM_TABLE[] =	{
 	/* no use for pex mem remap */
-	{ INTER_REGS_VIRT_BASE,		__phys_to_pfn(INTER_REGS_PHYS_BASE),	SZ_1M,  	     	MT_DEVICE},
+	{ INTER_REGS_VIRT_BASE,		__phys_to_pfn(INTER_REGS_PHYS_BASE),	SZ_1M, 	     	MT_DEVICE },
 };
 
 MV_CPU_DEC_WIN SYSMAP_ALP[] = {
-	/* base low       	     base high        size       		WinNum     	enable */
+	/* base low			base high        size       		WinNum     	enable */
 	{{SDRAM_CS0_BASE,		0,	SDRAM_CS0_SIZE		},	0xFFFFFFFF,	DIS},	/* SDRAM_CS0 */
 	{{SDRAM_CS1_BASE,		0,	SDRAM_CS1_SIZE		},	0xFFFFFFFF,	DIS},	/* SDRAM_CS1 */
 	{{SDRAM_CS2_BASE,		0,	SDRAM_CS2_SIZE		},	0xFFFFFFFF,	DIS},	/* SDRAM_CS2 */
@@ -42,22 +40,6 @@ MV_CPU_DEC_WIN SYSMAP_ALP[] = {
 	{{PEX0_IO_PHYS_BASE,		0,	PEX0_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX0_IO */
 	{{PEX1_MEM_PHYS_BASE,		0,	PEX1_MEM_SIZE		},	0x1,		EN},	/* PEX1_MEM */
 	{{PEX1_IO_PHYS_BASE,		0,	PEX1_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX1_IO */
-	{{PEX2_MEM_PHYS_BASE,		0,	PEX2_MEM_SIZE		},	0x2,		EN},	/* PEX2_MEM */
-	{{PEX2_IO_PHYS_BASE,		0,	PEX2_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX2_IO */
-	{{PEX3_MEM_PHYS_BASE,		0,	PEX3_MEM_SIZE		},	0x3,		EN},	/* PEX3_MEM */
-	{{PEX3_IO_PHYS_BASE,		0,	PEX3_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX3_IO */
-	{{PEX4_MEM_PHYS_BASE,		0,	PEX4_MEM_SIZE		},	0x4,		EN},	/* PEX4_MEM */
-	{{PEX4_IO_PHYS_BASE,		0,	PEX4_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX4_IO */
-	{{PEX5_MEM_PHYS_BASE,		0,	PEX5_MEM_SIZE		},	TBL_UNUSED,	DIS},	/* PEX5_MEM */
-	{{PEX5_IO_PHYS_BASE,		0,	PEX5_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX5_IO */
-	{{PEX6_MEM_PHYS_BASE,		0,	PEX6_MEM_SIZE		},	0x5,		EN},	/* PEX6_MEM */
-	{{PEX6_IO_PHYS_BASE,		0,	PEX6_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX6_IO */
-	{{PEX7_MEM_PHYS_BASE,		0,	PEX7_MEM_SIZE		},	TBL_UNUSED,	DIS},	/* PEX7_MEM */
-	{{PEX7_IO_PHYS_BASE,		0,	PEX7_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX7_IO */
-	{{PEX8_MEM_PHYS_BASE,		0,	PEX8_MEM_SIZE		},	0x6,		EN},	/* PEX8_MEM */
-	{{PEX8_IO_PHYS_BASE,		0,	PEX8_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX8_IO */
-	{{PEX9_MEM_PHYS_BASE,		0,	PEX9_MEM_SIZE		},	0x7,		EN},	/* PEX9_MEM */
-	{{PEX9_IO_PHYS_BASE,		0,	PEX9_IO_SIZE		},	TBL_UNUSED,	DIS},	/* PEX9_IO */
 	{{INTER_REGS_PHYS_BASE,		0,	INTER_REGS_SIZE		},	0x14,		EN},	/* INTER_REGS */
 	{{UART_REGS_BASE,		0,	UART_SIZE		},	TBL_UNUSED,	DIS},	/* DMA_UART */
 	{{SPI_CS0_PHYS_BASE,		0,	SPI_CS0_SIZE		},	0xe,		DIS},	/* SPI_CS0 */
@@ -70,14 +52,13 @@ MV_CPU_DEC_WIN SYSMAP_ALP[] = {
 	{{TBL_UNUSED,			0,	TBL_UNUSED,		},	TBL_UNUSED,	DIS},	/* SPI_CS7 */
 	{{BOOTROM_PHYS_BASE,		0,	BOOTROM_SIZE		},	0x9,		DIS},	/* BOOTROM */
 	{{DEVICE_BOOTCS_PHYS_BASE,	0,	DEVICE_BOOTCS_SIZE	},	0xa,		DIS},	/* DEV_BOOCS */
-	{{PMU_SCRATCH_PHYS_BASE,	0,	PMU_SCRATCH_SIZE	},	TBL_UNUSED,	DIS},	/* PMU SCRATCHPAD */
 	{{CRYPT_ENG_PHYS_BASE(0),	0,	CRYPT_ENG_SIZE		},	0xb,		DIS},	/* CRYPT0_ENG */
 	{{CRYPT_ENG_PHYS_BASE(1),	0,	CRYPT_ENG_SIZE		},	0xc,		DIS},	/* CRYPT1_ENG */
 	{{PNC_BM_PHYS_BASE,		0,	PNC_BM_SIZE		},	0xd,		DIS},	/* PNC_BM */
 	{{TBL_TERM,				TBL_TERM, TBL_TERM	},	TBL_TERM,	TBL_TERM}
 };
 
-MV_CPU_DEC_WIN* mv_sys_map(void)
+MV_CPU_DEC_WIN *mv_sys_map(void)
 {
 	return SYSMAP_ALP;
 }
@@ -102,70 +83,30 @@ static u32 mv_pci_mem_base[] =
 {
 	PEX0_MEM_PHYS_BASE,
 	PEX1_MEM_PHYS_BASE,
-	PEX2_MEM_PHYS_BASE,
-	PEX3_MEM_PHYS_BASE,
-	PEX4_MEM_PHYS_BASE,
-	PEX5_MEM_PHYS_BASE,
-	PEX6_MEM_PHYS_BASE,
-	PEX7_MEM_PHYS_BASE,
-	PEX8_MEM_PHYS_BASE,
-	PEX9_MEM_PHYS_BASE,
 };
 
 static u32 mv_pci_mem_size[] =
 {
 	PEX0_MEM_SIZE,
 	PEX1_MEM_SIZE,
-	PEX2_MEM_SIZE,
-	PEX3_MEM_SIZE,
-	PEX4_MEM_SIZE,
-	PEX5_MEM_SIZE,
-	PEX6_MEM_SIZE,
-	PEX7_MEM_SIZE,
-	PEX8_MEM_SIZE,
-	PEX9_MEM_SIZE,
 };
 
 static u32 mv_pci_io_base[] =
 {
 	PEX0_IO_PHYS_BASE,
 	PEX1_IO_PHYS_BASE,
-	PEX2_IO_PHYS_BASE,
-	PEX3_IO_PHYS_BASE,
-	PEX4_IO_PHYS_BASE,
-	PEX5_IO_PHYS_BASE,
-	PEX6_IO_PHYS_BASE,
-	PEX7_IO_PHYS_BASE,
-	PEX8_IO_PHYS_BASE,
-	PEX9_IO_PHYS_BASE
 };
 
 static u32 mv_pci_io_size[] =
 {
 	PEX0_IO_SIZE,
 	PEX1_IO_SIZE,
-	PEX2_IO_SIZE,
-	PEX3_IO_SIZE,
-	PEX4_IO_SIZE,
-	PEX5_IO_SIZE,
-	PEX6_IO_SIZE,
-	PEX7_IO_SIZE,
-	PEX8_IO_SIZE,
-	PEX9_IO_SIZE,
 };
 
 static MV_TARGET mv_pci_io_target[] =
 {
 	PEX0_IO,
 	PEX1_IO,
-	PEX2_IO,
-	PEX3_IO,
-	PEX4_IO,
-	PEX5_IO,
-	PEX6_IO,
-	PEX7_IO,
-	PEX8_IO,
-	PEX9_IO,
 };
 
 u32 mv_pci_mem_base_get(int ifNum)
@@ -196,10 +137,10 @@ MV_TARGET mv_pci_io_target_get(int ifNum)
 int mv_is_pci_io_mapped(int ifNum)
 {
 	/* FIXME: First 8 address decode windows are statically assigned
-	   for 8 PCIE mem BARs.
-	   This is disabled as long that no more windows are available for
-	   I/O BARs
-	*/
+	 * for 8 PCIE mem BARs.
+	 * This is disabled as long that no more windows are available for
+	 * I/O BARs
+	 */
 
 	return 0;
 }
-- 
1.7.5.4

