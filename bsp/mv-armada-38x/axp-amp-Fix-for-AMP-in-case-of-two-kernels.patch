From ad67b743667132f8263ac7a9834831fb5ed76b3c Mon Sep 17 00:00:00 2001
From: Igor Patrik <igorp@marvell.com>
Date: Thu, 8 Aug 2013 09:56:39 +0200
Subject: [PATCH 0931/1825] axp:amp: Fix for AMP in case of two kernels.

https://github.com/MISL-EBU-System-SW/misl-windriver.git linux-3.4.69-14t2-read
commit 88a63fcf2a3d3556ae821c1f48d7e36b4fb5e9a5

	G0 kernel hungs, added proper branch.

Change-Id: Ib9d32c153ae7a002c4c34d221a96ea89673e2568
Signed-off-by: Igor Patrik <igorp@marvell.com>
Reviewed-on: http://vgitil04.il.marvell.com:8080/2980
Tested-by: Star_Automation <star@marvell.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/boot/compressed/head.S |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/compressed/head.S b/arch/arm/boot/compressed/head.S
index 8d392bc..392d2069 100644
--- a/arch/arm/boot/compressed/head.S
+++ b/arch/arm/boot/compressed/head.S
@@ -147,10 +147,9 @@ start:
 */
 		mrc p15, 0, r0, c5, c0, 0	@ Get the internal registers indication
 		tst r0, #(1 << 11)		@ Check 0xF1000000 indication - bit 11
-		beq 1f				@ If bit 11 is not set (equal):
-						@ AXP - Need to check original Internal regs offset CP15 register
-						@ A370 - U-Boot was using 0xD0000000
-		b 2f				@ Else, bit 11 is set - U-Boot was using 0xF1000000 - Nothing to do
+		beq 1f	@ If bit 11 is not set (equal):
+				@ AXP - Need to check original Internal regs offset CP15 register
+		b 2f	@ Else, bit 11 is set - U-Boot was using 0xF1000000 - Nothing to do
 1:
 		mrc p15, 4, r0, c15, c0, 0	@ Get the internal registers base address
 		lsl r0, r0, #13			@ the address is R-shifted, need to recover it
@@ -161,6 +160,7 @@ start:
 		rev r6, r6
 #endif
 		str r6, [r0]
+2:
 #endif
 
 		mov	r7, r1			@ save architecture ID
-- 
1.7.5.4

