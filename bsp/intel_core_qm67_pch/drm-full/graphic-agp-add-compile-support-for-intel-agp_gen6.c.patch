From 67b9f430c47cc7238b72f9b43d3b46f22175e6fd Mon Sep 17 00:00:00 2001
From: Guoqing Jiang <Guoqing.Jiang@windriver.com>
Date: Sun, 23 Jan 2011 13:46:42 +0800
Subject: [PATCH 01/11] graphic/agp: add compile support for intel-agp_gen6.c and intel-gtt.c

Add dedicated support for Intel SandyBridge as backported
from the 2.6.37 kernel. In order to not impact existing
intel-agp boards, new files are created to contain the
changes.

Signed-off-by: Guoqing Jiang <Guoqing.Jiang@windriver.com>
---
 drivers/char/agp/Makefile |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/drivers/char/agp/Makefile b/drivers/char/agp/Makefile
index 627f542..a3cb896 100644
--- a/drivers/char/agp/Makefile
+++ b/drivers/char/agp/Makefile
@@ -12,7 +12,12 @@ obj-$(CONFIG_AGP_EFFICEON)	+= efficeon-agp.o
 obj-$(CONFIG_AGP_HP_ZX1)	+= hp-agp.o
 obj-$(CONFIG_AGP_PARISC)	+= parisc-agp.o
 obj-$(CONFIG_AGP_I460)		+= i460-agp.o
+ifndef CONFIG_DRM_I915_SB
 obj-$(CONFIG_AGP_INTEL)		+= intel-agp.o
+else
+obj-$(CONFIG_AGP_INTEL)		+= intel-agp_gen6.o
+obj-$(CONFIG_AGP_INTEL)         += intel-gtt.o
+endif
 obj-$(CONFIG_AGP_NVIDIA)	+= nvidia-agp.o
 obj-$(CONFIG_AGP_SGI_TIOCA)	+= sgi-agp.o
 obj-$(CONFIG_AGP_SIS)		+= sis-agp.o
-- 
1.6.5.2

