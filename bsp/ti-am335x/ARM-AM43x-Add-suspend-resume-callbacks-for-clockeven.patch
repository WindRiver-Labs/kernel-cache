From 15d13be089ae6ddf1892da1f6a1feac6fec80194 Mon Sep 17 00:00:00 2001
From: Rajendra Nayak <rnayak@ti.com>
Date: Fri, 31 Jan 2014 17:56:08 +0530
Subject: [PATCH 162/188] ARM: AM43x: Add suspend/resume callbacks for
 clockevent

This commit comes from branch ti-linux-3.12.y:
  git://git.ti.com/ti-linux-kernel/ti-linux-kernel.git

With gptimers being used as both the clockevent and clocksource
on AM43x, we need the suspend/resume callbacks populated to idle
the non wakeup domain gptimer in order to achieve system low
power state in suspend.

Signed-off-by: Rajendra Nayak <rnayak@ti.com>
(cherry picked from commit 11aca775ab25e1fccb89c4611f6838967d4acf01)
---
 arch/arm/mach-omap2/timer.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/timer.c b/arch/arm/mach-omap2/timer.c
index c3fe1b2..a98ee9a 100644
--- a/arch/arm/mach-omap2/timer.c
+++ b/arch/arm/mach-omap2/timer.c
@@ -352,7 +352,7 @@ static void __init omap2_gp_clockevent_init(int gptimer_id,
 	clkev.id = gptimer_id;
 	clkev.errata = omap_dm_timer_get_errata();
 
-	if (soc_is_am33xx()) {
+	if (soc_is_am33xx() || soc_is_am43xx()) {
 		clockevent_gpt.suspend = omap_clkevt_suspend;
 		clockevent_gpt.resume = omap_clkevt_resume;
 	}
-- 
1.7.5.4

