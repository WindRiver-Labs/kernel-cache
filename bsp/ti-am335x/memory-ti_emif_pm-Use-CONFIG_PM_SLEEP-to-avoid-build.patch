From 9113d432fb921eb252f26d97e8c6ef918ab45e09 Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Thu, 5 Nov 2015 11:44:38 -0600
Subject: [PATCH 656/800] memory: ti_emif_pm: Use CONFIG_PM_SLEEP to avoid
 build warning

Wrap ti_emif_resume in CONFIG_PM_SLEEP to avoid warning when building
with suspend disabled:

   CC      fs/nfs_common/grace.o
   CC      fs/nfs/direct.o
drivers/memory/ti-emif-pm.c:161:12: warning: 'ti_emif_resume' defined
but not used [-Wunused-function]
  static int ti_emif_resume(struct device *dev)
             ^
   AS      drivers/memory/ti-emif-sram-pm.o
   LD      drivers/memory/ti-emif-sram.o

Reported-by: Grygorii Strashko <grygorii.strashko@ti.com>
Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/memory/ti-emif-pm.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/memory/ti-emif-pm.c b/drivers/memory/ti-emif-pm.c
index 3adbcbb..3a9feab 100644
--- a/drivers/memory/ti-emif-pm.c
+++ b/drivers/memory/ti-emif-pm.c
@@ -158,6 +158,7 @@ static const struct of_device_id ti_emif_of_match[] = {
 	{},
 };
 
+#ifdef CONFIG_PM_SLEEP
 static int ti_emif_resume(struct device *dev)
 {
 	unsigned long tmp =  __raw_readl(ti_emif_sram_virt);
@@ -175,6 +176,7 @@ static int ti_emif_resume(struct device *dev)
 
 	return 0;
 }
+#endif /* CONFIG_PM_SLEEP */
 
 static int ti_emif_probe(struct platform_device *pdev)
 {
-- 
1.7.5.4

