From cfbf6b0a756f4c1a1b68678396ad6b97afd1ceee Mon Sep 17 00:00:00 2001
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date: Thu, 28 May 2015 01:58:02 +0300
Subject: [PATCH 083/800] drm: omapdrm: Remove nested PM get/sync when
 configuring encoders

commit fd93a252da41e40e2b6383122eb6009714faa51c upstream

The omap_crtc_encoder_setup() function is always called with the DSS
enabled. Remove the dispc_runtime_get() and dispc_runtime_put() calls.

Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
---
 drivers/gpu/drm/omapdrm/omap_crtc.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/omapdrm/omap_crtc.c b/drivers/gpu/drm/omapdrm/omap_crtc.c
index 8cf7e4a..5fc669c 100644
--- a/drivers/gpu/drm/omapdrm/omap_crtc.c
+++ b/drivers/gpu/drm/omapdrm/omap_crtc.c
@@ -374,8 +374,6 @@ static void omap_crtc_encoder_setup(struct drm_crtc *crtc, bool enable)
 
 	DBG("%s: enable=%d", omap_crtc->name, enable);
 
-	dispc_runtime_get();
-
 	for (i = 0; i < priv->num_encoders; i++) {
 		if (priv->encoders[i]->crtc == crtc) {
 			encoder = priv->encoders[i];
@@ -396,8 +394,6 @@ static void omap_crtc_encoder_setup(struct drm_crtc *crtc, bool enable)
 			omap_encoder_set_enabled(encoder, true);
 		}
 	}
-
-	dispc_runtime_put();
 }
 
 /* -----------------------------------------------------------------------------
-- 
1.7.5.4

