From ab8d34232de97f1ce8459636dc71bed5b668d9f1 Mon Sep 17 00:00:00 2001
From: Benoit Parrot <bparrot@ti.com>
Date: Tue, 20 Oct 2015 17:11:23 -0500
Subject: [PATCH 607/800] media: i2c: ov1063x: Fix pm_runtime_enable/disable
 unbalanced call causing a warning

Previously the driver would only call pm_runtime_enable() while probing.
Unloading the module and reloading it would cause a warning due to the
pm_runtime_enable being called without the appropriate pm_runtime_disable
not being called when unloading the module.

Signed-off-by: Benoit Parrot <bparrot@ti.com>
Signed-off-by: Jyri Sarha <jsarha@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/media/i2c/ov1063x.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/media/i2c/ov1063x.c b/drivers/media/i2c/ov1063x.c
index dad3344..9a27c01 100644
--- a/drivers/media/i2c/ov1063x.c
+++ b/drivers/media/i2c/ov1063x.c
@@ -1086,6 +1086,7 @@ static int ov1063x_remove(struct i2c_client *client)
 
 	v4l2_device_unregister_subdev(&priv->subdev);
 	v4l2_ctrl_handler_free(&priv->hdl);
+	pm_runtime_disable(&client->dev);
 
 	return 0;
 }
-- 
1.7.5.4

