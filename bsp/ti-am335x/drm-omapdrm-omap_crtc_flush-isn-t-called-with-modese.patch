From edfb5e6a729f38d5bd9140d7b56c36f044ea7b94 Mon Sep 17 00:00:00 2001
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date: Wed, 15 Apr 2015 22:47:45 +0300
Subject: [PATCH 081/800] drm: omapdrm: omap_crtc_flush() isn't called with
 modeset locked

commit 55613acf1d1e4e6511e85d823e9235941236e6d3 upstream

When performing asynchronous atomic updates the modeset lock isn't taken
around the callers of omap_crtc_flush(). This isn't an issue though, as
access to the CRTC is properly serialized. Just drop the warning.

Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
---
 drivers/gpu/drm/omapdrm/omap_crtc.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/omapdrm/omap_crtc.c b/drivers/gpu/drm/omapdrm/omap_crtc.c
index 656fa3a..44565bc 100644
--- a/drivers/gpu/drm/omapdrm/omap_crtc.c
+++ b/drivers/gpu/drm/omapdrm/omap_crtc.c
@@ -365,7 +365,6 @@ static int omap_crtc_flush(struct drm_crtc *crtc)
 
 	DBG("%s: GO", omap_crtc->name);
 
-	WARN_ON(!drm_modeset_is_locked(&crtc->mutex));
 	WARN_ON(omap_crtc->vblank_irq.registered);
 
 	if (dispc_mgr_is_enabled(omap_crtc->channel)) {
-- 
1.7.5.4

