From 6070c019f9ff4bece8760e68c5f7c26cca6996d8 Mon Sep 17 00:00:00 2001
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date: Wed, 18 Feb 2015 10:47:26 +0200
Subject: [PATCH 022/800] drm/tilcdc: fix sync with tda998x

tda998x samples at rising edge of the pixel clock. This means the LCDC
should drive the signal at falling edge, which is not what it does at
the moment, causing the rightmost pixels to be visible on the left edge.

Fix this by using the correct sync settings.

Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
Tested-by: Alejandro Hernandez <ajhernandez@ti.com>
Signed-off-by: Jyri Sarha <jsarha@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/gpu/drm/tilcdc/tilcdc_slave.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/tilcdc/tilcdc_slave.c b/drivers/gpu/drm/tilcdc/tilcdc_slave.c
index 5dd8d78..8feb452 100644
--- a/drivers/gpu/drm/tilcdc/tilcdc_slave.c
+++ b/drivers/gpu/drm/tilcdc/tilcdc_slave.c
@@ -36,7 +36,8 @@ static const struct tilcdc_panel_info slave_info = {
 		.dma_burst_sz           = 16,
 		.fdd                    = 0x80,
 		.tft_alt_mode           = 0,
-		.sync_edge              = 0,
+		.invert_pxl_clk		= 1,
+		.sync_edge              = 1,
 		.sync_ctrl              = 1,
 		.raster_order           = 0,
 };
-- 
1.7.5.4

