From c962c59ad9bd420e27f9ca622b0336b022870ed5 Mon Sep 17 00:00:00 2001
From: Vinod Koul <vinod.koul@intel.com>
Date: Wed, 13 Nov 2013 12:06:24 +0530
Subject: [PATCH 074/188] dmaengine: edma: remove duplicate kfree

fixing of freeing descriptor memory was applied twice, so remove the one
duplicate

Reported-by: Wing-Keung Wang <wingkeung.wang@gmail.com>
Signed-off-by: Vinod Koul <vinod.koul@intel.com>
(cherry picked from commit b6d5050cccf6f5b664a9601f4a274175ed6ab0b4)
---
 drivers/dma/edma.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/dma/edma.c b/drivers/dma/edma.c
index dc5ab25..99ffeb5 100644
--- a/drivers/dma/edma.c
+++ b/drivers/dma/edma.c
@@ -428,7 +428,6 @@ static struct dma_async_tx_descriptor *edma_prep_slave_sg(
 			if (echan->slot[i] < 0) {
 				kfree(edesc);
 				dev_err(dev, "Failed to allocate slot\n");
-				kfree(edesc);
 				return NULL;
 			}
 		}
-- 
1.7.5.4

