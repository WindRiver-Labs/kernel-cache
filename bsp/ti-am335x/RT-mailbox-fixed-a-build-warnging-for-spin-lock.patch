From 7fd26b6365de3c1288af8ae150ad2425b08e8ab0 Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Tue, 17 May 2016 14:51:12 +0800
Subject: [PATCH] RT:mailbox: fixed a build warnging for spin lock

Replace the spin_lock with raw_spin_lock, otherwise it will cause
a build warning as follow:

drivers/mailbox/omap-mailbox.c:495:20: warning: passing argument 1
of 'rt_spin_lock' from incompatible pointer type
[-Wincompatible-pointer-types] spin_lock_irqsave(&chan->lock, flags);

Signed-off-by: czou <cao.zou@windriver.com>
---
 drivers/mailbox/omap-mailbox.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mailbox/omap-mailbox.c b/drivers/mailbox/omap-mailbox.c
index b7f636f..b87a892 100644
--- a/drivers/mailbox/omap-mailbox.c
+++ b/drivers/mailbox/omap-mailbox.c
@@ -492,13 +492,13 @@ struct mbox_chan *omap_mbox_request_channel(struct mbox_client *cl,
 		return ERR_PTR(-ENOENT);
 
 	chan = mbox->chan;
-	spin_lock_irqsave(&chan->lock, flags);
+	raw_spin_lock_irqsave(&chan->lock, flags);
 	chan->msg_free = 0;
 	chan->msg_count = 0;
 	chan->active_req = NULL;
 	chan->cl = cl;
 	init_completion(&chan->tx_complete);
-	spin_unlock_irqrestore(&chan->lock, flags);
+	raw_spin_unlock_irqrestore(&chan->lock, flags);
 
 	ret = chan->mbox->ops->startup(chan);
 	if (ret) {
-- 
1.7.5.4

