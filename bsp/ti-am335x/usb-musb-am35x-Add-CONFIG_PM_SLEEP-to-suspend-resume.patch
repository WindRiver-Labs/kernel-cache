From 704c27d39a963b1c7675b2a7834715130267784a Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Thu, 22 Oct 2015 17:30:51 -0500
Subject: [PATCH 608/800] usb: musb: am35x: Add CONFIG_PM_SLEEP to
 suspend/resume functions

Sleep PM callbacks defined by SIMPLE_DEV_PM_OPS are only used when
the CONFIG_PM_SLEEP is enabled so wrap them with CONFIG_PM_SLEEP rather
than CONFIG_PM as they are now to avoid a build warning about the pm
handlers being defined but not being used.

Fixes: 6f783e287c07 ("usb: musb: am35x: usb dev_pm_ops structure")
CC: Felipe Balbi <balbi@ti.com>
Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
Signed-off-by: Sekhar Nori <nsekhar@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/usb/musb/am35x.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/usb/musb/am35x.c b/drivers/usb/musb/am35x.c
index 220fd4d..c0641a6 100644
--- a/drivers/usb/musb/am35x.c
+++ b/drivers/usb/musb/am35x.c
@@ -565,7 +565,7 @@ static int am35x_remove(struct platform_device *pdev)
 	return 0;
 }
 
-#ifdef CONFIG_PM
+#ifdef CONFIG_PM_SLEEP
 static int am35x_suspend(struct device *dev)
 {
 	struct am35x_glue	*glue = dev_get_drvdata(dev);
-- 
1.7.5.4

