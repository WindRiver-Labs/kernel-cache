From b2846d740d3b7281eb49d8b95f554ff180ff9c0f Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Thu, 22 Oct 2015 17:30:08 -0500
Subject: [PATCH 601/800] ARM: OMAP2+: pm33xx: Wrap static vars used for
 suspend in CONFIG_SUSPEND

If build is done with !CONFIG_SUSPEND build warnings about several
variables used in suspend and rtc-only mode appear so make sure we only
include them if CONFIG_SUSPEND is set.

Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 arch/arm/mach-omap2/pm33xx.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/pm33xx.c b/arch/arm/mach-omap2/pm33xx.c
index e7ff42e..2cccc0f 100644
--- a/arch/arm/mach-omap2/pm33xx.c
+++ b/arch/arm/mach-omap2/pm33xx.c
@@ -55,6 +55,8 @@ static void __iomem *gic_dist_base;
 static struct am33xx_pm_sram_addr *pm_sram;
 
 static unsigned long suspend_wfi_flags;
+
+#ifdef CONFIG_SUSPEND
 static int rtc_only_idle;
 static int retrigger_irq;
 
@@ -69,6 +71,7 @@ static struct wkup_m3_wakeup_src rtc_alarm_wakeup = {
 static struct wkup_m3_wakeup_src rtc_ext_wakeup = {
 	.irq_nr = 0, .src = "Ext wakeup",
 };
+#endif
 
 /*
  * Push the minimal suspend-resume code to SRAM
-- 
1.7.5.4

