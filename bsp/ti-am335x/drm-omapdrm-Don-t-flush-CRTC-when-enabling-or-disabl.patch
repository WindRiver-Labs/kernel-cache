From 6c9e4c74affc3b9b54e27da57409cfbd3b73b7de Mon Sep 17 00:00:00 2001
From: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Date: Thu, 28 May 2015 02:39:35 +0300
Subject: [PATCH 086/800] drm: omapdrm: Don't flush CRTC when enabling or
 disabling it

commit af6da31e9c8d25f4be524c2bf97a886071eb4a00 upstream

The omap_crtc_flush() call in omap_crtc_enable() and omap_crtc_disable()
is a no-op, as the display manager is always disabled at this point. Just
remove the function call.

Signed-off-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
---
 drivers/gpu/drm/omapdrm/omap_crtc.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/drivers/gpu/drm/omapdrm/omap_crtc.c b/drivers/gpu/drm/omapdrm/omap_crtc.c
index f7688fd..56c9d8e 100644
--- a/drivers/gpu/drm/omapdrm/omap_crtc.c
+++ b/drivers/gpu/drm/omapdrm/omap_crtc.c
@@ -405,8 +405,6 @@ static void omap_crtc_enable(struct drm_crtc *crtc)
 			WARN_ON(omap_plane_setup(plane));
 	}
 
-	omap_crtc_flush(crtc);
-
 	drm_crtc_vblank_on(crtc);
 }
 
@@ -428,8 +426,6 @@ static void omap_crtc_disable(struct drm_crtc *crtc)
 		if (plane->crtc == crtc)
 			WARN_ON(omap_plane_setup(plane));
 	}
-
-	omap_crtc_flush(crtc);
 }
 
 static void omap_crtc_mode_set_nofb(struct drm_crtc *crtc)
-- 
1.7.5.4

