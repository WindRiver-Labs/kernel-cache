From 4e3504e2e07373bc433975833ef2530d857536af Mon Sep 17 00:00:00 2001
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date: Thu, 5 Nov 2015 10:02:43 +0200
Subject: [PATCH 691/800] OMAPDSS: remove manager field from omap_dss_device

We have now removed all uses of 'struct omap_overlay_manager *manager'
in omap_dss_device, and the field can now be removed.

Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
Signed-off-by: Jyri Sarha <jsarha@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/gpu/drm/omapdrm/omap_crtc.c   |    2 --
 drivers/video/fbdev/omap2/dss/apply.c |    2 --
 include/video/omapdss.h               |    2 --
 3 files changed, 0 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/omapdrm/omap_crtc.c b/drivers/gpu/drm/omapdrm/omap_crtc.c
index a349888..45d211e 100644
--- a/drivers/gpu/drm/omapdrm/omap_crtc.c
+++ b/drivers/gpu/drm/omapdrm/omap_crtc.c
@@ -124,7 +124,6 @@ static int omap_crtc_dss_connect(enum omap_channel channel,
 	omap_crtc_output[channel] = dst;
 	dst->dispc_channel_connected = true;
 
-	dst->manager = mgr;
 	mgr->output = dst;
 
 	return 0;
@@ -138,7 +137,6 @@ static void omap_crtc_dss_disconnect(enum omap_channel channel,
 	omap_crtc_output[channel] = NULL;
 	dst->dispc_channel_connected = false;
 
-	mgr->output->manager = NULL;
 	mgr->output = NULL;
 }
 
diff --git a/drivers/video/fbdev/omap2/dss/apply.c b/drivers/video/fbdev/omap2/dss/apply.c
index deda880..a4f7e16 100644
--- a/drivers/video/fbdev/omap2/dss/apply.c
+++ b/drivers/video/fbdev/omap2/dss/apply.c
@@ -1210,7 +1210,6 @@ static int dss_mgr_set_output(struct omap_overlay_manager *mgr,
 
 	output->dispc_channel_connected = true;
 
-	output->manager = mgr;
 	mgr->output = output;
 
 	mutex_unlock(&apply_lock);
@@ -1247,7 +1246,6 @@ static int dss_mgr_unset_output(struct omap_overlay_manager *mgr)
 
 	mgr->output->dispc_channel_connected = false;
 
-	mgr->output->manager = NULL;
 	mgr->output = NULL;
 
 	mutex_unlock(&apply_lock);
diff --git a/include/video/omapdss.h b/include/video/omapdss.h
index dd6fe1f..b0b2225 100644
--- a/include/video/omapdss.h
+++ b/include/video/omapdss.h
@@ -779,8 +779,6 @@ struct omap_dss_device {
 	int port_num;
 
 	/* dynamic fields */
-	struct omap_overlay_manager *manager;
-
 	struct omap_dss_device *dst;
 };
 
-- 
1.7.5.4

