From 12485669b6d5287cabf863a3feddb03744b14e9c Mon Sep 17 00:00:00 2001
From: Tomi Valkeinen <tomi.valkeinen@ti.com>
Date: Thu, 5 Nov 2015 10:25:18 +0200
Subject: [PATCH 692/800] drm/omap: remove last uses of omap_overlay_manager

Nothing in omapdrm or the display drivers use 'omap_overlay_manager'
anymore, so we can remove the code in omap_crtc that sets mgr->output.

Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
Signed-off-by: Jyri Sarha <jsarha@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/gpu/drm/omapdrm/omap_crtc.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/drivers/gpu/drm/omapdrm/omap_crtc.c b/drivers/gpu/drm/omapdrm/omap_crtc.c
index 45d211e..c23bc6b 100644
--- a/drivers/gpu/drm/omapdrm/omap_crtc.c
+++ b/drivers/gpu/drm/omapdrm/omap_crtc.c
@@ -113,8 +113,6 @@ static struct omap_dss_device *omap_crtc_output[8];
 static int omap_crtc_dss_connect(enum omap_channel channel,
 		struct omap_dss_device *dst)
 {
-	struct omap_overlay_manager *mgr = omap_dss_get_overlay_manager(channel);
-
 	if (omap_crtc_output[channel])
 		return -EINVAL;
 
@@ -124,20 +122,14 @@ static int omap_crtc_dss_connect(enum omap_channel channel,
 	omap_crtc_output[channel] = dst;
 	dst->dispc_channel_connected = true;
 
-	mgr->output = dst;
-
 	return 0;
 }
 
 static void omap_crtc_dss_disconnect(enum omap_channel channel,
 		struct omap_dss_device *dst)
 {
-	struct omap_overlay_manager *mgr = omap_dss_get_overlay_manager(channel);
-
 	omap_crtc_output[channel] = NULL;
 	dst->dispc_channel_connected = false;
-
-	mgr->output = NULL;
 }
 
 static void omap_crtc_dss_start_update(enum omap_channel channel)
-- 
1.7.5.4

