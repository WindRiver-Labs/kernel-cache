From 10a22ca48888bc96c1b5e7315d9cc3b6948dc703 Mon Sep 17 00:00:00 2001
From: Omar Ramirez Luna <omar.luna@linaro.org>
Date: Fri, 22 Jun 2012 14:46:17 -0500
Subject: [PATCH 782/800] remoteproc/omap: set dependency on CONFIG_CMA

Commit f1ae98da8525 ("ARM: dma-mapping: remove unconditional
dependency on CMA") removes the unconditional selection of CMA
for ARM platforms, however omap remoteproc needs it for its
pool allocation, so make it depend on its Kconfig.

CMA is selected by the current omap2plus_defconfig and
arm_multiv7_defconfig, but the OMAP_REMOTEPROC configuration
should not rely on that default setting, before it can be
enabled.

Signed-off-by: Omar Ramirez Luna <omar.luna@linaro.org>
[s-anna@ti.com: revise commit log]
Signed-off-by: Suman Anna <s-anna@ti.com>
[zou: Original patch taken from PROCESSOR-SDK-LINUX-AM335X 02_00_01_07]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/remoteproc/Kconfig |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/remoteproc/Kconfig b/drivers/remoteproc/Kconfig
index 28c711f..e77e0cc 100644
--- a/drivers/remoteproc/Kconfig
+++ b/drivers/remoteproc/Kconfig
@@ -14,6 +14,7 @@ config OMAP_REMOTEPROC
 	depends on HAS_DMA
 	depends on ARCH_OMAP4 || SOC_OMAP5
 	depends on OMAP_IOMMU
+	depends on CMA
 	select REMOTEPROC
 	select MAILBOX
 	select OMAP2PLUS_MBOX
-- 
1.7.5.4

