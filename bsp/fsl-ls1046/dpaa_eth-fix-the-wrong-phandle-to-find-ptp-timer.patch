From 2c5f2e2d7a38f4fc1f963acebe388e339a8a32d9 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 28 Jul 2016 16:08:46 +0800
Subject: [PATCH 8/8] dpaa_eth: fix the wrong phandle to find ptp timer

The phandle of the node should be bit-exchanged before being used.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 .../ethernet/freescale/sdk_dpaa/dpaa_eth_common.c  |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_common.c b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_common.c
index 731e58e..5b2d57e 100644
--- a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_common.c
+++ b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_common.c
@@ -599,7 +599,7 @@ dpa_mac_probe(struct platform_device *_of_dev)
 	if (phandle_prop && ((mac_dev->phy_if != PHY_INTERFACE_MODE_SGMII) ||
 			((mac_dev->phy_if == PHY_INTERFACE_MODE_SGMII) &&
 			 (mac_dev->speed == SPEED_1000)))) {
-		timer_node = of_find_node_by_phandle(*phandle_prop);
+		timer_node = of_find_node_by_phandle(be32_to_cpup(phandle_prop));
 		if (timer_node)
 			net_dev = dev_get_drvdata(dpa_dev);
 		if (timer_node && net_dev) {
-- 
1.7.5.4

