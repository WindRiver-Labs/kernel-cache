From 7b7ecd417af6f2d7707ca7f1e752ad1bcd55161f Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@opensource.altera.com>
Date: Fri, 14 Aug 2015 14:33:03 -0500
Subject: [PATCH 164/172] FogBugz #317354: EDAC driver should not look for
 ECC_CORR_EN

The decision was made by the bootloader to not support ECC_CORR_EN
functionality. Disabling ECC_CORR_EN, and only leaving ECC_EN means
that when error happens, it is the user's responsibility to perform
a full SDRAM scrub.

So for now, we will not be supporting ECC_CORR_EN in the EDAC driver.

Signed-off-by: Dinh Nguyen <dinguyen@opensource.altera.com>
[czou:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1]
Signed-off-by: czou <cao.zou@windriver.com>
---
 drivers/edac/altera_edac.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/edac/altera_edac.h b/drivers/edac/altera_edac.h
index 412ef7b..d523553 100644
--- a/drivers/edac/altera_edac.h
+++ b/drivers/edac/altera_edac.h
@@ -32,8 +32,7 @@
 #define CV_CTLCFG_GEN_SB_ERR       0x2000
 #define CV_CTLCFG_GEN_DB_ERR       0x4000
 
-#define CV_CTLCFG_ECC_AUTO_EN     (CV_CTLCFG_ECC_EN | \
-				   CV_CTLCFG_ECC_CORR_EN)
+#define CV_CTLCFG_ECC_AUTO_EN		CV_CTLCFG_ECC_EN
 
 /* SDRAM Controller Address Width Register */
 #define CV_DRAMADDRW_OFST          0x2C
-- 
1.9.1

