From 7ceb57198cefbe65762ec46c4dd2edb6a81d0ae8 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@opensource.altera.com>
Date: Thu, 25 Sep 2014 17:45:23 -0500
Subject: [PATCH 097/172] arm: socfpga: Arria 10 SOC's cpu1-start address is 3
 bytes wide

Add another nibble for the cpu1-start-addr mask to support Arria 10 SOC.

Signed-off-by: Dinh Nguyen <dinguyen@opensource.altera.com>
[czou:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1]
Signed-off-by: czou <cao.zou@windriver.com>

Conflicts:
	arch/arm/mach-socfpga/platsmp.c
---
 arch/arm/mach-socfpga/platsmp.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/arm/mach-socfpga/platsmp.c b/arch/arm/mach-socfpga/platsmp.c
index e9ea0f2..54a9eab 100644
--- a/arch/arm/mach-socfpga/platsmp.c
+++ b/arch/arm/mach-socfpga/platsmp.c
@@ -41,7 +41,7 @@ static int socfpga_boot_secondary(unsigned int cpu, struct task_struct *idle)
 		memcpy(phys_to_virt(0), &secondary_trampoline, trampoline_size);
 
 		writel(virt_to_phys(secondary_startup),
-		       sys_manager_base_addr + (socfpga_cpu1start_addr & 0x000000ff));
+		       sys_manager_base_addr + (socfpga_cpu1start_addr & 0x00000fff));
 
 		flush_cache_all();
 		smp_wmb();
-- 
1.9.1

