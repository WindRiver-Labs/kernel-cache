From 884965ae1f73fd8b4198930a36b8798823437ae1 Mon Sep 17 00:00:00 2001
From: Ley Foon Tan <lftan@altera.com>
Date: Tue, 14 Oct 2014 13:26:25 +0800
Subject: [PATCH 074/172] misc: sysid: use IS_ERR and PTR_ERR to check for
 error

devm_ioremap_resource returns a pointer to the remapped
memory or an ERR_PTR() encoded error code on failure.

Signed-off-by: Ley Foon Tan <lftan@altera.com>
[czou:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1]
Signed-off-by: czou <cao.zou@windriver.com>
---
 drivers/misc/altera_sysid.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/misc/altera_sysid.c b/drivers/misc/altera_sysid.c
index f4e100b..ff2b2b5 100644
--- a/drivers/misc/altera_sysid.c
+++ b/drivers/misc/altera_sysid.c
@@ -89,8 +89,8 @@ static int altera_sysid_probe(struct platform_device *pdev)
 		return -ENXIO;
 
 	sysid->regs = devm_ioremap_resource(&pdev->dev, regs);
-	if (!sysid->regs)
-		return -ENOMEM;
+	if (IS_ERR(sysid->regs))
+		return PTR_ERR(sysid->regs);
 
 	platform_set_drvdata(pdev, sysid);
 
-- 
1.9.1

