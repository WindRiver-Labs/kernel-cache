From 0a904d15bde0dbf83a286468e1a81312ea80e9e1 Mon Sep 17 00:00:00 2001
From: Graham Moore <grmoore@opensource.altera.com>
Date: Tue, 14 Jul 2015 10:58:41 -0500
Subject: [PATCH 148/172] FogBugz #311020-3: qspi: update socfpga_defconfig for
 v4.1

Update the socfpga_defconfig to match the submitted upstream patch for QSPI.
The change is to replace CONFIG_SPI_CADENCE_QSPI with
CONFIG_SPI_CADENCE_QUADSPI.

Signed-off-by: Graham Moore <grmoore@opensource.altera.com>
Signed-off-by: Dinh Nguyen <dinguyen@opensource.altera.com>
[czou:Original patch taken from 
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1]
Signed-off-by: czou <cao.zou@windriver.com>
---
 arch/arm/configs/socfpga_defconfig | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index aac305d..505fc7a 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -52,6 +52,8 @@ CONFIG_MTD_BLOCK=y
 CONFIG_MTD_NAND=y
 CONFIG_MTD_NAND_DENALI=y
 CONFIG_MTD_NAND_DENALI_DT=y
+CONFIG_MTD_SPI_NOR=y
+CONFIG_MTD_M25P80=y
 CONFIG_BLK_DEV_RAM=y
 CONFIG_BLK_DEV_RAM_COUNT=2
 CONFIG_BLK_DEV_RAM_SIZE=8192
@@ -96,7 +98,8 @@ CONFIG_PMBUS=y
 CONFIG_SENSORS_LTC2978=y
 CONFIG_SENSORS_LTC2978_REGULATOR=y
 CONFIG_SPI=y
-CONFIG_SPI_CADENCE_QSPI=y
+CONFIG_SPI_CADENCE_QUADSPI=y
+CONFIG_MTD_SPI_NOR_USE_4K_SECTORS=n
 CONFIG_SPI_DESIGNWARE=y
 CONFIG_SPI_DW_MMIO=y
 CONFIG_SPI_SPIDEV=y
-- 
1.9.1

