From abbc6f66fdf7f8564c652cbd1e03b373c1a125fa Mon Sep 17 00:00:00 2001
From: Alan Tull <atull@opensource.altera.com>
Date: Fri, 13 Mar 2015 14:23:21 -0500
Subject: [PATCH 124/172] FogBugz #288812-1: enable socfpga arria10 fpga
 manager

Add arria10 fpga manager to the device tree and defconfig.

Signed-off-by: Alan Tull <atull@opensource.altera.com>
[czou:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1]
Signed-off-by: czou <cao.zou@windriver.com>
---
 arch/arm/boot/dts/socfpga_arria10.dtsi | 7 +++++++
 arch/arm/configs/socfpga_defconfig     | 1 +
 2 files changed, 8 insertions(+)

diff --git a/arch/arm/boot/dts/socfpga_arria10.dtsi b/arch/arm/boot/dts/socfpga_arria10.dtsi
index bedaff2..05ff0fe 100644
--- a/arch/arm/boot/dts/socfpga_arria10.dtsi
+++ b/arch/arm/boot/dts/socfpga_arria10.dtsi
@@ -491,6 +491,13 @@
 			};
 		};
 
+		hps_0_fpgamgr: fpgamgr@0xffcfe400 {
+			compatible = "altr,socfpga-a10-fpga-mgr";
+			transport = "mmio";
+			reg = <0xffd03000 0x1000
+			       0xffcfe400 0x1000>;
+		};
+
 		i2c0: i2c@ffc02200 {
 			#address-cells = <1>;
 			#size-cells = <0>;
diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index d02f365..4ba6120 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -65,6 +65,7 @@ CONFIG_BLK_DEV_SD=y
 # CONFIG_SCSI_LOWLEVEL is not set
 CONFIG_FPGA=y
 CONFIG_FPGA_MGR_ALTERA=y
+CONFIG_FPGA_MGR_SOCFPGA_A10=y
 CONFIG_NETDEVICES=y
 CONFIG_STMMAC_ETH=y
 CONFIG_DWMAC_SOCFPGA=y
-- 
1.9.1

