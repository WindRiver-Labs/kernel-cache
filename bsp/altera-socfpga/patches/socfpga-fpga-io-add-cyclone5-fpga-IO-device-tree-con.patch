From 582ce78ad42ff95e7de440ce3dc2a52d0400745d Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Wed, 27 Jan 2016 17:00:28 +0800
Subject: [PATCH] socfpga: fpga-io: add cyclone5 fpga IO device tree
 configuration

Based on the fpga configuration file from
linux-socfpga-gsrd-13.1-cv-bin.tar.gz, we can control the fpga led gpio.

Since original patch misses the dts stuff, so we need
to add them. I got them via sparsing socfpga.dtb file located at the
following tar file.
http://releases.rocketboards.org/release/2013.11/gsrd/bin/linux-socfpga-gsrd-13.1-cv-bin.tar.gz

Signed-off-by: czou <cao.zou@windriver.com>
---
 arch/arm/boot/dts/socfpga_cyclone5_socdk.dts | 82 ++++++++++++++++++++++++++++
 1 file changed, 82 insertions(+)

diff --git a/arch/arm/boot/dts/socfpga_cyclone5_socdk.dts b/arch/arm/boot/dts/socfpga_cyclone5_socdk.dts
index c88ea4c..823bb4d 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5_socdk.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5_socdk.dts
@@ -44,6 +44,67 @@
 		regulator-max-microvolt = <3300000>;
 	};
 
+	hps_0_bridges: bridge@0xc0000000 {
+		compatible = "altr,bridge-1.0", "simple-bus";
+		reg = < 0xC0000000 0x20000000
+			0xFF200000 0x00200000 >;
+		reg-names = "axi_h2f", "axi_h2f_lw";
+		#address-cells = < 2 >;
+		#size-cells = < 1 >;
+		ranges = < 0x00000000 0x00000000 0xC0000000 0x00010000
+			0x00000001 0x00010000 0xFF210000 0x00000008
+			0x00000001 0x00010040 0xFF210040 0x00000020
+			0x00000001 0x00010080 0xFF210080 0x00000010
+			0x00000001 0x000100C0 0xFF2100C0 0x00000010
+			0x00000001 0x00020000 0xFF220000 0x00000008 >;
+
+		sysid_qsys: sysid@0x100010000 {
+			compatible = "ALTR,sysid-13.0", "ALTR,sysid-1.0";
+			reg = < 0x00000001 0x00010000 0x00000008 >;
+			id = < 2899645194 >;	/* embeddedsw.dts.params.id type NUMBER */
+			timestamp = < 1376028463 >;	/* embeddedsw.dts.params.timestamp type NUMBER */
+		};
+
+		led_pio: gpio@0x100010040 {
+			compatible = "ALTR,pio-13.0.1.99.2", "ALTR,pio-1.0", "altr,pio-1.0";
+			reg = <0x00000001 0x00010040 0x00000020>;
+			width = <4>;	/* width type NUMBER */
+			resetvalue = <0>;	/* resetValue type NUMBER */
+			#gpio-cells = <2>;
+			gpio-controller;
+		};
+
+		dipsw_pio: gpio@0x100010080 {
+			compatible = "ALTR,pio-13.0.1.99.2", "ALTR,pio-1.0", "altr,pio-1.0";
+			reg = < 0x00000001 0x00010080 0x00000010 >;
+			interrupt-parent = <&intc>;
+			interrupts = < 0 40 1 >;
+			altr,ngpio = <4>;
+			altr,interrupt-type = <2>;
+			edge_type = <2>;	/* embeddedsw.dts.params.edge_type type NUMBER */
+			#gpio-cells = <2>;
+			gpio-controller;
+		};
+
+		button_pio: gpio@0x1000100C0 {
+			compatible = "ALTR,pio-13.0.1.99.2", "ALTR,pio-1.0", "altr,pio-1.0";
+			reg = < 0x00000001 0x000100C0 0x00000010 >;
+			interrupt-parent = <&intc>;
+			interrupts = < 0 41 1 >;
+			altr,ngpio = <2>;
+			altr,interrupt-type = <2>;
+			#gpio-cells = <2>;
+			gpio-controller;
+		};
+
+		jtag_uart: serial@0x100020000 {
+			compatible = "ALTR,juart-13.0.1.99.2", "ALTR,juart-1.0";
+			reg = < 0x00000001 0x00020000 0x00000008 >;
+			interrupt-parent = <&intc>;
+			interrupts = < 0 42 4 >;
+		};
+	};
+
 	leds {
 		compatible = "gpio-leds";
 		hps0 {
@@ -65,7 +126,28 @@
 			label = "hps_led3";
 			gpios = <&portb 12 1>;
 		};
+
+		led_fpga0: fpga0 {
+			label = "fpga_led0";	/* appended from boardinfo */
+			gpios = < &led_pio 0 1 >;	/* appended from boardinfo */
+		};
+
+		led_fpga1: fpga1 {
+			label = "fpga_led1";	/* appended from boardinfo */
+			gpios = < &led_pio 1 1 >;	/* appended from boardinfo */
+		};
+
+		led_fpga2: fpga2 {
+			label = "fpga_led2";	/* appended from boardinfo */
+			gpios = < &led_pio 2 1 >;	/* appended from boardinfo */
+		};
+
+		led_fpga3: fpga3 {
+			label = "fpga_led3";	/* appended from boardinfo */
+			gpios = < &led_pio 3 1 >;	/* appended from boardinfo */
+		};
 	};
+
 };
 
 &can0 {
-- 
1.9.1

