From 475bbb28cbd7dfe32af1c2c2ff289bd83ebf6487 Mon Sep 17 00:00:00 2001
From: Pavel Machek <pavel@denx.de>
Date: Sat, 27 Oct 2012 01:00:53 +0200
Subject: [PATCH 013/254] ARM: socfpga: fix build break for allyesconfig

Upstream: git://git.rocketboards.org/linux-socfpga.git

Building a multiplatform kernel with combined armv7 and armv6
kernel does not work with the socfpga smp code, which contains
v7-only instructions. Since this code never runs on armv6,
we can annotate the assmebly with .arch   armv7-a, as suggested
by Russell King.

[arnd: reword commit message]

Signed-off-by: Pavel Machek <pavel@denx.de>
Signed-off-by: Arnd Bergmann <arnd@arndb.de>
(cherry picked from commit ad208d03a5a32957a419eb1a473aa96ff4da45ca)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-socfpga/headsmp.S |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-socfpga/headsmp.S b/arch/arm/mach-socfpga/headsmp.S
index 17d6eaf..65762ab 100644
--- a/arch/arm/mach-socfpga/headsmp.S
+++ b/arch/arm/mach-socfpga/headsmp.S
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 
 	__INIT
+	.arch	armv7-a
 
 #define CPU1_START_ADDR 	        0xffd08010
 
-- 
1.7.5.4

