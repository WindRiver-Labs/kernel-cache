From 89e6f88ddb36871f368e1d2873026500cf3a4a31 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@opensource.altera.com>
Date: Fri, 24 Jul 2015 14:05:06 -0500
Subject: [PATCH 18/73] ARM: socfpga: dts: add "altr,modrst-offset" property

commit 1a94acf858000836d28b13942eebf5cbffc9ac34 upstream

The "altr,modrst-offset" property represents the offset into the reset manager
that is the first register to be used by the driver to bring peripherals out
of reset.

Signed-off-by: Dinh Nguyen <dinguyen@opensource.altera.com>
---
 .../devicetree/bindings/reset/socfpga-reset.txt    |    2 ++
 arch/arm/boot/dts/socfpga.dtsi                     |    1 +
 arch/arm/boot/dts/socfpga_arria10.dtsi             |    1 +
 3 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/Documentation/devicetree/bindings/reset/socfpga-reset.txt b/Documentation/devicetree/bindings/reset/socfpga-reset.txt
index c338638..ce88498 100644
--- a/Documentation/devicetree/bindings/reset/socfpga-reset.txt
+++ b/Documentation/devicetree/bindings/reset/socfpga-reset.txt
@@ -6,6 +6,7 @@ Required properties:
 		bridge driver and possibly other devices in the future.  See
 		also Documentation/devicetree/bindings/mfd/syscon.txt
 - reg : Should contain 1 register ranges(address and length)
+- altr,modrst-offset : Should contain the offset of the first modrst register.
 - #reset-cells: 1
 
 Example:
@@ -13,4 +14,5 @@ Example:
 		#reset-cells = <1>;
 		compatible = "altr,rst-mgr", "syscon";
 		reg = <0xffd05000 0x1000>;
+		altr,modrst-offset = <0x10>;
 	};
diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index a45471a..51c9770 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -913,6 +913,7 @@
 			#reset-cells = <1>;
 			compatible = "altr,rst-mgr";
 			reg = <0xffd05000 0x1000>;
+			altr,modrst-offset = <0x10>;
 		};
 
 		usbphy0: usbphy@0 {
diff --git a/arch/arm/boot/dts/socfpga_arria10.dtsi b/arch/arm/boot/dts/socfpga_arria10.dtsi
index 9d8fd5a..309e3e1 100644
--- a/arch/arm/boot/dts/socfpga_arria10.dtsi
+++ b/arch/arm/boot/dts/socfpga_arria10.dtsi
@@ -655,6 +655,7 @@
 			#reset-cells = <1>;
 			compatible = "altr,rst-mgr";
 			reg = <0xffd05000 0x100>;
+			altr,modrst-offset = <0x20>;
 		};
 
 		scu: snoop-control-unit@ffffc000 {
-- 
1.7.5.4

