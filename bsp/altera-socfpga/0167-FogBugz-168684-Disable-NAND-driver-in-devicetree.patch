From 8776509503aa947ae66ca2f6baad62d552f9ee24 Mon Sep 17 00:00:00 2001
From: Graham Moore <grmoore@altera.com>
Date: Wed, 11 Dec 2013 12:56:09 -0600
Subject: [PATCH 167/248] FogBugz #168684: Disable NAND driver in devicetree

On our CycloneV, sometimes a NAND chip is detected even though
there isn't one on the board.  The Denali NAND driver already
has code to prevent erroneous detections, but apparently it's
not working as well as it could.  Our solution is to disable the NAND
driver by default for socfpga.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Graham Moore <grmoore@altera.com>
---
 arch/arm/boot/dts/socfpga.dtsi | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index f253797..dd9db25 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -615,6 +615,7 @@
 			dma-mask = <0xffffffff>;
 			clocks = <&nand_clk>;
 			have-hw-ecc-fixup;
+			status = "disabled";
 
 			partition@nand-boot {
 				/* 8MB for raw data. */
-- 
1.9.1

