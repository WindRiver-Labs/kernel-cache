From 4a6dc3c93bcb1e890718f9ddd44ad68244e9f544 Mon Sep 17 00:00:00 2001
From: Matthew Gerlach <mgerlach@altera.com>
Date: Tue, 12 Feb 2013 09:39:27 -0800
Subject: [PATCH 049/248] FogBugz #99886: Clk name and DT node name conflict
 with DTG

Change name of clock and device tree node from stmmac to ethernet

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Matthew Gerlach <mgerlach@altera.com>
---
 arch/arm/boot/dts/socfpga.dtsi          | 4 ++--
 arch/arm/boot/dts/socfpga_cyclone5.dtsi | 2 +-
 arch/arm/boot/dts/socfpga_vt.dts        | 4 ++--
 drivers/clk/socfpga/clk.c               | 4 ++--
 4 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 2c04ede..2d03045 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -456,7 +456,7 @@
 				};
 			};
 
-		gmac0: stmmac@ff700000 {
+		gmac0: ethernet@ff700000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
 			reg = <0xff700000 0x2000>;
 			interrupts = <0 115 4>;
@@ -467,7 +467,7 @@
 			status = "disabled";
 		};
 
-		gmac1: stmmac@ff702000 {
+		gmac1: ethernet@ff702000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
 			reg = <0xff702000 0x2000>;
 			interrupts = <0 120 4>;
diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dtsi b/arch/arm/boot/dts/socfpga_cyclone5.dtsi
index 2243d1a..4e65859 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dtsi
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dtsi
@@ -76,7 +76,7 @@
 			cpu1-start-addr = <0xffd080c4>;
 		};
 
-		stmmac@ff702000 {
+		ethernet@ff702000 {
 			phy-mode = "rgmii";
 			phy-addr = <0xffffffff>; /* probe for phy addr */
 			status = "okay";
diff --git a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
index 39639fb..ed766bf 100644
--- a/arch/arm/boot/dts/socfpga_vt.dts
+++ b/arch/arm/boot/dts/socfpga_vt.dts
@@ -68,12 +68,12 @@
 			cpu1-start-addr = <0xffd08010>;
 		};
 
-		stmmac@ff700000 {
+		ethernet@ff700000 {
 			phy-mode = "gmii";
 			status = "okay";
 		};
 
-		stmmac@ff702000 {
+		ethernet@ff702000 {
 			phy-mode = "gmii";
 		};
 
diff --git a/drivers/clk/socfpga/clk.c b/drivers/clk/socfpga/clk.c
index 9d15f66..e73b366 100644
--- a/drivers/clk/socfpga/clk.c
+++ b/drivers/clk/socfpga/clk.c
@@ -178,12 +178,12 @@ static __init struct clk *socfpga_clk_init(struct device_node *node,
 	clk = clk_register_gate(NULL, "gmac0_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
 			CLKMGR_EMAC0_CLK_EN, 0, &_lock);
-	clk_register_clkdev(clk, NULL, "ff700000.stmmac");
+	clk_register_clkdev(clk, NULL, "ff700000.ethernet");
 
 	clk = clk_register_gate(NULL, "gmac1_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
 			CLKMGR_EMAC1_CLK_EN, 0, &_lock);
-	clk_register_clkdev(clk, NULL, "ff702000.stmmac");
+	clk_register_clkdev(clk, NULL, "ff702000.ethernet");
 
 	clk = clk_register_gate(NULL, "spi0_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
-- 
1.9.1

