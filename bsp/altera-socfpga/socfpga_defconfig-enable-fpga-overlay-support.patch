From 25c0480ca3990059e1c6b8581e6cbe1871d06b2e Mon Sep 17 00:00:00 2001
From: Alan Tull <atull@opensource.altera.com>
Date: Fri, 26 Feb 2016 09:31:31 -0600
Subject: [PATCH 68/73] socfpga_defconfig: enable fpga overlay support

Enable FPGA support that has been proposed upstream and the
OF overlay support.

Also set Altera gpio's to be built in, not a module any more.

Enables the following:

  CONFIG_OF_OVERLAY=y
  CONFIG_OF_CONFIGFS=y
  CONFIG_FPGA_REGION=y
  CONFIG_FPGA_MGR_SOCFPGA=y
  CONFIG_FPGA_BRIDGE=y
  CONFIG_SOCFPGA_FPGA_BRIDGE=y
  CONFIG_GPIO_ALTERA=y

Signed-off-by: Alan Tull <atull@opensource.altera.com>
[mli1:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1-ltsi]
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/configs/socfpga_defconfig |   11 ++++++-----
 1 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index 10e5e07..081797a 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -54,22 +54,23 @@ CONFIG_MTD_NAND_DENALI=y
 CONFIG_MTD_NAND_DENALI_DT=y
 CONFIG_MTD_SPI_NOR=y
 CONFIG_MTD_M25P80=y
+CONFIG_OF_OVERLAY=y
+CONFIG_OF_CONFIGFS=y
 CONFIG_BLK_DEV_RAM=y
 CONFIG_BLK_DEV_RAM_COUNT=2
 CONFIG_BLK_DEV_RAM_SIZE=8192
 CONFIG_SRAM=y
 CONFIG_ALTERA_SYSID=m
 CONFIG_EEPROM_AT24=y
-CONFIG_FPGA_BRIDGE=y
-CONFIG_ALTERA_SOCFPGA_BRIDGE=y
 CONFIG_SCSI=y
 # CONFIG_SCSI_PROC_FS is not set
 CONFIG_BLK_DEV_SD=y
 # CONFIG_SCSI_LOWLEVEL is not set
 CONFIG_FPGA=y
 CONFIG_FPGA_MGR_SOCFPGA=y
-CONFIG_FPGA_MGR_ALTERA=y
-CONFIG_FPGA_MGR_SOCFPGA_A10=y
+CONFIG_FPGA_REGION=y
+CONFIG_FPGA_BRIDGE=y
+CONFIG_SOCFPGA_FPGA_BRIDGE=y
 CONFIG_NETDEVICES=y
 CONFIG_STMMAC_ETH=y
 CONFIG_DWMAC_SOCFPGA=y
@@ -91,7 +92,7 @@ CONFIG_I2C_DESIGNWARE_PLATFORM=y
 CONFIG_GPIOLIB=y
 CONFIG_GPIO_SYSFS=y
 CONFIG_GPIO_DWAPB=y
-CONFIG_GPIO_ALTERA=m
+CONFIG_GPIO_ALTERA=y
 CONFIG_MFD_A10SYCON=y
 CONFIG_GPIO_A10SYCON=y
 CONFIG_SENSORS_A10SYCON=y
-- 
1.7.5.4

