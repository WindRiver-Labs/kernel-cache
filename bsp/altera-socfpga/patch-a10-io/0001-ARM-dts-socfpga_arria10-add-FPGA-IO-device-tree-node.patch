From 9bf0314ce6461510cb5861fcec5e25c5c08deeec Mon Sep 17 00:00:00 2001
From: Limeng <Meng.Li@windriver.com>
Date: Tue, 26 Apr 2016 11:03:05 +0800
Subject: [PATCH] ARM: dts: socfpga_arria10: add FPGA IO device tree node

Add FPGA IO device tree node to support FPFA IO interrupt feature.
There is a reference link as below:
http://releases.rocketboards.org/release/2016.02/pcierd/bin/
linux-socfpga-pcierd-15.1.1-a10-bin.tar.gz
download tar package and extract it. There is a dts file which
include the example of FPGA IO device tree node.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/socfpga_arria10.dtsi |   78 ++++++++++++++++++++++++++++++++
 1 file changed, 78 insertions(+)

diff --git a/arch/arm/boot/dts/socfpga_arria10.dtsi b/arch/arm/boot/dts/socfpga_arria10.dtsi
index 0db85c0..65796b4 100644
--- a/arch/arm/boot/dts/socfpga_arria10.dtsi
+++ b/arch/arm/boot/dts/socfpga_arria10.dtsi
@@ -62,6 +62,77 @@
 		interrupt-parent = <&intc>;
 		ranges;
 
+		arria10_hps_0_bridges: bridge@0xc0000000 {
+			compatible = "altr,bridge-15.1", "simple-bus";
+			reg = <0xc0000000 0x20000000>,
+				<0xff200000 0x00200000>;
+			reg-names = "axi_h2f", "axi_h2f_lw";
+			clocks = <&clk_0 &clk_0>;
+			clock-names = "h2f_axi_clock", "h2f_lw_axi_clock";
+			#address-cells = <2>;
+			#size-cells = <1>;
+			ranges = <0x00000000 0x00000000 0xc0000000 0x00040000>,
+				<0x00000001 0x00000100 0xff200100 0x00000100>,
+				<0x00000001 0x00000000 0xff200000 0x00000008>,
+				<0x00000001 0x00000010 0xff200010 0x00000010>,
+				<0x00000001 0x00000020 0xff200020 0x00000010>,
+				<0x00000001 0x00000030 0xff200030 0x00000010>,
+				<0x00000001 0x000140a0 0xff2140a0 0x00000020>,
+				<0x00000001 0x000140c0 0xff2140c0 0x00000020>,
+				<0x00000001 0x00014080 0xff214080 0x00000010>,
+				<0x00000001 0x000140e0 0xff2140e0 0x00000010>,
+				<0x00000001 0x00014000 0xff214000 0x00000080>;
+
+			sysid_qsys_0: sysid@0x100000000 {
+				compatible = "altr,sysid-15.1", "altr,sysid-1.0";
+				reg = <0x00000001 0x00000000 0x00000008>;
+				clocks = <&clk_0>;
+				id = <2953254912>;	/* embeddedsw.dts.params.id type NUMBER */
+				timestamp = <1452709487>;	/* embeddedsw.dts.params.timestamp type NUMBER */
+			};
+
+			led_pio: gpio@0x100000010 {
+				compatible = "altr,pio-15.1", "altr,pio-1.0";
+				reg = <0x00000001 0x00000010 0x00000010>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <4>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+
+			button_pio: gpio@0x100000020 {
+				compatible = "altr,pio-15.1", "altr,pio-1.0";
+				reg = <0x00000001 0x00000020 0x00000010>;
+				interrupts = <0 19 1>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <4>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				altr,interrupt-type = <2>;	/* embeddedsw.dts.params.altr,interrupt-type type NUMBER */
+				altr,interrupt_type = <2>;	/* embeddedsw.dts.params.altr,interrupt_type type NUMBER */
+				edge_type = <1>;	/* embeddedsw.dts.params.edge_type type NUMBER */
+				level_trigger = <0>;	/* embeddedsw.dts.params.level_trigger type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+
+			dipsw_pio: gpio@0x100000030 {
+				compatible = "altr,pio-15.1", "altr,pio-1.0";
+				reg = <0x00000001 0x00000030 0x00000010>;
+				interrupts = <0 20 1>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <4>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				altr,interrupt-type = <3>;	/* embeddedsw.dts.params.altr,interrupt-type type NUMBER */
+				altr,interrupt_type = <3>;	/* embeddedsw.dts.params.altr,interrupt_type type NUMBER */
+				edge_type = <2>;	/* embeddedsw.dts.params.edge_type type NUMBER */
+				level_trigger = <0>;	/* embeddedsw.dts.params.level_trigger type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+
+		};
+
 		amba {
 			compatible = "arm,amba-bus";
 			#address-cells = <1>;
@@ -116,6 +187,13 @@
 						compatible = "fixed-clock";
 					};
 
+					clk_0: clk_0 {
+						compatible = "fixed-clock";
+						#clock-cells = <0>;
+						clock-frequency = <100000000>;	/* 100.00 MHz */
+						clock-output-names = "clk_0-clk";
+					};
+
 					main_pll: main_pll {
 						#address-cells = <1>;
 						#size-cells = <0>;
-- 
1.7.9.5

