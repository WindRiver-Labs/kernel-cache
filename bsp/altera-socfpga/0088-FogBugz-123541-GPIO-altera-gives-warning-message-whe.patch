From e916e5ecee7b33c9b6371a96ff597addeb91ae11 Mon Sep 17 00:00:00 2001
From: Tien Hock Loh <thloh@altera.com>
Date: Mon, 20 May 2013 15:50:14 +0800
Subject: [PATCH 088/248] FogBugz #123541: GPIO altera gives warning message
 when used as interrupt-controller

Fix an issue where GPIO altera gives warning message when it is used as an interrupt controller with device tree.
The irq translation of the gpio should be one cell instead of two cells.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Tien Hock Loh <thloh@altera.com>
---
 drivers/gpio/gpio-altera.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/gpio/gpio-altera.c b/drivers/gpio/gpio-altera.c
index edaed07..75bde7c 100644
--- a/drivers/gpio/gpio-altera.c
+++ b/drivers/gpio/gpio-altera.c
@@ -207,7 +207,7 @@ static int altera_gpio_irq_map(struct irq_domain *h, unsigned int virq,
 
 static struct irq_domain_ops altera_gpio_irq_ops = {
 	.map	= altera_gpio_irq_map,
-	.xlate = irq_domain_xlate_twocell,
+	.xlate = irq_domain_xlate_onecell,
 };
 
 int altera_gpio_probe(struct platform_device *pdev)
-- 
1.9.1

