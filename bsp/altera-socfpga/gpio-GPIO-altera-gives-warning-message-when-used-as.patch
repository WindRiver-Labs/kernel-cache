From d3847978c0d49f930def9e04c83f18e822d7c8d9 Mon Sep 17 00:00:00 2001
From: Tien Hock Loh <thloh@altera.com>
Date: Mon, 20 May 2013 15:50:14 +0800
Subject: [PATCH 244/254] gpio: GPIO altera gives warning message when used as

Upstream: git://git.rocketboards.org/linux-socfpga.git
 interrupt-controller

Fix an issue where GPIO altera gives warning message when it is used as an interrupt controller with device tree.
The irq translation of the gpio should be one cell instead of two cells.

Signed-off-by: Tien Hock Loh <thloh@altera.com>
(cherry picked from commit 848e3b0a293a3bf7894bdc8444ab22f13d71e469)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/gpio/gpio-altera.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpio/gpio-altera.c b/drivers/gpio/gpio-altera.c
index bc98614..baed2d4 100644
--- a/drivers/gpio/gpio-altera.c
+++ b/drivers/gpio/gpio-altera.c
@@ -207,7 +207,7 @@ static int altera_gpio_irq_map(struct irq_domain *h, unsigned int virq,
 
 static struct irq_domain_ops altera_gpio_irq_ops = {
 	.map	= altera_gpio_irq_map,
-	.xlate = irq_domain_xlate_twocell,
+	.xlate = irq_domain_xlate_onecell,
 };
 
 int __devinit altera_gpio_probe(struct platform_device *pdev)
-- 
1.7.5.4

