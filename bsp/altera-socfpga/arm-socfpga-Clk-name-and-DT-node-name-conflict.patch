From 90f1a4f38dc490b3013609783220e3e4adbea004 Mon Sep 17 00:00:00 2001
From: Matthew Gerlach <mgerlach@altera.com>
Date: Tue, 12 Feb 2013 09:39:27 -0800
Subject: [PATCH 195/254] arm: socfpga: Clk name and DT node name conflict

Upstream: git://git.rocketboards.org/linux-socfpga.git
 with DTG

Change name of clock and device tree node from stmmac to ethernet

Signed-off-by: Matthew Gerlach <mgerlach@altera.com>
(cherry picked from commit 9b494ef417e9c969055f82db65e7a6cb05802227)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/socfpga.dtsi         |    4 ++--
 arch/arm/boot/dts/socfpga_cyclone5.dts |    4 ++--
 arch/arm/boot/dts/socfpga_vt.dts       |    4 ++--
 drivers/clk/socfpga/clk.c              |    4 ++--
 4 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 355713e..36e47a5 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -100,7 +100,7 @@
 			};
 
 
-		gmac0: stmmac@ff700000 {
+		gmac0: ethernet@ff700000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
 			reg = <0xff700000 0x2000>;
 			interrupts = <0 115 4>;
@@ -108,7 +108,7 @@
 			mac-address = [00 00 00 00 00 00];/* Filled in by U-Boot */
 		};
 
-		gmac1: stmmac@ff702000 {
+		gmac1: ethernet@ff702000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
 			reg = <0xff702000 0x2000>;
 			interrupts = <0 120 4>;
diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dts b/arch/arm/boot/dts/socfpga_cyclone5.dts
index a25e225..e66cb80 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dts
@@ -34,11 +34,11 @@
 	};
 
 	soc {
-		stmmac@ff700000 {
+		ethernet@ff700000 {
 			status = "disabled";
 		};
 
-		stmmac@ff702000 {
+		ethernet@ff702000 {
 			phy-mode = "rgmii";
 			phy-addr = <0xffffffff>; /* probe for phy addr */
 		};
diff --git a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
index db896ef..78b6a32 100644
--- a/arch/arm/boot/dts/socfpga_vt.dts
+++ b/arch/arm/boot/dts/socfpga_vt.dts
@@ -31,10 +31,10 @@
 			pwr-en = <1>;
 		};
 
-		stmmac@ff700000 {
+		ethernet@ff700000 {
 			phy-mode = "gmii";
 		};
-		stmmac@ff702000 {
+		ethernet@ff702000 {
 			phy-mode = "gmii";
 		};
 
diff --git a/drivers/clk/socfpga/clk.c b/drivers/clk/socfpga/clk.c
index 8d89542..30c76c4 100644
--- a/drivers/clk/socfpga/clk.c
+++ b/drivers/clk/socfpga/clk.c
@@ -113,12 +113,12 @@ void __init socfpga_init_clocks(void)
 	clk = clk_register_gate(NULL, "gmac0_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
 			CLKMGR_EMAC0_CLK_EN, 0, &_lock);
-	clk_register_clkdev(clk, NULL, "ff700000.stmmac");
+	clk_register_clkdev(clk, NULL, "ff700000.ethernet");
 
 	clk = clk_register_gate(NULL, "gmac1_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
 			CLKMGR_EMAC1_CLK_EN, 0, &_lock);
-	clk_register_clkdev(clk, NULL, "ff702000.stmmac");
+	clk_register_clkdev(clk, NULL, "ff702000.ethernet");
 
 	clk = clk_register_gate(NULL, "spi0_clk", "per_pll_clk", 0,
 			clk_mgr_base_addr + CLKMGR_PERPLLGRP_EN,
-- 
1.7.5.4

