From a3dc0351cf1d6f43ec299eee7b344931f2b55bb7 Mon Sep 17 00:00:00 2001
From: Limeng <Meng.Li@windriver.com>
Date: Wed, 25 May 2016 16:36:17 +0800
Subject: [PATCH 1/2] driver: usb: dwc2: revert commit 1cc821ba32aa(driver:
 usb: dwc2: add delay for enumerating usb device
 successfully)
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

commit 1cc821ba32aa (driver: usb: dwc2: add delay for enumerating
usb device successfully) only can solve enumerating issue of usb 2.0
device. About usb 3.0 device, enumerating issue still occur. Although
increase delay can support usb 3.0 device, it is not a reasonable fix.
In additional, Altera-socfpga BSP doesnâ€™t support suspend/resume
feature, commit 1cc821ba32aa (driver: usb: dwc2: add delay for
enumerating usb device successfully) is useless. So revert it.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/usb/dwc2/hcd.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

diff --git a/drivers/usb/dwc2/hcd.c b/drivers/usb/dwc2/hcd.c
index e9b70fb..2b42851 100644
--- a/drivers/usb/dwc2/hcd.c
+++ b/drivers/usb/dwc2/hcd.c
@@ -2326,12 +2326,6 @@ static int _dwc2_hcd_resume(struct usb_hcd *hcd)
 	struct dwc2_hsotg *hsotg = dwc2_hcd_to_hsotg(hcd);
 
 	hsotg->lx_state = DWC2_L0;
-
-	/* Wait for controller to correctly update D+/D- level
-	 * and detect Port Connect
-	 */
-	usleep_range(12000, 14000);
-
 	return 0;
 }
 
-- 
1.7.5.4

