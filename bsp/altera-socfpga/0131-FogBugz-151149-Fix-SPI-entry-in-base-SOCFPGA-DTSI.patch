From acb4655d735f6321310a5c8a00da9f1d28890ae9 Mon Sep 17 00:00:00 2001
From: Thor Thayer <tthayer@altera.com>
Date: Tue, 3 Sep 2013 15:13:52 -0500
Subject: [PATCH 131/248] FogBugz #151149: Fix SPI entry in base SOCFPGA DTSI

There were 2 issues with the SPI entry in the DTSI.
- Fixed the SPI IRQ value for SPI1 (now is 155)
- CAN bus uses the same pins as SPI1, set SPI1 status="disabled"

v2:
Fix header summary to better reflect these changes.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Thor Thayer <tthayer@altera.com>
---
 arch/arm/boot/dts/socfpga.dtsi | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 14a1e15..44bc2fd 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -679,12 +679,13 @@
 			#address-cells = <1>;
 			#size-cells = <0>;
 			reg = <0xfff01000 0x1000>;
-			interrupts = <0 156 4>;
+			interrupts = <0 155 4>;
 			num-chipselect = <4>;
 			bus-num = <1>;
 			tx-dma-channel = <&pdma 20>;
 			rx-dma-channel = <&pdma 21>;
 			clocks = <&per_base_clk>;
+			status = "disabled";
 
 			spidev@0 {
 				compatible = "spidev";
-- 
1.9.1

