From bbb733cccadc88b49ad9c2f2fc1a5499e442af58 Mon Sep 17 00:00:00 2001
From: Bernd Weiberg <bernd.weiberg@siemens.com>
Date: Fri, 4 Sep 2015 17:03:03 +0800
Subject: [PATCH 30/73] nios2: fixed variable imm16 to s16

commit db5a7e55468147f28d1a408880564b61c542e4f8 upstream

Fxid variable imm16 to s16 instead of u16, offset might be negative.

Signed-off-by: Bernd Weiberg <bernd.weiberg@siemens.com>
Signed-off-by: Ley Foon Tan <lftan@altera.com>
---
 arch/nios2/kernel/misaligned.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/nios2/kernel/misaligned.c b/arch/nios2/kernel/misaligned.c
index 4e5907a..89fe0b6 100644
--- a/arch/nios2/kernel/misaligned.c
+++ b/arch/nios2/kernel/misaligned.c
@@ -71,7 +71,7 @@ asmlinkage void handle_unaligned_c(struct pt_regs *fp, int cause)
 	u32 isn, addr, val;
 	int in_kernel;
 	u8 a, b, d0, d1, d2, d3;
-	u16 imm16;
+	s16 imm16;
 	unsigned int fault;
 
 	/* back up one instruction */
-- 
1.7.5.4

