From 28cac514ee25c4f7d95eb0baf964750fc738870a Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Sat, 27 Apr 2013 01:00:37 -0500
Subject: [PATCH 082/248] FogBugz #119143: Base socfpga.dtsi is incomplete

Add missing base entries for I2C and CAN.
Keep the entries in socfpga.dtsi alphabetized.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
---
 arch/arm/boot/dts/socfpga.dtsi          | 93 +++++++++++++++++++++++----------
 arch/arm/boot/dts/socfpga_cyclone5.dtsi |  5 +-
 arch/arm/boot/dts/socfpga_ice.dts       | 28 ++++++++++
 arch/arm/boot/dts/socfpga_vt.dts        | 12 +++++
 4 files changed, 106 insertions(+), 32 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 76e4108..3b5ef12 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -455,6 +455,19 @@
 					};
 				};
 			};
+		dcan0: d_can@ffc00000 {
+			compatible = "bosch,d_can";
+			reg = <0xffc00000 0x1000>;
+			interrupts = <0 131 4>;
+			status = "disabled";
+		};
+
+		dcan1: d_can@ffc10000 {
+			compatible = "bosch,d_can";
+			reg = <0xffc10000 0x1000>;
+			interrupts = <0 135 4>;
+			status = "disabled";
+		};
 
 		gmac0: ethernet@ff700000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
@@ -521,6 +534,58 @@
 			clocks = <&per_base_clk>;
 		};
 
+		hps_0_fpgamgr: fpgamgr@0xff706000 {
+			compatible = "altr,fpga-mgr-1.0", "altr,fpga-mgr";
+			transport = "mmio";
+			reg = <0xFF706000 0x1000
+					0xFFB90000 0x1000>;
+			interrupts = <0 175 4>;
+		};
+
+		i2c0: i2c@ffc04000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "snps,designware-i2c";
+			reg = <0xffc04000 0x1000>;
+			interrupts = <0 158 4>;
+			emptyfifo_hold_master = <1>;
+			clocks = <&per_base_clk>;
+			status = "disabled";
+		};
+
+		i2c1: i2c@ffc05000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "snps,designware-i2c";
+			reg = <0xffc05000 0x1000>;
+			interrupts = <0 159 4>;
+			emptyfifo_hold_master = <1>;
+			clocks = <&per_base_clk>;
+			status = "disabled";
+		};
+
+		i2c2: i2c@ffc06000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "snps,designware-i2c";
+			reg = <0xffc06000 0x1000>;
+			interrupts = <0 160 4>;
+			emptyfifo_hold_master = <1>;
+			clocks = <&per_base_clk>;
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "snps,designware-i2c";
+			reg = <0xffc07000 0x1000>;
+			interrupts = <0 161 4>;
+			emptyfifo_hold_master = <1>;
+			clocks = <&per_base_clk>;
+			status = "disabled";
+		};
+
 		L2: l2-cache@fffef000 {
 			compatible = "arm,pl310-cache";
 			reg = <0xfffef000 0x1000>;
@@ -674,33 +739,5 @@
 				dev-tx-fifo-size = <512 512 512 512 512 512
 					512 512 512 512 512 512 512 512 512>;
 		};
-
-		i2c0: i2c@ffc04000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc04000 0x1000>;
-			interrupts = <0 158 4>;
-			emptyfifo_hold_master = <1>;
-			clocks = <&per_base_clk>;
-		};
-
-		i2c1: i2c@ffc05000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc05000 0x1000>;
-			interrupts = <0 159 4>;
-			emptyfifo_hold_master = <1>;
-			clocks = <&per_base_clk>;
-		};
-
-		hps_0_fpgamgr: fpgamgr@0xff706000 {
-			compatible = "altr,fpga-mgr-1.0", "altr,fpga-mgr";
-			transport = "mmio";
-			reg = <0xFF706000 0x1000
-			       0xFFB90000 0x1000>;
-			interrupts = <0 175 4>;
-		};
 	};
 };
diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dtsi b/arch/arm/boot/dts/socfpga_cyclone5.dtsi
index 3dc48c4..3db475b 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dtsi
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dtsi
@@ -88,10 +88,6 @@
 			status = "okay";
 		};
 
-		i2c1: i2c@ffc05000 {
-			status = "disabled";
-		};
-
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
@@ -163,6 +159,7 @@
 
 		i2c0: i2c@ffc04000 {
 			speed-mode = <0>;
+			status = "okay";
 		};
 
 		leds {
diff --git a/arch/arm/boot/dts/socfpga_ice.dts b/arch/arm/boot/dts/socfpga_ice.dts
index f406e1e..7fededc 100644
--- a/arch/arm/boot/dts/socfpga_ice.dts
+++ b/arch/arm/boot/dts/socfpga_ice.dts
@@ -41,6 +41,34 @@
 			};
 		};
 
+		dcan0: d_can@ffc00000 {
+			status = "disabled";
+		};
+
+		dcan1: d_can@ffc10000 {
+			status = "disabled";
+		};
+
+		ethernet@ff700000 {
+			status = "disabled";
+		};
+
+		ethernet@ff702000 {
+			status = "disabled";
+		};
+
+		i2c1: i2c@ffc05000 {
+			status = "disabled";
+ 		};
+
+		i2c2: i2c@ffc06000 {
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			status = "disabled";
+		};
+
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
diff --git a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
index f76eebc..3e3ed2d 100644
--- a/arch/arm/boot/dts/socfpga_vt.dts
+++ b/arch/arm/boot/dts/socfpga_vt.dts
@@ -83,6 +83,18 @@
 			status = "disabled";
 		};
 
+		i2c1: i2c@ffc05000 {
+			status = "disabled";
+		};
+
+		i2c2: i2c@ffc06000 {
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			status = "disabled";
+		};
+
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
-- 
1.9.1

