From 949b2497819b22c75adb4e604a4f051f3c0a0286 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Mon, 22 Jul 2013 13:19:53 -0500
Subject: [PATCH 105/248] FogBugz #139419: Fix section mismatch warning when
 building kernel

Since v3.8, the drivers did away the __init section for driver loading and
unloading. Remove final remnants of the __init keyword in the USB driver.

This removes the warning:

"WARNING: modpost: Found 1 section mismatch(es)." message.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
---
 drivers/usb/otg/dwc/cil.h | 2 +-
 drivers/usb/otg/dwc/hcd.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/otg/dwc/cil.h b/drivers/usb/otg/dwc/cil.h
index e1915b0..82dd1ea 100644
--- a/drivers/usb/otg/dwc/cil.h
+++ b/drivers/usb/otg/dwc/cil.h
@@ -1017,7 +1017,7 @@ static inline int dwc_otg_hcd_init(struct device *_dev,
 	return 0;
 }
 #else
-extern int __init dwc_otg_hcd_init(struct device *_dev,
+extern int dwc_otg_hcd_init(struct device *_dev,
 				   struct dwc_otg_device *dwc_dev);
 extern void dwc_otg_hcd_remove(struct device *_dev);
 #endif
diff --git a/drivers/usb/otg/dwc/hcd.h b/drivers/usb/otg/dwc/hcd.h
index c3d86e4..add8ed5 100644
--- a/drivers/usb/otg/dwc/hcd.h
+++ b/drivers/usb/otg/dwc/hcd.h
@@ -209,7 +209,7 @@ static inline struct usb_hcd *dwc_otg_hcd_to_hcd(struct dwc_hcd *dwc_hcd)
 }
 
 /* HCD Create/Destroy Functions */
-extern int __init dwc_otg_hcd_init(struct device *_dev,
+extern int dwc_otg_hcd_init(struct device *_dev,
 				   struct dwc_otg_device *dwc_dev);
 extern void dwc_otg_hcd_remove(struct device *_dev);
 
-- 
1.9.1

