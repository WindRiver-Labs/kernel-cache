From 71afc9127fe3e485de53684b5b4b65d5da06a15e Mon Sep 17 00:00:00 2001
From: "yadi.hu@windriver.com" <yadi.hu@windriver.com>
Date: Fri, 10 Mar 2017 13:12:32 +0800
Subject: [PATCH 2/2] PCI: altera: Extract TLP completion status correctly

commit 8ca6e0a75a5145458e8a680edf2394375f2129da upstream

Previously we extracted 'Completion Status' from b14:12, but it is
actually
b15:13.  Extract it from the correct bits.

Signed-off-by: Hu Yadi<yadi.hu@windriver.com>
Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
Acked-by: Ley Foon Tan <ley.foon.tan@intel.com>
---
 drivers/pci/host/pci-altera.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/pci/host/pci-altera.c b/drivers/pci/host/pci-altera.c
index c4ced0f..a79d658 100644
--- a/drivers/pci/host/pci-altera.c
+++ b/drivers/pci/host/pci-altera.c
@@ -55,7 +55,7 @@
 #define TLP_READ_TAG       0x1D  /* statically define */
 #define TLP_WRITE_TAG      0x10  /* statically define */
 #define TLP_CFG_DW2(bus, devfn, offset) ((bus << 24) | (devfn << 16) | offset)
-#define TLP_COMP_STATUS(s) (((s) >> 12) & 7)
+#define TLP_COMP_STATUS(s) (((s) >> 13) & 7)
 
 /* Address translation table entry size */
 #define ATT_ENTRY_SIZE		8
-- 
1.7.5.4

