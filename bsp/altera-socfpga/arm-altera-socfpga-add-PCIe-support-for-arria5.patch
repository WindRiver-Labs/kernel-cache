From abb868c925e23b5fcd54a584229d405255eaa968 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Tue, 2 Dec 2014 11:08:00 +0800
Subject: [PATCH] arm/altera-socfpga: add PCIe support for arria5

Add PCIe nodes to socfpga_arria5_socdk.dts.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm/boot/dts/socfpga_arria5_socdk.dts |   40 ++++++++++++++++++++++++++++
 1 files changed, 40 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga_arria5_socdk.dts b/arch/arm/boot/dts/socfpga_arria5_socdk.dts
index 75688df..0fa2f58 100644
--- a/arch/arm/boot/dts/socfpga_arria5_socdk.dts
+++ b/arch/arm/boot/dts/socfpga_arria5_socdk.dts
@@ -61,6 +61,46 @@
 	};
 
 	soc {
+		hps_0_bridges: bridge@0xc0000000 {
+			compatible = "altr,bridge-1.0", "simple-bus";
+			reg = <0xc0000000 0x20000000 0xff200000 0x200000>;
+			reg-names = "axi_h2f", "axi_h2f_lw";
+			#address-cells = <0x2>;
+			#size-cells = <0x1>;
+			ranges = <0x0 0x0 0xc0000000 0x20000000
+				0x0 0x20000000 0xe0000000 0x40000
+				0x1 0x10000 0xff210000 0x8
+				0x1 0x10040 0xff210040 0x10
+				0x1 0x100e0 0xff2100e0 0x20
+				0x1 0x10020 0xff210020 0x8
+				0x1 0x80 0xff200080 0x10
+				0x1 0x0 0xff200000 0x80
+				0x1 0x24000 0xff224000 0x20
+				0x1 0x24020 0xff224020 0x10
+				0x1 0x20000 0xff220000 0x4000>;
+
+			pcie_cv_hip_avmm_0: pcie@0x000000000 {
+				compatible = "ALTR,pcie-root-port-13.1", "altr,pcie-root-port-1.0";
+				reg = <0x0 0x0 0x20000000 0x1 0x20000 0x4000>;
+				reg-names = "Txs", "Cra";
+				interrupt-parent = <&intc>;
+				interrupts = <0x0 0x28 0x4>;
+				interrupt-controller;
+				#interrupt-cells = <0x1>;
+				altr,msi = <&msi_to_gic_gen_0>;
+				device_type = "pci";
+			};
+			msi_to_gic_gen_0: msi@0x100000080 {
+				compatible = "ALTR,msi-1.0", "altr,msi-1.0";
+				reg = <0x1 0x80 0x10 0x1 0x0 0x80>;
+				reg-names = "csr", "vector_slave";
+				interrupt-parent = <&intc>;
+				interrupts = <0x0 0x2a 0x4>;
+				msi-controller = <0x1>;
+				num-vectors = <0x20>;
+			};
+		};
+
 		gpio@ff708000 {
 			status = "okay";
 		};
-- 
1.7.5.4

