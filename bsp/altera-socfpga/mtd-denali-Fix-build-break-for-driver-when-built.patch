From fd56cd66f6e27f47032ae0da64d494fd0debec0d Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Mon, 15 Oct 2012 18:13:39 -0600
Subject: [PATCH 159/254] mtd: denali: Fix build break for driver when built

Upstream: git://git.rocketboards.org/linux-socfpga.git
 as a module

Make denali_init and denali_remove accessible when the driver
is built as a loadable module.

Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
(cherry picked from commit 0b9b0a6c0c9c82367696013c096c69ae7659c49d)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/mtd/nand/denali.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/mtd/nand/denali.c b/drivers/mtd/nand/denali.c
index 132ee12..a8d5533 100644
--- a/drivers/mtd/nand/denali.c
+++ b/drivers/mtd/nand/denali.c
@@ -1595,6 +1595,7 @@ failed_req_irq:
 
 	return ret;
 }
+EXPORT_SYMBOL(denali_init);
 
 /* driver exit point */
 void denali_remove(struct denali_nand_info *denali)
@@ -1603,3 +1604,4 @@ void denali_remove(struct denali_nand_info *denali)
 	dma_unmap_single(denali->dev, denali->buf.dma_buf, DENALI_BUF_SIZE,
 			DMA_BIDIRECTIONAL);
 }
+EXPORT_SYMBOL(denali_remove);
-- 
1.7.5.4

