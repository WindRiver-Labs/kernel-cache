From 192020517adccfb5c01c7ed35ed3727832e99c88 Mon Sep 17 00:00:00 2001
From: Alan Tull <atull@altera.com>
Date: Fri, 22 Feb 2013 09:35:25 -0600
Subject: [PATCH 199/254] arm: socfpga: set led default trigger to none

Upstream: git://git.rocketboards.org/linux-socfpga.git

 * Don't need gpio trigger to control LED's
 * Allow default-trigger to be "none"
 * Disable gpio trigger in defconfig
 * Default LEDs to be off

Signed-off-by: Alan Tull <atull@altera.com>
(cherry picked from commit e8981efb3a14351dcb43a54346ba51eefaed1047)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/socfpga_cyclone5.dts |   16 ----------------
 arch/arm/configs/socfpga_defconfig     |    5 ++---
 2 files changed, 2 insertions(+), 19 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dts b/arch/arm/boot/dts/socfpga_cyclone5.dts
index d220f00..1ab3eb8 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dts
@@ -137,57 +137,41 @@
 			fpga0 {
 				label = "fpga_led0";
 				gpios = <&agpio0 0 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			fpga1 {
 				label = "fpga_led1";
 				gpios = <&agpio0 1 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			fpga2 {
 				label = "fpga_led2";
 				gpios = <&agpio0 2 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			fpga3 {
 				label = "fpga_led3";
 				gpios = <&agpio0 3 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			hps0 {
 				label = "hps_led0";
 				gpios = <&gpio1 15 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			hps1 {
 				label = "hps_led1";
 				gpios = <&gpio1 14 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			hps2 {
 				label = "hps_led2";
 				gpios = <&gpio1 13 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 
 			hps3 {
 				label = "hps_led3";
 				gpios = <&gpio1 12 1>;
-				linux,default-trigger = "gpio";
-				default-state = "on";
 			};
 		};
 	};
diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index 37bd7df..c0d8bf6 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -20,9 +20,9 @@ CONFIG_MACH_SOCFPGA_CYCLONE5=y
 # CONFIG_FPGA_SDRAM is not set
 CONFIG_ARM_THUMBEE=y
 # CONFIG_ARCH_VEXPRESS_CORTEX_A5_A9_ERRATA is not set
-# CONFIG_CACHE_L2X0 is not set
-CONFIG_HIGH_RES_TIMERS=y
 CONFIG_SMP=y
+CONFIG_HIGH_RES_TIMERS=y
+CONFIG_VMSPLIT_2G=y
 CONFIG_NR_CPUS=2
 CONFIG_AEABI=y
 CONFIG_ZBOOT_ROM_TEXT=0x0
@@ -131,5 +131,4 @@ CONFIG_LEDS_CLASS=m
 CONFIG_LEDS_GPIO=m
 CONFIG_LEDS_TRIGGERS=y
 CONFIG_LEDS_TRIGGER_TIMER=y
-CONFIG_LEDS_TRIGGER_GPIO=y
 CONFIG_LEDS_TRIGGER_CPU=y
-- 
1.7.5.4

