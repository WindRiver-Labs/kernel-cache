From 00925b6f3641a5ba2f7b45f601c1d9e06f02a53c Mon Sep 17 00:00:00 2001
From: Alan Tull <atull@altera.com>
Date: Tue, 16 Jul 2013 15:18:58 -0500
Subject: [PATCH 109/248] FogBugz #102675: do not touch fpga bridge resets by
 default

Previously we were bringing all FPGA-hps bridges out of reset
without checking to see if the FPGA was programmed.  This patch
changes the behavior to not bring the bridges out of reset
or to set them to be in reset.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Alan Tull <atull@altera.com>
---
 arch/arm/mach-socfpga/socfpga.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/arch/arm/mach-socfpga/socfpga.c b/arch/arm/mach-socfpga/socfpga.c
index d4f4a1f..11be7b6 100644
--- a/arch/arm/mach-socfpga/socfpga.c
+++ b/arch/arm/mach-socfpga/socfpga.c
@@ -146,9 +146,6 @@ static void __init enable_periphs(void)
 {
 	/* Release all peripherals from reset.*/
 	__raw_writel(0, rst_manager_base_addr + SOCFPGA_RSTMGR_MODPERRST);
-
-	/* Release all FPGA bridges from reset.*/
-	__raw_writel(0, rst_manager_base_addr + SOCFPGA_RSTMGR_BRGMODRST);
 }
 
 #define MICREL_KSZ9021_EXTREG_CTRL 11
-- 
1.9.1

