From 2404e218ac863f72870a076cc37ddeb87f7075d0 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Thu, 24 Jan 2013 15:04:56 -0600
Subject: [PATCH 180/254] arm: socfpga: Clean up DTSI and DTS for socfpga

Upstream: git://git.rocketboards.org/linux-socfpga.git

Remove the need to redefine the basic structure for timers and uarts.

Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
(cherry picked from commit 175d4e22e0957eb609209ccc1002bb7760ab09ab)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/socfpga.dtsi         |   44 ++++++++++++++++++++++++++++++++
 arch/arm/boot/dts/socfpga_cyclone5.dts |   34 ++++--------------------
 arch/arm/boot/dts/socfpga_ice.dts      |   34 ++++--------------------
 arch/arm/boot/dts/socfpga_vt.dts       |   34 ++++--------------------
 4 files changed, 62 insertions(+), 84 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 3cd2916..f074aaa 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -25,6 +25,10 @@
 		ethernet0 = &gmac0;
 		serial0 = &uart0;
 		serial1 = &uart1;
+		timer0 = &timer0;
+		timer1 = &timer1;
+		timer2 = &timer2;
+		timer3 = &timer3;
 	};
 
 	cpus {
@@ -227,6 +231,30 @@
 			interrupts = <1 13 0xf04>;
 		};
 
+		timer0: timer0@ffc08000 {
+			compatible = "snps,dw-apb-timer-sp";
+			interrupts = <0 167 4>;
+			reg = <0xffc08000 0x1000>;
+		};
+
+		timer1: timer1@ffc09000 {
+			compatible = "snps,dw-apb-timer-sp";
+			interrupts = <0 168 4>;
+			reg = <0xffc09000 0x1000>;
+		};
+
+		timer2: timer2@ffd00000 {
+			compatible = "snps,dw-apb-timer-osc";
+			interrupts = <0 169 4>;
+			reg = <0xffd00000 0x1000>;
+		};
+
+		timer3: timer3@ffd01000 {
+			compatible = "snps,dw-apb-timer-osc";
+			interrupts = <0 170 4>;
+			reg = <0xffd01000 0x1000>;
+		};
+
 		usb0: usb@ffb00000 {
 				compatible = "snps,dwc-otg";
 				reg = <0xffb00000 0xffff>;
@@ -242,6 +270,22 @@
 					512 512 512 512 512 512 512 512 512>;
 		};
 
+		uart0: serial0@ffc02000 {
+			compatible = "snps,dw-apb-uart";
+			reg = <0xffc02000 0x1000>;
+			interrupts = <0 162 4>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+		};
+
+		uart1: serial1@ffc03000 {
+			compatible = "snps,dw-apb-uart";
+			reg = <0xffc03000 0x1000>;
+			interrupts = <0 163 4>;
+			reg-shift = <2>;
+			reg-io-width = <4>;
+		};
+
 		usb1: usb@ffb40000 {
 				compatible = "snps,dwc-otg";
 				reg = <0xffb40000 0xffff>;
diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dts b/arch/arm/boot/dts/socfpga_cyclone5.dts
index 2016f26..578dfbf 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dts
@@ -94,50 +94,28 @@
 				};
 			};
 
-		timer0: timer@ffc08000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 167 4>;
+		timer0@ffc08000 {
 			clock-frequency = <100000000>;
-			reg = <0xffc08000 0x1000>;
 		};
 
-		timer1: timer@ffc09000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 168 4>;
+		timer1@ffc09000 {
 			clock-frequency = <100000000>;
-			reg = <0xffc09000 0x1000>;
 		};
 
-		timer2: timer@ffd00000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 169 4>;
+		timer2@ffd00000 {
 			clock-frequency = <25000000>;
-			reg = <0xffd00000 0x1000>;
 		};
 
-		timer3: timer@ffd01000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 170 4>;
+		timer3@ffd01000 {
 			clock-frequency = <25000000>;
-			reg = <0xffd01000 0x1000>;
 		};
 
-		uart0: uart@ffc02000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc02000 0x1000>;
+		serial0@ffc02000 {
 			clock-frequency = <100000000>;
-			interrupts = <0 162 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 
-		uart1: uart@ffc03000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc03000 0x1000>;
+		serial1@ffc03000 {
 			clock-frequency = <100000000>;
-			interrupts = <0 163 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 	};
 };
diff --git a/arch/arm/boot/dts/socfpga_ice.dts b/arch/arm/boot/dts/socfpga_ice.dts
index 829b97c..b7b9573 100644
--- a/arch/arm/boot/dts/socfpga_ice.dts
+++ b/arch/arm/boot/dts/socfpga_ice.dts
@@ -94,50 +94,28 @@
 				};
 			};
 
-		timer0: timer@ffc08000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 167 4>;
+		timer0@ffc08000 {
 			clock-frequency = <77161>;
-			reg = <0xffc08000 0x1000>;
 		};
 
-		timer1: timer@ffc09000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 168 4>;
+		timer1@ffc09000 {
 			clock-frequency = <77161>;
-			reg = <0xffc09000 0x1000>;
 		};
 
-		timer2: timer@ffd00000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 169 4>;
+		timer2@ffd00000 {
 			clock-frequency = <19290>;
-			reg = <0xffd00000 0x1000>;
 		};
 
-		timer3: timer@ffd01000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 170 4>;
+		timer3@ffd01000 {
 			clock-frequency = <19290>;
-			reg = <0xffd01000 0x1000>;
 		};
 
-		uart0: uart@ffc02000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc02000 0x1000>;
+		serial0@ffc02000 {
 			clock-frequency = <77161>;
-			interrupts = <0 162 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 
-		uart1: uart@ffc03000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc03000 0x1000>;
+		serial1@ffc03000 {
 			clock-frequency = <77161>;
-			interrupts = <0 163 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 	};
 };
diff --git a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
index ac6c78e..80cf65b 100644
--- a/arch/arm/boot/dts/socfpga_vt.dts
+++ b/arch/arm/boot/dts/socfpga_vt.dts
@@ -94,50 +94,28 @@
 				};
 			};
 
-		timer0: timer@ffc08000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 167 4>;
+		timer0@ffc08000 {
 			clock-frequency = <7000000>;
-			reg = <0xffc08000 0x1000>;
 		};
 
-		timer1: timer@ffc09000 {
-			compatible = "snps,dw-apb-timer-sp";
-			interrupts = <0 168 4>;
+		timer1@ffc09000 {
 			clock-frequency = <7000000>;
-			reg = <0xffc09000 0x1000>;
 		};
 
-		timer2: timer@ffd00000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 169 4>;
+		timer2@ffd00000 {
 			clock-frequency = <7000000>;
-			reg = <0xffd00000 0x1000>;
 		};
 
-		timer3: timer@ffd01000 {
-			compatible = "snps,dw-apb-timer-osc";
-			interrupts = <0 170 4>;
+		timer3@ffd01000 {
 			clock-frequency = <7000000>;
-			reg = <0xffd01000 0x1000>;
 		};
 
-		uart0: uart@ffc02000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc02000 0x1000>;
+		serial0@ffc02000 {
 			clock-frequency = <7372800>;
-			interrupts = <0 162 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 
-		uart1: uart@ffc03000 {
-			compatible = "snps,dw-apb-uart";
-			reg = <0xffc03000 0x1000>;
+		serial1@ffc03000 {
 			clock-frequency = <7372800>;
-			interrupts = <0 163 4>;
-			reg-shift = <2>;
-			reg-io-width = <4>;
 		};
 	};
 };
-- 
1.7.5.4

