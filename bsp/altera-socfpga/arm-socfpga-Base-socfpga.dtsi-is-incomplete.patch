From 8859efcde57828088d679ad6c9cac6b3afffc57d Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Sat, 27 Apr 2013 01:00:37 -0500
Subject: [PATCH 238/254] arm: socfpga: Base socfpga.dtsi is incomplete

Upstream: git://git.rocketboards.org/linux-socfpga.git

Add missing base entries for I2C and CAN.
Keep the entries in socfpga.dtsi alphabetized.

Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
(cherry picked from commit 5b1b6ecea234f1f9473aecf14c178cc3b5057821)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/boot/dts/socfpga.dtsi         |   87 +++++++++++++++++++++----------
 arch/arm/boot/dts/socfpga_cyclone5.dts |   16 ++++++
 arch/arm/boot/dts/socfpga_ice.dts      |   28 ++++++++++
 arch/arm/boot/dts/socfpga_vt.dts       |   21 ++++++++
 4 files changed, 124 insertions(+), 28 deletions(-)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 4923289..e7c5fdb 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -251,6 +251,17 @@
 				};
 			};
 
+		dcan0: d_can@ffc00000 {
+			compatible = "bosch,d_can";
+			reg = <0xffc00000 0x1000>;
+			interrupts = <0 131 4>;
+		};
+
+		dcan1: d_can@ffc10000 {
+                        compatible = "bosch,d_can";
+                        reg = <0xffc10000 0x1000>;
+                        interrupts = <0 135 4>;
+                };
 
 		gmac0: ethernet@ff700000 {
 			compatible = "altr,socfpga-stmmac", "snps,dwmac-3.70a", "snps,dwmac";
@@ -311,6 +322,54 @@
 			clocks = <&per_base_clk>;
 		};
 
+		hps_0_fpgamgr: fpgamgr@0xff706000 {
+                        compatible = "altr,fpga-mgr-1.0", "altr,fpga-mgr";
+                        transport = "mmio";
+                        reg = <0xFF706000 0x1000
+                               0xFFB90000 0x1000>;
+                        interrupts = <0 175 4>;
+                };
+
+		i2c0: i2c@ffc04000 {
+                        #address-cells = <1>;
+                        #size-cells = <0>;
+                        compatible = "snps,designware-i2c";
+                        reg = <0xffc04000 0x1000>;
+                        interrupts = <0 158 4>;
+                        emptyfifo_hold_master = <1>;
+                        clocks = <&per_base_clk>;
+                };
+
+                i2c1: i2c@ffc05000 {
+                        #address-cells = <1>;
+                        #size-cells = <0>;
+                        compatible = "snps,designware-i2c";
+                        reg = <0xffc05000 0x1000>;
+                        interrupts = <0 159 4>;
+                        emptyfifo_hold_master = <1>;
+                        clocks = <&per_base_clk>;
+                };
+
+                i2c2: i2c@ffc06000 {
+                        #address-cells = <1>;
+                        #size-cells = <0>;
+                        compatible = "snps,designware-i2c";
+                        reg = <0xffc06000 0x1000>;
+                        interrupts = <0 160 4>;
+                        emptyfifo_hold_master = <1>;
+                        clocks = <&per_base_clk>;
+                };
+
+                i2c3: i2c@ffc07000 {
+                        #address-cells = <1>;
+                        #size-cells = <0>;
+                        compatible = "snps,designware-i2c";
+                        reg = <0xffc07000 0x1000>;
+                        interrupts = <0 161 4>;
+                        emptyfifo_hold_master = <1>;
+                        clocks = <&per_base_clk>;
+                };
+
 		L2: l2-cache@fffef000 {
 			compatible = "arm,pl310-cache";
 			reg = <0xfffef000 0x1000>;
@@ -472,33 +531,5 @@
 				dev-tx-fifo-size = <512 512 512 512 512 512
 					512 512 512 512 512 512 512 512 512>;
 		};
-
-		i2c0: i2c@ffc04000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc04000 0x1000>;
-			interrupts = <0 158 4>;
-			emptyfifo_hold_master = <1>;
-			clocks = <&per_base_clk>;
-		};
-
-		i2c1: i2c@ffc05000 {
-			#address-cells = <1>;
-			#size-cells = <0>;
-			compatible = "snps,designware-i2c";
-			reg = <0xffc05000 0x1000>;
-			interrupts = <0 159 4>;
-			emptyfifo_hold_master = <1>;
-			clocks = <&per_base_clk>;
-		};
-
-		hps_0_fpgamgr: fpgamgr@0xff706000 {
-			compatible = "altr,fpga-mgr-1.0", "altr,fpga-mgr";
-			transport = "mmio";
-			reg = <0xFF706000 0x1000
-			       0xFFB90000 0x1000>;
-			interrupts = <0 175 4>;
-		};
 	};
 };
diff --git a/arch/arm/boot/dts/socfpga_cyclone5.dts b/arch/arm/boot/dts/socfpga_cyclone5.dts
index adcd611..f412af1 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5.dts
@@ -48,6 +48,14 @@
 			};
 		};
 
+		dcan0: d_can@ffc00000 {
+			status = "disabled";
+		};
+
+		dcan1: d_can@ffc10000 {
+			status = "disabled";
+		};
+
 		ethernet@ff700000 {
 			status = "disabled";
 		};
@@ -61,6 +69,14 @@
 			status = "disabled";
 		};
 
+		i2c2: i2c@ffc06000 {
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			status = "disabled";
+		};
+
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
diff --git a/arch/arm/boot/dts/socfpga_ice.dts b/arch/arm/boot/dts/socfpga_ice.dts
index f406e1e..7fededc 100644
--- a/arch/arm/boot/dts/socfpga_ice.dts
+++ b/arch/arm/boot/dts/socfpga_ice.dts
@@ -41,6 +41,34 @@
 			};
 		};
 
+		dcan0: d_can@ffc00000 {
+			status = "disabled";
+		};
+
+		dcan1: d_can@ffc10000 {
+			status = "disabled";
+		};
+
+		ethernet@ff700000 {
+			status = "disabled";
+		};
+
+		ethernet@ff702000 {
+			status = "disabled";
+		};
+
+		i2c1: i2c@ffc05000 {
+			status = "disabled";
+ 		};
+
+		i2c2: i2c@ffc06000 {
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			status = "disabled";
+		};
+
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
diff --git a/arch/arm/boot/dts/socfpga_vt.dts b/arch/arm/boot/dts/socfpga_vt.dts
index d1b2847..5166fae 100644
--- a/arch/arm/boot/dts/socfpga_vt.dts
+++ b/arch/arm/boot/dts/socfpga_vt.dts
@@ -35,6 +35,14 @@
 			};
 		};
 
+		dcan0: d_can@ffc00000 {
+			status = "disabled";
+		};
+
+		dcan1: d_can@ffc10000 {
+			status = "disabled";
+		};
+
 		dwmmc0@ff704000 {
 			pwr-en = <1>;
 		};
@@ -42,10 +50,23 @@
 		ethernet@ff700000 {
 			phy-mode = "gmii";
 		};
+
 		ethernet@ff702000 {
 			status = "disabled";
 		};
 
+		i2c1: i2c@ffc05000 {
+			status = "disabled";
+		};
+
+		i2c2: i2c@ffc06000 {
+			status = "disabled";
+		};
+
+		i2c3: i2c@ffc07000 {
+			status = "disabled";
+		};
+
 		qspi: spi@ff705000 {
 				compatible = "cadence,qspi";
 				#address-cells = <1>;
-- 
1.7.5.4

