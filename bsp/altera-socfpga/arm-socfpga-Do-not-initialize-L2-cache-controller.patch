From fc4faa8101aee46233430743fcec7d6a6b75aeb2 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@altera.com>
Date: Wed, 7 Nov 2012 10:47:50 -0700
Subject: [PATCH 166/254] arm: socfpga: Do not initialize L2 cache controller

Upstream: git://git.rocketboards.org/linux-socfpga.git

If CONFIG_CACHE_L2X0 is not selected, then there is no need to
initialize the L2 cache controller.

Signed-off-by: Dinh Nguyen <dinguyen@altera.com>
(cherry picked from commit 0b8c7058ac6982a7d8945b26365862bd79d631fa)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-socfpga/socfpga.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-socfpga/socfpga.c b/arch/arm/mach-socfpga/socfpga.c
index caca2ab..bb9656c 100644
--- a/arch/arm/mach-socfpga/socfpga.c
+++ b/arch/arm/mach-socfpga/socfpga.c
@@ -140,7 +140,9 @@ static void socfpga_cyclone5_restart(char mode, const char *cmd)
 
 static void __init socfpga_cyclone5_init(void)
 {
+#ifdef CONFIG_CACHE_L2X0
 	l2x0_of_init(0, ~0UL);
+#endif
 	of_platform_populate(NULL, of_default_bus_match_table,
 		socfpga_auxdata_lookup, NULL);
 
-- 
1.7.5.4

