From e4bb0109c96b25b163347b5fba9b23f9495c252f Mon Sep 17 00:00:00 2001
From: Limeng <Meng.Li@windriver.com>
Date: Tue, 26 Apr 2016 14:50:34 +0800
Subject: [PATCH] ARM: dts: socfpga_cyclone5_de0_sockit: add FPGA IO device
 tree node

Add FPGA IO device tree node to support FPFA IO feature.
There is a reference link as below:
http://releases.rocketboards.org/release/2015.10/atlas/
atlas_sdcard_v1.1.img.tgz
download tar package and extract it. There is a dts file which
include the example of FPGA IO device tree node.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 arch/arm/boot/dts/socfpga_cyclone5_de0_sockit.dts |  163 +++++++++++++++++++++
 1 file changed, 163 insertions(+)

diff --git a/arch/arm/boot/dts/socfpga_cyclone5_de0_sockit.dts b/arch/arm/boot/dts/socfpga_cyclone5_de0_sockit.dts
index 555e9ca..5b9cc48 100644
--- a/arch/arm/boot/dts/socfpga_cyclone5_de0_sockit.dts
+++ b/arch/arm/boot/dts/socfpga_cyclone5_de0_sockit.dts
@@ -50,6 +50,169 @@
 			linux,default-trigger = "heartbeat";
 		};
 	};
+
+	soc {
+		hps_0_bridges: bridge@0xc0000000 {
+			compatible = "altr,bridge-15.0", "simple-bus";
+			reg = <0xc0000000 0x20000000>,
+				<0xff200000 0x00200000>;
+			reg-names = "axi_h2f", "axi_h2f_lw";
+			clocks = <&clk_0 &clk_0 &clk_0>;
+			clock-names = "h2f_axi_clock", "h2f_lw_axi_clock", "f2h_sdram0_clock";
+			#address-cells = <2>;
+			#size-cells = <1>;
+
+			ranges = <0x0 0x0 0xc0000000 0x10000
+				0x1 0x2000 0xff202000 0x8
+				0x1 0x1000 0xff201000 0x8
+				0x1 0x3000 0xff203000 0x10
+				0x1 0x4000 0xff204000 0x10
+				0x1 0x5000 0xff205000 0x10
+				0x1 0xa0000 0xff2a0000 0x20
+				0x1 0x80000 0xff280000 0x20
+				0x1 0xa8000 0xff2a8000 0x20
+				0x1 0xb0000 0xff2b0000 0x10
+				0x1 0x90000 0xff290000 0x10
+				0x1 0xb8000 0xff2b8000 0x10
+				0x1 0xd0000 0xff2d0000 0x10
+				0x1 0xc0000 0xff2c0000 0x10000>;
+
+			sysid_qsys: sysid@0x100001000 {
+				compatible = "altr,sysid-15.0", "altr,sysid-1.0";
+				reg = <0x00000001 0x00001000 0x00000008>;
+				clocks = <&clk_0>;
+				id = <2899645442>;	/* embeddedsw.dts.params.id type NUMBER */
+				timestamp = <1439830217>;	/* embeddedsw.dts.params.timestamp type NUMBER */
+			};
+
+			led_pio: gpio@0x100003000 {
+				compatible = "altr,pio-15.0", "altr,pio-1.0";
+				reg = <0x00000001 0x00003000 0x00000010>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <8>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+
+			dipsw_pio: gpio@0x100004000 {
+				compatible = "altr,pio-15.0", "altr,pio-1.0";
+				reg = <0x00000001 0x00004000 0x00000010>;
+				interrupts = <0 41 1>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <4>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				altr,interrupt-type = <3>;	/* embeddedsw.dts.params.altr,interrupt_type type NUMBER */
+				edge_type = <2>;	/* embeddedsw.dts.params.edge_type type NUMBER */
+				level_trigger = <0>;	/* embeddedsw.dts.params.level_trigger type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+
+			button_pio: gpio@0x100005000 {
+				compatible = "altr,pio-15.0", "altr,pio-1.0";
+				reg = <0x00000001 0x00005000 0x00000010>;
+				interrupts = <0 42 1>;
+				clocks = <&clk_0>;
+				altr,gpio-bank-width = <2>;	/* embeddedsw.dts.params.altr,gpio-bank-width type NUMBER */
+				altr,interrupt-type = <2>;	/* embeddedsw.dts.params.altr,interrupt_type type NUMBER */
+				edge_type = <1>;	/* embeddedsw.dts.params.edge_type type NUMBER */
+				level_trigger = <0>;	/* embeddedsw.dts.params.level_trigger type NUMBER */
+				resetvalue = <0>;	/* embeddedsw.dts.params.resetvalue type NUMBER */
+				#gpio-cells = <2>;
+				gpio-controller;
+			};
+		};
+
+		clkmgr@ffd04000 {
+			clocks {
+				clk_0: clk_0 {
+					compatible = "fixed-clock";
+					#clock-cells = <0>;
+					clock-frequency = <50000000>;	/* 50.00 MHz */
+					clock-output-names = "clk_0-clk";
+				};
+			};
+		};
+
+		soc_leds: leds {
+			compatible = "gpio-leds";	/* appended from boardinfo */
+
+			led_fpga0: fpga0 {
+				label = "fpga_led0";	/* appended from boardinfo */
+				gpios = <&led_pio 0 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga1: fpga1 {
+				label = "fpga_led1";	/* appended from boardinfo */
+				gpios = <&led_pio 1 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga2: fpga2 {
+				label = "fpga_led2";	/* appended from boardinfo */
+				gpios = <&led_pio 2 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga3: fpga3 {
+				label = "fpga_led3";	/* appended from boardinfo */
+				gpios = <&led_pio 3 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga4: fpga4 {
+				label = "fpga_led4";	/* appended from boardinfo */
+				gpios = <&led_pio 4 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga5: fpga5 {
+				label = "fpga_led5";	/* appended from boardinfo */
+				gpios = <&led_pio 5 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga6: fpga6 {
+				label = "fpga_led6";	/* appended from boardinfo */
+				gpios = <&led_pio 6 0>;	/* appended from boardinfo */
+			};
+
+			led_fpga7: fpga7 {
+				label = "fpga_led7";	/* appended from boardinfo */
+				gpios = <&led_pio 7 0>;	/* appended from boardinfo */
+			};
+		};
+
+		soc_keys: keys {
+			compatible = "gpio-keys";	/* appended from boardinfo */
+			#address-cells = <1>;	/* appended from boardinfo */
+			#size-cells = <0>;	/* appended from boardinfo */
+
+			SW0: SW0 {
+				label = "SW0";	/* appended from boardinfo */
+				gpios = <&dipsw_pio 0 1>;	/* appended from boardinfo */
+				linux,code = <64>;	/* appended from boardinfo */
+				debounce-interval = <50>;	/* appended from boardinfo */
+			};
+
+			SW1: SW1 {
+				label = "SW1";	/* appended from boardinfo */
+				gpios = <&dipsw_pio 1 1>;	/* appended from boardinfo */
+				linux,code = <65>;	/* appended from boardinfo */
+				debounce-interval = <50>;	/* appended from boardinfo */
+			};
+
+			SW2: SW2 {
+				label = "SW2";	/* appended from boardinfo */
+				gpios = <&dipsw_pio 2 1>;	/* appended from boardinfo */
+				linux,code = <66>;	/* appended from boardinfo */
+				debounce-interval = <50>;	/* appended from boardinfo */
+			};
+
+			SW3: SW3 {
+				label = "SW3";	/* appended from boardinfo */
+				gpios = <&dipsw_pio 3 1>;	/* appended from boardinfo */
+				linux,code = <67>;	/* appended from boardinfo */
+				debounce-interval = <50>;	/* appended from boardinfo */
+			};
+		};
+	};
 };
 
 &gmac1 {
-- 
1.7.9.5

