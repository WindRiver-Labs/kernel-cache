From 1c384098cd2fe5f8e3839bb8b72518d99deadc58 Mon Sep 17 00:00:00 2001
From: Dinh Nguyen <dinguyen@opensource.altera.com>
Date: Mon, 25 Jan 2016 15:19:22 -0600
Subject: [PATCH 49/73] FogBugz #352163: fix error checking in interrupt
 latency driver

The ZERO-day testing revealed an error in how a variable is declared.
The variable was declared as an unsigned int, but the error check if
a value < 0. This will never happen if the variable is an unsigned int.

Reported-by: kbuild test robot <fengguang.wu@intel.com>
Signed-off-by: Dinh Nguyen <dinguyen@opensource.altera.com>
[mli1:Original patch taken from
https://github.com/altera-opensource/linux-socfpga.git socfpga-4.1-ltsi]
Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/misc/altera_ilc.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/misc/altera_ilc.c b/drivers/misc/altera_ilc.c
index adc7810..aecb79e 100644
--- a/drivers/misc/altera_ilc.c
+++ b/drivers/misc/altera_ilc.c
@@ -138,7 +138,8 @@ static void ilc_work(struct work_struct *work)
 
 static irqreturn_t ilc_interrupt_handler(int irq, void *p)
 {
-	unsigned int offset, stp_reg;
+	unsigned int stp_reg;
+	int offset;
 
 	struct altera_ilc *ilc = (struct altera_ilc *)p;
 
-- 
1.7.5.4

