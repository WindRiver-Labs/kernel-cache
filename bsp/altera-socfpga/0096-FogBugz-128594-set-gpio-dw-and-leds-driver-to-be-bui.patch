From a9aa79d30695475d7f6d8681f55d3b7d96be595c Mon Sep 17 00:00:00 2001
From: Alan Tull <atull@altera.com>
Date: Wed, 5 Jun 2013 08:12:29 -0500
Subject: [PATCH 096/248] FogBugz #128594: set gpio-dw and leds driver to be
 built in

Currently the gpio-dw driver and the leds driver are all set to be built
as modules.  Set them to be built-in.

Even though the LED driver is dependent on the GPIO drivers, it is fine
for the LED driver to be built in.  If the FPGA gpios and FPGA gpio LEDs
are added to the device tree, then the LED driver will defer loading until
all the gpio's that are listed as LEDs in the device tree are loaded.

[Original patch taken from
git://git.rocketboards.org/linux-socfpga.git socfpga-3.14]

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
Signed-off-by: Alan Tull <atull@altera.com>
---
 arch/arm/configs/socfpga_defconfig | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index d14ee47..42676d2 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -92,7 +92,7 @@ CONFIG_SPI_DW_MMIO=y
 CONFIG_SPI_SPIDEV=y
 CONFIG_GPIOLIB=y
 CONFIG_GPIO_SYSFS=y
-CONFIG_GPIO_DW=m
+CONFIG_GPIO_DW=y
 CONFIG_GPIO_ALTERA=m
 # CONFIG_RTC_HCTOSYS is not set
 CONFIG_EXT2_FS=y
@@ -133,8 +133,8 @@ CONFIG_NFS_V4=y
 CONFIG_ROOT_NFS=y
 CONFIG_NFS_USE_KERNEL_DNS=y
 CONFIG_NEW_LEDS=y
-CONFIG_LEDS_CLASS=m
-CONFIG_LEDS_GPIO=m
+CONFIG_LEDS_CLASS=y
+CONFIG_LEDS_GPIO=y
 CONFIG_LEDS_TRIGGERS=y
 CONFIG_LEDS_TRIGGER_TIMER=y
 CONFIG_LEDS_TRIGGER_CPU=y
-- 
1.9.1

