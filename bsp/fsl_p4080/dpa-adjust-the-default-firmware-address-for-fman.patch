From 0c5c73def7de2cf561e90ab191d8f36a26c7ba6c Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Wed, 28 Apr 2010 19:11:24 +0800
Subject: [PATCH 148/148] dpa: adjust the default firmware address for fman

Since the u-boot works in 36bit mode by default, the flash
use a different physical address with 32bit mode. So adjust
the fman firmware default address according to this change.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../kernel/2.6/wrappers/Peripherals/FM/lnxwrp_fm.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/dpa/NetCommSw/user/env/linux/kernel/2.6/wrappers/Peripherals/FM/lnxwrp_fm.c b/drivers/net/dpa/NetCommSw/user/env/linux/kernel/2.6/wrappers/Peripherals/FM/lnxwrp_fm.c
index 0e71d62..fff367d 100644
--- a/drivers/net/dpa/NetCommSw/user/env/linux/kernel/2.6/wrappers/Peripherals/FM/lnxwrp_fm.c
+++ b/drivers/net/dpa/NetCommSw/user/env/linux/kernel/2.6/wrappers/Peripherals/FM/lnxwrp_fm.c
@@ -692,10 +692,10 @@ typedef _Packed struct {
 
 #ifndef NO_OF_SUPPORT
 /* The default address for the Fman microcode in flash. Having a default
- * allows older systems to continue functioning.  0xEF000000 is the address
+ * allows older systems to continue functioning.  0xFEF000000 is the address
  * where the firmware is normally on a P4080DS.
  */
-static phys_addr_t P4080_UCAddr = 0xef000000;
+static phys_addr_t P4080_UCAddr = 0xfef000000;
 
 
 /**
-- 
1.6.5.2

