From 1f09a8e39c13d252d6d3beb09cd5ad5e0c29134a Mon Sep 17 00:00:00 2001
From: Moti Bar <motib@freescale.com>
Date: Tue, 3 Nov 2009 15:00:36 +0200
Subject: [PATCH] Removing unnecessary or invalid SGMII ERRATA macros

During BUP, we added workaround for SGMII to set it to 100M during
init and after enabling the PHY, we changed it to 1000M.
This workaround seems to be invalid/unnecessary now.

Signed-off-by: Moti Bar <motib@freescale.com>
[Kevin: Original patch taken from Freescale p4080 SDK 2.0 ISO image.
Apply cleanly to kernel 2.6.27]
Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../net/dpa/NetCommSw/Peripherals/FM/MAC/dtsec.c   |    8 --------
 .../inc/integrations/P4080/part_integration_ext.h  |    1 -
 2 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/drivers/net/dpa/NetCommSw/Peripherals/FM/MAC/dtsec.c b/drivers/net/dpa/NetCommSw/Peripherals/FM/MAC/dtsec.c
index 11a6abe..f1e12e7 100644
--- a/drivers/net/dpa/NetCommSw/Peripherals/FM/MAC/dtsec.c
+++ b/drivers/net/dpa/NetCommSw/Peripherals/FM/MAC/dtsec.c
@@ -429,10 +429,6 @@ static t_Error DtsecInit(t_Handle h_Dtsec)
             tmpReg32 |= ECNTRL_RPM;
        if((p_Dtsec->enetMode == e_ENET_MODE_RGMII_100) || (p_Dtsec->enetMode == e_ENET_MODE_SGMII_100))
             tmpReg32 |= ECNTRL_R100M;
-#ifdef FM_ENET_SGMII_1000_ERRATA
-       if(p_Dtsec->enetMode == e_ENET_MODE_SGMII_1000)
-            tmpReg32 |= ECNTRL_R100M;
-#endif /* FM_ENET_SGMII_1000_ERRATA */
     }
 
     if (p_DtsecDriverParam->autoZeroCounters)
@@ -568,10 +564,6 @@ static t_Error DtsecInit(t_Handle h_Dtsec)
         (p_Dtsec->enetMode == e_ENET_MODE_SGMII_10) ||
         (p_Dtsec->enetMode == e_ENET_MODE_SGMII_100))
             tmpReg32 |= MACCFG2_NIBBLE_MODE;
-#ifdef FM_ENET_SGMII_1000_ERRATA
-    else if(p_Dtsec->enetMode == e_ENET_MODE_SGMII_1000)
-            tmpReg32 |= MACCFG2_NIBBLE_MODE;
-#endif /* FM_ENET_SGMII_1000_ERRATA */
     else if((p_Dtsec->enetMode == e_ENET_MODE_RGMII_1000) ||
         (p_Dtsec->enetMode == e_ENET_MODE_SGMII_1000)||
         (p_Dtsec->enetMode == e_ENET_MODE_GMII_1000))
diff --git a/drivers/net/dpa/NetCommSw/inc/integrations/P4080/part_integration_ext.h b/drivers/net/dpa/NetCommSw/inc/integrations/P4080/part_integration_ext.h
index cb3556d..24ecc21 100644
--- a/drivers/net/dpa/NetCommSw/inc/integrations/P4080/part_integration_ext.h
+++ b/drivers/net/dpa/NetCommSw/inc/integrations/P4080/part_integration_ext.h
@@ -536,7 +536,6 @@ typedef enum e_FmIntrType {
 /* FM erratas */
 #define FM_OP_PARTITION_ERRATA
 #ifndef SIMULATOR
-#define FM_ENET_SGMII_1000_ERRATA
 #define FM_ENET_PAUSE_FRM_ERRATA
 #define FM_MURAM_ERR_IRQ_ERRATA
 #define FM_PORT_SYNC_ERRATA
-- 
1.6.0.4

