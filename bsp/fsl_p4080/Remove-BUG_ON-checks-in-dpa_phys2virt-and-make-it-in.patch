From 602d65711d52e4eb517c47ef6dbed3d176561217 Mon Sep 17 00:00:00 2001
From: Kumar Gala <galak@kernel.crashing.org>
Date: Tue, 9 Feb 2010 10:00:25 -0600
Subject: [PATCH] Remove BUG_ON checks in dpa_phys2virt and make it inline

[Kevin: Original patch taken form Freescale moto-patches-2.tar.gz tar
package, apply cleanly to kernel 2.6.27]
Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/dpa/dpa.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/net/dpa/dpa.c b/drivers/net/dpa/dpa.c
index 5936f4e..64b7431 100644
--- a/drivers/net/dpa/dpa.c
+++ b/drivers/net/dpa/dpa.c
@@ -456,9 +456,10 @@ _return_bman_free_pool:
 	return _errno;
 }
 
-static void * __must_check __attribute__((nonnull))
+static inline void * __must_check __attribute__((nonnull))
 dpa_phys2virt(const struct dpa_bp *dpa_bp, const struct bm_buffer *bmb)
 {
+#if 0
 #ifdef CONFIG_BUG
 	const struct bman_pool_params	*bp_params;
 
@@ -466,6 +467,7 @@ dpa_phys2virt(const struct dpa_bp *dpa_bp, const struct bm_buffer *bmb)
 #endif
 	BUG_ON(bp_params->cb_ctx != dpa_bp);
 	BUG_ON(bp_params->bpid != bmb->bpid);
+#endif
 
 	return dpa_bp->vaddr + (bmb->lo - dpa_bp->paddr);
 }
-- 
1.6.0.4

