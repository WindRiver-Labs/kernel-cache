From 8dae1dfb34ef49d700b6fc6c0a02185355db3940 Mon Sep 17 00:00:00 2001
From: Andrew Liu <shengping.liu@windriver.com>
Date: Tue, 3 Aug 2010 19:09:00 +0800
Subject: [PATCH] p4080: make it possible to compile without CONFIG_NET

From FSL vendor SDK 2.x.

Signed-off-by: Fredrik Markstrom <fredrik.markstrom@gmail.com>
Integrated-by: Andrew Liu <shengping.liu@windriver.com>
---
 arch/powerpc/platforms/85xx/p4080_ds.c     |    2 ++
 arch/powerpc/platforms/85xx/p4080ds_mdio.c |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/p4080_ds.c b/arch/powerpc/platforms/85xx/p4080_ds.c
index 4b8a09b..269c724 100644
--- a/arch/powerpc/platforms/85xx/p4080_ds.c
+++ b/arch/powerpc/platforms/85xx/p4080_ds.c
@@ -36,6 +36,7 @@
 static int primary_phb_addr;
 #endif
 
+#ifdef CONFIG_NET
 int vsc824x_add_skew(struct phy_device *phydev);
 #define PHY_ID_VSC8244                  0x000fc6c0
 static int __init board_fixups(void)
@@ -45,6 +46,7 @@ static int __init board_fixups(void)
 	return 0;
 }
 machine_device_initcall(p4080_ds, board_fixups);
+#endif
 
 static int __init declare_of_platform_devices(void)
 {
diff --git a/arch/powerpc/platforms/85xx/p4080ds_mdio.c b/arch/powerpc/platforms/85xx/p4080ds_mdio.c
index 96e6e68..fb63334 100644
--- a/arch/powerpc/platforms/85xx/p4080ds_mdio.c
+++ b/arch/powerpc/platforms/85xx/p4080ds_mdio.c
@@ -13,6 +13,7 @@
  *
  */
 
+#ifdef CONFIG_NET
 #include <linux/kernel.h>
 #include <linux/string.h>
 #include <linux/errno.h>
@@ -274,3 +275,4 @@ void p4080ds_mdio_exit(void)
 }
 subsys_initcall_sync(p4080ds_mdio_init);
 module_exit(p4080ds_mdio_exit);
+#endif /* CONFIG_NET */
-- 
1.6.0.3

