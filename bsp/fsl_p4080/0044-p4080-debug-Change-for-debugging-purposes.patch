From 9067956a9598725a37256b4d950164c63c3cd679 Mon Sep 17 00:00:00 2001
From: Andy Fleming <afleming@freescale.com>
Date: Sun, 9 Aug 2009 13:00:35 -0500
Subject: [PATCH 44/77] p4080 debug: Change for debugging purposes

Extracted from P4080_WRlinux-rc1(/2)_20090904.iso vendor drop

[ Only formatting changes were made. There was no SOB in the original patch,
  nor long log ]
Signed-off-by: Greg Moffatt <greg.moffatt@windriver.com>
---
 arch/powerpc/kernel/traps.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/kernel/traps.c b/arch/powerpc/kernel/traps.c
index f28a44b..5b01531 100644
--- a/arch/powerpc/kernel/traps.c
+++ b/arch/powerpc/kernel/traps.c
@@ -320,7 +320,7 @@ static inline int check_io_access(struct pt_regs *regs)
 #ifndef CONFIG_FSL_BOOKE
 #define get_mc_reason(regs)	((regs)->dsisr)
 #else
-#define get_mc_reason(regs)	(mfspr(SPRN_MCSR) & MCSR_MASK)
+#define get_mc_reason(regs)	(mfspr(SPRN_MCSR))
 #endif
 #define REASON_FP		ESR_FP
 #define REASON_ILLEGAL		(ESR_PIL | ESR_PUO)
-- 
1.6.5.2

