From 0592b97e43260e05024b3de7f079b0303963c7cf Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Tue, 23 Feb 2010 15:14:59 -0600
Subject: [PATCH] P4080/DPA: Use only one BP with more large buffers

This is a workaround to avoid FMan creating SG frames

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
[Kevin: Original patch taken from Freescale moto-patches-3.tgz
tar package, just some minor context change in order to port
to kernel 2.6.27]
Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/dpa/dpa.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/dpa/dpa.c b/drivers/net/dpa/dpa.c
index f3ee19f..f2ee83b 100644
--- a/drivers/net/dpa/dpa.c
+++ b/drivers/net/dpa/dpa.c
@@ -64,7 +64,7 @@
 #define ARRAY2_SIZE(arr)	(ARRAY_SIZE(arr) * ARRAY_SIZE((arr)[0]))
 
 #define DPA_NETIF_FEATURES	0
-#define DEFAULT_COUNT	64
+#define DEFAULT_COUNT		256
 #define DPA_MAX_TX_BACKLOG	512
 
 #define DPA_DESCRIPTION "FSL DPA Ethernet driver"
@@ -138,7 +138,7 @@ struct dpa_bp {
 
 static const size_t dpa_bp_size[] __devinitconst = {
 	/* Keep these sorted */
-	DPA_BP_SIZE(128), DPA_BP_SIZE(512), DPA_BP_SIZE(1536)
+	DPA_BP_SIZE(1536)
 };
 
 static struct dpa_bp *dpa_bp_array[64];
-- 
1.6.0.4

