From e8ca60a8d7eb375be06da86fc0dca8c8f1dca8d0 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@freescale.com>
Date: Thu, 11 Feb 2010 13:32:38 -0600
Subject: [PATCH] P4080/DPA: We don't need/use the FMan KG hash results

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
[Kevin: Original patch taken from Freescale p4080 SDK 2.0.3 tar
package, apply cleanly to kernel 2.6.27]
Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/dpa/dpa.c |   10 ++++++++--
 1 files changed, 8 insertions(+), 2 deletions(-)

diff --git a/drivers/net/dpa/dpa.c b/drivers/net/dpa/dpa.c
index 682aef5..8ccb6f6 100644
--- a/drivers/net/dpa/dpa.c
+++ b/drivers/net/dpa/dpa.c
@@ -2256,8 +2256,12 @@ dpa_init_probe(struct of_device *_of_dev)
 	rx_port_param.defq	= ingress_fqids[RX][1];
 	tx_port_param.defq	= ingress_fqids[TX][1];
 
-	rx_port_param.priv_data_size	= tx_port_param.priv_data_size	= 32;
-	rx_port_param.parse_results	= tx_port_param.parse_results	= true;
+	rx_port_param.priv_data_size	=
+		tx_port_param.priv_data_size	= 32;
+	rx_port_param.parse_results	=
+		tx_port_param.parse_results	= true;
+	rx_port_param.hash_results	=
+		tx_port_param.hash_results	= false;
 
 	fm_set_rx_port_params(mac_dev->port_dev[RX], &rx_port_param);
 
@@ -2774,6 +2778,8 @@ dpa_probe(struct of_device *_of_dev)
 			 tx_port_param.priv_data_size = 32;
 		rx_port_param.parse_results =
 			tx_port_param.parse_results = true;
+		rx_port_param.hash_results	=
+			tx_port_param.hash_results	= false;
 
 		fm_set_rx_port_params(priv->mac_dev->port_dev[RX],
 			&rx_port_param);
-- 
1.6.0.4

