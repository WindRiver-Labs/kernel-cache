From a541c2e751006cfd302e554d97ccf7ec074a9a52 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Wed, 3 Nov 2010 00:15:30 -0700
Subject: [PATCH 1/2] ppc-mc/e500mc: improve law configuration process

Looks the law register offset is different platform so define one variable
for this given case. And it's safe to invalid those address space which are
same as PCIE space so provide the newbie to check if we reuse the same space
then invalid them.

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/platforms/85xx/wrhv_p4080_ds.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/wrhv_p4080_ds.c b/arch/powerpc/platforms/85xx/wrhv_p4080_ds.c
index 02215cf..84a168a 100644
--- a/arch/powerpc/platforms/85xx/wrhv_p4080_ds.c
+++ b/arch/powerpc/platforms/85xx/wrhv_p4080_ds.c
@@ -37,6 +37,7 @@ extern struct vb_config *wr_config;
 extern struct vb_status *wr_status;
 extern struct vb_control *wr_control;
 extern int wrhv_set_law_base(int index, unsigned long long addr);
+extern unsigned long long wrhv_get_law_base(int index);
 extern int wrhv_set_law_attr(int index, unsigned int attr);
 extern int wrhv_get_law_attr(int index);
 
@@ -322,6 +323,7 @@ define_machine(p4080_ds) {
 	.init_early		= p4080_init_early,
 	.power_save		= wrhv_power_save,
 	.set_law_base		= wrhv_set_law_base,
+	.get_law_base           = wrhv_get_law_base,
 	.set_law_attr		= wrhv_set_law_attr,
 	.get_law_attr		= wrhv_get_law_attr,
 	.get_mdio_bus		= p4080_get_vb_mdio_bus,
-- 
1.6.5.2

