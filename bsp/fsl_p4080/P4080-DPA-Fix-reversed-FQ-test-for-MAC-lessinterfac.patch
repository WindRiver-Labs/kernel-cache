From 378108632f18092bb584837e8007aa5aa43297f5 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Tue, 19 Jan 2010 15:15:00 +0800
Subject: [PATCH] P4080/DPA: Fix reversed FQ test for MAC-lessinterfaces

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
[Kevin: Original patch taken from Freescale p4080 SDK 2.0.2 tar
package, apply cleanly to kernel 2.6.27]
Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/dpa/dpa.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/dpa/dpa.c b/drivers/net/dpa/dpa.c
index 6a46874..36f60e4 100644
--- a/drivers/net/dpa/dpa.c
+++ b/drivers/net/dpa/dpa.c
@@ -2545,7 +2545,7 @@ dpa_probe(struct of_device *_of_dev)
 		/* For now, stick to the idea that we have to have
 		 * static declarations on MAC-less devices */
 		for (i = 0; i < ARRAY_SIZE(fqids); i++)
-			if (unlikely(fqids[i])) {
+			if (unlikely(fqids[i] == NULL)) {
 				cpu_dev_err(dev, "%s:%hu:%s(): "
 			     "MAC-less interfaces require %s FQ declarations\n",
 			      __file__, __LINE__, __func__, rtx[i]);
-- 
1.6.0.4

