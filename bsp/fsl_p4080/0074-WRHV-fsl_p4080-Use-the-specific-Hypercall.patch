From d46cee9822abd8bba7ff3a9eb4fb75b6ed298bd7 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Fri, 4 Dec 2009 22:58:32 -0800
Subject: [PATCH 74/77] WRHV/fsl_p4080: Use the specific Hypercall

For E500mc sc with level 1 should be used as the hypercall.

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/kernel/head_wrhv.S |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/kernel/head_wrhv.S b/arch/powerpc/kernel/head_wrhv.S
index 6654220..29f1018 100644
--- a/arch/powerpc/kernel/head_wrhv.S
+++ b/arch/powerpc/kernel/head_wrhv.S
@@ -163,7 +163,11 @@ _ENTRY(__early_start)
 	ori	r3,r3,VBI_HYIOCTL_EXCBASE@l
 	lis	r4,_start@h
 	ori	r4,r4,_start@l
+#ifdef	CONFIG_PPC85xx_VT_MODE
+	sc 	1
+#else
 	sc
+#endif
 
 	/* stack */
 	lis	r1,init_thread_union@h
-- 
1.6.5.2

