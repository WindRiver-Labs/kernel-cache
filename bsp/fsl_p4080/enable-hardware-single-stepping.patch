From 5b6168f1d9aebf635881e9ffec4411b9d22d6e33 Mon Sep 17 00:00:00 2001
From: Thomas Tai <thomas.tai@windriver.com>
Date: Tue, 21 Sep 2010 11:57:05 -0700
Subject: [PATCH 1/3] enable hardware single stepping

Both e500 and e500mc hypervisor support hardware single stepping,
enable ptrace to make use of this feature.

Signed-off-by: Thomas Tai <thomas.tai@windriver.com>
---
 arch/powerpc/include/asm/ptrace.h |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/arch/powerpc/include/asm/ptrace.h b/arch/powerpc/include/asm/ptrace.h
index c248b23..77bbc68 100644
--- a/arch/powerpc/include/asm/ptrace.h
+++ b/arch/powerpc/include/asm/ptrace.h
@@ -133,16 +133,7 @@ do {									      \
 } while (0)
 #endif /* __powerpc64__ */
 
-#ifndef CONFIG_PARAVIRT
 #define arch_has_single_step()	(1)
-#else
-#ifdef CONFIG_PPC_E500MC
-#define arch_has_single_step()	(0)
-#else
-/* E500 hypervisor has hardware debug register for GuestOS */
-#define arch_has_single_step()	(1)
-#endif
-#endif
 #define arch_has_block_step()	(!cpu_has_feature(CPU_FTR_601))
 #define ARCH_HAS_USER_SINGLE_STEP_INFO
 
-- 
1.6.5.2

