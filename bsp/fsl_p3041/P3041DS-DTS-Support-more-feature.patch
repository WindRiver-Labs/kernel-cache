From f3f60ac8c463edf37431b48ea508267577e2d890 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Tue, 1 Nov 2011 13:16:22 +0800
Subject: [PATCH 06/18] P3041DS:DTS:Support more feature

The patch updates P3041ds.dts with following change:

1.Fix incorrect property description in sdhci node.
2.Add nodes describe zl6001 sensor in i2c bus.
3.Add commentary about device mode in usb1 node.
4.Add partition information to NOR flash.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p3041ds.dts |   68 +++++++++++++++++++++++++++++++++++--
 1 file changed, 66 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 3239f21..c3ae7b8 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -713,7 +713,7 @@
 			compatible = "fsl,p3041-esdhc", "fsl,esdhc";
 			reg = <0x114000 0x1000>;
 			interrupts = <48 2 0 0>;
-			sdhci,auto-cmd12;
+			fsl,sdhci-auto-cmd12;
 			clock-frequency = <0>;
 		};
 
@@ -725,6 +725,22 @@
 			reg = <0x118000 0x100>;
 			interrupts = <38 2 0 0>;
 			dfsrr;
+			zl6100@21{
+				compatible = "intersil,zl6100";
+				reg = <0x21>;
+			};
+			zl6100@22{
+				compatible = "intersil,zl6100";
+				reg = <0x22>;
+			};
+			zl6100@23{
+				compatible = "intersil,zl6100";
+				reg = <0x23>;
+			};
+			zl6100@24{
+				compatible = "intersil,zl6100";
+				reg = <0x24>;
+			};
 		};
 
 		i2c@118100 {
@@ -833,6 +849,7 @@
 			#size-cells = <0>;
 			interrupts = <45 0x2 0 0>;
 			dr_mode = "host";
+			/*dr_mode = "peripheral";*/
 			phy_type = "utmi";
 		};
 
@@ -1346,8 +1363,55 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
-		};
+			#size-cells = <1>;
+			#address-cells = <1>;
 
+			partition@0 {
+				label = "rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "kernel";
+				reg = <0x20000 0x500000>;
+			};
+			partition@520000 {
+				label = "dtb";
+				reg = <0x520000 0x20000>;
+			};
+			partition@540000 {
+				label = "fs1";
+				reg = <0x540000 0x3a40000>;
+			};
+			partition@3f80000 {
+				label = "alt-u-boot";
+				reg = <0x3f80000 0x80000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "alt-rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "fs2";
+				reg = <0x4020000  0x2fe0000>;
+			};
+			partition@7000000 {
+				label = "fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "fs3";
+				reg = <0x7020000  0xf60000>;
+			};
+			partition@7f80000 {
+				label = "u-boot";
+				reg = <0x7f80000 0x80000>;
+				read-only;
+			};
+		};
 		nand@2,0 {
 			#address-cells = <1>;
 			#size-cells = <1>;
-- 
1.7.9.7

