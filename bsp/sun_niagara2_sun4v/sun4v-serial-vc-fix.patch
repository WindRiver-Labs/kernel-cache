From 4c7054823cac18f9116e35aef8d6575c2d695907 Mon Sep 17 00:00:00 2001
From: Hong H. Pham <hong.pham@windriver.com>
Date: Wed, 7 Jan 2009 14:33:35 -0700
Subject: [PATCH] sun4v serial vc fix

Initialization fix for the SUN4V virtual channel driver.

Signed-off-by: Boban Petrovic <boban.petrovic@windriver.com>
Signed-off-by: Hong H. Pham <hong.pham@windriver.com>
Signed-off-by: Chris Torek <chris.torek@windriver.com>
---
 drivers/serial/sunvc.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/serial/sunvc.c b/drivers/serial/sunvc.c
index 6ebe224..bb0443a 100644
--- a/drivers/serial/sunvc.c
+++ b/drivers/serial/sunvc.c
@@ -561,6 +561,7 @@ static int __devinit vldc_probe(struct vio_dev *vdev, const struct vio_device_id
 	uart_port->uartclk = 0;
 	uart_port->membase = 0;
 	uart_port->irq = 0;
+	uart_port->dev = &vdev->dev;
 
 	err = sunserial_register_minors(&vldc_uart_driver_reg, 1);
 	if (err) {
-- 
1.6.0.3

