From 5dbe868be2875ef7f34a4e647ed88fa032bf6bcf Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Fri, 6 Sep 2013 11:59:08 +0800
Subject: [PATCH 54/60] media: video: function interface fixes for pxa168

This patch is used to update function interface to cater
for WRLinux kernel 3.4.x.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/media/video/pxa168_overlay.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/drivers/media/video/pxa168_overlay.c b/drivers/media/video/pxa168_overlay.c
index 19a8b12..1f16b21 100644
--- a/drivers/media/video/pxa168_overlay.c
+++ b/drivers/media/video/pxa168_overlay.c
@@ -830,9 +830,9 @@ int pxa168_ovly_set_colorkeyalpha(struct pxa168_overlay *ovly)
 /* ------------------------------------------------------------------
 * Video buffer call backs
 * ------------------------------------------------------------------*/
-static int queue_setup(struct vb2_queue *vq, unsigned int *nbuffers,
-		unsigned int *nplanes, unsigned long sizes[],
-		void *alloc_ctxs[])
+static int queue_setup(struct vb2_queue *vq, const struct v4l2_format *fmt,
+		unsigned int *nbuffers, unsigned int *nplanes,
+		unsigned int sizes[], void *alloc_ctxs[])
 {
 	struct pxa168_overlay *ovly = vb2_get_drv_priv(vq);
 	u32 size;
@@ -942,7 +942,8 @@ static void buffer_cleanup(struct vb2_buffer *vb)
 	}
 	spin_unlock_irqrestore(&ovly->vbq_lock, flags);
 }
-static int start_streaming(struct vb2_queue *vq)
+
+static int start_streaming(struct vb2_queue *vq, unsigned int count)
 {
 	struct pxa168_overlay *ovly = vb2_get_drv_priv(vq);
 
-- 
1.7.5.4

