From 7210d17cf57dba3dac68920cf7ecfd3158951801 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 29 Nov 2013 18:06:26 +0800
Subject: [PATCH] ACP34xx:update node name in dts to fit uboot.

Update device node name in dts to fit uboot 4.8.1.81:

ACP344x:update node name for memory device.

ACP342x:update node name for i2c & spi devices.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/ACP342x.dts   |    9 ++++-----
 arch/powerpc/boot/dts/ACP344xV2.dts |   14 ++++++++++----
 2 files changed, 14 insertions(+), 9 deletions(-)

diff --git a/arch/powerpc/boot/dts/ACP342x.dts b/arch/powerpc/boot/dts/ACP342x.dts
index 040448f..bf1d2a5 100644
--- a/arch/powerpc/boot/dts/ACP342x.dts
+++ b/arch/powerpc/boot/dts/ACP342x.dts
@@ -27,7 +27,7 @@
 		serial0 = &UART0;
 		serial1 = &UART1;
 		ethernet0 = &FEMAC;
-		rapidio0  = &SRIO0;
+		rapidio0 = &rio0;
 	};
 
 	cpus {
@@ -142,7 +142,7 @@
 				interrupts = <31 2>;
 			};
 
-			I2C: i2c0 {
+			I2C: i2c@00403000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
 				compatible = "acp-i2c";
@@ -157,7 +157,7 @@
 				};
 			};
 
-			SSP: ssp0 {
+			SSP: ssp@00402000 {
 				#address-cells = <1>;
 				#size-cells = <0>;
 				cell-index = <0>;
@@ -438,10 +438,9 @@
 		>;
 	};
 
-	SRIO0: srio0 {
+	rio0: rapidio@f0020000 {
 		compatible = "acp,rapidio-delta";
                 device_type = "rapidio";
-		enabled = <0>;
 		#size = <0>;    /* 0 = (256, small system)
 				 * 1 = (65536, large system) */
                                 /* >=0 for enum; < 0 for disc */
diff --git a/arch/powerpc/boot/dts/ACP344xV2.dts b/arch/powerpc/boot/dts/ACP344xV2.dts
index 882a4b3..d5e4c9c 100644
--- a/arch/powerpc/boot/dts/ACP344xV2.dts
+++ b/arch/powerpc/boot/dts/ACP344xV2.dts
@@ -101,10 +101,16 @@
                 };
         };
 
-        memory {
-                device_type = "memory";
-                reg = <0x00000000 0x00000000 0x00000000>; // filled in by U-Boot
-        };
+
+	memory@0 {
+		device_type = "memory";
+		reg = <0x00000000 0x00000000 0x00000000>; // filled in by U-Boot
+	};
+
+	memory@80000000 {
+		device_type = "memory";
+		reg = <0x00000000 0x00000000 0x00000000>; // filled in by U-Boot
+	};
 
         MPIC: interrupt-controller {
                 compatible = "chrp,open-pic";
-- 
1.7.5.4

