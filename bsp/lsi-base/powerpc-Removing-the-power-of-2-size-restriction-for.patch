From 965f4cd70dcea475d5c7098d98564a426328430a Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Wed, 19 Feb 2014 14:38:43 +0800
Subject: [PATCH] powerpc: Removing the power of 2 size restriction for PCIe

the patch come from:
https://github.com/lsigithub/lsi_axxia_yocto_public/commit/95228e090cc30899f180e35355139d7daddeacd0

Removing the power of 2 size restriction for PCIe inbound mapping in
... LSI PCIe

driver

Signed-off-by: SangeethaRao <sangeetha.rao@lsi.com>
Signed-off-by: Li Wang <li.wang@windriver.com>
---
 arch/powerpc/sysdev/ppc4xx_pci.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/sysdev/ppc4xx_pci.c b/arch/powerpc/sysdev/ppc4xx_pci.c
index f2f4ac1..09befb2 100644
--- a/arch/powerpc/sysdev/ppc4xx_pci.c
+++ b/arch/powerpc/sysdev/ppc4xx_pci.c
@@ -214,9 +214,8 @@ static int __init ppc4xx_parse_dma_ranges(struct pci_controller *hose,
 		return -ENXIO;
 	}
 
-	/* Check we are a power of 2 size and that base is a multiple of size*/
-	if ((size & (size - 1)) != 0  ||
-	    (res->start & (size - 1)) != 0) {
+	/* Check that base is a multiple of size*/
+	if ((res->start & (size - 1)) != 0) {
 		printk(KERN_ERR "%s: dma-ranges unaligned\n",
 		       hose->dn->full_name);
 		return -ENXIO;
-- 
1.7.5.4

