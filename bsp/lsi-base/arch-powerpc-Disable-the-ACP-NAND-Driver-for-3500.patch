From f9025672b3129050f5719ebce65b234ffdb3d39c Mon Sep 17 00:00:00 2001
From: John Jacques <john.jacques@lsi.com>
Date: Tue, 11 Mar 2014 09:20:51 -0500
Subject: [PATCH 8/9] arch/powerpc: Disable the ACP NAND Driver for 3500

git.yoctoproject.org/git/linux-yocto-3.10
commit c6f030f1be690dbef9eb895e2b3f6c8288bdf501 standard/axxia/base.

Signed-off-by: John Jacques <john.jacques@lsi.com>
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/mtd/nand/lsi_acp_nand.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/drivers/mtd/nand/lsi_acp_nand.c b/drivers/mtd/nand/lsi_acp_nand.c
index 79f3e3b..4461f66 100644
--- a/drivers/mtd/nand/lsi_acp_nand.c
+++ b/drivers/mtd/nand/lsi_acp_nand.c
@@ -3471,6 +3471,13 @@ lsi_nand_init(void)
 	static const char *part_probe_types[]
 	= { "cmdlinepart", "ofpart", NULL };
 
+	np = of_find_compatible_node(NULL, NULL, "lsi,acp3500");
+
+	if (NULL != np) {
+		printk(KERN_ERR "NAND Support is Not Yet Available on 3500\n");
+		return -1;
+	}
+
 	memset(&ppdata, 0, sizeof(ppdata));
 
 	np = of_find_node_by_type(np, "nand");
-- 
1.7.5.4

