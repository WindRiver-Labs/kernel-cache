From ae8cb37aa979d7aa5392935f530e8b3f2c0cf09a Mon Sep 17 00:00:00 2001
From: Ming Liu <ming.liu@windriver.com>
Date: Fri, 5 Dec 2014 14:02:07 +0800
Subject: [PATCH 1/2] Revert "lsi-dma32: tune the modifier calculation for LSI
 acp"

This reverts commit 9c1a929b5b561c465d6b2588f504b1a320cd0f40.
---
 drivers/dma/lsi-dma32.c |   19 +------------------
 1 files changed, 1 insertions(+), 18 deletions(-)

diff --git a/drivers/dma/lsi-dma32.c b/drivers/dma/lsi-dma32.c
index 9f136d7..d62af64 100644
--- a/drivers/dma/lsi-dma32.c
+++ b/drivers/dma/lsi-dma32.c
@@ -533,23 +533,6 @@ gpdma_prep_memcpy(struct dma_chan *chan,
 	}
 
 	/* Maximize memory access width based on job src, dst and length */
-#ifdef CONFIG_ACP
-	access_size = 5;
-	if (!(size % 16)) {
-		src_size = 16;
-		access_size |= (4 << 3);
-	} else if (!(size % 8)) {
-		src_size = 8;
-		access_size |= (3 << 3);
-	} else if (!(size % 4)) {
-		src_size = 4;
-		access_size |= (2 << 3);
-	} else if (!(size % 2)) {
-		src_size = 2;
-		access_size |= (1 << 3);
-	} else
-		src_size = 1;
-#else
 	switch (ffs((u32)dst | (u32)src | size)) {
 	case 1:
 		src_size = 1;
@@ -572,7 +555,7 @@ gpdma_prep_memcpy(struct dma_chan *chan,
 		access_size = (4 << 3);
 		break;
 	}
-#endif
+
 	ch_dbg(dmac, "dst=%#llx src=%#llx size=%u mod=%d\n",
 		dst, src, size, src_size);
 	x_count = (size/src_size) - 1;
-- 
1.7.5.4

