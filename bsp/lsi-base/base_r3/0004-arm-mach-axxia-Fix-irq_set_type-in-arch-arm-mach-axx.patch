From f599297c2e0425e1153d9913de0f2b07c903adab Mon Sep 17 00:00:00 2001
From: David Mercado <david.mercado@windriver.com>
Date: Tue, 18 Jun 2013 10:27:49 -0400
Subject: [PATCH 04/75] arm/mach-axxia: Fix irq_set_type() in
 arch/arm/mach-axxia/axxia-gic.c

Fix error in gic_set_type(). Previously calculating cpu to send to with (i / 4), where i is a cluster number
between 0 and 3. Dividing by 4 (4 cores per cluster) is wrong, as this result will always be 0. Instead,
replace with (i *4), so result is 0, 4, 8, or 12 (first cpu of each cluster).

Signed-off-by: David Mercado <david.mercado@windriver.com>
---
 arch/arm/mach-axxia/axxia-gic.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-axxia/axxia-gic.c b/arch/arm/mach-axxia/axxia-gic.c
index 2c2dfba..c074f6c 100644
--- a/arch/arm/mach-axxia/axxia-gic.c
+++ b/arch/arm/mach-axxia/axxia-gic.c
@@ -344,7 +344,7 @@ static int gic_set_type(struct irq_data *d, unsigned int type)
 		 * smp_call_function_single().
 		 */
 		local_irq_enable();
-		smp_call_function_single((i/4),
+		smp_call_function_single((i * 4),
 			 gic_set_type_wrapper, &data, 1);
 		local_irq_disable();
 		if (data.status != 0)
-- 
1.7.5.4

