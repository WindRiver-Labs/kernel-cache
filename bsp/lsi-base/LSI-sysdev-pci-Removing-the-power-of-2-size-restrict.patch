From feb1f3fd8c3edfbcdecae3c8ee8599a32fb94b4d Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Tue, 14 Oct 2014 14:43:32 +0800
Subject: [PATCH 4/4] LSI sysdev/pci: Removing the power of 2 size restriction

the patch comes from:
git://git.yoctoproject.org/linux-yocto-3.4 of branch standard/axxia/base
upstream b0cf7ecb50ab58b424f7ed776d4fb4d82c468866 commit

This patch removes the power of 2 size restriction
for PCIe inbound mapping in LSI PCIe driver

Signed-off-by: SangeethaRao <sangeetha.rao@lsi.com>
Signed-off-by: Li Wang <li.wang@windriver.com>
---
 arch/powerpc/sysdev/lsi_pci.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/sysdev/lsi_pci.c b/arch/powerpc/sysdev/lsi_pci.c
index 07b3448..402017b 100644
--- a/arch/powerpc/sysdev/lsi_pci.c
+++ b/arch/powerpc/sysdev/lsi_pci.c
@@ -180,9 +180,8 @@ static int __init acp_parse_dma_ranges(struct pci_controller *hose,
 		return -ENXIO;
 	}
 
-	/* Check we are a power of 2 size and that base is a multiple of size*/
-	if ((size & (size - 1)) != 0  ||
-	    (res->start & (size - 1)) != 0) {
+	/* Check that base is a multiple of size */
+	if ((res->start & (size - 1)) != 0) {
 		pr_err("%s: dma-ranges unaligned\n",
 		       hose->dn->full_name);
 		return -ENXIO;
-- 
1.7.5.4

