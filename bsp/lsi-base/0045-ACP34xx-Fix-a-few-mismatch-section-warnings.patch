From 7ed8b9a523da3f30335c6a7446052ab2b0c13ffc Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Sat, 27 Apr 2013 14:11:17 +0800
Subject: [PATCH 45/76] ACP34xx:Fix a few mismatch section warnings

Fix a few mismatch section warnings introduced by this BSP, includes:

WARNING: vmlinux.o(.text+0x228): Section mismatch in reference from the variable start_secondary_47x to the function .cpuinit.text:mmu_init_secondary()
The function start_secondary_47x() references
the function __cpuinit mmu_init_secondary().
This is often because start_secondary_47x lacks a __cpuinit
annotation or the annotation of mmu_init_secondary is wrong.

WARNING: vmlinux.o(.text+0x24c): Section mismatch in reference from the variable start_secondary_47x to the function .devinit.text:start_secondary()
The function start_secondary_47x() references
the function __devinit start_secondary().
This is often because start_secondary_47x lacks a __devinit
annotation or the annotation of start_secondary is wrong.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/kernel/head_44x.S |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/kernel/head_44x.S b/arch/powerpc/kernel/head_44x.S
index e5ce673..cb9b539 100644
--- a/arch/powerpc/kernel/head_44x.S
+++ b/arch/powerpc/kernel/head_44x.S
@@ -1038,9 +1038,9 @@ END_FTR_SECTION_IFSET(CPU_FTR_476_DD2)
 	blr
 
 #ifdef CONFIG_SMP
-
 /* Entry point for secondary 47x processors */
-_GLOBAL(start_secondary_47x)
+__CPUINIT
+_ENTRY(start_secondary_47x)
         mr      r24,r3          /* CPU number */
 
 	bl	init_cpu_state
@@ -1077,7 +1077,7 @@ _GLOBAL(start_secondary_47x)
 	mtspr	SPRN_SPRG3,r4
 
 	b	start_secondary
-
+__FINIT
 #endif /* CONFIG_SMP */
 
 /*
-- 
1.7.0.5

