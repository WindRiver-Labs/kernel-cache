From d15731ed48a80810f28b043dcbf7bf370737a7c1 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Mon, 9 Jun 2014 18:17:08 +0800
Subject: [PATCH] PPC476:Add PPC476 x2 & PPC476 FPE support for kexec

Add kexec support for PPC476 x2 & PPC476 FPE processors.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/kernel/misc_32.S |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/kernel/misc_32.S b/arch/powerpc/kernel/misc_32.S
index 6222826..f60c075 100644
--- a/arch/powerpc/kernel/misc_32.S
+++ b/arch/powerpc/kernel/misc_32.S
@@ -754,6 +754,10 @@ relocate_new_kernel:
 	srwi	r3,r3,16
 	cmplwi	cr0,r3,PVR_476@h
 	beq	setup_map_47x
+	cmplwi	cr0,r3,PVR_476X2@h
+	beq	setup_map_47x
+	cmplwi  cr0,r3,PVR_476FPE@h
+	beq     setup_map_47x
 	cmplwi	cr0,r3,PVR_476_ISS@h
 	beq	setup_map_47x
 #endif /* CONFIG_PPC_47x */
-- 
1.7.5.4

