From 9495ec577e57538bccf2c71e35d2d33e8e57129f Mon Sep 17 00:00:00 2001
From: Anders Berg <anders.berg@lsi.com>
Date: Tue, 5 Nov 2013 00:07:17 +0100
Subject: [PATCH 2/4] axxia: Define arch_is_coherent()

the patch come from:
https://github.com/lsigithub/lsi_axxia_yocto/commit/180b53dceec7a10a6cab3f215592c747edbc9dd8

By defining arch_is_coherent() == 1, we can avoid unnecessary cache maintenance
operations and the dma_alloc_coherent() will return normal memory.

Signed-off-by: Anders Berg <anders.berg@lsi.com>
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/usb/host/ehci-ci13612.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/host/ehci-ci13612.c b/drivers/usb/host/ehci-ci13612.c
index 42aa7e2..cc38768 100644
--- a/drivers/usb/host/ehci-ci13612.c
+++ b/drivers/usb/host/ehci-ci13612.c
@@ -281,8 +281,8 @@ static int ci13612_ehci_probe(struct platform_device *pdev)
 		/* Set address bits [39:32] to zero */
 		writel(0x0, gpreg_base + 0x8);
 #ifndef CONFIG_LSI_USB_SW_WORKAROUND
-		/* hprot pass-through (let the controller drive hprot[0:3] */
-		writel(0x100, gpreg_base + 0x74);
+		/* hprot cachable and bufferable */
+		writel(0xc, gpreg_base + 0x74);
 #endif
 		iounmap(gpreg_base);
 	}
-- 
1.7.5.4

