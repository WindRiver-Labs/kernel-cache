From 9e20580da5ed1dee979f66e2669cf988a480af40 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 29 Apr 2011 18:16:57 +0800
Subject: [PATCH 06/11] mxc/nand: add K9LBG08UOD nand flash support

Add K9LBG08UOD nand flash support

[Original code taken from L2.6.31_09.12.01_SDK.tar.gz BSP package:
http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=
IMX25PDK&fpsp=1&tab=Design_Tools_Tab]

Signed-off-by: Zhong Hongbo <hongbo.zhong@windirver.com>
---
 drivers/mtd/nand/mxc_nd2.c  |    2 +-
 drivers/mtd/nand/nand_ids.c |    3 +++
 2 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/mtd/nand/mxc_nd2.c b/drivers/mtd/nand/mxc_nd2.c
index 9d272e5..094229e 100644
--- a/drivers/mtd/nand/mxc_nd2.c
+++ b/drivers/mtd/nand/mxc_nd2.c
@@ -451,7 +451,7 @@ static void send_prog_page(u8 buf_id)
 static void send_read_page(u8 buf_id)
 {
 #ifndef NFC_AUTO_MODE_ENABLE
-	DEBUG(MTD_DEBUG_LEVEL3, "%s(%d)\n", _func__, buf_id);
+	DEBUG(MTD_DEBUG_LEVEL3, "%s(%d)\n", __func__, buf_id);
 
 	/* set ram buffer id */
 	NFC_SET_RBA(buf_id);
diff --git a/drivers/mtd/nand/nand_ids.c b/drivers/mtd/nand/nand_ids.c
index 69ee2c9..2c051c2 100644
--- a/drivers/mtd/nand/nand_ids.c
+++ b/drivers/mtd/nand/nand_ids.c
@@ -109,6 +109,9 @@ struct nand_flash_dev nand_flash_ids[] = {
 	{"NAND 2GiB 1,8V 16-bit",	0xB5, 0, 2048, 0, LP_OPTIONS16},
 	{"NAND 2GiB 3,3V 16-bit",	0xC5, 0, 2048, 0, LP_OPTIONS16},
 
+	/* 32 Gigabit ,only use 2G due to the linux mtd limitation*/
+	{"NAND 4GiB 3,3V 8-bit",        0xD7, 0, 2048, 0, LP_OPTIONS},
+
 	/*
 	 * Renesas AND 1 Gigabit. Those chips do not support extended id and
 	 * have a strange page/block layout !  The chosen minimum erasesize is
-- 
1.7.0.4

