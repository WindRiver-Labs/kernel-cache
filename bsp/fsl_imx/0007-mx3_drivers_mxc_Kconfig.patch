From 3551941d53f4711300b85cf4ee30481f170e3614 Mon Sep 17 00:00:00 2001
From: TonyLiu <Bo.Liu@windriver.com>
Date: Wed, 22 Oct 2008 09:44:07 +0800
Subject: [PATCH] mx3_drivers_mxc_Kconfig

MX3 arch dependent drivers Kconfig entry.

Also includes:
Add IPUv3, VPU and bluetooth support in mxc drivers Makefile and
Kconfig, These drivers are supported features in imx51pdk BSP.
Change from conditionally to unconditionally includes security dir,
because on imx3 platforms, the basic security engine is SCC, but on
imx5 platforms, the basic security engine is SCC2. This change is safe
because in security/Makefile, all files are conditionally added
into building list.

Signed-off-by: Wang Hui <Hui.Wang@windriver.com>
Signed-off-by: Tonyliu <Bo.Liu@windriver.com>
---
 arch/arm/Kconfig     |    4 ++++
 drivers/Makefile     |    1 +
 drivers/mxc/Kconfig  |   28 ++++++++++++++++++++++++++++
 drivers/mxc/Makefile |   13 +++++++++++++
 4 files changed, 46 insertions(+), 0 deletions(-)
 create mode 100644 drivers/mxc/Kconfig
 create mode 100644 drivers/mxc/Makefile

diff --git a/arch/arm/Kconfig b/arch/arm/Kconfig
index 5e49634..e0586c8 100644
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@ -1306,6 +1306,10 @@ source "drivers/cbus/Kconfig"
 source "drivers/dsp/dspgateway/Kconfig"
 endif
 
+if ARCH_MXC
+source "drivers/mxc/Kconfig"
+endif
+
 endmenu
 
 source "fs/Kconfig"
diff --git a/drivers/Makefile b/drivers/Makefile
index 39cfe40..f2c4700 100644
--- a/drivers/Makefile
+++ b/drivers/Makefile
@@ -86,6 +86,7 @@ obj-$(CONFIG_EISA)		+= eisa/
 obj-y				+= lguest/
 obj-$(CONFIG_CPU_FREQ)		+= cpufreq/
 obj-$(CONFIG_CPU_IDLE)		+= cpuidle/
+obj-$(CONFIG_ARCH_MXC)      += mxc/
 obj-$(CONFIG_MMC)		+= mmc/
 obj-$(CONFIG_MEMSTICK)		+= memstick/
 obj-$(CONFIG_NEW_LEDS)		+= leds/
diff --git a/drivers/mxc/Kconfig b/drivers/mxc/Kconfig
new file mode 100644
index 0000000..9a288db
--- /dev/null
+++ b/drivers/mxc/Kconfig
@@ -0,0 +1,28 @@
+# drivers/video/mxc/Kconfig
+
+if ARCH_MXC
+
+menu "MXC support drivers"
+
+config MXC_IPU
+    bool "Image Processing Unit Driver"
+    depends on !ARCH_MX27
+    select MXC_IPU_V1 if ARCH_MX3
+    help
+      If you plan to use the Image Processing unit, say
+      Y here. IPU is needed by Framebuffer and V4L2 drivers.
+
+source "drivers/mxc/ipu/Kconfig"
+
+source "drivers/mxc/ssi/Kconfig"
+source "drivers/mxc/dam/Kconfig"
+source "drivers/mxc/pmic/Kconfig"
+source "drivers/mxc/pm/Kconfig"
+source "drivers/mxc/security/Kconfig"
+source "drivers/mxc/hmp4e/Kconfig"
+source "drivers/mxc/ipu3/Kconfig"
+source "drivers/mxc/vpu/Kconfig"
+source "drivers/mxc/bt/Kconfig"
+endmenu
+
+endif
diff --git a/drivers/mxc/Makefile b/drivers/mxc/Makefile
new file mode 100644
index 0000000..6d6b435
--- /dev/null
+++ b/drivers/mxc/Makefile
@@ -0,0 +1,13 @@
+obj-$(CONFIG_MXC_IPU_V1)		+= ipu/
+
+obj-$(CONFIG_MXC_SSI)               	+= ssi/
+obj-$(CONFIG_MXC_DAM)               	+= dam/
+
+obj-$(CONFIG_MXC_PMIC)			+= pmic/
+obj-$(CONFIG_MXC_DPTC)			+= pm/
+
+obj-y					+= security/
+obj-$(CONFIG_MXC_HMP4E)			+= hmp4e/
+obj-$(CONFIG_MXC_IPU_V3)		+= ipu3/
+obj-$(CONFIG_MXC_VPU)			+= vpu/
+obj-$(CONFIG_MXC_BLUETOOTH)		+= bt/
-- 
1.5.5.1

