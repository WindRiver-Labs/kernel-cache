From 58adfbf6a8767f571f305d90112044962ccde5f0 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 15 Nov 2011 16:47:12 +0800
Subject: [PATCH 23/92] powerpc/85xx: Add entry for DSP DTS node

Extracted from 913x_WUSDK_REL_0.4.tar.gz vendor drop.

Add a node in platform_id table for DSP node as well,
so that device nodes for peripherals from DSP domain
are also created from DTS.

Signed-off-by: Pankaj Chauhan <pankaj.chauhan@freescale.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/psc9131rdb.dts        |    1 +
 arch/powerpc/platforms/85xx/psc913x_board.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/psc9131rdb.dts b/arch/powerpc/boot/dts/psc9131rdb.dts
index a911373..757e4bb 100644
--- a/arch/powerpc/boot/dts/psc9131rdb.dts
+++ b/arch/powerpc/boot/dts/psc9131rdb.dts
@@ -105,6 +105,7 @@
 		sc3850@ff600000 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+			device_type = "dsp";
 			ranges = <0x0 0xff600000 0x100000>;
 		};
 
diff --git a/arch/powerpc/platforms/85xx/psc913x_board.c b/arch/powerpc/platforms/85xx/psc913x_board.c
index 3d643f8..8fbecdf 100644
--- a/arch/powerpc/platforms/85xx/psc913x_board.c
+++ b/arch/powerpc/platforms/85xx/psc913x_board.c
@@ -73,6 +73,7 @@ static void __init psc913x_board_setup_arch(void)
 
 static struct of_device_id __initdata psc913x_board_ids[] = {
 	{ .type = "soc", },
+	{ .type = "dsp", },
 	{ .compatible = "soc", },
 	{ .compatible = "simple-bus", },
 	{ .compatible = "gianfar", },
-- 
1.7.0

