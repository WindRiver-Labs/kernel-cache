From d8ab6ceb6d57e1978eb59832b757209c71dd39a0 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 15 Nov 2011 16:36:55 +0800
Subject: [PATCH 15/92] powerpc/85xx: Kconfig changes for hugetlb

Extracted from 913x_WUSDK_REL_0.4.tar.gz vendor drop.

Make hugetlb available for all 32-bit Freescale parts and
remove the dependency on PTE_64BIT; instead enable PTE_64BIT
whenever SYS_SUPPORTS_HUGETLBFS is selected.

Signed-off-by: Becky Bruce <becky.bruce@freescale.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 arch/powerpc/Kconfig |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
index a2e2c1e..7fc2ef1 100644
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@ -481,7 +481,8 @@ config ARCH_POPULATES_NODE_MAP
 
 config SYS_SUPPORTS_HUGETLBFS
 	def_bool y
-	depends on PPC_BOOK3S_64 || (FSL_BOOKE && PHYS_64BIT && !PPC64)
+	depends on PPC_BOOK3S_64 || (FSL_BOOKE && !PPC64)
+	select PTE_64BIT
 
 source "mm/Kconfig"
 
-- 
1.7.0

