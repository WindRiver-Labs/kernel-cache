From 646e7982297011564ffb24ba44a89df3c071bca5 Mon Sep 17 00:00:00 2001
From: ashish.kumar@freescale.com <ashish.kumar@freescale.com>
Date: Wed, 4 Jan 2012 15:47:26 +0000
Subject: [PATCH 83/92] usim: Change offset of USIM controller registers

Extracted from 913x_WUSDK_REL_0.9.tar.gz vendor drop.

Change CHAR_WAIT offset from 0x50 to 0x54.
Change RESET_WAIT offset from 0x54 to 0x50.
Change SIM_XMT_THRESHOLD_TDT from 4 to 5.

Signed-off-by: Ashish Kumar <ashish.kumar@freescale.com>
Integrated-by: Jiang Bin <bin.jiang@windriver.com>
---
 drivers/char/sim.c |    8 +++-----
 1 files changed, 3 insertions(+), 5 deletions(-)

diff --git a/drivers/char/sim.c b/drivers/char/sim.c
index f49a807..c7d1288 100644
--- a/drivers/char/sim.c
+++ b/drivers/char/sim.c
@@ -105,10 +105,8 @@
 #define GUARD_CNTL	0x48	/* 48 */
 #define OD_CONFIG	0x4C	/* 4c */
 /* The following 2 are commented because of RM error */
-/*#define RESET_CNTL	0x50*/	/* 50 */
-/*#define CHAR_WAIT	0x54*/	/* 54 */
-#define RESET_CNTL	0x54	/* 50 */
-#define CHAR_WAIT	0x50	/* 54 */
+#define RESET_CNTL	0x50	/* 50 */
+#define CHAR_WAIT	0x54	/* 54 */
 #define GPCNT		0x58	/* 58 */
 #define DIVISOR		0x5C	/* 5c */
 #define BWT		0x60	/* 60 */
@@ -812,7 +810,7 @@ static void sim_start(struct sim_t *sim)
 
 	pr_debug("%s entering.\n", __func__);
 	/* Configuring SIM for Operation */
-	reg_data = SIM_XMT_THRESHOLD_XTH(0) | SIM_XMT_THRESHOLD_TDT(4);
+	reg_data = SIM_XMT_THRESHOLD_XTH(0) | SIM_XMT_THRESHOLD_TDT(5);
 	sim_write(reg_data, sim->ioaddr + XMT_THRESHOLD);
 	sim_write(0, sim->ioaddr + SETUP);
 	/* ~ 4 MHz */
-- 
1.7.0

