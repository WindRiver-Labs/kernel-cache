From c502a4648492366d31f744eaabab386f5b9e2bea Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:23:09 -0700
Subject: [PATCH] cavium: fix compile failure in ethernet-mgmt-port

Driver was using some legacy things that simply dont exist
anymore.

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 arch/mips/cavium-octeon/ethernet-mgmt-port.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/ethernet-mgmt-port.c b/arch/mips/cavium-octeon/ethernet-mgmt-port.c
index afa6586..e4ca119 100644
--- a/arch/mips/cavium-octeon/ethernet-mgmt-port.c
+++ b/arch/mips/cavium-octeon/ethernet-mgmt-port.c
@@ -258,7 +258,6 @@ static int device_init(struct net_device *dev)
 #ifdef CONFIG_NET_POLL_CONTROLLER
 	dev->poll_controller = device_poll_controller;
 #endif
-	dev->weight = 16;
 	dev->dev_addr[0] = (mac >> 40) & 0xff;
 	dev->dev_addr[1] = (mac >> 32) & 0xff;
 	dev->dev_addr[2] = (mac >> 24) & 0xff;
@@ -307,7 +306,6 @@ static int __init ethernet_mgmt_port_init(void)
 			return -1;
 		}
 
-		SET_MODULE_OWNER(dev);
 		dev->init = device_init;
 		strcpy(dev->name, "mgmt%d");
 
-- 
1.5.5.1

