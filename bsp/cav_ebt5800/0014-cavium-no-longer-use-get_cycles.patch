From 9ad86a7e3aad51b6cbe66e975958e93dd708bedf Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:22:35 -0700
Subject: [PATCH] cavium: no longer use get_cycles()

kernel.org git commit efb9ca08 rendered get_cycles() to do
nothing -- so either use octeon_get_cycles or go directly to
using read_c0_count().

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 arch/mips/cavium-octeon/smp.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/smp.c b/arch/mips/cavium-octeon/smp.c
index 8a713e9..b4cee5a 100644
--- a/arch/mips/cavium-octeon/smp.c
+++ b/arch/mips/cavium-octeon/smp.c
@@ -109,7 +109,7 @@ void prom_boot_secondary(int cpu, struct task_struct *idle)
 	__sync();		/* Use sync so all ops are done. This makes the
 				   cycle counter propagate in a more bounded
 				   amount of time */
-	octeon_processor_cycle = get_cycles();
+	octeon_processor_cycle = octeon_get_cycles();
 	octeon_processor_boot = cpu_logical_map(cpu);
 	mb();
 
-- 
1.5.5.1

