From 09ddabe651a33737b597cef0fb568ea8e38a7bde Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Tue, 27 Jan 2009 14:31:05 -0800
Subject: [PATCH] on_each_cpu() takes only 3 parameters in 2.6.27.

The 'retry' field is removed.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
Signed-off-by: David Daney <ddaney@caviumnetworks.com>
Signed-off-by: Phil Staub <Phil.Staub@windriver.com>
---
 arch/mips/cavium-octeon/hal.c        |    2 +-
 arch/mips/cavium-octeon/octeon-tra.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/hal.c b/arch/mips/cavium-octeon/hal.c
index c26070b..10c0412 100644
--- a/arch/mips/cavium-octeon/hal.c
+++ b/arch/mips/cavium-octeon/hal.c
@@ -455,7 +455,7 @@ static void octeon_hal_setup_per_cpu_reserved32(void *unused)
 void octeon_hal_setup_reserved32(void)
 {
 #ifdef CONFIG_CAVIUM_RESERVE32_USE_WIRED_TLB
-	on_each_cpu(octeon_hal_setup_per_cpu_reserved32, NULL, 0, 1);
+	on_each_cpu(octeon_hal_setup_per_cpu_reserved32, NULL, 1);
 #endif
 }
 
diff --git a/arch/mips/cavium-octeon/octeon-tra.c b/arch/mips/cavium-octeon/octeon-tra.c
index 7325069..6604ee9 100644
--- a/arch/mips/cavium-octeon/octeon-tra.c
+++ b/arch/mips/cavium-octeon/octeon-tra.c
@@ -59,7 +59,7 @@ static irqreturn_t octeon_tra_interrupt(int cpl, void *dev_id)
 	/* We can optionally stop the other cores */
 	if (OCTEON_TRA_DUMP_CORES_ON_INTERRUPT) {
 		pr_info("Octeon Trace Buffer Dumping Core state\n");
-		on_each_cpu(octeon_tra_dump_regs, NULL, 0, 1);
+		on_each_cpu(octeon_tra_dump_regs, NULL, 1);
 	}
 
 	pr_info("Octeon Trace Buffer Start\n");
-- 
1.6.0.4

