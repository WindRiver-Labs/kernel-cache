From cc16d5ae4e49f4c804ac1d9091714e6395162fe1 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Thu, 15 Jan 2009 16:33:56 +0800
Subject: [PATCH] Disable the duplicated Flash driver in Makefile

The on board Flash is driven by arch/mips/cavium-octeon/
flash_setup.c and drivers/mtd/maps/cavium_flash.c at the
same time. We can get two same MTD devices:

root@localhost:/> cat /proc/mtd
dev:    size   erasesize  name
mtd0: 00800000 00010000 "BOOT"
mtd1: 00800000 00010000 "phys_mapped_flash"

So, disable flash_setup.c n Makefile and keep the driver in
drivers/mtd.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/mips/cavium-octeon/Makefile |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/Makefile b/arch/mips/cavium-octeon/Makefile
index ab73941..e33aa5c 100644
--- a/arch/mips/cavium-octeon/Makefile
+++ b/arch/mips/cavium-octeon/Makefile
@@ -20,7 +20,7 @@ EXTRA_CFLAGS += ${CAVIUM_INCLUDES}
 
 
 obj-y := setup.o serial.o irq.o hal.o perf_counters.o octeon_info.o
-obj-y += dma-octeon.o userio.o flash_setup.o
+obj-y += dma-octeon.o userio.o
 obj-y += octeon-memcpy.o
 obj-y += console.o
 
-- 
1.6.0.3

