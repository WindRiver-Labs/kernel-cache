From 90dab89b872f5f9827733d429d9cef254dcf092d Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:22:34 -0700
Subject: [PATCH] cavium: idle->thread_info no longer exists

Use task_thread_info(idle) since idle->thread_info no longer exists.

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 arch/mips/cavium-octeon/smp.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/smp.c b/arch/mips/cavium-octeon/smp.c
index 17f3b89..8a713e9 100644
--- a/arch/mips/cavium-octeon/smp.c
+++ b/arch/mips/cavium-octeon/smp.c
@@ -105,7 +105,7 @@ void prom_boot_secondary(int cpu, struct task_struct *idle)
 	       cpu_logical_map(cpu));
 
 	octeon_processor_sp = __KSTK_TOS(idle);
-	octeon_processor_gp = (unsigned long) idle->thread_info;
+	octeon_processor_gp = (unsigned long)(task_thread_info(idle));
 	__sync();		/* Use sync so all ops are done. This makes the
 				   cycle counter propagate in a more bounded
 				   amount of time */
-- 
1.5.5.1

