From 0b28e1ce995de9fdf714ff06f0db5ba72ad6556f Mon Sep 17 00:00:00 2001
From: David Daney <ddaney@caviumnetworks.com>
Date: Tue, 27 Jan 2009 14:31:08 -0800
Subject: [PATCH] exern for do_semulret

Fixes a compilation error

Signed-off-by: David Daney <ddaney@caviumnetworks.com>
Signed-off-by: Phil Staub <Phil.Staub@windriver.com>
---
 arch/mips/mm/fault.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/arch/mips/mm/fault.c b/arch/mips/mm/fault.c
index e4ccde6..c05d0a9 100644
--- a/arch/mips/mm/fault.c
+++ b/arch/mips/mm/fault.c
@@ -33,6 +33,9 @@ int (*is_oprofile_fault)(struct pt_regs *regs) = 0;
 EXPORT_SYMBOL_GPL(is_oprofile_fault);
 #endif
 
+#ifdef CONFIG_CAVIUM_OCTEON_HW_FIX_UNALIGNED
+extern int do_dsemulret(struct pt_regs *);
+#endif
 
 /*
  * This routine handles page faults.  It determines the address,
@@ -58,7 +61,6 @@ asmlinkage void do_page_fault(struct pt_regs *regs, unsigned long write,
      * to see if this page fault was caused by an FPU emulation.
      *
 	 * Terminate if exception was recognized as a delay slot return */
-	extern int do_dsemulret(struct pt_regs *);
 	if (do_dsemulret(regs))
 		return;
 #endif
-- 
1.6.0.4

