From 4a7847edb81a8912e0330b38f7e9281230ea0ddb Mon Sep 17 00:00:00 2001
From: Jason HU <yongqi.hu@windriver.com>
Date: Wed, 15 Jul 2009 15:05:57 +0800
Subject: [PATCH] init order modification to make netconsole work

CQID: WIND00173217

Cavium-ethernet driver is initialized after netconsole and causes netconsole
fail to find device eth0 and will abort.

drivers/net/Makefile is modified by moving the item for netconsole, or
obj-$(CONFIG_NETCONSOLE) += netconsole.o, to the end of the makefile to make
all the NIC drivers initiate before netconsole, which makes netconsole always
work.

Signed-off-by: Jason HU <yongqi.hu@windriver.com>
---
 drivers/net/Makefile |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/net/Makefile b/drivers/net/Makefile
index 38bc803..ccb4189 100644
--- a/drivers/net/Makefile
+++ b/drivers/net/Makefile
@@ -247,7 +247,6 @@ obj-$(CONFIG_IRDA) += irda/
 obj-$(CONFIG_ETRAX_ETHERNET) += cris/
 obj-$(CONFIG_ENP2611_MSF_NET) += ixp2000/
 
-obj-$(CONFIG_NETCONSOLE) += netconsole.o
 obj-$(CONFIG_KGDBOE) += kgdboe.o
 
 obj-$(CONFIG_FS_ENET) += fs_enet/
@@ -258,3 +257,5 @@ obj-$(CONFIG_VIRTIO_NET) += virtio_net.o
 obj-$(CONFIG_SFC) += sfc/
 obj-$(CONFIG_CAVIUM_ETHERNET) += cavium-ethernet/
 
+obj-$(CONFIG_NETCONSOLE) += netconsole.o
+
-- 
1.6.3.1

