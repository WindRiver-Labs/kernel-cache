From fa72f0a47fa0058935cdc1ad9467a00198e7e2b9 Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Fri, 24 Oct 2008 12:22:42 -0700
Subject: [PATCH] cavium: hook cavium cache init into main cache.c

Follow precedent of other boards, and hook the CPU specific cache
init in from here.

Signed-off-by: Tomaso Paoletti <tpaoletti@caviumnetworks.com>
Signed-off-by: Paul Gortmaker <Paul.Gortmaker@windriver.com>
---
 arch/mips/mm/cache.c |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/mips/mm/cache.c b/arch/mips/mm/cache.c
index 1eb7c71..7234eeb 100644
--- a/arch/mips/mm/cache.c
+++ b/arch/mips/mm/cache.c
@@ -182,6 +182,15 @@ void __devinit cpu_cache_init(void)
 		tx39_cache_init();
 	}
 
+#ifdef CONFIG_CPU_CAVIUM_OCTEON
+	if (cpu_has_octeon_cache) {
+		extern void __weak octeon_cache_init(void);
+
+		octeon_cache_init();
+		return;
+	}
+#endif
+
 	setup_protection_map();
 }
 
-- 
1.5.5.1

