From 36958212f24b8c03216e1f344c40e0ceab526eae Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 16 Mar 2009 11:03:40 +0800
Subject: [PATCH] I2C: TWSI-I2C low-level interface fix up

TWSI-I2C low-level interface octeon_i2c_xfer_msg_raw()
doesn't support 10-bit address device right now, here add
restrcition when octeon_i2c_xfer_msg_raw() is called.

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 arch/mips/cavium-octeon/i2c-octeon_twsi.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/i2c-octeon_twsi.c b/arch/mips/cavium-octeon/i2c-octeon_twsi.c
index 2556aac..4025b25 100644
--- a/arch/mips/cavium-octeon/i2c-octeon_twsi.c
+++ b/arch/mips/cavium-octeon/i2c-octeon_twsi.c
@@ -87,7 +87,7 @@ int octeon_i2c_xfer_msg(struct i2c_adapter *adap, struct i2c_msg *msg,
 #endif
 
 #ifdef CONFIG_I2C_OCTEON_TWSI_RAW
-	if ((msg->len > 8) && (msg->flags & I2C_M_TEN))
+	if ((msg->len > 8) && (!(msg->flags & I2C_M_TEN)))
 		return octeon_i2c_xfer_msg_raw(adap, msg);
 #endif
 
-- 
1.6.0.4

