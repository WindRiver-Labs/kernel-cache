From ad3d64f16f82cba87552c003c75b1f1171f2c179 Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 16 Mar 2009 10:50:54 +0800
Subject: [PATCH] I2C: fix eeprom issue on i2c bus

The class of eeprom i2c driver doesn't match with Octeon i2c adapter's,
so need to change the i2c adapter class to do the match.

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 drivers/i2c/busses/i2c-octeon.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/i2c/busses/i2c-octeon.c b/drivers/i2c/busses/i2c-octeon.c
index 463cfd8..f9671cf 100644
--- a/drivers/i2c/busses/i2c-octeon.c
+++ b/drivers/i2c/busses/i2c-octeon.c
@@ -157,7 +157,7 @@ static struct i2c_algorithm octeon_i2c_algo = {
 #endif
 static struct i2c_adapter octeon_i2c_adap0 = {
 	.owner = THIS_MODULE,
-	.class = I2C_CLASS_HWMON,
+	.class = I2C_CLASS_ALL,
 	.name = "octeon twsi",
 	.algo = &octeon_i2c_algo,
 	.algo_data = NULL,
@@ -167,7 +167,7 @@ static struct i2c_adapter octeon_i2c_adap0 = {
 
 static struct i2c_adapter octeon_i2c_adap1 = {
 	.owner = THIS_MODULE,
-	.class = I2C_CLASS_HWMON,
+	.class = I2C_CLASS_ALL,
 	.name = "octeon twsi",
 	.algo = &octeon_i2c_algo,
 	.algo_data = NULL,
-- 
1.6.0.4

