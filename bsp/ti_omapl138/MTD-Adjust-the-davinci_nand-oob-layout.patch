From 640542004ad1a93a139fd6eefe30acff53873af9 Mon Sep 17 00:00:00 2001
From: Stanley.Miao <stanley.miao@windriver.com>
Date: Tue, 24 Nov 2009 00:47:39 +0800
Subject: [PATCH 30/43] MTD: Adjust the davinci_nand oob layout

The first two bytes of oob should be reserved for badblock markers, so
shrink the first oobfree area to 4 bytes and move it to the last position
in the array, keep the first oobfree area in the array is 6 bytes long.

The spare area is 64 bytes, so remove all the oobfree areas which are behind
64 bytes.

Signed-off-by: Stanley.Miao <stanley.miao@windriver.com>
---
 drivers/mtd/nand/davinci_nand.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mtd/nand/davinci_nand.c b/drivers/mtd/nand/davinci_nand.c
index 9f8a2f7..b37578d 100644
--- a/drivers/mtd/nand/davinci_nand.c
+++ b/drivers/mtd/nand/davinci_nand.c
@@ -310,8 +310,8 @@ static struct nand_ecclayout nand_davinci_layout_4bit = {
 		   38, 39, 40, 41, 42, 43, 44, 45, 46, 47,
 		   54, 55, 56, 57, 58, 59, 60, 61, 62, 63},
 	.oobfree = {
-		{0, 6}, {16, 6}, {32, 6}, {48, 6},
-		{64, 6}, {80, 6}, {96, 6}, {112, 6} }
+		{16, 6}, {32, 6}, {48, 6}, {2, 4}
+	}
 };
 
 static void nand_davinci_hwctl_4bit(struct mtd_info *mtd, int mode)
-- 
1.6.5.2

