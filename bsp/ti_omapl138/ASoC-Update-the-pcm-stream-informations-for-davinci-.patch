From 7a6708c5a6bf629a66a202b1ecee2eaf296b473d Mon Sep 17 00:00:00 2001
From: Stanley.Miao <stanley.miao@windriver.com>
Date: Tue, 24 Nov 2009 00:47:40 +0800
Subject: [PATCH 31/43] ASoC: Update the pcm stream informations for davinci soc

1, Add more supported pcm formats.
   SNDRV_PCM_FMTBIT_S8 and SNDRV_PCM_FMTBIT_S32_LE.

2, Correct the channels_min and channels_max.
   Although there are 384 TDM slots supported in L138 McASP, there are only
   two TDM slots used in our implementation.

Signed-off-by: Stanley.Miao <stanley.miao@windriver.com>
---
 sound/soc/davinci/davinci-i2s-mcasp.c |   16 ++++++++++------
 1 files changed, 10 insertions(+), 6 deletions(-)

diff --git a/sound/soc/davinci/davinci-i2s-mcasp.c b/sound/soc/davinci/davinci-i2s-mcasp.c
index 4948db6..3ead61c 100644
--- a/sound/soc/davinci/davinci-i2s-mcasp.c
+++ b/sound/soc/davinci/davinci-i2s-mcasp.c
@@ -718,16 +718,20 @@ struct snd_soc_dai davinci_iis_mcasp_dai[] = {
 		.suspend = davinci_i2s_mcasp_suspend,
 		.resume = davinci_i2s_mcasp_resume,
 		.playback = {
-			.channels_min = 1,
-			.channels_max = 384,
+			.channels_min = 2,
+			.channels_max = 2,
 			.rates = DAVINCI_I2S_RATES,
-			.formats = SNDRV_PCM_FMTBIT_S16_LE,
+			.formats = SNDRV_PCM_FMTBIT_S8 |
+						SNDRV_PCM_FMTBIT_S16_LE |
+						SNDRV_PCM_FMTBIT_S32_LE,
 		},
 		.capture = {
-			.channels_min = 1,
-			.channels_max = 384,
+			.channels_min = 2,
+			.channels_max = 2,
 			.rates = DAVINCI_I2S_RATES,
-			.formats = SNDRV_PCM_FMTBIT_S16_LE,
+			.formats = SNDRV_PCM_FMTBIT_S8 |
+						SNDRV_PCM_FMTBIT_S16_LE |
+						SNDRV_PCM_FMTBIT_S32_LE,
 		},
 		.ops = {
 			.startup = davinci_i2s_startup,
-- 
1.6.5.2

