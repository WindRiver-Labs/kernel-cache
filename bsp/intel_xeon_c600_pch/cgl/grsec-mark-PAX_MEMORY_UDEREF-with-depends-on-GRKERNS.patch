From c27cc33e603ba4fe269777cfc48e49c1880740ce Mon Sep 17 00:00:00 2001
From: Zhang Xiao <xiao.zhang@windriver.com>
Date: Mon, 23 Jul 2012 14:29:46 +0800
Subject: [PATCH] grsec: mark PAX_MEMORY_UDEREF with "depends on GRKERNSEC"

PAX_MEMORY_UDEREF depends on GRKERNSEC so make it in Kconfig file.

Signed-off-by: Zhang Xiao <xiao.zhang@windriver.com>
---
 security/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/security/Kconfig b/security/Kconfig
index 956a0e0..4fa27ce 100644
--- a/security/Kconfig
+++ b/security/Kconfig
@@ -455,7 +455,7 @@ config PAX_MEMORY_SANITIZE
 
 config PAX_MEMORY_UDEREF
 	bool "Prevent invalid userland pointer dereference"
-	depends on X86 && !UML_X86 && !XEN
+	depends on GRKERNSEC && X86 && !UML_X86 && !XEN
 	select PAX_PER_CPU_PGD if X86_64
 	help
 	  By saying Y here the kernel will be prevented from dereferencing
-- 
1.7.0

