From c57d0a9d2dd25a33cc9ae12c2fea97cad3e3373b Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 7 May 2012 08:54:39 +0800
Subject: [PATCH 189/479] cgl: disable PAX_MEMORY_SANITIZE when HIBERNATION is enabled

PAX feature "Sanitize all freed memory" has conflict with pm
suspend to disk(hibernation), so turn it off when HIBERNATION
is enabled. And the fix is align with PAX offical patch:
http://pax.grsecurity.net/pax-linux-3.2.11-201203142315.patch

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 security/Kconfig |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/security/Kconfig b/security/Kconfig
index f8a07c8..956a0e0 100644
--- a/security/Kconfig
+++ b/security/Kconfig
@@ -433,6 +433,7 @@ menu "Miscellaneous hardening features"
 
 config PAX_MEMORY_SANITIZE
 	bool "Sanitize all freed memory"
+	depends on !HIBERNATION
 	help
 	  By saying Y here the kernel will erase memory pages as soon as they
 	  are freed.  This in turn reduces the lifetime of data stored in the
-- 
1.7.0

