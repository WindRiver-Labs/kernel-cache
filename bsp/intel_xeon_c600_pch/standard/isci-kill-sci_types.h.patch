From 6f8f57081e69b4f7e8dfd6c7aee1b52beca5f064 Mon Sep 17 00:00:00 2001
From: Edmund Nadolski <edmund.nadolski@intel.com>
Date: Tue, 8 Feb 2011 09:31:55 -0700
Subject: [PATCH 005/474] isci: kill sci_types.h

upstream: b5739b60507af0607fe99f1582b2dce4aa70e0b8

Signed-off-by: Edmund Nadolski <edmund.nadolski@intel.com>
[rebased after killing SCI_IO_REQUEST_DATA_DIRECTION]
Signed-off-by: Dan Williams <dan.j.williams@intel.com>

Integrated-by: Hui Wang <Hui.Wang@windriver.com>
---
 .../isci/core/sci_base_memory_descriptor_list.h    |    1 -
 drivers/scsi/isci/core/sci_base_state_machine.h    |    2 +
 drivers/scsi/isci/core/sci_controller.h            |    2 -
 .../scsi/isci/core/sci_memory_descriptor_list.h    |    1 -
 drivers/scsi/isci/core/sci_object.h                |    1 -
 drivers/scsi/isci/core/sci_types.h                 |   70 --------------------
 drivers/scsi/isci/core/sci_util.h                  |    7 ++-
 drivers/scsi/isci/core/scic_config_parameters.h    |    1 -
 drivers/scsi/isci/core/scic_controller.h           |    8 ++-
 drivers/scsi/isci/core/scic_io_request.h           |    1 -
 drivers/scsi/isci/core/scic_phy.h                  |    1 -
 drivers/scsi/isci/core/scic_port.h                 |    1 -
 drivers/scsi/isci/core/scic_remote_device.h        |    1 -
 drivers/scsi/isci/core/scic_sds_controller.h       |    2 +
 drivers/scsi/isci/core/scic_sds_pci.h              |    1 -
 .../scsi/isci/core/scic_sds_remote_node_context.h  |    1 -
 .../scsi/isci/core/scic_sds_remote_node_table.h    |    1 -
 drivers/scsi/isci/core/scic_sds_request.c          |    1 -
 drivers/scsi/isci/core/scic_sds_smp_request.h      |    1 -
 .../scsi/isci/core/scic_sds_stp_packet_request.h   |    1 -
 drivers/scsi/isci/core/scic_sds_stp_request.c      |    1 -
 drivers/scsi/isci/core/scic_sds_stp_request.h      |    1 -
 drivers/scsi/isci/core/scic_task_request.h         |    1 -
 drivers/scsi/isci/core/scic_user_callback.h        |    2 +-
 drivers/scsi/isci/core/scu_registers.h             |    1 -
 drivers/scsi/isci/core/scu_remote_node_context.h   |    1 -
 drivers/scsi/isci/core/scu_task_context.h          |    1 -
 drivers/scsi/isci/core/scu_unsolicited_frame.h     |    2 +-
 drivers/scsi/isci/core/scu_viit_data.h             |    1 -
 drivers/scsi/isci/isci.h                           |    1 -
 30 files changed, 19 insertions(+), 98 deletions(-)
 delete mode 100644 drivers/scsi/isci/core/sci_types.h

diff --git a/drivers/scsi/isci/core/sci_base_memory_descriptor_list.h b/drivers/scsi/isci/core/sci_base_memory_descriptor_list.h
index 614e0a9..b58d4e8 100644
--- a/drivers/scsi/isci/core/sci_base_memory_descriptor_list.h
+++ b/drivers/scsi/isci/core/sci_base_memory_descriptor_list.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_memory_descriptor_list.h"
 
 
diff --git a/drivers/scsi/isci/core/sci_base_state_machine.h b/drivers/scsi/isci/core/sci_base_state_machine.h
index cee38bd..13f6ee8 100644
--- a/drivers/scsi/isci/core/sci_base_state_machine.h
+++ b/drivers/scsi/isci/core/sci_base_state_machine.h
@@ -56,6 +56,8 @@
 #ifndef _SCI_BASE_STATE_MACHINE_H_
 #define _SCI_BASE_STATE_MACHINE_H_
 
+#include <linux/string.h>
+
 /**
  * This file contains all structures, constants, or method declarations common
  *    to all state machines defined in SCI.
diff --git a/drivers/scsi/isci/core/sci_controller.h b/drivers/scsi/isci/core/sci_controller.h
index 26c3548..5c7774e 100644
--- a/drivers/scsi/isci/core/sci_controller.h
+++ b/drivers/scsi/isci/core/sci_controller.h
@@ -64,8 +64,6 @@
  */
 
 
-#include "sci_types.h"
-
 struct sci_base_memory_descriptor_list;
 struct scic_sds_controller;
 
diff --git a/drivers/scsi/isci/core/sci_memory_descriptor_list.h b/drivers/scsi/isci/core/sci_memory_descriptor_list.h
index 44de1c1..a039998 100644
--- a/drivers/scsi/isci/core/sci_memory_descriptor_list.h
+++ b/drivers/scsi/isci/core/sci_memory_descriptor_list.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 
 struct sci_base_memory_descriptor_list;
 
diff --git a/drivers/scsi/isci/core/sci_object.h b/drivers/scsi/isci/core/sci_object.h
index 9306942..801b01b 100644
--- a/drivers/scsi/isci/core/sci_object.h
+++ b/drivers/scsi/isci/core/sci_object.h
@@ -65,7 +65,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 
 /**
diff --git a/drivers/scsi/isci/core/sci_types.h b/drivers/scsi/isci/core/sci_types.h
deleted file mode 100644
index fda3680..0000000
--- a/drivers/scsi/isci/core/sci_types.h
+++ /dev/null
@@ -1,70 +0,0 @@
-/*
- * This file is provided under a dual BSD/GPLv2 license.  When using or
- * redistributing this file, you may do so under either license.
- *
- * GPL LICENSE SUMMARY
- *
- * Copyright(c) 2008 - 2011 Intel Corporation. All rights reserved.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of version 2 of the GNU General Public License as
- * published by the Free Software Foundation.
- *
- * This program is distributed in the hope that it will be useful, but
- * WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * General Public License for more details.
- *
- * You should have received a copy of the GNU General Public License
- * along with this program; if not, write to the Free Software
- * Foundation, Inc., 51 Franklin St - Fifth Floor, Boston, MA 02110-1301 USA.
- * The full GNU General Public License is included in this distribution
- * in the file called LICENSE.GPL.
- *
- * BSD LICENSE
- *
- * Copyright(c) 2008 - 2011 Intel Corporation. All rights reserved.
- * All rights reserved.
- *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- *
- *   * Redistributions of source code must retain the above copyright
- *     notice, this list of conditions and the following disclaimer.
- *   * Redistributions in binary form must reproduce the above copyright
- *     notice, this list of conditions and the following disclaimer in
- *     the documentation and/or other materials provided with the
- *     distribution.
- *   * Neither the name of Intel Corporation nor the names of its
- *     contributors may be used to endorse or promote products derived
- *     from this software without specific prior written permission.
- *
- * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
- * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
- * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
- * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
- * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
- * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
- * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
- * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
- * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
- * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
- * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
- */
-
-#ifndef _SCI_TYPES_H_
-#define _SCI_TYPES_H_
-
-#include <linux/string.h>
-
-#define sci_cb_make_physical_address(physical_addr, addr_upper, addr_lower) \
-	((physical_addr) = (addr_lower) | ((u64)addr_upper) << 32)
-
-enum sci_controller_mode {
-	SCI_MODE_SPEED,		/* Optimized for performance */
-	SCI_MODE_SIZE		/* Optimized for memory use */
-};
-
-#endif  /* _SCI_TYPES_H_ */
-
diff --git a/drivers/scsi/isci/core/sci_util.h b/drivers/scsi/isci/core/sci_util.h
index 67e2bad..8f2ba35 100644
--- a/drivers/scsi/isci/core/sci_util.h
+++ b/drivers/scsi/isci/core/sci_util.h
@@ -56,7 +56,7 @@
 #ifndef _SCI_UTIL_H_
 #define _SCI_UTIL_H_
 
-#include "sci_types.h"
+#include <linux/string.h>
 
 /**
  * SCIC_SWAP_DWORD() -
@@ -81,6 +81,11 @@
 
 #define SCI_FIELD_OFFSET(type, field)   ((unsigned long)&(((type *)0)->field))
 
+
+#define sci_cb_make_physical_address(physical_addr, addr_upper, addr_lower) \
+	((physical_addr) = (addr_lower) | ((u64)addr_upper) << 32)
+
+
 /**
  * sci_physical_address_add() -
  *
diff --git a/drivers/scsi/isci/core/scic_config_parameters.h b/drivers/scsi/isci/core/scic_config_parameters.h
index 4c16a50..8bd8560 100644
--- a/drivers/scsi/isci/core/scic_config_parameters.h
+++ b/drivers/scsi/isci/core/scic_config_parameters.h
@@ -65,7 +65,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 #include "intel_sas.h"
 #include "sci_controller_constants.h"
diff --git a/drivers/scsi/isci/core/scic_controller.h b/drivers/scsi/isci/core/scic_controller.h
index 756b14f..1d459d6 100644
--- a/drivers/scsi/isci/core/scic_controller.h
+++ b/drivers/scsi/isci/core/scic_controller.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 #include "sci_controller.h"
 #include "scic_config_parameters.h"
@@ -74,6 +73,13 @@ struct scic_sds_phy;
 struct scic_sds_port;
 struct scic_sds_remote_device;
 
+
+enum sci_controller_mode {
+	SCI_MODE_SPEED,		/* Optimized for performance */
+	SCI_MODE_SIZE		/* Optimized for memory use */
+};
+
+
 /**
  * enum _SCIC_INTERRUPT_TYPE - This enumeration depicts the various types of
  *    interrupts that are potentially supported by a SCI Core implementation.
diff --git a/drivers/scsi/isci/core/scic_io_request.h b/drivers/scsi/isci/core/scic_io_request.h
index 7378f33..a52f33d 100644
--- a/drivers/scsi/isci/core/scic_io_request.h
+++ b/drivers/scsi/isci/core/scic_io_request.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 #include "intel_sas.h"
 
diff --git a/drivers/scsi/isci/core/scic_phy.h b/drivers/scsi/isci/core/scic_phy.h
index fec273b..13f8a30 100644
--- a/drivers/scsi/isci/core/scic_phy.h
+++ b/drivers/scsi/isci/core/scic_phy.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 
 #include "intel_sata.h"
diff --git a/drivers/scsi/isci/core/scic_port.h b/drivers/scsi/isci/core/scic_port.h
index 34d22c0..e55abb6 100644
--- a/drivers/scsi/isci/core/scic_port.h
+++ b/drivers/scsi/isci/core/scic_port.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 #include "intel_sas.h"
 
diff --git a/drivers/scsi/isci/core/scic_remote_device.h b/drivers/scsi/isci/core/scic_remote_device.h
index e8c0459..1401844 100644
--- a/drivers/scsi/isci/core/scic_remote_device.h
+++ b/drivers/scsi/isci/core/scic_remote_device.h
@@ -64,7 +64,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 #include "intel_sas.h"
 
diff --git a/drivers/scsi/isci/core/scic_sds_controller.h b/drivers/scsi/isci/core/scic_sds_controller.h
index afa45f9..cce0da6 100644
--- a/drivers/scsi/isci/core/scic_sds_controller.h
+++ b/drivers/scsi/isci/core/scic_sds_controller.h
@@ -56,6 +56,8 @@
 #ifndef _SCIC_SDS_CONTROLLER_H_
 #define _SCIC_SDS_CONTROLLER_H_
 
+#include <linux/string.h>
+
 /**
  * This file contains the structures, constants and prototypes used for the
  *    core controller object.
diff --git a/drivers/scsi/isci/core/scic_sds_pci.h b/drivers/scsi/isci/core/scic_sds_pci.h
index 2132677..bf0cbca 100644
--- a/drivers/scsi/isci/core/scic_sds_pci.h
+++ b/drivers/scsi/isci/core/scic_sds_pci.h
@@ -64,7 +64,6 @@
  */
 
 #include <asm/io.h>
-#include "sci_types.h"
 
 struct scic_sds_controller;
 
diff --git a/drivers/scsi/isci/core/scic_sds_remote_node_context.h b/drivers/scsi/isci/core/scic_sds_remote_node_context.h
index 59eacf8..9e759a3 100644
--- a/drivers/scsi/isci/core/scic_sds_remote_node_context.h
+++ b/drivers/scsi/isci/core/scic_sds_remote_node_context.h
@@ -64,7 +64,6 @@
  *
  */
 
-#include "sci_types.h"
 #include "sci_base_state.h"
 #include "sci_base_state_machine.h"
 
diff --git a/drivers/scsi/isci/core/scic_sds_remote_node_table.h b/drivers/scsi/isci/core/scic_sds_remote_node_table.h
index 6ee5fba..9c02a6c 100644
--- a/drivers/scsi/isci/core/scic_sds_remote_node_table.h
+++ b/drivers/scsi/isci/core/scic_sds_remote_node_table.h
@@ -63,7 +63,6 @@
  *
  */
 
-#include "sci_types.h"
 #include "sci_controller_constants.h"
 
 /**
diff --git a/drivers/scsi/isci/core/scic_sds_request.c b/drivers/scsi/isci/core/scic_sds_request.c
index 7c5b61b..2bd47f4 100644
--- a/drivers/scsi/isci/core/scic_sds_request.c
+++ b/drivers/scsi/isci/core/scic_sds_request.c
@@ -72,7 +72,6 @@
 #include "scic_sds_unsolicited_frame_control.h"
 #include "scic_user_callback.h"
 #include "sci_environment.h"
-#include "sci_types.h"
 #include "sci_util.h"
 #include "scu_completion_codes.h"
 #include "scu_constants.h"
diff --git a/drivers/scsi/isci/core/scic_sds_smp_request.h b/drivers/scsi/isci/core/scic_sds_smp_request.h
index b7c5b83..bcad282 100644
--- a/drivers/scsi/isci/core/scic_sds_smp_request.h
+++ b/drivers/scsi/isci/core/scic_sds_smp_request.h
@@ -56,7 +56,6 @@
 #define _SCIC_SDS_SMP_REQUEST_T_
 
 #include "intel_sas.h"
-#include "sci_types.h"
 #include "scic_sds_request.h"
 
 
diff --git a/drivers/scsi/isci/core/scic_sds_stp_packet_request.h b/drivers/scsi/isci/core/scic_sds_stp_packet_request.h
index fc18b3f..2a7aec9 100644
--- a/drivers/scsi/isci/core/scic_sds_stp_packet_request.h
+++ b/drivers/scsi/isci/core/scic_sds_stp_packet_request.h
@@ -56,7 +56,6 @@
 #define _SCIC_SDS_STP_PACKET_REQUEST_H_
 
 #include "intel_sas.h"
-#include "sci_types.h"
 #include "scic_sds_stp_request.h"
 
 /**
diff --git a/drivers/scsi/isci/core/scic_sds_stp_request.c b/drivers/scsi/isci/core/scic_sds_stp_request.c
index 49c494c..0b6b055 100644
--- a/drivers/scsi/isci/core/scic_sds_stp_request.c
+++ b/drivers/scsi/isci/core/scic_sds_stp_request.c
@@ -69,7 +69,6 @@
 #include "scic_sds_unsolicited_frame_control.h"
 #include "scic_user_callback.h"
 #include "sci_environment.h"
-#include "sci_types.h"
 #include "sci_util.h"
 #include "scu_completion_codes.h"
 #include "scu_event_codes.h"
diff --git a/drivers/scsi/isci/core/scic_sds_stp_request.h b/drivers/scsi/isci/core/scic_sds_stp_request.h
index 0a12ff6..4a4c68a 100644
--- a/drivers/scsi/isci/core/scic_sds_stp_request.h
+++ b/drivers/scsi/isci/core/scic_sds_stp_request.h
@@ -58,7 +58,6 @@
 
 #include <linux/dma-mapping.h>
 #include "intel_sata.h"
-#include "sci_types.h"
 #include "scic_sds_request.h"
 
 /**
diff --git a/drivers/scsi/isci/core/scic_task_request.h b/drivers/scsi/isci/core/scic_task_request.h
index ef76cb6..7e6d20a 100644
--- a/drivers/scsi/isci/core/scic_task_request.h
+++ b/drivers/scsi/isci/core/scic_task_request.h
@@ -65,7 +65,6 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
 
 struct scic_sds_request;
diff --git a/drivers/scsi/isci/core/scic_user_callback.h b/drivers/scsi/isci/core/scic_user_callback.h
index 4df7106..ec4eb27 100644
--- a/drivers/scsi/isci/core/scic_user_callback.h
+++ b/drivers/scsi/isci/core/scic_user_callback.h
@@ -64,8 +64,8 @@
  */
 
 
-#include "sci_types.h"
 #include "sci_status.h"
+#include "scic_io_request.h"
 
 struct scic_sds_request;
 struct scic_sds_phy;
diff --git a/drivers/scsi/isci/core/scu_registers.h b/drivers/scsi/isci/core/scu_registers.h
index 175d2b9..de2ce93 100644
--- a/drivers/scsi/isci/core/scu_registers.h
+++ b/drivers/scsi/isci/core/scu_registers.h
@@ -63,7 +63,6 @@
  *
  */
 
-#include "sci_types.h"
 #include "scu_viit_data.h"
 
 
diff --git a/drivers/scsi/isci/core/scu_remote_node_context.h b/drivers/scsi/isci/core/scu_remote_node_context.h
index 8006f2e..33745ad 100644
--- a/drivers/scsi/isci/core/scu_remote_node_context.h
+++ b/drivers/scsi/isci/core/scu_remote_node_context.h
@@ -62,7 +62,6 @@
  *
  *
  */
-#include "sci_types.h"
 
 /**
  * struct ssp_remote_node_context - This structure contains the SCU hardware
diff --git a/drivers/scsi/isci/core/scu_task_context.h b/drivers/scsi/isci/core/scu_task_context.h
index d08c51b..818a575 100644
--- a/drivers/scsi/isci/core/scu_task_context.h
+++ b/drivers/scsi/isci/core/scu_task_context.h
@@ -63,7 +63,6 @@
  *
  */
 
-#include "sci_types.h"
 
 /**
  * enum SCU_SSP_TASK_TYPE - This enumberation defines the various SSP task
diff --git a/drivers/scsi/isci/core/scu_unsolicited_frame.h b/drivers/scsi/isci/core/scu_unsolicited_frame.h
index 590ea02..187c4f0 100644
--- a/drivers/scsi/isci/core/scu_unsolicited_frame.h
+++ b/drivers/scsi/isci/core/scu_unsolicited_frame.h
@@ -64,7 +64,7 @@
 #ifndef _SCU_UNSOLICITED_FRAME_H_
 #define _SCU_UNSOLICITED_FRAME_H_
 
-#include "sci_types.h"
+#include <linux/string.h>
 
 /**
  *
diff --git a/drivers/scsi/isci/core/scu_viit_data.h b/drivers/scsi/isci/core/scu_viit_data.h
index 4601d19..c959d91 100644
--- a/drivers/scsi/isci/core/scu_viit_data.h
+++ b/drivers/scsi/isci/core/scu_viit_data.h
@@ -63,7 +63,6 @@
  *
  */
 
-#include "sci_types.h"
 
 #define SCU_VIIT_ENTRY_ID_MASK         (0xC0000000)
 #define SCU_VIIT_ENTRY_ID_SHIFT        (30)
diff --git a/drivers/scsi/isci/isci.h b/drivers/scsi/isci/isci.h
index 7d984f4..21371e7 100644
--- a/drivers/scsi/isci/isci.h
+++ b/drivers/scsi/isci/isci.h
@@ -79,7 +79,6 @@
 #include <scsi/libsas.h>
 #include <scsi/scsi.h>
 
-#include "sci_types.h"
 #include "sci_base_controller.h"
 #include "scic_controller.h"
 #include "host.h"
-- 
1.7.0

