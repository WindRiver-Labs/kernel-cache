From b36d54bd1237646ff3d70b6745e46f6ce3cf66a3 Mon Sep 17 00:00:00 2001
From: Dan Williams <dan.j.williams@intel.com>
Date: Tue, 19 Apr 2011 15:29:25 -0700
Subject: [PATCH 092/478] isci: fix oem parameter header definition

upstream: f22be5d8386d9da67bfe02693806fbaff7b078da

The element_length is 2 bytes.

Reported-by: Yinghai Lu <yinghai.lu@oracle.com>
Acked-by: Dave Jiang <dave.jiang@intel.com>
Signed-off-by: Dan Williams <dan.j.williams@intel.com>

Integrated-by: Hui Wang <Hui.Wang@windriver.com>
---
 drivers/scsi/isci/probe_roms.h       |    2 +-
 firmware/isci/isci_firmware.bin.ihex |   30 +++++++++++++++---------------
 2 files changed, 16 insertions(+), 16 deletions(-)

diff --git a/drivers/scsi/isci/probe_roms.h b/drivers/scsi/isci/probe_roms.h
index f079358..5598336 100644
--- a/drivers/scsi/isci/probe_roms.h
+++ b/drivers/scsi/isci/probe_roms.h
@@ -123,7 +123,7 @@ struct sci_bios_oem_param_block_hdr {
 	uint8_t version;
 	uint8_t preboot_source;
 	uint8_t num_elements;
-	uint8_t element_length;
+	uint16_t element_length;
 	uint8_t reserved[8];
 } __attribute__ ((packed));
 
diff --git a/firmware/isci/isci_firmware.bin.ihex b/firmware/isci/isci_firmware.bin.ihex
index 31b5ecf..13a9655 100644
--- a/firmware/isci/isci_firmware.bin.ihex
+++ b/firmware/isci/isci_firmware.bin.ihex
@@ -1,16 +1,16 @@
-:10000000495343554F454D42E70017100002000089
-:10001000000000000000000101000000000000FFDF
-:10002000FFCF5F01000000037C0E00037C0E000385
-:100030007C0E00037C0E00FFFFCF5F010000000379
-:100040007C0E00037C0E00037C0E00037C0E00FF80
-:10005000FFCF5F01000000037C0E00037C0E000355
-:100060007C0E00037C0E00FFFFCF5F010000000349
-:100070007C0E00037C0E00037C0E00037C0E00014E
-:1000800001000000000000FFFFCF5F02000000033E
-:100090007C0E00037C0E00037C0E00037C0E00FF30
-:1000A000FFCF5F02000000037C0E00037C0E000304
-:1000B0007C0E00037C0E00FFFFCF5F0200000003F8
-:1000C0007C0E00037C0E00037C0E00037C0E00FF00
-:1000D000FFCF5F02000000037C0E00037C0E0003D4
-:0700E0007C0E00037C0E0002
+:10000000495343554F454D42E80018100002000087
+:1000100000000000000000000101000000000000DE
+:10002000FFFFCF5F01000000037C0E00037C0E0089
+:10003000037C0E00037C0E00FFFFCF5F0100000079
+:10004000037C0E00037C0E00037C0E00037C0E007C
+:10005000FFFFCF5F01000000037C0E00037C0E0059
+:10006000037C0E00037C0E00FFFFCF5F0100000049
+:10007000037C0E00037C0E00037C0E00037C0E004C
+:100080000101000000000000FFFFCF5F0200000040
+:10009000037C0E00037C0E00037C0E00037C0E002C
+:1000A000FFFFCF5F02000000037C0E00037C0E0008
+:1000B000037C0E00037C0E00FFFFCF5F02000000F8
+:1000C000037C0E00037C0E00037C0E00037C0E00FC
+:1000D000FFFFCF5F02000000037C0E00037C0E00D8
+:0800E000037C0E00037C0E00FE
 :00000001FF
-- 
1.7.0

