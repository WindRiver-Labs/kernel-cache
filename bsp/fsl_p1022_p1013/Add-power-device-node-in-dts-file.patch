From fe9186c3587dcd9ddcd269b0919f02d78b5a0aa8 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Mon, 27 Sep 2010 17:28:47 +0800
Subject: [PATCH] Add power device node in dts file.

Needed for sleep/deep sleep for P1022 SMP

Extracted from the P1022DS_20100330-ltib.iso vendor drop.

[Jiang Lu:
2.Remove mpc8548-pmc compatible attribute on dts node to let
kernel not use fsl-pmc as suspend driver for p1022ds platform.
]

[Extracted from vendor drop QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso
linux-2.6.35-qoriq-powerpc-85xx-add-the-sleep-deep-sleep-s.patch.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1022ds.dts |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1022ds.dts b/arch/powerpc/boot/dts/p1022ds.dts
index 65acd74..9b760dd 100644
--- a/arch/powerpc/boot/dts/p1022ds.dts
+++ b/arch/powerpc/boot/dts/p1022ds.dts
@@ -413,6 +413,11 @@
 			interrupt-parent = <&mpic>;
 		};
 
+		power@e0070{
+			compatible = "fsl,mpc8536-pmc", "fsl,mpc8548-pmc",
+				"fsl,p1022-pmc";
+		};
+
 		mpic: pic@40000 {
 			interrupt-controller;
 			#address-cells = <0>;
-- 
1.7.0.4

