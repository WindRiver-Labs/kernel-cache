From c8a7ad322f585c59c5a624d4226c5539cef6c080 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Thu, 5 Aug 2010 17:07:24 +0800
Subject: [PATCH 02/14] ATA: Fix P1022DS SATA operating mode

Extracted from the P1022DS_20100330-ltib.iso vendor drop.

Change P1022 sata controller to operate in enterprise mode.

Signed-off-by: Yutaka Ando <r46913@freescale.com>
Integrated-by: Yang Shi <yang.shi@windriver.com>
---
 drivers/ata/sata_fsl.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/drivers/ata/sata_fsl.c b/drivers/ata/sata_fsl.c
index a69192b..2ed07fc 100644
--- a/drivers/ata/sata_fsl.c
+++ b/drivers/ata/sata_fsl.c
@@ -158,7 +158,11 @@ enum {
 	    IE_ON_SINGL_DEVICE_ERR | IE_ON_CMD_COMPLETE,
 
 	EXT_INDIRECT_SEG_PRD_FLAG = (1 << 31),
+#ifdef CONFIG_P1022_DS
+	DATA_SNOOP_ENABLE = (1 << 28),
+#else
 	DATA_SNOOP_ENABLE = (1 << 22),
+#endif
 };
 
 /*
-- 
1.6.5.2

