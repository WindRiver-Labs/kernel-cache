From bf88acdfe17f329a005b2c2bd837bcbfcd36e307 Mon Sep 17 00:00:00 2001
From: tonyliu <Bo.Liu@windriver.com>
Date: Mon, 27 Apr 2009 16:54:28 +0800
Subject: [PATCH] ti_omap3430sdp: fix ts unprecise operation

commit e0a7c785f787fa134fcff6feee7b47e9f86de9f3 from
git://git.omapzoom.org/repo/omapkernel.git

x_max/y_max/pressure_max params delimit input device ABS_X/ABS_Y/ABS_PRESSURE
for avoiding hardware nolinear action.

x_plate_ohms param is required for calculating proper touch pressure.

debounce_max/debounce_tol/debounce_rep params are used to collect enough
number of consistent readings in one sampling period.

settle_delay_usecs param is used as time gap for device stabilization.
because the first sample after switching drivers can be low quality;
optionally discard it, using a second one after the signals have had
enough time to stabilize.

Signed-off-by: Nishant Kamat <nskamat@ti.com>
Signed-off-by: tonyliu <Bo.Liu@windriver.com>
---
 arch/arm/mach-omap2/board-3430sdp.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/board-3430sdp.c b/arch/arm/mach-omap2/board-3430sdp.c
index 416d288..c9a8c6d 100644
--- a/arch/arm/mach-omap2/board-3430sdp.c
+++ b/arch/arm/mach-omap2/board-3430sdp.c
@@ -210,9 +210,17 @@ static int ads7846_vaux_control(int vaux_cntrl)
 }
 
 static struct ads7846_platform_data tsc2046_config __initdata = {
+	.x_max              = 0x0fff,
+	.y_max              = 0x0fff,
+	.x_plate_ohms       = 180,
+	.pressure_max       = 255,
+	.debounce_max       = 10,
+	.debounce_tol       = 10,
+	.debounce_rep       = 1,
 	.get_pendown_state	= ads7846_get_pendown_state,
 	.keep_vref_on		= 1,
 	.vaux_control		= ads7846_vaux_control,
+	.settle_delay_usecs = 150,
 };
 
 
-- 
1.6.0.4

