From 6450c68a07ad50a6c0a8ca59c9873222d7905d67 Mon Sep 17 00:00:00 2001
From: Fugang Duan <B38611@freescale.com>
Date: Mon, 19 Aug 2013 10:58:24 +0800
Subject: [PATCH 0456/1072] ENGR00275619 net: fec: set reset phy gpio to high
 in .probe().

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit 357c3f1561d35bd2eede1ae3129697ca353c69ae

In .probe() call fec_of_init() to parse phy reset gpio, and
request the gpio for later use. For the init, we must set the
gpio to high to let phy power on.

Signed-off-by: Fugang Duan  <B38611@freescale.com>
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 drivers/net/ethernet/freescale/fec_main.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/freescale/fec_main.c b/drivers/net/ethernet/freescale/fec_main.c
index 8cd644d..a23156f 100644
--- a/drivers/net/ethernet/freescale/fec_main.c
+++ b/drivers/net/ethernet/freescale/fec_main.c
@@ -2064,7 +2064,7 @@ static void fec_of_init(struct platform_device *pdev)
 		return;
 
 	err = devm_gpio_request_one(&pdev->dev, fep->phy_reset_gpio,
-				    GPIOF_OUT_INIT_LOW, "phy-reset");
+				    GPIOF_OUT_INIT_HIGH, "phy-reset");
 	if (err) {
 		dev_err(&pdev->dev, "failed to get phy-reset-gpios: %d\n", err);
 		fep->phy_reset_gpio = -1;
-- 
1.7.5.4

