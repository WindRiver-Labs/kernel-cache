From 54cf68eb2bbe5bdfdffd1bd2eb771d7dcdbd3b22 Mon Sep 17 00:00:00 2001
From: Nicolin Chen <b42378@freescale.com>
Date: Wed, 4 Sep 2013 17:44:40 +0800
Subject: [PATCH 0203/1072] ENGR00277715-7 ARM: clk: Config audio clocks for
 imx6sl

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit e9b42573aaacf2f38fb6fc277b89d1ec531d5b00

* Set extern_audio to 24MHz as audio codec MCLK for WM8962
* Set pll3_pfd3 as spdif's parent

Acked-by: Shawn Guo <shawn.guo@freescale.com>
Signed-off-by: Nicolin Chen <b42378@freescale.com>
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 arch/arm/mach-imx/clk-imx6sl.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-imx/clk-imx6sl.c b/arch/arm/mach-imx/clk-imx6sl.c
index e38ae53e..c476999 100644
--- a/arch/arm/mach-imx/clk-imx6sl.c
+++ b/arch/arm/mach-imx/clk-imx6sl.c
@@ -291,6 +291,12 @@ static void __init imx6sl_clocks_init(struct device_node *ccm_node)
 	clk_set_parent(clks[IMX6SL_CLK_LCDIF_AXI_SEL], clks[IMX6SL_CLK_PLL2_PFD2]);
 	clk_set_rate(clks[IMX6SL_CLK_LCDIF_AXI], 200000000);
 
+	/* Audio clocks */
+	clk_set_parent(clks[IMX6SL_CLK_SPDIF0_SEL], clks[IMX6SL_CLK_PLL3_PFD3]);
+
+	/* set extern_audio to 24MHz */
+	clk_set_rate(clks[IMX6SL_CLK_EXTERN_AUDIO], 24000000);
+
 	/* set perclk to source from OSC 24MHz */
 	clk_set_parent(clks[IMX6SL_CLK_PERCLK_SEL], clks[IMX6SL_CLK_OSC]);
 
-- 
1.7.5.4

