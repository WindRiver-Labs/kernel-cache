From 9eb8f4c1967f4ffaa4dfe1749958aa28f54cbbb5 Mon Sep 17 00:00:00 2001
From: Sandor Yu <R01008@freescale.com>
Date: Wed, 4 Sep 2013 15:47:46 +0800
Subject: [PATCH 0247/1072] ENGR00277843-04 ARM: dts: Add sii902x in imx6sl
 evk dts

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit e40ec3263372a4f21f7a1ae0d9f174107a2c1f1f

- Add sii902x driver to imx6sl-evk.dts
- Set LCD_RESET pin work in GPIO mode, the pin is not
   use by imx6sl evk lcd panel.
- Enable sii902x in imx_v7_defconfig

Signed-off-by: Sandor Yu <R01008@freescale.com>
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 arch/arm/boot/dts/imx6sl-evk.dts  |   18 ++++++++++++++++++
 arch/arm/boot/dts/imx6sl.dtsi     |    1 -
 arch/arm/configs/imx_v7_defconfig |    3 ++-
 3 files changed, 20 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index 4d04fe5..04d5886 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -95,6 +95,13 @@
 		spdif-controller = <&spdif>;
 		spdif-out;
 	};
+
+	sii902x_reset: sii902x-reset {
+		compatible = "gpio-reset";
+		reset-gpios = <&gpio2 19 1>;
+		reset-delay-us = <100000>;
+		#reset-cells = <0>;
+	};
 };
 
 &audmux {
@@ -349,6 +356,16 @@
 		SPKVDD2-supply = <&reg_aud4v>;
 		amic-mono;
 	};
+
+	sii902x@39 {
+		compatible = "SiI,sii902x";
+		interrupt-parent = <&gpio2>;
+		interrupts = <10 2>;
+		mode_str ="1280x720M@60";
+		bits-per-pixel = <32>;
+		resets = <&sii902x_reset>;
+		reg = <0x39>;
+	};
 };
 
 &i2c3 {
@@ -384,6 +401,7 @@
 				MX6SL_PAD_ECSPI2_MOSI__GPIO4_IO13 0x17000
 				MX6SL_PAD_ECSPI2_SS0__GPIO4_IO15  0x17000
 				MX6SL_PAD_FEC_RX_ER__GPIO4_IO19   0x80000000
+				MX6SL_PAD_LCD_RESET__GPIO2_IO19 0x1b0b0
 			>;
 		};
 	};
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index 92f10e9..c1703be 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -977,7 +977,6 @@
 				MX6SL_PAD_LCD_ENABLE__LCD_ENABLE 0x1b0b0
 				MX6SL_PAD_LCD_HSYNC__LCD_HSYNC 0x1b0b0
 				MX6SL_PAD_LCD_VSYNC__LCD_VSYNC 0x1b0b0
-				MX6SL_PAD_LCD_RESET__LCD_RESET 0x1b0b0
 			>;
 		};
 	};
diff --git a/arch/arm/configs/imx_v7_defconfig b/arch/arm/configs/imx_v7_defconfig
index 92d0b10..280554c 100644
--- a/arch/arm/configs/imx_v7_defconfig
+++ b/arch/arm/configs/imx_v7_defconfig
@@ -161,8 +161,8 @@ CONFIG_IMX2_WDT=y
 CONFIG_MFD_DA9052_I2C=y
 CONFIG_MFD_MC13XXX_SPI=y
 CONFIG_MFD_MC13XXX_I2C=y
-CONFIG_MFD_SI476X_CORE=y
 CONFIG_MFD_MAX17135=y
+CONFIG_MFD_SI476X_CORE=y
 CONFIG_REGULATOR=y
 CONFIG_REGULATOR_FIXED_VOLTAGE=y
 CONFIG_REGULATOR_DA9052=y
@@ -200,6 +200,7 @@ CONFIG_FB_MXC_MIPI_DSI=y
 CONFIG_FB_MXC_TRULY_WVGA_SYNC_PANEL=y
 CONFIG_FB_MXC_HDMI=y
 CONFIG_FB_MXC_EINK_PANEL=y
+CONFIG_FB_MXS_SII902X=y
 CONFIG_FRAMEBUFFER_CONSOLE=y
 CONFIG_FRAMEBUFFER_CONSOLE_DETECT_PRIMARY=y
 CONFIG_FONTS=y
-- 
1.7.5.4

