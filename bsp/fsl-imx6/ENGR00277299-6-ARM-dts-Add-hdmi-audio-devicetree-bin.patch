From 3c707d5f0d8a1a0c89289cbe3eccc7d78464f278 Mon Sep 17 00:00:00 2001
From: Nicolin Chen <b42378@freescale.com>
Date: Mon, 2 Sep 2013 11:13:55 +0800
Subject: [PATCH 0187/1072] ENGR00277299-6 ARM: dts: Add hdmi audio devicetree
 binding for imx6qdl

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit 83b158d85a1b15b0d8897f020adeef63716fceb7

Add hdmi audio devicetree binding for i.MX6Q/DL series and add its support
for SabreAuto and SabreSD boards.

Signed-off-by: Nicolin Chen <b42378@freescale.com>
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 arch/arm/boot/dts/imx6dl.dtsi            |    9 +++++++++
 arch/arm/boot/dts/imx6q.dtsi             |    9 +++++++++
 arch/arm/boot/dts/imx6qdl-sabreauto.dtsi |   11 +++++++++++
 arch/arm/boot/dts/imx6qdl-sabresd.dtsi   |   11 +++++++++++
 4 files changed, 40 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6dl.dtsi b/arch/arm/boot/dts/imx6dl.dtsi
index 76868b0..6a8e6a3 100644
--- a/arch/arm/boot/dts/imx6dl.dtsi
+++ b/arch/arm/boot/dts/imx6dl.dtsi
@@ -108,6 +108,15 @@
 			status = "disabled";
 		};
 
+		hdmi_audio: hdmi_audio@00120000 {
+			compatible = "fsl,imx6dl-hdmi-audio";
+			clocks = <&clks 124>, <&clks 123>;
+			clock-names = "hdmi_isfr", "hdmi_iahb";
+			dmas = <&sdma 2 22 0>;
+			dma-names = "tx";
+			status = "disabled";
+		};
+
 		hdmi_cec: hdmi_cec@00120000 {
 			compatible = "fsl,imx6dl-hdmi-cec";
 			interrupts = <0 115 0x04>;
diff --git a/arch/arm/boot/dts/imx6q.dtsi b/arch/arm/boot/dts/imx6q.dtsi
index a7246d4..82535a4 100644
--- a/arch/arm/boot/dts/imx6q.dtsi
+++ b/arch/arm/boot/dts/imx6q.dtsi
@@ -127,6 +127,15 @@
 			status = "disabled";
 		};
 
+		hdmi_audio: hdmi_audio@00120000 {
+			compatible = "fsl,imx6q-hdmi-audio";
+			clocks = <&clks 124>, <&clks 123>;
+			clock-names = "hdmi_isfr", "hdmi_iahb";
+			dmas = <&sdma 2 22 0>;
+			dma-names = "tx";
+			status = "disabled";
+		};
+
 		hdmi_cec: hdmi_cec@00120000 {
 			compatible = "fsl,imx6q-hdmi-cec";
 			interrupts = <0 115 0x04>;
diff --git a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
index 05d059a..72d4de0 100644
--- a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
@@ -150,6 +150,13 @@
 		mux-ext-port = <5>;
 	};
 
+	sound-hdmi {
+		compatible = "fsl,imx6q-audio-hdmi",
+			     "fsl,imx-audio-hdmi";
+		model = "imx-audio-hdmi";
+		hdmi-controller = <&hdmi_audio>;
+	};
+
 	sound-spdif {
 		compatible = "fsl,imx-audio-spdif",
 			   "fsl,imx-sabreauto-spdif";
@@ -206,6 +213,10 @@
 	fsl,cpu_pdnscr_iso = <0x1>;
 };
 
+&hdmi_audio {
+	status = "okay";
+};
+
 &hdmi_cec {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hdmi_cec_1>;
diff --git a/arch/arm/boot/dts/imx6qdl-sabresd.dtsi b/arch/arm/boot/dts/imx6qdl-sabresd.dtsi
index 94d10ca..676ce6df 100644
--- a/arch/arm/boot/dts/imx6qdl-sabresd.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-sabresd.dtsi
@@ -122,6 +122,13 @@
 		mux-ext-port = <3>;
 	};
 
+	sound-hdmi {
+		compatible = "fsl,imx6q-audio-hdmi",
+			     "fsl,imx-audio-hdmi";
+		model = "imx-audio-hdmi";
+		hdmi-controller = <&hdmi_audio>;
+	};
+
 	mxcfb1: fb@0 {
 		compatible = "fsl,mxc_sdc_fb";
 		disp_dev = "ldb";
@@ -249,6 +256,10 @@
 	pu-supply = <&pu_dummy>; /* ldo-bypass:use pu_dummy if VDDSOC share with VDDPU */
 };
 
+&hdmi_audio {
+	status = "okay";
+};
+
 &hdmi_cec {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hdmi_cec_2>;
-- 
1.7.5.4

