From 5fad92456b580d054c5e05d2bf3394a31fc7c552 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 14 Feb 2014 16:27:28 +0800
Subject: [PATCH 1068/1072] fsl-imx6q: Fix build fail for the gpu.

Since Mutex is a void point, When init Mutex, we need to convert the point type.

drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c: In function 'gckOS_CreateMutex':
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3046:5: error: dereferencing 'void *' pointer [-Werror]
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3046:5: error: request for member 'lock' in something not a structure or union
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3046:5: error: dereferencing 'void *' pointer [-Werror]
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3046:5: error: request for member 'lock' in something not a structure or union
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c: In function 'gckOS_DeleteMutex':
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3091:5: error: dereferencing 'void *' pointer [-Werror]
drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c:3091:5: error: request for member 'lock' in something not a structure or union
cc1: all warnings being treated as errors

The introduce commit:
commit a341f06b8bc88b1e7b6660eb5cbe56f1dc65e311
Author: Shawn Guo <shawn.guo@freescale.com>
Date:   Mon Jul 22 21:55:36 2013 +0800

    ENGR00240988: gpu: copy gpu-viv driver from 3.5.7 kernel

    git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
    commit 931173e5a0066a73b74ccc6ef9bf96b54d25d345

    This is a direct copy of folder drivers/mxc/gpu-viv from 3.5.7 kernel.

    Signed-off-by: Shawn Guo <shawn.guo@freescale.com>

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 .../gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c b/drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c
index 7f41087..d5931dc 100644
--- a/drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c
+++ b/drivers/mxc/gpu-viv/hal/os/linux/kernel/gc_hal_kernel_os.c
@@ -3043,7 +3043,7 @@ gckOS_CreateMutex(
     gcmkONERROR(gckOS_Allocate(Os, gcmSIZEOF(struct mutex), Mutex));
 
     /* Initialize the mutex. */
-    mutex_init(*Mutex);
+    mutex_init((struct mutex *)*Mutex);
 
     /* Return status. */
     gcmkFOOTER_ARG("*Mutex=0x%X", *Mutex);
@@ -3088,7 +3088,7 @@ gckOS_DeleteMutex(
     gcmkVERIFY_ARGUMENT(Mutex != gcvNULL);
 
     /* Destroy the mutex. */
-    mutex_destroy(Mutex);
+    mutex_destroy((struct mutex *)Mutex);
 
     /* Free the mutex structure. */
     gcmkONERROR(gckOS_Free(Os, Mutex));
-- 
1.7.5.4

