From 0e2b89135237e66b5f1bfc6024235a8cade59f74 Mon Sep 17 00:00:00 2001
From: Liu Ying <Ying.Liu@freescale.com>
Date: Wed, 11 Sep 2013 18:25:44 +0800
Subject: [PATCH 0857/1072] ENGR00279226 media: ov5642: correct io_regulator
 sanity check

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit 945875fca86ed63ff39dd9a9bd6fe8ba257e5ad0

The following commit introduced a wrong sanity check for
the io_regulator which is intended to be got from device tree.
a364635a535705a8c16df49ff9bc7b9362b083ec

This patch corrects the sanity check.

Signed-off-by: Liu Ying <Ying.Liu@freescale.com>
(cherry picked from commit a0ff4d112dcd8a71547f2b95731f2fedb21a77e4)
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 drivers/media/platform/mxc/capture/ov5642.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/media/platform/mxc/capture/ov5642.c b/drivers/media/platform/mxc/capture/ov5642.c
index e399c19..0422865 100755
--- a/drivers/media/platform/mxc/capture/ov5642.c
+++ b/drivers/media/platform/mxc/capture/ov5642.c
@@ -3054,7 +3054,7 @@ static int ov5642_power_on(struct device *dev)
 	int ret = 0;
 
 	io_regulator = devm_regulator_get(dev, "DOVDD");
-	if (io_regulator) {
+	if (!IS_ERR(io_regulator)) {
 		regulator_set_voltage(io_regulator,
 				      OV5642_VOLTAGE_DIGITAL_IO,
 				      OV5642_VOLTAGE_DIGITAL_IO);
-- 
1.7.5.4

