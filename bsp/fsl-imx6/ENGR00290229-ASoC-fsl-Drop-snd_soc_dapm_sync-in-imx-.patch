From a6dffe8479f0fe119dd3882332d0c3ea9707a8a6 Mon Sep 17 00:00:00 2001
From: Nicolin Chen <b42378@freescale.com>
Date: Fri, 29 Nov 2013 17:44:39 +0800
Subject: [PATCH 0985/1072] ENGR00290229 ASoC: fsl: Drop snd_soc_dapm_sync()
 in imx-wm8962

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit ad64da1183025af28eb4e03981a81ebbc8087092

As DAPM would do the sync() for us, we don't need to handle it by ourselves.
And leaving snd_soc_dapm_sync() here is dangerous because it would disable
the clock from WM8962 during the short period of the output route changing
since we don't leave the alternative route's enanbling to this machine driver
but to DAPM core.

Acked-by: Wang Shengjiu <b02247@freescale.com>
Signed-off-by: Nicolin Chen <b42378@freescale.com>
(cherry picked from commit 2495284a7f44478031816482e3e58a7ce109dc8c)
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 sound/soc/fsl/imx-wm8962.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/sound/soc/fsl/imx-wm8962.c b/sound/soc/fsl/imx-wm8962.c
index 586fe87..0af986a 100644
--- a/sound/soc/fsl/imx-wm8962.c
+++ b/sound/soc/fsl/imx-wm8962.c
@@ -108,7 +108,6 @@ static int hpjack_status_check(void)
 		snd_soc_dapm_enable_pin(&priv->codec->dapm, "Ext Spk");
 		ret = 0;
 	}
-	snd_soc_dapm_sync(&priv->codec->dapm);
 
 	envp[0] = "NAME=headphone";
 	envp[1] = buf;
@@ -154,7 +153,6 @@ static int micjack_status_check(void)
 		snd_soc_dapm_enable_pin(&priv->codec->dapm, "DMIC");
 		ret = 0;
 	}
-	snd_soc_dapm_sync(&priv->codec->dapm);
 
 	envp[0] = "NAME=microphone";
 	envp[1] = buf;
-- 
1.7.5.4

