From 74e98bb4455b0df4fa64e492a43cb9e598a67f6a Mon Sep 17 00:00:00 2001
From: Luwei Zhou <b45643@freescale.com>
Date: Sat, 12 Oct 2013 13:48:13 +0800
Subject: [PATCH 0303/1072] ENGR00283470 ARM: dts: imxqdl-sabreauto: add dts
 support for MLB150

git://git.freescale.com/imx/linux-2.6-imx.git imx_3.10.17_1.0.0_beta
commit 2c5481903f659e9110a3fdfe9e477ce25d28e9c9

This patch add MLB150 dts support on SabreAuto.The PAD setting
is aligned to 3.0.35 kernel.

Signed-off-by: Luwei Zhou <b45643@freescale.com>
Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 arch/arm/boot/dts/imx6qdl-sabreauto.dtsi |    6 ++++++
 arch/arm/boot/dts/imx6qdl.dtsi           |   13 +++++++++----
 2 files changed, 15 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
index 448884f..686f5ab 100644
--- a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
@@ -567,6 +567,12 @@
 	lanes = <1>;
 };
 
+&mlb {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_mlb_2>;
+	status = "okay";
+};
+
 &pcie {
 	status = "okay";
 };
diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index a7b98c0..2eb1416 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -772,9 +772,14 @@
 				status = "disabled";
 			};
 
-			mlb@0218c000 {
+			mlb: mlb@0218c000 {
+				compatible = "fsl,imx6q-mlb150";
 				reg = <0x0218c000 0x4000>;
 				interrupts = <0 53 0x04 0 117 0x04 0 126 0x04>;
+				clocks = <&clks 139>, <&clks 175>;
+				clock-names = "mlb", "pll8_mlb";
+				iram = <&ocram>;
+				status = "disabled";
 			};
 
 			usdhc1: usdhc@02190000 {
@@ -1379,9 +1384,9 @@
 
 		pinctrl_mlb_2: mlbgrp-2 {
 			fsl,pins = <
-				MX6QDL_PAD_ENET_TXD1__MLB_CLK 0x71
-				MX6QDL_PAD_GPIO_6__MLB_SIG    0x71
-				MX6QDL_PAD_GPIO_2__MLB_DATA   0x71
+				MX6QDL_PAD_ENET_TXD1__MLB_CLK 0x80000000
+				MX6QDL_PAD_GPIO_6__MLB_SIG    0x80000000
+				MX6QDL_PAD_GPIO_2__MLB_DATA   0x80000000
 			>;
 		};
 	};
-- 
1.7.5.4

