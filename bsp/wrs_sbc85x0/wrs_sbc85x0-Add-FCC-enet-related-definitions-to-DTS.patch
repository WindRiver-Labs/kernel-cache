From 37615618fe2e730aa90f884ec3f8f00b394cd68a Mon Sep 17 00:00:00 2001
From: Tony Liu <Bo.Liu@windriver.com>
Date: Wed, 10 Mar 2010 11:48:09 +0800
Subject: [PATCH 3/3] wrs_sbc85x0: Add FCC enet related definitions to DTS

1. Add mdio definition in CPM section.
2. Modify the definition of phy2 and phy3, based on sbc8560 board spec.

Signed-off-by: Liang Li <Liang.Li@windriver.com>
---
 arch/powerpc/boot/dts/sbc8560.dts |   30 ++++++++++++++++++------------
 1 files changed, 18 insertions(+), 12 deletions(-)

diff --git a/arch/powerpc/boot/dts/sbc8560.dts b/arch/powerpc/boot/dts/sbc8560.dts
index 9e13ed8..6f029f5 100644
--- a/arch/powerpc/boot/dts/sbc8560.dts
+++ b/arch/powerpc/boot/dts/sbc8560.dts
@@ -183,18 +183,6 @@
 					reg = <0x1a>;
 					device_type = "ethernet-phy";
 				};
-				phy2: ethernet-phy@1b {
-					interrupt-parent = <&mpic>;
-					interrupts = <0x8 0x1>;
-					reg = <0x1b>;
-					device_type = "ethernet-phy";
-				};
-				phy3: ethernet-phy@1c {
-					interrupt-parent = <&mpic>;
-					interrupts = <0x8 0x1>;
-					reg = <0x1c>;
-					device_type = "ethernet-phy";
-				};
 				tbi0: tbi-phy@11 {
 					reg = <0x11>;
 					device_type = "tbi-phy";
@@ -275,6 +263,24 @@
 				compatible = "fsl,mpc8560-cpm-pic", "fsl,cpm2-pic";
 			};
 
+			mdio@90d40 {                            /* For FCCs */
+				#address-cells = <1>;
+				#size-cells = <0>;
+				compatible = "fsl,cpm2-mdio-bitbang";
+				reg = <0x90d00 0x14>;
+				fsl,mdio-pin = <9>;
+				fsl,mdc-pin = <10>;
+
+				phy2: ethernet-phy@0 {
+							reg = <0x0>;
+							device_type = "ethernet-phy";
+				};
+				phy3: ethernet-phy@1 {
+							reg = <0x1>;
+							device_type = "ethernet-phy";
+				};
+			};
+
 			enet2: ethernet@91320 {
 				device_type = "network";
 				compatible = "fsl,mpc8560-fcc-enet",
-- 
1.6.5.2

