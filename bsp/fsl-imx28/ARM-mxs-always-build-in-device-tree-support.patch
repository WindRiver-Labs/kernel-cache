From b330cd230493fbf70426fb471f76df50aa144fac Mon Sep 17 00:00:00 2001
From: Shawn Guo <shawn.guo@linaro.org>
Date: Fri, 4 May 2012 21:42:41 +0800
Subject: [PATCH 034/169] ARM: mxs: always build in device tree support

As the ultimate for mxs platform is to convert over to device tree,
let's start always building in device tree support for the platform.

Signed-off-by: Shawn Guo <shawn.guo@linaro.org>
Acked-by: Marek Vasut <marex@denx.de>
(cherry picked from commit 6c4d4efb9d19017f0eef3893912f3dec513ef8e9)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/Kconfig               |    1 +
 arch/arm/configs/mxs_defconfig |    1 +
 arch/arm/mach-mxs/Kconfig      |    1 -
 3 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/arm/Kconfig b/arch/arm/Kconfig
index 30ee2fd..97467aa 100644
--- a/arch/arm/Kconfig
+++ b/arch/arm/Kconfig
@@ -487,6 +487,7 @@ config ARCH_MXS
 	select COMMON_CLK
 	select HAVE_CLK_PREPARE
 	select PINCTRL
+	select USE_OF
 	help
 	  Support for Freescale MXS-based family of processors
 
diff --git a/arch/arm/configs/mxs_defconfig b/arch/arm/configs/mxs_defconfig
index 70d0bf4..82f42df 100644
--- a/arch/arm/configs/mxs_defconfig
+++ b/arch/arm/configs/mxs_defconfig
@@ -22,6 +22,7 @@ CONFIG_BLK_DEV_INTEGRITY=y
 # CONFIG_IOSCHED_DEADLINE is not set
 # CONFIG_IOSCHED_CFQ is not set
 CONFIG_ARCH_MXS=y
+CONFIG_MACH_MXS_DT=y
 CONFIG_MACH_MX23EVK=y
 CONFIG_MACH_MX28EVK=y
 CONFIG_MACH_STMP378X_DEVB=y
diff --git a/arch/arm/mach-mxs/Kconfig b/arch/arm/mach-mxs/Kconfig
index 8138a13..91cf062 100644
--- a/arch/arm/mach-mxs/Kconfig
+++ b/arch/arm/mach-mxs/Kconfig
@@ -25,7 +25,6 @@ config MACH_MXS_DT
 	bool "Support MXS platforms from device tree"
 	select SOC_IMX23
 	select SOC_IMX28
-	select USE_OF
 	help
 	  Include support for Freescale MXS platforms(i.MX23 and i.MX28)
 	  using the device tree for discovery
-- 
1.7.0

