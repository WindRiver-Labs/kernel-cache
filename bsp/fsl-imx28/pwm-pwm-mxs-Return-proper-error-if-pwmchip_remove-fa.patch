From 966b42f1bbbda8eddf5e95e9704074a3ec148b71 Mon Sep 17 00:00:00 2001
From: Axel Lin <axel.lin@gmail.com>
Date: Sun, 1 Jul 2012 12:58:00 +0800
Subject: [PATCH 168/169] pwm: pwm-mxs: Return proper error if pwmchip_remove() fails

Signed-off-by: Axel Lin <axel.lin@gmail.com>
Acked-by: Shawn Guo <shawn.guo@linaro.org>
Signed-off-by: Thierry Reding <thierry.reding@avionic-design.de>
(cherry picked from commit 457fd768ee1f7c78e85dfbe86329e6b24eb36514)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/pwm/pwm-mxs.c |    4 +---
 1 files changed, 1 insertions(+), 3 deletions(-)

diff --git a/drivers/pwm/pwm-mxs.c b/drivers/pwm/pwm-mxs.c
index 269d7c2..e585264 100644
--- a/drivers/pwm/pwm-mxs.c
+++ b/drivers/pwm/pwm-mxs.c
@@ -178,9 +178,7 @@ static int __devexit mxs_pwm_remove(struct platform_device *pdev)
 {
 	struct mxs_pwm_chip *mxs = platform_get_drvdata(pdev);
 
-	pwmchip_remove(&mxs->chip);
-
-	return 0;
+	return pwmchip_remove(&mxs->chip);
 }
 
 static struct of_device_id mxs_pwm_dt_ids[] = {
-- 
1.7.0

