From 9b8392a0eab7bc5195d783e0dc853cc4da1b41f6 Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Tue, 16 Dec 2008 19:07:17 +0800
Subject: [PATCH] rmi xlr 8250 support

Reading and writing controller register(MMIO) can use __raw_readl/writel to replace
phoenix_read_reg()/phoenix_write_reg() in RMI XLR platform.

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/serial/8250.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/serial/8250.c b/drivers/serial/8250.c
index 731c8e8..5718e1e 100644
--- a/drivers/serial/8250.c
+++ b/drivers/serial/8250.c
@@ -366,7 +366,7 @@ static unsigned int serial_in(struct uart_8250_port *up, int offset)
 	case UPIO_MEM32:
 		return readl(up->port.membase + offset);
 
-#ifdef CONFIG_SERIAL_8250_AU1X00
+#if defined(CONFIG_SERIAL_8250_AU1X00) || defined(CONFIG_RMI_PHOENIX)
 	case UPIO_AU:
 		return __raw_readl(up->port.membase + offset);
 #endif
@@ -405,7 +405,7 @@ serial_out(struct uart_8250_port *up, int offset, int value)
 		writel(value, up->port.membase + offset);
 		break;
 
-#ifdef CONFIG_SERIAL_8250_AU1X00
+#if defined(CONFIG_SERIAL_8250_AU1X00) || defined(CONFIG_RMI_PHOENIX)
 	case UPIO_AU:
 		__raw_writel(value, up->port.membase + offset);
 		break;
-- 
1.6.0.2.GIT

