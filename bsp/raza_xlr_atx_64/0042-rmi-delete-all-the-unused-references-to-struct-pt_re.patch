From e1504b6223b47adf2833d2d63e241349203c2b7e Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Sun, 21 Jun 2009 18:38:51 -0400
Subject: [PATCH 42/49] rmi: delete all the unused references to struct pt_regs

This is leftover stuff from when older kernels were always
passing these around with IRQ operations.  They serve no
purpose anymore.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/mips/rmi/phoenix/irq.c     |    7 +++----
 arch/mips/rmi/phoenix/on_chip.c |    2 +-
 arch/mips/rmi/phoenix/smp.c     |    2 +-
 include/asm-mips/rmi/pic.h      |    5 ++---
 4 files changed, 7 insertions(+), 9 deletions(-)

diff --git a/arch/mips/rmi/phoenix/irq.c b/arch/mips/rmi/phoenix/irq.c
index 8be3b7b..78e7955 100644
--- a/arch/mips/rmi/phoenix/irq.c
+++ b/arch/mips/rmi/phoenix/irq.c
@@ -58,7 +58,7 @@
  * for interrupt lines 
 */
 
-extern void phoenix_timer_interrupt(struct pt_regs *regs, int irq);
+extern void phoenix_timer_interrupt(int irq);
 extern void phoenix_smp_time_init(void);
 extern void *ht_config_base;
 extern int link0, link1;
@@ -361,7 +361,7 @@ void __init init_phoenix_irqs(void)
 
 }
 
-void do_phnx_IRQ(unsigned int irq, struct pt_regs *regs)
+void do_phnx_IRQ(unsigned int irq)
 {
 #ifdef CONFIG_SMP
 #ifdef CONFIG_PHOENIX_IP_FLOW_AFFINITY
@@ -455,7 +455,6 @@ static int __flb(uint64_t dw)
 asmlinkage void plat_irq_dispatch(void)
 {
 	uint64_t eirr;
-	struct pt_regs *pt_regs = current_thread_info()->regs;
 	int i = 0;
 
 	eirr = read_64bit_cp0_eirr() & read_64bit_cp0_eimr();
@@ -470,6 +469,6 @@ asmlinkage void plat_irq_dispatch(void)
 	/*ack eirr */
 	write_64bit_cp0_eirr(1ULL << i);
 
-	do_phnx_IRQ(i, pt_regs);
+	do_phnx_IRQ(i);
 	return;
 }
diff --git a/arch/mips/rmi/phoenix/on_chip.c b/arch/mips/rmi/phoenix/on_chip.c
index 1ef253c..236ba59 100644
--- a/arch/mips/rmi/phoenix/on_chip.c
+++ b/arch/mips/rmi/phoenix/on_chip.c
@@ -414,7 +414,7 @@ void phoenix_user_mac_update_time(void) { }
 #endif /* CONFIG_PHOENIX_MAC */
 
 __u32 msgrng_msg_cycles = 0;
-void phnx_msgring_int_handler(unsigned int irq, struct pt_regs *regs)
+void phnx_msgring_int_handler(unsigned int irq)
 {
 	unsigned long mflags;
 	__u32 cycles = 0;
diff --git a/arch/mips/rmi/phoenix/smp.c b/arch/mips/rmi/phoenix/smp.c
index 1b639dd..90c26d6 100644
--- a/arch/mips/rmi/phoenix/smp.c
+++ b/arch/mips/rmi/phoenix/smp.c
@@ -120,7 +120,7 @@ extern __u64 phnx_irq_mask;
 extern void skb_transfer_finish(void);
 #endif /* CONFIG_PHOENIX_IP_FLOW_AFFINITY */
 
-void phoenix_ipi_handler(int irq, struct pt_regs *regs)
+void phoenix_ipi_handler(int irq)
 {
 	phoenix_ipi_stats[smp_processor_id()]++;
 
diff --git a/include/asm-mips/rmi/pic.h b/include/asm-mips/rmi/pic.h
index 3646727..ffde953 100644
--- a/include/asm-mips/rmi/pic.h
+++ b/include/asm-mips/rmi/pic.h
@@ -227,9 +227,8 @@ static __inline__ void pic_update_control(__u32 control)
 #define PIC_IRT_LAST_IRQ() (is_xls()?PIC_IRT_LAST_XLS_IRQ:PIC_IRT_LAST_XLR_IRQ)
 #define PIC_BRIDGE_TB_IRQ() (is_xls()?PIC_BRIDGE_TB_XLS_IRQ:PIC_BRIDGE_TB_XLR_IRQ)
 
-struct pt_regs;
-extern void phoenix_ipi_handler(int irq, struct pt_regs *regs);
-extern void phnx_msgring_int_handler(unsigned int irq, struct pt_regs *regs);
+extern void phoenix_ipi_handler(int irq);
+extern void phnx_msgring_int_handler(unsigned int irq);
 
 #endif
 
-- 
1.6.3.2

