From 0ed82221c0a9dac335423720d87514df03e27117 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 17 Jun 2009 10:48:25 -0400
Subject: [PATCH 38/49] rmi: use for_each_possible_cpu

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/mips/rmi/phoenix/on_chip.c         |    2 +-
 arch/mips/rmi/phoenix/on_chip_devtree.c |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/rmi/phoenix/on_chip.c b/arch/mips/rmi/phoenix/on_chip.c
index de493f7..1ef253c 100644
--- a/arch/mips/rmi/phoenix/on_chip.c
+++ b/arch/mips/rmi/phoenix/on_chip.c
@@ -596,7 +596,7 @@ void on_chip_init(void)
 
 	phoenix_msgring_cpu_init();
 
-	for(i=0;i<NR_CPUS;i++)
+	for_each_possible_cpu(i)
 		for(j=0;j<PHNX_MAX_COUNTERS;j++)
 			atomic_set(&phnx_counters[i][j], 0);
 }
diff --git a/arch/mips/rmi/phoenix/on_chip_devtree.c b/arch/mips/rmi/phoenix/on_chip_devtree.c
index 453d753..68245c2 100644
--- a/arch/mips/rmi/phoenix/on_chip_devtree.c
+++ b/arch/mips/rmi/phoenix/on_chip_devtree.c
@@ -166,14 +166,14 @@ int rmi_dev_register_msgring_handler(void)
 	int i=0, timer_id;
 	int core_processed = 0xff;
 
-	for (i=0; i < NR_CPUS ;i++) {
+	for_each_possible_cpu(i) {
 		if (cpu_isset(i, cpu_online_map)) 
 			hard_cpu_online_map |= (1 << cpu_logical_map(i));
 	}
 
 	if (!ret && phnx_test_and_set(&msgring_int_en)) {
 
-		for (i=0; i < NR_CPUS ;i++) {
+		for_each_possible_cpu(i) {
 			if (cpu_isset(i, cpu_online_map)) {
 				core = cpu_logical_map(i) / 4;
 				if(core_processed == core)
-- 
1.6.3.2

