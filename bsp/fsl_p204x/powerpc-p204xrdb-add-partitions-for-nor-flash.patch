From fb6b7f278ddd4da9fa7a133570f42e4da9f97565 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Fri, 2 Dec 2011 10:45:29 +0800
Subject: [PATCH 09/35] powerpc/p204xrdb: add partitions for nor flash

Add partitions for nor flash on Freescale p2040rdb and p2041rdb boards.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/p2040rdb-usdpaa.dts |   34 +++++++++++++++++++++++++++++
 arch/powerpc/boot/dts/p2040rdb.dts        |   34 +++++++++++++++++++++++++++++
 arch/powerpc/boot/dts/p2041rdb-usdpaa.dts |   34 +++++++++++++++++++++++++++++
 arch/powerpc/boot/dts/p2041rdb.dts        |   34 +++++++++++++++++++++++++++++
 4 files changed, 136 insertions(+)

diff --git a/arch/powerpc/boot/dts/p2040rdb-usdpaa.dts b/arch/powerpc/boot/dts/p2040rdb-usdpaa.dts
index 0e8a95c..590da5b 100644
--- a/arch/powerpc/boot/dts/p2040rdb-usdpaa.dts
+++ b/arch/powerpc/boot/dts/p2040rdb-usdpaa.dts
@@ -1269,6 +1269,40 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "nor rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "nor kernel";
+				reg = <0x20000 0x800000>;
+			};
+			partition@820000 {
+				label = "nor dtb";
+				reg = <0x820000 0x20000>;
+			};
+			partition@840000 {
+				label = "nor fs1";
+				reg = <0x840000 0x67c0000>;
+			};
+			partition@7000000 {
+				label = "nor fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "nor fs2";
+				reg = <0x7020000 0xf40000>;
+			};
+			partition@7f60000 {
+				label = "nor u-boot";
+				reg = <0x7f60000 0xa0000>;
+				read-only;
+			};
 		};
 	};
 
diff --git a/arch/powerpc/boot/dts/p2040rdb.dts b/arch/powerpc/boot/dts/p2040rdb.dts
index 16ee80d..a6b7591 100644
--- a/arch/powerpc/boot/dts/p2040rdb.dts
+++ b/arch/powerpc/boot/dts/p2040rdb.dts
@@ -1260,6 +1260,40 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "nor rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "nor kernel";
+				reg = <0x20000 0x800000>;
+			};
+			partition@820000 {
+				label = "nor dtb";
+				reg = <0x820000 0x20000>;
+			};
+			partition@840000 {
+				label = "nor fs1";
+				reg = <0x840000 0x67c0000>;
+			};
+			partition@7000000 {
+				label = "nor fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "nor fs2";
+				reg = <0x7020000 0xf40000>;
+			};
+			partition@7f60000 {
+				label = "nor u-boot";
+				reg = <0x7f60000 0xa0000>;
+				read-only;
+			};
 		};
 	};
 
diff --git a/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts b/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
index c268773..60bc422 100644
--- a/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
+++ b/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
@@ -1297,6 +1297,40 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "nor rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "nor kernel";
+				reg = <0x20000 0x800000>;
+			};
+			partition@820000 {
+				label = "nor dtb";
+				reg = <0x820000 0x20000>;
+			};
+			partition@840000 {
+				label = "nor fs1";
+				reg = <0x840000 0x67c0000>;
+			};
+			partition@7000000 {
+				label = "nor fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "nor fs2";
+				reg = <0x7020000 0xf40000>;
+			};
+			partition@7f60000 {
+				label = "nor u-boot";
+				reg = <0x7f60000 0xa0000>;
+				read-only;
+			};
 		};
 	};
 
diff --git a/arch/powerpc/boot/dts/p2041rdb.dts b/arch/powerpc/boot/dts/p2041rdb.dts
index 92a4d37..b2e2e74 100644
--- a/arch/powerpc/boot/dts/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/p2041rdb.dts
@@ -1288,6 +1288,40 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "nor rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "nor kernel";
+				reg = <0x20000 0x800000>;
+			};
+			partition@820000 {
+				label = "nor dtb";
+				reg = <0x820000 0x20000>;
+			};
+			partition@840000 {
+				label = "nor fs1";
+				reg = <0x840000 0x67c0000>;
+			};
+			partition@7000000 {
+				label = "nor fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "nor fs2";
+				reg = <0x7020000 0xf40000>;
+			};
+			partition@7f60000 {
+				label = "nor u-boot";
+				reg = <0x7f60000 0xa0000>;
+				read-only;
+			};
 		};
 	};
 
-- 
1.7.9.7

