From 561688521c6551bc461e20bb225d699df55bcd3e Mon Sep 17 00:00:00 2001
From: Liang Li <liang.li@windriver.com>
Date: Fri, 11 Jan 2013 12:07:33 +0800
Subject: [PATCH] misc/lis331dlh: fix function name for PM

Function name for .suspend and .resume of pm_ops is wrong when
CONFIG_PM is off. Just follow the modern driver style to set the two
in case CONFIG_PM is enabled.

Signed-off-by: Liang Li <liang.li@windriver.com>
---
 drivers/misc/lis331dlh/lis331dlh_acc.c |    5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/misc/lis331dlh/lis331dlh_acc.c b/drivers/misc/lis331dlh/lis331dlh_acc.c
index a5db5fe..16e6c20 100644
--- a/drivers/misc/lis331dlh/lis331dlh_acc.c
+++ b/drivers/misc/lis331dlh/lis331dlh_acc.c
@@ -1436,9 +1436,6 @@ static int lis331dlh_acc_suspend(struct i2c_client *client, pm_message_t mesg)
 	acc->on_before_suspend = atomic_read(&acc->enabled);
 	return lis331dlh_acc_disable(acc);
 }
-#else
-#define lis3dh_acc_suspend	NULL
-#define lis3dh_acc_resume	NULL
 #endif /* CONFIG_PM */
 
 static const struct i2c_device_id lis331dlh_acc_id[]
@@ -1453,8 +1450,10 @@ static struct i2c_driver lis331dlh_acc_driver = {
 	},
 	.probe = lis331dlh_acc_probe,
 	.remove = __devexit_p(lis331dlh_acc_remove),
+#ifdef CONFIG_PM
 	.resume = lis331dlh_acc_resume,
 	.suspend = lis331dlh_acc_suspend,
+#endif
 	.id_table = lis331dlh_acc_id,
 	.class = I2C_CLASS_HWMON,
 	.detect = lis331dlh_acc_detect,
-- 
1.7.9.7

