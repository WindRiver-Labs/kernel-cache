From c610e699a53a826a0567c68729a8d29ea3494a90 Mon Sep 17 00:00:00 2001
From: fupan li <fupan.li@windriver.com>
Date: Fri, 1 Nov 2013 15:33:04 +0800
Subject: [PATCH 005/142] spidev: add support for SPI controller in ACPI mode

The code changes are specific to Intel Baytrail platform.

Signed-off-by: Chang, Rebecca Swee Fun <rebecca.swee.fun.chang@intel.com>
Signed-off-by: fupan li <fupan.li@windriver.com>
---
 drivers/spi/spidev.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/drivers/spi/spidev.c b/drivers/spi/spidev.c
index e44abc9..03a10c7 100644
--- a/drivers/spi/spidev.c
+++ b/drivers/spi/spidev.c
@@ -33,6 +33,7 @@
 #include <linux/compat.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
+#include <linux/acpi.h>
 
 #include <linux/spi/spi.h>
 #include <linux/spi/spidev.h>
@@ -651,11 +652,20 @@ static const struct of_device_id spidev_dt_ids[] = {
 
 MODULE_DEVICE_TABLE(of, spidev_dt_ids);
 
+static struct acpi_device_id spidev_acpi_match[] = {
+	{ "AUTH2750", 0 },
+	{ "SPI1001", 0 },       
+	{},
+};
+
+MODULE_DEVICE_TABLE(acpi, spidev_acpi_match);
+
 static struct spi_driver spidev_spi_driver = {
 	.driver = {
 		.name =		"spidev",
 		.owner =	THIS_MODULE,
 		.of_match_table = of_match_ptr(spidev_dt_ids),
+		.acpi_match_table = ACPI_PTR(spidev_acpi_match),
 	},
 	.probe =	spidev_probe,
 	.remove =	__devexit_p(spidev_remove),
-- 
1.7.5.4

