From 27589371967f1960e650422f8ca1c64aac589a4b Mon Sep 17 00:00:00 2001
From: Peng Chao <chao.peng@windriver.com>
Date: Thu, 8 Aug 2013 17:34:33 +0800
Subject: [PATCH 122/134] intel-atom: Add baytrail ACPI support

Add bayTrail LPSS devices and bayTrail LPSS clocks.

Signed-off-by: Peng Chao <chao.peng@windriver.com>
---
 drivers/acpi/acpi_platform.c |   22 ++++++++++++++++++++++
 1 files changed, 22 insertions(+), 0 deletions(-)

diff --git a/drivers/acpi/acpi_platform.c b/drivers/acpi/acpi_platform.c
index 4996bf8..9d0395a 100644
--- a/drivers/acpi/acpi_platform.c
+++ b/drivers/acpi/acpi_platform.c
@@ -42,6 +42,18 @@ static const struct acpi_device_id acpi_platform_device_ids[] = {
 	{ "INT33C5", ACPI_PLATFORM_CLK },
 	{ "INT33C6", ACPI_PLATFORM_CLK },
 	{ "INT33C7", ACPI_PLATFORM_CLK },
+
+	/* BayTrail LPSS devices */
+	{ "80860F08", ACPI_PLATFORM_CLK },
+	{ "80860F09", ACPI_PLATFORM_CLK },
+	{ "80860F0A", ACPI_PLATFORM_CLK },
+	{ "80860F0E", ACPI_PLATFORM_CLK },
+	{ "80860F41", ACPI_PLATFORM_CLK },
+	{ "INT33B0", ACPI_PLATFORM_CLK },
+	{ "INT33B1", ACPI_PLATFORM_CLK },
+	{ "INT33B2", ACPI_PLATFORM_CLK },
+	{ "INT33BC", ACPI_PLATFORM_CLK },
+
 	{ }
 };
 
@@ -55,6 +67,16 @@ static int acpi_create_platform_clks(struct acpi_device *adev)
 		if (IS_ERR(pdev))
 			return PTR_ERR(pdev);
 	}
+
+	/* Create BayTrail LPSS clocks */
+	if (!pdev && (!strncmp(acpi_device_hid(adev), "INT33B", 6) ||
+		      !strncmp(acpi_device_hid(adev), "80860F0", 7) ||
+		      !strncmp(acpi_device_hid(adev), "80860F4", 7))) {
+		pdev = platform_device_register_simple("clk-byt", -1, NULL, 0);
+		if (IS_ERR(pdev))
+			return PTR_ERR(pdev);
+	}
+
 	return 0;
 }
 
-- 
1.7.5.4

