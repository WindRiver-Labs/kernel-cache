From 80a7312fc749be02e37d5e04acf7fc06ce1da989 Mon Sep 17 00:00:00 2001
From: Wei Yang <Wei.Yang@windriver.com>
Date: Fri, 29 Jun 2012 15:11:55 +0800
Subject: [PATCH 5/8] misc/lis331dlh: change return value of some functions to
 set device attribute

Upon  successful  completion,  these functions shall return
the number of bytes actually written to the register.

Signed-off-by: Yang Wei <wei.yang@windriver.com>
---
 drivers/misc/lis331dlh/lis331dlh_acc.c |   18 ++++++++++++------
 1 files changed, 12 insertions(+), 6 deletions(-)

diff --git a/drivers/misc/lis331dlh/lis331dlh_acc.c b/drivers/misc/lis331dlh/lis331dlh_acc.c
index e58728e..119a0d1 100644
--- a/drivers/misc/lis331dlh/lis331dlh_acc.c
+++ b/drivers/misc/lis331dlh/lis331dlh_acc.c
@@ -822,7 +822,8 @@ static ssize_t attr_set_selftest(struct device *dev,
 static ssize_t attr_set_intconfig1(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_CFG1);
+	write_reg(dev, buf, INT_CFG1);
+	return size;
 }
 
 static ssize_t attr_get_intconfig1(struct device *dev,
@@ -834,7 +835,8 @@ static ssize_t attr_get_intconfig1(struct device *dev,
 static ssize_t attr_set_duration1(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_DUR1);
+	write_reg(dev, buf, INT_DUR1);
+	return size;
 }
 
 static ssize_t attr_get_duration1(struct device *dev,
@@ -846,7 +848,8 @@ static ssize_t attr_get_duration1(struct device *dev,
 static ssize_t attr_set_thresh1(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_THS1);
+	write_reg(dev, buf, INT_THS1);
+	return size;
 }
 
 static ssize_t attr_get_thresh1(struct device *dev,
@@ -864,7 +867,8 @@ static ssize_t attr_get_source1(struct device *dev,
 static ssize_t attr_set_intconfig2(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_CFG2);
+	write_reg(dev, buf, INT_CFG2);
+	return size;
 }
 
 static ssize_t attr_get_intconfig2(struct device *dev,
@@ -876,7 +880,8 @@ static ssize_t attr_get_intconfig2(struct device *dev,
 static ssize_t attr_set_duration2(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_DUR2);
+	write_reg(dev, buf, INT_DUR2);
+	return size;
 }
 
 static ssize_t attr_get_duration2(struct device *dev,
@@ -888,7 +893,8 @@ static ssize_t attr_get_duration2(struct device *dev,
 static ssize_t attr_set_thresh2(struct device *dev,
 		struct device_attribute *attr,	const char *buf, size_t size)
 {
-	return write_reg(dev, buf, INT_THS2);
+	write_reg(dev, buf, INT_THS2);
+	return size;
 }
 
 static ssize_t attr_get_thresh2(struct device *dev,
-- 
1.7.7

