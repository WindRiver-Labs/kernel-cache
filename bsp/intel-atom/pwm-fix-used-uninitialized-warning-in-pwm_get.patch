From 0a8ef92d88ce016714b7f9f6d161a6abce47c219 Mon Sep 17 00:00:00 2001
From: Thierry Reding <thierry.reding@avionic-design.de>
Date: Wed, 11 Jul 2012 08:05:05 +0200
Subject: [PATCH 039/142] pwm: fix used-uninitialized warning in pwm_get()

commit d295b129762bf6b2b7541243f496e363580de4a2 upstream

Some versions of GCC don't seem no notice that the initialization of the
index variable is tied to that of the chip variable and falsely report
it as potentially being used uninitialized. However, to save anybody
else from tripping over this, we now initialize the index variable
unconditionally.

Originally-by: Stephen Warren <swarren@nvidia.com>
Signed-off-by: Thierry Reding <thierry.reding@avionic-design.de>
Signed-off-by: fupan li <fupan.li@windriver.com>
---
 drivers/pwm/core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/pwm/core.c b/drivers/pwm/core.c
index dbab530..ecb7690 100644
--- a/drivers/pwm/core.c
+++ b/drivers/pwm/core.c
@@ -529,9 +529,9 @@ struct pwm_device *pwm_get(struct device *dev, const char *con_id)
 	struct pwm_device *pwm = ERR_PTR(-EPROBE_DEFER);
 	const char *dev_id = dev ? dev_name(dev): NULL;
 	struct pwm_chip *chip = NULL;
+	unsigned int index = 0;
 	unsigned int best = 0;
 	struct pwm_lookup *p;
-	unsigned int index;
 	unsigned int match;
 
 	/* look up via DT first */
-- 
1.7.5.4

