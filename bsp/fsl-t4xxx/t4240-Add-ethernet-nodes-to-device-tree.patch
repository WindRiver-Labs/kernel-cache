From ccef907f9cde0a53e66c942698a9c2e695794248 Mon Sep 17 00:00:00 2001
From: Ioana Radulescu <ruxandra.radulescu@freescale.com>
Date: Fri, 29 Jun 2012 15:09:09 +0000
Subject: [PATCH 46/57] t4240: Add ethernet nodes to device tree

commit 38a323632606c95d7edc5e0ac4605f2703cd261b from
https://git.freescale.com/git-private/cgit.cgi/ppc/t4240/linux.git

Add ethernet nodes for all Fman ports on T4240 (6x1G, 2x10G)

Signed-off-by: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Signed-off-by: Andy Fleming <afleming@freescale.com>
---
 arch/powerpc/boot/dts/fsl/t4240si-post.dtsi |   75 ++++++++++++++
 arch/powerpc/boot/dts/t4240qds.dts          |  146 ++++++++++++++++++++++++++-
 2 files changed, 220 insertions(+), 1 deletion(-)

diff --git a/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi b/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
index e55c5d9..ae06f5d 100644
--- a/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
@@ -275,11 +275,46 @@
 
 /include/ "qoriq-fman3-0.dtsi"
 /include/ "qoriq-fman3-0-1g-0.dtsi"
+/include/ "qoriq-fman3-0-1g-1.dtsi"
+/include/ "qoriq-fman3-0-1g-2.dtsi"
+/include/ "qoriq-fman3-0-1g-3.dtsi"
+/include/ "qoriq-fman3-0-1g-4.dtsi"
+/include/ "qoriq-fman3-0-1g-5.dtsi"
+/include/ "qoriq-fman3-0-10g-0.dtsi"
+/include/ "qoriq-fman3-0-10g-1.dtsi"
 	fman0: fman@400000 {
 		/* tx - 1g - 0 */
 		port@a8000 {
 			fsl,qman-channel-id = <0x802>;
 		};
+		/* tx - 1g - 1 */
+		port@a9000 {
+			fsl,qman-channel-id = <0x803>;
+		};
+		/* tx - 1g - 2 */
+		port@aa000 {
+			fsl,qman-channel-id = <0x804>;
+		};
+		/* tx - 1g - 3 */
+		port@ab000 {
+			fsl,qman-channel-id = <0x805>;
+		};
+		/* tx - 1g - 4 */
+		port@ac000 {
+			fsl,qman-channel-id = <0x806>;
+		};
+		/* tx - 1g - 5 */
+		port@ad000 {
+			fsl,qman-channel-id = <0x807>;
+		};
+		/* tx - 10g - 0 */
+		port@b0000 {
+			fsl,qman-channel-id = <0x800>;
+		};
+		/* tx - 10g - 1 */
+		port@b1000 {
+			fsl,qman-channel-id = <0x801>;
+		};
 		/* offline - 1 */
 		port@82000 {
 			fsl,qman-channel-id = <0x809>;
@@ -307,7 +342,47 @@
 	};
 
 /include/ "qoriq-fman3-1.dtsi"
+/include/ "qoriq-fman3-1-1g-0.dtsi"
+/include/ "qoriq-fman3-1-1g-1.dtsi"
+/include/ "qoriq-fman3-1-1g-2.dtsi"
+/include/ "qoriq-fman3-1-1g-3.dtsi"
+/include/ "qoriq-fman3-1-1g-4.dtsi"
+/include/ "qoriq-fman3-1-1g-5.dtsi"
+/include/ "qoriq-fman3-1-10g-0.dtsi"
+/include/ "qoriq-fman3-1-10g-1.dtsi"
 	fman1: fman@500000 {
+		/* tx - 1g - 0 */
+		port@a8000 {
+			fsl,qman-channel-id = <0x822>;
+		};
+		/* tx - 1g - 1 */
+		port@a9000 {
+			fsl,qman-channel-id = <0x823>;
+		};
+		/* tx - 1g - 2 */
+		port@aa000 {
+			fsl,qman-channel-id = <0x824>;
+		};
+		/* tx - 1g - 3 */
+		port@ab000 {
+			fsl,qman-channel-id = <0x825>;
+		};
+		/* tx - 1g - 4 */
+		port@ac000 {
+			fsl,qman-channel-id = <0x826>;
+		};
+		/* tx - 1g - 5 */
+		port@ad000 {
+			fsl,qman-channel-id = <0x827>;
+		};
+		/* tx - 10g - 0 */
+		port@b0000 {
+			fsl,qman-channel-id = <0x820>;
+		};
+		/* tx - 10g - 1 */
+		port@b1000 {
+			fsl,qman-channel-id = <0x821>;
+		};
 		/* offline - 1 */
 		port@82000 {
 			fsl,qman-channel-id = <0x829>;
diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index 4f99953..2ecc2da 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -209,7 +209,91 @@
 				phy-connection-type = "sgmii";
 				local-mac-address = [02 01 01 01 01 01];
 			};
-		 };
+			enet1: ethernet@e2000 {
+				fixed-link = <2 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 01 02];
+			};
+			enet2: ethernet@e4000 {
+				fixed-link = <3 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 01 03];
+			};
+			enet3: ethernet@e6000 {
+				fixed-link = <4 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 01 04];
+			};
+			enet4: ethernet@e8000 {
+				fixed-link = <5 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 01 05];
+			};
+			enet5: ethernet@ea000 {
+				fixed-link = <6 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 01 06];
+			};
+			enet6: ethernet@f0000 {
+				fixed-link = <7 1 10000 0 0 >;
+				phy-connection-type = "xgmii";
+				local-mac-address = [02 01 01 01 01 07];
+			};
+			enet7: ethernet@f2000 {
+				fixed-link = <8 1 10000 0 0 >;
+				phy-connection-type = "xgmii";
+				local-mac-address = [02 01 01 01 01 08];
+			};
+		};
+		fman1: fman@500000 {
+			enet8: ethernet@e0000 {
+				fixed-link = <11 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 01];
+			};
+
+			enet9: ethernet@e2000 {
+				fixed-link = <12 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 02];
+			};
+
+			enet10: ethernet@e4000 {
+				fixed-link = <13 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 03];
+			};
+
+			enet11: ethernet@e6000 {
+				fixed-link = <14 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 04];
+			};
+
+			enet12: ethernet@e8000 {
+				fixed-link = <15 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 05];
+			};
+
+			enet13: ethernet@ea000 {
+				fixed-link = <16 1 1000 0 0 >;
+				phy-connection-type = "sgmii";
+				local-mac-address = [02 01 01 01 02 06];
+			};
+
+			enet14: ethernet@f0000 {
+				fixed-link = <17 1 10000 0 0 >;
+				phy-connection-type = "xgmii";
+				local-mac-address = [02 01 01 01 02 07];
+			};
+
+			enet15: ethernet@f2000 {
+				fixed-link = <18 1 10000 0 0 >;
+				phy-connection-type = "xgmii";
+				local-mac-address = [02 01 01 01 02 08];
+			};
+		};
 	};
 
 	pci0: pcie@ffe240000 {
@@ -288,6 +372,66 @@
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet0>;
 		};
+		ethernet@1 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet1>;
+		};
+		ethernet@2 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet2>;
+		};
+		ethernet@3 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet3>;
+		};
+		ethernet@4 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet4>;
+		};
+		ethernet@5 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet5>;
+		};
+		ethernet@6 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet6>;
+		};
+		ethernet@7 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet7>;
+		};
+		ethernet@8 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet8>;
+		};
+		ethernet@9 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet9>;
+		};
+		ethernet@10 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet10>;
+		};
+		ethernet@11 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet11>;
+		};
+		ethernet@12 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet12>;
+		};
+		ethernet@13 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet13>;
+		};
+		ethernet@14 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet14>;
+		};
+		ethernet@15 {
+			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
+			fsl,fman-mac = <&enet15>;
+		};
 	};
 };
 
-- 
1.7.9.7

