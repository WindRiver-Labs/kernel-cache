From a4f83f9c26212543be28e95016df74cd7fe84e26 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Wed, 20 Feb 2013 17:15:56 +0800
Subject: [PATCH 2/2] powerpc/t4240: suppress the warning messages when
 running on simics

Simics doesn't completely emulate the mpic, as a result warning messages
are generated due interrupt mapping failures. We can safely suppress
this message on Simics to keep the kernel log clean.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 kernel/irq/irqdomain.c |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/kernel/irq/irqdomain.c b/kernel/irq/irqdomain.c
index 49a7772..0847773 100644
--- a/kernel/irq/irqdomain.c
+++ b/kernel/irq/irqdomain.c
@@ -441,7 +441,9 @@ int irq_domain_associate_many(struct irq_domain *domain, unsigned int irq_base,
 			if (ret != 0) {
 				pr_err("irq-%i==>hwirq-0x%lx mapping failed: %d\n",
 				       virq, hwirq, ret);
+#ifndef CONFIG_T4240_QDS_SIMICS
 				WARN_ON(1);
+#endif
 				irq_data->domain = NULL;
 				irq_data->hwirq = 0;
 				goto err_unmap;
-- 
1.7.9.7

