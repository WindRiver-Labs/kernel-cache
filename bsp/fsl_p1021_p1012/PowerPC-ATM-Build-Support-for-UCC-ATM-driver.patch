From ecb7ca7f6a195fccf01452c44072898e490590da Mon Sep 17 00:00:00 2001
From: Liu Yu <yu.liu@freescale.com>
Date: Mon, 8 Jun 2009 16:14:46 +0800
Subject: [PATCH 05/10] PowerPC:ATM:Build Support for UCC ATM driver

Add build support for UCC ATM driver on QUICC Engine.

Signed-off-by: Liu Yu <yu.liu@freescale.com>

[Extracted from vendor drop QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso
linux-2.6.35-qoriq-build-support-for-ATM-driver.patch
Force UCC ATM feature default to disabled, for the ATM feature & UEC
feature got pin multiplexed.]

Integrated-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/atm/Kconfig  |    7 +++++++
 drivers/atm/Makefile |    1 +
 2 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/drivers/atm/Kconfig b/drivers/atm/Kconfig
index 191b85e..16ff611 100644
--- a/drivers/atm/Kconfig
+++ b/drivers/atm/Kconfig
@@ -397,4 +397,11 @@ config ATM_SOLOS
 	help
 	  Support for the Solos multiport ADSL2+ card.
 
+config ATM_UCC
+	bool "Freescale QUICC ENGINE UCC ATM driver"
+	depends on QUICC_ENGINE
+	select UCC_FAST
+	select UPC
+	default n
+
 endif # ATM
diff --git a/drivers/atm/Makefile b/drivers/atm/Makefile
index 62c3cc1..3d742aa 100644
--- a/drivers/atm/Makefile
+++ b/drivers/atm/Makefile
@@ -24,6 +24,7 @@ ifeq ($(CONFIG_ATM_IDT77252_USE_SUNI),y)
   obj-$(CONFIG_ATM_IDT77252)	+= suni.o
 endif
 
+obj-$(CONFIG_ATM_UCC)		+= fua.o suni5384.o
 obj-$(CONFIG_ATM_DUMMY)		+= adummy.o
 obj-$(CONFIG_ATM_TCP)		+= atmtcp.o
 obj-$(CONFIG_ATM_FIRESTREAM)	+= firestream.o
-- 
1.7.0.2

