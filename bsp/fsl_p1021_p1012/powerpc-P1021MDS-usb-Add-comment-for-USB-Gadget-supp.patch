From 459913ab658f771784571c2ccff67adcb600667c Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Tue, 25 Jan 2011 11:28:52 +0800
Subject: [PATCH 2/5] powerpc:P1021MDS: usb: Add comment for USB Gadget support

To make P1021MDS USB controller work as gadget memory or ethenet, we
must add the following line into the usb node of the dts file.

	dr_mode = "peripheral";

Otherwise, it will function as a USB Host.

This patch comments the dr_mode line by default to make the USB
controller work as a host, If user need to use the controller as
a gadget, they need to uncomment the dr_mode line.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1021mds.dts |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1021mds.dts b/arch/powerpc/boot/dts/p1021mds.dts
index f02c2ed..36f7766 100644
--- a/arch/powerpc/boot/dts/p1021mds.dts
+++ b/arch/powerpc/boot/dts/p1021mds.dts
@@ -328,6 +328,8 @@
 			interrupt-parent = <&mpic>;
 			interrupts = <28 0x2>;
 			phy_type = "ulpi";
+			/* Uncomment the following for USB Gadget Mode */
+			/* dr_mode = "peripheral"; */
 		};
 
 		 mdio@24000 {
-- 
1.7.0.4

