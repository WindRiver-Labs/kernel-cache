From cbdf6496bde8a3148e9cbdc9c07142e3a823e001 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Mon, 12 Nov 2012 21:55:15 +0000
Subject: [PATCH 406/518] dpa_classifier: Add explicit type casts

On two occasions, in the functions "table_modify_entry_by_ref" and
"insert_hm_update_params" implicit casts were used to go from 32bit
values to 8bit values. To confirm that this was the intention,
explicit casts were added.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 999affb..0ed0e98 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -973,7 +973,7 @@ static int table_modify_entry_by_ref(struct dpa_cls_table	*ptable,
 
 	if (ptable->params.type == DPA_CLS_TBL_INDEXED) {
 		cc_node_index	= 0;
-		entry_index	= entry_id;
+		entry_index	= (uint8_t) entry_id;
 	} else {
 		cc_node_index	= ptable->entry[entry_id].int_cc_node_index;
 		entry_index	= ptable->entry[entry_id].entry_index;
@@ -4716,9 +4716,9 @@ static int insert_hm_update_params(struct dpa_cls_hm *pinsert_hm)
 
 	switch (pinsert_hm->insert_params.type) {
 	case DPA_CLS_HM_INSERT_ETHERNET:
-		size = sizeof(struct ethhdr) +
+		size = (uint8_t) (sizeof(struct ethhdr) +
 			(pinsert_hm->insert_params.eth.num_tags *
-			sizeof(struct vlan_header));
+			sizeof(struct vlan_header)));
 		pdata = kzalloc(size, GFP_KERNEL);
 		if (!pdata) {
 			pr_err("ERROR: %s, %s (%d): Not enough memory for "
-- 
1.7.5.4

