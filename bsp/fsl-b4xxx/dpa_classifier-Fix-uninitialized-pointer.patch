From c6943f15d07f1547fed6cb815ba19941769a2c07 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Tue, 11 Sep 2012 20:03:45 +0000
Subject: [PATCH 307/518] dpa_classifier: Fix uninitialized pointer

Removed danger of using one of the data pointers in function
dpa_classif_modify_insert_hm w/o it being initialized.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 648ddfe..d315c82 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -3901,9 +3901,8 @@ int dpa_classif_modify_insert_hm(int hmd,
 
 			pinsert_hm->insert_params.eth.num_tags =
 						new_insert_params->eth.num_tags;
-		} else
-			pdata = hm_node->params.u.hdr.insrtParams.u.generic.
-									p_Data;
+		}
+		pdata = hm_node->params.u.hdr.insrtParams.u.generic.p_Data;
 
 		if (pinsert_hm->insert_params.eth.num_tags) {
 			/* Copy Ethernet header data except the EtherType */
-- 
1.7.5.4

