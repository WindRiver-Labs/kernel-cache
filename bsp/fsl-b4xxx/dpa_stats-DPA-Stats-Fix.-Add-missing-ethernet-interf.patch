From c5279791e4288ced964d71a082b26f9fcdd2b46e Mon Sep 17 00:00:00 2001
From: Radu-Andrei BULIE <radu.bulie@freescale.com>
Date: Mon, 20 Aug 2012 14:19:38 +0000
Subject: [PATCH 287/518] dpa_stats: DPA Stats Fix. Add missing ethernet
 interface id for P5020

Added missing eth interface id for 5020 board. Due to the missing id,
statistics could not be fetched if that ethernet interface was selected.

Signed-off-by: Radu-Andrei BULIE <radu.bulie@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_stats.c |    2 +-
 include/linux/fsl_dpa_stats.h               |    1 +
 2 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_stats.c b/drivers/staging/fsl_dpa_offload/dpa_stats.c
index ad8ac48..8b37269 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_stats.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_stats.c
@@ -707,7 +707,7 @@ static t_Handle get_fman_ethernet_dev_node(
 	char *mac;
 	int lenp;
 
-	if (port_id > DPA_STATS_ETH_1G_PORT3) {
+	if (port_id > DPA_STATS_ETH_1G_PORT4) {
 		mac = "fsl,fman-10g-mac";
 		port_id -= DPA_STATS_ETH_10G_PORT0;
 	} else {
diff --git a/include/linux/fsl_dpa_stats.h b/include/linux/fsl_dpa_stats.h
index 1666664..1442d9c 100644
--- a/include/linux/fsl_dpa_stats.h
+++ b/include/linux/fsl_dpa_stats.h
@@ -184,6 +184,7 @@ enum dpa_stats_cnt_eth_id {
 	DPA_STATS_ETH_1G_PORT1,		/* 1G port, ETH id 1 */
 	DPA_STATS_ETH_1G_PORT2,		/* 1G port, ETH id 2 */
 	DPA_STATS_ETH_1G_PORT3,		/* 1G port, ETH id 3 */
+	DPA_STATS_ETH_1G_PORT4,		/* 1G port, ETH id 4 */
 	DPA_STATS_ETH_10G_PORT0		/* 10G port, ETH id 0 */
 };
 
-- 
1.7.5.4

