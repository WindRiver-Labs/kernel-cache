From 1b47504419993676790395b24622a9daa5203735 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Fri, 10 Aug 2012 14:43:40 +0000
Subject: [PATCH 284/518] dpa_classifier: dpa_classif_get_static_hm_handle
 should quietly return NULL

dpa_classif_get_static_hm_handle must quietly return NULL
in case the provided header manipulation descriptor is
DPA_OFFLD_DESC_NONE. It should display an error only if the
descriptor is really invalid.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 683ed9b..bc6120d 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -4225,6 +4225,10 @@ void *dpa_classif_get_static_hm_handle(int hmd)
 {
 	struct dpa_cls_hm *hm;
 
+	if (hmd == DPA_OFFLD_DESC_NONE)
+		/* Nothing to do */
+		return NULL;
+
 	xx_sanity_check_return_value(((hmd >= 0) &&
 		(hmd < hm_array.num_descriptors)), "hmd", NULL);
 
-- 
1.7.5.4

