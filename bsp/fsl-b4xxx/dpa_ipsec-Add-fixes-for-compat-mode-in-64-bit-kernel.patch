From ae07cb12cc4ad57dd57bae35e5d58bb83c4bbe98 Mon Sep 17 00:00:00 2001
From: Bulie Radu-Andrei-B37577 <radu.bulie@freescale.com>
Date: Tue, 30 Oct 2012 18:53:42 +0000
Subject: [PATCH 362/518] dpa_ipsec: Add fixes for compat mode in 64 bit
 kernel

Fixed dest_addr member when offloading policies.

Signed-off-by: Bulie Radu-Andrei-B37577 <radu.bulie@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/wrp_dpa_ipsec.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/wrp_dpa_ipsec.c b/drivers/staging/fsl_dpa_offload/wrp_dpa_ipsec.c
index 80af855..02c3b03 100644
--- a/drivers/staging/fsl_dpa_offload/wrp_dpa_ipsec.c
+++ b/drivers/staging/fsl_dpa_offload/wrp_dpa_ipsec.c
@@ -276,7 +276,7 @@ static void compat_copy_dpa_ipsec_add_rem_policy(
 		prm->pol_params.src_addr = compat_prm->pol_params.src_addr;
 		prm->pol_params.src_prefix_len =
 					  compat_prm->pol_params.src_prefix_len;
-		prm->pol_params.dest_addr = compat_prm->pol_params.src_addr;
+		prm->pol_params.dest_addr = compat_prm->pol_params.dest_addr;
 		prm->pol_params.dest_prefix_len =
 					 compat_prm->pol_params.dest_prefix_len;
 		prm->pol_params.protocol = compat_prm->pol_params.protocol;
-- 
1.7.5.4

