From aae3ce4cbd35d7ce663e6a30334c349b48c11363 Mon Sep 17 00:00:00 2001
From: Wang Dongsheng <dongsheng.wang@freescale.com>
Date: Tue, 17 Sep 2013 10:21:50 +0800
Subject: [PATCH 109/130] fsl/powerpc: fix cpu_setup_fsl_booke.S build error

when we use corenet32_smp_defconfig. Occur, the following error:
cpu_setup_fsl_booke.S:83: undefined reference to `.has_pw20_altivec_idle'
cpu_setup_fsl_booke.S:108: undefined reference to `.has_pw20_altivec_idle'

The root cause is "bl .has_pw20_altivec_idle", the "." is only for 64bit,
should be "bl has_pw20_altivec_idle".

Signed-off-by: Wang Dongsheng <dongsheng.wang@freescale.com>
Change-Id: I13b654b400313a351e50b4105eabb9affa013c34
Reviewed-on: http://git.am.freescale.net:8181/4779
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Zhao Chenhui-B35336 <chenhui.zhao@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
[Fetch from http://git.freescale.com/git/cgit.cgi/ppc/sdk/linux.git/,
 Tag: fsl-sdk-v1.4.5
 rebase on current context.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/kernel/cpu_setup_fsl_booke.S |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/kernel/cpu_setup_fsl_booke.S b/arch/powerpc/kernel/cpu_setup_fsl_booke.S
index dfbc448..4b61b57 100644
--- a/arch/powerpc/kernel/cpu_setup_fsl_booke.S
+++ b/arch/powerpc/kernel/cpu_setup_fsl_booke.S
@@ -53,6 +53,7 @@ _GLOBAL(__e500_dcache_setup)
 	isync
 	blr
 
+#ifdef CONFIG_PPC_BOOK3E_64
 _GLOBAL(has_pw20_altivec_idle)
 	/* 0 false, 1 true */
 	li	r3, 0
@@ -123,7 +124,6 @@ _GLOBAL(setup_altivec_idle)
 2:
 	blr
 
-#ifdef CONFIG_PPC_BOOK3E_64
 _GLOBAL(__setup_cpu_e6500)
 	mflr	r6
 	bl	.setup_pw20_idle
-- 
1.7.5.4

