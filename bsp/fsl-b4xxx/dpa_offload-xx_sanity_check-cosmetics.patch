From a60f6ceab38cf73d6af2b6687bab27c72a1b51ca Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Tue, 11 Sep 2012 20:01:01 +0000
Subject: [PATCH 293/518] dpa_offload: xx_sanity_check cosmetics

Added some more information to be displayed in the event of a
failed sanity check.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_compat.h |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_compat.h b/drivers/staging/fsl_dpa_offload/dpa_compat.h
index 130fb9f..c68a3f3 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_compat.h
+++ b/drivers/staging/fsl_dpa_offload/dpa_compat.h
@@ -179,15 +179,15 @@ void	dpa_offld_display_mem_leaks(void);
 #ifdef DPA_OFFLOAD_SANITY_CHECKS
 #define xx_sanity_check_return_value(cond, var_desc, ret) \
 	if (!cond) { \
-		pr_err("\nERROR: %s: Invalid value for %s.\n", __func__, \
-			   var_desc); \
+		pr_err("\nERROR: %s, %s (%d): Invalid value for %s.\n", \
+			__FILE__, __func__, __LINE__, var_desc); \
 		return ret; \
 	}
 
 #define xx_sanity_check_return(cond, var_desc) \
 	if (!cond) { \
-		pr_err("\nERROR: %s: Invalid value for %s.\n", __func__, \
-			   var_desc); \
+		pr_err("\nERROR: %s, %s (%d): Invalid value for %s.\n", \
+			__FILE, __func__, __LINE__, var_desc); \
 		return; \
 	}
 #else
-- 
1.7.5.4

