From baee7a843f95a7a9d9a4851a1401d25757fe03e8 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Thu, 21 Mar 2013 14:35:15 +0800
Subject: [PATCH 012/518] powerpc/85xx: Cleanup PME config support

Removed PME from board specific support and added it to generic cpu default
config file.

Signed-off-by: Jeffrey Ladouceur <Jeffrey.Ladouceur@freescale.com>
Signed-off-by: Andy Fleming <afleming@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/Kconfig                |    5 -----
 arch/powerpc/platforms/85xx/Kconfig |    6 ------
 drivers/staging/fsl_pme2/Kconfig    |    3 +--
 3 files changed, 1 insertions(+), 13 deletions(-)

diff --git a/arch/powerpc/Kconfig b/arch/powerpc/Kconfig
index 85c060c..93aec85 100644
--- a/arch/powerpc/Kconfig
+++ b/arch/powerpc/Kconfig
@@ -741,11 +741,6 @@ config HAS_FSL_QBMAN
 	help
 	  Datapath Acceleration Queue and Buffer management
 
-config HAS_FSL_PME
-	bool
-	depends on HAS_FSL_QBMAN
-	default n
-
 # Yes MCA RS/6000s exist but Linux-PPC does not currently support any
 config MCA
 	bool
diff --git a/arch/powerpc/platforms/85xx/Kconfig b/arch/powerpc/platforms/85xx/Kconfig
index b308dbd..f62b43c 100644
--- a/arch/powerpc/platforms/85xx/Kconfig
+++ b/arch/powerpc/platforms/85xx/Kconfig
@@ -219,7 +219,6 @@ config P2041_RDB
 	select PPC_EPAPR_HV_PIC
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
-	select HAS_FSL_PME
 	help
 	  This option enables support for the P2041 RDB board
 
@@ -235,7 +234,6 @@ config P3041_DS
 	select PPC_EPAPR_HV_PIC
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
-	select HAS_FSL_PME
 	select FSL_HYDRA_DS_MDIO if PHYLIB
 	help
 	  This option enables support for the P3041 DS board
@@ -265,7 +263,6 @@ config P4080_DS
 	select PPC_EPAPR_HV_PIC
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
-	select HAS_FSL_PME
 	select FSL_P4080_DS_MDIO if PHYLIB
 	help
 	  This option enables support for the P4080 DS board
@@ -303,7 +300,6 @@ config P5020_DS
 	select PPC_EPAPR_HV_PIC
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
-	select HAS_FSL_PME
 	select FSL_HYDRA_DS_MDIO if PHYLIB
 	help
 	  This option enables support for the P5020 DS board
@@ -324,7 +320,6 @@ config P5040_DS
 	select PPC_EPAPR_HV_PIC
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
-	select HAS_FSL_PME
 	select FSL_HYDRA_DS_MDIO if PHYLIB
 	help
 	  This option enables support for the Freescale P5040 DS
@@ -344,7 +339,6 @@ config T4240_QDS
 	select HAS_FSL_PAMU
 	select HAS_FSL_QBMAN
 	select FSL_QDS_MDIO if PHYLIB
-	select HAS_FSL_PME
 	help
 	  This option enables support for the T4240 QDS board
 
diff --git a/drivers/staging/fsl_pme2/Kconfig b/drivers/staging/fsl_pme2/Kconfig
index 96ef45b..90b3212 100644
--- a/drivers/staging/fsl_pme2/Kconfig
+++ b/drivers/staging/fsl_pme2/Kconfig
@@ -1,7 +1,6 @@
 config FSL_PME2
 	bool "Freescale Datapath Pattern Matcher support"
-	depends on HAS_FSL_PME && FSL_QMAN
-	default y
+	depends on FSL_QMAN
 
 menu "Freescale Datapath PME options"
 	depends on FSL_PME2
-- 
1.7.5.4

