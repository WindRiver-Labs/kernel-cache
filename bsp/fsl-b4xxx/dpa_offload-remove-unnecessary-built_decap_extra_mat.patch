From a3b74fe73b20e2bc6243c62617cdec51b62f9a99 Mon Sep 17 00:00:00 2001
From: Alexandru Badicioiu <alexandru.badicioiu@freescale.com>
Date: Tue, 13 Nov 2012 14:49:20 +0200
Subject: [PATCH 416/518] dpa_offload : remove unnecessary
 built_decap_extra_material return value

Signed-off-by: Alexandru Badicioiu <alexandru.badicioiu@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c |   10 ++--------
 1 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c b/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
index 18d3cb5..7a583e0 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
@@ -805,7 +805,7 @@ int built_encap_extra_material(struct dpa_ipsec_sa *sa,
 }
 
 /* Move size should be set to 64 bytes */
-int built_decap_extra_material(struct dpa_ipsec_sa *sa,
+void built_decap_extra_material(struct dpa_ipsec_sa *sa,
 			       dma_addr_t auth_key_dma,
 			       dma_addr_t crypto_key_dma)
 {
@@ -875,8 +875,6 @@ int built_decap_extra_material(struct dpa_ipsec_sa *sa,
 		     LDST_SRCDST_WORD_DESCBUF_SHARED);
 
 	append_jump(extra_cmds, JUMP_TYPE_HALT_USER | JUMP_COND_CALM);
-
-	return 0;
 }
 
 int build_extended_encap_shared_descriptor(struct dpa_ipsec_sa *sa,
@@ -1152,11 +1150,7 @@ int build_extended_decap_shared_descriptor(struct dpa_ipsec_sa *sa,
 	/* Set lifetime counter stats offset */
 	sa->stats_offset = sa->stats_indx * sizeof(uint32_t);
 
-	ret = built_decap_extra_material(sa, auth_key_dma, crypto_key_dma);
-	if (ret < 0) {
-		pr_err("Failed to create extra CAAM commands\n");
-		return -EAGAIN;
-	}
+	built_decap_extra_material(sa, auth_key_dma, crypto_key_dma);
 
 	extra_cmds = sa->sec_desc_extra_cmds - 1;
 	extra_cmds_len = desc_len(extra_cmds) - 1;
-- 
1.7.5.4

