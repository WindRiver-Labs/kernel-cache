From 97e5f1be6e3fafe4336d01c44ef5cc2935455a44 Mon Sep 17 00:00:00 2001
From: Radu-Andrei BULIE <radu.bulie@freescale.com>
Date: Wed, 31 Oct 2012 22:39:28 +0000
Subject: [PATCH 372/518] offload_use_case: Guard unused variable

When compiling for 64 bit, local variable "size" is used due to CONFIG_COMPAT
build flag. On 32 bit the variable is declared but never used.

Signed-off-by: Radu-Andrei BULIE <radu.bulie@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 .../staging/fsl_dpa_offload/usecases/genl_ctl.c    |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/usecases/genl_ctl.c b/drivers/staging/fsl_dpa_offload/usecases/genl_ctl.c
index a6118f7..8b013ad 100644
--- a/drivers/staging/fsl_dpa_offload/usecases/genl_ctl.c
+++ b/drivers/staging/fsl_dpa_offload/usecases/genl_ctl.c
@@ -350,7 +350,10 @@ static int put_fm_params(struct sk_buff *skb_2, struct genl_info *info)
 	struct nlattr *na;
 	struct sk_buff *skb;
 	void *msg_head;
-	int size, data_size;
+	int data_size;
+#ifdef CONFIG_COMPAT
+	int size;
+#endif
 
 	na = info->attrs[A_FM_PARAMS];
 	if (!na) {
@@ -360,8 +363,8 @@ static int put_fm_params(struct sk_buff *skb_2, struct genl_info *info)
 	}
 
 	data_size = na->nla_len - NLA_HDRLEN;
-	size = sizeof(typeof(fm_params));
 #ifdef CONFIG_COMPAT
+	size = sizeof(typeof(fm_params));
 	if (size != data_size) {
 		memcpy(&compat_fm_params,
 			(typeof(&compat_fm_params))nla_data(na),
-- 
1.7.5.4

