From 90b97e456c7dcbbc9e98df6639f945af9e83579a Mon Sep 17 00:00:00 2001
From: Ioana Radulescu <ruxandra.radulescu@freescale.com>
Date: Fri, 18 Jan 2013 21:40:49 +0000
Subject: [PATCH 010/518] dpaa_eth: Minor sysfs change

inor change in the sysfs show function for the FQ ids associated
with an interface. Use fq_type instead of dqrr value since it's
a simpler method and allows for easier decoupling of the sysfs
code from the rest of the ethernet driver.

This has no functional impact.

Signed-off-by: Ioana Radulescu <ruxandra.radulescu@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |   42 +++++++++++++------------
 1 files changed, 22 insertions(+), 20 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index ff89fdd..7e3a37d 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -3568,26 +3568,28 @@ static ssize_t dpaa_eth_show_fqids(struct device *dev,
 	char *prevstr = NULL;
 
 	list_for_each_entry_safe(fq, tmp, &priv->dpa_fq_list, list) {
-		void *dqrr = fq->fq_base.cb.dqrr;
-		if (dqrr == ingress_rx_error_dqrr)
-			str = "error";
-		else if (i == 1 && dqrr == ingress_rx_default_dqrr)
-			str = "default";
-		else if (dqrr == ingress_rx_error_dqrr ||
-				dqrr == ingress_rx_default_dqrr)
-			str = "RX";
-		else if (dqrr == ingress_tx_default_dqrr)
-			str = "TX confirmation";
-		else if (dqrr == ingress_tx_error_dqrr)
-			str = "TX error";
-		else if (dqrr == shared_tx_default_dqrr)
-			str = "Shared TX confirmation";
-		else if (dqrr == shared_tx_error_dqrr)
-			str = "Shared TX error";
-		else if (dqrr == NULL)
-			str = "TX";
-		else
-			str = "unknown";
+		switch (fq->fq_type) {
+		case FQ_TYPE_RX_DEFAULT:
+			str = "Rx default";
+			break;
+		case FQ_TYPE_RX_ERROR:
+			str = "Rx error";
+			break;
+		case FQ_TYPE_RX_PCD:
+			str = "Rx PCD";
+			break;
+		case FQ_TYPE_TX_CONFIRM:
+			str = "Tx confirmation";
+			break;
+		case FQ_TYPE_TX_ERROR:
+			str = "Tx error";
+			break;
+		case FQ_TYPE_TX:
+			str = "Tx";
+			break;
+		default:
+			str = "Unknown";
+		}
 
 		if (prev && (abs(fq->fqid - prev->fqid) != 1 ||
 					str != prevstr)) {
-- 
1.7.5.4

