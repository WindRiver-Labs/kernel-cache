From 6367259786d0dbbf5e27046f7f7bec4bb5903d4a Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Mon, 12 Nov 2012 21:55:40 +0000
Subject: [PATCH 408/518] dpa_classifier: Bug fix. Incorrect use of return
 value

Most likely a copy-paste issue. In "dpa_classif_table_modify_entry_by_key"
the variable "ret" was used to acquire the return code from the call to
"table_modify_entry_by_ref", but the variable "err" was checked for error.
Replaced verification to check the correct variable for error (ret).

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index bcc1cb7..82d727c 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -852,7 +852,7 @@ int dpa_classif_table_modify_entry_by_key(int			td,
 
 	ret = table_modify_entry_by_ref(ptable, entry_id, mod_params);
 	mutex_unlock(&ptable->access);
-	if (err < 0) {
+	if (ret < 0) {
 		pr_err("ERROR: %s, %s (%d): Failed to MODIFY entry by KEY in "
 			"table td=%d. Translated entry ref=%d. Lookup key was "
 			"(hex) (%d byte(s)):", __FILE__, __func__, __LINE__,
-- 
1.7.5.4

