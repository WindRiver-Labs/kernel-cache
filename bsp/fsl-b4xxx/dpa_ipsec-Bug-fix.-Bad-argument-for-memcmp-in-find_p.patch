From 636c5de66d8574430b76cee3902ba351d6851e85 Mon Sep 17 00:00:00 2001
From: andrei varvara <andrei.varvara@freescale.com>
Date: Fri, 15 Feb 2013 22:12:57 +0000
Subject: [PATCH 479/518] dpa_ipsec: Bug fix. Bad argument for memcmp in
 find_policy function

Second argument in the memcmp call should be the
address of the policy_params not the address of the
pointer policy_params.

Signed-off-by: Andrei Varvara <andrei.varvara@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
index 78c5934..d2ab851 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
@@ -2662,7 +2662,7 @@ static int find_policy_in_sa_policy_list(struct dpa_ipsec_sa  *sa,
 
 	list_for_each_entry_safe(pol_entry, tmp_policy_entry,
 				 &sa->policy_headlist, node) {
-		if (!memcmp(&pol_entry->pol_params, &policy_params,
+		if (!memcmp(&pol_entry->pol_params, policy_params,
 			    POL_MATCH_SIZE(policy_params)) &&
 		    pol_entry->pol_params.priority == policy_params->priority) {
 			/* found entry matching the input policy parameters */
-- 
1.7.5.4

