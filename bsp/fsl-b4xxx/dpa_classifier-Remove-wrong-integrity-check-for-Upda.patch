From e7262f79308ab418c3bdfee619e6c59f75c74cf7 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Fri, 22 Feb 2013 21:42:54 +0000
Subject: [PATCH 467/518] dpa_classifier: Remove wrong integrity check for
 Update type header manipulation

The dpa_classifier was performing a bad integrity check for the
Update type header manipulation operation. It assumed that the first
header manip node always exists, however this node may be missing
in case the user has configured IP Fragmentation only as a Header
Update.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index d4d2593..91cace8 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -5902,7 +5902,6 @@ static int update_hm_update_params(struct dpa_cls_hm *pupdate_hm)
 
 	BUG_ON(!pupdate_hm);
 	BUG_ON(pupdate_hm->num_nodes < 1);
-	BUG_ON(!pupdate_hm->hm_node[0]);
 
 	update_ops = DPA_CLS_HM_UPDATE_IPv4_UPDATE |
 			DPA_CLS_HM_UPDATE_IPv6_UPDATE |
-- 
1.7.5.4

