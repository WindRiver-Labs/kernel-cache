From ace7770f743b1ed88bdc9007dc4b5badc743f2f8 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Fri, 9 Nov 2012 19:07:00 +0000
Subject: [PATCH 384/518] dpa_classifier: Enable VLAN specific header
 manipulations

Currently only VLAN tag update was supported among the VLAN specific
header manipulation operations. Now the VLAN removal is also supported
and the guard in the "vlan_hm_check_params" function needs to be removed.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 7f6bac4..1a7e7dd 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -3389,14 +3389,6 @@ static int
 {
 	BUG_ON(!vlan_params);
 
-	if ((vlan_params->type != DPA_CLS_HM_VLAN_EGRESS) &&
-		(vlan_params->egress.update_op !=
-		DPA_CLS_HM_VLAN_UPDATE_VPri)) {
-		pr_err("ERROR: %s, %s (%d): Unsupported VLAN specific header "
-			"manipulation.\n", __FILE__, __func__, __LINE__);
-		return -ENOSYS;
-	}
-
 	switch (vlan_params->type) {
 	case DPA_CLS_HM_VLAN_INGRESS:
 		if (vlan_params->ingress.num_tags !=
-- 
1.7.5.4

