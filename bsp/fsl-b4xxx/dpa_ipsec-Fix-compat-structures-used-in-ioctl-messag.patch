From 6c0785e1e41086a856cb89134f0e463a93a66fb6 Mon Sep 17 00:00:00 2001
From: Bulie Radu-Andrei-B37577 <radu.bulie@freescale.com>
Date: Wed, 31 Oct 2012 23:37:44 +0000
Subject: [PATCH 373/518] dpa_ipsec: Fix compat structures used in ioctl
 messages when transmitting security association
 information into kernel

Incorrect types were used in the compat structure. Due to this fact
when running in 64 bit kernel, the offsets of the compat structure's members
in kernel were different from the offsets in the userspace.

Signed-off-by: Bulie Radu-Andrei-B37577 <radu.bulie@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h b/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
index 51bd226..f0de34e 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
@@ -110,7 +110,7 @@ struct ioc_compat_sa_in_params {
 
 struct ioc_compat_sa_params {
 	uint32_t spi;
-	int use_ext_seq_num;
+	bool use_ext_seq_num;
 	uint64_t start_seq_num;
 	uint32_t l2_hdr_size;
 	enum dpa_ipsec_sa_mode sa_mode;
@@ -118,7 +118,7 @@ struct ioc_compat_sa_params {
 	uint8_t hdr_upd_flags;
 	uint8_t sa_wqid;
 	uint8_t sa_bpid;
-	int	enable_stats;
+	bool enable_stats;
 	struct ioc_compat_sa_crypto_params crypto_params;
 	enum dpa_ipsec_direction sa_dir;
 	union {
-- 
1.7.5.4

