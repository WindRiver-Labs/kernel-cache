From 94db6d4409f62520eb93b9a22a41b049267ccade Mon Sep 17 00:00:00 2001
From: andrei varvara <andrei.varvara@freescale.com>
Date: Mon, 21 May 2012 22:04:53 +0000
Subject: [PATCH 198/518] Fix in set_in_sa_default_action.

Removed id variable and use sa->id

Signed-off-by: Andrei Varvara <andrei.varvara@freescale.com>
Acked-by: Mihai Serb <mihai.serb@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec.c |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
index 3dc108c..6a87000 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
@@ -935,7 +935,7 @@ static int set_in_sa_default_action(struct dpa_ipsec_sa *sa)
 	int table;
 	struct dpa_cls_tbl_key tbl_key;
 	struct dpa_cls_tbl_action *action;
-	int err, id;
+	int err;
 
 	/* sanity checks */
 	if (!sa) {
@@ -943,8 +943,6 @@ static int set_in_sa_default_action(struct dpa_ipsec_sa *sa)
 		return -EFAULT;
 	}
 
-	id = sa->id;
-
 	dpa_ipsec = (struct dpa_ipsec *)sa->dpa_ipsec;
 	/* AV's note: TODO - case when inbound_flowid is greater than 255 */
 	memset(&tbl_key, 0, sizeof(tbl_key));
@@ -955,7 +953,7 @@ static int set_in_sa_default_action(struct dpa_ipsec_sa *sa)
 	err = dpa_classif_table_insert_entry(table, &tbl_key, action, 0,
 					     &sa->inbound_indx_entry);
 	if (err < 0) {
-		xx_pr_err("Could not set default action for SA id %d\n", id);
+		xx_pr_err("Couldn't set default action for SA id %d\n", sa->id);
 		return err;
 	}
 
-- 
1.7.5.4

