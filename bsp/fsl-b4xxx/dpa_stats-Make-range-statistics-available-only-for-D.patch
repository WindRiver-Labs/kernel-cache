From 900bc22be7eea996edc1ce51ac59c810b0094c0c Mon Sep 17 00:00:00 2001
From: Anca-Jeanina Floarea <anca.floarea@freescale.com>
Date: Thu, 25 Oct 2012 22:56:03 +0000
Subject: [PATCH 331/518] dpa_stats: Make range statistics available only for
 DPAA_VERSION 11

The Classifier Table and Classifier Node range statistics are
available only for DPAA_VERSION 11

Signed-off-by: Anca Jeanina FLOAREA <anca.floarea@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_stats.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_stats.c b/drivers/staging/fsl_dpa_offload/dpa_stats.c
index 7b794607..8acb43c 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_stats.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_stats.c
@@ -711,6 +711,7 @@ static void create_classif_stats(struct dpa_stats *dpa_stats)
 	/* DPA_STATS_CNT_CLASSIF_PACKETS */
 	dpa_stats->stats_sel[DPA_STATS_CNT_CLASSIF_NODE][1] = (void *)
 			&stats.frameCount - (void *)&stats;
+#if (DPAA_VERSION >= 11)
 	/* DPA_STATS_CNT_CLASSIF_RANGE1 */
 	dpa_stats->stats_sel[DPA_STATS_CNT_CLASSIF_NODE][2] = (void *)
 			&stats.frameLengthRangeCount[0] - (void *)&stats;
@@ -741,6 +742,7 @@ static void create_classif_stats(struct dpa_stats *dpa_stats)
 	/* DPA_STATS_CNT_CLASSIF_RANGE10 */
 	dpa_stats->stats_sel[DPA_STATS_CNT_CLASSIF_NODE][11] = (void *)
 			&stats.frameLengthRangeCount[9] - (void *)&stats;
+#endif
 }
 
 static void create_cnt_ipsec_stats(struct dpa_stats *dpa_stats)
-- 
1.7.5.4

