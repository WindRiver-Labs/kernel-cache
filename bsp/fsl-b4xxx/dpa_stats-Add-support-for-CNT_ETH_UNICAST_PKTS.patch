From 60ad3d4310db3ed17660f78664f6a5c25b89be8b Mon Sep 17 00:00:00 2001
From: Aurelian Zanoschi <aurelian.zanoschi@freescale.com>
Date: Tue, 19 Feb 2013 20:32:54 +0000
Subject: [PATCH 490/518] dpa_stats: Add support for CNT_ETH_UNICAST_PKTS

Added support for couters of type DPA_STATS_CNT_ETH_UNICAST_PKTS of
IN/OUT.

Signed-off-by: Aurelian Zanoschi <aurelian.zanoschi@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_stats.c |   10 ++++++----
 1 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_stats.c b/drivers/staging/fsl_dpa_offload/dpa_stats.c
index b56004d..1db6a4a 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_stats.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_stats.c
@@ -704,10 +704,12 @@ static void create_cnt_eth_stats(struct dpa_stats *dpa_stats)
 	/* DPA_STATS_CNT_ETH_OUT_ERRORS */
 	dpa_stats->stats_sel[DPA_STATS_CNT_ETH][20] =
 			(void *)&stats.ifOutErrors - (void *)&stats;
-	/* DPA_STATS_CNT_ETH_IN_UNICAST_PKTS : Not supported for now */
-	dpa_stats->stats_sel[DPA_STATS_CNT_ETH][21] = 0;
-	/* DPA_STATS_CNT_ETH_OUT_UNICAST_PKTS : Not supported for now */
-	dpa_stats->stats_sel[DPA_STATS_CNT_ETH][22] = 0;
+	/* DPA_STATS_CNT_ETH_IN_UNICAST_PKTS : not supported on dTSEC MAC */
+	dpa_stats->stats_sel[DPA_STATS_CNT_ETH][21] =
+			(void *)&stats.ifInUcastPkts - (void *)&stats;
+	/* DPA_STATS_CNT_ETH_OUT_UNICAST_PKTS : not supported on dTSEC MAC*/
+	dpa_stats->stats_sel[DPA_STATS_CNT_ETH][22] =
+			(void *)&stats.ifOutUcastPkts - (void *)&stats;
 }
 
 static void create_cnt_reass_stats(struct dpa_stats *dpa_stats)
-- 
1.7.5.4

