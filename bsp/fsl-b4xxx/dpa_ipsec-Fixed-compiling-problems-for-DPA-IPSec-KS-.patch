From 23011d9f33566703e89c8b4ce073d46231bb48b9 Mon Sep 17 00:00:00 2001
From: andrei varvara <andrei.varvara@freescale.com>
Date: Thu, 1 Nov 2012 17:00:09 +0000
Subject: [PATCH 374/518] dpa_ipsec: Fixed compiling problems for DPA IPSec
 (KS 64)

replaced dpa_ipsec_pol_dir_params with ioc_compat_pol_dir_params
replace DPA_IPSEC_IOC_ADD_POLICY with DPA_IPSEC_IOC_ADD_POLICY_COMPAT
since we are treating the compat case.
same for DPA_IPSEC_IOC_REMOVE_POLICY

Signed-off-by: Andrei Varvara <andrei.varvara@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h b/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
index f0de34e..74aa34a 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec_ioctl.h
@@ -159,7 +159,7 @@ struct ioc_compat_policy_params {
 		struct dpa_ipsec_l4_params	l4;
 		struct dpa_ipsec_icmp_params	icmp;
 	};
-	struct dpa_ipsec_pol_dir_params dir_params;
+	struct ioc_compat_pol_dir_params dir_params;
 	int priority;		/* Policy priority			      */
 };
 
@@ -231,14 +231,14 @@ struct ioc_dpa_ipsec_sa_get_stats {
 #define DPA_IPSEC_IOC_ADD_POLICY \
 	_IOW(DPA_IPSEC_IOC_MAGIC, 4, struct ioc_dpa_ipsec_add_rem_policy)
 #ifdef CONFIG_COMPAT
-#define DPA_IPSEC_IOC_ADD_POLICY \
+#define DPA_IPSEC_IOC_ADD_POLICY_COMPAT \
 	_IOW(DPA_IPSEC_IOC_MAGIC, 4, struct ioc_compat_dpa_ipsec_add_rem_policy)
 #endif
 
 #define DPA_IPSEC_IOC_REMOVE_POLICY \
 	_IOW(DPA_IPSEC_IOC_MAGIC, 5, struct ioc_dpa_ipsec_add_rem_policy)
 #ifdef CONFIG_COMPAT
-#define DPA_IPSEC_IOC_REMOVE_POLICY \
+#define DPA_IPSEC_IOC_REMOVE_POLICY_COMPAT \
 	_IOW(DPA_IPSEC_IOC_MAGIC, 5, struct ioc_compat_dpa_ipsec_add_rem_policy)
 #endif
 
-- 
1.7.5.4

