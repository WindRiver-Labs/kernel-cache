From b559f369f059ebf274756f9d43c86e8323dcb6a4 Mon Sep 17 00:00:00 2001
From: Mandy Lavi <mandy.lavi@freescale.com>
Date: Sun, 14 Apr 2013 16:38:42 +0300
Subject: [PATCH 25/36] fmd: Add missing new field kg_hash_shift to compat
 functionality

Signed-off-by: Mandy Lavi <mandy.lavi@freescale.com>
[Grabbed from the branch, LINUX_IR5.3.0_ALPHA, of
https://git.freescale.com/git-private/cgit.cgi/ppc/dpaa-offload/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 .../src/wrapper/lnxwrp_ioctls_fm_compat.c          |    2 ++
 .../src/wrapper/lnxwrp_ioctls_fm_compat.h          |    1 +
 2 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
index 859516b..9370500 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
@@ -508,6 +508,7 @@ void compat_copy_fm_pcd_hash_table(
     {
         param-> max_num_of_keys = compat_param->max_num_of_keys;
         param->statistics_mode  = compat_param->statistics_mode;
+        param->kg_hash_shift    = compat_param->kg_hash_shift;
         param->hash_res_mask    = compat_param->hash_res_mask;
         param->hash_shift       = compat_param->hash_shift;
         param->match_key_size   = compat_param->match_key_size;
@@ -517,6 +518,7 @@ void compat_copy_fm_pcd_hash_table(
     {
         compat_param-> max_num_of_keys = param->max_num_of_keys;
         compat_param->statistics_mode  = param->statistics_mode;
+        compat_param->kg_hash_shift    = param->kg_hash_shift;
         compat_param->hash_res_mask    = param->hash_res_mask;
         compat_param->hash_shift       = param->hash_shift;
         compat_param->match_key_size   = param->match_key_size;
diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.h b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.h
index e8e6677..3078003 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.h
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.h
@@ -292,6 +292,7 @@ typedef struct ioc_compat_fm_pcd_cc_node_params_t {
 typedef struct ioc_compat_fm_pcd_hash_table_params_t {
     uint16_t                    max_num_of_keys;
     ioc_fm_pcd_cc_stats_mode    statistics_mode;
+    uint8_t                     kg_hash_shift;
     uint16_t                    hash_res_mask;
     uint8_t                     hash_shift;
     uint8_t                     match_key_size;
-- 
1.7.5.4

