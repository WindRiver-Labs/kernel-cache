From 79df615bbad787c3831ab03d4b103c8354102692 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Sat, 11 Feb 2012 01:36:12 +0000
Subject: [PATCH 089/518] Removed extra memsets

Optimisation: removed several extra memsets that were
performed on the lookup key and mask buffers before
copying the useful data.

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 15bd321..536eeba 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -542,8 +542,6 @@ int dpa_classif_table_modify_entry_by_ref(int			td,
 		 * is not using const pointers and we cannot provide it the
 		 * const pointers that the user provided.
 		 */
-		memset(key_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
-		memset(mask_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
 		memcpy(key_data,
 			mod_params->key->byte,
 			ptable->params.exact_match_params.key_size);
@@ -577,8 +575,6 @@ int dpa_classif_table_modify_entry_by_ref(int			td,
 		 * is not using const pointers and we cannot provide it the
 		 * const pointers that the user provided.
 		 */
-		memset(key_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
-		memset(mask_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
 		memcpy(key_data,
 			mod_params->key->byte,
 			ptable->params.exact_match_params.key_size);
@@ -1831,8 +1827,6 @@ static int table_insert_entry_exact_match(struct dpa_cls_table	*cls_table,
 	 * using const pointers and we cannot provide it the const pointers that
 	 * the user provided.
 	 */
-	memset(key_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
-	memset(mask_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
 	memcpy(key_data, key->byte,
 		cls_table->params.exact_match_params.key_size);
 	memcpy(mask_data, key->mask,
@@ -2002,8 +1996,6 @@ static int table_insert_entry_hash(struct dpa_cls_table		*cls_table,
 	 * using const pointers and we cannot provide it the const pointers that
 	 * the user provided.
 	 */
-	memset(key_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
-	memset(mask_data, 0, DPA_CLS_TBL_MAXENTRYKEYSIZE);
 	memcpy(key_data, key->byte, cls_table->params.hash_params.key_size);
 	memcpy(mask_data, key->mask, cls_table->params.hash_params.key_size);
 	key_params.p_Key	= key_data;
-- 
1.7.5.4

