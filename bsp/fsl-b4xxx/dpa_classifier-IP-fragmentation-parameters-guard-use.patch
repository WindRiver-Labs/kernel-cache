From eb4d4f951b5aec4a6ed39418d462f09e832f8411 Mon Sep 17 00:00:00 2001
From: Marian Chereji <marian.chereji@freescale.com>
Date: Fri, 9 Nov 2012 19:06:47 +0000
Subject: [PATCH 383/518] dpa_classifier: IP fragmentation parameters - guard
 use of "scratch Bpid" attribute for FMan v3

Starting with FMan v3 the "scratch Bpid" attribute for IP fragmentation
parameters was removed. The use of this attribute hence needs to be guarded
with

#if (DPAA_VERSION == 10)
#endif

Signed-off-by: Marian Chereji <marian.chereji@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 1bfa81d..7f6bac4 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -4414,9 +4414,11 @@ static int fwd_hm_update_params(struct dpa_cls_hm *pfwd_hm)
 		hm_node->params.u.frag.hdr = HEADER_TYPE_IPv4;
 		hm_node->params.u.frag.u.ipFrag.sizeForFragmentation =
 				pfwd_hm->fwd_params.ip_frag_params.mtu;
+#if (DPAA_VERSION == 10)
 		hm_node->params.u.frag.u.ipFrag.scratchBpid =
 				pfwd_hm->fwd_params.ip_frag_params.
 					scratch_bpid;
+#endif /* (DPAA_VERSION == 10) */
 		switch (pfwd_hm->fwd_params.ip_frag_params.df_action) {
 		case DPA_CLS_HM_DF_ACTION_FRAG_ANYWAY:
 			hm_node->params.u.frag.u.ipFrag.dontFragAction =
@@ -5403,9 +5405,11 @@ static int update_hm_update_params(struct dpa_cls_hm *pupdate_hm)
 		hm_node->params.u.frag.hdr = HEADER_TYPE_IPv4;
 		hm_node->params.u.frag.u.ipFrag.sizeForFragmentation =
 				pupdate_hm->update_params.ip_frag_params.mtu;
+#if (DPAA_VERSION == 10)
 		hm_node->params.u.frag.u.ipFrag.scratchBpid =
 				pupdate_hm->update_params.ip_frag_params.
 					scratch_bpid;
+#endif /* (DPAA_VERSION == 10) */
 		switch (pupdate_hm->update_params.ip_frag_params.df_action) {
 		case DPA_CLS_HM_DF_ACTION_FRAG_ANYWAY:
 			hm_node->params.u.frag.u.ipFrag.dontFragAction =
-- 
1.7.5.4

