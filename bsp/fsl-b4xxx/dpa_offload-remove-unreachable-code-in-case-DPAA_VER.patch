From 60d4fb9285c5be2625e2f57c95686d83831fb2be Mon Sep 17 00:00:00 2001
From: Alexandru Badicioiu <alexandru.badicioiu@freescale.com>
Date: Tue, 13 Nov 2012 15:06:49 +0200
Subject: [PATCH 417/518] dpa_offload : remove unreachable code in case
 DPAA_VERSION < 11

Signed-off-by: Alexandru Badicioiu <alexandru.badicioiu@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 .../staging/fsl_dpa_offload/wrp_dpa_classifier.c   |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/wrp_dpa_classifier.c b/drivers/staging/fsl_dpa_offload/wrp_dpa_classifier.c
index 514001a..92eb2ac 100644
--- a/drivers/staging/fsl_dpa_offload/wrp_dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/wrp_dpa_classifier.c
@@ -608,14 +608,14 @@ long wrp_dpa_classif_do_ioctl(
 		}
 #if (DPAA_VERSION >= 11)
 		ret = dpa_classif_mcast_free_group(grpd);
+		if (ret < 0)
+			return ret;
 #else
 		pr_err("ERROR: %s, %s (%d): Multicast not supported  on this"
 		       "platform.\n", __FILE__, __func__, __LINE__);
 		ret = -EINVAL;
 		return ret;
 #endif
-		if (ret < 0)
-			return ret;
 		break;
 	}
 	default:
@@ -1623,14 +1623,14 @@ static long do_ioctl_mcast_import_group(unsigned long args, bool compat_mode)
 #if (DPAA_VERSION >= 11)
 	ret = dpa_classif_mcast_import_group(kparam.group,
 					     &kparam.grpd);
+	if (ret < 0)
+		return ret;
 #else
 	pr_err("ERROR: %s, %s (%d): Multicast not supported  on this"
 	       "platform.\n", __FILE__, __func__, __LINE__);
 	ret = -EINVAL;
 	return ret;
 #endif
-	if (ret < 0)
-		return ret;
 
 #ifdef CONFIG_COMPAT
 	if (compat_mode) {
@@ -1699,14 +1699,14 @@ static long do_ioctl_mcast_add_member(unsigned long args, bool compat_mode)
 #if (DPAA_VERSION >= 11)
 	ret = dpa_classif_mcast_add_member(kparam.grpd, &kparam.member_params,
 					    &kparam.membrd);
+	if (ret < 0)
+		return ret;
 #else
 	pr_err("ERROR: %s, %s (%d): Multicast not supported  on this"
 	       "platform.\n", __FILE__, __func__, __LINE__);
 	ret = -EINVAL;
 	return ret;
 #endif
-	if (ret < 0)
-		return ret;
 
 #ifdef CONFIG_COMPAT
 	if (compat_mode) {
-- 
1.7.5.4

