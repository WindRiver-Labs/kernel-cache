From 709d9f28baa61a54c37f60606e1780cd58e59325 Mon Sep 17 00:00:00 2001
From: Radu Bulie <radu.bulie@freescale.com>
Date: Tue, 16 Apr 2013 15:52:00 +0300
Subject: [PATCH 1/2] dpa_offload: Synchronize dpa_offload dts files to
 reflect the changes from lin

Updated the dts files used for DPA Offloading to be in
sync with the dts files from linux dts.

Signed-off-by: Radu Bulie <radu.bulie@freescale.com>
[Grabbed from the branch, LINUX_IR5.3.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/dpaa-offload/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 .../staging/fsl_dpa_offload/dts/b4420si-pre.dtsi   |    6 +++---
 .../dts/b4860qds-usdpaa-shared-interfaces.dts      |    6 ++++++
 .../staging/fsl_dpa_offload/dts/b4860si-pre.dtsi   |    9 +++++----
 3 files changed, 14 insertions(+), 7 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dts/b4420si-pre.dtsi b/drivers/staging/fsl_dpa_offload/dts/b4420si-pre.dtsi
index 9e9c899..c0019f8 100644
--- a/drivers/staging/fsl_dpa_offload/dts/b4420si-pre.dtsi
+++ b/drivers/staging/fsl_dpa_offload/dts/b4420si-pre.dtsi
@@ -41,6 +41,7 @@
 
 	aliases {
 		ccsr = &soc;
+		dcsr = &dcsr;
 
 		serial0 = &serial0;
 		serial1 = &serial1;
@@ -65,17 +66,16 @@
 	};
 
 /include/ "b4420si-chosen.dtsi"
-
 	cpus {
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		PowerPC,e6500@0 {
+		cpu0: PowerPC,e6500@0 {
 			device_type = "cpu";
 			reg = <0 1>;
 			next-level-cache = <&L2>;
 		};
-		PowerPC,e6500@1 {
+		cpu1: PowerPC,e6500@1 {
 			device_type = "cpu";
 			reg = <2 3>;
 			next-level-cache = <&L2>;
diff --git a/drivers/staging/fsl_dpa_offload/dts/b4860qds-usdpaa-shared-interfaces.dts b/drivers/staging/fsl_dpa_offload/dts/b4860qds-usdpaa-shared-interfaces.dts
index f109b76..87036a9 100644
--- a/drivers/staging/fsl_dpa_offload/dts/b4860qds-usdpaa-shared-interfaces.dts
+++ b/drivers/staging/fsl_dpa_offload/dts/b4860qds-usdpaa-shared-interfaces.dts
@@ -105,6 +105,12 @@
 			fsl,qman-frame-queues-rx = <0x54 1 0x55 1>;
 			fsl,qman-frame-queues-tx = <0x74 1 0x75 1>;
 		};
+                ethernet@4 {
+                        compatible = "fsl,b4860-dpa-ethernet-init", "fsl,dpa-ethernet-init";
+                        fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
+                        fsl,qman-frame-queues-rx = <0x56 1 0x57 1>;
+                        fsl,qman-frame-queues-tx = <0x76 1 0x77 1>;
+                };
 		ethernet@5 {
 			compatible = "fsl,b4860-dpa-ethernet-init", "fsl,dpa-ethernet-init";
 			fsl,bman-buffer-pools = <&bp16>;
diff --git a/drivers/staging/fsl_dpa_offload/dts/b4860si-pre.dtsi b/drivers/staging/fsl_dpa_offload/dts/b4860si-pre.dtsi
index 5159607..6f2c9a4 100644
--- a/drivers/staging/fsl_dpa_offload/dts/b4860si-pre.dtsi
+++ b/drivers/staging/fsl_dpa_offload/dts/b4860si-pre.dtsi
@@ -41,6 +41,7 @@
 
 	aliases {
 		ccsr = &soc;
+		dcsr = &dcsr;
 
 		serial0 = &serial0;
 		serial1 = &serial1;
@@ -70,22 +71,22 @@
 		#address-cells = <1>;
 		#size-cells = <0>;
 
-		PowerPC,e6500@0 {
+		cpu0: PowerPC,e6500@0 {
 			device_type = "cpu";
 			reg = <0 1>;
 			next-level-cache = <&L2>;
 		};
-		PowerPC,e6500@1 {
+		cpu1: PowerPC,e6500@1 {
 			device_type = "cpu";
 			reg = <2 3>;
 			next-level-cache = <&L2>;
 		};
-		PowerPC,e6500@2 {
+		cpu2: PowerPC,e6500@2 {
 			device_type = "cpu";
 			reg = <4 5>;
 			next-level-cache = <&L2>;
 		};
-		PowerPC,e6500@3 {
+		cpu3: PowerPC,e6500@3 {
 			device_type = "cpu";
 			reg = <6 7>;
 			next-level-cache = <&L2>;
-- 
1.7.5.4

