From 3f41a881f4d52b17c50f30bcf59950ab452b74c2 Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Fri, 19 Oct 2012 12:14:54 +0300
Subject: [PATCH 047/518] dpaa_eth: No longer set netdev->last_rx

The documentation of the net_device->last_rx field advises against the
driver setting it, unless there is an explicit reason to do so.

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
[Grabbed from the branch, LINUX_IR5.2.0, of
https://git.freescale.com/git-private/cgit.cgi/ppc/alu-b4860/linux.git.]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c    |    3 ---
 drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c |    1 -
 2 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 40bcc07..05c8aa5 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -1346,7 +1346,6 @@ void __hot _dpa_rx(struct net_device *net_dev,
 
 packet_dropped:
 skb_stolen:
-	net_dev->last_rx = jiffies;
 	return;
 
 drop_invalid_frame:
@@ -2103,8 +2102,6 @@ skb_copied:
 		percpu_priv->stats.rx_bytes += dpa_fd_length(fd);
 	}
 
-	net_dev->last_rx = jiffies;
-
 out:
 	if (fd->format == qm_fd_sg)
 		dpa_fd_release_sg(net_dev, fd);
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
index 7da1ca7..7aecb1c 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
@@ -525,7 +525,6 @@ void __hot _dpa_rx(struct net_device *net_dev,
 	percpu_priv->stats.rx_bytes += skb_len;
 
 packet_dropped:
-	net_dev->last_rx = jiffies;
 	return;
 
 drop_bad_frame:
-- 
1.7.5.4

