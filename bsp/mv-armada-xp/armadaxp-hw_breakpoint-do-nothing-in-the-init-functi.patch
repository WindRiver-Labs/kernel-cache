From 376c5bc5f22dc7eef0598128a85f596c3290420d Mon Sep 17 00:00:00 2001
From: Wang Hui <Hui.Wang@windriver.com>
Date: Tue, 20 Nov 2012 16:18:53 +0800
Subject: [PATCH 34/50] armadaxp: hw_breakpoint: do nothing in the init function

Marvell implement a different debug coprocessor (cp14) for armadaxp
processor, so the existing hw_breakpoint driver can't work on the
armadaxp. While hw_breakpoint will be set to Y if we enabled
perf_event which is a support feature for armadaxp, so we let
the init function do nothing.

Signed-off-by: Wang Hui <Hui.Wang@windriver.com>
---
 arch/arm/kernel/hw_breakpoint.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/kernel/hw_breakpoint.c b/arch/arm/kernel/hw_breakpoint.c
index 18d39ea..5ffd5e2 100644
--- a/arch/arm/kernel/hw_breakpoint.c
+++ b/arch/arm/kernel/hw_breakpoint.c
@@ -993,6 +993,9 @@ static int __init arch_hw_breakpoint_init(void)
 {
 	u32 dscr;
 
+#ifdef CONFIG_PLAT_ARMADA
+	return 0;
+#endif
 	debug_arch = get_debug_arch();
 
 	if (!debug_arch_supported()) {
-- 
1.7.0

