From 02d0a77fefc8d40d718ae8c37173e993f1024c18 Mon Sep 17 00:00:00 2001
From: Wang Hui <Hui.Wang@windriver.com>
Date: Wed, 23 Jan 2013 15:27:33 +0800
Subject: [PATCH 56/56] arm: armadaxp: kdump: modify start address for dump kernel

By default the dump-capture kernel will be loaded into 0x8008000, so
modify the address to boot it successfully.

Signed-off-by: Wang Hui <Hui.Wang@windriver.com>
---
 arch/arm/mach-armadaxp/Makefile.boot         |    2 +-
 arch/arm/mach-armadaxp/include/mach/memory.h |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-armadaxp/Makefile.boot b/arch/arm/mach-armadaxp/Makefile.boot
index 0ef7d93..d7bbe37 100644
--- a/arch/arm/mach-armadaxp/Makefile.boot
+++ b/arch/arm/mach-armadaxp/Makefile.boot
@@ -3,7 +3,7 @@ ifdef CONFIG_MV_AMP_ENABLE
 params_phys-y   := $(CONFIG_MV_PARAM_PHYS)
 initrd_phys-y   := $(CONFIG_MV_INITRD_PHYS)
 else
-    zreladdr-y	:= 0x00008000
+    zreladdr-y	:= 0x08008000
  params_phys-y	:= 0x00000100
  initrd_phys-y	:= 0x00800000
 endif
diff --git a/arch/arm/mach-armadaxp/include/mach/memory.h b/arch/arm/mach-armadaxp/include/mach/memory.h
index 6740ff2..d7ee648 100644
--- a/arch/arm/mach-armadaxp/include/mach/memory.h
+++ b/arch/arm/mach-armadaxp/include/mach/memory.h
@@ -8,7 +8,7 @@
 #ifdef CONFIG_MV_DRAM_BASE
 #define PLAT_PHYS_OFFSET		UL(CONFIG_MV_DRAM_BASE)
 #else
-#define PLAT_PHYS_OFFSET		UL(0x00000000)
+#define PLAT_PHYS_OFFSET		UL(0x08000000)
 #endif
 
 #define BOOT_PARAMS_OFFSET      PLAT_PHYS_OFFSET + 0x100
-- 
1.7.0.5

