From 1acbb94e712397aca44e42b8a5dcbe90f5ff3878 Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Tue, 18 Aug 2015 17:19:03 +0800
Subject: [PATCH 3/3] msi: marvell-xp: move the msi interrupt to single cpu

for sharedoor bell, there are duplicate interrupts for every cpu,
when one interrupt is occured from shardoor bell, every cpu will
accept a interrupts, so set the msi interrupt by a signel cpu

Signed-off-by: czou <cao.zou@windriver.com>
---
 arch/arm/plat-armada/msi.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/arm/plat-armada/msi.c b/arch/arm/plat-armada/msi.c
index e0c2ad3..202a4dd 100644
--- a/arch/arm/plat-armada/msi.c
+++ b/arch/arm/plat-armada/msi.c
@@ -95,15 +95,15 @@ void __init armada_msi_init(void)
 	irq_set_chained_handler(IRQ_AURORA_SHARE_INB_DB2, armada_msi_irq_handler3);
 
 	temp = MV_REG_READ(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB0));
-	temp |= 0xf;
+	temp |= 0x1;
 	MV_REG_WRITE(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB0), temp);
 
 	temp = MV_REG_READ(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB1));
-	temp |= 0xf;
+	temp |= 0x1;
 	MV_REG_WRITE(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB1), temp);
 
 	temp = MV_REG_READ(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB2));
-	temp |= 0xf;
+	temp |= 0x1;
 	MV_REG_WRITE(CPU_INT_SOURCE_CONTROL_REG(IRQ_AURORA_SHARE_INB_DB2), temp);
 
 }
-- 
1.7.0

