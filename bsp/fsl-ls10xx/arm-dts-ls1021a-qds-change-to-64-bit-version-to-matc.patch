From c810873d09ce34c0fe86e2675d6026dc6810567b Mon Sep 17 00:00:00 2001
From: Jingchang Lu <jingchang.lu@freescale.com>
Date: Thu, 29 May 2014 14:45:55 +0800
Subject: [PATCH 131/255] arm: dts: ls1021a-qds: change to 64-bit version to
 match LPAE address space

Signed-off-by: Jingchang Lu <jingchang.lu@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/ls1021a-qds.dts | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

diff --git a/arch/arm/boot/dts/ls1021a-qds.dts b/arch/arm/boot/dts/ls1021a-qds.dts
index c18a407..27a3e33 100644
--- a/arch/arm/boot/dts/ls1021a-qds.dts
+++ b/arch/arm/boot/dts/ls1021a-qds.dts
@@ -13,10 +13,6 @@
 / {
 	model = "LS1021A QDS Board";
 
-	chosen {
-		bootargs = "earlyprintk initrd=initramfs.cpio root=/dev/ram0 rw console=ttyS0,115200 user_debug=31";
-	};
-
 	regulators {
 		compatible = "simple-bus";
 		#address-cells = <1>;
@@ -137,7 +133,7 @@
 			rtc@68 {
 				compatible = "dallas,ds3232";
 				reg = <0x68>;
-				interrupts = <0 169 0x04>;
+				interrupts = <GIC_SPI 169 IRQ_TYPE_LEVEL_HIGH>;
 			};
 		};
 
@@ -196,9 +192,9 @@
 	#address-cells = <2>;
 	#size-cells = <1>;
 	/* NOR, NAND Flashes and FPGA on board */
-	ranges = <0x0 0x0 0x60000000 0x08000000
-		0x2 0x0 0x7e800000 0x00010000
-		0x3 0x0 0x7fb00000 0x00000100>;
+	ranges = <0x0 0x0 0x0 0x60000000 0x08000000
+		0x2 0x0 0x0 0x7e800000 0x00010000
+		0x3 0x0 0x0 0x7fb00000 0x00000100>;
 
 		nor@0,0 {
 			#address-cells = <1>;
@@ -256,8 +252,8 @@
 				mdio-parent-bus = <&mdio0>;
 				#address-cells = <1>;
 				#size-cells = <0>;
-				reg = <0x54 1>; // BRDCFG4
-				mux-mask = <0xe0>; // EMI1[2:0]
+				reg = <0x54 1>; /* BRDCFG4 */
+				mux-mask = <0xe0>; /* EMI1[2:0] */
 
 				/* Onboard PHYs */
 				ls1021amdio0: mdio@0 {
@@ -307,9 +303,13 @@
 
 };
 
+&lpuart0 {
+	status = "okay";
+};
+
 &uqe {
-	ranges = <0x0 0x2400000 0x40000>;
-	reg = <0x2400000 0x480>;
+	ranges = <0x0 0x0 0x2400000 0x40000>;
+	reg = <0x0 0x2400000 0x0 0x480>;
 	brg-frequency = <100000000>;
 	bus-frequency = <200000000>;
 
-- 
2.0.2

