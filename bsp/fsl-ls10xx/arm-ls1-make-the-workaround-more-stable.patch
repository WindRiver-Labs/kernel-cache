From ec0b4a7d6e337e85ea5a913a896beca5872f4f54 Mon Sep 17 00:00:00 2001
From: Chenhui Zhao <chenhui.zhao@freescale.com>
Date: Tue, 2 Dec 2014 14:45:49 +0800
Subject: [PATCH 037/129] arm: ls1: make the workaround more stable

Increase the delay time to 15ms, which is more stable.

The delay is added in the commit:
commit cd20fed09d426bcc38348e8d1dd32ad828239170
Author: Zhang Zhuoyu <Zhuoyu.Zhang@freescale.com>
Date:   Wed Nov 19 15:49:53 2014 +0800

    arm: ls1: provide a workaround for core soft reset

Signed-off-by: Chenhui Zhao <chenhui.zhao@freescale.com>
Change-Id: Ic7c57346bedab74d5161c36435373af7bc41fb48
Reviewed-on: http://git.am.freescale.net:8181/25423
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Dongsheng Wang <dongsheng.wang@freescale.com>
Reviewed-by: Yang Li <LeoLi@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
[Xulin: Original patch taken from
Freescale-Linux-SDK-for-LS1021A-IOT-Rev2-v0.4-SOURCE-20150907-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 arch/arm/mach-imx/platsmp.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-imx/platsmp.c b/arch/arm/mach-imx/platsmp.c
index cec6592..ac96929 100644
--- a/arch/arm/mach-imx/platsmp.c
+++ b/arch/arm/mach-imx/platsmp.c
@@ -208,7 +208,7 @@ static int ls1021a_reset_secondary(unsigned int cpu)
 	iowrite32be(0x80000000, scfg_base + SCFG_CORESRENCR);
 	iowrite32be(0x80000000, scfg_base +
 				SCFG_CORE0_SFT_RST + STRIDE_4B * cpu);
-	mdelay(6);
+	mdelay(15);
 
 	/* LS1021a errata. after reset, core state machine registers
 	 * need to force release manually.
-- 
1.7.5.4

