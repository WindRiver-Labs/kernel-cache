From fcd6deea666399a284ff0d559b420392ac8b918a Mon Sep 17 00:00:00 2001
From: Chao Fu <B44548@freescale.com>
Date: Mon, 24 Mar 2014 16:09:48 +0800
Subject: [PATCH 032/255] ARM: dts: vf610-twr: Add SPI NOR support and pin
 control

vf610-twr has a s25fl129p1 SPI NOR flash connected to QuadSpi0.
Add enable Quadspi0 pin control info.

Add support for it.

Signed-off-by: Chao Fu <b44548@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/vf610-twr.dts | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

diff --git a/arch/arm/boot/dts/vf610-twr.dts b/arch/arm/boot/dts/vf610-twr.dts
index 77c9d44..5690356 100644
--- a/arch/arm/boot/dts/vf610-twr.dts
+++ b/arch/arm/boot/dts/vf610-twr.dts
@@ -86,6 +86,22 @@
 	status = "okay";
 };
 
+&qspi0 { /* QuadSPI0 */
+	fsl,spi-num-chipselects = <2>;
+	fsl,spi-flash-chipselects = <0>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_qspi0_1>;
+	status = "okay";
+
+	flash: s25fl129p1@0 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "spansion,s25fl129p1";
+		spi-max-frequency = <20000000>;
+		reg = <0>;
+	};
+};
+
 &uart1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_uart1_1>;
-- 
2.0.2

