From 52927aa31669745505539be32133ae387b41e1ab Mon Sep 17 00:00:00 2001
From: Chao Fu <B44548@freescale.com>
Date: Fri, 15 Aug 2014 15:23:22 +0800
Subject: [PATCH 253/255] arm:dts:ls1021a-twr:correct qspi flash info in qspi
 node

Spi flash on ls1021 twr is n25q128a13, but not spansion s25fl128s.
Add property for qspi node:
       bus-num = <0>;
       fsl,spi-num-chipselects = <2>;
       fsl,spi-flash-chipselects = <0>;

Signed-off-by: Chao Fu <B44548@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/ls1021a-twr.dts | 18 +++++++++++-------
 1 file changed, 11 insertions(+), 7 deletions(-)

diff --git a/arch/arm/boot/dts/ls1021a-twr.dts b/arch/arm/boot/dts/ls1021a-twr.dts
index 63cc18b..791c33c 100644
--- a/arch/arm/boot/dts/ls1021a-twr.dts
+++ b/arch/arm/boot/dts/ls1021a-twr.dts
@@ -281,22 +281,26 @@
 
 &qspi {
 	num-cs = <2>;
+	bus-num = <0>;
+	fsl,spi-num-chipselects = <2>;
+	fsl,spi-flash-chipselects = <0>;
 	status = "okay";
 
-//N25Q128A13E1240F. micron
 	qflash0: s25fl128s@0 {
 		#address-cells = <1>;
 		#size-cells = <1>;
-		compatible = "spansion,s25fl128s";
+		compatible = "micron,n25q128a13";
 		spi-max-frequency = <20000000>;
 		reg = <0>;
-
-		partition@0 {
-			label = "s25fl128s-0";
-			reg = <0x0 0x1000000>;
-		};
 	};
 
+	qflash1: n25q128a13@1000000 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "micron,n25q128a13";
+		spi-max-frequency = <20000000>;
+		reg = <1>;
+	};
 
 };
 
-- 
2.0.2

