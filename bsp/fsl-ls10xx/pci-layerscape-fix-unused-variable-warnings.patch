From f0a9e81c714667d70be6222feb145238665e3265 Mon Sep 17 00:00:00 2001
From: Zhenbo Gao <zhenbo.gao@windriver.com>
Date: Tue, 19 Dec 2017 17:03:34 +0800
Subject: [PATCH] pci-layerscape: fix "unused variable" warnings

Get the following warning logs when compiling linux-windriver:
---
 drivers/pci/host/pci-layerscape.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/pci/host/pci-layerscape.c b/drivers/pci/host/pci-layerscape.c
index 89cbc6d..cc322a2 100644
--- a/drivers/pci/host/pci-layerscape.c
+++ b/drivers/pci/host/pci-layerscape.c
@@ -88,7 +88,9 @@ static irqreturn_t ls_pcie_msi_irq_handler(int irq, void *data)
 	struct ls_pcie *pcie = to_ls_pcie(pp);
 	unsigned long val;
 	int msi_irq, ret = IRQ_NONE, pos;
+#if defined(CONFIG_PREEMPT_RT_FULL) || defined(CONFIG_PREEMPT_RTB)
 	unsigned long flags;
+#endif
 
 	regmap_read(pcie->scfg, LS1021A_MSIR_OFF(pcie->index), (u32 *) &val);
 
-- 
1.7.5.4

