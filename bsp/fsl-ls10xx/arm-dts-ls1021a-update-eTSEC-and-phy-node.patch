From 106cd141656443b401d77668323d91fb09f756b1 Mon Sep 17 00:00:00 2001
From: Jingchang Lu <jingchang.lu@freescale.com>
Date: Tue, 29 Apr 2014 22:51:17 +0800
Subject: [PATCH 072/255] arm: dts: ls1021a: update eTSEC and phy node

The phy addr of RISER card for eTSEC1 and eTSEC2 is 0x1c and 0x1d.

Signed-off-by: Jingchang Lu <jingchang.lu@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/ls1021a.dtsi | 41 +++++++++++++++++++++++++++++------------
 1 file changed, 29 insertions(+), 12 deletions(-)

diff --git a/arch/arm/boot/dts/ls1021a.dtsi b/arch/arm/boot/dts/ls1021a.dtsi
index 8d1843e..68dbb29 100644
--- a/arch/arm/boot/dts/ls1021a.dtsi
+++ b/arch/arm/boot/dts/ls1021a.dtsi
@@ -508,32 +508,45 @@
 			status = "disabled";
 		};
 
-		mdio@2d10000 {
+		mdio@2d24000 {
 			#address-cells = <1>;
 			#size-cells = <0>;
-			compatible = "fsl,etsec2-mdio";
-			reg = <0x2d10000 0x1000>;
+			device_type = "mdio";
+			compatible = "gianfar";
+			reg = <0x2d24000 0x1000>;
 
-			phy0: ethernet-phy@0 {
-				reg = <0x0>;
-			};
 			phy1: ethernet-phy@1 {
 				reg = <0x1>;
 			};
 			phy2: ethernet-phy@2 {
 				reg = <0x2>;
 			};
+			phy3: ethernet-phy@3 {
+				reg = <0x3>;
+			};
+			phy1c: ethernet-phy@1c {
+				reg = <0x1c>;
+			};
+			phy1d: ethernet-phy@1d {
+				reg = <0x1d>;
+			};
+			tbi0: tbi-phy@8 {
+				reg = <0x8>;
+				device_type = "tbi-phy";
+			};
 		};
 
 		enet0: ethernet@2d10000 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+			interrupt-parent = <&gic>;
 			device_type = "network";
 			model = "eTSEC";
 			compatible = "fsl,etsec2";
-			fsl,num_rx_queues = <0x8>;
-			fsl,num_tx_queues = <0x8>;
+			fsl,num_rx_queues = <0x1>;
+			fsl,num_tx_queues = <0x1>;
 			local-mac-address = [ 00 00 00 00 00 00 ];
+			ranges;
 
 			queue-group@0 {
 				#address-cells = <1>;
@@ -551,12 +564,14 @@
 		enet1: ethernet@2d50000 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+			interrupt-parent = <&gic>;
 			device_type = "network";
 			model = "eTSEC";
 			compatible = "fsl,etsec2";
-			fsl,num_rx_queues = <0x8>;
-			fsl,num_tx_queues = <0x8>;
+			fsl,num_rx_queues = <0x1>;
+			fsl,num_tx_queues = <0x1>;
 			local-mac-address = [ 00 00 00 00 00 00 ];
+			ranges;
 
 			queue-group@0 {
 				#address-cells = <1>;
@@ -574,12 +589,14 @@
 		enet2: ethernet@2d70000 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+			interrupt-parent = <&gic>;
 			device_type = "network";
 			model = "eTSEC";
 			compatible = "fsl,etsec2";
-			fsl,num_rx_queues = <0x8>;
-			fsl,num_tx_queues = <0x8>;
+			fsl,num_rx_queues = <0x1>;
+			fsl,num_tx_queues = <0x1>;
 			local-mac-address = [ 00 00 00 00 00 00 ];
+			ranges;
 
 			queue-group@0 {
 				#address-cells = <1>;
-- 
2.0.2

