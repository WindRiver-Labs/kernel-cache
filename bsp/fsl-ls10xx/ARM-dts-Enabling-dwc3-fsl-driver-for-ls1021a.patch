From 56bbe57f273fb5c69d75edc05da256337d280487 Mon Sep 17 00:00:00 2001
From: Jason Jin <Jason.Jin@freescale.com>
Date: Tue, 3 Jun 2014 16:36:52 +0800
Subject: [PATCH 161/255] ARM: dts: Enabling dwc3-fsl driver for ls1021a

Addind DWC3 driver tree node for ls1021a needed
to parse device tree data.

Signed-off-by: Suresh Gupta <suresh.gupta@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/ls1021a.dtsi | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

diff --git a/arch/arm/boot/dts/ls1021a.dtsi b/arch/arm/boot/dts/ls1021a.dtsi
index afd2b15..06564d6 100644
--- a/arch/arm/boot/dts/ls1021a.dtsi
+++ b/arch/arm/boot/dts/ls1021a.dtsi
@@ -693,16 +693,18 @@
 		};
 
 		usb@3100000 {
-			compatible = "fsl,fsl_usb3";
+			compatible = "fsl,fsl-dwc3";
 			#address-cells = <2>;
 			#size-cells = <2>;
 			ranges;
 
-			reg = <0x0 0x3100000 0x0 0x10000>;
-			interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
-
-			dr_mode = "host";
-			maximum-speed = "high-speed";
+			dwc3 {
+				compatible = "snps,dwc3";
+				reg = <0x0 0x3100000 0x0 0x10000>;
+				interrupts = <GIC_SPI 93 IRQ_TYPE_LEVEL_HIGH>;
+				dr_mode = "peripheral";
+				maximum-speed = "high-speed";
+			};
 		};
 
 		can0: can@2a70000 {
-- 
2.0.2

