From ebc2fe124d3447f17de4c7ebb54b54f5ee3df739 Mon Sep 17 00:00:00 2001
From: Chenhui Zhao <chenhui.zhao@freescale.com>
Date: Fri, 23 Jan 2015 19:41:15 +0800
Subject: [PATCH 10/70] fsl: ftm_alarm: init the device wakeup capability

The ftm_alarm device can be used as a wakeup source. So
init the device wakeup capability

Signed-off-by: Chenhui Zhao <chenhui.zhao@freescale.com>
Change-Id: Id9c8b2c235c5c2f6e9ba103248a28247fd68f56b
Reviewed-on: http://git.am.freescale.net:8181/29151
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Dongsheng Wang <dongsheng.wang@freescale.com>
Reviewed-by: Zhengxiong Jin <Jason.Jin@freescale.com>
[czou:Original patch taken from
LS1021A-IOT-Rev2-v0.4-20150907-yocto.iso]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/soc/fsl/ls1/ftm_alarm.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/soc/fsl/ls1/ftm_alarm.c b/drivers/soc/fsl/ls1/ftm_alarm.c
index 5135964..dec0c1c 100644
--- a/drivers/soc/fsl/ls1/ftm_alarm.c
+++ b/drivers/soc/fsl/ls1/ftm_alarm.c
@@ -243,6 +243,8 @@ static int ftm_alarm_probe(struct platform_device *pdev)
 		return ret;
 	}
 
+	device_init_wakeup(&pdev->dev, true);
+
 	alarm_freq = (u32)FIXED_FREQ_CLK / (u32)MAX_FREQ_DIV;
 
 	ftm_clean_alarm();
-- 
1.7.5.4

