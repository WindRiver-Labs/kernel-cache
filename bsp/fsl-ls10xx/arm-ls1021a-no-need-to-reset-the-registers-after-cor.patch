From b2d141b27b976a97e4654b29a93e5932b467ff49 Mon Sep 17 00:00:00 2001
From: Chenhui Zhao <chenhui.zhao@freescale.com>
Date: Tue, 27 Jan 2015 17:57:34 +0800
Subject: [PATCH 12/70] arm: ls1021a: no need to reset the registers after
 core reset

These registers has been reset in the bootloader after power-up.
No need to reset them in kernel.

Signed-off-by: Chenhui Zhao <chenhui.zhao@freescale.com>
Change-Id: I300f1763bafce3291c371b05d7bce3c363dc760b
Reviewed-on: http://git.am.freescale.net:8181/29620
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Zhuoyu Zhang <Zhuoyu.Zhang@freescale.com>
Reviewed-by: Zhengxiong Jin <Jason.Jin@freescale.com>
[czou:Original patch taken from
LS1021A-IOT-Rev2-v0.4-20150907-yocto.iso]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 arch/arm/mach-imx/platsmp.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/arch/arm/mach-imx/platsmp.c b/arch/arm/mach-imx/platsmp.c
index dcba3ff..9eefafc 100644
--- a/arch/arm/mach-imx/platsmp.c
+++ b/arch/arm/mach-imx/platsmp.c
@@ -245,14 +245,6 @@ static int ls1021a_reset_secondary(unsigned int cpu)
 				SCFG_CORE0_SFT_RST + STRIDE_4B * cpu);
 	mdelay(15);
 
-	/* LS1021a errata. after reset, core state machine registers
-	 * need to force release manually.
-	 */
-	iowrite32be(0x00000080, dcsr_rcpm2_base + DCSR_RCPM2_DEBUG1);
-	iowrite32be(0x00000080, dcsr_rcpm2_base + DCSR_RCPM2_DEBUG2);
-	iowrite32be(0, dcsr_rcpm2_base + DCSR_RCPM2_DEBUG1);
-	iowrite32be(0, dcsr_rcpm2_base + DCSR_RCPM2_DEBUG2);
-
 	/* Release secondary core */
 	iowrite32be(1 << cpu, dcfg_base + DCFG_CCSR_BRR);
 
-- 
1.7.5.4

