From e22b8bf2c1146e75c29ddc6e8e9797fca0b8ca17 Mon Sep 17 00:00:00 2001
From: Minghuan Lian <Minghuan.Lian@freescale.com>
Date: Wed, 30 Apr 2014 03:34:55 +0000
Subject: [PATCH 092/255] arm: dts: ls1021a: Add PCIe dts node

Signed-off-by: Minghuan Lian <Minghuan.Lian@freescale.com>
[Kevin: Original patch taken from
LS1021A-SDK-V1.1-ARM-SOURCE-20140815-yocto.iso]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/dts/ls1021a-40b.dtsi | 40 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

diff --git a/arch/arm/boot/dts/ls1021a-40b.dtsi b/arch/arm/boot/dts/ls1021a-40b.dtsi
index e3b5145..bda7377 100644
--- a/arch/arm/boot/dts/ls1021a-40b.dtsi
+++ b/arch/arm/boot/dts/ls1021a-40b.dtsi
@@ -602,5 +602,45 @@
 			dr_mode = "host";
 			phy_type = "utmi";
 		};
+
+		pcie@3400000 {
+			compatible = "fsl,pcie", "snps,dw-pcie", "fsl,ls1021a-pcie";
+			reg = <0x00 0x3400000 0x10000>;
+			interrupts = <0 177 0>, <0 179 0>, <0 181 0>, <0 183 0>;
+			interrupt-names = "intr", "msi", "pme", "cfg-err";
+			#address-cells = <3>;
+			#size-cells = <2>;
+			device_type = "pci";
+			num-lanes = <4>;
+			bus-range = <0x0 0xff>;
+			ranges = <0x00000800 0x0 0x00000000 0x40 0x00000000 0x0 0x00080000 /* configuration space */
+				  0x81000000 0x0 0x00000000 0x40 0x10000000 0x0 0x00010000 /* downstream I/O */
+				  0x82000000 0x0 0x00000000 0x41 0x00000000 0x1 0x00000000>; /* non-prefetchable memory */
+			interrupt-map-mask = <0 0 0 7>;
+			interrupt-map = <0000 0 0 1 &gic 0 90  0>,
+					<0000 0 0 2 &gic 0 188 0>,
+					<0000 0 0 3 &gic 0 190 0>,
+					<0000 0 0 4 &gic 0 192 0>;
+			};
+
+		pcie@3500000 {
+			compatible = "fsl,pcie", "snps,dw-pcie", "fsl,ls1021a-pcie";
+			reg = <0x00 0x3500000 0x10000>;
+			interrupts = <0 178 0>, <0 180 0>, <0 182 0>, <0 184 0>;
+			interrupt-names = "intr", "msi", "pme", "cfg-err";
+			#address-cells = <3>;
+			#size-cells = <2>;
+			device_type = "pci";
+			num-lanes = <4>;
+			bus-range = <0x0 0xff>;
+			ranges = <0x82000000 0x0 0x00000000 0x48 0x00000000 0x0 0x10000000 /* configuration space */
+				  0x81000000 0x0 0x00000000 0x48 0x10000000 0x0 0x00010000 /* downstream I/O */
+				  0x82000000 0x0 0x00000000 0x49 0x00000000 0x1 0x00000000>; /* non-prefetchable memory */
+			interrupt-map-mask = <0 0 0 7>;
+			interrupt-map = <0000 0 0 1 &gic 0 91  0>,
+					<0000 0 0 2 &gic 0 189 0>,
+					<0000 0 0 3 &gic 0 191 0>,
+					<0000 0 0 4 &gic 0 193 0>;
+		};
 	};
 };
-- 
2.0.2

