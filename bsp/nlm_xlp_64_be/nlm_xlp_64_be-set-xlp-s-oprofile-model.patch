From f8d915f24867e978f1c2b2cd83991cd664cebd99 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Wed, 28 Mar 2012 15:58:59 +0800
Subject: [PATCH 16/46] nlm_xlp_64_be: set xlp's oprofile model

Set xlp's oprofile model,
based on NetLogic SDK 20120215_2.2.3 tag.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/oprofile/common.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/mips/oprofile/common.c b/arch/mips/oprofile/common.c
index b1f1b24..c925355 100644
--- a/arch/mips/oprofile/common.c
+++ b/arch/mips/oprofile/common.c
@@ -20,6 +20,7 @@ extern struct op_mips_model op_model_mipsxx_ops __weak;
 extern struct op_mips_model op_model_rm9000_ops __weak;
 extern struct op_mips_model op_model_vr5500_ops __weak;
 extern struct op_mips_model op_model_loongson2_ops __weak;
+extern struct op_mips_model op_model_xlp __attribute__((weak));
 
 static struct op_mips_model *model;
 
@@ -79,6 +80,9 @@ int __init oprofile_arch_init(struct oprofile_operations *ops)
 	int res;
 
 	switch (current_cpu_type()) {
+	case CPU_XLP:
+		lmodel = &op_model_xlp;
+		break;
 	case CPU_5KC:
 	case CPU_20KC:
 	case CPU_24K:
-- 
1.7.0

