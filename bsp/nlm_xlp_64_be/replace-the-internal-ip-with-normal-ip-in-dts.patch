From 7f0a16af08bcb6fbb520341f6de3496a00cb22c4 Mon Sep 17 00:00:00 2001
From: Jack Tan <jack.tan@windriver.com>
Date: Tue, 24 Apr 2012 13:58:58 +0800
Subject: [PATCH 24/46] replace the internal ip with normal ip in dts

Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/boot/dts/xlp316.dts |    9 ++-------
 arch/mips/boot/dts/xlp832.dts |   10 ++--------
 2 files changed, 4 insertions(+), 15 deletions(-)

diff --git a/arch/mips/boot/dts/xlp316.dts b/arch/mips/boot/dts/xlp316.dts
index b16361c..3fb41aa 100644
--- a/arch/mips/boot/dts/xlp316.dts
+++ b/arch/mips/boot/dts/xlp316.dts
@@ -67,12 +67,6 @@
 		*/
 		/* For NOR root filesystem */
 		/*
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.244:/export/nfsroot/xlp832/rootfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.244:/export/nfsroot/xlp832/rootfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "ubi.mtd=7 root=ubi0:root rw rootfstype=ubifs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock4 rw rootfstype=jffs2 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth4:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock7 rw rootfstype=cramfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock7 rw rootfstype=yaffs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
 		bootargs = "console=ttyS0,115200 root=/dev/mmcblk0p3 rw rootdelay=10";
 		bootargs = "console=ttyS0,115200 root=/dev/sda1 rw rootdelay=10";
 		bootargs = "console=ttyS0,115200 root=/dev/md0 rw rootdelay=10";
@@ -81,7 +75,8 @@
 		 * Only PCIe ethernet driver(eth0) survive after booting
 		 * by kexec.
 		 */
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.151:/export/nfsroot/xlp832/rootfs ip=128.224.165.151:128.224.165.1:128.224.165.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200 oprofile.timer=1";
+		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=192.168.0.1:/opt/rootfs,nfsvers=3 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
+
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
diff --git a/arch/mips/boot/dts/xlp832.dts b/arch/mips/boot/dts/xlp832.dts
index cc3aadd..493ba0e 100644
--- a/arch/mips/boot/dts/xlp832.dts
+++ b/arch/mips/boot/dts/xlp832.dts
@@ -63,16 +63,10 @@
 	chosen {
 		/* For NFS root filesystem */
 		/*
-		bootargs = "root=/dev/nfs rw nfsroot=192.168.0.1:/opt/rootfs/xlp832-n32 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth4:off console=ttyS0,115200";
+		bootargs = "root=/dev/nfs rw nfsroot=192.168.0.1:/opt/rootfs ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth4:off console=ttyS0,115200";
 		*/
 		/* For NOR root filesystem */
 		/*
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.244:/export/nfsroot/xlp832/rootfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.244:/export/nfsroot/xlp832/rootfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "ubi.mtd=7 root=ubi0:root rw rootfstype=ubifs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock4 rw rootfstype=jffs2 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth4:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock7 rw rootfstype=cramfs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
-		bootargs = "root=/dev/mtdblock7 rw rootfstype=yaffs ip=128.224.162.7:128.224.162.244:128.224.162.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
 		bootargs = "console=ttyS0,115200 root=/dev/mmcblk0p3 rw rootdelay=10";
 		bootargs = "console=ttyS0,115200 root=/dev/sda1 rw rootdelay=10";
 		bootargs = "console=ttyS0,115200 root=/dev/md0 rw rootdelay=10";
@@ -81,7 +75,7 @@
 		 * Only PCIe ethernet driver(eth0) survive after booting
 		 * by kexec.
 		 */
-		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=128.224.162.151:/export/nfsroot/xlp832/rootfs ip=128.224.165.248:128.224.165.1:128.224.165.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
+		bootargs = "crashkernel=128M@63M root=/dev/nfs rw nfsroot=192.168.0.1:/opt/rootfs,nfsvers=3 ip=192.168.0.2:192.168.0.1:192.168.0.1:255.255.254.0:xlp:eth0:off console=ttyS0,115200";
 	};
 
 	/* These binaries are downloaded at the resp physical memory locations
-- 
1.7.0

