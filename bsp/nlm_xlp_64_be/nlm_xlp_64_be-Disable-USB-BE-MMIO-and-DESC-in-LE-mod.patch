From 8638d849fcda94f4f2a35a7efc571853002595bb Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Fri, 20 Apr 2012 10:54:11 +0800
Subject: [PATCH 20/46] nlm_xlp_64_be: Disable USB BE MMIO and DESC in LE mode

The problem: This BSP enables the BE MMIO and DESC in
LE kernel.
Only BE kernel needs those.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/usb/host/Kconfig |    6 ++----
 1 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/drivers/usb/host/Kconfig b/drivers/usb/host/Kconfig
index 6af8bee..f46c14f 100644
--- a/drivers/usb/host/Kconfig
+++ b/drivers/usb/host/Kconfig
@@ -90,12 +90,12 @@ config USB_EHCI_TT_NEWSCHED
 
 config USB_EHCI_BIG_ENDIAN_MMIO
 	bool
-	depends on USB_EHCI_HCD && (PPC_CELLEB || PPC_PS3 || 440EPX || ARCH_IXP4XX || XPS_USB_HCD_XILINX || NLM_XLP)
+	depends on USB_EHCI_HCD && (PPC_CELLEB || PPC_PS3 || 440EPX || ARCH_IXP4XX || XPS_USB_HCD_XILINX || (NLM_XLP && CPU_BIG_ENDIAN))
 	default y
 
 config USB_EHCI_BIG_ENDIAN_DESC
 	bool
-	depends on USB_EHCI_HCD && (440EPX || ARCH_IXP4XX || XPS_USB_HCD_XILINX || NLM_XLP)
+	depends on USB_EHCI_HCD && (440EPX || ARCH_IXP4XX || XPS_USB_HCD_XILINX || (NLM_XLP && CPU_BIG_ENDIAN))
 	default y
 
 config XPS_USB_HCD_XILINX
@@ -270,13 +270,11 @@ config USB_OHCI_HCD_SSB
 config USB_OHCI_BIG_ENDIAN_DESC
 	bool
 	depends on USB_OHCI_HCD
-	default y if NLM_XLP
 	default n
 
 config USB_OHCI_BIG_ENDIAN_MMIO
 	bool
 	depends on USB_OHCI_HCD
-	default y if NLM_XLP
 	default n
 
 config USB_OHCI_LITTLE_ENDIAN
-- 
1.7.0

