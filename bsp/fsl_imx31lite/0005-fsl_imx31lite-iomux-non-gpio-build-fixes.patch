From 2111c096e27ce400eef2d8dec6bd579845a524dd Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Wed, 8 Jul 2009 11:21:42 -0400
Subject: [PATCH] fsl_imx31lite/iomux: non-gpio build fixes

These are temporary build fixes to allow the imx31lite to build
against common code that assumes gpiolib compliance. They are
not complete, or extensively runtime tested.

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/arm/plat-mxc/include/mach/iomux-mx3.h |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/arch/arm/plat-mxc/include/mach/iomux-mx3.h b/arch/arm/plat-mxc/include/mach/iomux-mx3.h
index 5238be7..27b9842 100644
--- a/arch/arm/plat-mxc/include/mach/iomux-mx3.h
+++ b/arch/arm/plat-mxc/include/mach/iomux-mx3.h
@@ -64,6 +64,8 @@ typedef enum iomux_output_config {
 	OUTPUTCONFIG_ALT6   /*!< used as alternate function 6 */
 } iomux_pin_ocfg_t;
 
+#define IOMUX_OCONFIG_FUNC OUTPUTCONFIG_FUNC
+
 /*!
  * various IOMUX input functions
  */
@@ -171,6 +173,8 @@ void iomux_config_gpr(iomux_gp_func_t , bool);
  * set the mode for a IOMUX pin.
  */
 int mxc_iomux_mode(unsigned int);
+#else
+static inline int mxc_iomux_mode(unsigned int mode) { return 1; }
 #endif
 
 #ifndef CONFIG_ARCH_REQUIRE_GPIOLIB
@@ -597,6 +601,10 @@ enum iomux_pins {
 #define MX31_PIN_TXD1__TXD1		IOMUX_MODE(MX31_PIN_TXD1, IOMUX_CONFIG_FUNC)
 #define MX31_PIN_RXD1__RXD1		IOMUX_MODE(MX31_PIN_RXD1, IOMUX_CONFIG_FUNC)
 
+#else
+
+#define IOMUX_MODE(pin, mode) (pin)
+
 #endif /*CONFIG_ARCH_REQUIRE_GPIOLIB*/
 
 /*
-- 
1.5.5.1

