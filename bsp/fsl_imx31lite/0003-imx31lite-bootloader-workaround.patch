From fc2ea8e7e04851db4e7e46974fa62fad47a3eb3e Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 30 Jun 2008 17:08:31 +0800
Subject: [PATCH] imx31lite bootloader workaround

Workaround to make bootloader support linux kernel.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/arm/boot/compressed/Makefile        |    4 ++++
 arch/arm/boot/compressed/head-mx31lite.S |    4 ++++
 2 files changed, 8 insertions(+), 0 deletions(-)
 create mode 100644 arch/arm/boot/compressed/head-mx31lite.S

diff --git a/arch/arm/boot/compressed/Makefile b/arch/arm/boot/compressed/Makefile
index b6f8502..9da6040 100644
--- a/arch/arm/boot/compressed/Makefile
+++ b/arch/arm/boot/compressed/Makefile
@@ -23,6 +23,10 @@ ifeq ($(CONFIG_ARCH_L7200),y)
 OBJS		+= head-l7200.o
 endif
 
+ifeq ($(CONFIG_MACH_MX31LITE),y)
+OBJS            += head-mx31lite.o
+endif
+
 ifeq ($(CONFIG_ARCH_CLPS7500),y)
 HEAD		= head-clps7500.o
 endif
diff --git a/arch/arm/boot/compressed/head-mx31lite.S b/arch/arm/boot/compressed/head-mx31lite.S
new file mode 100644
index 0000000..51224fd
--- /dev/null
+++ b/arch/arm/boot/compressed/head-mx31lite.S
@@ -0,0 +1,4 @@
+#include <asm/mach-types.h>
+
+		.section	".start", "ax"
+		ldr	r7, =MACH_TYPE_MX31LITE
-- 
1.5.5.1

