From f0f9acf7b9502cda3f77a1f1acf90d19dfe17e6e Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Tue, 12 Apr 2011 12:10:47 -0700
Subject: [PATCH 84/97] MIPS: Octeon: Read only LMCX(0) for dram utilization.

Source: Cavium SDK 2.1.0-407

cn68xx has 4 LMCX, only 2 channels are working, for now read only one LMCX.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
Signed-off-by: Phil Staub <Phil.Staub@windriver.com>
---
 arch/mips/cavium-octeon/perf_counters.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/perf_counters.c b/arch/mips/cavium-octeon/perf_counters.c
index 91f3f36..a751549 100644
--- a/arch/mips/cavium-octeon/perf_counters.c
+++ b/arch/mips/cavium-octeon/perf_counters.c
@@ -411,7 +411,7 @@ static int proc_perf_show(struct seq_file *m, void *v)
 		int tad;
 		dram_operations = 0;
 		dram_clocks = 0;
-		for (tad = 0; tad < CVMX_L2C_TADS; tad++) {
+		for (tad = 0; tad < 1; tad++) {
 			dram_operations += cvmx_read_csr
 					(CVMX_LMCX_OPS_CNT(tad));
 			dram_clocks += cvmx_read_csr
@@ -503,7 +503,7 @@ static struct file_operations proc_perf_operations = {
  */
 static int __init proc_perf_init(void)
 {
-	pr_notice("/proc/octeon_perf: Octeon performace counter interface "
+	pr_notice("/proc/octeon_perf: Octeon performance counter interface "
 		  "loaded\n");
 
 	memset(proc_perf_label, 0, sizeof(proc_perf_label));
-- 
1.7.0

