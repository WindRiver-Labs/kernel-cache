From 8e113566df87fe0872c823df93cebc7afd400845 Mon Sep 17 00:00:00 2001
From: auto commit <unknown@unknown>
Date: Thu, 4 Aug 2011 15:58:42 -0700
Subject: [PATCH 90/97] Cavium: Local updates to Simple Exec

Source: Local development

Add some hooks for hypervisor work.

Signed-off-by: Phil Staub <Phil.Staub@windriver.com>
---
 simple_exec/cvmx-app-init.h     |    6 ++++++
 simple_exec/cvmx-helper-board.c |    3 +++
 2 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/simple_exec/cvmx-app-init.h b/simple_exec/cvmx-app-init.h
index bc8cbba..09a14b1 100644
--- a/simple_exec/cvmx-app-init.h
+++ b/simple_exec/cvmx-app-init.h
@@ -213,6 +213,9 @@ enum cvmx_board_types_enum {
     CVMX_BOARD_TYPE_CUST_L2_WSTRNSNIC_TX= 10019,
     CVMX_BOARD_TYPE_CUST_L2_WSTRNSNIC_RX= 10020,
     CVMX_BOARD_TYPE_CUST_L2_ZINWELL     = 10021,
+#ifdef CONFIG_WRHV
+    CVMX_BOARD_TYPE_CUST_WRHV_OCTEON    = 10022,
+#endif
     CVMX_BOARD_TYPE_CUST_DEFINED_MAX = 20000,
 
     /* Set aside a range for customer private use.  The SDK won't
@@ -320,6 +323,9 @@ static inline const char *cvmx_board_type_to_string(enum cvmx_board_types_enum t
 	ENUM_BRD_TYPE_CASE(CVMX_BOARD_TYPE_CUST_L2_WSTRNSNIC_TX)
 	ENUM_BRD_TYPE_CASE(CVMX_BOARD_TYPE_CUST_L2_WSTRNSNIC_RX)
 	ENUM_BRD_TYPE_CASE(CVMX_BOARD_TYPE_CUST_L2_ZINWELL)
+#ifdef CONFIG_WRHV
+	ENUM_BRD_TYPE_CASE(CVMX_BOARD_TYPE_CUST_WRHV_OCTEON)
+#endif
 
         ENUM_BRD_TYPE_CASE(CVMX_BOARD_TYPE_CUST_DEFINED_MAX)
 
diff --git a/simple_exec/cvmx-helper-board.c b/simple_exec/cvmx-helper-board.c
index e7906d9..87721ea 100644
--- a/simple_exec/cvmx-helper-board.c
+++ b/simple_exec/cvmx-helper-board.c
@@ -207,6 +207,9 @@ int cvmx_helper_board_get_mii_address(int ipd_port)
             }
         case CVMX_BOARD_TYPE_EBB6300:
         case CVMX_BOARD_TYPE_EBB6600:
+#ifdef CONFIG_WRHV
+        case CVMX_BOARD_TYPE_CUST_WRHV_OCTEON:
+#endif
             /* Board has 2 management ports */
             if ((ipd_port >= CVMX_HELPER_BOARD_MGMT_IPD_PORT) && (ipd_port < (CVMX_HELPER_BOARD_MGMT_IPD_PORT + 2)))
                 return ipd_port - CVMX_HELPER_BOARD_MGMT_IPD_PORT + 4;
-- 
1.7.0

