From 75fb933dabe02ae0c0023cbfd85b81b04dec4c4f Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Thu, 24 Nov 2011 17:05:30 +0800
Subject: [PATCH 97/97] octeon/ethernet: Fix compile error

The below compile error happens when build
cav_octeon_cn68xx kernel:
drivers/net/octeon/ethernet-rx.c: In function 'cvm_oct_rx_initialize':
drivers/net/octeon/ethernet-rx.c:354: error: 'cvm_oct_napi_poll_68' undeclared (first use in this function)
drivers/net/octeon/ethernet-rx.c:354: error: (Each undeclared identifier is reported only once

Fix this problem by explicitly define CVM_OCT_NAPI_68 marcro,
this is exactly what wrlinux-4.2 do.

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 drivers/net/octeon/ethernet-rx.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/net/octeon/ethernet-rx.c b/drivers/net/octeon/ethernet-rx.c
index de92656..794178d 100644
--- a/drivers/net/octeon/ethernet-rx.c
+++ b/drivers/net/octeon/ethernet-rx.c
@@ -322,6 +322,9 @@ static ktime_t cvm_oct_ptp_to_ktime(uint64_t ptptime)
 #undef CVM_OCT_NAPI_68
 #include "ethernet-napi.c"
 
+#define CVM_OCT_NAPI_68
+#include "ethernet-napi.c"
+
 static int (*cvm_oct_napi_poll)(struct napi_struct *, int);
 
 #ifdef CONFIG_NET_POLL_CONTROLLER
-- 
1.7.0

