From 12729f9205243e67811a600a993cbd752f1a78a1 Mon Sep 17 00:00:00 2001
From: Jacek Danecki <Jacek.Danecki@intel.com>
Date: Tue, 14 Jan 2014 07:15:21 +0800
Subject: [PATCH 05/14] drm/i915: Add MFC bitstream count slice register

It is needed by mfx_transcoder_drm.

[Original patch was taken from Intel MediaSDK]

Signed-off-by: Jacek Danecki <Jacek.Danecki@intel.com>
Signed-off-by: Pengyu Ma <pengyu.ma@windriver.com>
---
 drivers/gpu/drm/i915/i915_cmd_parser.c |    1 +
 drivers/gpu/drm/i915/i915_reg.h        |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_cmd_parser.c b/drivers/gpu/drm/i915/i915_cmd_parser.c
index 163ecbc..0b032a7 100644
--- a/drivers/gpu/drm/i915/i915_cmd_parser.c
+++ b/drivers/gpu/drm/i915/i915_cmd_parser.c
@@ -458,6 +458,7 @@ static const u32 gen7_vcs_regs[] = {
 	MFC_BITSTREAM_SE_BITCOUNT_FRAME,
 	MFC_IMAGE_STATUS_MASK,
 	MFC_IMAGE_STATUS_CONTROL,
+	MFC_BITSTREAM_BYTECOUNT_SLICE,
 };
 
 static u32 gen7_render_get_cmd_length_mask(u32 cmd_header)
diff --git a/drivers/gpu/drm/i915/i915_reg.h b/drivers/gpu/drm/i915/i915_reg.h
index df5780c..4cd3622 100644
--- a/drivers/gpu/drm/i915/i915_reg.h
+++ b/drivers/gpu/drm/i915/i915_reg.h
@@ -6677,4 +6677,5 @@ enum punit_power_well {
 #define MFC_BITSTREAM_SE_BITCOUNT_FRAME 0x124A4
 #define MFC_IMAGE_STATUS_MASK 0x124B4
 #define MFC_IMAGE_STATUS_CONTROL 0x124B8
+#define MFC_BITSTREAM_BYTECOUNT_SLICE 0x000124D0
 #endif /* _I915_REG_H_ */
-- 
1.7.5.4

