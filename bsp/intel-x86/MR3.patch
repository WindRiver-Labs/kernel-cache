From c404e382e8f034b9ab368517b7c0dc6bb21d1eae Mon Sep 17 00:00:00 2001
From: Ryan Metcalfe <ryan.d.metcalfe@intel.com>
Date: Wed, 2 Aug 2017 21:32:38 -0400
Subject: [PATCH 4294/4301] MR3

[Kevin: The original patch is taken from a tarball from Ryan]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/media/pci/intel-ipu4/Kconfig               |    3 +
 drivers/media/pci/intel-ipu4/Makefile.common       |    4 +
 .../pci/intel-ipu4/intel-ipu-isys-csi2-common.c    |   11 +-
 drivers/media/pci/intel-ipu4/intel-ipu4-bus.c      |    3 -
 drivers/media/pci/intel-ipu4/intel-ipu4-buttress.c |   23 ++-
 drivers/media/pci/intel-ipu4/intel-ipu4-cpd.c      |    7 +-
 .../pci/intel-ipu4/intel-ipu4-isys-csi2-be-soc.c   |    4 +
 .../media/pci/intel-ipu4/intel-ipu4-isys-csi2-be.c |    4 +
 drivers/media/pci/intel-ipu4/intel-ipu4-isys-isa.c |    4 +
 .../media/pci/intel-ipu4/intel-ipu4-isys-subdev.c  |   19 ++-
 .../media/pci/intel-ipu4/intel-ipu4-isys-video.c   |   37 ++-
 drivers/media/pci/intel-ipu4/intel-ipu4-isys.c     |   50 +++-
 drivers/media/pci/intel-ipu4/intel-ipu4-isys.h     |    4 +
 drivers/media/pci/intel-ipu4/intel-ipu4-mmu.c      |    3 +
 drivers/media/pci/intel-ipu4/intel-ipu4-mmu.h      |    3 +
 .../pci/intel-ipu4/intel-ipu4-psys-abi-defs.h      |  220 --------------
 drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.c |  112 +++++---
 drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.h |  300 +++++++++++++++++---
 drivers/media/pci/intel-ipu4/intel-ipu4-psys.c     |   95 ++-----
 drivers/media/pci/intel-ipu4/intel-ipu4-psys.h     |    8 +-
 .../media/pci/intel-ipu4/intel-ipu4-resources.c    |  138 +++++-----
 .../media/pci/intel-ipu4/intel-ipu4-resources.h    |   16 +-
 .../media/pci/intel-ipu4/intel-ipu4-trace-event.h  |   30 ++-
 drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.c  |   92 ++-----
 drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.h  |   16 +-
 drivers/media/pci/intel-ipu4/intel-ipu4.c          |    5 +-
 drivers/media/pci/intel-ipu4/intel-ipu5-devel.c    |    8 -
 drivers/media/pci/intel-ipu4/intel-ipu5-devel.h    |    6 +-
 drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile   |    4 +-
 .../intel-ipu4/ipu4_bxtB0/Makefile.ipu4isys_src    |   12 +-
 .../intel-ipu4/ipu4_bxtB0/ia_css_fw_pkg_release.h  |    4 +-
 .../intel-ipu4/ipu4_bxtB0/lib2600/buffer/buffer.mk |    2 +-
 .../lib2600/buffer/interface/buffer_access.h       |    2 +-
 .../lib2600/buffer/interface/buffer_type.h         |    2 +-
 .../buffer/interface/ia_css_buffer_address.h       |    2 +-
 .../lib2600/buffer/interface/ia_css_input_buffer.h |    2 +-
 .../buffer/interface/ia_css_input_buffer_cpu.h     |    2 +-
 .../buffer/interface/ia_css_output_buffer.h        |    2 +-
 .../buffer/interface/ia_css_output_buffer_cpu.h    |    2 +-
 .../lib2600/buffer/interface/ia_css_return_token.h |    2 +-
 .../buffer/interface/ia_css_shared_buffer.h        |    4 +-
 .../buffer/interface/ia_css_shared_buffer_cpu.h    |    4 +-
 .../lib2600/buffer/src/cpu/buffer_access.c         |    2 +-
 .../lib2600/buffer/src/cpu/ia_css_buffer.c         |    2 +-
 .../lib2600/buffer/src/cpu/ia_css_buffer.h         |    4 +-
 .../lib2600/buffer/src/cpu/ia_css_input_buffer.c   |    2 +-
 .../lib2600/buffer/src/cpu/ia_css_output_buffer.c  |    2 +-
 .../lib2600/buffer/src/cpu/ia_css_shared_buffer.c  |    2 +-
 .../pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/cell.mk |    2 +-
 .../lib2600/cell/interface/ia_css_cell.h           |    2 +-
 .../ipu4_bxtB0/lib2600/cell/src/ia_css_cell_impl.h |    2 +-
 .../ipu4_bxtB0/lib2600/config/system_bxtB0.mk      |    2 +-
 .../lib2600/device_access/device_access.mk         |    2 +-
 .../lib2600/device_access/interface/ia_css_cmem.h  |    8 +-
 .../lib2600/device_access/interface/ia_css_xmem.h  |    8 +-
 .../device_access/interface/ia_css_xmem_cmem.h     |    8 +-
 .../lib2600/device_access/src/ia_css_cmem_host.h   |    8 +-
 .../device_access/src/ia_css_xmem_cmem_impl.h      |    8 +-
 .../lib2600/device_access/src/ia_css_xmem_host.h   |    8 +-
 .../ipu_device_buttress_properties_struct.h        |    2 +-
 .../devices/interface/ipu_device_cell_properties.h |    2 +-
 .../interface/ipu_device_cell_properties_func.h    |    2 +-
 .../interface/ipu_device_cell_properties_struct.h  |    2 +-
 .../interface/ipu_device_cell_type_properties.h    |    2 +-
 .../devices/isys/bxtB0/ipu_device_cell_devices.h   |    2 +-
 .../isys/bxtB0/ipu_device_cell_properties_defs.h   |    2 +-
 .../isys/bxtB0/ipu_device_cell_properties_impl.h   |    2 +-
 .../ipu_device_sp2600_control_properties_impl.h    |    2 +-
 .../interface/ia_css_isys_fw_bridged_types.h       |   15 +-
 .../lib2600/isysapi/interface/ia_css_isysapi.h     |    2 +-
 .../isysapi/interface/ia_css_isysapi_fw_types.h    |   14 +-
 .../isysapi/interface/ia_css_isysapi_fw_version.h  |    2 +-
 .../interface/ia_css_isysapi_proxy_region_defs.h   |    2 +-
 .../interface/ia_css_isysapi_proxy_region_types.h  |    2 +-
 .../isysapi/interface/ia_css_isysapi_types.h       |   14 +-
 .../ipu4_bxtB0/lib2600/isysapi/isysapi.mk          |    2 +-
 .../lib2600/isysapi/src/ia_css_isys_private.c      |    8 +-
 .../lib2600/isysapi/src/ia_css_isys_private.h      |    2 +-
 .../lib2600/isysapi/src/ia_css_isys_public.c       |    2 +-
 .../lib2600/isysapi/src/ia_css_isys_public_trace.c |   12 +-
 .../lib2600/isysapi/src/ia_css_isys_public_trace.h |    2 +-
 .../lib2600/isysapi/src/ia_css_isysapi_trace.h     |    2 +-
 .../lib2600/pkg_dir/interface/ia_css_pkg_dir.h     |    4 +-
 .../pkg_dir/interface/ia_css_pkg_dir_iunit.h       |    2 +-
 .../interface/ia_css_pkg_dir_storage_class.h       |    4 +-
 .../pkg_dir/interface/ia_css_pkg_dir_types.h       |    2 +-
 .../ipu4_bxtB0/lib2600/pkg_dir/pkg_dir.mk          |    2 +-
 .../lib2600/pkg_dir/src/ia_css_pkg_dir.c           |    4 +-
 .../lib2600/pkg_dir/src/ia_css_pkg_dir_impl.h      |    2 +-
 .../lib2600/pkg_dir/src/ia_css_pkg_dir_int.h       |    2 +-
 .../lib2600/port/interface/port_env_struct.h       |    2 +-
 .../ipu4_bxtB0/lib2600/port/interface/queue.h      |    2 +-
 .../lib2600/port/interface/queue_struct.h          |    2 +-
 .../ipu4_bxtB0/lib2600/port/interface/recv_port.h  |    2 +-
 .../lib2600/port/interface/recv_port_struct.h      |    2 +-
 .../ipu4_bxtB0/lib2600/port/interface/send_port.h  |    2 +-
 .../lib2600/port/interface/send_port_struct.h      |    2 +-
 .../pci/intel-ipu4/ipu4_bxtB0/lib2600/port/port.mk |    2 +-
 .../intel-ipu4/ipu4_bxtB0/lib2600/port/src/queue.c |    2 +-
 .../ipu4_bxtB0/lib2600/port/src/recv_port.c        |    2 +-
 .../ipu4_bxtB0/lib2600/port/src/send_port.c        |    2 +-
 .../isys/bxtB0_gen_reg_dump/ia_css_debug_dump.c    |    2 +-
 .../isys/bxtB0_gen_reg_dump/ia_css_debug_dump.h    |    2 +-
 .../lib2600/reg_dump/src/reg_dump_generic_bridge.c |    2 +-
 .../lib2600/regmem/interface/regmem_access.h       |    2 +-
 .../intel-ipu4/ipu4_bxtB0/lib2600/regmem/regmem.mk |    2 +-
 .../lib2600/regmem/src/regmem_access_host.h        |    2 +-
 .../ipu4_bxtB0/lib2600/regmem/src/regmem_const.h   |    2 +-
 .../ipu4_bxtB0/lib2600/support/assert_support.h    |    2 +-
 .../ipu4_bxtB0/lib2600/support/cpu_mem_support.h   |    2 +-
 .../ipu4_bxtB0/lib2600/support/error_support.h     |    4 +-
 .../ipu4_bxtB0/lib2600/support/math_support.h      |    2 +-
 .../ipu4_bxtB0/lib2600/support/misc_support.h      |    2 +-
 .../ipu4_bxtB0/lib2600/support/platform_support.h  |    2 +-
 .../ipu4_bxtB0/lib2600/support/print_support.h     |    2 +-
 .../ipu4_bxtB0/lib2600/support/storage_class.h     |    2 +-
 .../ipu4_bxtB0/lib2600/support/type_support.h      |    2 +-
 .../lib2600/syscom/interface/ia_css_syscom.h       |    2 +-
 .../syscom/interface/ia_css_syscom_config.h        |    2 +-
 .../ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom.c  |    2 +-
 .../lib2600/syscom/src/ia_css_syscom_config_fw.h   |    2 +-
 .../lib2600/syscom/src/ia_css_syscom_context.h     |    2 +-
 .../intel-ipu4/ipu4_bxtB0/lib2600/syscom/syscom.mk |    2 +-
 .../lib2600/trace/interface/ia_css_trace.h         |    2 +-
 .../intel-ipu4/ipu4_bxtB0/lib2600/trace/trace.mk   |    2 +-
 .../lib2600/utils/system_defs/system_const.h       |    2 +-
 .../lib2600/vied/vied/shared_memory_access.h       |    2 +-
 .../lib2600/vied/vied/shared_memory_map.h          |    2 +-
 .../ipu4_bxtB0/lib2600/vied/vied/vied_config.h     |    2 +-
 .../lib2600/vied/vied/vied_memory_access_types.h   |    2 +-
 .../lib2600/vied/vied/vied_subsystem_access.h      |    2 +-
 .../vied/vied_subsystem_access_initialization.h    |    2 +-
 .../vied/vied/vied_subsystem_access_types.h        |    2 +-
 .../ipu4_bxtB0/lib2600/vied/vied/vied_types.h      |    2 +-
 .../pci/intel-ipu4/ipu4_bxtB0/lib2600psys/Makefile |    2 +-
 .../TSD_FULL_program_group/ia_css_fw_pkg_release.h |   14 +
 .../lib/TSD_program_group/ia_css_fw_pkg_release.h  |   14 +
 .../ipu4_bxtB0/lib2600psys/lib/buffer/buffer.mk    |    2 +-
 .../lib/buffer/interface/buffer_access.h           |    2 +-
 .../lib2600psys/lib/buffer/interface/buffer_type.h |    2 +-
 .../lib/buffer/interface/ia_css_buffer_address.h   |    2 +-
 .../lib/buffer/interface/ia_css_input_buffer.h     |    2 +-
 .../lib/buffer/interface/ia_css_input_buffer_cpu.h |    2 +-
 .../lib/buffer/interface/ia_css_output_buffer.h    |    2 +-
 .../buffer/interface/ia_css_output_buffer_cpu.h    |    2 +-
 .../lib/buffer/interface/ia_css_shared_buffer.h    |    4 +-
 .../buffer/interface/ia_css_shared_buffer_cpu.h    |    4 +-
 .../lib2600psys/lib/buffer/src/cpu/buffer_access.c |    2 +-
 .../lib2600psys/lib/buffer/src/cpu/ia_css_buffer.c |    2 +-
 .../lib2600psys/lib/buffer/src/cpu/ia_css_buffer.h |    4 +-
 .../lib/buffer/src/cpu/ia_css_input_buffer.c       |    2 +-
 .../lib/buffer/src/cpu/ia_css_output_buffer.c      |    2 +-
 .../lib/buffer/src/cpu/ia_css_shared_buffer.c      |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/cell/cell.mk        |    2 +-
 .../lib2600psys/lib/cell/interface/ia_css_cell.h   |    2 +-
 .../lib2600psys/lib/cell/src/ia_css_cell_impl.h    |    2 +-
 .../lib/client_pkg/interface/ia_css_client_pkg.h   |    4 +-
 .../interface/ia_css_client_pkg_storage_class.h    |    4 +-
 .../client_pkg/interface/ia_css_client_pkg_types.h |    2 +-
 .../lib/client_pkg/src/ia_css_client_pkg.c         |    8 +-
 .../lib/client_pkg/src/ia_css_client_pkg_impl.h    |    2 +-
 .../lib2600psys/lib/config/psys/subsystem_bxtB0.mk |    2 +-
 .../lib2600psys/lib/config/system_bxtB0.mk         |    2 +-
 .../lib/cpd/cpd_component/cpd_component.mk         |    2 +-
 .../interface/ia_css_cpd_component_types.h         |    2 +-
 .../lib/cpd/cpd_metadata/cpd_metadata.mk           |    2 +-
 .../interface/ia_css_cpd_metadata_types.h          |    2 +-
 .../lib2600psys/lib/device_access/device_access.mk |    2 +-
 .../lib/device_access/interface/ia_css_cmem.h      |    8 +-
 .../lib/device_access/interface/ia_css_xmem.h      |    8 +-
 .../lib/device_access/interface/ia_css_xmem_cmem.h |    8 +-
 .../lib/device_access/src/ia_css_cmem_host.h       |    8 +-
 .../lib/device_access/src/ia_css_xmem_cmem_impl.h  |    8 +-
 .../lib/device_access/src/ia_css_xmem_host.h       |    8 +-
 .../ipu_device_buttress_properties_struct.h        |    2 +-
 .../devices/interface/ipu_device_cell_properties.h |    2 +-
 .../interface/ipu_device_cell_properties_func.h    |    2 +-
 .../interface/ipu_device_cell_properties_struct.h  |    2 +-
 .../interface/ipu_device_cell_type_properties.h    |    2 +-
 .../devices/interface/ipu_device_gp_properties.h   |    2 +-
 .../interface/ipu_device_gp_properties_types.h     |    2 +-
 .../devices/psys/bxtB0/ipu_device_acb_devices.h    |    2 +-
 .../devices/psys/bxtB0/ipu_device_cell_devices.h   |    2 +-
 .../psys/bxtB0/ipu_device_cell_properties_defs.h   |    2 +-
 .../psys/bxtB0/ipu_device_cell_properties_impl.h   |    2 +-
 .../lib/devices/psys/bxtB0/ipu_device_ff_devices.h |    2 +-
 .../lib/devices/psys/bxtB0/ipu_device_gp_devices.h |    2 +-
 .../src/ipu_device_isp2600_properties_impl.h       |    2 +-
 .../ipu_device_sp2600_control_properties_impl.h    |    2 +-
 .../src/ipu_device_sp2600_fp_properties_impl.h     |    2 +-
 .../src/ipu_device_sp2600_proxy_properties_impl.h  |    2 +-
 .../fw_abi_common_types/cpu/fw_abi_cpu_types.mk    |    2 +-
 .../cpu/ia_css_terminal_base_types.h               |   12 +-
 .../cpu/ia_css_terminal_manifest_base_types.h      |    2 +-
 .../lib/fw_abi_common_types/ia_css_base_types.h    |    2 +-
 .../lib/fw_abi_common_types/ia_css_terminal_defs.h |    2 +-
 .../lib/pkg_dir/interface/ia_css_pkg_dir.h         |    4 +-
 .../lib/pkg_dir/interface/ia_css_pkg_dir_iunit.h   |    2 +-
 .../interface/ia_css_pkg_dir_storage_class.h       |    4 +-
 .../lib/pkg_dir/interface/ia_css_pkg_dir_types.h   |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/pkg_dir/pkg_dir.mk  |    2 +-
 .../lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir.c   |    4 +-
 .../lib/pkg_dir/src/ia_css_pkg_dir_impl.h          |    2 +-
 .../lib/pkg_dir/src/ia_css_pkg_dir_int.h           |    2 +-
 .../lib/port/interface/port_env_struct.h           |    2 +-
 .../lib2600psys/lib/port/interface/queue.h         |    2 +-
 .../lib2600psys/lib/port/interface/queue_struct.h  |    2 +-
 .../lib2600psys/lib/port/interface/recv_port.h     |    2 +-
 .../lib/port/interface/recv_port_struct.h          |    2 +-
 .../lib2600psys/lib/port/interface/send_port.h     |    2 +-
 .../lib/port/interface/send_port_struct.h          |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/port/port.mk        |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/port/src/queue.c    |    2 +-
 .../lib2600psys/lib/port/src/recv_port.c           |    2 +-
 .../lib2600psys/lib/port/src/send_port.c           |    2 +-
 .../interface/ia_css_psys_private_pg_data.h        |    4 +-
 .../interface/ia_css_bxt_spctrl_trace.h            |    2 +-
 .../lib2600psys/lib/psys_server/psys_server.mk     |    2 +-
 .../src/bxt_spctrl_process_group_cmd_impl.c        |   35 +--
 .../data/interface/ia_css_program_group_data.h     |    6 +-
 .../interface/ia_css_program_group_data_defs.h     |    2 +-
 .../interface/ia_css_psys_data_storage_class.h     |    4 +-
 .../data/interface/ia_css_psys_data_trace.h        |    2 +-
 .../psysapi/data/src/ia_css_program_group_data.c   |    8 +-
 .../data/src/ia_css_program_group_data_impl.h      |   28 +-
 .../psysapi/device/interface/ia_css_psys_device.h  |    2 +-
 .../device/interface/ia_css_psys_device_trace.h    |    2 +-
 .../psysapi/device/interface/ia_css_psys_init.h    |    2 +-
 .../device/interface/ia_css_psys_transport.h       |    2 +-
 .../lib/psysapi/device/src/ia_css_psys_device.c    |   80 +++---
 .../interface/ia_css_psys_dynamic_storage_class.h  |    4 +-
 .../dynamic/interface/ia_css_psys_dynamic_trace.h  |    2 +-
 .../dynamic/interface/ia_css_psys_process.h        |    6 +-
 .../interface/ia_css_psys_process.hsys.kernel.h    |    2 +-
 .../interface/ia_css_psys_process.hsys.user.h      |    2 +-
 .../dynamic/interface/ia_css_psys_process.psys.h   |    2 +-
 .../dynamic/interface/ia_css_psys_process_group.h  |    6 +-
 .../ia_css_psys_process_group.hsys.kernel.h        |    2 +-
 .../ia_css_psys_process_group.hsys.user.h          |    2 +-
 .../interface/ia_css_psys_process_group.psys.h     |    2 +-
 .../interface/ia_css_psys_process_group_cmd_impl.h |   26 +-
 .../dynamic/interface/ia_css_psys_process_types.h  |    2 +-
 .../dynamic/interface/ia_css_psys_terminal.h       |    6 +-
 .../interface/ia_css_psys_terminal.hsys.user.h     |    2 +-
 .../lib/psysapi/dynamic/src/ia_css_psys_process.c  |  155 +++++-----
 .../dynamic/src/ia_css_psys_process_group.c        |   96 +++----
 .../dynamic/src/ia_css_psys_process_group_impl.h   |    2 +-
 .../psysapi/dynamic/src/ia_css_psys_process_impl.h |    2 +-
 .../src/ia_css_psys_process_private_types.h        |    2 +-
 .../lib/psysapi/dynamic/src/ia_css_psys_terminal.c |   29 +-
 .../dynamic/src/ia_css_psys_terminal_impl.h        |    8 +-
 .../src/ia_css_psys_terminal_private_types.h       |    2 +-
 .../lib/psysapi/interface/ia_css_psysapi.h         |    2 +-
 .../lib/psysapi/interface/ia_css_psysapi_trace.h   |    2 +-
 .../kernel/interface/ia_css_kernel_bitmap.h        |    2 +-
 .../kernel/interface/ia_css_psys_kernel_trace.h    |    2 +-
 .../lib/psysapi/kernel/src/ia_css_kernel_bitmap.c  |    2 +-
 .../param/interface/ia_css_program_group_param.h   |    2 +-
 .../interface/ia_css_program_group_param.sim.h     |    2 +-
 .../interface/ia_css_program_group_param_types.h   |    2 +-
 .../param/interface/ia_css_psys_param_trace.h      |    2 +-
 .../psysapi/param/src/ia_css_program_group_param.c |   52 ++--
 .../param/src/ia_css_program_group_param_private.h |    2 +-
 .../bxtB0/ia_css_psys_server_manifest.c            |    2 +-
 .../bxtB0/ia_css_psys_server_manifest.h            |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/psysapi/psysapi.mk  |    2 +-
 .../bxtB0/vied_nci_psys_resource_model.c           |    2 +-
 .../bxtB0/vied_nci_psys_resource_model.h           |    2 +-
 .../psysapi/sim/interface/ia_css_psys_sim_data.h   |    2 +-
 .../sim/interface/ia_css_psys_sim_storage_class.h  |    4 +-
 .../psysapi/sim/interface/ia_css_psys_sim_trace.h  |    2 +-
 .../sim/interface/vied_nci_psys_system_global.h    |    6 +-
 .../lib/psysapi/sim/src/ia_css_psys_sim_data.c     |    2 +-
 .../lib/psysapi/sim/src/psys_system_global_impl.h  |    2 +-
 .../lib/psysapi/sim/src/vied_nci_psys_system.c     |    8 +-
 .../static/interface/ia_css_psys_manifest_types.h  |    2 +-
 .../interface/ia_css_psys_program_group_manifest.h |    6 +-
 .../ia_css_psys_program_group_manifest.hsys.user.h |    2 +-
 .../ia_css_psys_program_group_manifest.sim.h       |    2 +-
 .../interface/ia_css_psys_program_manifest.h       |    2 +-
 .../ia_css_psys_program_manifest.hsys.kernel.h     |    2 +-
 .../ia_css_psys_program_manifest.hsys.user.h       |    2 +-
 .../interface/ia_css_psys_program_manifest.sim.h   |    2 +-
 .../interface/ia_css_psys_static_storage_class.h   |    4 +-
 .../static/interface/ia_css_psys_static_trace.h    |    2 +-
 .../interface/ia_css_psys_terminal_manifest.h      |    2 +-
 .../ia_css_psys_terminal_manifest.hsys.user.h      |    2 +-
 .../interface/ia_css_psys_terminal_manifest.sim.h  |    2 +-
 .../src/ia_css_psys_program_group_manifest.c       |  180 +++++-------
 .../src/ia_css_psys_program_group_manifest_impl.h  |   27 +-
 .../static/src/ia_css_psys_program_group_private.h |    2 +-
 .../static/src/ia_css_psys_program_manifest.c      |   28 +-
 .../static/src/ia_css_psys_terminal_manifest.c     |   30 +-
 .../psys/bxtB0_gen_reg_dump/ia_css_debug_dump.c    |    2 +-
 .../psys/bxtB0_gen_reg_dump/ia_css_debug_dump.h    |    2 +-
 .../lib/reg_dump/src/reg_dump_generic_bridge.c     |    2 +-
 .../lib/regmem/interface/regmem_access.h           |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/regmem/regmem.mk    |    2 +-
 .../lib/regmem/src/regmem_access_host.h            |    2 +-
 .../lib2600psys/lib/regmem/src/regmem_const.h      |    2 +-
 .../lib2600psys/lib/support/assert_support.h       |    2 +-
 .../lib2600psys/lib/support/cpu_mem_support.h      |    2 +-
 .../lib2600psys/lib/support/error_support.h        |    4 +-
 .../lib2600psys/lib/support/math_support.h         |    2 +-
 .../lib2600psys/lib/support/misc_support.h         |    2 +-
 .../lib2600psys/lib/support/platform_support.h     |    2 +-
 .../lib2600psys/lib/support/print_support.h        |    2 +-
 .../lib2600psys/lib/support/storage_class.h        |    2 +-
 .../lib2600psys/lib/support/type_support.h         |    2 +-
 .../lib/syscom/interface/ia_css_syscom.h           |    2 +-
 .../lib/syscom/interface/ia_css_syscom_config.h    |    2 +-
 .../lib2600psys/lib/syscom/src/ia_css_syscom.c     |    2 +-
 .../lib/syscom/src/ia_css_syscom_config_fw.h       |    2 +-
 .../lib/syscom/src/ia_css_syscom_context.h         |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/syscom/syscom.mk    |    2 +-
 .../lib2600psys/lib/trace/interface/ia_css_trace.h |    2 +-
 .../ipu4_bxtB0/lib2600psys/lib/trace/trace.mk      |    2 +-
 .../lib/vied/vied/shared_memory_access.h           |    2 +-
 .../lib2600psys/lib/vied/vied/shared_memory_map.h  |    2 +-
 .../lib2600psys/lib/vied/vied/vied_config.h        |    2 +-
 .../lib/vied/vied/vied_memory_access_types.h       |    2 +-
 .../lib/vied/vied/vied_subsystem_access.h          |    2 +-
 .../vied/vied_subsystem_access_initialization.h    |    2 +-
 .../lib/vied/vied/vied_subsystem_access_types.h    |    2 +-
 .../lib2600psys/lib/vied/vied/vied_types.h         |    2 +-
 .../vied_nci_acb/interface/vied_nci_acb_types.h    |   32 +-
 .../interface/ia_css_param_storage_class.h         |    4 +-
 .../vied_parameters/interface/ia_css_terminal.h    |    6 +-
 .../interface/ia_css_terminal_manifest.h           |    6 +-
 .../interface/ia_css_terminal_manifest_types.h     |    2 +-
 .../interface/ia_css_terminal_types.h              |   86 ++++--
 .../lib/vied_parameters/src/ia_css_terminal.c      |    8 +-
 .../lib/vied_parameters/src/ia_css_terminal_impl.h |    2 +-
 .../vied_parameters/src/ia_css_terminal_manifest.c |    8 +-
 .../src/ia_css_terminal_manifest_impl.h            |    2 +-
 .../lib/vied_parameters/vied_parameters.mk         |    2 +-
 .../ipu4_bxtB0/lib2600psys/libcsspsys2600.c        |  145 ++++++++++-
 drivers/media/pci/intel-ipu4/ipu5A0/Makefile       |    2 +
 .../pci/intel-ipu4/ipu5A0/Makefile.ipu5isys_src    |   12 +-
 .../intel-ipu4/ipu5A0/lib2600psys/libcsspsys2600.c |  137 +++++++++-
 drivers/media/pci/intel-ipu4/libintel-ipu4.c       |    3 +-
 drivers/media/pci/intel-ipu4/libintel-ipu5.c       |    3 +-
 include/media/intel-ipu4-acpi.h                    |   38 +++
 include/uapi/linux/intel-ipu4-isys-isa-fw.h        |  123 ++++++++
 344 files changed, 2006 insertions(+), 1439 deletions(-)
 delete mode 100644 drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi-defs.h
 create mode 100644 drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_FULL_program_group/ia_css_fw_pkg_release.h
 create mode 100644 drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_program_group/ia_css_fw_pkg_release.h
 create mode 100644 include/media/intel-ipu4-acpi.h
 create mode 100644 include/uapi/linux/intel-ipu4-isys-isa-fw.h

diff --git a/drivers/media/pci/intel-ipu4/Kconfig b/drivers/media/pci/intel-ipu4/Kconfig
index 08a2c4b..dbb184d 100644
--- a/drivers/media/pci/intel-ipu4/Kconfig
+++ b/drivers/media/pci/intel-ipu4/Kconfig
@@ -52,6 +52,9 @@ config VIDEO_INTEL_IPU5_FPGA
 
 endchoice
 
+config VIDEO_INTEL_IPU_FW_LIB
+	bool "Compile firmware library"
+
 
 config VIDEO_INTEL_IPU4_DEBUG
 	tristate "User space interface for firmware testing"
diff --git a/drivers/media/pci/intel-ipu4/Makefile.common b/drivers/media/pci/intel-ipu4/Makefile.common
index 21819c8..5dbf8e9 100644
--- a/drivers/media/pci/intel-ipu4/Makefile.common
+++ b/drivers/media/pci/intel-ipu4/Makefile.common
@@ -28,8 +28,10 @@ intel-ipu-isys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-isys.$(IPU_STEP).lnk.o ..
 					   ../intel-ipu4-isys-subdev.$(IPU_STEP).lnk.o \
 					   ../intel-ipu4-isys-tpg.$(IPU_STEP).lnk.o
 obj-$(CONFIG_VIDEO_INTEL_IPU5)		+= intel-ipu-isys-mod-$(IPU_STEP).o
+ifdef CONFIG_VIDEO_INTEL_IPU_FW_LIB
 intel-ipu-wrapper-$(IPU_STEP)-objs	+= ../intel-ipu4-wrapper.$(IPU_STEP).lnk.o
 obj-$(CONFIG_VIDEO_INTEL_IPU5)		+= intel-ipu-wrapper-$(IPU_STEP).o
+endif
 intel-ipu-psys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-psys.$(IPU_STEP).lnk.o ../intel-ipu4-resources.$(IPU_STEP).lnk.o ../intel-ipu4-psys-abi.$(IPU_STEP).lnk.o
 ifeq ($(CONFIG_COMPAT),y)
 intel-ipu-psys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-psys-compat32.$(IPU_STEP).lnk.o
@@ -63,8 +65,10 @@ intel-ipu4-isys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-isys.$(IPU_STEP).lnk.o .
 					   ../intel-ipu4-isys-tpg.$(IPU_STEP).lnk.o
 obj-$(CONFIG_VIDEO_INTEL_IPU4)		+= intel-ipu4-isys-mod-$(IPU_STEP).o
 endif
+ifdef CONFIG_VIDEO_INTEL_IPU_FW_LIB
 intel-ipu4-wrapper-$(IPU_STEP)-objs	+= ../intel-ipu4-wrapper.$(IPU_STEP).lnk.o
 obj-$(CONFIG_VIDEO_INTEL_IPU4)		+= intel-ipu4-wrapper-$(IPU_STEP).o
+endif
 intel-ipu4-psys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-psys.$(IPU_STEP).lnk.o ../intel-ipu4-resources.$(IPU_STEP).lnk.o ../intel-ipu4-psys-abi.$(IPU_STEP).lnk.o
 ifeq ($(CONFIG_COMPAT),y)
 intel-ipu4-psys-mod-$(IPU_STEP)-objs			+= ../intel-ipu4-psys-compat32.$(IPU_STEP).lnk.o
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu-isys-csi2-common.c b/drivers/media/pci/intel-ipu4/intel-ipu-isys-csi2-common.c
index ea2ed71..661db5d 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu-isys-csi2-common.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu-isys-csi2-common.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2013--2016 Intel Corporation.
+ * Copyright (c) 2013--2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -30,6 +30,7 @@
 #include "intel-ipu4-isys-video.h"
 
 #define CREATE_TRACE_POINTS
+#define IPU4_SOF_SEQID_TRACE
 #include "intel-ipu4-trace-event.h"
 
 static const uint32_t csi2_supported_codes_pad_sink[] = {
@@ -49,6 +50,10 @@ static const uint32_t csi2_supported_codes_pad_sink[] = {
 	MEDIA_BUS_FMT_SGBRG12_1X12,
 	MEDIA_BUS_FMT_SGRBG12_1X12,
 	MEDIA_BUS_FMT_SRGGB12_1X12,
+	MEDIA_BUS_FMT_SBGGR14_1X14,
+	MEDIA_BUS_FMT_SGBRG14_1X14,
+	MEDIA_BUS_FMT_SGRBG14_1X14,
+	MEDIA_BUS_FMT_SRGGB14_1X14,
 	MEDIA_BUS_FMT_SBGGR8_1X8,
 	MEDIA_BUS_FMT_SGBRG8_1X8,
 	MEDIA_BUS_FMT_SGRBG8_1X8,
@@ -69,6 +74,10 @@ static const uint32_t csi2_supported_codes_pad_source[] = {
 	MEDIA_BUS_FMT_SGBRG12_1X12,
 	MEDIA_BUS_FMT_SGRBG12_1X12,
 	MEDIA_BUS_FMT_SRGGB12_1X12,
+	MEDIA_BUS_FMT_SBGGR14_1X14,
+	MEDIA_BUS_FMT_SGBRG14_1X14,
+	MEDIA_BUS_FMT_SGRBG14_1X14,
+	MEDIA_BUS_FMT_SRGGB14_1X14,
 	MEDIA_BUS_FMT_SBGGR8_1X8,
 	MEDIA_BUS_FMT_SGBRG8_1X8,
 	MEDIA_BUS_FMT_SGRBG8_1X8,
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-bus.c b/drivers/media/pci/intel-ipu4/intel-ipu4-bus.c
index 1ed4056..a3a16f7 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-bus.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-bus.c
@@ -392,9 +392,6 @@ struct intel_ipu4_bus_device *intel_ipu4_bus_add_device(
 		return ERR_PTR(rval);
 	}
 
-	pm_runtime_allow(&adev->dev);
-	pm_runtime_enable(&adev->dev);
-
 	mutex_lock(&intel_ipu4_bus_mutex);
 	list_add(&adev->list, &isp->devices);
 	mutex_unlock(&intel_ipu4_bus_mutex);
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-buttress.c b/drivers/media/pci/intel-ipu4/intel-ipu4-buttress.c
index debc340..a6e0a07 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-buttress.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-buttress.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2013--2016 Intel Corporation.
+ * Copyright (c) 2013--2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -34,6 +34,7 @@
 #include "intel-ipu5-buttress-regs.h"
 #include "intel-ipu4-cpd.h"
 #define CREATE_TRACE_POINTS
+#define IPU4_PERF_REG_TRACE
 #include "intel-ipu4-trace-event.h"
 
 #define BOOTLOADER_STATUS_OFFSET	0x8000
@@ -60,6 +61,8 @@
 
 #define BUTTRESS_CSE_IPC_RESET_RETRY	4
 
+#define BUTTRESS_IPC_CMD_SEND_RETRY	1
+
 #define BUTTRESS_PS_FREQ_STEP		25U
 #define BUTTRESS_MIN_FORCE_PS_FREQ	(BUTTRESS_PS_FREQ_STEP * 8)
 #define BUTTRESS_MAX_FORCE_PS_FREQ	(BUTTRESS_PS_FREQ_STEP * 32)
@@ -278,7 +281,7 @@ int intel_ipu4_buttress_ipc_send_bulk(
 	u32 val;
 	int ret;
 	int tout;
-	unsigned int i;
+	unsigned int i, retry = BUTTRESS_IPC_CMD_SEND_RETRY;
 
 	ipc = ipc_domain == INTEL_IPU4_BUTTRESS_IPC_CSE ? &b->cse : &b->ish;
 
@@ -308,10 +311,22 @@ int intel_ipu4_buttress_ipc_send_bulk(
 						BUTTRESS_IPC_TX_TIMEOUT));
 		if (!tout) {
 			dev_err(&isp->pdev->dev, "send IPC response timeout\n");
-			ret = -ETIMEDOUT;
-			goto out;
+			if (!retry--) {
+				ret = -ETIMEDOUT;
+				goto out;
+			}
+
+			/*
+			 * WORKAROUND: Sometimes CSE is not
+			 * responding on first try, try again.
+			 */
+			writel(0, isp->base + ipc->db0_out);
+			i--;
+			continue;
 		}
 
+		retry = BUTTRESS_IPC_CMD_SEND_RETRY;
+
 		if (!msgs[i].require_resp)
 			continue;
 
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-cpd.c b/drivers/media/pci/intel-ipu4/intel-ipu4-cpd.c
index b6439381..7ba9538 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-cpd.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-cpd.c
@@ -355,12 +355,11 @@ static int intel_ipu4_cpd_validate_moduledata(struct intel_ipu4_device *isp,
 		return -EINVAL;
 	}
 
-	if (IA_CSS_FW_PKG_RELEASE != mod_hdr->fw_pkg_date) {
-		dev_err(&isp->pdev->dev,
+	if (IA_CSS_FW_PKG_RELEASE != mod_hdr->fw_pkg_date)
+		dev_warn(&isp->pdev->dev,
 			"Moduledata and library version mismatch (%x != %x)\n",
 			mod_hdr->fw_pkg_date, IA_CSS_FW_PKG_RELEASE);
-		return -EINVAL;
-	}
+
 
 	dev_info(&isp->pdev->dev, "CSS release: %x\n", IA_CSS_FW_PKG_RELEASE);
 
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be-soc.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be-soc.c
index d2e3ca3..27f7da5 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be-soc.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be-soc.c
@@ -36,6 +36,10 @@ static const uint32_t csi2_be_soc_supported_codes_pad[] = {
 	MEDIA_BUS_FMT_RGB888_1X24,
 	MEDIA_BUS_FMT_UYVY8_1X16,
 	MEDIA_BUS_FMT_YUYV8_1X16,
+	MEDIA_BUS_FMT_SBGGR14_1X14,
+	MEDIA_BUS_FMT_SGBRG14_1X14,
+	MEDIA_BUS_FMT_SGRBG14_1X14,
+	MEDIA_BUS_FMT_SRGGB14_1X14,
 	MEDIA_BUS_FMT_SBGGR12_1X12,
 	MEDIA_BUS_FMT_SGBRG12_1X12,
 	MEDIA_BUS_FMT_SGRBG12_1X12,
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be.c
index 7faab30..3edc7b9 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-csi2-be.c
@@ -31,6 +31,10 @@
  * Otherwise pixel order calculation below WILL BREAK!
  */
 static const uint32_t csi2_be_supported_codes_pad[] = {
+	MEDIA_BUS_FMT_SBGGR14_1X14,
+	MEDIA_BUS_FMT_SGBRG14_1X14,
+	MEDIA_BUS_FMT_SGRBG14_1X14,
+	MEDIA_BUS_FMT_SRGGB14_1X14,
 	MEDIA_BUS_FMT_SBGGR12_1X12,
 	MEDIA_BUS_FMT_SGBRG12_1X12,
 	MEDIA_BUS_FMT_SGRBG12_1X12,
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-isa.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-isa.c
index 4aaf221..4fd62db 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-isa.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-isa.c
@@ -33,6 +33,10 @@
 #include "intel-ipu4-isys-video.h"
 
 static const uint32_t isa_supported_codes_pad_sink[] = {
+	MEDIA_BUS_FMT_SBGGR14_1X14,
+	MEDIA_BUS_FMT_SGBRG14_1X14,
+	MEDIA_BUS_FMT_SGRBG14_1X14,
+	MEDIA_BUS_FMT_SRGGB14_1X14,
 	MEDIA_BUS_FMT_SBGGR12_1X12,
 	MEDIA_BUS_FMT_SGBRG12_1X12,
 	MEDIA_BUS_FMT_SGRBG12_1X12,
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-subdev.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-subdev.c
index 1b66394..d78db10 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-subdev.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-subdev.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2013--2016 Intel Corporation.
+ * Copyright (c) 2013--2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -32,6 +32,11 @@ unsigned int intel_ipu4_isys_mbus_code_to_bpp(u32 code)
 	case MEDIA_BUS_FMT_UYVY8_1X16:
 	case MEDIA_BUS_FMT_YUYV8_1X16:
 		return 16;
+	case MEDIA_BUS_FMT_SBGGR14_1X14:
+	case MEDIA_BUS_FMT_SGBRG14_1X14:
+	case MEDIA_BUS_FMT_SGRBG14_1X14:
+	case MEDIA_BUS_FMT_SRGGB14_1X14:
+		return 14;
 	case MEDIA_BUS_FMT_SBGGR12_1X12:
 	case MEDIA_BUS_FMT_SGBRG12_1X12:
 	case MEDIA_BUS_FMT_SGRBG12_1X12:
@@ -66,6 +71,11 @@ unsigned int intel_ipu4_isys_mbus_code_to_mipi(u32 code)
 	case MEDIA_BUS_FMT_UYVY8_1X16:
 	case MEDIA_BUS_FMT_YUYV8_1X16:
 		return INTEL_IPU4_ISYS_MIPI_CSI2_TYPE_YUV422_8;
+	case MEDIA_BUS_FMT_SBGGR14_1X14:
+	case MEDIA_BUS_FMT_SGBRG14_1X14:
+	case MEDIA_BUS_FMT_SGRBG14_1X14:
+	case MEDIA_BUS_FMT_SRGGB14_1X14:
+		return INTEL_IPU4_ISYS_MIPI_CSI2_TYPE_RAW14;
 	case MEDIA_BUS_FMT_SBGGR12_1X12:
 	case MEDIA_BUS_FMT_SGBRG12_1X12:
 	case MEDIA_BUS_FMT_SGRBG12_1X12:
@@ -95,21 +105,25 @@ enum intel_ipu4_isys_subdev_pixelorder
 intel_ipu4_isys_subdev_get_pixelorder(u32 code)
 {
 	switch (code) {
+	case MEDIA_BUS_FMT_SBGGR14_1X14:
 	case MEDIA_BUS_FMT_SBGGR12_1X12:
 	case MEDIA_BUS_FMT_SBGGR10_1X10:
 	case MEDIA_BUS_FMT_SBGGR8_1X8:
 	case MEDIA_BUS_FMT_SBGGR10_DPCM8_1X8:
 		return INTEL_IPU4_ISYS_SUBDEV_PIXELORDER_BGGR;
+	case MEDIA_BUS_FMT_SGBRG14_1X14:
 	case MEDIA_BUS_FMT_SGBRG12_1X12:
 	case MEDIA_BUS_FMT_SGBRG10_1X10:
 	case MEDIA_BUS_FMT_SGBRG8_1X8:
 	case MEDIA_BUS_FMT_SGBRG10_DPCM8_1X8:
 		return INTEL_IPU4_ISYS_SUBDEV_PIXELORDER_GBRG;
+	case MEDIA_BUS_FMT_SGRBG14_1X14:
 	case MEDIA_BUS_FMT_SGRBG12_1X12:
 	case MEDIA_BUS_FMT_SGRBG10_1X10:
 	case MEDIA_BUS_FMT_SGRBG8_1X8:
 	case MEDIA_BUS_FMT_SGRBG10_DPCM8_1X8:
 		return INTEL_IPU4_ISYS_SUBDEV_PIXELORDER_GRBG;
+	case MEDIA_BUS_FMT_SRGGB14_1X14:
 	case MEDIA_BUS_FMT_SRGGB12_1X12:
 	case MEDIA_BUS_FMT_SRGGB10_1X10:
 	case MEDIA_BUS_FMT_SRGGB8_1X8:
@@ -751,7 +765,8 @@ int intel_ipu4_isys_subdev_link_validate(struct v4l2_subdev *sd,
 			struct intel_ipu4_isys_pipeline, pipe);
 	struct intel_ipu4_isys_subdev *asd = to_intel_ipu4_isys_subdev(sd);
 
-	if (source_sd->owner != THIS_MODULE) {
+	if (strncmp(source_sd->name, INTEL_IPU4_ISYS_ENTITY_PREFIX,
+		strlen(INTEL_IPU4_ISYS_ENTITY_PREFIX)) != 0) {
 		/*
 		 * source_sd isn't ours --- sd must be the external
 		 * sub-device.
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-video.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-video.c
index c5f6027..27ba1b8 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys-video.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys-video.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2013--2016 Intel Corporation.
+ * Copyright (c) 2013--2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -57,6 +57,10 @@ const struct intel_ipu4_isys_pixelformat intel_ipu4_isys_pfmts[] = {
 	/* YUV vector format */
 	{ V4L2_PIX_FMT_YUYV420_V32, 24, 24, 0, MEDIA_BUS_FMT_YUYV12_1X24, IPU_FW_ISYS_FRAME_FORMAT_YUV420_16 },
 	/* Raw bayer vector formats. */
+	{ V4L2_PIX_FMT_SBGGR14V32, 16, 14, 0, MEDIA_BUS_FMT_SBGGR14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGBRG14V32, 16, 14, 0, MEDIA_BUS_FMT_SGBRG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGRBG14V32, 16, 14, 0, MEDIA_BUS_FMT_SGRBG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SRGGB14V32, 16, 14, 0, MEDIA_BUS_FMT_SRGGB14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SBGGR12V32, 16, 12, 0, MEDIA_BUS_FMT_SBGGR12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGBRG12V32, 16, 12, 0, MEDIA_BUS_FMT_SGBRG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGRBG12V32, 16, 12, 0, MEDIA_BUS_FMT_SGRBG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
@@ -74,6 +78,10 @@ const struct intel_ipu4_isys_pixelformat intel_ipu4_isys_pfmts[] = {
 };
 
 const struct intel_ipu4_isys_pixelformat intel_ipu5_isys_pfmts[] = {
+	{ V4L2_PIX_FMT_SBGGR14, 16, 14, 0, MEDIA_BUS_FMT_SBGGR14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGBRG14, 16, 14, 0, MEDIA_BUS_FMT_SGBRG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGRBG14, 16, 14, 0, MEDIA_BUS_FMT_SGRBG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SRGGB14, 16, 14, 0, MEDIA_BUS_FMT_SRGGB14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SBGGR12, 16, 12, 0, MEDIA_BUS_FMT_SBGGR12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGBRG12, 16, 12, 0, MEDIA_BUS_FMT_SGBRG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGRBG12, 16, 12, 0, MEDIA_BUS_FMT_SGRBG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
@@ -97,6 +105,10 @@ const struct intel_ipu4_isys_pixelformat intel_ipu4_isys_pfmts_be_soc[] = {
 	{ V4L2_PIX_FMT_XRGB32, 32, 32, 0, MEDIA_BUS_FMT_RGB565_1X16, IPU_FW_ISYS_FRAME_FORMAT_RGBA888 },
 	{ V4L2_PIX_FMT_XBGR32, 32, 32, 0, MEDIA_BUS_FMT_RGB888_1X24, IPU_FW_ISYS_FRAME_FORMAT_RGBA888 },
 	/* Raw bayer formats. */
+	{ V4L2_PIX_FMT_SBGGR14, 16, 14, 0, MEDIA_BUS_FMT_SBGGR14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGBRG14, 16, 14, 0, MEDIA_BUS_FMT_SGBRG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SGRBG14, 16, 14, 0, MEDIA_BUS_FMT_SGRBG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
+	{ V4L2_PIX_FMT_SRGGB14, 16, 14, 0, MEDIA_BUS_FMT_SRGGB14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SBGGR12, 16, 12, 0, MEDIA_BUS_FMT_SBGGR12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGBRG12, 16, 12, 0, MEDIA_BUS_FMT_SGBRG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
 	{ V4L2_PIX_FMT_SGRBG12, 16, 12, 0, MEDIA_BUS_FMT_SGRBG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW16 },
@@ -122,11 +134,19 @@ const struct intel_ipu4_isys_pixelformat intel_ipu4_isys_pfmts_packed[] = {
 	{ V4L2_PIX_FMT_SGBRG12, 12, 12, 0, MEDIA_BUS_FMT_SGBRG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
 	{ V4L2_PIX_FMT_SGRBG12, 12, 12, 0, MEDIA_BUS_FMT_SGRBG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
 	{ V4L2_PIX_FMT_SRGGB12, 12, 12, 0, MEDIA_BUS_FMT_SRGGB12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
+	{ V4L2_PIX_FMT_SBGGR14, 14, 14, 0, MEDIA_BUS_FMT_SBGGR14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SGBRG14, 14, 14, 0, MEDIA_BUS_FMT_SGBRG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SGRBG14, 14, 14, 0, MEDIA_BUS_FMT_SGRBG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SRGGB14, 14, 14, 0, MEDIA_BUS_FMT_SRGGB14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
 #else /* V4L2_PIX_FMT_SBGGR12P */
 	{ V4L2_PIX_FMT_SBGGR12P, 12, 12, 0, MEDIA_BUS_FMT_SBGGR12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
 	{ V4L2_PIX_FMT_SGBRG12P, 12, 12, 0, MEDIA_BUS_FMT_SGBRG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
 	{ V4L2_PIX_FMT_SGRBG12P, 12, 12, 0, MEDIA_BUS_FMT_SGRBG12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
 	{ V4L2_PIX_FMT_SRGGB12P, 12, 12, 0, MEDIA_BUS_FMT_SRGGB12_1X12, IPU_FW_ISYS_FRAME_FORMAT_RAW12 },
+	{ V4L2_PIX_FMT_SBGGR14P, 14, 14, 0, MEDIA_BUS_FMT_SBGGR14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SGBRG14P, 14, 14, 0, MEDIA_BUS_FMT_SGBRG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SGRBG14P, 14, 14, 0, MEDIA_BUS_FMT_SGRBG14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
+	{ V4L2_PIX_FMT_SRGGB14P, 14, 14, 0, MEDIA_BUS_FMT_SRGGB14_1X14, IPU_FW_ISYS_FRAME_FORMAT_RAW14 },
 #endif /* V4L2_PIX_FMT_SBGGR12P */
 	{ V4L2_PIX_FMT_SBGGR10P, 10, 10, 0, MEDIA_BUS_FMT_SBGGR10_1X10, IPU_FW_ISYS_FRAME_FORMAT_RAW10 },
 	{ V4L2_PIX_FMT_SGBRG10P, 10, 10, 0, MEDIA_BUS_FMT_SGBRG10_1X10, IPU_FW_ISYS_FRAME_FORMAT_RAW10 },
@@ -628,7 +648,8 @@ static bool is_external(struct intel_ipu4_isys_video *av,
 
 	sd = media_entity_to_v4l2_subdev(entity);
 
-	if (sd->owner != THIS_MODULE)
+	if (strncmp(sd->name, INTEL_IPU4_ISYS_ENTITY_PREFIX,
+		strlen(INTEL_IPU4_ISYS_ENTITY_PREFIX)) != 0)
 		return true;
 
 	for (i = 0; i < av->isys->pdata->ipdata->tpg.ntpgs
@@ -756,8 +777,9 @@ static int get_external_facing_format(struct intel_ipu4_isys_pipeline *ip,
 	struct intel_ipu4_isys_video *av =
 		container_of(ip, struct intel_ipu4_isys_video, ip);
 	struct media_pad *external_facing =
-		(media_entity_to_v4l2_subdev(ip->external->entity)->owner
-		== THIS_MODULE)
+		(strncmp(media_entity_to_v4l2_subdev(ip->external->entity)->name,
+		INTEL_IPU4_ISYS_ENTITY_PREFIX,
+		strlen(INTEL_IPU4_ISYS_ENTITY_PREFIX)) == 0)
 		? ip->external : media_entity_remote_pad(ip->external);
 
 	if (WARN_ON(!external_facing)) {
@@ -1483,7 +1505,9 @@ int intel_ipu4_isys_video_set_streaming(struct intel_ipu4_isys_video *av,
 			continue;
 
 		/* Don't start truly external devices quite yet. */
-		if (media_entity_to_v4l2_subdev(entity)->owner != THIS_MODULE
+		if (strncmp(media_entity_to_v4l2_subdev(entity)->name,
+			INTEL_IPU4_ISYS_ENTITY_PREFIX,
+			strlen(INTEL_IPU4_ISYS_ENTITY_PREFIX)) != 0
 		    || ip->external->entity == entity)
 			continue;
 
@@ -1503,7 +1527,8 @@ int intel_ipu4_isys_video_set_streaming(struct intel_ipu4_isys_video *av,
 
 	/* Oh crap */
 	if (state) {
-		if (intel_ipu_skew_cal_required(ip->csi2))
+		if (intel_ipu_skew_cal_required(ip->csi2) &&
+		    ip->csi2->remote_streams == ip->csi2->stream_count)
 			perform_skew_cal(ip);
 
 		rval = start_stream_firmware(av, bl);
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys.c b/drivers/media/pci/intel-ipu4/intel-ipu4-isys.c
index e4050fb..ef9e77f 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys.c
@@ -44,7 +44,6 @@
 #include "intel-ipu5-regs.h"
 #include "intel-ipu4-buttress.h"
 #include "intel-ipu4-buttress-regs.h"
-#include "intel-ipu4-wrapper.h"
 #include "intel-ipu5-devel.h"
 
 #define ISYS_PM_QOS_VALUE	300
@@ -235,11 +234,37 @@ static int intel_ipu4_pipeline_pm_power_one(struct media_entity *entity,
 	return 0;
 }
 
+
+/*
+ * intel_ipu4_get_linked_pad - Find internally connected pad for a given pad
+ * @entity: The entity
+ * @pad: Initial pad
+ *
+ * Return index of the linked pad.
+*/
+static int intel_ipu4_get_linked_pad(struct media_entity *entity,
+					struct media_pad *pad)
+{
+	int i;
+
+	for (i=0; i<entity->num_pads; i++) {
+		struct media_pad *opposite_pad = &entity->pads[i];
+		if (opposite_pad == pad)
+			continue;
+
+		if (media_entity_has_route(entity, pad->index, opposite_pad->index))
+			return opposite_pad->index;
+	}
+
+	return 0;
+}
+
 /*
  * intel_ipu4_pipeline_pm_power - Apply power change to all entities
  * in a pipeline
  * @entity: The entity
  * @change: Use count change
+ * @from_pad: Starting pad
  *
  * Walk the pipeline to update the use count and the power state of
  * all non-node
@@ -248,7 +273,7 @@ static int intel_ipu4_pipeline_pm_power_one(struct media_entity *entity,
  * Return 0 on success or a negative error code on failure.
  */
 static int intel_ipu4_pipeline_pm_power(struct media_entity *entity,
-					int change)
+					int change, int from_pad)
 {
 	struct media_entity_graph graph;
 	struct media_entity *first = entity;
@@ -260,7 +285,7 @@ static int intel_ipu4_pipeline_pm_power(struct media_entity *entity,
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 5, 0)
 	media_entity_graph_walk_init(&graph, entity->graph_obj.mdev);
 #endif
-	media_entity_graph_walk_start(&graph, &entity->pads[0]);
+	media_entity_graph_walk_start(&graph, &entity->pads[from_pad]);
 
 	while (!ret && (entity = media_entity_graph_walk_next(&graph)))
 		if (!is_media_entity_v4l2_io(entity))
@@ -275,7 +300,7 @@ static int intel_ipu4_pipeline_pm_power(struct media_entity *entity,
 #if LINUX_VERSION_CODE >= KERNEL_VERSION(4, 5, 0)
 	media_entity_graph_walk_init(&graph, entity->graph_obj.mdev);
 #endif
-	media_entity_graph_walk_start(&graph, &first->pads[0]);
+	media_entity_graph_walk_start(&graph, &first->pads[from_pad]);
 
 	while ((first = media_entity_graph_walk_next(&graph))
 	       && first != entity)
@@ -318,7 +343,7 @@ int intel_ipu4_pipeline_pm_use(struct media_entity *entity, int use)
 	WARN_ON(entity->use_count < 0);
 
 	/* Apply power change to connected non-nodes. */
-	ret = intel_ipu4_pipeline_pm_power(entity, change);
+	ret = intel_ipu4_pipeline_pm_power(entity, change, 0);
 	if (ret < 0)
 		entity->use_count -= change;
 
@@ -360,21 +385,23 @@ static int intel_ipu4_pipeline_link_notify(struct media_link *link, u32 flags,
 	if (notification == MEDIA_DEV_NOTIFY_POST_LINK_CH &&
 	    !(flags & MEDIA_LNK_FL_ENABLED)) {
 		/* Powering off entities is assumed to never fail. */
-		intel_ipu4_pipeline_pm_power(source, -sink_use);
-		intel_ipu4_pipeline_pm_power(sink, -source_use);
+		intel_ipu4_pipeline_pm_power(source, -sink_use, 0);
+		intel_ipu4_pipeline_pm_power(sink, -source_use, 0);
 		return 0;
 	}
 
 	if (notification == MEDIA_DEV_NOTIFY_PRE_LINK_CH &&
 		(flags & MEDIA_LNK_FL_ENABLED)) {
 
-		ret = intel_ipu4_pipeline_pm_power(source, sink_use);
+		int from_pad = intel_ipu4_get_linked_pad(source, link->source);
+
+		ret = intel_ipu4_pipeline_pm_power(source, sink_use, from_pad);
 		if (ret < 0)
 			return ret;
 
-		ret = intel_ipu4_pipeline_pm_power(sink, source_use);
+		ret = intel_ipu4_pipeline_pm_power(sink, source_use, 0);
 		if (ret < 0)
-			intel_ipu4_pipeline_pm_power(source, -sink_use);
+			intel_ipu4_pipeline_pm_power(source, -sink_use, 0);
 
 		return ret;
 	}
@@ -1572,6 +1599,9 @@ static int isys_probe(struct intel_ipu4_bus_device *adev)
 			   PM_QOS_DEFAULT_VALUE);
 	alloc_fw_msg_buffers(isys, 20);
 
+	pm_runtime_allow(&adev->dev);
+	pm_runtime_enable(&adev->dev);
+
 	rval = isys_register_devices(isys);
 	if (rval)
 		goto out_remove_pkg_dir_shared_buffer;
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-isys.h b/drivers/media/pci/intel-ipu4/intel-ipu4-isys.h
index b483a1f..34f98bd 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-isys.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-isys.h
@@ -58,7 +58,11 @@
 #define INTEL_IPU4_ISYS_OPEN_RETRY		1000
 #define INTEL_IPU4_ISYS_TURNOFF_DELAY_US		1000
 #define INTEL_IPU4_ISYS_TURNOFF_TIMEOUT		1000
+#if defined CONFIG_VIDEO_INTEL_IPU5_FPGA
+#define INTEL_IPU4_LIB_CALL_TIMEOUT_MS		10000
+#else
 #define INTEL_IPU4_LIB_CALL_TIMEOUT_MS		2000
+#endif
 #define INTEL_IPU4_LIB_CALL_TIMEOUT_JIFFIES \
 	msecs_to_jiffies(INTEL_IPU4_LIB_CALL_TIMEOUT_MS)
 
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.c b/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.c
index 766fc9f..6db1fe8 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.c
@@ -798,6 +798,9 @@ static int intel_ipu4_mmu_probe(struct intel_ipu4_bus_device *adev)
 	dev_info(&adev->dev, "MMU: %d, allocated page for trash: 0x%p\n",
 			     mmu->mmid, mmu->trash_page);
 
+	pm_runtime_allow(&adev->dev);
+	pm_runtime_enable(&adev->dev);
+
 	/*
 	 * FIXME: We can't unload this --- bus_set_iommu() will
 	 * register a notifier which must stay until the devices are
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.h b/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.h
index 5251c64..915bb6f 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-mmu.h
@@ -20,6 +20,9 @@
 #include "intel-ipu4.h"
 #include "intel-ipu4-pdata.h"
 
+#define ISYS_MMID 1
+#define PSYS_MMID 0
+
 struct pci_dev;
 
 /*
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi-defs.h b/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi-defs.h
deleted file mode 100644
index 7d5be8f..0000000
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi-defs.h
+++ /dev/null
@@ -1,220 +0,0 @@
-/*
- * Copyright (c) 2016 Intel Corporation.
- *
- * This program is free software; you can redistribute it and/or
- * modify it under the terms of the GNU General Public License version
- * 2 as published by the Free Software Foundation.
- *
- * This program is distributed in the hope that it will be useful,
- * but WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- * GNU General Public License for more details.
- *
- */
-#ifndef INTEL_IPU4_PSYS_ABI_DEFS_H
-#define INTEL_IPU4_PSYS_ABI_DEFS_H
-
-/* ia_css_psys_device.c */
-#define IA_CSS_PSYS_CMD_QUEUE_SIZE 0x20
-#define IA_CSS_PSYS_EVENT_QUEUE_SIZE 0x40
-
-/* ia_css_psys_transport.h */
-#define IA_CSS_PSYS_CMD_BITS 64
-#define IA_CSS_PSYS_EVENT_BITS 128
-
-enum {
-	VIED_NCI_GMEM_TYPE_ID = 0,
-	VIED_NCI_DMEM_TYPE_ID,
-	VIED_NCI_VMEM_TYPE_ID,
-	VIED_NCI_BAMEM_TYPE_ID,
-	VIED_NCI_PMEM_TYPE_ID,
-	VIED_NCI_N_MEM_TYPE_ID
-};
-
-enum {
-	VIED_NCI_DEV_CHN_DMA_EXT0_ID = 0,
-	VIED_NCI_DEV_CHN_GDC_ID,
-	VIED_NCI_DEV_CHN_DMA_EXT1_READ_ID,
-	VIED_NCI_DEV_CHN_DMA_EXT1_WRITE_ID,
-	VIED_NCI_DEV_CHN_DMA_INTERNAL_ID,
-	VIED_NCI_DEV_CHN_DMA_IPFD_ID,
-	VIED_NCI_DEV_CHN_DMA_ISA_ID,
-	VIED_NCI_DEV_CHN_DMA_FW_ID,
-	VIED_NCI_N_DEV_CHN_ID
-};
-
-enum {
-	VIED_NCI_SP_CTRL_TYPE_ID = 0,
-	VIED_NCI_SP_SERVER_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_ISA_TYPE_ID,
-	VIED_NCI_ACC_OSA_TYPE_ID,
-	VIED_NCI_GDC_TYPE_ID,
-	VIED_NCI_N_CELL_TYPE_ID
-};
-
-#if IS_ENABLED(CONFIG_VIDEO_INTEL_IPU4)
-
-enum {
-	VIED_NCI_SP0_ID = 0,
-	VIED_NCI_SP1_ID,
-	VIED_NCI_SP2_ID,
-	VIED_NCI_VP0_ID,
-	VIED_NCI_VP1_ID,
-	VIED_NCI_VP2_ID,
-	VIED_NCI_VP3_ID,
-	VIED_NCI_ACC0_ID,
-	VIED_NCI_ACC1_ID,
-	VIED_NCI_ACC2_ID,
-	VIED_NCI_ACC3_ID,
-	VIED_NCI_ACC4_ID,
-	VIED_NCI_ACC5_ID,
-	VIED_NCI_ACC6_ID,
-	VIED_NCI_ACC7_ID,
-	VIED_NCI_GDC0_ID,
-	VIED_NCI_GDC1_ID,
-	VIED_NCI_N_CELL_ID
-};
-
-#define VIED_NCI_DEV_CHN_DMA_EXT0_MAX_SIZE		(30)
-#define VIED_NCI_DEV_CHN_GDC_MAX_SIZE			(4)
-#define VIED_NCI_DEV_CHN_DMA_EXT1_READ_MAX_SIZE		(30)
-#define VIED_NCI_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE	(20)
-#define VIED_NCI_DEV_CHN_DMA_INTERNAL_MAX_SIZE		(2)
-#define VIED_NCI_DEV_CHN_DMA_IPFD_MAX_SIZE		(5)
-#define VIED_NCI_DEV_CHN_DMA_ISA_MAX_SIZE		(2)
-#define VIED_NCI_DEV_CHN_DMA_FW_MAX_SIZE		(1)
-
-
-#elif IS_ENABLED(CONFIG_VIDEO_INTEL_IPU5)
-
-enum {
-	VIED_NCI_SP0_ID = 0,
-	VIED_NCI_SP1_ID,
-	VIED_NCI_SP2_ID,
-	VIED_NCI_VP0_ID,
-	VIED_NCI_ACC0_ID,
-	VIED_NCI_ACC1_ID,
-	VIED_NCI_ACC2_ID,
-	VIED_NCI_ACC3_ID,
-	VIED_NCI_ACC4_ID,
-	VIED_NCI_ACC5_ID,
-	VIED_NCI_ACC6_ID,
-	VIED_NCI_ACC7_ID,
-	VIED_NCI_ACC8_ID,
-	VIED_NCI_ACC9_ID,
-	VIED_NCI_ACC10_ID,
-	VIED_NCI_ACC11_ID,
-	VIED_NCI_GDC0_ID,
-	VIED_NCI_N_CELL_ID
-};
-
-#define VIED_NCI_DEV_CHN_DMA_EXT0_MAX_SIZE		(30)
-#define VIED_NCI_DEV_CHN_GDC_MAX_SIZE			(4)
-#define VIED_NCI_DEV_CHN_DMA_EXT1_READ_MAX_SIZE		(30)
-#define VIED_NCI_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE	(20)
-#define VIED_NCI_DEV_CHN_DMA_INTERNAL_MAX_SIZE		(4)
-#define VIED_NCI_DEV_CHN_DMA_IPFD_MAX_SIZE		(5)
-#define VIED_NCI_DEV_CHN_DMA_ISA_MAX_SIZE		(2)
-#define VIED_NCI_DEV_CHN_DMA_FW_MAX_SIZE		(1)
-
-#endif
-
-#define VIED_NCI_N_DATA_MEM_TYPE_ID	(VIED_NCI_N_MEM_TYPE_ID - 1)
-
-/* ia_css_psys_transport.h */
-enum {
-	IA_CSS_PSYS_EVENT_TYPE_SUCCESS = 0,
-	IA_CSS_PSYS_EVENT_TYPE_UNKNOWN_ERROR = 1,
-	IA_CSS_PSYS_EVENT_TYPE_RET_REM_OBJ_NOT_FOUND = 2,
-	IA_CSS_PSYS_EVENT_TYPE_RET_REM_OBJ_TOO_BIG = 3,
-	IA_CSS_PSYS_EVENT_TYPE_RET_REM_OBJ_DDR_TRANS_ERR = 4,
-	IA_CSS_PSYS_EVENT_TYPE_RET_REM_OBJ_NULL_PKG_DIR_ADDR = 5,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_LOAD_FRAME_ERR = 6,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_LOAD_FRAGMENT_ERR = 7,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_PROCESS_COUNT_ZERO = 8,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_PROCESS_INIT_ERR = 9,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_ABORT = 10,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_NULL = 11,
-	IA_CSS_PSYS_EVENT_TYPE_PROC_GRP_VALIDATION_ERR = 12
-};
-
-enum {
-	IA_CSS_PSYS_CMD_QUEUE_COMMAND_ID,
-	IA_CSS_PSYS_CMD_QUEUE_DEVICE_ID,
-	IA_CSS_N_PSYS_CMD_QUEUE_ID
-};
-
-enum {
-	IA_CSS_PSYS_EVENT_QUEUE_MAIN_ID,
-	IA_CSS_N_PSYS_EVENT_QUEUE_ID
-};
-
-enum {
-	IA_CSS_PROCESS_GROUP_ERROR = 0,
-	IA_CSS_PROCESS_GROUP_CREATED,
-	IA_CSS_PROCESS_GROUP_READY,
-	IA_CSS_PROCESS_GROUP_BLOCKED,
-	IA_CSS_PROCESS_GROUP_STARTED,
-	IA_CSS_PROCESS_GROUP_RUNNING,
-	IA_CSS_PROCESS_GROUP_STALLED,
-	IA_CSS_PROCESS_GROUP_STOPPED,
-	IA_CSS_N_PROCESS_GROUP_STATES
-};
-
-enum {
-	IA_CSS_CONNECTION_MEMORY = 0,
-	IA_CSS_CONNECTION_MEMORY_STREAM,
-	IA_CSS_CONNECTION_STREAM,
-	IA_CSS_N_CONNECTION_TYPES
-};
-
-enum {
-	IA_CSS_BUFFER_NULL = 0,
-	IA_CSS_BUFFER_UNDEFINED,
-	IA_CSS_BUFFER_EMPTY,
-	IA_CSS_BUFFER_NONEMPTY,
-	IA_CSS_BUFFER_FULL,
-	IA_CSS_N_BUFFER_STATES
-};
-
-enum {
-	IA_CSS_TERMINAL_TYPE_DATA_IN = 0,
-	IA_CSS_TERMINAL_TYPE_DATA_OUT,
-	IA_CSS_TERMINAL_TYPE_PARAM_STREAM,
-	IA_CSS_TERMINAL_TYPE_PARAM_CACHED_IN,
-	IA_CSS_TERMINAL_TYPE_PARAM_CACHED_OUT,
-	IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_IN,
-	IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_OUT,
-	IA_CSS_TERMINAL_TYPE_PARAM_SLICED_IN,
-	IA_CSS_TERMINAL_TYPE_PARAM_SLICED_OUT,
-	IA_CSS_TERMINAL_TYPE_STATE_IN,
-	IA_CSS_TERMINAL_TYPE_STATE_OUT,
-	IA_CSS_TERMINAL_TYPE_PROGRAM,
-	IA_CSS_N_TERMINAL_TYPES
-};
-
-enum {
-	IA_CSS_COL_DIMENSION = 0,
-	IA_CSS_ROW_DIMENSION = 1,
-	IA_CSS_N_DATA_DIMENSION = 2
-};
-
-enum {
-	IA_CSS_PROCESS_GROUP_CMD_NOP = 0,
-	IA_CSS_PROCESS_GROUP_CMD_SUBMIT,
-	IA_CSS_PROCESS_GROUP_CMD_ATTACH,
-	IA_CSS_PROCESS_GROUP_CMD_DETACH,
-	IA_CSS_PROCESS_GROUP_CMD_START,
-	IA_CSS_PROCESS_GROUP_CMD_DISOWN,
-	IA_CSS_PROCESS_GROUP_CMD_RUN,
-	IA_CSS_PROCESS_GROUP_CMD_STOP,
-	IA_CSS_PROCESS_GROUP_CMD_SUSPEND,
-	IA_CSS_PROCESS_GROUP_CMD_RESUME,
-	IA_CSS_PROCESS_GROUP_CMD_ABORT,
-	IA_CSS_PROCESS_GROUP_CMD_RESET,
-	IA_CSS_N_PROCESS_GROUP_CMDS
-};
-
-#endif /* INTEL_IPU4_PSYS_ABI_DEFS_H */
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.c b/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.c
index 40231f6..506a97b 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.c
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2016 Intel Corporation.
+ * Copyright (c) 2016-2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -17,11 +17,10 @@
 #include <uapi/linux/intel-ipu4-psys.h>
 
 #include "intel-ipu4-fw-com.h"
-#include "intel-ipu4-psys-abi-defs.h"
 #include "intel-ipu4-psys-abi.h"
 #include "intel-ipu4-psys.h"
 
-struct intel_ipu4_psys_abi *ext_abi;
+static struct intel_ipu4_psys_abi *ext_abi;
 
 void intel_ipu4_psys_abi_init_ext(struct intel_ipu4_psys_abi *abi)
 {
@@ -40,13 +39,37 @@ int intel_ipu4_psys_abi_pg_start(struct intel_ipu4_psys_kcmd *kcmd)
 {
 	if (ext_abi)
 		return ext_abi->pg_start(kcmd);
-	kcmd->kpg->pg->state = IA_CSS_PROCESS_GROUP_STARTED;
+	kcmd->kpg->pg->state = IPU_FW_PSYS_PROCESS_GROUP_STARTED;
+	return 0;
+}
+
+
+int intel_ipu4_psys_abi_pg_load_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	if (ext_abi)
+		return ext_abi->pg_get_load_cycles(kcmd);
+	return 0;
+}
+
+
+int intel_ipu4_psys_abi_pg_init_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	if (ext_abi)
+		return ext_abi->pg_get_init_cycles(kcmd);
+	return 0;
+}
+
+
+int intel_ipu4_psys_abi_pg_processing_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	if (ext_abi)
+		return ext_abi->pg_get_processing_cycles(kcmd);
 	return 0;
 }
 
 int intel_ipu4_psys_abi_pg_disown(struct intel_ipu4_psys_kcmd *kcmd)
 {
-	struct ia_css_psys_cmd *psys_cmd;
+	struct ipu_fw_psys_cmd *psys_cmd;
 	int ret = 0;
 
 	if (ext_abi)
@@ -59,7 +82,7 @@ int intel_ipu4_psys_abi_pg_disown(struct intel_ipu4_psys_kcmd *kcmd)
 		ret = -ENODATA;
 		goto out;
 	}
-	psys_cmd->command = IA_CSS_PROCESS_GROUP_CMD_START;
+	psys_cmd->command = IPU_FW_PSYS_PROCESS_GROUP_CMD_START;
 	psys_cmd->msg = 0;
 	psys_cmd->process_group = kcmd->kpg->pg->ipu_virtual_address;
 	intel_ipu4_send_put_token(kcmd->fh->psys->fwcom, 0);
@@ -70,7 +93,7 @@ out:
 
 int intel_ipu4_psys_abi_pg_abort(struct intel_ipu4_psys_kcmd *kcmd)
 {
-	struct ia_css_psys_cmd *psys_cmd;
+	struct ipu_fw_psys_cmd *psys_cmd;
 	int ret = 0;
 
 	if (ext_abi)
@@ -83,7 +106,7 @@ int intel_ipu4_psys_abi_pg_abort(struct intel_ipu4_psys_kcmd *kcmd)
 		ret = -ENODATA;
 		goto out;
 	}
-	psys_cmd->command = IA_CSS_PROCESS_GROUP_CMD_STOP;
+	psys_cmd->command = IPU_FW_PSYS_PROCESS_GROUP_CMD_STOP;
 	psys_cmd->msg = 0;
 	psys_cmd->process_group = kcmd->kpg->pg->ipu_virtual_address;
 	intel_ipu4_send_put_token(kcmd->fh->psys->fwcom, 0);
@@ -96,7 +119,7 @@ int intel_ipu4_psys_abi_pg_submit(struct intel_ipu4_psys_kcmd *kcmd)
 {
 	if (ext_abi)
 		return ext_abi->pg_submit(kcmd);
-	kcmd->kpg->pg->state = IA_CSS_PROCESS_GROUP_BLOCKED;
+	kcmd->kpg->pg->state = IPU_FW_PSYS_PROCESS_GROUP_BLOCKED;
 	return 0;
 }
 
@@ -104,7 +127,7 @@ struct intel_ipu4_psys_kcmd *intel_ipu4_psys_abi_rcv_kcmd(
 	struct intel_ipu4_psys *psys,
 	u32 *status)
 {
-	struct ia_css_psys_event *event;
+	struct ipu_fw_psys_event *event;
 	struct intel_ipu4_psys_kcmd *kcmd;
 
 	if (ext_abi)
@@ -120,7 +143,7 @@ struct intel_ipu4_psys_kcmd *intel_ipu4_psys_abi_rcv_kcmd(
 	return kcmd ? kcmd : ERR_PTR(-EIO);
 }
 
-int intel_ipu4_psys_abi_terminal_set(struct ia_css_terminal *terminal,
+int intel_ipu4_psys_abi_terminal_set(struct ipu_fw_psys_terminal *terminal,
 				     int terminal_idx,
 				     struct intel_ipu4_psys_kcmd *kcmd,
 				     u32 buffer,
@@ -136,23 +159,23 @@ int intel_ipu4_psys_abi_terminal_set(struct ia_css_terminal *terminal,
 	type = terminal->terminal_type;
 
 	switch (type) {
-	case IA_CSS_TERMINAL_TYPE_PARAM_CACHED_IN:
-	case IA_CSS_TERMINAL_TYPE_PARAM_CACHED_OUT:
-	case IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_IN:
-	case IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_OUT:
-	case IA_CSS_TERMINAL_TYPE_PARAM_SLICED_IN:
-	case IA_CSS_TERMINAL_TYPE_PARAM_SLICED_OUT:
-	case IA_CSS_TERMINAL_TYPE_PROGRAM:
-		buffer_state = IA_CSS_BUFFER_UNDEFINED;
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_CACHED_IN:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_CACHED_OUT:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SPATIAL_IN:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SPATIAL_OUT:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SLICED_IN:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SLICED_OUT:
+	case IPU_FW_PSYS_TERMINAL_TYPE_PROGRAM:
+		buffer_state = IPU_FW_PSYS_BUFFER_UNDEFINED;
 		break;
-	case IA_CSS_TERMINAL_TYPE_PARAM_STREAM:
-	case IA_CSS_TERMINAL_TYPE_DATA_IN:
-	case IA_CSS_TERMINAL_TYPE_STATE_IN:
-		buffer_state = IA_CSS_BUFFER_FULL;
+	case IPU_FW_PSYS_TERMINAL_TYPE_PARAM_STREAM:
+	case IPU_FW_PSYS_TERMINAL_TYPE_DATA_IN:
+	case IPU_FW_PSYS_TERMINAL_TYPE_STATE_IN:
+		buffer_state = IPU_FW_PSYS_BUFFER_FULL;
 		break;
-	case IA_CSS_TERMINAL_TYPE_DATA_OUT:
-	case IA_CSS_TERMINAL_TYPE_STATE_OUT:
-		buffer_state = IA_CSS_BUFFER_EMPTY;
+	case IPU_FW_PSYS_TERMINAL_TYPE_DATA_OUT:
+	case IPU_FW_PSYS_TERMINAL_TYPE_STATE_OUT:
+		buffer_state = IPU_FW_PSYS_BUFFER_EMPTY;
 		break;
 	default:
 		dev_err(&kcmd->fh->psys->adev->dev,
@@ -160,17 +183,17 @@ int intel_ipu4_psys_abi_terminal_set(struct ia_css_terminal *terminal,
 		return -EAGAIN;
 	}
 
-	if (type == IA_CSS_TERMINAL_TYPE_DATA_IN ||
-	    type == IA_CSS_TERMINAL_TYPE_DATA_OUT) {
-		struct ia_css_data_terminal *dterminal =
-			(struct ia_css_data_terminal *)terminal;
-		dterminal->connection_type = IA_CSS_CONNECTION_MEMORY;
+	if (type == IPU_FW_PSYS_TERMINAL_TYPE_DATA_IN ||
+	    type == IPU_FW_PSYS_TERMINAL_TYPE_DATA_OUT) {
+		struct ipu_fw_psys_data_terminal *dterminal =
+			(struct ipu_fw_psys_data_terminal *)terminal;
+		dterminal->connection_type = IPU_FW_PSYS_CONNECTION_MEMORY;
 		dterminal->frame.data_bytes = size;
 		dterminal->frame.data = buffer;
 		dterminal->frame.buffer_state = buffer_state;
 	} else {
-		struct ia_css_param_terminal *pterminal =
-			(struct ia_css_param_terminal *) terminal;
+		struct ipu_fw_psys_param_terminal *pterminal =
+			(struct ipu_fw_psys_param_terminal *) terminal;
 		pterminal->param_payload.buffer = buffer;
 	}
 	return 0;
@@ -180,7 +203,7 @@ void intel_ipu4_psys_abi_pg_dump(struct intel_ipu4_psys *psys,
 				 struct intel_ipu4_psys_kcmd *kcmd,
 				 const char *note)
 {
-	struct ia_css_process_group *pg = kcmd->kpg->pg;
+	struct ipu_fw_psys_process_group *pg = kcmd->kpg->pg;
 	u32 pgid = pg->ID;
 	uint8_t processes = pg->process_count;
 	u16 *process_offset_table = (u16 *)pg + pg->processes_offset;
@@ -195,22 +218,23 @@ void intel_ipu4_psys_abi_pg_dump(struct intel_ipu4_psys *psys,
 		__func__, note, pgid, processes);
 
 	for (p = 0; p < processes; p++) {
-		struct ia_css_process *process = (struct ia_css_process *)
+		struct ipu_fw_psys_process *process =
+			(struct ipu_fw_psys_process *)
 			((char *)pg + process_offset_table[p]);
 
 		dev_dbg(&psys->adev->dev,
 			"%s pgid %i process %i cell %i dev_chn: ext0 %i ext1r %i ext1w %i int %i ipfd %i isa %i\n",
 			__func__, pgid, p, process->cell_id,
-			process->dev_chn_offset[VIED_NCI_DEV_CHN_DMA_EXT0_ID],
+			process->dev_chn_offset[IPU_FW_PSYS_DEV_CHN_DMA_EXT0_ID],
 			process->dev_chn_offset[
-				VIED_NCI_DEV_CHN_DMA_EXT1_READ_ID],
+				IPU_FW_PSYS_DEV_CHN_DMA_EXT1_READ_ID],
 			process->dev_chn_offset[
-				VIED_NCI_DEV_CHN_DMA_EXT1_WRITE_ID],
+				IPU_FW_PSYS_DEV_CHN_DMA_EXT1_WRITE_ID],
 			process->dev_chn_offset[
-				VIED_NCI_DEV_CHN_DMA_INTERNAL_ID],
+				IPU_FW_PSYS_DEV_CHN_DMA_INTERNAL_ID],
 			process->dev_chn_offset[
-				VIED_NCI_DEV_CHN_DMA_IPFD_ID],
-			process->dev_chn_offset[VIED_NCI_DEV_CHN_DMA_ISA_ID]);
+				IPU_FW_PSYS_DEV_CHN_DMA_IPFD_ID],
+			process->dev_chn_offset[IPU_FW_PSYS_DEV_CHN_DMA_ISA_ID]);
 	}
 }
 
@@ -241,11 +265,11 @@ int intel_ipu4_psys_abi_pg_set_ipu_vaddress(struct intel_ipu4_psys_kcmd *kcmd,
 	kcmd->kpg->pg->ipu_virtual_address = vaddress;
 	return 0;
 }
-struct ia_css_terminal *intel_ipu4_psys_abi_pg_get_terminal(
+struct ipu_fw_psys_terminal *intel_ipu4_psys_abi_pg_get_terminal(
 	struct intel_ipu4_psys_kcmd *kcmd,
 	int index)
 {
-	struct ia_css_terminal *terminal;
+	struct ipu_fw_psys_terminal *terminal;
 	u16 *terminal_offset_table;
 
 	if (ext_abi)
@@ -254,7 +278,7 @@ struct ia_css_terminal *intel_ipu4_psys_abi_pg_get_terminal(
 	terminal_offset_table =
 		(uint16_t *) ((char *)kcmd->kpg->pg +
 			      kcmd->kpg->pg->terminals_offset);
-	terminal = (struct ia_css_terminal *)
+	terminal = (struct ipu_fw_psys_terminal *)
 		((char *)kcmd->kpg->pg + terminal_offset_table[index]);
 	return terminal;
 }
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.h b/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.h
index c055e35..04eac62 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-psys-abi.h
@@ -14,26 +14,229 @@
 #ifndef INTEL_IPU4_PSYS_ABI_H
 #define INTEL_IPU4_PSYS_ABI_H
 
+/* ia_css_psys_device.c */
+#define IPU_FW_PSYS_CMD_QUEUE_SIZE 0x20
+#define IPU_FW_PSYS_EVENT_QUEUE_SIZE 0x40
+
+/* ia_css_psys_transport.h */
+#define IPU_FW_PSYS_CMD_BITS 64
+#define IPU_FW_PSYS_EVENT_BITS 128
+
 /* ia_css_psys_process_group_cmd_impl.h */
-#define	N_PADDING_UINT8_IN_PROCESS_STRUCT		8
-#define	N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT		7
+#define	IPU_FW_PSYS_N_PADDING_UINT8_IN_PROCESS_STRUCT			8
+#define	IPU_FW_PSYS_N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT		7
 
 /* ia_css_terminal_base_types.h */
-#define N_PADDING_UINT8_IN_TERMINAL_STRUCT		5
+#define IPU_FW_PSYS_N_PADDING_UINT8_IN_TERMINAL_STRUCT			5
 
 /* ia_css_terminal_types.h */
-#define N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT		4
-#define N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT	6
+#define IPU_FW_PSYS_N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT		4
+#define IPU_FW_PSYS_N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT		6
 
 /* ia_css_psys_terminal.c */
-#define	N_PADDING_UINT8_IN_DATA_TERMINAL_STRUCT		4
+#define	IPU_FW_PSYS_N_PADDING_UINT8_IN_DATA_TERMINAL_STRUCT		4
 
 /* ia_css_program_group_data.h */
-#define	N_PADDING_UINT8_IN_FRAME_DESC_STRUCT		3
-#define IA_CSS_N_FRAME_PLANES				6
+#define	IPU_FW_PSYS_N_PADDING_UINT8_IN_FRAME_DESC_STRUCT		3
+#define IPU_FW_PSYS_N_FRAME_PLANES					6
+
+enum {
+	IPU_FW_PSYS_GMEM_TYPE_ID = 0,
+	IPU_FW_PSYS_DMEM_TYPE_ID,
+	IPU_FW_PSYS_VMEM_TYPE_ID,
+	IPU_FW_PSYS_BAMEM_TYPE_ID,
+	IPU_FW_PSYS_PMEM_TYPE_ID,
+	IPU_FW_PSYS_N_MEM_TYPE_ID
+};
+
+enum {
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT0_ID = 0,
+	IPU_FW_PSYS_DEV_CHN_GDC_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT1_READ_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT1_WRITE_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_INTERNAL_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_IPFD_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_ISA_ID,
+	IPU_FW_PSYS_DEV_CHN_DMA_FW_ID,
+	IPU_FW_PSYS_N_DEV_CHN_ID
+};
+
+enum {
+	IPU_FW_PSYS_SP_CTRL_TYPE_ID = 0,
+	IPU_FW_PSYS_SP_SERVER_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_ISA_TYPE_ID,
+	IPU_FW_PSYS_ACC_OSA_TYPE_ID,
+	IPU_FW_PSYS_GDC_TYPE_ID,
+	IPU_FW_PSYS_N_CELL_TYPE_ID
+};
+
+#if IS_ENABLED(CONFIG_VIDEO_INTEL_IPU4)
+
+enum {
+	IPU_FW_PSYS_SP0_ID = 0,
+	IPU_FW_PSYS_SP1_ID,
+	IPU_FW_PSYS_SP2_ID,
+	IPU_FW_PSYS_VP0_ID,
+	IPU_FW_PSYS_VP1_ID,
+	IPU_FW_PSYS_VP2_ID,
+	IPU_FW_PSYS_VP3_ID,
+	IPU_FW_PSYS_ACC0_ID,
+	IPU_FW_PSYS_ACC1_ID,
+	IPU_FW_PSYS_ACC2_ID,
+	IPU_FW_PSYS_ACC3_ID,
+	IPU_FW_PSYS_ACC4_ID,
+	IPU_FW_PSYS_ACC5_ID,
+	IPU_FW_PSYS_ACC6_ID,
+	IPU_FW_PSYS_ACC7_ID,
+	IPU_FW_PSYS_GDC0_ID,
+	IPU_FW_PSYS_GDC1_ID,
+	IPU_FW_PSYS_N_CELL_ID
+};
+
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT0_MAX_SIZE		(30)
+#define IPU_FW_PSYS_DEV_CHN_GDC_MAX_SIZE		(4)
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT1_READ_MAX_SIZE	(30)
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE	(20)
+#define IPU_FW_PSYS_DEV_CHN_DMA_INTERNAL_MAX_SIZE	(2)
+#define IPU_FW_PSYS_DEV_CHN_DMA_IPFD_MAX_SIZE		(5)
+#define IPU_FW_PSYS_DEV_CHN_DMA_ISA_MAX_SIZE		(2)
+#define IPU_FW_PSYS_DEV_CHN_DMA_FW_MAX_SIZE		(1)
+
+
+#elif IS_ENABLED(CONFIG_VIDEO_INTEL_IPU5)
+
+enum {
+	IPU_FW_PSYS_SP0_ID = 0,
+	IPU_FW_PSYS_SP1_ID,
+	IPU_FW_PSYS_SP2_ID,
+	IPU_FW_PSYS_VP0_ID,
+	IPU_FW_PSYS_ACC0_ID,
+	IPU_FW_PSYS_ACC1_ID,
+	IPU_FW_PSYS_ACC2_ID,
+	IPU_FW_PSYS_ACC3_ID,
+	IPU_FW_PSYS_ACC4_ID,
+	IPU_FW_PSYS_ACC5_ID,
+	IPU_FW_PSYS_ACC6_ID,
+	IPU_FW_PSYS_ACC7_ID,
+	IPU_FW_PSYS_ACC8_ID,
+	IPU_FW_PSYS_ACC9_ID,
+	IPU_FW_PSYS_ACC10_ID,
+	IPU_FW_PSYS_ACC11_ID,
+	IPU_FW_PSYS_GDC0_ID,
+	IPU_FW_PSYS_N_CELL_ID
+};
+
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT0_MAX_SIZE		(30)
+#define IPU_FW_PSYS_DEV_CHN_GDC_MAX_SIZE		(4)
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT1_READ_MAX_SIZE	(30)
+#define IPU_FW_PSYS_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE	(20)
+#define IPU_FW_PSYS_DEV_CHN_DMA_INTERNAL_MAX_SIZE	(4)
+#define IPU_FW_PSYS_DEV_CHN_DMA_IPFD_MAX_SIZE		(5)
+#define IPU_FW_PSYS_DEV_CHN_DMA_ISA_MAX_SIZE		(2)
+#define IPU_FW_PSYS_DEV_CHN_DMA_FW_MAX_SIZE		(1)
+
+#endif
+
+#define IPU_FW_PSYS_N_DATA_MEM_TYPE_ID	(IPU_FW_PSYS_N_MEM_TYPE_ID - 1)
+
+/* ia_css_psys_transport.h */
+enum {
+	IPU_FW_PSYS_EVENT_TYPE_SUCCESS = 0,
+	IPU_FW_PSYS_EVENT_TYPE_UNKNOWN_ERROR = 1,
+	IPU_FW_PSYS_EVENT_TYPE_RET_REM_OBJ_NOT_FOUND = 2,
+	IPU_FW_PSYS_EVENT_TYPE_RET_REM_OBJ_TOO_BIG = 3,
+	IPU_FW_PSYS_EVENT_TYPE_RET_REM_OBJ_DDR_TRANS_ERR = 4,
+	IPU_FW_PSYS_EVENT_TYPE_RET_REM_OBJ_NULL_PKG_DIR_ADDR = 5,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_LOAD_FRAME_ERR = 6,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_LOAD_FRAGMENT_ERR = 7,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_PROCESS_COUNT_ZERO = 8,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_PROCESS_INIT_ERR = 9,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_ABORT = 10,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_NULL = 11,
+	IPU_FW_PSYS_EVENT_TYPE_PROC_GRP_VALIDATION_ERR = 12
+};
+
+enum {
+	IPU_FW_PSYS_CMD_QUEUE_COMMAND_ID,
+	IPU_FW_PSYS_CMD_QUEUE_DEVICE_ID,
+	IPU_FW_PSYS_N_PSYS_CMD_QUEUE_ID
+};
+
+enum {
+	IPU_FW_PSYS_EVENT_QUEUE_MAIN_ID,
+	IPU_FW_PSYS_N_PSYS_EVENT_QUEUE_ID
+};
+
+enum {
+	IPU_FW_PSYS_PROCESS_GROUP_ERROR = 0,
+	IPU_FW_PSYS_PROCESS_GROUP_CREATED,
+	IPU_FW_PSYS_PROCESS_GROUP_READY,
+	IPU_FW_PSYS_PROCESS_GROUP_BLOCKED,
+	IPU_FW_PSYS_PROCESS_GROUP_STARTED,
+	IPU_FW_PSYS_PROCESS_GROUP_RUNNING,
+	IPU_FW_PSYS_PROCESS_GROUP_STALLED,
+	IPU_FW_PSYS_PROCESS_GROUP_STOPPED,
+	IPU_FW_PSYS_N_PROCESS_GROUP_STATES
+};
+
+enum {
+	IPU_FW_PSYS_CONNECTION_MEMORY = 0,
+	IPU_FW_PSYS_CONNECTION_MEMORY_STREAM,
+	IPU_FW_PSYS_CONNECTION_STREAM,
+	IPU_FW_PSYS_N_CONNECTION_TYPES
+};
+
+enum {
+	IPU_FW_PSYS_BUFFER_NULL = 0,
+	IPU_FW_PSYS_BUFFER_UNDEFINED,
+	IPU_FW_PSYS_BUFFER_EMPTY,
+	IPU_FW_PSYS_BUFFER_NONEMPTY,
+	IPU_FW_PSYS_BUFFER_FULL,
+	IPU_FW_PSYS_N_BUFFER_STATES
+};
+
+enum {
+	IPU_FW_PSYS_TERMINAL_TYPE_DATA_IN = 0,
+	IPU_FW_PSYS_TERMINAL_TYPE_DATA_OUT,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_STREAM,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_CACHED_IN,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_CACHED_OUT,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SPATIAL_IN,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SPATIAL_OUT,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SLICED_IN,
+	IPU_FW_PSYS_TERMINAL_TYPE_PARAM_SLICED_OUT,
+	IPU_FW_PSYS_TERMINAL_TYPE_STATE_IN,
+	IPU_FW_PSYS_TERMINAL_TYPE_STATE_OUT,
+	IPU_FW_PSYS_TERMINAL_TYPE_PROGRAM,
+	IPU_FW_PSYS_N_TERMINAL_TYPES
+};
+
+enum {
+	IPU_FW_PSYS_COL_DIMENSION = 0,
+	IPU_FW_PSYS_ROW_DIMENSION = 1,
+	IPU_FW_PSYS_N_DATA_DIMENSION = 2
+};
+
+enum {
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_NOP = 0,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_SUBMIT,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_ATTACH,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_DETACH,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_START,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_DISOWN,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_RUN,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_STOP,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_SUSPEND,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_RESUME,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_ABORT,
+	IPU_FW_PSYS_PROCESS_GROUP_CMD_RESET,
+	IPU_FW_PSYS_N_PROCESS_GROUP_CMDS
+};
 
 /* ia_css_psys_process_group_cmd_impl.h */
-struct __packed ia_css_process_group {
+struct __packed ipu_fw_psys_process_group {
 	u64 token;
 	u64 private_token;
 	u32 size;
@@ -53,10 +256,10 @@ struct __packed ia_css_process_group {
 	u8 process_count;
 	u8 terminal_count;
 	u8 subgraph_count;
-	u8 padding[N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT];
 };
 
-struct ia_css_process {
+struct ipu_fw_psys_process {
 	u64 kernel_bitmap;
 	u32 size;
 	u32 ID;
@@ -64,21 +267,21 @@ struct ia_css_process {
 	s16 parent_offset;
 	u16 cell_dependencies_offset;
 	u16 terminal_dependencies_offset;
-	u16 int_mem_offset[VIED_NCI_N_MEM_TYPE_ID];
-	u16 ext_mem_offset[VIED_NCI_N_DATA_MEM_TYPE_ID];
-	u16 dev_chn_offset[VIED_NCI_N_DEV_CHN_ID];
+	u16 int_mem_offset[IPU_FW_PSYS_N_MEM_TYPE_ID];
+	u16 ext_mem_offset[IPU_FW_PSYS_N_DATA_MEM_TYPE_ID];
+	u16 dev_chn_offset[IPU_FW_PSYS_N_DEV_CHN_ID];
 	u8 cell_id;
-	u8 int_mem_id[VIED_NCI_N_MEM_TYPE_ID];
-	u8 ext_mem_id[VIED_NCI_N_DATA_MEM_TYPE_ID];
+	u8 int_mem_id[IPU_FW_PSYS_N_MEM_TYPE_ID];
+	u8 ext_mem_id[IPU_FW_PSYS_N_DATA_MEM_TYPE_ID];
 	u8 cell_dependency_count;
 	u8 terminal_dependency_count;
-	u8 padding[N_PADDING_UINT8_IN_PROCESS_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_PROCESS_STRUCT];
 };
 
 /* ia_css_psys_init.h */
-struct ia_css_psys_srv_init {
+struct ipu_fw_psys_srv_init {
 	void *host_ddr_pkg_dir;
-	dma_addr_t ddr_pkg_dir_address;
+	u32 ddr_pkg_dir_address;
 	u32 pkg_dir_size;
 
 	u32 icache_prefetch_sp;
@@ -86,45 +289,46 @@ struct ia_css_psys_srv_init {
 };
 
 /* ia_css_psys_transport.h */
-struct __packed ia_css_psys_cmd {
+struct __packed ipu_fw_psys_cmd {
 	u16 command;
 	u16 msg;
 	u32 process_group;
 };
 
 
-struct __packed ia_css_psys_event {
+struct __packed ipu_fw_psys_event {
 	u16 status;
 	u16 command;
 	u32 process_group;
 	u64 token;
 };
 
-/* ia_css_program_group_param_types.h */
-struct ia_css_terminal {
+/* ia_css_terminal_base_types.h */
+struct ipu_fw_psys_terminal {
 	u32 terminal_type;
 	s16 parent_offset;
 	u16 size;
 	u16 tm_index;
 	u8 ID;
-	u8 padding[N_PADDING_UINT8_IN_TERMINAL_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_TERMINAL_STRUCT];
 };
 
 /* ia_css_terminal_types.h */
-struct ia_css_param_payload {
+struct ipu_fw_psys_param_payload {
 	u64 host_buffer;
 	u32 buffer;
-	u8 padding[N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT];
 };
 
-struct ia_css_param_terminal {
-	struct ia_css_terminal base;
-	struct ia_css_param_payload param_payload;
+/* ia_css_program_group_param_types.h */
+struct ipu_fw_psys_param_terminal {
+	struct ipu_fw_psys_terminal base;
+	struct ipu_fw_psys_param_payload param_payload;
 	u16 param_section_desc_offset;
-	u8 padding[N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT];
 };
 
-struct ia_css_frame {
+struct ipu_fw_psys_frame {
 	u32 buffer_state;
 	u32 access_type;
 	u32 pointer_state;
@@ -134,35 +338,35 @@ struct ia_css_frame {
 };
 
 /* ia_css_program_group_data.h */
-struct ia_css_frame_descriptor {
+struct ipu_fw_psys_frame_descriptor {
 	u32 frame_format_type;
 	u32 plane_count;
-	u32 plane_offsets[IA_CSS_N_FRAME_PLANES];
+	u32 plane_offsets[IPU_FW_PSYS_N_FRAME_PLANES];
 	u32 stride[1];
 	u16 dimension[2];
 	u16 size;
 	u8 bpp;
 	u8 bpe;
 	u8 is_compressed;
-	u8 padding[N_PADDING_UINT8_IN_FRAME_DESC_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_FRAME_DESC_STRUCT];
 };
 
-struct ia_css_stream {
+struct ipu_fw_psys_stream {
 	u64 dummy;
 };
 
-/* ia_css_psys_terminal.c */
-struct ia_css_data_terminal {
-	struct ia_css_terminal base;
-	struct ia_css_frame_descriptor frame_descriptor;
-	struct ia_css_frame frame;
-	struct ia_css_stream stream;
+/* ia_css_psys_terminal_private_types.h */
+struct ipu_fw_psys_data_terminal {
+	struct ipu_fw_psys_terminal base;
+	struct ipu_fw_psys_frame_descriptor frame_descriptor;
+	struct ipu_fw_psys_frame frame;
+	struct ipu_fw_psys_stream stream;
 	u32 frame_format_type;
 	u32 connection_type;
 	u16 fragment_descriptor_offset;
 	u8 kernel_id;
 	u8 subgraph_id;
-	u8 padding[N_PADDING_UINT8_IN_DATA_TERMINAL_STRUCT];
+	u8 padding[IPU_FW_PSYS_N_PADDING_UINT8_IN_DATA_TERMINAL_STRUCT];
 };
 
 struct intel_ipu4_psys_kcmd;
@@ -176,7 +380,7 @@ struct intel_ipu4_psys_abi {
 	struct intel_ipu4_psys_kcmd *(*pg_rcv)(
 		struct intel_ipu4_psys *psys,
 		u32 *status);
-	int (*terminal_set)(struct ia_css_terminal *terminal,
+	int (*terminal_set)(struct ipu_fw_psys_terminal *terminal,
 			    int terminal_idx,
 			    struct intel_ipu4_psys_kcmd *kcmd,
 			    u32 buffer,
@@ -191,6 +395,9 @@ struct intel_ipu4_psys_abi {
 				   dma_addr_t vaddress);
 	void (*pg_set_token)(struct intel_ipu4_psys_kcmd *kcmd,
 					    u64 token);
+	int (*pg_get_load_cycles)(struct intel_ipu4_psys_kcmd *kcmd);
+	int (*pg_get_init_cycles)(struct intel_ipu4_psys_kcmd *kcmd);
+	int (*pg_get_processing_cycles)(struct intel_ipu4_psys_kcmd *kcmd);
 	void *(*pg_get_terminal)(
 		struct intel_ipu4_psys_kcmd *kcmd,
 		int index);
@@ -204,10 +411,13 @@ int intel_ipu4_psys_abi_pg_start(struct intel_ipu4_psys_kcmd *kcmd);
 int intel_ipu4_psys_abi_pg_disown(struct intel_ipu4_psys_kcmd *kcmd);
 int intel_ipu4_psys_abi_pg_abort(struct intel_ipu4_psys_kcmd *kcmd);
 int intel_ipu4_psys_abi_pg_submit(struct intel_ipu4_psys_kcmd *kcmd);
+int intel_ipu4_psys_abi_pg_load_cycles(struct intel_ipu4_psys_kcmd *kcmd);
+int intel_ipu4_psys_abi_pg_init_cycles(struct intel_ipu4_psys_kcmd *kcmd);
+int intel_ipu4_psys_abi_pg_processing_cycles(struct intel_ipu4_psys_kcmd *kcmd);
 struct intel_ipu4_psys_kcmd *intel_ipu4_psys_abi_rcv_kcmd(
 	struct intel_ipu4_psys *psys,
 	u32 *status);
-int intel_ipu4_psys_abi_terminal_set(struct ia_css_terminal *terminal,
+int intel_ipu4_psys_abi_terminal_set(struct ipu_fw_psys_terminal *terminal,
 				     int terminal_idx,
 				     struct intel_ipu4_psys_kcmd *kcmd,
 				     u32 buffer,
@@ -221,7 +431,7 @@ int intel_ipu4_psys_abi_pg_get_terminal_count(
 int intel_ipu4_psys_abi_pg_get_size(struct intel_ipu4_psys_kcmd *kcmd);
 int intel_ipu4_psys_abi_pg_set_ipu_vaddress(struct intel_ipu4_psys_kcmd *kcmd,
 					    dma_addr_t vaddress);
-struct ia_css_terminal *intel_ipu4_psys_abi_pg_get_terminal(
+struct ipu_fw_psys_terminal *intel_ipu4_psys_abi_pg_get_terminal(
 	struct intel_ipu4_psys_kcmd *kcmd,
 	int index);
 void intel_ipu4_psys_abi_pg_set_token(struct intel_ipu4_psys_kcmd *kcmd,
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-psys.c b/drivers/media/pci/intel-ipu4/intel-ipu4-psys.c
index f63df80..7c7e902 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-psys.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-psys.c
@@ -35,14 +35,13 @@
 #include "intel-ipu4-bus.h"
 #include "intel-ipu4-buttress.h"
 #include "intel-ipu4-cpd.h"
-#include "intel-ipu4-psys-abi-defs.h"
 #include "intel-ipu4-psys-abi.h"
 #include "intel-ipu4-psys.h"
-#include "intel-ipu4-wrapper.h"
 #include "intel-ipu4-buttress.h"
 #include "intel-ipu4-regs.h"
 #include "intel-ipu5-regs.h"
 #define CREATE_TRACE_POINTS
+#define IPU4_PG_KCMD_TRACE
 #include "intel-ipu4-trace-event.h"
 #include "intel-ipu4-isys-fw-msgs.h"
 #include "intel-ipu4-fw-com.h"
@@ -918,7 +917,10 @@ static void intel_ipu4_psys_kcmd_complete(struct intel_ipu4_psys *psys,
 					  int error)
 {
 	trace_ipu4_pg_kcmd(__func__, kcmd->id, kcmd->issue_id, kcmd->priority,
-			   intel_ipu4_psys_abi_pg_get_id(kcmd));
+			intel_ipu4_psys_abi_pg_get_id(kcmd),
+			intel_ipu4_psys_abi_pg_load_cycles(kcmd),
+			intel_ipu4_psys_abi_pg_init_cycles(kcmd),
+			intel_ipu4_psys_abi_pg_processing_cycles(kcmd));
 
 	switch (kcmd->state) {
 	case KCMD_STATE_RUNNING:
@@ -1075,7 +1077,10 @@ static int intel_ipu4_psys_kcmd_start(struct intel_ipu4_psys *psys,
 	}
 
 	trace_ipu4_pg_kcmd(__func__, kcmd->id, kcmd->issue_id, kcmd->priority,
-		intel_ipu4_psys_abi_pg_get_id(kcmd));
+			intel_ipu4_psys_abi_pg_get_id(kcmd),
+			intel_ipu4_psys_abi_pg_load_cycles(kcmd),
+			intel_ipu4_psys_abi_pg_init_cycles(kcmd),
+			intel_ipu4_psys_abi_pg_processing_cycles(kcmd));
 
 	switch (kcmd->state) {
 	case KCMD_STATE_RUNNING:
@@ -1401,7 +1406,7 @@ static int intel_ipu4_psys_kcmd_new(struct intel_ipu4_psys_command *cmd,
 	}
 
 	for (i = 0; i < kcmd->nbuffers; i++) {
-		struct ia_css_terminal *terminal;
+		struct ipu_fw_psys_terminal *terminal;
 		u32 buffer;
 
 		terminal = intel_ipu4_psys_abi_pg_get_terminal(kcmd, i);
@@ -1589,10 +1594,6 @@ static long intel_ipu4_psys_mapbuf(int fd, struct intel_ipu4_psys_fh *fh)
 		goto error_unmap;
 	}
 
-	ret = intel_ipu4_wrapper_register_buffer(kbuf->dma_addr, kbuf->kaddr,
-					      kbuf->len);
-	if (ret)
-		goto error_vunmap;
 mapbuf_end:
 
 	kbuf->valid = true;
@@ -1603,8 +1604,6 @@ mapbuf_end:
 
 	return 0;
 
-error_vunmap:
-	dma_buf_vunmap(kbuf->dbuf, kbuf->kaddr);
 error_unmap:
 	dma_buf_unmap_attachment(kbuf->db_attach,
 				kbuf->sgt, DMA_BIDIRECTIONAL);
@@ -2010,13 +2009,9 @@ static int cpd_fw_reload(struct intel_ipu4_device *isp)
 	}
 
 	if (isp->cpd_fw) {
-		intel_ipu4_wrapper_remove_shared_memory_buffer(
-			PSYS_MMID, psys->pkg_dir);
 		intel_ipu4_cpd_free_pkg_dir(isp->psys, psys->pkg_dir,
 						psys->pkg_dir_dma_addr,
 						psys->pkg_dir_size);
-		intel_ipu4_wrapper_remove_shared_memory_buffer(
-			PSYS_MMID, (void *) isp->cpd_fw->data);
 		intel_ipu4_buttress_unmap_fw_image(isp->psys, &psys->fw_sgt);
 		release_firmware(isp->cpd_fw);
 		isp->cpd_fw = NULL;
@@ -2044,13 +2039,6 @@ static int cpd_fw_reload(struct intel_ipu4_device *isp)
 	if (rval)
 		goto out_release_firmware;
 
-	rval = intel_ipu4_wrapper_add_shared_memory_buffer(
-		PSYS_MMID, (void *)isp->cpd_fw->data,
-		sg_dma_address(psys->fw_sgt.sgl),
-		isp->cpd_fw->size);
-	if (rval)
-		goto out_unmap_fw_image;
-
 	psys->pkg_dir = intel_ipu4_cpd_create_pkg_dir(
 			isp->psys, isp->cpd_fw->data,
 			sg_dma_address(psys->fw_sgt.sgl),
@@ -2058,36 +2046,23 @@ static int cpd_fw_reload(struct intel_ipu4_device *isp)
 			&psys->pkg_dir_size);
 	if (psys->pkg_dir == NULL) {
 		rval = -EINVAL;
-		goto  out_remove_shared_buffer;
+		goto  out_unmap_fw_image;
 	}
 
-	rval = intel_ipu4_wrapper_add_shared_memory_buffer(
-			PSYS_MMID, (void *)psys->pkg_dir,
-			psys->pkg_dir_dma_addr,
-			psys->pkg_dir_size);
-	if (rval)
-		goto out_free_pkg_dir;
-
 	isp->pkg_dir = psys->pkg_dir;
 	isp->pkg_dir_dma_addr = psys->pkg_dir_dma_addr;
 	isp->pkg_dir_size = psys->pkg_dir_size;
 
 	rval = intel_ipu4_fw_authenticate(isp, 1);
 	if (rval)
-		goto out_remove_pkg_dir_shared_buffer;
+		goto out_free_pkg_dir;
 
 	return 0;
 
-out_remove_pkg_dir_shared_buffer:
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-		PSYS_MMID, psys->pkg_dir);
 out_free_pkg_dir:
 	intel_ipu4_cpd_free_pkg_dir(isp->psys, psys->pkg_dir,
 					psys->pkg_dir_dma_addr,
 					psys->pkg_dir_size);
-out_remove_shared_buffer:
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-		PSYS_MMID, (void *) isp->cpd_fw->data);
 out_unmap_fw_image:
 	intel_ipu4_buttress_unmap_fw_image(isp->psys, &psys->fw_sgt);
 out_release_firmware:
@@ -2235,16 +2210,16 @@ static int query_sp(struct intel_ipu4_bus_device *adev)
 static int intel_ipu4_psys_fw_init(struct intel_ipu4_psys *psys)
 {
 	struct ia_css_syscom_queue_config ia_css_psys_cmd_queue_cfg[] = {
-		{ IA_CSS_PSYS_CMD_QUEUE_SIZE, sizeof(struct ia_css_psys_cmd) },
-		{ IA_CSS_PSYS_CMD_QUEUE_SIZE, sizeof(struct ia_css_psys_cmd) }
+			{ IPU_FW_PSYS_CMD_QUEUE_SIZE, sizeof(struct ipu_fw_psys_cmd) },
+			{ IPU_FW_PSYS_CMD_QUEUE_SIZE, sizeof(struct ipu_fw_psys_cmd) }
 	};
 
 	struct ia_css_syscom_queue_config ia_css_psys_event_queue_cfg[] = {
-		{ IA_CSS_PSYS_EVENT_QUEUE_SIZE,
-		  sizeof(struct ia_css_psys_event) }
+		    { IPU_FW_PSYS_EVENT_QUEUE_SIZE,
+			  sizeof(struct ipu_fw_psys_event) }
 	};
 
-	struct ia_css_psys_srv_init server_init = {
+	struct ipu_fw_psys_srv_init server_init = {
 		.ddr_pkg_dir_address = 0,
 		.host_ddr_pkg_dir = 0,
 		.pkg_dir_size = 0,
@@ -2252,8 +2227,8 @@ static int intel_ipu4_psys_fw_init(struct intel_ipu4_psys *psys)
 		.icache_prefetch_isp = psys->icache_prefetch_isp,
 	};
 	struct intel_ipu4_fw_com_cfg fwcom = {
-		.num_input_queues = IA_CSS_N_PSYS_CMD_QUEUE_ID,
-		.num_output_queues = IA_CSS_N_PSYS_EVENT_QUEUE_ID,
+		.num_input_queues = IPU_FW_PSYS_N_PSYS_CMD_QUEUE_ID,
+		.num_output_queues = IPU_FW_PSYS_N_PSYS_EVENT_QUEUE_ID,
 		.input = ia_css_psys_cmd_queue_cfg,
 		.output = ia_css_psys_event_queue_cfg,
 		.specific_addr = &server_init,
@@ -2300,8 +2275,6 @@ static int intel_ipu4_psys_probe(struct intel_ipu4_bus_device *adev)
 		return -EPROBE_DEFER;
 	}
 
-	intel_ipu4_wrapper_set_device(&adev->dev, PSYS_MMID);
-
 	mutex_lock(&intel_ipu4_psys_mutex);
 
 	minor = find_next_zero_bit(intel_ipu4_psys_devices,
@@ -2394,18 +2367,11 @@ static int intel_ipu4_psys_probe(struct intel_ipu4_bus_device *adev)
 	if (rval)
 		goto out_resources_running_free;
 
-	rval = intel_ipu4_wrapper_add_shared_memory_buffer(
-		PSYS_MMID, (void *)fw->data,
-		sg_dma_address(psys->fw_sgt.sgl),
-		fw->size);
-	if (rval)
-		goto out_unmap_fw_image;
-
 	if (is_intel_ipu5_hw_a0(isp)) {
 		if (!fw->data || !sg_dma_address(psys->fw_sgt.sgl)) {
 			dev_err(&adev->dev, "firmware load failed\n");
 			rval = -ENOMEM;
-			goto  out_remove_shared_buffer;
+			goto  out_unmap_fw_image;
 		}
 		psys->pkg_dir = (u64 *)fw->data;
 		psys->pkg_dir_dma_addr = sg_dma_address(psys->fw_sgt.sgl);
@@ -2418,14 +2384,9 @@ static int intel_ipu4_psys_probe(struct intel_ipu4_bus_device *adev)
 			&psys->pkg_dir_size);
 		if (psys->pkg_dir == NULL) {
 			rval = -ENOMEM;
-			goto  out_remove_shared_buffer;
+			goto  out_unmap_fw_image;
 		}
-		rval = intel_ipu4_wrapper_add_shared_memory_buffer(
-			PSYS_MMID, (void *)psys->pkg_dir,
-			psys->pkg_dir_dma_addr,
-			psys->pkg_dir_size);
-		if (rval)
-			goto out_free_pkg_dir;
+
 	}
 
 	/* allocate and map memory for process groups */
@@ -2473,6 +2434,8 @@ static int intel_ipu4_psys_probe(struct intel_ipu4_bus_device *adev)
 	strlcpy(caps.dev_model, intel_ipu4_media_ctl_dev_model(isp),
 		sizeof(caps.dev_model));
 
+	pm_runtime_allow(&adev->dev);
+    pm_runtime_enable(&adev->dev);
 	pm_runtime_set_autosuspend_delay(&psys->adev->dev,
 					 INTEL_IPU4_PSYS_AUTOSUSPEND_DELAY);
 	pm_runtime_use_autosuspend(&psys->adev->dev);
@@ -2498,16 +2461,12 @@ out_free_pgs:
 				     kpg->pg_dma_addr);
 		kfree(kpg);
 	}
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-			PSYS_MMID, psys->pkg_dir);
+
 out_free_pkg_dir:
 	if (!isp->secure_mode)
 		intel_ipu4_cpd_free_pkg_dir(adev, psys->pkg_dir,
 					    psys->pkg_dir_dma_addr,
 					    psys->pkg_dir_size);
-out_remove_shared_buffer:
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-		PSYS_MMID, (void *) fw->data);
 out_unmap_fw_image:
 	intel_ipu4_buttress_unmap_fw_image(adev, &psys->fw_sgt);
 out_resources_running_free:
@@ -2562,13 +2521,9 @@ static void intel_ipu4_psys_remove(struct intel_ipu4_bus_device *adev)
 	isp->pkg_dir_dma_addr = 0;
 	isp->pkg_dir_size = 0;
 
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-		PSYS_MMID, psys->pkg_dir);
 	intel_ipu4_cpd_free_pkg_dir(adev, psys->pkg_dir,
 				    psys->pkg_dir_dma_addr,
 				    psys->pkg_dir_size);
-	intel_ipu4_wrapper_remove_shared_memory_buffer(
-		PSYS_MMID, (void *)isp->cpd_fw->data);
 
 	intel_ipu4_buttress_unmap_fw_image(adev, &psys->fw_sgt);
 
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-psys.h b/drivers/media/pci/intel-ipu4/intel-ipu4-psys.h
index ad50193..adee87a 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-psys.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-psys.h
@@ -29,8 +29,8 @@
 #define INTEL_IPU4_PSYS_CMD_TIMEOUT_MS_SOC 2000
 #define INTEL_IPU4_PSYS_OPEN_TIMEOUT_US	   50
 #define INTEL_IPU4_PSYS_OPEN_RETRY (10000 / INTEL_IPU4_PSYS_OPEN_TIMEOUT_US)
-#define INTEL_IPU4_PSYS_EVENT_CMD_COMPLETE IA_CSS_PSYS_EVENT_TYPE_SUCCESS
-#define INTEL_IPU4_PSYS_EVENT_FRAGMENT_COMPLETE IA_CSS_PSYS_EVENT_TYPE_SUCCESS
+#define INTEL_IPU4_PSYS_EVENT_CMD_COMPLETE IPU_FW_PSYS_EVENT_TYPE_SUCCESS
+#define INTEL_IPU4_PSYS_EVENT_FRAGMENT_COMPLETE IPU_FW_PSYS_EVENT_TYPE_SUCCESS
 #define INTEL_IPU4_PSYS_CLOSE_TIMEOUT_US   50
 #define INTEL_IPU4_PSYS_CLOSE_TIMEOUT \
 	(100000 / INTEL_IPU4_PSYS_CLOSE_TIMEOUT_US)
@@ -89,7 +89,7 @@ struct intel_ipu4_psys_fh {
 };
 
 struct intel_ipu4_psys_pg {
-	struct ia_css_process_group *pg;
+	struct ipu_fw_psys_process_group *pg;
 	size_t size;
 	size_t pg_size;
 	dma_addr_t pg_dma_addr;
@@ -115,7 +115,7 @@ struct intel_ipu4_psys_kcmd {
 	struct intel_ipu4_psys_kbuffer **kbufs;
 	struct intel_ipu4_psys_dma_buf *buffers;
 	size_t nbuffers;
-	struct ia_css_process_group *pg_user;
+	struct ipu_fw_psys_process_group *pg_user;
 	struct intel_ipu4_psys_pg *kpg;
 	uint32_t id;
 	uint64_t issue_id;
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-resources.c b/drivers/media/pci/intel-ipu4/intel-ipu4-resources.c
index 32cd5b9..814ed4a 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-resources.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-resources.c
@@ -20,7 +20,6 @@
 
 #include <uapi/linux/intel-ipu4-psys.h>
 
-#include "intel-ipu4-psys-abi-defs.h"
 #include "intel-ipu4-psys-abi.h"
 #include "intel-ipu4-psys.h"
 #include "intel-ipu4-resources.h"
@@ -32,42 +31,42 @@
  */
 #if IS_ENABLED(CONFIG_VIDEO_INTEL_IPU4)
 
-static const u32 vied_nci_cell_types[VIED_NCI_N_CELL_ID] = {
-	VIED_NCI_SP_CTRL_TYPE_ID,
-	VIED_NCI_SP_SERVER_TYPE_ID,
-	VIED_NCI_SP_SERVER_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_ACC_ISA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_OSA_TYPE_ID,
-	VIED_NCI_GDC_TYPE_ID,
-	VIED_NCI_GDC_TYPE_ID
+static const u32 vied_nci_cell_types[IPU_FW_PSYS_N_CELL_ID] = {
+	IPU_FW_PSYS_SP_CTRL_TYPE_ID,
+	IPU_FW_PSYS_SP_SERVER_TYPE_ID,
+	IPU_FW_PSYS_SP_SERVER_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_ACC_ISA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_OSA_TYPE_ID,
+	IPU_FW_PSYS_GDC_TYPE_ID,
+	IPU_FW_PSYS_GDC_TYPE_ID
 };
 
 #elif IS_ENABLED(CONFIG_VIDEO_INTEL_IPU5)
 
-static const u32 vied_nci_cell_types[VIED_NCI_N_CELL_ID] = {
-	VIED_NCI_SP_CTRL_TYPE_ID,
-	VIED_NCI_SP_SERVER_TYPE_ID,
-	VIED_NCI_SP_SERVER_TYPE_ID,
-	VIED_NCI_VP_TYPE_ID,
-	VIED_NCI_ACC_ISA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_PSA_TYPE_ID,
-	VIED_NCI_ACC_OSA_TYPE_ID,
-	VIED_NCI_GDC_TYPE_ID
+static const u32 vied_nci_cell_types[IPU_FW_PSYS_N_CELL_ID] = {
+	IPU_FW_PSYS_SP_CTRL_TYPE_ID,
+	IPU_FW_PSYS_SP_SERVER_TYPE_ID,
+	IPU_FW_PSYS_SP_SERVER_TYPE_ID,
+	IPU_FW_PSYS_VP_TYPE_ID,
+	IPU_FW_PSYS_ACC_ISA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_PSA_TYPE_ID,
+	IPU_FW_PSYS_ACC_OSA_TYPE_ID,
+	IPU_FW_PSYS_GDC_TYPE_ID
 };
 
 #endif
@@ -137,46 +136,47 @@ void intel_ipu4_resource_cleanup(struct intel_ipu4_resource *res)
 
 /* Process group resource sizes */
 static const u16
-		intel_ipu4_num_dev_channels[VIED_NCI_N_DEV_CHN_ID] = {
-	VIED_NCI_DEV_CHN_DMA_EXT0_MAX_SIZE,
-	VIED_NCI_DEV_CHN_GDC_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_EXT1_READ_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_INTERNAL_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_IPFD_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_ISA_MAX_SIZE,
-	VIED_NCI_DEV_CHN_DMA_FW_MAX_SIZE
+		intel_ipu4_num_dev_channels[IPU_FW_PSYS_N_DEV_CHN_ID] = {
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT0_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_GDC_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT1_READ_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_EXT1_WRITE_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_INTERNAL_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_IPFD_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_ISA_MAX_SIZE,
+	IPU_FW_PSYS_DEV_CHN_DMA_FW_MAX_SIZE
 };
 
-static struct ia_css_program_manifest *intel_ipu4_resource_get_program_manifest(
-	const struct ia_css_program_group_manifest *manifest,
+static struct ipu_fw_psys_program_manifest *
+intel_ipu4_resource_get_program_manifest(
+	const struct ipu_fw_psys_program_group_manifest *manifest,
 	const unsigned int program_index)
 {
-	struct ia_css_program_manifest *prg_manifest_base;
+	struct ipu_fw_psys_program_manifest *prg_manifest_base;
 	u8 *program_manifest = NULL;
 	u8 program_count;
 	unsigned int i;
 
 	program_count = manifest->program_count;
 
-	prg_manifest_base = (struct ia_css_program_manifest *)
+	prg_manifest_base = (struct ipu_fw_psys_program_manifest *)
 		((char *)manifest +
 		manifest->program_manifest_offset);
 	if (program_index < program_count) {
 		program_manifest = (u8 *)prg_manifest_base;
 		for (i = 0; i < program_index; i++)
 			program_manifest +=
-				((struct ia_css_program_manifest *)
+				((struct ipu_fw_psys_program_manifest *)
 				 program_manifest)->size;
 	}
 
-	return (struct ia_css_program_manifest *)program_manifest;
+	return (struct ipu_fw_psys_program_manifest *)program_manifest;
 }
 
-static struct ia_css_program_manifest *
+static struct ipu_fw_psys_program_manifest *
 intel_ipu4_psys_get_program_manifest_by_process(
-	const struct ia_css_program_group_manifest *pg_manifest,
-	struct ia_css_process *process)
+	const struct ipu_fw_psys_program_group_manifest *pg_manifest,
+	struct ipu_fw_psys_process *process)
 {
 	u32 process_id = process->ID;
 	int programs = pg_manifest->program_count;
@@ -184,7 +184,7 @@ intel_ipu4_psys_get_program_manifest_by_process(
 
 	for (i = 0; i < programs; i++) {
 		u32 program_id;
-		struct ia_css_program_manifest *pm =
+		struct ipu_fw_psys_program_manifest *pm =
 			intel_ipu4_resource_get_program_manifest(
 				pg_manifest, i);
 		if (!pm)
@@ -203,7 +203,7 @@ int intel_ipu4_psys_resource_pool_init(
 
 	pool->cells = 0;
 
-	for (i = 0; i < VIED_NCI_N_DEV_CHN_ID; i++) {
+	for (i = 0; i < IPU_FW_PSYS_N_DEV_CHN_ID; i++) {
 		ret = intel_ipu4_resource_init(&pool->dev_channels[i], i,
 					       intel_ipu4_num_dev_channels[i]);
 		if (ret)
@@ -222,7 +222,7 @@ void intel_ipu4_psys_resource_pool_cleanup(
 {
 	u32 i;
 
-	for (i = 0; i < VIED_NCI_N_DEV_CHN_ID; i++)
+	for (i = 0; i < IPU_FW_PSYS_N_DEV_CHN_ID; i++)
 		intel_ipu4_resource_cleanup(&pool->dev_channels[i]);
 }
 
@@ -234,9 +234,9 @@ void intel_ipu4_psys_resource_alloc_init(
 }
 
 static int intel_ipu4_psys_allocate_one_resource(const struct device *dev,
-			struct ia_css_process *process,
+			struct ipu_fw_psys_process *process,
 			struct intel_ipu4_resource *resource,
-			struct ia_css_program_manifest *pm,
+			struct ipu_fw_psys_program_manifest *pm,
 			u32 resource_id,
 			struct intel_ipu4_psys_resource_alloc *alloc)
 {
@@ -270,7 +270,7 @@ static int intel_ipu4_psys_allocate_one_resource(const struct device *dev,
  * are not allocated at all, or some other error on other conditions.
  */
 int intel_ipu4_psys_allocate_resources(const struct device *dev,
-			struct ia_css_process_group *pg,
+			struct ipu_fw_psys_process_group *pg,
 			void *pg_manifest,
 			struct intel_ipu4_psys_resource_alloc *alloc,
 			struct intel_ipu4_psys_resource_pool *pool)
@@ -283,9 +283,10 @@ int intel_ipu4_psys_allocate_resources(const struct device *dev,
 
 	for (i = 0; i < processes; i++) {
 		u32 cell;
-		struct ia_css_process *process = (struct ia_css_process *)
+		struct ipu_fw_psys_process *process =
+			(struct ipu_fw_psys_process *)
 			((char *)pg + process_offset_table[i]);
-		struct ia_css_program_manifest *pm;
+		struct ipu_fw_psys_program_manifest *pm;
 
 		if (process == NULL) {
 			dev_err(dev, "can not get process\n");
@@ -301,17 +302,17 @@ int intel_ipu4_psys_allocate_resources(const struct device *dev,
 			goto free_out;
 		}
 
-		if ((pm->cell_id != VIED_NCI_N_CELL_ID &&
-		     pm->cell_type_id != VIED_NCI_N_CELL_ID)) {
+		if ((pm->cell_id != IPU_FW_PSYS_N_CELL_ID &&
+		     pm->cell_type_id != IPU_FW_PSYS_N_CELL_ID)) {
 			cell = process->cell_id;
 		} else {
 			/* Find a free cell of desired type */
 			u32 type = pm->cell_type_id;
-			for (cell = 0; cell < VIED_NCI_N_CELL_ID; cell++)
+			for (cell = 0; cell < IPU_FW_PSYS_N_CELL_ID; cell++)
 				if (vied_nci_cell_types[cell] == type &&
 				    ((pool->cells | cells) & (1 << cell)) == 0)
 					break;
-			if (cell >= VIED_NCI_N_CELL_ID) {
+			if (cell >= IPU_FW_PSYS_N_CELL_ID) {
 				dev_dbg(dev, "no free cells of right type\n");
 				ret = -ENOSPC;
 				goto free_out;
@@ -326,7 +327,7 @@ int intel_ipu4_psys_allocate_resources(const struct device *dev,
 			goto free_out;
 		}
 
-		for (res_id = 0; res_id < VIED_NCI_N_DEV_CHN_ID; res_id++) {
+		for (res_id = 0; res_id < IPU_FW_PSYS_N_DEV_CHN_ID; res_id++) {
 			ret = intel_ipu4_psys_allocate_one_resource(dev,
 				process, &pool->dev_channels[res_id],
 				pm, res_id, alloc);
@@ -340,9 +341,10 @@ int intel_ipu4_psys_allocate_resources(const struct device *dev,
 
 free_out:
 	for (; i >= 0; i--) {
-		struct ia_css_process *process = (struct ia_css_process *)
+		struct ipu_fw_psys_process *process =
+			(struct ipu_fw_psys_process *)
 			((char *)pg + process_offset_table[i]);
-		struct ia_css_program_manifest *pm;
+		struct ipu_fw_psys_program_manifest *pm;
 
 		if (process == NULL)
 			break;
@@ -350,8 +352,8 @@ free_out:
 						pg_manifest, process);
 		if (pm == NULL)
 			break;
-		if ((pm->cell_id != VIED_NCI_N_CELL_ID &&
-		     pm->cell_type_id != VIED_NCI_N_CELL_ID))
+		if ((pm->cell_id != IPU_FW_PSYS_N_CELL_ID &&
+		     pm->cell_type_id != IPU_FW_PSYS_N_CELL_ID))
 			continue;
 		pg->resource_bitmap &= ~(1 << process->cell_id);
 		process->cell_id = 0;
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-resources.h b/drivers/media/pci/intel-ipu4/intel-ipu4-resources.h
index d03cad2..1d3fde5 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-resources.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-resources.h
@@ -43,7 +43,7 @@ void intel_ipu4_resource_cleanup(struct intel_ipu4_resource *res);
 
 #define INTEL_IPU4_MAX_RESOURCES 32
 
-struct ia_css_program_group_manifest {
+struct ipu_fw_psys_program_group_manifest {
 	u64 kernel_bitmap;
 	u32 ID;
 	u32 program_manifest_offset;
@@ -58,7 +58,7 @@ struct ia_css_program_group_manifest {
 	u8 reserved[1];
 };
 
-struct ia_css_program_manifest {
+struct ipu_fw_psys_program_manifest {
 	u64 kernel_bitmap;
 	u32 ID;
 	u32 program_type;
@@ -66,9 +66,9 @@ struct ia_css_program_manifest {
 	u32 program_dependency_offset;
 	u32 terminal_dependency_offset;
 	u16 size;
-	u16 int_mem_size[VIED_NCI_N_MEM_TYPE_ID];
-	u16 ext_mem_size[VIED_NCI_N_DATA_MEM_TYPE_ID];
-	u16 dev_chn_size[VIED_NCI_N_DEV_CHN_ID];
+	u16 int_mem_size[IPU_FW_PSYS_N_MEM_TYPE_ID];
+	u16 ext_mem_size[IPU_FW_PSYS_N_DATA_MEM_TYPE_ID];
+	u16 dev_chn_size[IPU_FW_PSYS_N_DEV_CHN_ID];
 	u8 cell_id;
 	u8 cell_type_id;
 	u8 program_dependency_count;
@@ -85,7 +85,7 @@ struct ia_css_program_manifest {
  */
 struct intel_ipu4_psys_resource_pool {
 	u32 cells;	/* Bitmask of cells allocated */
-	struct intel_ipu4_resource dev_channels[VIED_NCI_N_DEV_CHN_ID];
+	struct intel_ipu4_resource dev_channels[IPU_FW_PSYS_N_DEV_CHN_ID];
 };
 
 /*
@@ -100,7 +100,7 @@ struct intel_ipu4_psys_resource_alloc {
 	int resources;
 };
 
-struct ia_css_process_group;
+struct ipu_fw_psys_process_group;
 
 int intel_ipu4_psys_resource_pool_init(
 				struct intel_ipu4_psys_resource_pool *pool);
@@ -112,7 +112,7 @@ void intel_ipu4_psys_resource_alloc_init(
 				struct intel_ipu4_psys_resource_alloc *alloc);
 
 int intel_ipu4_psys_allocate_resources(const struct device *dev,
-			       struct ia_css_process_group *pg,
+			       struct ipu_fw_psys_process_group *pg,
 			       void *pg_manifest,
 			       struct intel_ipu4_psys_resource_alloc *alloc,
 			       struct intel_ipu4_psys_resource_pool *pool);
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-trace-event.h b/drivers/media/pci/intel-ipu4/intel-ipu4-trace-event.h
index 8f66b92..deacd7b 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-trace-event.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-trace-event.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2015--2016 Intel Corporation.
+ * Copyright (c) 2015--2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -19,6 +19,7 @@
 
 #include <linux/tracepoint.h>
 
+#ifdef IPU4_SOF_SEQID_TRACE
 TRACE_EVENT(ipu4_sof_seqid,
 		TP_PROTO(unsigned int seqid, unsigned int csiport,
 			unsigned int csivc),
@@ -36,7 +37,9 @@ TRACE_EVENT(ipu4_sof_seqid,
 		TP_printk("seqid<%u>,csiport<%u>,csivc<%u>", __entry->seqid,
 			__entry->csiport, __entry->csivc)
 );
+#endif
 
+#ifdef IPU4_PERF_REG_TRACE
 TRACE_EVENT(ipu4_perf_reg,
 		TP_PROTO(unsigned int addr, unsigned int val),
 		TP_ARGS(addr, val),
@@ -50,32 +53,43 @@ TRACE_EVENT(ipu4_perf_reg,
 		),
 		TP_printk("addr=%u,val=%u", __entry->addr, __entry->val)
 );
+#endif
 
+#ifdef IPU4_PG_KCMD_TRACE
 TRACE_EVENT(ipu4_pg_kcmd,
 		TP_PROTO(const char *func, unsigned int id,
 			unsigned long long issue_id, unsigned int pri,
-			unsigned int pg_id),
-		TP_ARGS(func, id, issue_id, pri, pg_id),
+			unsigned int pg_id, unsigned int load_cycles,
+			unsigned int init_cycles,
+			unsigned int processing_cycles),
+		TP_ARGS(func, id, issue_id, pri, pg_id, load_cycles,
+			init_cycles, processing_cycles),
 		TP_STRUCT__entry(
 			__field(const char *, func)
 			__field(unsigned int, id)
 			__field(unsigned long long, issue_id)
 			__field(unsigned int, pri)
 			__field(unsigned int, pg_id)
+			__field(unsigned int, load_cycles)
+			__field(unsigned int, init_cycles)
+			__field(unsigned int, processing_cycles)
 		),
 		TP_fast_assign(
 			__entry->func = func;
 			__entry->id = id;
 			__entry->issue_id = issue_id;
 			__entry->pri = pri;
-			__entry->pri = pg_id;
+			__entry->pg_id = pg_id;
+			__entry->load_cycles = load_cycles;
+			__entry->init_cycles = init_cycles;
+			__entry->processing_cycles = processing_cycles;
 		),
-		TP_printk("pg-kcmd: func=%s,id=%u, \
-			issue_id=0x%llx,pri=%u,pg_id=%d",
+		TP_printk("pg-kcmd: func=%s,id=%u,issue_id=0x%llx,pri=%u,pg_id=%d,load_cycles=%u,init_cycles=%u,processing_cycles=%u",
 			__entry->func, __entry->id, __entry->issue_id,
-			__entry->pri, __entry->pg_id)
+			__entry->pri, __entry->pg_id, __entry->load_cycles,
+			__entry->init_cycles, __entry->processing_cycles)
 );
-
+#endif
 #endif
 
 #undef TRACE_INCLUDE_PATH
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.c b/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.c
index e3ccc52..fc3f8a9 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.c
@@ -33,7 +33,6 @@ struct wrapper_base {
 	struct list_head buffers;
 	uint32_t css_map_done;
 	struct device *dev;
-	unsigned int flags;
 };
 
 struct wrapper_base isys;
@@ -47,18 +46,6 @@ struct my_css_memory_buffer_item {
 	unsigned long attrs;
 };
 
-/*
- * Css2600 driver set base address for css use
- */
-void intel_ipu4_wrapper_init(void __iomem *basepsys, void __iomem *baseisys,
-			  unsigned int flags)
-{
-	isys.sys_base = baseisys;
-	psys.sys_base = basepsys;
-	isys.flags = flags;
-	psys.flags = flags;
-}
-EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_init);
 
 unsigned long long get_hrt_base_address(void)
 {
@@ -86,31 +73,6 @@ static struct wrapper_base *get_sub_system(int ssid)
 	BUG();
 }
 
-int intel_ipu4_wrapper_add_shared_memory_buffer(int mmid, void *addr,
-						dma_addr_t dma_addr,
-						size_t size)
-{
-	struct wrapper_base *mine = get_mem_sub_system(mmid);
-	struct my_css_memory_buffer_item *buf;
-	unsigned long flags;
-
-	might_sleep();
-
-	buf = kzalloc(sizeof(*buf), GFP_KERNEL);
-	if (!buf)
-		return -ENOMEM;
-
-	buf->bytes = size;
-	buf->addr = addr;
-	buf->iova = dma_addr;
-
-	spin_lock_irqsave(&mine->lock, flags);
-	list_add(&buf->list, &mine->buffers);
-	spin_unlock_irqrestore(&mine->lock, flags);
-
-	return 0;
-}
-EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_add_shared_memory_buffer);
 
 int intel_ipu4_wrapper_remove_shared_memory_buffer(int mmid, void *addr)
 {
@@ -312,10 +274,9 @@ static uint8_t alloc_cookie;
 u64 shared_memory_alloc(int mmid, size_t bytes)
 {
 	struct wrapper_base *mine = get_mem_sub_system(mmid);
+	struct my_css_memory_buffer_item *buf;
 	dma_addr_t dma_addr;
-	void *addr;
-	size_t size;
-	int rval;
+	unsigned long flags;
 
 	dev_dbg(mine->dev, "%s: in, size: %zu\n", __func__, bytes);
 
@@ -324,21 +285,27 @@ u64 shared_memory_alloc(int mmid, size_t bytes)
 
 	might_sleep();
 
+	buf = kzalloc(sizeof(*buf), GFP_KERNEL);
+	if (!buf)
+		return 0;
+
 	/*alloc using intel_ipu4 dma driver*/
-	size = PAGE_ALIGN(bytes);
+	buf->bytes = PAGE_ALIGN(bytes);
 
-	addr = dma_alloc_attrs(mine->dev, size, &dma_addr, GFP_KERNEL, 0);
-	if (!addr)
-		return 0;
+	//buf->addr = dma_alloc_attrs(mine->dev, buf->bytes, &buf->iova,
+	//			    GFP_KERNEL, NULL);
 
-	rval = intel_ipu4_wrapper_add_shared_memory_buffer(mmid, addr,
-							   dma_addr, size);
-	if (rval) {
-		dma_free_attrs(mine->dev, size, addr, dma_addr, 0);
+	buf->addr = dma_alloc_attrs(mine->dev, buf->bytes, &buf->iova, GFP_KERNEL, 0);
+	if (!buf->addr) {
+		kfree(buf);
 		return 0;
 	}
 
-	return (unsigned long)addr;
+	spin_lock_irqsave(&mine->lock, flags);
+	list_add(&buf->list, &mine->buffers);
+	spin_unlock_irqrestore(&mine->lock, flags);
+
+	return (unsigned long)buf->addr;
 }
 EXPORT_SYMBOL_GPL(shared_memory_alloc);
 
@@ -601,28 +568,25 @@ int init_wrapper(void)
 	spin_lock_init(&psys.lock);
 	return 0;
 }
-
-void intel_ipu4_wrapper_set_device(struct device *dev, int mmid)
+int exit_wrapper(void)
 {
-	struct wrapper_base *mine = get_mem_sub_system(mmid);
-
-	mine->dev = dev;
 }
-EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_set_device);
 
-int intel_ipu4_wrapper_register_buffer(dma_addr_t iova,
-		void *addr, size_t bytes)
+/*
+ * Wrapper driver set base address for library use
+ */
+void intel_ipu4_wrapper_init(int mmid, struct device *dev,
+			     void __iomem *base)
 {
-	return 0;
-}
-EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_register_buffer);
+	struct wrapper_base *sys = get_mem_sub_system(mmid);
 
-void intel_ipu4_wrapper_unregister_buffer(dma_addr_t iova)
-{
+	sys->dev = dev;
+	sys->sys_base = base;
 }
-EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_unregister_buffer);
+EXPORT_SYMBOL_GPL(intel_ipu4_wrapper_init);
 
 module_init(init_wrapper);
+module_exit(exit_wrapper);
 MODULE_AUTHOR("Jouni Ukkonen <jouni.ukkonen@intel.com>");
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("CSS wrapper");
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.h b/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.h
index 2349746..8296877 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4-wrapper.h
@@ -32,19 +32,7 @@ struct intel_ipu4_isys_iomem_filter;
 struct iommu_domain;
 struct firmware;
 
-int intel_ipu4_wrapper_register_buffer(dma_addr_t iova,
-		void *addr, size_t bytes);
-void intel_ipu4_wrapper_unregister_buffer(dma_addr_t iova);
-
-void intel_ipu4_wrapper_init(void __iomem *basepsys, void __iomem *baseisys,
-			unsigned int flags);
-void intel_ipu4_wrapper_set_device(struct device *dev, int mmid);
-
-int intel_ipu4_wrapper_add_shared_memory_buffer(int mmid, void *addr,
-						dma_addr_t dma_addr,
-						unsigned long size);
-int intel_ipu4_wrapper_remove_shared_memory_buffer(int mmid, void *addr);
-
-void *intel_ipu4_wrapper_get_isys_fw(void);
+void intel_ipu4_wrapper_init(int mmid, struct device *dev,
+			     void __iomem *base);
 
 #endif /* INTEL_IPU4_WRAPPER_2401_H */
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu4.c b/drivers/media/pci/intel-ipu4/intel-ipu4.c
index badf0d1..7b424e3 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu4.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu4.c
@@ -31,11 +31,11 @@
 #include "intel-ipu4-cpd.h"
 #include "intel-ipu4-pdata.h"
 #include "intel-ipu4-bus.h"
+#include "intel-ipu4-mmu.h"
 #include "intel-ipu4-regs.h"
 #include "intel-ipu5-regs.h"
 #include "intel-ipu5-isys-csi2-reg.h"
 #include "intel-ipu4-trace.h"
-#include "intel-ipu4-wrapper.h"
 #include "intel-ipu5-devel.h"
 
 #define INTEL_IPU4_PCI_BAR		0
@@ -737,7 +737,6 @@ static int intel_ipu4_pci_probe(struct pci_dev *pdev,
 	const struct intel_ipu4_isys_internal_pdata *isys_ipdata;
 	const struct intel_ipu4_psys_internal_pdata *psys_ipdata;
 	unsigned int dma_mask = 39;
-	unsigned int wrapper_flags = 0;
 	const char *cpd_filename;
 	int rval;
 
@@ -862,8 +861,6 @@ static int intel_ipu4_pci_probe(struct pci_dev *pdev,
 		goto out_intel_ipu4_bus_del_devices;
 	}
 
-	intel_ipu4_wrapper_init(psys_base, isys_base, wrapper_flags);
-
 	rval = intel_ipu4_trace_add(isp);
 	if (rval)
 		dev_err(&pdev->dev, "Trace support not available\n");
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu5-devel.c b/drivers/media/pci/intel-ipu4/intel-ipu5-devel.c
index 2c19ba9..f66c5f9 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu5-devel.c
+++ b/drivers/media/pci/intel-ipu4/intel-ipu5-devel.c
@@ -19,7 +19,6 @@
 #include "intel-ipu4.h"
 #include "intel-ipu4-cpd.h"
 #include "intel-ipu4-isys.h"
-#include "intel-ipu4-wrapper.h"
 #include "intel-ipu4-regs.h"
 #include "intel-ipu5-devel.h"
 #include "intel-ipu5-regs.h"
@@ -46,13 +45,6 @@ int intel_ipu5_isys_load_pkg_dir(struct intel_ipu4_isys *isys)
 	if (rval)
 		dev_err(&isys->adev->dev, "map_fw_image failed\n");
 
-	rval = intel_ipu4_wrapper_add_shared_memory_buffer(
-		ISYS_SSID, (void *)fw->data,
-		sg_dma_address(isys->fw_sgt.sgl),
-		fw->size);
-	if (rval)
-		dev_err(&isys->adev->dev, "add_shared_buffer failed\n");
-
 	pkg_dir_host_address = (u64 *)fw->data;
 	dev_dbg(&isys->adev->dev, "pkg_dir_host_addr 0x%lx\n",
 		(unsigned long)pkg_dir_host_address);
diff --git a/drivers/media/pci/intel-ipu4/intel-ipu5-devel.h b/drivers/media/pci/intel-ipu4/intel-ipu5-devel.h
index 4eededc..7a9178f 100644
--- a/drivers/media/pci/intel-ipu4/intel-ipu5-devel.h
+++ b/drivers/media/pci/intel-ipu4/intel-ipu5-devel.h
@@ -1,5 +1,5 @@
 /*
- * Copyright (c) 2016 Intel Corporation.
+ * Copyright (c) 2016-2017 Intel Corporation.
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License version
@@ -24,7 +24,7 @@ struct intel_ipu4_isys;
 #if IS_ENABLED(CONFIG_VIDEO_INTEL_IPU5)
 
 int intel_ipu5_isys_load_pkg_dir(struct intel_ipu4_isys *isys);
-void intel_ipu5_pkg_dir_configure_spc(struct intel_ipu4_device *isp,
+static void intel_ipu5_pkg_dir_configure_spc(struct intel_ipu4_device *isp,
 			const struct intel_ipu4_hw_variants *hw_variant,
 			int pkg_dir_idx, void __iomem *base,
 			u64 *pkg_dir,
@@ -36,7 +36,7 @@ static int intel_ipu5_isys_load_pkg_dir(struct intel_ipu4_isys *isys)
 {
 	return 0;
 }
-void intel_ipu5_pkg_dir_configure_spc(struct intel_ipu4_device *isp,
+static void intel_ipu5_pkg_dir_configure_spc(struct intel_ipu4_device *isp,
 				const struct intel_ipu4_hw_variants *hw_variant,
 				int pkg_dir_idx, void __iomem *base,
 				u64 *pkg_dir,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile
index 45e47ac..baa7ed3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile
@@ -1,5 +1,5 @@
 #
-#  Copyright (c) 2010 - 2016, Intel Corporation.
+#  Copyright (c) 2010 - 2017, Intel Corporation.
 #
 #  This program is free software; you can redistribute it and/or modify it
 #  under the terms and conditions of the GNU General Public License,
@@ -20,8 +20,10 @@ ccflags-y += -DIPU_STEP_BXTB0 -DIPU_STEP_BXTC0
 
 include $(srcpath)/$(src)/../Makefile.link
 include $(srcpath)/$(src)/../Makefile.common
+ifdef CONFIG_VIDEO_INTEL_IPU_FW_LIB
 include $(srcpath)/$(src)/../Makefile.lib2600
 include $(srcpath)/$(src)/../Makefile.lib2600psys
+endif
 ccflags-y += -I$(srcpath)/$(src)/../../../../../include/
 ccflags-y += -I$(srcpath)/$(src)/../
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile.ipu4isys_src b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile.ipu4isys_src
index c82b58e..6b88551 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile.ipu4isys_src
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/Makefile.ipu4isys_src
@@ -1,15 +1,19 @@
 IPU_ISYSLIB_SRC = \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_private.o \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public.o \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public_trace.o
+
+ifeq ($(CONFIG_VIDEO_INTEL_IPU4), m)
+IPU_ISYSLIB_SRC += \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/buffer_access.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_input_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_output_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_shared_buffer.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_private.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public_trace.o \
 	$(IPU_ISYSLIB_ROOT_REL)/pkg_dir/src/ia_css_pkg_dir.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/queue.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/recv_port.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/send_port.o \
 	$(IPU_ISYSLIB_ROOT_REL)/reg_dump/src/reg_dump_generic_bridge.o \
-	$(IPU_ISYSLIB_ROOT_REL)/syscom/src/ia_css_syscom.o
\ No newline at end of file
+	$(IPU_ISYSLIB_ROOT_REL)/syscom/src/ia_css_syscom.o
+endif
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/ia_css_fw_pkg_release.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/ia_css_fw_pkg_release.h
index 58963b3..e3cc37b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/ia_css_fw_pkg_release.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/ia_css_fw_pkg_release.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -11,4 +11,4 @@
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 */
-#define IA_CSS_FW_PKG_RELEASE  0x20161205
+#define IA_CSS_FW_PKG_RELEASE  0x20170225
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/buffer.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/buffer.mk
index 9d38aba..f1eb5e7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/buffer.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/buffer.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_access.h
index 30b3dbc..b6aa1b2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_access.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_type.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_type.h
index b072c59..ba6a2bf 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_type.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/buffer_type.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_buffer_address.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_buffer_address.h
index c8b044b..a834f05 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_buffer_address.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_buffer_address.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer.h
index ba068a0..04cdcdb 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer_cpu.h
index 835ba0e..9875ae0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_input_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer.h
index 35b2970..567fa84 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer_cpu.h
index ff6cdab..344a214 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_output_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_return_token.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_return_token.h
index d219fb3..72d88ec 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_return_token.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_return_token.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer.h
index a55a458..c075d7c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -29,4 +29,4 @@ typedef struct ia_css_buffer_s *ia_css_shared_buffer;
 typedef void *ia_css_shared_buffer_cpu_address;
 typedef ia_css_buffer_address	ia_css_shared_buffer_css_address;
 
-#endif /*__IA_CSS_SHARED_BUFFER_H*/
+#endif /* __IA_CSS_SHARED_BUFFER_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer_cpu.h
index 80f88c3..1ba8ba4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/interface/ia_css_shared_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -48,4 +48,4 @@ ia_css_shared_buffer_css_update(vied_memory_t mid, ia_css_shared_buffer b);
 ia_css_shared_buffer
 ia_css_shared_buffer_cpu_update(vied_memory_t mid, ia_css_shared_buffer b);
 
-#endif /*__IA_CSS_SHARED_BUFFER_CPU_H */
+#endif /* __IA_CSS_SHARED_BUFFER_CPU_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/buffer_access.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/buffer_access.c
index 5c5501c..0682738 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/buffer_access.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/buffer_access.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.c
index c4cbcb6..cc39041 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.h
index a725da1..529ab37 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -55,4 +55,4 @@ ia_css_buffer_free(
 	vied_memory_t mid,
 	ia_css_buffer_t b);
 
-#endif /*__IA_CSS_BUFFER_H */
+#endif /* __IA_CSS_BUFFER_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_input_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_input_buffer.c
index 6b33738..c75cb75 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_input_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_input_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_output_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_output_buffer.c
index 861cb23..9c9b470 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_output_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_output_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_shared_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_shared_buffer.c
index dae63a9..deb3f25 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_shared_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/buffer/src/cpu/ia_css_shared_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/cell.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/cell.mk
index 6b622da..61d974c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/cell.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/cell.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/interface/ia_css_cell.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/interface/ia_css_cell.h
index 7c142c5..2869708 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/interface/ia_css_cell.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/interface/ia_css_cell.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/src/ia_css_cell_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/src/ia_css_cell_impl.h
index 7952196..1478998c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/src/ia_css_cell_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/cell/src/ia_css_cell_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/config/system_bxtB0.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/config/system_bxtB0.mk
index ac8f60e..066c6ea 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/config/system_bxtB0.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/config/system_bxtB0.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/device_access.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/device_access.mk
index f3047ec..bbab8ab 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/device_access.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/device_access.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_cmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_cmem.h
index 54f9988..88eb062 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_cmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_cmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_CMEM_H_
-#define _IA_CSS_CMEM_H_
+#ifndef __IA_CSS_CMEM_H
+#define __IA_CSS_CMEM_H
 
 #include "type_support.h"
 #include "storage_class.h"
@@ -55,4 +55,4 @@ ia_css_cmem_get_cmem_addr_from_dmem(unsigned int base_addr, void *p);
 #include "ia_css_cmem_host.h"
 #endif
 
-#endif
+#endif /* __IA_CSS_CMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem.h
index d1ba09e..0e335d18 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_H_
-#define _IA_CSS_XMEM_H_
+#ifndef __IA_CSS_XMEM_H
+#define __IA_CSS_XMEM_H
 
 #include "type_support.h"
 #include "storage_class.h"
@@ -62,4 +62,4 @@ ia_css_xmem_store(unsigned int mmid, ia_css_xmem_address_t address,
 #include "ia_css_xmem_host.h"
 #endif
 
-#endif /* _IA_CSS_XMEM_H_ */
+#endif /* __IA_CSS_XMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem_cmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem_cmem.h
index cffe6e5..250cdba 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem_cmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/interface/ia_css_xmem_cmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_CMEM_H_
-#define _IA_CSS_XMEM_CMEM_H_
+#ifndef __IA_CSS_XMEM_CMEM_H
+#define __IA_CSS_XMEM_CMEM_H
 
 #include "ia_css_cmem.h"
 #include "ia_css_xmem.h"
@@ -32,4 +32,4 @@ ia_css_xmem_to_cmem_copy(
 /* include inline implementation */
 #include "ia_css_xmem_cmem_impl.h"
 
-#endif /* _IA_CSS_XMEM_CMEM_H_ */
+#endif /* __IA_CSS_XMEM_CMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_cmem_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_cmem_host.h
index 159f654..015ef9e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_cmem_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_cmem_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_CMEM_HOST_H_
-#define _IA_CSS_CMEM_HOST_H_
+#ifndef __IA_CSS_CMEM_HOST_H
+#define __IA_CSS_CMEM_HOST_H
 
 /* This file is an inline implementation for the interface ia_css_cmem.h
  * and should only be included there. */
@@ -107,4 +107,4 @@ ia_css_cmem_get_cmem_addr_from_dmem(unsigned int base_addr, void *p)
 	return (ia_css_cmem_address_t)(uintptr_t)p;
 }
 
-#endif
+#endif /* __IA_CSS_CMEM_HOST_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_cmem_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_cmem_impl.h
index 45a42ed..76174a0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_cmem_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_cmem_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_CMEM_IMPL_H_
-#define _IA_CSS_XMEM_CMEM_IMPL_H_
+#ifndef __IA_CSS_XMEM_CMEM_IMPL_H
+#define __IA_CSS_XMEM_CMEM_IMPL_H
 
 #include "ia_css_xmem_cmem.h"
 
@@ -76,4 +76,4 @@ ia_css_cmem_to_xmem_copy(
 }
 
 
-#endif /* _IA_CSS_XMEM_CMEM_IMPLH_ */
+#endif /* __IA_CSS_XMEM_CMEM_IMPL_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_host.h
index f0fd9db..020cb43 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/device_access/src/ia_css_xmem_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_HOST_H_
-#define _IA_CSS_XMEM_HOST_H_
+#ifndef __IA_CSS_XMEM_HOST_H
+#define __IA_CSS_XMEM_HOST_H
 
 #include "ia_css_xmem.h"
 #include <vied/shared_memory_access.h>
@@ -81,4 +81,4 @@ ia_css_xmem_store(unsigned int mmid, ia_css_xmem_address_t address,
 	shared_memory_store(mmid, address, data, bytes);
 }
 
-#endif /* _IA_CSS_XMEM_HOST_H_ */
+#endif /* __IA_CSS_XMEM_HOST_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_buttress_properties_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_buttress_properties_struct.h
index ea5a55b..3207637 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_buttress_properties_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_buttress_properties_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties.h
index d643932..98e5446 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_func.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_func.h
index 617e30c..5825a88 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_func.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_func.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_struct.h
index 0f16c23..c13cd76 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_properties_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_type_properties.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_type_properties.h
index 7dbd63c..b1adc38 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_type_properties.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/interface/ipu_device_cell_type_properties.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_devices.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_devices.h
index d57b231..0b70a64 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_devices.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_devices.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_defs.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_defs.h
index 975a628..0e0299e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_defs.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_defs.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_impl.h
index fe2ed60..4ed64a6 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/isys/bxtB0/ipu_device_cell_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/src/ipu_device_sp2600_control_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/src/ipu_device_sp2600_control_properties_impl.h
index c129ade..76c6869 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/src/ipu_device_sp2600_control_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/devices/src/ipu_device_sp2600_control_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isys_fw_bridged_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isys_fw_bridged_types.h
index 99d86f8..6f74d88 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isys_fw_bridged_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isys_fw_bridged_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -77,6 +77,9 @@ struct ia_css_isys_output_pin_payload_comm {
  * @pt: pin type
  * @ft: frame format type
  * @online: make it possible to connect online
+ * @link_id: identifies PPG to connect to, link_id = 0 implies offline
+ *           while link_id > 0 implies buffer_chasing or online mode
+ *           can be entered.
  */
 struct ia_css_isys_output_pin_info_comm {
 	aligned_struct(struct ia_css_isys_resolution_comm, output_res);
@@ -87,6 +90,7 @@ struct ia_css_isys_output_pin_info_comm {
 	aligned_uint8(enum ia_css_isys_pin_type, pt);
 	aligned_uint8(enum ia_css_isys_frame_format_type, ft);
 	aligned_uint8(unsigned int, online);
+	aligned_uint8(enum ia_css_isys_link_id, link_id);
 };
 
 /**
@@ -253,6 +257,7 @@ struct ia_css_isys_stream_cfg_data_comm {
  *		   send_irq_sof is '0'
  * @send_resp_eof: send response for frame eof detected, used only when
  *		   send_irq_eof is '0'
+ * @frame_counter: frame number associated with this buffer set.
  */
 struct ia_css_isys_frame_buff_set_comm {
 	aligned_struct(struct ia_css_isys_output_pin_payload_comm,
@@ -262,6 +267,7 @@ struct ia_css_isys_frame_buff_set_comm {
 	aligned_uint8(unsigned int, send_irq_eof);
 	aligned_uint8(unsigned int, send_resp_sof);
 	aligned_uint8(unsigned int, send_resp_eof);
+	aligned_uint8(unsigned int, frame_counter);
 };
 
 /**
@@ -289,7 +295,12 @@ struct ia_css_isys_error_info_comm {
  * @acc_id: this var is valid for stats ready related responses,
  *	    contains accelerator id that finished producing
  *	    all related statistics
+ * @frame_counter: valid for STREAM_START_AND_CAPTURE_DONE,
+ *             STREAM_CAPTURE_DONE and STREAM_CAPTURE_DISCARDED,
+ * @written_direct: indicates if frame was written direct (online mode) or not.
+ *
  */
+
 struct ia_css_isys_resp_info_comm {
 	aligned_uint64(ia_css_return_token, buf_id); /* Used internally only */
 	aligned_struct(struct ia_css_isys_output_pin_payload_comm, pin);
@@ -300,6 +311,8 @@ struct ia_css_isys_resp_info_comm {
 	aligned_uint8(enum ia_css_isys_resp_type, type);
 	aligned_uint8(unsigned int, pin_id);
 	aligned_uint8(unsigned int, acc_id);
+	aligned_uint8(unsigned int, frame_counter);
+	aligned_uint8(unsigned int, written_direct);
 };
 
 /**
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi.h
index cbc0c52..a6846ab8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_types.h
index 7f3b6c9..0b7012b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -472,4 +472,14 @@ enum ia_css_proxy_error {
 	N_IA_CSS_PROXY_ERROR
 };
 
-#endif /* __IA_CSS_ISYSAPI_FW_TYPES_H */
+/*
+ * enum ia_css_isys_link_id. Lists the link ids used by the FW for On The Fly feature
+ */
+enum ia_css_isys_link_id {
+	IA_CSS_ISYS_LINK_OFFLINE = 0,
+	IA_CSS_ISYS_LINK_MAIN_OUTPUT  = 1,
+	IA_CSS_ISYS_LINK_PDAF_OUTPUT  = 2,
+	N_IA_CSS_ISYS_LINK_ID
+};
+
+#endif /*__IA_CSS_ISYSAPI_FW_TYPES_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_version.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_version.h
index b9e19bf..4cdd35a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_version.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_fw_version.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_defs.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_defs.h
index 1c31a1b..086e8ed 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_defs.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_defs.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_types.h
index ea6997e8..162a76d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_proxy_region_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_types.h
index 90628d9..62b1a4f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/interface/ia_css_isysapi_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -16,6 +16,7 @@
 #define __IA_CSS_ISYSAPI_TYPES_H
 
 #include "ia_css_isysapi_fw_types.h"
+#include "type_support.h"
 
 #include "ia_css_return_token.h"
 #include "ia_css_output_buffer.h"
@@ -97,6 +98,9 @@ struct ia_css_isys_output_pin_payload {
  * @watermark_in_lines: pin watermark level in lines
  * @send_irq: assert if pin event should trigger irq
  * @online: make it possible to connect online
+ * @link_id: identifies PPG to connect to, link_id = 0 implies offline
+ *           while link_id > 0 implies buffer_chasing or online mode
+ *           can be entered.
  */
 struct ia_css_isys_output_pin_info {
 	unsigned int input_pin_id;
@@ -107,6 +111,7 @@ struct ia_css_isys_output_pin_info {
 	unsigned int watermark_in_lines;
 	unsigned int send_irq;
 	unsigned int online;
+	enum ia_css_isys_link_id link_id;
 };
 
 /**
@@ -243,6 +248,7 @@ struct ia_css_isys_stream_cfg_data {
  *		   used only when send_irq_sof is '0'
  * @send_resp_eof: send response for frame eof detected,
  *		   used only when send_irq_eof is '0'
+ * @frame_counter: frame number associated with this buffer set.
  */
 struct ia_css_isys_frame_buff_set {
 	struct ia_css_isys_output_pin_payload output_pins[MAX_OPINS];
@@ -251,6 +257,7 @@ struct ia_css_isys_frame_buff_set {
 	unsigned int send_irq_eof;
 	unsigned int send_resp_sof;
 	unsigned int send_resp_eof;
+	uint8_t      frame_counter;
 };
 
 /**
@@ -270,6 +277,9 @@ struct ia_css_isys_frame_buff_set {
  * @acc_id: this var is valid for stats ready related responses,
  *	    contains accelerator id that finished producing
  *	    all related statistics
+ * @frame_counter: valid for STREAM_START_AND_CAPTURE_DONE,
+ *             STREAM_CAPTURE_DONE and STREAM_CAPTURE_DISCARDED
+ * @written_direct: indicates if frame was written direct (online mode) or to DDR.
  */
 struct ia_css_isys_resp_info {
 	enum ia_css_isys_resp_type type;
@@ -281,6 +291,8 @@ struct ia_css_isys_resp_info {
 	unsigned int pin_id;
 	struct ia_css_isys_param_pin process_group_light;
 	unsigned int acc_id;
+	uint8_t      frame_counter;
+	uint8_t      written_direct;
 };
 
 /**
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/isysapi.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/isysapi.mk
index a5e6875..234e6be 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/isysapi.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/isysapi.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.c
index 9de14c1..d3de76b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -415,7 +415,7 @@ STORAGE_CLASS_INLINE void output_pin_info_host_to_css(
 			output_pin_info_host->watermark_in_lines;
 	output_pin_info_css->send_irq = output_pin_info_host->send_irq;
 	output_pin_info_css->ft = output_pin_info_host->ft;
-	output_pin_info_css->online = output_pin_info_host->online;
+	output_pin_info_css->link_id = output_pin_info_host->link_id;
 }
 
 STORAGE_CLASS_INLINE void param_pin_host_to_css(
@@ -572,6 +572,8 @@ STORAGE_CLASS_INLINE void frame_buff_set_host_to_css(
 	frame_buff_set_css->send_resp_eof =
 			frame_buff_set_host->send_irq_eof ?
 				1 : frame_buff_set_host->send_resp_eof;
+	frame_buff_set_css->frame_counter =
+			frame_buff_set_host->frame_counter;
 }
 
 STORAGE_CLASS_INLINE void buffer_partition_host_to_css(
@@ -622,6 +624,8 @@ STORAGE_CLASS_INLINE void resp_info_css_to_host(
 	param_pin_css_to_host(&resp_info_css->process_group_light,
 				&resp_info_host->process_group_light);
 	resp_info_host->acc_id = resp_info_css->acc_id;
+	resp_info_host->frame_counter = resp_info_css->frame_counter;
+	resp_info_host->written_direct = resp_info_css->written_direct;
 }
 
 /*
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.h
index c91aac6..bfa58f3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_private.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public.c
index 1ceb53d..bec4a7b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.c
index 050a31c..3f0c1e2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -357,17 +357,21 @@ int print_isys_resp_info(struct ia_css_isys_resp_info *received_response)
 		received_response->stream_handle,
 		received_response->timestamp[0],
 		received_response->timestamp[1]);
-	IA_CSS_TRACE_5(ISYSAPI, VERBOSE,
+	IA_CSS_TRACE_7(ISYSAPI, VERBOSE,
 		"\tia_css_isys_resp_info.error = %d\n"
 		"\t\t\tia_css_isys_resp_info.error_details = %d\n"
 		"\t\t\tia_css_isys_resp_info.pin.out_buf_id = %016llxu\n"
 		"\t\t\tia_css_isys_resp_info.pin.addr = %016llxu\n"
-		"\t\t\tia_css_isys_resp_info.pin_id = %d\n",
+		"\t\t\tia_css_isys_resp_info.pin_id = %d\n"
+		"\t\t\tia_css_isys_resp_info.frame_counter = %d\n,"
+		"\t\t\tia_css_isys_resp_info.written_direct = %d\n",
 		received_response->error,
 		received_response->error_details,
 		(unsigned long long)received_response->pin.out_buf_id,
 		(unsigned long long)received_response->pin.addr,
-		received_response->pin_id);
+		received_response->pin_id,
+		received_response->frame_counter,
+		received_response->written_direct);
 	IA_CSS_TRACE_0(ISYSAPI, VERBOSE,
 		"------------------------------------------------------\n");
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.h
index bce9f09..641e0b8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isys_public_trace.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isysapi_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isysapi_trace.h
index 599e23f8..6ee33ed 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isysapi_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/isysapi/src/ia_css_isysapi_trace.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir.h
index 4de6db3..e3dc093 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -90,7 +90,7 @@ void *ia_css_pkg_dir_get_entry_address(
 	uint32_t index
 );
 
-#ifdef _IA_CSS_PKG_DIR_INLINE_
+#ifdef __IA_CSS_PKG_DIR_INLINE__
 
 #include "ia_css_pkg_dir_impl.h"
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_iunit.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_iunit.h
index 0f4ebc0..9f19027 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_iunit.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_iunit.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
index a345441..f9d5b04 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -18,7 +18,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PKG_DIR_INLINE_
+#ifndef __IA_CSS_PKG_DIR_INLINE__
 #define IA_CSS_PKG_DIR_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PKG_DIR_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_types.h
index 476e8f8..b42ebe5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/interface/ia_css_pkg_dir_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/pkg_dir.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/pkg_dir.mk
index c3c3b1b..b5d8862 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/pkg_dir.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/pkg_dir.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir.c
index c277b22..1c4a8d8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,7 +12,7 @@
 * more details.
 */
 
-#ifdef _IA_CSS_PKG_DIR_INLINE_
+#ifdef __IA_CSS_PKG_DIR_INLINE__
 
 #include "storage_class.h"
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_impl.h
index 9c27630..710904a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_int.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_int.h
index f1b2500..74e5650 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_int.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/pkg_dir/src/ia_css_pkg_dir_int.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/port_env_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/port_env_struct.h
index 5f7cc83..013fc8a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/port_env_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/port_env_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue.h
index 921e89e..67411aa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue_struct.h
index 9fc1027..e351bd5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/queue_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port.h
index 7948131..658c56d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port_struct.h
index 5f9950d..b1789f3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/recv_port_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port.h
index 7f5fad9..d7f3e30 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port_struct.h
index 2d96fed..36ebf44 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/interface/send_port_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/port.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/port.mk
index 1b682f4..ea32ef9 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/port.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/port.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/queue.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/queue.c
index 8650366..00d99fd 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/queue.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/queue.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/recv_port.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/recv_port.c
index e96cd6f..dd99794 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/recv_port.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/recv_port.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/send_port.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/send_port.c
index 9573def..4854d98 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/send_port.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/port/src/send_port.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
index 02f068a..dfac55e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
index 6b02467..a2e502e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/isys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/reg_dump_generic_bridge.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/reg_dump_generic_bridge.c
index 5c9dfea..97c48d5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/reg_dump_generic_bridge.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/reg_dump/src/reg_dump_generic_bridge.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/interface/regmem_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/interface/regmem_access.h
index 8bcac94..2c7c5c6 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/interface/regmem_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/interface/regmem_access.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/regmem.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/regmem.mk
index 8555221..8fdfba4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/regmem.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/regmem.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_access_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_access_host.h
index 25c4333..422c7d7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_access_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_access_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_const.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_const.h
index 13ea3f6..d296e4c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_const.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/regmem/src/regmem_const.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/assert_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/assert_support.h
index 3893222..06be58f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/assert_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/assert_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/cpu_mem_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/cpu_mem_support.h
index 9fbea90..d5ccbbb4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/cpu_mem_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/cpu_mem_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/error_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/error_support.h
index 385bc58..7835d9b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/error_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/error_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -53,7 +53,7 @@ do {                                \
 	}                               \
 } while (0)
 
-#define verifexit(cond, error_tag)  \
+#define verifexit(cond)  \
 do {                               \
 	if (!(cond)) {              \
 		goto EXIT;         \
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/math_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/math_support.h
index 5e6b124..d5da965 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/math_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/math_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/misc_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/misc_support.h
index 9c618a9..ccb4ace 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/misc_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/misc_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/platform_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/platform_support.h
index 70ecabf..9073373 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/platform_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/platform_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/print_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/print_support.h
index 827f4ce..e683fed 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/print_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/print_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/storage_class.h
index e767c56..5baa8ca 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/type_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/type_support.h
index 3c937ae..7f01c19 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/type_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/support/type_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom.h
index 0b5a289..187781a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom_config.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom_config.h
index 2ab4c24..3213d72 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom_config.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/interface/ia_css_syscom_config.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom.c
index 964d363..5172413 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_config_fw.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_config_fw.h
index 6f63c46..fef3ca7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_config_fw.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_config_fw.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_context.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_context.h
index 705ba94..de34529 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_context.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/src/ia_css_syscom_context.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/syscom.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/syscom.mk
index 6f1b70e..5d584c1 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/syscom.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/syscom/syscom.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/interface/ia_css_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/interface/ia_css_trace.h
index a76ba86..22b7173 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/interface/ia_css_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/interface/ia_css_trace.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/trace.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/trace.mk
index 35d05cf..bd35af0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/trace.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/trace/trace.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/utils/system_defs/system_const.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/utils/system_defs/system_const.h
index 03054c08..277acb2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/utils/system_defs/system_const.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/utils/system_defs/system_const.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_access.h
index fd8e33f..d3b8faa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_access.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_map.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_map.h
index 18189cd..5d39063 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_map.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/shared_memory_map.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_config.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_config.h
index 2ecac68..6d7b387 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_config.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_config.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_memory_access_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_memory_access_types.h
index 0f4c49e..3ab3271 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_memory_access_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_memory_access_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access.h
index 08bcb6e..d52b4e3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_initialization.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_initialization.h
index 5fa588f..63a5843 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_initialization.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_initialization.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_types.h
index 5ada29c..94fcd4e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_subsystem_access_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_types.h
index 2a5db83..f307224 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600/vied/vied/vied_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/Makefile b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/Makefile
index 2190aaa..ae7fdfc 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/Makefile
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/Makefile
@@ -1,5 +1,5 @@
 #
-#  Copyright (c) 2010 - 2016, Intel Corporation.
+#  Copyright (c) 2010 - 2017, Intel Corporation.
 #
 #  This program is free software; you can redistribute it and/or modify it
 #  under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_FULL_program_group/ia_css_fw_pkg_release.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_FULL_program_group/ia_css_fw_pkg_release.h
new file mode 100644
index 0000000..e3cc37b
--- /dev/null
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_FULL_program_group/ia_css_fw_pkg_release.h
@@ -0,0 +1,14 @@
+/*
+* Support for Intel Camera Imaging ISP subsystem.
+* Copyright (c) 2010 - 2017, Intel Corporation.
+*
+* This program is free software; you can redistribute it and/or modify it
+* under the terms and conditions of the GNU General Public License,
+* version 2, as published by the Free Software Foundation.
+*
+* This program is distributed in the hope it will be useful, but WITHOUT
+* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
+* more details.
+*/
+#define IA_CSS_FW_PKG_RELEASE  0x20170225
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_program_group/ia_css_fw_pkg_release.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_program_group/ia_css_fw_pkg_release.h
new file mode 100644
index 0000000..e3cc37b
--- /dev/null
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/TSD_program_group/ia_css_fw_pkg_release.h
@@ -0,0 +1,14 @@
+/*
+* Support for Intel Camera Imaging ISP subsystem.
+* Copyright (c) 2010 - 2017, Intel Corporation.
+*
+* This program is free software; you can redistribute it and/or modify it
+* under the terms and conditions of the GNU General Public License,
+* version 2, as published by the Free Software Foundation.
+*
+* This program is distributed in the hope it will be useful, but WITHOUT
+* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
+* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
+* more details.
+*/
+#define IA_CSS_FW_PKG_RELEASE  0x20170225
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/buffer.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/buffer.mk
index 9d38aba..f1eb5e7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/buffer.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/buffer.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_access.h
index 30b3dbc..b6aa1b2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_access.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_type.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_type.h
index b072c59..ba6a2bf 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_type.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/buffer_type.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_buffer_address.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_buffer_address.h
index c8b044b..a834f05 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_buffer_address.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_buffer_address.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer.h
index ba068a0..04cdcdb 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer_cpu.h
index 835ba0e..9875ae0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_input_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer.h
index 35b2970..567fa84 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer_cpu.h
index ff6cdab..344a214 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_output_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer.h
index a55a458..c075d7c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -29,4 +29,4 @@ typedef struct ia_css_buffer_s *ia_css_shared_buffer;
 typedef void *ia_css_shared_buffer_cpu_address;
 typedef ia_css_buffer_address	ia_css_shared_buffer_css_address;
 
-#endif /*__IA_CSS_SHARED_BUFFER_H*/
+#endif /* __IA_CSS_SHARED_BUFFER_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer_cpu.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer_cpu.h
index 80f88c3..1ba8ba4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer_cpu.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/interface/ia_css_shared_buffer_cpu.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -48,4 +48,4 @@ ia_css_shared_buffer_css_update(vied_memory_t mid, ia_css_shared_buffer b);
 ia_css_shared_buffer
 ia_css_shared_buffer_cpu_update(vied_memory_t mid, ia_css_shared_buffer b);
 
-#endif /*__IA_CSS_SHARED_BUFFER_CPU_H */
+#endif /* __IA_CSS_SHARED_BUFFER_CPU_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/buffer_access.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/buffer_access.c
index 5c5501c..0682738 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/buffer_access.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/buffer_access.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.c
index c4cbcb6..cc39041 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.h
index a725da1..529ab37 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_buffer.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -55,4 +55,4 @@ ia_css_buffer_free(
 	vied_memory_t mid,
 	ia_css_buffer_t b);
 
-#endif /*__IA_CSS_BUFFER_H */
+#endif /* __IA_CSS_BUFFER_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_input_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_input_buffer.c
index 6b33738..c75cb75 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_input_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_input_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_output_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_output_buffer.c
index 861cb23..9c9b470 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_output_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_output_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_shared_buffer.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_shared_buffer.c
index dae63a9..deb3f25 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_shared_buffer.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/buffer/src/cpu/ia_css_shared_buffer.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/cell.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/cell.mk
index 6b622da..61d974c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/cell.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/cell.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/interface/ia_css_cell.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/interface/ia_css_cell.h
index 7c142c5..2869708 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/interface/ia_css_cell.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/interface/ia_css_cell.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/src/ia_css_cell_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/src/ia_css_cell_impl.h
index 7952196..1478998c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/src/ia_css_cell_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cell/src/ia_css_cell_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg.h
index 2bc3ca9..f187cca 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -52,7 +52,7 @@ int ia_css_client_pkg_get_prog_desc_entry_offset_size(
 	uint32_t *offset,
 	uint32_t *size);
 
-#ifdef _INLINE_CLIENT_PKG_
+#ifdef __INLINE_CLIENT_PKG__
 #include "ia_css_client_pkg_impl.h"
 #endif
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_storage_class.h
index c58e482..1508e6b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _INLINE_CLIENT_PKG_
+#ifndef __INLINE_CLIENT_PKG__
 #define IA_CSS_CLIENT_PKG_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_CLIENT_PKG_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_types.h
index b39ccaa..2a51c62 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/interface/ia_css_client_pkg_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg.c
index 4e5a243..88c75c7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,9 +12,9 @@
 * more details.
 */
 
-#ifdef _INLINE_CLIENT_PKG_
+#ifdef __INLINE_CLIENT_PKG__
 #include "storage_class.h"
 STORAGE_CLASS_INLINE int __ia_css_client_pkg_avoid_warning_on_empty_file(void) { return 0; }
-#else /* _INLINE_CLIENT_PKG_ */
+#else /* __INLINE_CLIENT_PKG__ */
 #include "ia_css_client_pkg_impl.h"
-#endif /* _INLINE_CLIENT_PKG_ */
+#endif /* __INLINE_CLIENT_PKG__ */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg_impl.h
index 897f3fd..76797ac 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/client_pkg/src/ia_css_client_pkg_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/psys/subsystem_bxtB0.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/psys/subsystem_bxtB0.mk
index f0d3ed7..ece23aa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/psys/subsystem_bxtB0.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/psys/subsystem_bxtB0.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/system_bxtB0.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/system_bxtB0.mk
index ac8f60e..066c6ea 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/system_bxtB0.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/config/system_bxtB0.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/cpd_component.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/cpd_component.mk
index ceed436..da66a70 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/cpd_component.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/cpd_component.mk
@@ -1,7 +1,7 @@
 ##
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/interface/ia_css_cpd_component_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/interface/ia_css_cpd_component_types.h
index 68a1e7d..cb0990d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/interface/ia_css_cpd_component_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_component/interface/ia_css_cpd_component_types.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/cpd_metadata.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/cpd_metadata.mk
index a449228..b9f8445 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/cpd_metadata.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/cpd_metadata.mk
@@ -1,7 +1,7 @@
 ##
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/interface/ia_css_cpd_metadata_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/interface/ia_css_cpd_metadata_types.h
index 9a37821..aa7e619 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/interface/ia_css_cpd_metadata_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/cpd/cpd_metadata/interface/ia_css_cpd_metadata_types.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/device_access.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/device_access.mk
index f3047ec..bbab8ab 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/device_access.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/device_access.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_cmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_cmem.h
index 54f9988..88eb062 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_cmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_cmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_CMEM_H_
-#define _IA_CSS_CMEM_H_
+#ifndef __IA_CSS_CMEM_H
+#define __IA_CSS_CMEM_H
 
 #include "type_support.h"
 #include "storage_class.h"
@@ -55,4 +55,4 @@ ia_css_cmem_get_cmem_addr_from_dmem(unsigned int base_addr, void *p);
 #include "ia_css_cmem_host.h"
 #endif
 
-#endif
+#endif /* __IA_CSS_CMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem.h
index d1ba09e..0e335d18 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_H_
-#define _IA_CSS_XMEM_H_
+#ifndef __IA_CSS_XMEM_H
+#define __IA_CSS_XMEM_H
 
 #include "type_support.h"
 #include "storage_class.h"
@@ -62,4 +62,4 @@ ia_css_xmem_store(unsigned int mmid, ia_css_xmem_address_t address,
 #include "ia_css_xmem_host.h"
 #endif
 
-#endif /* _IA_CSS_XMEM_H_ */
+#endif /* __IA_CSS_XMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem_cmem.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem_cmem.h
index cffe6e5..250cdba 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem_cmem.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/interface/ia_css_xmem_cmem.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_CMEM_H_
-#define _IA_CSS_XMEM_CMEM_H_
+#ifndef __IA_CSS_XMEM_CMEM_H
+#define __IA_CSS_XMEM_CMEM_H
 
 #include "ia_css_cmem.h"
 #include "ia_css_xmem.h"
@@ -32,4 +32,4 @@ ia_css_xmem_to_cmem_copy(
 /* include inline implementation */
 #include "ia_css_xmem_cmem_impl.h"
 
-#endif /* _IA_CSS_XMEM_CMEM_H_ */
+#endif /* __IA_CSS_XMEM_CMEM_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_cmem_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_cmem_host.h
index 159f654..015ef9e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_cmem_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_cmem_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_CMEM_HOST_H_
-#define _IA_CSS_CMEM_HOST_H_
+#ifndef __IA_CSS_CMEM_HOST_H
+#define __IA_CSS_CMEM_HOST_H
 
 /* This file is an inline implementation for the interface ia_css_cmem.h
  * and should only be included there. */
@@ -107,4 +107,4 @@ ia_css_cmem_get_cmem_addr_from_dmem(unsigned int base_addr, void *p)
 	return (ia_css_cmem_address_t)(uintptr_t)p;
 }
 
-#endif
+#endif /* __IA_CSS_CMEM_HOST_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_cmem_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_cmem_impl.h
index 45a42ed..76174a0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_cmem_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_cmem_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_CMEM_IMPL_H_
-#define _IA_CSS_XMEM_CMEM_IMPL_H_
+#ifndef __IA_CSS_XMEM_CMEM_IMPL_H
+#define __IA_CSS_XMEM_CMEM_IMPL_H
 
 #include "ia_css_xmem_cmem.h"
 
@@ -76,4 +76,4 @@ ia_css_cmem_to_xmem_copy(
 }
 
 
-#endif /* _IA_CSS_XMEM_CMEM_IMPLH_ */
+#endif /* __IA_CSS_XMEM_CMEM_IMPL_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_host.h
index f0fd9db..020cb43 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/device_access/src/ia_css_xmem_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
 */
 
-#ifndef _IA_CSS_XMEM_HOST_H_
-#define _IA_CSS_XMEM_HOST_H_
+#ifndef __IA_CSS_XMEM_HOST_H
+#define __IA_CSS_XMEM_HOST_H
 
 #include "ia_css_xmem.h"
 #include <vied/shared_memory_access.h>
@@ -81,4 +81,4 @@ ia_css_xmem_store(unsigned int mmid, ia_css_xmem_address_t address,
 	shared_memory_store(mmid, address, data, bytes);
 }
 
-#endif /* _IA_CSS_XMEM_HOST_H_ */
+#endif /* __IA_CSS_XMEM_HOST_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_buttress_properties_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_buttress_properties_struct.h
index ea5a55b..3207637 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_buttress_properties_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_buttress_properties_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties.h
index d643932..98e5446 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_func.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_func.h
index 617e30c..5825a88 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_func.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_func.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_struct.h
index 0f16c23..c13cd76 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_properties_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_type_properties.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_type_properties.h
index 7dbd63c..b1adc38 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_type_properties.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_cell_type_properties.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties.h
index 7cd96a8..8c8e3d6 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties_types.h
index 3d6905a..64cab55 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/interface/ipu_device_gp_properties_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_acb_devices.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_acb_devices.h
index 205d1fa..763ba39 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_acb_devices.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_acb_devices.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_devices.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_devices.h
index e8f5e0a..eb6220f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_devices.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_devices.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_defs.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_defs.h
index a679b41..67b6a6d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_defs.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_defs.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_impl.h
index 83f1e7f..42db852 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_cell_properties_impl.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_ff_devices.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_ff_devices.h
index 4730e09..7f97794 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_ff_devices.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_ff_devices.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_gp_devices.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_gp_devices.h
index dad170c..4c7ff0c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_gp_devices.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/psys/bxtB0/ipu_device_gp_devices.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_isp2600_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_isp2600_properties_impl.h
index 0a97f41..89723ba 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_isp2600_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_isp2600_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_control_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_control_properties_impl.h
index c129ade..76c6869 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_control_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_control_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_fp_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_fp_properties_impl.h
index 470e2b5..54dc290 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_fp_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_fp_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_proxy_properties_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_proxy_properties_impl.h
index 9ba9712..8c71096 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_proxy_properties_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/devices/src/ipu_device_sp2600_proxy_properties_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/fw_abi_cpu_types.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/fw_abi_cpu_types.mk
index fd245f9..cccfb21 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/fw_abi_cpu_types.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/fw_abi_cpu_types.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_base_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_base_types.h
index 8aefc56..1e2adee 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_base_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_base_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -19,14 +19,14 @@
 #include "type_support.h"
 #include "ia_css_terminal_defs.h"
 
-#define	N_UINT16_IN_TERMINAL_STRUCT	3
-#define N_PADDING_UINT8_IN_TERMINAL_STRUCT 5
+#define N_UINT16_IN_TERMINAL_STRUCT		3
+#define N_PADDING_UINT8_IN_TERMINAL_STRUCT	5
 
-#define	SIZE_OF_TERMINAL_STRUCT_BITS \
+#define SIZE_OF_TERMINAL_STRUCT_BITS \
 	(IA_CSS_TERMINAL_TYPE_BITS \
 	+ IA_CSS_TERMINAL_ID_BITS  \
-	+ (N_UINT16_IN_TERMINAL_STRUCT * 16) \
-	+ (N_PADDING_UINT8_IN_TERMINAL_STRUCT * 8))
+	+ N_UINT16_IN_TERMINAL_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_PADDING_UINT8_IN_TERMINAL_STRUCT * IA_CSS_UINT8_T_BITS)
 
 /* ==================== Base Terminal - START ==================== */
 struct ia_css_terminal_s {						/**< Base terminal */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_manifest_base_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_manifest_base_types.h
index d8f350c..04ae46d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_manifest_base_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/cpu/ia_css_terminal_manifest_base_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_base_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_base_types.h
index 6d3fc50..b705a37 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_base_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_base_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_terminal_defs.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_terminal_defs.h
index dccba5d..67b6e40 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_terminal_defs.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/fw_abi_common_types/ia_css_terminal_defs.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir.h
index 4de6db3..e3dc093 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -90,7 +90,7 @@ void *ia_css_pkg_dir_get_entry_address(
 	uint32_t index
 );
 
-#ifdef _IA_CSS_PKG_DIR_INLINE_
+#ifdef __IA_CSS_PKG_DIR_INLINE__
 
 #include "ia_css_pkg_dir_impl.h"
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_iunit.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_iunit.h
index 0f4ebc0..9f19027 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_iunit.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_iunit.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
index a345441..f9d5b04 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -18,7 +18,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PKG_DIR_INLINE_
+#ifndef __IA_CSS_PKG_DIR_INLINE__
 #define IA_CSS_PKG_DIR_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PKG_DIR_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_types.h
index 476e8f8..b42ebe5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/interface/ia_css_pkg_dir_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/pkg_dir.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/pkg_dir.mk
index c3c3b1b..b5d8862 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/pkg_dir.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/pkg_dir.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir.c
index c277b22..1c4a8d8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,7 +12,7 @@
 * more details.
 */
 
-#ifdef _IA_CSS_PKG_DIR_INLINE_
+#ifdef __IA_CSS_PKG_DIR_INLINE__
 
 #include "storage_class.h"
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_impl.h
index 9c27630..710904a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_int.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_int.h
index f1b2500..74e5650 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_int.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/pkg_dir/src/ia_css_pkg_dir_int.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/port_env_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/port_env_struct.h
index 5f7cc83..013fc8a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/port_env_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/port_env_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue.h
index 921e89e..67411aa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue_struct.h
index 9fc1027..e351bd5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/queue_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port.h
index 7948131..658c56d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port_struct.h
index 5f9950d..b1789f3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/recv_port_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port.h
index 7f5fad9..d7f3e30 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port_struct.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port_struct.h
index 2d96fed..36ebf44 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port_struct.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/interface/send_port_struct.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/port.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/port.mk
index 1b682f4..ea32ef9 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/port.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/port.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/queue.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/queue.c
index 8650366..00d99fd 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/queue.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/queue.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/recv_port.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/recv_port.c
index e96cd6f..dd99794 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/recv_port.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/recv_port.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/send_port.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/send_port.c
index 9573def..4854d98 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/send_port.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/port/src/send_port.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_private_pg/interface/ia_css_psys_private_pg_data.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_private_pg/interface/ia_css_psys_private_pg_data.h
index bad74a02..6458e72 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_private_pg/interface/ia_css_psys_private_pg_data.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_private_pg/interface/ia_css_psys_private_pg_data.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -23,7 +23,7 @@
 #define PRIV_CONF_INVALID	0xFF
 
 struct ia_css_psys_private_pg_data {
-	vied_nci_acb_route_t acb_route[IPU_DEVICE_ACB_NUM_ACB];
+	nci_acb_route_t acb_route[IPU_DEVICE_ACB_NUM_ACB];
 	uint8_t psa_mux_conf[IPU_DEVICE_GP_PSA_MUX_NUM_MUX];
 	uint8_t isa_mux_conf[IPU_DEVICE_GP_ISA_STATIC_MUX_NUM_MUX];
 };
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/interface/ia_css_bxt_spctrl_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/interface/ia_css_bxt_spctrl_trace.h
index 558c195..eb41fb7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/interface/ia_css_bxt_spctrl_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/interface/ia_css_bxt_spctrl_trace.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/psys_server.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/psys_server.mk
index 94aa4a0..e3a11dd 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/psys_server.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/psys_server.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/src/bxt_spctrl_process_group_cmd_impl.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/src/bxt_spctrl_process_group_cmd_impl.c
index 4271856..7682185 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/src/bxt_spctrl_process_group_cmd_impl.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psys_server/src/bxt_spctrl_process_group_cmd_impl.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -65,23 +65,22 @@ int ia_css_process_group_exec_cmd(
 	IA_CSS_TRACE_0(BXT_SPCTRL, INFO,
 		"ia_css_process_group_exec_cmd(): enter:\n");
 
-	verifexit(process_group != NULL, EINVAL);
+	verifexit(process_group != NULL);
 
 	state = ia_css_process_group_get_state(process_group);
 
-	verifexit(state != IA_CSS_PROCESS_GROUP_ERROR, EINVAL);
-	verifexit(state < IA_CSS_N_PROCESS_GROUP_STATES, EINVAL);
+	verifexit(state != IA_CSS_PROCESS_GROUP_ERROR);
+	verifexit(state < IA_CSS_N_PROCESS_GROUP_STATES);
 
 	switch (cmd) {
 	case IA_CSS_PROCESS_GROUP_CMD_SUBMIT:
 
 		IA_CSS_TRACE_0(BXT_SPCTRL, INFO,
 			"ia_css_process_group_exec_cmd(): IA_CSS_PROCESS_GROUP_CMD_SUBMIT:\n");
-		verifexit(state == IA_CSS_PROCESS_GROUP_READY, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_GROUP_READY);
 
 		/* External resource availability checks */
-		verifexit(ia_css_can_process_group_submit(process_group),
-			EINVAL);
+		verifexit(ia_css_can_process_group_submit(process_group));
 
 		process_group->state = IA_CSS_PROCESS_GROUP_BLOCKED;
 		break;
@@ -89,11 +88,10 @@ int ia_css_process_group_exec_cmd(
 
 		IA_CSS_TRACE_0(BXT_SPCTRL, INFO,
 			"ia_css_process_group_exec_cmd(): IA_CSS_PROCESS_GROUP_CMD_START:\n");
-		verifexit(state == IA_CSS_PROCESS_GROUP_BLOCKED, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_GROUP_BLOCKED);
 
 		/* External resource state checks */
-		verifexit(ia_css_can_process_group_start(process_group),
-			EINVAL);
+		verifexit(ia_css_can_process_group_start(process_group));
 
 		process_group->state = IA_CSS_PROCESS_GROUP_STARTED;
 		break;
@@ -101,23 +99,22 @@ int ia_css_process_group_exec_cmd(
 
 		IA_CSS_TRACE_0(BXT_SPCTRL, INFO,
 			"ia_css_process_group_exec_cmd(): IA_CSS_PROCESS_GROUP_CMD_DISOWN:\n");
-		verifexit(state == IA_CSS_PROCESS_GROUP_STARTED, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_GROUP_STARTED);
 
 		cmd_queue_full = ia_css_is_psys_cmd_queue_full(psys_syscom,
 					IA_CSS_PSYS_CMD_QUEUE_COMMAND_ID);
 		retval = EBUSY;
-		verifexit(cmd_queue_full == false, EBUSY);
+		verifexit(cmd_queue_full == false);
 
 		psys_cmd.command = IA_CSS_PROCESS_GROUP_CMD_START;
 		psys_cmd.msg = 0;
 		psys_cmd.process_group = process_group->ipu_virtual_address;
 
-		verifexit(ia_css_process_group_print(process_group, NULL) == 0,
-			EINVAL);
+		verifexit(ia_css_process_group_print(process_group, NULL) == 0);
 
 		retval = ia_css_psys_cmd_queue_send(psys_syscom,
 				IA_CSS_PSYS_CMD_QUEUE_COMMAND_ID, &psys_cmd);
-		verifexit(retval > 0, EINVAL);
+		verifexit(retval > 0);
 		break;
 	case IA_CSS_PROCESS_GROUP_CMD_ABORT:
 
@@ -127,12 +124,12 @@ int ia_css_process_group_exec_cmd(
 		/* Once the flushing of shared buffers is fixed this verifexit
 		 * should be changed to be state = IA_CSS_PROCESS_GROUP_STARTED
 		 */
-		verifexit(state == IA_CSS_PROCESS_GROUP_BLOCKED, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_GROUP_BLOCKED);
 
 		cmd_queue_full = ia_css_is_psys_cmd_queue_full(psys_syscom,
 					IA_CSS_PSYS_CMD_QUEUE_COMMAND_ID);
 		retval = EBUSY;
-		verifexit(cmd_queue_full == false, EBUSY);
+		verifexit(cmd_queue_full == false);
 
 		psys_cmd.command = IA_CSS_PROCESS_GROUP_CMD_ABORT;
 		psys_cmd.msg = 0;
@@ -140,10 +137,10 @@ int ia_css_process_group_exec_cmd(
 
 		retval = ia_css_psys_cmd_queue_send(psys_syscom,
 				IA_CSS_PSYS_CMD_QUEUE_COMMAND_ID, &psys_cmd);
-		verifexit(retval > 0, EINVAL);
+		verifexit(retval > 0);
 		break;
 	default:
-		verifexit(false, EINVAL);
+		verifexit(false);
 		break;
 	}
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data.h
index 1b8ecd3..d065bfa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -382,8 +382,8 @@ size_t ia_css_sizeof_frame_descriptor(
 extern size_t ia_css_sizeof_kernel_param_descriptor(
 	const uint16_t section_count);
 
-#ifdef _IA_CSS_PSYS_DATA_INLINE_
+#ifdef __IA_CSS_PSYS_DATA_INLINE__
 #include "ia_css_program_group_data_impl.h"
-#endif /* _IA_CSS_PSYS_DATA_INLINE_ */
+#endif /* __IA_CSS_PSYS_DATA_INLINE__ */
 
 #endif /* __IA_CSS_PROGRAM_GROUP_DATA_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data_defs.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data_defs.h
index 6594f8d..fcdf78f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data_defs.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_program_group_data_defs.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_storage_class.h
index 64bc8ab..8976b3a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_storage_class.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PSYS_DATA_INLINE_
+#ifndef __IA_CSS_PSYS_DATA_INLINE__
 #define IA_CSS_PSYS_DATA_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PSYS_DATA_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_trace.h
index c9fece7..4dea65e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/interface/ia_css_psys_data_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data.c
index 338bb41..0a853d1 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -18,9 +18,9 @@
  * Functions to possibly inline
  */
 
-#ifdef _IA_CSS_PSYS_DATA_INLINE_
+#ifdef __IA_CSS_PSYS_DATA_INLINE__
 STORAGE_CLASS_INLINE int
 __ia_css_program_group_data_avoid_warning_on_empty_file(void) { return 0; }
-#else /* _IA_CSS_PSYS_DATA_INLINE_ */
+#else /* __IA_CSS_PSYS_DATA_INLINE__ */
 #include "ia_css_program_group_data_impl.h"
-#endif /* _IA_CSS_PSYS_DATA_INLINE_ */
+#endif /* __IA_CSS_PSYS_DATA_INLINE__ */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data_impl.h
index b36fd3c..e714ca3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/data/src/ia_css_program_group_data_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -31,7 +31,7 @@ int ia_css_frame_print(
 
 	IA_CSS_TRACE_0(PSYSAPI_DATA, INFO, "ia_css_frame_print(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 
 	IA_CSS_TRACE_1(PSYSAPI_DATA, INFO,
 		"\tbuffer = %d\n", ia_css_frame_get_buffer(frame));
@@ -64,7 +64,7 @@ const vied_vaddress_t *ia_css_frame_get_buffer_host_virtual_address(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_get_buffer_host_virtual_address(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	return &(frame->data);
 
 EXIT:
@@ -84,7 +84,7 @@ vied_vaddress_t	ia_css_frame_get_buffer(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_get_buffer(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	buffer = frame->data;
 
 EXIT:
@@ -105,7 +105,7 @@ int ia_css_frame_set_buffer(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_set_buffer(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	frame->data = buffer;
 
 	retval = 0;
@@ -127,7 +127,7 @@ int ia_css_frame_set_data_bytes(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_set_data_bytes(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	frame->data_bytes = size;
 
 	retval = 0;
@@ -148,7 +148,7 @@ ia_css_buffer_state_t ia_css_frame_get_buffer_state(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_get_buffer_state(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	buffer_state = frame->buffer_state;
 
 EXIT:
@@ -169,7 +169,7 @@ int ia_css_frame_set_buffer_state(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_set_buffer_state(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	frame->buffer_state = buffer_state;
 
 	retval = 0;
@@ -190,7 +190,7 @@ ia_css_pointer_state_t ia_css_frame_get_pointer_state(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_get_pointer_state(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	pointer_state = frame->pointer_state;
 
 EXIT:
@@ -211,7 +211,7 @@ int ia_css_frame_set_pointer_state(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		"ia_css_frame_set_pointer_state(): enter:\n");
 
-	verifexit(frame != NULL, EINVAL);
+	verifexit(frame != NULL);
 	frame->pointer_state = pointer_state;
 
 	retval = 0;
@@ -239,7 +239,7 @@ int ia_css_frame_descriptor_print(
 
 	COMPILATION_ERROR_IF(IA_CSS_N_DATA_DIMENSION <= 0);
 
-	verifexit(frame_descriptor != NULL, EINVAL);
+	verifexit(frame_descriptor != NULL);
 
 	IA_CSS_TRACE_0(PSYSAPI_DATA, INFO,
 		"ia_css_frame_descriptor_print(): enter:\n");
@@ -263,7 +263,7 @@ int ia_css_frame_descriptor_print(
 	 * ia_css_frame_plane_count(frame_descriptor->frame_format_type);
 	 */
 
-	verifexit(frame_plane_count > 0, EINVAL);
+	verifexit(frame_plane_count > 0);
 
 	IA_CSS_TRACE_1(PSYSAPI_DATA, INFO,
 		"\tplane_offsets[%d]: [\n", frame_plane_count);
@@ -315,7 +315,7 @@ int ia_css_fragment_descriptor_print(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, INFO,
 		"ia_css_fragment_descriptor_print(): enter:\n");
 
-	verifexit(fragment_descriptor != NULL, EINVAL);
+	verifexit(fragment_descriptor != NULL);
 
 	IA_CSS_TRACE_1(PSYSAPI_DATA, INFO,
 		"dimension[%d] = {\n", IA_CSS_N_DATA_DIMENSION);
@@ -391,7 +391,7 @@ size_t ia_css_sizeof_frame_descriptor(
 	IA_CSS_TRACE_0(PSYSAPI_DATA, VERBOSE,
 		       "ia_css_sizeof_frame_descriptor(): enter:\n");
 
-	verifexit(plane_count > 0, EINVAL);
+	verifexit(plane_count > 0);
 	size += sizeof(ia_css_frame_descriptor_t);
 	size += plane_count * sizeof(uint32_t);
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device.h
index a1a031b..a81ddcb 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device_trace.h
index 17239e2..9534e55 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_device_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_init.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_init.h
index 139f9c5..5a8af90 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_init.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_init.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_transport.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_transport.h
index 3c8b276..d857033 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_transport.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/interface/ia_css_psys_transport.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/src/ia_css_psys_device.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/src/ia_css_psys_device.c
index 7feee36..683abdb 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/src/ia_css_psys_device.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/device/src/ia_css_psys_device.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -51,7 +51,7 @@ int ia_css_psys_config_print(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, INFO, "ia_css_frame_print(): enter:\n");
 
-	verifexit(config != NULL, EINVAL);
+	verifexit(config != NULL);
 
 	retval = 0;
 EXIT:
@@ -72,7 +72,7 @@ int ia_css_psys_print(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, INFO, "ia_css_psys_print(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	retval = 0;
 EXIT:
@@ -163,7 +163,7 @@ bool ia_css_psys_open_is_ready(
 	unsigned int i;
 	int syscom_retval;
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	for (i = 0; i < IA_CSS_N_PSYS_CMD_QUEUE_ID; i++) {
 		syscom_retval = ia_css_syscom_send_port_open(context, i);
@@ -277,11 +277,11 @@ bool ia_css_is_psys_cmd_queue_full(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_is_psys_cmd_queue_full(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_send_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	is_full = (num_tokens == 0);
 	retval = 0;
@@ -304,11 +304,11 @@ bool ia_css_is_psys_cmd_queue_not_full(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_is_psys_cmd_queue_not_full(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_send_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	is_not_full = (num_tokens != 0);
 	retval = 0;
@@ -331,11 +331,11 @@ bool ia_css_has_psys_cmd_queue_N_space(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_has_psys_cmd_queue_N_space(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_send_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	has_N_space = ((unsigned int)num_tokens >= N);
 EXIT:
@@ -355,11 +355,11 @@ int ia_css_psys_cmd_queue_get_available_space(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_cmd_queue_get_available_space(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_send_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	N_space = (int)(num_tokens);
 EXIT:
@@ -378,7 +378,7 @@ bool ia_css_any_psys_event_queue_not_empty(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_any_psys_event_queue_not_empty(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	for (i = (ia_css_psys_event_queue_ID_t)0;
 		i < IA_CSS_N_PSYS_EVENT_QUEUE_ID; i++) {
@@ -400,11 +400,11 @@ bool ia_css_is_psys_event_queue_empty(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_is_psys_event_queue_empty(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_recv_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	is_empty = (num_tokens == 0);
 	retval = 0;
@@ -427,11 +427,11 @@ bool ia_css_is_psys_event_queue_not_empty(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_is_psys_event_queue_not_empty(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_recv_port_available(context,
 			(unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	is_not_empty = (num_tokens != 0);
 	retval = 0;
@@ -454,11 +454,11 @@ bool ia_css_has_psys_event_queue_N_msgs(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_has_psys_event_queue_N_msgs(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_recv_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	has_N_msgs = ((unsigned int)num_tokens >= N);
 	retval = 0;
@@ -479,11 +479,11 @@ int ia_css_psys_event_queue_get_available_msgs(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_event_queue_get_available_msgs(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	num_tokens = ia_css_syscom_recv_port_available(context,
 						       (unsigned int)id);
-	verifexit(num_tokens >= 0, EINVAL);
+	verifexit(num_tokens >= 0);
 
 	N_msgs = (int)(num_tokens);
 EXIT:
@@ -503,15 +503,15 @@ int ia_css_psys_cmd_queue_send(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_cmd_queue_send(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* The ~full check fails on receive queues */
-	verifexit(ia_css_is_psys_cmd_queue_not_full(context, id), EBUSY);
-	verifexit(cmd_msg_buffer != NULL, EINVAL);
+	verifexit(ia_css_is_psys_cmd_queue_not_full(context, id));
+	verifexit(cmd_msg_buffer != NULL);
 
 	verifexit(ia_css_syscom_send_port_transfer(context, (unsigned int)id,
-			cmd_msg_buffer) >= 0, EBUSY);
+			cmd_msg_buffer) >= 0);
 
 	count = 1;
 EXIT:
@@ -534,13 +534,13 @@ int ia_css_psys_cmd_queue_send_N(
 
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_cmd_queue_send_N(): enter:\n");
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 
 	for (count = 0; count < (int)N; count++) {
 		int count_loc = ia_css_psys_cmd_queue_send(context, id,
 					(void *)(&cmd_msg_buffer_loc[count]));
 
-		verifexit(count_loc == 1, EINVAL);
+		verifexit(count_loc == 1);
 	}
 
 EXIT:
@@ -561,13 +561,13 @@ int ia_css_psys_event_queue_receive(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_event_queue_receive(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* The ~empty check fails on send queues */
-	verifexit(ia_css_is_psys_event_queue_not_empty(context, id), EBUSY);
-	verifexit(event_msg_buffer != NULL, EINVAL);
+	verifexit(ia_css_is_psys_event_queue_not_empty(context, id));
+	verifexit(event_msg_buffer != NULL);
 
 	verifexit(ia_css_syscom_recv_port_transfer(context, (unsigned int)id,
-			event_msg_buffer) >= 0, EBUSY);
+			event_msg_buffer) >= 0);
 
 	count = 1;
 EXIT:
@@ -596,7 +596,7 @@ int ia_css_psys_event_queue_receive_N(
 		int	count_loc = ia_css_psys_event_queue_receive(context, id,
 				    (void *)(&event_msg_buffer_loc[count]));
 
-		verifexit(count_loc == 1, EINVAL);
+		verifexit(count_loc == 1);
 	}
 
 EXIT:
@@ -615,7 +615,7 @@ size_t ia_css_psys_get_size(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		"ia_css_psys_get_size(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 EXIT:
 	if (size == 0) {
@@ -634,7 +634,7 @@ unsigned int ia_css_psys_get_cmd_queue_count(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_cmd_queue_count(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	count = (unsigned int)IA_CSS_N_PSYS_CMD_QUEUE_ID;
@@ -656,7 +656,7 @@ unsigned int ia_css_psys_get_event_queue_count(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_event_queue_count(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	count = (unsigned int)IA_CSS_N_PSYS_EVENT_QUEUE_ID;
@@ -678,7 +678,7 @@ size_t ia_css_psys_get_cmd_queue_size(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_cmd_queue_size(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	queue_size = ia_css_psys_cmd_queue_cfg[id].queue_size;
@@ -699,7 +699,7 @@ size_t ia_css_psys_get_event_queue_size(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_event_queue_size(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	queue_size = ia_css_psys_event_queue_cfg[id].queue_size;
@@ -720,7 +720,7 @@ size_t ia_css_psys_get_cmd_msg_size(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_cmd_msg_size(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	msg_size = ia_css_psys_cmd_queue_cfg[id].token_size;
@@ -741,7 +741,7 @@ size_t ia_css_psys_get_event_msg_size(
 	IA_CSS_TRACE_0(PSYSAPI_DEVICE, VERBOSE,
 		       "ia_css_psys_get_event_msg_size(): enter:\n");
 
-	verifexit(context != NULL, EINVAL);
+	verifexit(context != NULL);
 	/* How can I query the context ? */
 	NOT_USED(context);
 	msg_size = ia_css_psys_event_queue_cfg[id].token_size;
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_storage_class.h
index b5f87ca..c65e509 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_storage_class.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifndef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #define IA_CSS_PSYS_DYNAMIC_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PSYS_DYNAMIC_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_trace.h
index ab79af9..f1b7946 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_dynamic_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.h
index dd9a034..b7b295c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -293,8 +293,8 @@ bool ia_css_is_process_valid(
 	const ia_css_process_t *process,
 	const ia_css_program_manifest_t *p_manifest);
 
-#ifdef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifdef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_process_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 #endif /* __IA_CSS_PSYS_PROCESS_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.kernel.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.kernel.h
index 2015bed..bb16497 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.kernel.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.kernel.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.user.h
index 2be05cc..0d88dc2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.psys.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.psys.h
index 7114366..1aff17a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.psys.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process.psys.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.h
index 824b2b0..45815a9 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -253,8 +253,8 @@ int ia_css_process_group_set_ipu_vaddress(
 	ia_css_process_group_t			*process_group,
 	vied_vaddress_t			ipu_vaddress);
 
-#ifdef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifdef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_process_group_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 #endif /* __IA_CSS_PSYS_PROCESS_GROUP_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.kernel.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.kernel.h
index 50c7948..961bb5a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.kernel.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.kernel.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.user.h
index 5fe8fe7..48f9940 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.psys.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.psys.h
index b6bd47f..4ebe24f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.psys.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group.psys.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group_cmd_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group_cmd_impl.h
index 57a817f..e7aeed3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group_cmd_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_group_cmd_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -18,22 +18,22 @@
 #include "type_support.h"
 #include "ia_css_psys_process_group.h"
 
-#define	N_UINT64_IN_PROCESS_GROUP_STRUCT			2
-#define	N_UINT32_IN_PROCESS_GROUP_STRUCT			5
-#define	N_UINT16_IN_PROCESS_GROUP_STRUCT			5
-#define	N_UINT8_IN_PROCESS_GROUP_STRUCT				3
-#define	N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT		7
+#define N_UINT64_IN_PROCESS_GROUP_STRUCT	2
+#define N_UINT32_IN_PROCESS_GROUP_STRUCT	5
+#define N_UINT16_IN_PROCESS_GROUP_STRUCT	5
+#define N_UINT8_IN_PROCESS_GROUP_STRUCT		3
+#define N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT	7
 
 #define SIZE_OF_PROCESS_GROUP_STRUCT_BITS \
-	((N_UINT64_IN_PROCESS_GROUP_STRUCT * 64) \
-	+ (N_UINT32_IN_PROCESS_GROUP_STRUCT * 32) \
+	(N_UINT64_IN_PROCESS_GROUP_STRUCT * IA_CSS_UINT64_T_BITS \
+	+ N_UINT32_IN_PROCESS_GROUP_STRUCT * IA_CSS_UINT32_T_BITS \
 	+ IA_CSS_PROGRAM_GROUP_ID_BITS \
 	+ IA_CSS_PROCESS_GROUP_STATE_BITS \
 	+ VIED_VADDRESS_BITS \
 	+ VIED_NCI_RESOURCE_BITMAP_BITS \
-	+ (N_UINT16_IN_PROCESS_GROUP_STRUCT * 16) \
-	+ (N_UINT8_IN_PROCESS_GROUP_STRUCT * 8) \
-	+ (N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT * 8))
+	+ N_UINT16_IN_PROCESS_GROUP_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_UINT8_IN_PROCESS_GROUP_STRUCT * IA_CSS_UINT8_T_BITS \
+	+ N_PADDING_UINT8_IN_PROCESS_GROUP_STRUCT * IA_CSS_UINT8_T_BITS)
 
 struct ia_css_process_group_s {
 	/**< User (callback) token / user context reference,
@@ -66,9 +66,9 @@ struct ia_css_process_group_s {
 	uint16_t fragment_state;
 	/**< Watermark to control fragment processing */
 	uint16_t fragment_limit;
-	/*< Array[process_count] of process addresses in this process group */
+	/**< Array[process_count] of process addresses in this process group */
 	uint16_t processes_offset;
-	/*< Array[terminal_count] of terminal addresses on this process group */
+	/**< Array[terminal_count] of terminal addresses on this process group */
 	uint16_t terminals_offset;
 	/**< Parameter dependent number of processes in this process group */
 	uint8_t process_count;
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_types.h
index fc89f0b..d202804 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_process_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.h
index 641aa4b..a1e6efd 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -181,8 +181,8 @@ bool ia_css_is_terminal_valid(
 	const ia_css_terminal_t		 *terminal,
 	const ia_css_terminal_manifest_t *terminal_manifest);
 
-#ifdef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifdef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_terminal_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 #endif /* __IA_CSS_PSYS_TERMINAL_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.hsys.user.h
index c9bf1c9..c7a1f54 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/interface/ia_css_psys_terminal.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process.c
index f7fd04e..bc774cb 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -20,9 +20,9 @@
  * Functions to possibly inline
  */
 
-#ifndef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifndef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_process_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 /*
  * Functions not to inline
@@ -55,8 +55,8 @@ size_t ia_css_sizeof_process(
 
 	COMPILATION_ERROR_IF(0 != sizeof(ia_css_process_t)%sizeof(uint64_t));
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	size += sizeof(ia_css_process_t);
 
@@ -95,12 +95,12 @@ ia_css_process_t *ia_css_process_create(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, INFO,
 		"ia_css_process_create(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
-	verifexit(process_raw_ptr != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
+	verifexit(process_raw_ptr != NULL);
 
 	process = (ia_css_process_t *) process_raw_ptr;
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	process->kernel_bitmap =
 		ia_css_program_manifest_get_kernel_bitmap(manifest);
@@ -113,7 +113,7 @@ ia_css_process_t *ia_css_process_create(
 
 	/* A process requires at least one input or output */
 	verifexit((program_dependency_count +
-		   terminal_dependency_count) != 0, EINVAL);
+		   terminal_dependency_count) != 0);
 
 	process_raw_ptr += sizeof(ia_css_process_t);
 	if (program_dependency_count != 0) {
@@ -136,14 +136,14 @@ ia_css_process_t *ia_css_process_create(
 
 	process->ID = ia_css_program_manifest_get_program_ID(manifest);
 
-	verifexit(process->ID != 0, EINVAL);
+	verifexit(process->ID != 0);
 
 	process->cell_dependency_count = program_dependency_count;
 	process->terminal_dependency_count = terminal_dependency_count;
 
 	process->parent_offset = 0;
 
-	verifexit(ia_css_process_clear_all(process) == 0, EINVAL);
+	verifexit(ia_css_process_clear_all(process) == 0);
 
 	process->state = IA_CSS_PROCESS_READY;
 	retval = 0;
@@ -187,11 +187,11 @@ int ia_css_process_set_cell(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_set_cell(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	parent = ia_css_process_get_parent(process);
 
-	verifexit(parent != NULL, EINVAL);
+	verifexit(parent != NULL);
 
 	parent_state = ia_css_process_group_get_state(parent);
 	state = ia_css_process_get_state(process);
@@ -208,20 +208,20 @@ int ia_css_process_set_cell(
 		 * while its parent state is READY (the ready state is set at
 		 * the end of ia_css_process_group_create)
 		 */
-		(parent_state == IA_CSS_PROCESS_GROUP_READY)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		(parent_state == IA_CSS_PROCESS_GROUP_READY)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 /* Some programs are mapped on a fixed cell, thus check is not secure,
  * but it will detect a preset, the process manager will do the secure check
  */
 	verifexit(ia_css_process_get_cell(process) ==
-		  VIED_NCI_N_CELL_ID, EINVAL);
+		  VIED_NCI_N_CELL_ID);
 
 	bit_mask = vied_nci_cell_bit_mask(cell_id);
 	resource_bitmap = ia_css_process_group_get_resource_bitmap(parent);
 
-	verifexit(bit_mask != 0, EINVAL);
-	verifexit(vied_nci_is_bitmap_clear(bit_mask, resource_bitmap), EINVAL);
+	verifexit(bit_mask != 0);
+	verifexit(vied_nci_is_bitmap_clear(bit_mask, resource_bitmap));
 
 	process->cell_id = (vied_nci_resource_id_t)cell_id;
 	resource_bitmap = vied_nci_bitmap_set(resource_bitmap, bit_mask);
@@ -253,25 +253,25 @@ int ia_css_process_clear_cell(
 
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_clear_cell(): enter:\n");
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	cell_id = ia_css_process_get_cell(process);
 	parent = ia_css_process_get_parent(process);
 
-	verifexit(parent != NULL, EINVAL);
+	verifexit(parent != NULL);
 
 	parent_state = ia_css_process_group_get_state(parent);
 	state = ia_css_process_get_state(process);
 
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED)
-		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 	bit_mask = vied_nci_cell_bit_mask(cell_id);
 	resource_bitmap = ia_css_process_group_get_resource_bitmap(parent);
 
-	verifexit(bit_mask != 0, EINVAL);
-	verifexit(vied_nci_is_bitmap_set(bit_mask, resource_bitmap), EINVAL);
+	verifexit(bit_mask != 0);
+	verifexit(vied_nci_is_bitmap_set(bit_mask, resource_bitmap));
 
 	process->cell_id = (vied_nci_resource_id_t)VIED_NCI_N_CELL_ID;
 	resource_bitmap = vied_nci_bitmap_clear(resource_bitmap, bit_mask);
@@ -304,8 +304,8 @@ int ia_css_process_set_int_mem(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_set_int_mem(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
-	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID, EINVAL);
+	verifexit(process != NULL);
+	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID);
 
 	parent = ia_css_process_get_parent(process);
 	cell_id = ia_css_process_get_cell(process);
@@ -318,8 +318,8 @@ int ia_css_process_set_int_mem(
 	*/
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED) ||
 		   (parent_state == IA_CSS_PROCESS_GROUP_STARTED) ||
-		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 	if (vied_nci_is_cell_mem_of_type(cell_id, mem_type_id, mem_type_id)) {
 		vied_nci_mem_ID_t mem_id =
@@ -351,8 +351,8 @@ int ia_css_process_clear_int_mem(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_clear_int_mem(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
-	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID, EINVAL);
+	verifexit(process != NULL);
+	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID);
 
 	parent = ia_css_process_get_parent(process);
 	cell_id = ia_css_process_get_cell(process);
@@ -362,14 +362,14 @@ int ia_css_process_clear_int_mem(
 	 * IA_CSS_N_PROCESS_GROUP_STATES so it will be filtered anyway later.
 	*/
 
-	/* verifexit(parent != NULL, EINVAL); */
+	/* verifexit(parent != NULL); */
 
 	parent_state = ia_css_process_group_get_state(parent);
 	state = ia_css_process_get_state(process);
 
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED)
-		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 /* We could just clear the field, but lets check the state for
  * consistency first
@@ -423,7 +423,7 @@ int ia_css_process_set_ext_mem(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_set_ext_mem(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	parent = ia_css_process_get_parent(process);
 	cell_id = ia_css_process_get_cell(process);
@@ -433,7 +433,7 @@ int ia_css_process_set_ext_mem(
 	 * IA_CSS_N_PROCESS_GROUP_STATES so it will be filtered anyway later.
 	*/
 
-	/* verifexit(parent != NULL, EINVAL); */
+	/* verifexit(parent != NULL); */
 
 	parent_state = ia_css_process_group_get_state(parent);
 	state = ia_css_process_get_state(process);
@@ -443,8 +443,8 @@ int ia_css_process_set_ext_mem(
 	*/
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED) ||
 		   (parent_state == IA_CSS_PROCESS_GROUP_STARTED) ||
-		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 	/* Check that the memory actually exists, "vied_nci_has_cell_mem_of_id()"
 	* will return false on error
@@ -456,7 +456,7 @@ int ia_css_process_set_ext_mem(
 		|| vied_nci_mem_is_ext_type(mem_type_id)) &&
 		(mem_id < VIED_NCI_N_MEM_ID)) {
 
-		verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID, EINVAL);
+		verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID);
 		process->ext_mem_id[mem_type_id] = mem_id;
 		process->ext_mem_offset[mem_type_id] = offset;
 		retval = 0;
@@ -486,19 +486,19 @@ int ia_css_process_clear_ext_mem(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_clear_ext_mem(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
-	verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID, EINVAL);
+	verifexit(process != NULL);
+	verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID);
 
 	parent = ia_css_process_get_parent(process);
 	state = ia_css_process_get_state(process);
 
-	verifexit(parent != NULL, EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+	verifexit(parent != NULL);
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 	parent_state = ia_css_process_group_get_state(parent);
 
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED) ||
-		   (parent_state == IA_CSS_PROCESS_GROUP_STARTED)), EINVAL);
+		   (parent_state == IA_CSS_PROCESS_GROUP_STARTED)));
 
 	process->ext_mem_id[mem_type_id] = VIED_NCI_N_MEM_ID;
 	process->ext_mem_offset[mem_type_id] = IA_CSS_PROCESS_INVALID_OFFSET;
@@ -529,8 +529,8 @@ int ia_css_process_set_dev_chn(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_set_dev_chn(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
-	verifexit(dev_chn_id <= VIED_NCI_N_DEV_CHN_ID, EINVAL);
+	verifexit(process != NULL);
+	verifexit(dev_chn_id <= VIED_NCI_N_DEV_CHN_ID);
 
 	parent = ia_css_process_get_parent(process);
 	state = ia_css_process_get_state(process);
@@ -542,8 +542,8 @@ int ia_css_process_set_dev_chn(
 	*/
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED) ||
 		   (parent_state == IA_CSS_PROCESS_GROUP_STARTED) ||
-		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   (parent_state == IA_CSS_PROCESS_GROUP_RUNNING)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
 	process->dev_chn_offset[dev_chn_id] = offset;
 
@@ -572,7 +572,7 @@ int ia_css_process_clear_dev_chn(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_clear_dev_chn(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	parent = ia_css_process_get_parent(process);
 
@@ -581,16 +581,16 @@ int ia_css_process_clear_dev_chn(
 	 * IA_CSS_N_PROCESS_GROUP_STATES so it will be filtered anyway later.
 	*/
 
-	/* verifexit(parent != NULL, EINVAL); */
+	/* verifexit(parent != NULL); */
 
 	parent_state = ia_css_process_group_get_state(parent);
 	state = ia_css_process_get_state(process);
 
 	verifexit(((parent_state == IA_CSS_PROCESS_GROUP_BLOCKED)
-		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)), EINVAL);
-	verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		   || (parent_state == IA_CSS_PROCESS_GROUP_STARTED)));
+	verifexit(state == IA_CSS_PROCESS_READY);
 
-	verifexit(dev_chn_id <= VIED_NCI_N_DEV_CHN_ID, EINVAL);
+	verifexit(dev_chn_id <= VIED_NCI_N_DEV_CHN_ID);
 
 	process->dev_chn_offset[dev_chn_id] = IA_CSS_PROCESS_INVALID_OFFSET;
 
@@ -620,7 +620,7 @@ int ia_css_process_clear_all(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_clear_all(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	parent = ia_css_process_get_parent(process);
 	state = ia_css_process_get_state(process);
@@ -630,15 +630,15 @@ int ia_css_process_clear_all(
 	 * IA_CSS_N_PROCESS_GROUP_STATES so it will be filtered anyway later.
 	*/
 
-	/* verifexit(parent != NULL, EINVAL); */
+	/* verifexit(parent != NULL); */
 
 	parent_state = ia_css_process_group_get_state(parent);
 
 /* Resource clear can only be called in excluded states contrary to set */
 	verifexit((parent_state != IA_CSS_PROCESS_GROUP_RUNNING) ||
-		   (parent_state == IA_CSS_N_PROCESS_GROUP_STATES), EINVAL);
+		   (parent_state == IA_CSS_N_PROCESS_GROUP_STATES));
 	verifexit((state == IA_CSS_PROCESS_CREATED) ||
-		  (state == IA_CSS_PROCESS_READY), EINVAL);
+		  (state == IA_CSS_PROCESS_READY));
 
 	for (dev_chn_index = 0; dev_chn_index < VIED_NCI_N_DEV_CHN_ID;
 		dev_chn_index++) {
@@ -680,7 +680,7 @@ int ia_css_process_acquire(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_acquire(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	retval = 0;
 EXIT:
@@ -703,7 +703,7 @@ int ia_css_process_release(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, INFO,
 		"ia_css_process_release(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	retval = 0;
 EXIT:
@@ -731,7 +731,7 @@ int ia_css_process_print(const ia_css_process_t *process, void *fid)
 	IA_CSS_TRACE_1(PSYSAPI_DYNAMIC, INFO,
 		"ia_css_process_print(process %p): enter:\n", process);
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	IA_CSS_TRACE_6(PSYSAPI_DYNAMIC, INFO,
 	"\tprocess %p, sizeof %d, programID %d, state %d, parent %p, cell %d\n",
@@ -748,7 +748,7 @@ int ia_css_process_print(const ia_css_process_t *process, void *fid)
 			(vied_nci_mem_ID_t)(process->int_mem_id[mem_index]);
 
 		verifexit(((mem_id == vied_nci_cell_get_mem(cell_id, mem_index))
-			|| (mem_id == VIED_NCI_N_MEM_ID)), EINVAL);
+			|| (mem_id == VIED_NCI_N_MEM_ID)));
 
 		IA_CSS_TRACE_4(PSYSAPI_DYNAMIC, INFO,
 			"\tinternal index %d, type %d, id %d offset 0x%x\n",
@@ -764,7 +764,7 @@ int ia_css_process_print(const ia_css_process_t *process, void *fid)
 			(vied_nci_mem_ID_t)(process->ext_mem_id[mem_index]);
 
 		verifexit((vied_nci_has_cell_mem_of_id(cell_id, mem_id) ||
-			  (mem_id == VIED_NCI_N_MEM_ID)), EINVAL);
+			  (mem_id == VIED_NCI_N_MEM_ID)));
 
 		IA_CSS_TRACE_4(PSYSAPI_DYNAMIC, INFO,
 			"\texternal index %d, type %d, id %d offset 0x%x\n",
@@ -854,8 +854,8 @@ int ia_css_process_set_parent(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		       "ia_css_process_set_parent(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
-	verifexit(parent != NULL, EINVAL);
+	verifexit(process != NULL);
+	verifexit(parent != NULL);
 
 	process->parent_offset = (uint16_t) ((char *)parent - (char *)process);
 	retval = 0;
@@ -881,7 +881,7 @@ int ia_css_process_set_cell_dependency(
 
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_set_cell_dependency(): enter:\n");
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	process_dep_ptr =
 		(uint8_t *)process + process->cell_dependencies_offset +
@@ -904,9 +904,8 @@ int ia_css_process_set_terminal_dependency(
 
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_set_terminal_dependency(): enter:\n");
-	verifexit(process != NULL, EINVAL);
-	verifexit(ia_css_process_get_terminal_dependency_count(process) >
-		  dep_index, EINVAL);
+	verifexit(process != NULL);
+	verifexit(ia_css_process_get_terminal_dependency_count(process) > dep_index);
 
 	terminal_dep_ptr =
 		(uint8_t *)process + process->terminal_dependencies_offset +
@@ -927,42 +926,42 @@ int ia_css_process_cmd(
 
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, INFO, "ia_css_process_cmd(): enter:\n");
 
-	verifexit(process != NULL, EINVAL);
+	verifexit(process != NULL);
 
 	state = ia_css_process_get_state(process);
 
-	verifexit(state != IA_CSS_PROCESS_ERROR, EINVAL);
-	verifexit(state < IA_CSS_N_PROCESS_STATES, EINVAL);
+	verifexit(state != IA_CSS_PROCESS_ERROR);
+	verifexit(state < IA_CSS_N_PROCESS_STATES);
 
 	switch (cmd) {
 	case IA_CSS_PROCESS_CMD_NOP:
 		break;
 	case IA_CSS_PROCESS_CMD_ACQUIRE:
-		verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_READY);
 		break;
 	case IA_CSS_PROCESS_CMD_RELEASE:
-		verifexit(state == IA_CSS_PROCESS_READY, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_READY);
 		break;
 	case IA_CSS_PROCESS_CMD_START:
 		verifexit((state == IA_CSS_PROCESS_READY)
-			  || (state == IA_CSS_PROCESS_STOPPED), EINVAL);
+			  || (state == IA_CSS_PROCESS_STOPPED));
 		process->state = IA_CSS_PROCESS_STARTED;
 		break;
 	case IA_CSS_PROCESS_CMD_LOAD:
-		verifexit(state == IA_CSS_PROCESS_STARTED, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_STARTED);
 		process->state = IA_CSS_PROCESS_RUNNING;
 		break;
 	case IA_CSS_PROCESS_CMD_STOP:
 		verifexit((state == IA_CSS_PROCESS_RUNNING)
-			  || (state == IA_CSS_PROCESS_SUSPENDED), EINVAL);
+			  || (state == IA_CSS_PROCESS_SUSPENDED));
 		process->state = IA_CSS_PROCESS_STOPPED;
 		break;
 	case IA_CSS_PROCESS_CMD_SUSPEND:
-		verifexit(state == IA_CSS_PROCESS_RUNNING, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_RUNNING);
 		process->state = IA_CSS_PROCESS_SUSPENDED;
 		break;
 	case IA_CSS_PROCESS_CMD_RESUME:
-		verifexit(state == IA_CSS_PROCESS_SUSPENDED, EINVAL);
+		verifexit(state == IA_CSS_PROCESS_SUSPENDED);
 		process->state = IA_CSS_PROCESS_RUNNING;
 		break;
 	case IA_CSS_N_PROCESS_CMDS:	/* Fall through */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group.c
index bfe83a7..8199d0d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -19,9 +19,9 @@
  * Functions to possibly inline
  */
 
-#ifndef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifndef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_process_group_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 /*
  * Functions not to inline
@@ -83,8 +83,7 @@ static bool ia_css_process_group_is_program_enabled(
 			ia_css_program_group_manifest_get_program_manifest(
 					prog_group_manifest, super_prog_idx);
 
-				verifexit(super_program_manifest != NULL,
-						EINVAL);
+				verifexit(super_program_manifest != NULL);
 				if (((program_type ==
 					IA_CSS_PROGRAM_TYPE_EXCLUSIVE_SUB) &&
 					(ia_css_program_manifest_get_type(
@@ -97,7 +96,7 @@ static bool ia_css_process_group_is_program_enabled(
 					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUPER))) {
 					IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, ERROR,
 						"ia_css_process_group_is_program_enabled(): Error\n");
-					verifexit(0, EINVAL);
+					verifexit(0);
 				}
 
 				super_program_bitmap =
@@ -230,8 +229,8 @@ size_t ia_css_sizeof_process_group(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_sizeof_process_group(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	COMPILATION_ERROR_IF(
 		SIZE_OF_PROCESS_GROUP_STRUCT_BITS !=
@@ -245,8 +244,8 @@ size_t ia_css_sizeof_process_group(
 	terminal_count =
 		ia_css_process_group_compute_terminal_count(manifest, param);
 
-	verifexit(process_count != 0, EINVAL);
-	verifexit(terminal_count != 0, EINVAL);
+	verifexit(process_count != 0);
+	verifexit(terminal_count != 0);
 
 	size += sizeof(ia_css_process_group_t);
 
@@ -268,14 +267,14 @@ size_t ia_css_sizeof_process_group(
 
 		if (ia_css_process_group_is_program_enabled(
 					program_manifest, enable_bitmap)) {
-			verifexit(process_num < process_count, EINVAL);
+			verifexit(process_num < process_count);
 			size += ia_css_sizeof_process(
 					program_manifest, program_param);
 			process_num++;
 		}
 	}
 
-	verifexit(process_num == process_count, EINVAL);
+	verifexit(process_num == process_count);
 
 	for (i = 0; i < (int)ia_css_program_group_manifest_get_terminal_count(
 				manifest); i++) {
@@ -325,10 +324,10 @@ ia_css_process_group_t *ia_css_process_group_create(
 		"ia_css_process_group_create(process_grp_mem %p, manifest %p, group_param %p): enter:\n",
 		process_grp_mem, manifest, param);
 
-	verifexit(process_grp_mem != NULL, EINVAL);
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
-	verifexit(ia_css_is_program_group_manifest_valid(manifest), EINVAL);
+	verifexit(process_grp_mem != NULL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
+	verifexit(ia_css_is_program_group_manifest_valid(manifest));
 
 	process_group = (ia_css_process_group_t	*)process_grp_mem;
 	ia_css_cpu_mem_set_zero(process_group, size);
@@ -365,7 +364,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 
 	/* Set default */
 	verifexit(ia_css_process_group_set_fragment_limit(
-				process_group, fragment_count) == 0, EINVAL);
+				process_group, fragment_count) == 0);
 
 	/* Set process group terminal dependency list */
 	/* This list is used during creating the process dependency list */
@@ -378,7 +377,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 			ia_css_program_group_manifest_get_terminal_manifest(
 					manifest, i);
 
-		verifexit(NULL != t_manifest, EINVAL);
+		verifexit(NULL != t_manifest);
 		if (ia_css_process_group_is_terminal_enabled(
 					t_manifest, enable_bitmap)) {
 			ia_css_terminal_t *terminal = NULL;
@@ -386,19 +385,18 @@ ia_css_process_group_t *ia_css_process_group_create(
 				ia_css_program_group_param_get_terminal_param(
 						param, i);
 
-			verifexit(NULL != terminal_param, EINVAL);
+			verifexit(NULL != terminal_param);
 			terminal_tab_ptr[terminal_num] =
 				(uint16_t)(process_grp_raw_ptr -
 						(char *)process_group);
 			terminal = ia_css_terminal_create(
 					process_grp_raw_ptr, t_manifest,
 					terminal_param, enable_bitmap);
-			verifexit(terminal != NULL, ENOBUFS);
+			verifexit(terminal != NULL);
 			verifexit((ia_css_terminal_set_parent(
-					terminal, process_group) == 0),
-					EINVAL);
+					terminal, process_group) == 0));
 			verifexit((ia_css_terminal_set_terminal_manifest_index(
-					terminal, i) == 0), EINVAL);
+					terminal, i) == 0));
 			IA_CSS_TRACE_1(PSYSAPI_DYNAMIC, INFO,
 				"ia_css_process_group_create: terminal_manifest_index %d\n",
 				i);
@@ -408,7 +406,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 			terminal_num++;
 		}
 	}
-	verifexit(terminal_num == terminal_count, EINVAL);
+	verifexit(terminal_num == terminal_count);
 
 	process_num = 0;
 	for (i = 0; i < (int)ia_css_program_group_manifest_get_program_count(
@@ -425,7 +423,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 		if (ia_css_process_group_is_program_enabled(
 					program_manifest, enable_bitmap)) {
 
-			verifexit(process_num < process_count, EINVAL);
+			verifexit(process_num < process_count);
 
 			process_tab_ptr[process_num] =
 				(uint16_t)(process_grp_raw_ptr -
@@ -434,7 +432,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 					process_grp_raw_ptr,
 					program_manifest,
 					program_param);
-			verifexit(process != NULL, ENOBUFS);
+			verifexit(process != NULL);
 
 			ia_css_process_set_parent(process, process_group);
 			if (ia_css_has_program_manifest_fixed_cell(
@@ -469,7 +467,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 				ia_css_program_manifest_get_program_ID(
 						dep_prg_manifest);
 
-				verifexit(id != 0, EINVAL);
+				verifexit(id != 0);
 				for (proc_dep_index = 0;
 						proc_dep_index < process_num;
 						proc_dep_index++) {
@@ -505,9 +503,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 				ia_css_program_manifest_get_terminal_dependency
 					(program_manifest, term_dep_index);
 
-				verifexit(pm_term_index <
-						manifest_terminal_count,
-						EINVAL);
+				verifexit(pm_term_index < manifest_terminal_count);
 				IA_CSS_TRACE_2(PSYSAPI_DYNAMIC, INFO,
 					"ia_css_process_group_create(): term_dep_index: %d, pm_term_index: %d\n",
 					term_dep_index, pm_term_index);
@@ -535,7 +531,7 @@ ia_css_process_group_t *ia_css_process_group_create(
 			}
 		}
 	}
-	verifexit(process_num == process_count, EINVAL);
+	verifexit(process_num == process_count);
 
 	process_group->size =
 		(uint32_t)ia_css_sizeof_process_group(manifest, param);
@@ -548,10 +544,10 @@ ia_css_process_group_t *ia_css_process_group_create(
 	process_group->pg_init_cycles       = 0;
 	process_group->pg_processing_cycles = 0;
 
-	verifexit(process_group->ID != 0, EINVAL);
+	verifexit(process_group->ID != 0);
 
 	ret = ia_css_process_group_on_create(process_group, manifest, param);
-	verifexit(ret == 0, EINVAL);
+	verifexit(ret == 0);
 
 	process_group->state = IA_CSS_PROCESS_GROUP_READY;
 	retval = 0;
@@ -684,7 +680,7 @@ extern uint64_t ia_css_process_group_get_token(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_get_token(): enter:\n");
 
-	verifexit(process_group != NULL, EINVAL);
+	verifexit(process_group != NULL);
 
 	token = process_group->token;
 
@@ -705,8 +701,8 @@ int ia_css_process_group_set_token(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_set_token(): enter:\n");
 
-	verifexit(process_group != NULL, EINVAL);
-	verifexit(token != 0, EINVAL);
+	verifexit(process_group != NULL);
+	verifexit(token != 0);
 
 	process_group->token = token;
 
@@ -732,7 +728,7 @@ extern uint64_t ia_css_process_group_get_private_token(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_get_private_token(): enter:\n");
 
-	verifexit(process_group != NULL, EINVAL);
+	verifexit(process_group != NULL);
 
 	token = process_group->private_token;
 
@@ -753,8 +749,8 @@ int ia_css_process_group_set_private_token(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_set_private_token(): enter:\n");
 
-	verifexit(process_group != NULL, EINVAL);
-	verifexit(token != 0, EINVAL);
+	verifexit(process_group != NULL);
+	verifexit(token != 0);
 
 	process_group->private_token = token;
 
@@ -784,18 +780,17 @@ uint8_t ia_css_process_group_compute_process_count(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_compute_process_count(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	total_bitmap =
 		ia_css_program_group_manifest_get_kernel_bitmap(manifest);
 	enable_bitmap =
 		ia_css_program_group_param_get_kernel_enable_bitmap(param);
 
-	verifexit(ia_css_is_program_group_manifest_valid(manifest), EINVAL);
-	verifexit(ia_css_is_kernel_bitmap_subset(total_bitmap, enable_bitmap),
-								EINVAL);
-	verifexit(!ia_css_is_kernel_bitmap_empty(enable_bitmap), EINVAL);
+	verifexit(ia_css_is_program_group_manifest_valid(manifest));
+	verifexit(ia_css_is_kernel_bitmap_subset(total_bitmap, enable_bitmap));
+	verifexit(!ia_css_is_kernel_bitmap_empty(enable_bitmap));
 
 	for (i = 0; i <
 		(int)ia_css_program_group_manifest_get_program_count(manifest);
@@ -848,18 +843,17 @@ uint8_t ia_css_process_group_compute_terminal_count(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_process_group_compute_terminal_count(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	total_bitmap =
 		ia_css_program_group_manifest_get_kernel_bitmap(manifest);
 	enable_bitmap =
 		ia_css_program_group_param_get_kernel_enable_bitmap(param);
 
-	verifexit(ia_css_is_program_group_manifest_valid(manifest), EINVAL);
-	verifexit(ia_css_is_kernel_bitmap_subset(total_bitmap, enable_bitmap),
-								EINVAL);
-	verifexit(!ia_css_is_kernel_bitmap_empty(enable_bitmap), EINVAL);
+	verifexit(ia_css_is_program_group_manifest_valid(manifest));
+	verifexit(ia_css_is_kernel_bitmap_subset(total_bitmap, enable_bitmap));
+	verifexit(!ia_css_is_kernel_bitmap_empty(enable_bitmap));
 
 	for (i = 0; i <
 		(int)ia_css_program_group_manifest_get_terminal_count(
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group_impl.h
index 9301a9e..0fd95dc 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_group_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_impl.h
index 8a991b5..1ae5a51 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_private_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_private_types.h
index c146b69..67cd042 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_private_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_process_private_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal.c
index e543aca..54e5120 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -20,9 +20,9 @@
  * Functions to possibly inline
  */
 
-#ifndef _IA_CSS_PSYS_DYNAMIC_INLINE_
+#ifndef __IA_CSS_PSYS_DYNAMIC_INLINE__
 #include "ia_css_psys_terminal_impl.h"
-#endif /* _IA_CSS_PSYS_DYNAMIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_DYNAMIC_INLINE__ */
 
 STORAGE_CLASS_INLINE void __terminal_dummy_check_alignment(void)
 {
@@ -149,8 +149,8 @@ size_t ia_css_sizeof_terminal(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_sizeof_terminal(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	if (ia_css_is_terminal_manifest_parameter_terminal(manifest)) {
 		const ia_css_param_terminal_manifest_t *param_term_man =
@@ -222,23 +222,22 @@ ia_css_terminal_t *ia_css_terminal_create(
 	param = ia_css_terminal_param_get_parent(terminal_param);
 	fragment_count = ia_css_program_group_param_get_fragment_count(param);
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(param != NULL, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(param != NULL);
 
 	terminal_raw_ptr = (char *) raw_mem;
 
 	terminal = (ia_css_terminal_t *) terminal_raw_ptr;
-	verifexit(terminal != NULL, EINVAL);
+	verifexit(terminal != NULL);
 
 	terminal->size = (uint16_t)ia_css_sizeof_terminal(manifest, param);
 	verifexit(ia_css_terminal_set_type(
-		terminal, ia_css_terminal_manifest_get_type(manifest)) ==
-			0, EINVAL);
+		terminal, ia_css_terminal_manifest_get_type(manifest)) == 0);
 
 	terminal->ID = ia_css_terminal_manifest_get_ID(manifest);
 
 	verifexit(ia_css_terminal_set_buffer(terminal,
-				VIED_NULL) == 0, EINVAL);
+				VIED_NULL) == 0);
 
 	if (ia_css_is_terminal_manifest_data_terminal(manifest) == true) {
 		ia_css_data_terminal_t *dterminal =
@@ -250,11 +249,11 @@ ia_css_terminal_t *ia_css_terminal_create(
 			ia_css_data_terminal_manifest_get_kernel_bitmap(
 			(const ia_css_data_terminal_manifest_t *)manifest));
 
-		verifexit(frame != NULL, EINVAL);
+		verifexit(frame != NULL);
 		verifexit(ia_css_frame_set_buffer_state(
-				frame, IA_CSS_BUFFER_NULL) == 0, EINVAL);
+				frame, IA_CSS_BUFFER_NULL) == 0);
 		verifexit(ia_css_is_kernel_bitmap_onehot(intersection) ==
-					true, EINVAL);
+					true);
 
 		terminal_raw_ptr += sizeof(ia_css_data_terminal_t);
 		dterminal->fragment_descriptor_offset =
@@ -477,7 +476,7 @@ uint16_t ia_css_param_terminal_compute_section_count(
 	IA_CSS_TRACE_0(PSYSAPI_DYNAMIC, VERBOSE,
 		"ia_css_param_terminal_compute_section_count(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 	section_count = ((const ia_css_param_terminal_manifest_t *)manifest)->
 				param_manifest_section_desc_count;
 EXIT:
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_impl.h
index 1fb3d1d..a00ca9c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -134,10 +134,16 @@ bool ia_css_is_terminal_input(
 	case IA_CSS_TERMINAL_TYPE_STATE_IN:		/* Fall through */
 	case IA_CSS_TERMINAL_TYPE_PARAM_STREAM:		/* Fall through */
 	case IA_CSS_TERMINAL_TYPE_PARAM_CACHED_IN:
+	case IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_IN:
+	case IA_CSS_TERMINAL_TYPE_PARAM_SLICED_IN:
+	case IA_CSS_TERMINAL_TYPE_PROGRAM:
 		is_input = true;
 		break;
 	case IA_CSS_TERMINAL_TYPE_DATA_OUT:		/* Fall through */
 	case IA_CSS_TERMINAL_TYPE_STATE_OUT:
+	case IA_CSS_TERMINAL_TYPE_PARAM_CACHED_OUT:
+	case IA_CSS_TERMINAL_TYPE_PARAM_SLICED_OUT:
+	case IA_CSS_TERMINAL_TYPE_PARAM_SPATIAL_OUT:
 		is_input = false;
 		break;
 	default:
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_private_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_private_types.h
index b91ae9c..f78f6e4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_private_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/dynamic/src/ia_css_psys_terminal_private_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi.h
index c73b824..db2779b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi_trace.h
index 28e3054..23cbb9e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/interface/ia_css_psysapi_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_kernel_bitmap.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_kernel_bitmap.h
index 944161b..033ed73 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_kernel_bitmap.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_kernel_bitmap.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_psys_kernel_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_psys_kernel_trace.h
index 32758ae..5ca2966 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_psys_kernel_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/interface/ia_css_psys_kernel_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/src/ia_css_kernel_bitmap.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/src/ia_css_kernel_bitmap.c
index b5a547b..0d92434 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/src/ia_css_kernel_bitmap.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/kernel/src/ia_css_kernel_bitmap.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.h
index bd312a6..3bc808e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.sim.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.sim.h
index 8db11d5..e488600 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.sim.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param.sim.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param_types.h
index bed6619..7b4bab0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_program_group_param_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_psys_param_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_psys_param_trace.h
index 1be9927..f1f7cda 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_psys_param_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/interface/ia_css_psys_param_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param.c
index 9b62180..5d98ed2 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -43,9 +43,9 @@ size_t ia_css_sizeof_program_group_param(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_sizeof_program_group_param(): enter:\n");
 
-	verifexit(program_count != 0, EINVAL);
-	verifexit(terminal_count != 0, EINVAL);
-	verifexit(fragment_count != 0, EINVAL);
+	verifexit(program_count != 0);
+	verifexit(terminal_count != 0);
+	verifexit(fragment_count != 0);
 
 	size += sizeof(ia_css_program_group_param_t);
 	size += program_count * fragment_count * sizeof(ia_css_program_param_t);
@@ -103,12 +103,12 @@ ia_css_program_param_t *ia_css_program_group_param_get_program_param(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_program_group_param_get_program_param(): enter:\n");
 
-	verifexit(param != NULL, ENOBUFS);
+	verifexit(param != NULL);
 
 	program_count =
 		(int)ia_css_program_group_param_get_program_count(param);
 
-	verifexit(i < program_count, EINVAL);
+	verifexit(i < program_count);
 
 	program_param_base = (ia_css_program_param_t *)
 			(((char *)param) + param->program_param_offset);
@@ -152,12 +152,12 @@ ia_css_terminal_param_t *ia_css_program_group_param_get_terminal_param(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_program_group_param_get_terminal_param(): enter:\n");
 
-	verifexit(param != NULL, ENOBUFS);
+	verifexit(param != NULL);
 
 	program_count =
 		(int)ia_css_program_group_param_get_terminal_count(param);
 
-	verifexit(i < program_count, EINVAL);
+	verifexit(i < program_count);
 
 	terminal_param_base = (ia_css_terminal_param_t *)
 			(((char *)param) + param->terminal_param_offset);
@@ -287,8 +287,8 @@ ia_css_kernel_bitmap_t ia_css_program_param_get_kernel_enable_bitmap(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_program_param_get_kernel_enable_bitmap(): enter:\n");
 
-	verifexit(program_param != NULL, EINVAL);
-	verifexit(program_param->parent_offset != 0, EINVAL);
+	verifexit(program_param != NULL);
+	verifexit(program_param->parent_offset != 0);
 
 	base = (char *)((char *)program_param + program_param->parent_offset);
 	bitmap = ((ia_css_program_group_param_t *)base)->kernel_enable_bitmap;
@@ -309,8 +309,8 @@ ia_css_kernel_bitmap_t ia_css_terminal_param_get_kernel_enable_bitmap(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_terminal_param_get_kernel_enable_bitmap(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
-	verifexit(param->parent_offset != 0, EINVAL);
+	verifexit(param != NULL);
+	verifexit(param->parent_offset != 0);
 
 	base = (char *)((char *)param + param->parent_offset);
 	bitmap = ((ia_css_program_group_param_t *)base)->kernel_enable_bitmap;
@@ -330,7 +330,7 @@ ia_css_frame_format_type_t ia_css_terminal_param_get_frame_format_type(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		"ia_css_terminal_param_get_frame_format_type(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 
 	ft = param->frame_format_type;
 EXIT:
@@ -369,7 +369,7 @@ uint8_t ia_css_terminal_param_get_bpp(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		       "ia_css_terminal_param_get_bpp(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 
 	bpp = param->bpp;
 
@@ -450,7 +450,7 @@ int ia_css_terminal_param_set_stride(
 {
 	int retval = -1;
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 	param->stride = stride;
 	retval = 0;
 
@@ -463,7 +463,7 @@ uint32_t ia_css_terminal_param_get_stride(
 {
 	uint32_t stride = 0;
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 	stride = param->stride;
 
 EXIT:
@@ -480,7 +480,7 @@ static int ia_css_program_param_init(
 	COMPILATION_ERROR_IF(
 		SIZE_OF_PROGRAM_PARAM_STRUCT_IN_BITS !=
 				(CHAR_BIT * sizeof(ia_css_program_param_t)));
-	verifexit(program_param != NULL, EINVAL);
+	verifexit(program_param != NULL);
 
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, INFO,
 		"ia_css_program_param_init(): enter:\n");
@@ -508,7 +508,7 @@ ia_css_terminal_param_init(ia_css_terminal_param_t *terminal_param,
 	COMPILATION_ERROR_IF(
 		SIZE_OF_TERMINAL_PARAM_STRUCT_IN_BITS !=
 			(CHAR_BIT * sizeof(ia_css_terminal_param_t)));
-	verifexit(terminal_param != NULL, EINVAL);
+	verifexit(terminal_param != NULL);
 
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, INFO,
 		"ia_css_terminal_param_init(): enter:\n");
@@ -538,7 +538,7 @@ ia_css_terminal_param_get_parent(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, VERBOSE,
 		       "ia_css_terminal_param_get_parent(): enter:\n");
 
-	verifexit(NULL != param, EINVAL);
+	verifexit(NULL != param);
 
 	base = (char *)((char *)param + param->parent_offset);
 
@@ -572,8 +572,8 @@ int ia_css_program_group_param_init(
 
 	assert(blob != 0);
 
-	verifexit(blob != NULL, EINVAL);
-	verifexit(frame_format_types != NULL, EINVAL);
+	verifexit(blob != NULL);
+	verifexit(frame_format_types != NULL);
 
 	blob->program_count = program_count;
 	blob->fragment_count = fragment_count;
@@ -629,7 +629,7 @@ int ia_css_program_group_param_print(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, INFO,
 		       "ia_css_program_group_param_print(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 	NOT_USED(fid);
 
 	IA_CSS_TRACE_1(PSYSAPI_PARAM, INFO,
@@ -640,7 +640,7 @@ int ia_css_program_group_param_print(
 	terminal_count = ia_css_program_group_param_get_terminal_count(param);
 
 	bitmap = ia_css_program_group_param_get_kernel_enable_bitmap(param);
-	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0, EINVAL);
+	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0);
 
 	IA_CSS_TRACE_1(PSYSAPI_PARAM, INFO,
 		"%d program params\n", (int)program_count);
@@ -679,7 +679,7 @@ int ia_css_terminal_param_print(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, INFO,
 		"ia_css_terminal_param_print(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 	NOT_USED(fid);
 
 	IA_CSS_TRACE_1(PSYSAPI_PARAM, INFO,
@@ -708,14 +708,14 @@ int ia_css_program_param_print(
 	IA_CSS_TRACE_0(PSYSAPI_PARAM, INFO,
 		"ia_css_program_param_print(): enter:\n");
 
-	verifexit(param != NULL, EINVAL);
+	verifexit(param != NULL);
 	NOT_USED(fid);
 
 	IA_CSS_TRACE_1(PSYSAPI_PARAM, INFO, "sizeof(program_param) = %d\n",
 		       (int)ia_css_program_param_get_size(param));
 
 	bitmap = ia_css_program_param_get_kernel_enable_bitmap(param);
-	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0, EINVAL);
+	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0);
 
 	retval = 0;
 EXIT:
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param_private.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param_private.h
index bc4e92b..374fc3b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param_private.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/param/src/ia_css_program_group_param_private.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.c
index 2814f6f..f25a47c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.h
index b865d7d..c12a5ce 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psys_server_manifest/bxtB0/ia_css_psys_server_manifest.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psysapi.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psysapi.mk
index 4ecff0c..09a9c91 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psysapi.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/psysapi.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.c
index 2adc43e..31b40ef 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.h
index 95c4ac0..3f96079 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/resource_model/bxtB0/vied_nci_psys_resource_model.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_data.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_data.h
index bda617f..c588a58 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_data.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_data.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_storage_class.h
index 1aecc68..551f9cf97 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_storage_class.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PSYS_SIM_INLINE_
+#ifndef __IA_CSS_PSYS_SIM_INLINE__
 #define IA_CSS_PSYS_SIM_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PSYS_SIM_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_trace.h
index 4b9aa04..2f550bf 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/ia_css_psys_sim_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/vied_nci_psys_system_global.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/vied_nci_psys_system_global.h
index 08344fc..c3f9597 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/vied_nci_psys_system_global.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/interface/vied_nci_psys_system_global.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -157,8 +157,8 @@ vied_nci_mem_type_ID_t vied_nci_cell_type_get_mem_type(
 	const vied_nci_cell_type_ID_t	cell_type_id,
 	const uint16_t					mem_index);
 
-#ifdef _IA_CSS_PSYS_SIM_INLINE_
+#ifdef __IA_CSS_PSYS_SIM_INLINE__
 #include "psys_system_global_impl.h"
-#endif /* _IA_CSS_PSYS_SIM_INLINE_ */
+#endif /* __IA_CSS_PSYS_SIM_INLINE__ */
 
 #endif /* __VIED_NCI_PSYS_SYSTEM_GLOBAL_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/ia_css_psys_sim_data.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/ia_css_psys_sim_data.c
index 6266f4b3..5917fea 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/ia_css_psys_sim_data.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/ia_css_psys_sim_data.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/psys_system_global_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/psys_system_global_impl.h
index b5b9f1e..1671d70 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/psys_system_global_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/psys_system_global_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/vied_nci_psys_system.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/vied_nci_psys_system.c
index b167713..83f7245 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/vied_nci_psys_system.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/sim/src/vied_nci_psys_system.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -18,9 +18,9 @@
  * Functions to possibly inline
  */
 
-#ifdef _IA_CSS_PSYS_SIM_INLINE_
+#ifdef __IA_CSS_PSYS_SIM_INLINE__
 STORAGE_CLASS_INLINE int
 __ia_css_psys_system_global_avoid_warning_on_empty_file(void) { return 0; }
-#else /* _IA_CSS_PSYS_SIM_INLINE_ */
+#else /* __IA_CSS_PSYS_SIM_INLINE__ */
 #include "psys_system_global_impl.h"
-#endif /* _IA_CSS_PSYS_SIM_INLINE_ */
+#endif /* __IA_CSS_PSYS_SIM_INLINE__ */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_manifest_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_manifest_types.h
index dade412..85ce1ef 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_manifest_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_manifest_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.h
index eaefb12..9c08e8b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -300,9 +300,9 @@ extern void ia_css_program_group_manifest_init(
 	const uint16_t *sliced_out_param_section_count,
 	const uint16_t kernel_fragment_seq_count);
 
-#ifdef _IA_CSS_PSYS_STATIC_INLINE_
+#ifdef __IA_CSS_PSYS_STATIC_INLINE__
 #include "ia_css_psys_program_group_manifest_impl.h"
-#endif /* _IA_CSS_PSYS_STATIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_STATIC_INLINE__ */
 
 #endif /* __IA_CSS_PSYS_PROGRAM_GROUP_MANIFEST_H */
 
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.hsys.user.h
index a252c4c..4376faa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.sim.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.sim.h
index d3379ca..f118f41 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.sim.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_group_manifest.sim.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.h
index 0b8aabd..195c4d8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.kernel.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.kernel.h
index 7dfb467..0504d42 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.kernel.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.kernel.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.user.h
index fba8a5b..c70189f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.sim.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.sim.h
index 8589d80..06140f9 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.sim.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_program_manifest.sim.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_storage_class.h
index 1eae1a9..d1687a8 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_storage_class.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _IA_CSS_PSYS_STATIC_INLINE_
+#ifndef __IA_CSS_PSYS_STATIC_INLINE__
 #define IA_CSS_PSYS_STATIC_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PSYS_STATIC_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_trace.h
index 85d63c6..fbdbb9b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_static_trace.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.h
index f7b3fc7..be56554 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.hsys.user.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.hsys.user.h
index ed8431a..0bdf020 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.hsys.user.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.hsys.user.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.sim.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.sim.h
index 469b57a..2eaa3b4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.sim.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/interface/ia_css_psys_terminal_manifest.sim.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest.c
index 5a07b50..ab470ae 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -19,9 +19,9 @@
  * Functions to possibly inline
  */
 
-#ifndef _IA_CSS_PSYS_STATIC_INLINE_
+#ifndef __IA_CSS_PSYS_STATIC_INLINE__
 #include "ia_css_psys_program_group_manifest_impl.h"
-#endif /* _IA_CSS_PSYS_STATIC_INLINE_ */
+#endif /* __IA_CSS_PSYS_STATIC_INLINE__ */
 
 /*
  * Functions not to inline
@@ -58,10 +58,10 @@ size_t ia_css_sizeof_program_group_manifest(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_sizeof_program_group_manifest(): enter:\n");
 
-	verifexit(program_count != 0, EINVAL);
-	verifexit(terminal_count != 0, EINVAL);
-	verifexit(program_dependency_count != NULL, EINVAL);
-	verifexit(terminal_dependency_count != NULL, EINVAL);
+	verifexit(program_count != 0);
+	verifexit(terminal_count != 0);
+	verifexit(program_dependency_count != NULL);
+	verifexit(terminal_dependency_count != NULL);
 
 	size += sizeof(ia_css_program_group_manifest_t);
 
@@ -167,15 +167,10 @@ bool ia_css_is_program_group_manifest_valid(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_is_program_group_manifest_valid(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(ia_css_program_group_manifest_get_size(manifest) != 0,
-		EINVAL);
-	verifexit(ia_css_program_group_manifest_get_alignment(manifest) != 0,
-		EINVAL);
-	verifexit(
-		ia_css_program_group_manifest_get_program_group_ID(
-			manifest) != 0,
-		EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(ia_css_program_group_manifest_get_size(manifest) != 0);
+	verifexit(ia_css_program_group_manifest_get_alignment(manifest) != 0);
+	verifexit(ia_css_program_group_manifest_get_program_group_ID(manifest) != 0);
 
 	terminal_count =
 		ia_css_program_group_manifest_get_terminal_count(manifest);
@@ -186,10 +181,10 @@ bool ia_css_is_program_group_manifest_valid(
 	check_bitmap = ia_css_kernel_bitmap_clear();
 	terminal_bitmap = vied_nci_bit_mask(VIED_NCI_RESOURCE_BITMAP_BITS);
 
-	verifexit(program_count != 0, EINVAL);
-	verifexit(terminal_count != 0, EINVAL);
-	verifexit(!ia_css_is_kernel_bitmap_empty(total_bitmap), EINVAL);
-	verifexit(vied_nci_is_bitmap_empty(terminal_bitmap), EINVAL);
+	verifexit(program_count != 0);
+	verifexit(terminal_count != 0);
+	verifexit(!ia_css_is_kernel_bitmap_empty(total_bitmap));
+	verifexit(vied_nci_is_bitmap_empty(terminal_bitmap));
 
 	/* Check the kernel bitmaps for terminals */
 	for (i = 0; i < (int)terminal_count; i++) {
@@ -219,14 +214,14 @@ bool ia_css_is_program_group_manifest_valid(
 			 * There can be only one cached in parameter terminal
 			 * it serves kernels, not programs
 			 */
-			verifexit(!has_parameter_terminal_in, EINVAL);
+			verifexit(!has_parameter_terminal_in);
 			has_parameter_terminal_in = is_parameter_in;
 		} else if (is_parameter_out) {
 			/*
 			 * There can be only one cached out parameter terminal
 			 * it serves kernels, not programs
 			 */
-			verifexit(!has_parameter_terminal_out, EINVAL);
+			verifexit(!has_parameter_terminal_out);
 			has_parameter_terminal_out = is_parameter_out;
 		} else if (is_data) {
 			ia_css_data_terminal_manifest_t *dterminal_manifest_i =
@@ -241,15 +236,14 @@ bool ia_css_is_program_group_manifest_valid(
 			 * kernel
 			 */
 			verifexit(!ia_css_is_kernel_bitmap_empty(
-					terminal_bitmap_i), EINVAL);
+					terminal_bitmap_i));
 			verifexit(ia_css_is_kernel_bitmap_subset(
-					total_bitmap, terminal_bitmap_i),
-					EINVAL);
+					total_bitmap, terminal_bitmap_i));
 			verifexit(ia_css_is_kernel_bitmap_onehot(
-					terminal_bitmap_i), EINVAL);
+					terminal_bitmap_i));
 		} else if (is_program) {
-			verifexit(!has_program_terminal, EINVAL);
-			verifexit(terminal_manifest_i, EINVAL);
+			verifexit(!has_program_terminal);
+			verifexit(terminal_manifest_i);
 			has_program_terminal = is_program;
 			has_program_terminal_sequencer_info =
 				(((ia_css_program_terminal_manifest_t *)
@@ -261,17 +255,17 @@ bool ia_css_is_program_group_manifest_valid(
 				*spatial_param_man =
 			(const ia_css_spatial_param_terminal_manifest_t *)
 				terminal_manifest_i;
-			verifexit(spatial_param_man, EINVAL);
-			verifexit(is_spatial_param, EINVAL);
+			verifexit(spatial_param_man);
+			verifexit(is_spatial_param);
 			ia_css_kernel_bitmap_t terminal_bitmap = 0;
 
 			terminal_bitmap =
 				ia_css_kernel_bitmap_set(terminal_bitmap,
 				spatial_param_man->kernel_id);
 			verifexit(!ia_css_is_kernel_bitmap_empty(
-					terminal_bitmap), EINVAL);
+					terminal_bitmap));
 			verifexit(ia_css_is_kernel_bitmap_subset(
-					total_bitmap, terminal_bitmap), EINVAL);
+					total_bitmap, terminal_bitmap));
 		}
 	}
 
@@ -311,12 +305,11 @@ bool ia_css_is_program_group_manifest_valid(
 		 * are a subset of the total
 		 */
 		verifexit(!ia_css_is_kernel_bitmap_empty(
-				program_bitmap_i), EINVAL);
+				program_bitmap_i));
 		verifexit(ia_css_is_kernel_bitmap_subset(
-				total_bitmap, program_bitmap_i), EINVAL);
-		verifexit((program_type_i != IA_CSS_N_PROGRAM_TYPES), EINVAL);
-		verifexit((program_dependency_count_i +
-				terminal_dependency_count_i) != 0, EINVAL);
+				total_bitmap, program_bitmap_i));
+		verifexit((program_type_i != IA_CSS_N_PROGRAM_TYPES));
+		verifexit((program_dependency_count_i + terminal_dependency_count_i) != 0);
 		/*
 		 * Checks for subnodes
 		 * - Parallel subnodes cannot depend on terminals
@@ -343,28 +336,24 @@ bool ia_css_is_program_group_manifest_valid(
 				ia_css_program_manifest_get_kernel_bitmap(
 					program_manifest_k);
 
-			verifexit(program_dependency_count_i == 1, EINVAL);
+			verifexit(program_dependency_count_i == 1);
 			if (is_exclusive_sub_i || is_virtual_sub_i) {
 				verifexit(terminal_dependency_count_i <=
-			ia_css_program_manifest_get_terminal_dependency_count(
-				program_manifest_k), EINVAL);
+					ia_css_program_manifest_get_terminal_dependency_count(
+						program_manifest_k));
 			} else{
-				verifexit(terminal_dependency_count_i == 0,
-						EINVAL);
+				verifexit(terminal_dependency_count_i == 0);
 			}
 			verifexit(program_type_k ==
 				(is_exclusive_sub_i ?
 					IA_CSS_PROGRAM_TYPE_EXCLUSIVE_SUPER :
 				is_virtual_sub_i ?
 					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUPER :
-					IA_CSS_PROGRAM_TYPE_PARALLEL_SUPER),
-					EINVAL);
+					IA_CSS_PROGRAM_TYPE_PARALLEL_SUPER));
 			verifexit(!ia_css_is_kernel_bitmap_equal(
-					program_bitmap_k, program_bitmap_i),
-					EINVAL);
+					program_bitmap_k, program_bitmap_i));
 			verifexit(ia_css_is_kernel_bitmap_subset(
-					program_bitmap_k, program_bitmap_i),
-					EINVAL);
+					program_bitmap_k, program_bitmap_i));
 		} else {
 			/* Singular or Supernode */
 			int k;
@@ -374,7 +363,7 @@ bool ia_css_is_program_group_manifest_valid(
 				ia_css_program_manifest_get_program_dependency(
 					program_manifest_i, k);
 				ia_css_program_manifest_t *program_manifest_k =
-			ia_css_program_group_manifest_get_program_manifest(
+				ia_css_program_group_manifest_get_program_manifest(
 				manifest, (int)program_dependency_k);
 				ia_css_program_type_t program_type_k =
 				ia_css_program_manifest_get_type(
@@ -384,16 +373,14 @@ bool ia_css_is_program_group_manifest_valid(
 					program_manifest_k);
 
 				verifexit(program_dependency_k <
-					program_count, EINVAL);
+					program_count);
 				verifexit((program_type_k !=
 					IA_CSS_PROGRAM_TYPE_EXCLUSIVE_SUB) &&
 					(program_type_k !=
-					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB),
-					EINVAL);
+					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB));
 				verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 				ia_css_is_kernel_bitmap_intersection_empty(
-					program_bitmap_i, program_bitmap_k),
-					EINVAL);
+					program_bitmap_i, program_bitmap_k));
 			}
 		}
 
@@ -435,7 +422,7 @@ bool ia_css_is_program_group_manifest_valid(
 
 			/* Empty sets are always subsets, but meaningless */
 			verifexit(!ia_css_is_kernel_bitmap_empty(
-					program_bitmap_j), EINVAL);
+					program_bitmap_j));
 
 			/*
 			 * Checks for mutual subnodes
@@ -459,14 +446,13 @@ bool ia_css_is_program_group_manifest_valid(
 				(program_type_j ==
 				IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB))) {
 
-				verifexit(program_dependency_count_j == 1,
-					EINVAL);
-				verifexit(program_dependency_i0 != i, EINVAL);
-				verifexit(program_dependency_j0 != i, EINVAL);
+				verifexit(program_dependency_count_j == 1);
+				verifexit(program_dependency_i0 != i);
+				verifexit(program_dependency_j0 != i);
 
 				if (program_dependency_i0 ==
 					program_dependency_j0) {
-					verifexit(is_sub_i, EINVAL);
+					verifexit(is_sub_i);
 					/*
 					 * Subnodes are subsets,
 					 * not for virtual nodes
@@ -474,8 +460,7 @@ bool ia_css_is_program_group_manifest_valid(
 					if (!is_virtual_sub_i)
 						verifexit(
 							((is_j_subset_i ||
-							is_i_subset_j)),
-							EINVAL);
+							is_i_subset_j)));
 					/*
 					 * That must be equal for
 					 * parallel subnodes,
@@ -485,12 +470,12 @@ bool ia_css_is_program_group_manifest_valid(
 					verifexit(
 					((is_j_subset_i && is_i_subset_j) ^
 					(is_exclusive_sub_i |
-					is_virtual_sub_i)), EINVAL);
+					is_virtual_sub_i)));
 
 				}
 				if (is_j_subset_i || is_i_subset_j) {
 					verifexit(program_dependency_i0 ==
-						program_dependency_j0, EINVAL);
+						program_dependency_j0);
 				}
 			}
 
@@ -507,20 +492,18 @@ bool ia_css_is_program_group_manifest_valid(
 				(program_type_j ==
 				IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB))) {
 
-				verifexit(program_dependency_count_j == 1,
-						EINVAL);
-				verifexit(!is_i_subset_j, EINVAL);
+				verifexit(program_dependency_count_j == 1);
+				verifexit(!is_i_subset_j);
 
 				if (program_dependency_j0 == i) {
 					verifexit(program_dependency_i0 !=
-						program_dependency_j0, EINVAL);
-					verifexit(is_super_i, EINVAL);
-					verifexit(is_j_subset_i, EINVAL);
+						program_dependency_j0);
+					verifexit(is_super_i);
+					verifexit(is_j_subset_i);
 
 				}
 				if (is_j_subset_i) {
-					verifexit(program_dependency_j0 == i,
-						EINVAL);
+					verifexit(program_dependency_j0 == i);
 				}
 			}
 
@@ -537,19 +520,17 @@ bool ia_css_is_program_group_manifest_valid(
 					program_manifest_j, k);
 
 				verifexit((program_dependency_k <
-					program_count), EINVAL);
+					program_count));
 				if (program_dependency_k == i) {
 					/* program[j] depends on program[i] */
-					verifexit((i != j), EINVAL);
+					verifexit((i != j));
 					verifexit((program_type_i !=
 					IA_CSS_PROGRAM_TYPE_EXCLUSIVE_SUB) &&
 					(program_type_i !=
-					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB),
-					EINVAL);
+					IA_CSS_PROGRAM_TYPE_VIRTUAL_SUB));
 					verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 				(ia_css_is_kernel_bitmap_intersection_empty(
-				program_bitmap_i, program_bitmap_j) ^ is_sub_j),
-				EINVAL);
+				program_bitmap_i, program_bitmap_j) ^ is_sub_j));
 				}
 			}
 
@@ -569,23 +550,20 @@ bool ia_css_is_program_group_manifest_valid(
 				 */
 				verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 			!ia_css_is_program_manifest_singular_program_type(
-				program_manifest_i), EINVAL);
+				program_manifest_i));
 				verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 			!ia_css_is_program_manifest_singular_program_type(
-				program_manifest_j), EINVAL);
+				program_manifest_j));
 				if (!is_virtual_sub_j)
 					verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
-					(is_j_subset_i || is_i_subset_j),
-					EINVAL);
+					(is_j_subset_i || is_i_subset_j));
 				if (is_super_i) {
-					verifexit(is_sub_j, EINVAL);
-					verifexit(program_dependency_j0 == i,
-						EINVAL);
+					verifexit(is_sub_j);
+					verifexit(program_dependency_j0 == i);
 				}
 				if (is_super_j) {
-					verifexit(is_sub_i, EINVAL);
-					verifexit(program_dependency_i0 == j,
-						EINVAL);
+					verifexit(is_sub_i);
+					verifexit(program_dependency_i0 == j);
 				}
 			}
 		}
@@ -604,7 +582,7 @@ bool ia_css_is_program_group_manifest_valid(
 			ia_css_program_manifest_get_terminal_dependency(
 					program_manifest_i, j);
 
-			verifexit(terminal_dependency < terminal_count, EINVAL);
+			verifexit(terminal_dependency < terminal_count);
 			if ((program_type_i !=
 				IA_CSS_PROGRAM_TYPE_EXCLUSIVE_SUB) &&
 				(program_type_i !=
@@ -617,16 +595,16 @@ bool ia_css_is_program_group_manifest_valid(
 						terminal_dependency);
 				verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 					!vied_nci_is_bitmap_empty(
-						terminal_bitmap), EINVAL);
+						terminal_bitmap));
 			}
 		}
 	}
 	verifexit(ia_css_is_kernel_bitmap_equal(
-			total_bitmap, check_bitmap), EINVAL);
+			total_bitmap, check_bitmap));
 
 	terminal_bitmap_weight =
 		vied_nci_bitmap_compute_weight(terminal_bitmap);
-	verifexit(terminal_bitmap_weight >= 0, EINVAL);
+	verifexit(terminal_bitmap_weight >= 0);
 	if (has_parameter_terminal_in ||
 		has_parameter_terminal_out ||
 		has_program_terminal) {
@@ -642,9 +620,9 @@ bool ia_css_is_program_group_manifest_valid(
 			skip_terminal_count--;
 		verifexit(USE_SIMPLIFIED_GRAPH_MODEL ||
 			(terminal_bitmap_weight ==
-			(terminal_count - skip_terminal_count)), EINVAL);
+			(terminal_count - skip_terminal_count)));
 	} else
-		verifexit((terminal_bitmap_weight == terminal_count), EINVAL);
+		verifexit((terminal_bitmap_weight == terminal_count));
 
 	is_valid = true;
 EXIT:
@@ -898,7 +876,7 @@ int ia_css_program_group_manifest_print(
 
 	NOT_USED(fid);
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	IA_CSS_TRACE_1(PSYSAPI_STATIC, INFO,
 		"sizeof(manifest) = %d\n",
@@ -918,7 +896,7 @@ int ia_css_program_group_manifest_print(
 		ia_css_program_group_manifest_get_terminal_count(manifest);
 
 	bitmap = ia_css_program_group_manifest_get_kernel_bitmap(manifest);
-	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0, EINVAL);
+	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0);
 
 	IA_CSS_TRACE_1(PSYSAPI_STATIC, INFO,
 		"%d program manifests\n", (int)program_count);
@@ -965,12 +943,12 @@ int ia_css_program_group_manifest_print(
 	for (i = 0; i < IPU_DEVICE_ACB_NUM_ACB; i++) {
 
 		if (priv_data->acb_route[i].in_select !=
-			VIED_NCI_ACB_PORT_INVALID) {
+			NCI_ACB_PORT_INVALID) {
 
 			assert(priv_data->acb_route[i].in_select !=
-				VIED_NCI_ACB_PORT_INVALID &&
+				NCI_ACB_PORT_INVALID &&
 				priv_data->acb_route[i].out_select !=
-				VIED_NCI_ACB_PORT_INVALID);
+				NCI_ACB_PORT_INVALID);
 
 			IA_CSS_TRACE_3(PSYSAPI_STATIC, INFO,
 				"Route Cell id %d In %d Out %d\n", i,
@@ -1007,12 +985,12 @@ ia_css_program_group_manifest_get_terminal_manifest(
 		"ia_css_program_group_manifest_get_terminal_manifest(%p,%d): enter:\n",
 		manifest, (int)terminal_index);
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	terminal_count =
 		ia_css_program_group_manifest_get_terminal_count(manifest);
 
-	verifexit(terminal_index < terminal_count, EINVAL);
+	verifexit(terminal_index < terminal_count);
 
 	terminal_manifest_base =
 		(ia_css_terminal_manifest_t *)((char *)manifest +
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest_impl.h
index c338355..a15e1bc 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_manifest_impl.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -133,7 +133,7 @@ void *ia_css_program_group_manifest_get_private_data(
 		"ia_css_program_group_manifest_get_private_data(%p): enter:\n",
 		manifest);
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	private_data = (void *)((const char *)manifest +
 				manifest->private_data_offset);
@@ -163,8 +163,8 @@ ia_css_program_group_manifest_get_prgrm_mnfst(
 	program_count =
 		ia_css_program_group_manifest_get_program_count(manifest);
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(program_index < program_count, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(program_index < program_count);
 
 	prg_manifest_base = (ia_css_program_manifest_t *)((char *)manifest +
 		manifest->program_manifest_offset);
@@ -203,8 +203,8 @@ ia_css_program_group_manifest_get_program_manifest(
 	program_count =
 		ia_css_program_group_manifest_get_program_count(manifest);
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(program_index < program_count, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(program_index < program_count);
 
 	prg_manifest_base = (ia_css_program_manifest_t *)((char *)manifest +
 		manifest->program_manifest_offset);
@@ -241,8 +241,7 @@ ia_css_program_group_manifest_get_data_terminal_manifest(
 		ia_css_program_group_manifest_get_terminal_manifest(manifest,
 			terminal_index);
 
-	verifexit(ia_css_is_terminal_manifest_data_terminal(terminal_manifest),
-			EINVAL);
+	verifexit(ia_css_is_terminal_manifest_data_terminal(terminal_manifest));
 
 	data_terminal_manifest =
 		(ia_css_data_terminal_manifest_t *)terminal_manifest;
@@ -268,7 +267,7 @@ ia_css_program_group_manifest_get_param_terminal_manifest(
 			terminal_index);
 
 	verifexit(ia_css_is_terminal_manifest_parameter_terminal(
-			terminal_manifest), EINVAL);
+			terminal_manifest));
 	param_terminal_manifest =
 		(ia_css_param_terminal_manifest_t *)terminal_manifest;
 EXIT:
@@ -294,7 +293,7 @@ ia_css_program_group_manifest_get_spatial_param_terminal_manifest(
 			terminal_index);
 
 	verifexit(ia_css_is_terminal_manifest_spatial_parameter_terminal(
-			terminal_manifest), EINVAL);
+			terminal_manifest));
 
 	spatial_param_terminal_manifest =
 		(ia_css_spatial_param_terminal_manifest_t *)terminal_manifest;
@@ -321,7 +320,7 @@ ia_css_program_group_manifest_get_sliced_param_terminal_manifest(
 			terminal_index);
 
 	verifexit(ia_css_is_terminal_manifest_sliced_terminal(
-			terminal_manifest), EINVAL);
+			terminal_manifest));
 
 	sliced_param_terminal_manifest =
 		(ia_css_sliced_param_terminal_manifest_t *)terminal_manifest;
@@ -347,7 +346,7 @@ ia_css_program_group_manifest_get_program_terminal_manifest(
 			terminal_index);
 
 	verifexit(ia_css_is_terminal_manifest_program_terminal(
-			terminal_manifest), EINVAL);
+			terminal_manifest));
 
 	program_terminal_manifest =
 		(ia_css_program_terminal_manifest_t *)terminal_manifest;
@@ -371,12 +370,12 @@ ia_css_program_group_manifest_get_term_mnfst(
 		"ia_css_program_group_manifest_get_term_mnfst(%p,%d): enter:\n",
 		manifest, (int)terminal_index);
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	terminal_count =
 		ia_css_program_group_manifest_get_terminal_count(manifest);
 
-	verifexit(terminal_index < terminal_count, EINVAL);
+	verifexit(terminal_index < terminal_count);
 
 	terminal_manifest_base =
 		(ia_css_terminal_manifest_t *)((char *)manifest +
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_private.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_private.h
index 7dbb6ae..7a7814a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_private.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_group_private.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_manifest.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_manifest.c
index c3717d8..02b59ee 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_manifest.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_program_manifest.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -53,7 +53,7 @@ bool ia_css_has_program_manifest_fixed_cell(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		       "ia_css_has_program_manifest_fixed_cell(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	cell_id = ia_css_program_manifest_get_cell_ID(manifest);
 	cell_type_id = ia_css_program_manifest_get_cell_type_ID(manifest);
@@ -132,7 +132,7 @@ ia_css_program_group_manifest_t *ia_css_program_manifest_get_parent(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_get_parent(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	base = (char *)((char *)manifest + manifest->parent_offset);
 
@@ -154,7 +154,7 @@ int ia_css_program_manifest_set_parent_offset(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_set_parent_offset(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	/* parent is at negative offset away from current program offset*/
 	manifest->parent_offset = -program_offset;
@@ -250,7 +250,7 @@ vied_nci_cell_ID_t ia_css_program_manifest_get_cell_ID(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_get_cell_ID(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	cell_id = (vied_nci_cell_ID_t)(manifest->cell_id);
 EXIT:
@@ -287,7 +287,7 @@ vied_nci_cell_type_ID_t ia_css_program_manifest_get_cell_type_ID(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_get_cell_type_ID(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	cell_type_id = (vied_nci_cell_type_ID_t)(manifest->cell_type_id);
 EXIT:
@@ -328,8 +328,8 @@ vied_nci_resource_size_t ia_css_program_manifest_get_int_mem_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_get_int_mem_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(mem_type_id < VIED_NCI_N_MEM_TYPE_ID);
 
 	if (ia_css_has_program_manifest_fixed_cell(manifest)) {
 		vied_nci_cell_ID_t cell_id =
@@ -415,8 +415,8 @@ vied_nci_resource_size_t ia_css_program_manifest_get_ext_mem_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		       "ia_css_program_manifest_get_ext_mem_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(mem_type_id < VIED_NCI_N_DATA_MEM_TYPE_ID);
 
 	ext_mem_size = manifest->ext_mem_size[mem_type_id];
 EXIT:
@@ -457,8 +457,8 @@ vied_nci_resource_size_t ia_css_program_manifest_get_dev_chn_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_program_manifest_get_dev_chn_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
-	verifexit(dev_chn_id < VIED_NCI_N_DEV_CHN_ID, EINVAL);
+	verifexit(manifest != NULL);
+	verifexit(dev_chn_id < VIED_NCI_N_DEV_CHN_ID);
 
 	dev_chn_size = manifest->dev_chn_size[dev_chn_id];
 EXIT:
@@ -739,7 +739,7 @@ int ia_css_program_manifest_print(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, INFO,
 		       "ia_css_program_manifest_print(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 	NOT_USED(fid);
 
 	IA_CSS_TRACE_1(PSYSAPI_STATIC, INFO, "sizeof(manifest) = %d\n",
@@ -748,7 +748,7 @@ int ia_css_program_manifest_print(
 		(int)ia_css_program_manifest_get_program_ID(manifest));
 
 	bitmap = ia_css_program_manifest_get_kernel_bitmap(manifest);
-	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0, EINVAL);
+	verifexit(ia_css_kernel_bitmap_print(bitmap, fid) == 0);
 
 	if (ia_css_has_program_manifest_fixed_cell(manifest)) {
 		vied_nci_cell_ID_t cell_id =
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_terminal_manifest.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_terminal_manifest.c
index 9e7a716..66054ef 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_terminal_manifest.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/psysapi/static/src/ia_css_psys_terminal_manifest.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -240,7 +240,7 @@ ia_css_program_group_manifest_t *ia_css_terminal_manifest_get_parent(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_terminal_manifest_get_parent(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	base = (char *)((char *)manifest + manifest->parent_offset);
 
@@ -258,7 +258,7 @@ int ia_css_terminal_manifest_set_parent_offset(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_terminal_manifest_set_parent_offset(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	/* parent is at negative offset away from current terminal offset*/
 	manifest->parent_offset = -terminal_offset;
@@ -431,9 +431,9 @@ int ia_css_data_terminal_manifest_set_kernel_bitmap_unique(
 					ia_css_kernel_bitmap_clear();
 
 		kernel_bitmap = ia_css_kernel_bitmap_set(kernel_bitmap, index);
-		verifexit(kernel_bitmap != 0, EINVAL);
+		verifexit(kernel_bitmap != 0);
 		verifexit(ia_css_data_terminal_manifest_set_kernel_bitmap(
-				manifest, kernel_bitmap) == 0, EINVAL);
+				manifest, kernel_bitmap) == 0);
 		retval = 0;
 	}
 
@@ -456,7 +456,7 @@ int ia_css_data_terminal_manifest_set_min_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_set_min_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	manifest->min_size[IA_CSS_COL_DIMENSION] =
 		min_size[IA_CSS_COL_DIMENSION];
@@ -481,7 +481,7 @@ int ia_css_data_terminal_manifest_set_max_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_set_max_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	manifest->max_size[IA_CSS_COL_DIMENSION] =
 		max_size[IA_CSS_COL_DIMENSION];
@@ -506,7 +506,7 @@ int ia_css_data_terminal_manifest_get_min_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_get_min_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	min_size[IA_CSS_COL_DIMENSION] =
 		manifest->min_size[IA_CSS_COL_DIMENSION];
@@ -531,7 +531,7 @@ int ia_css_data_terminal_manifest_get_max_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_get_max_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	max_size[IA_CSS_COL_DIMENSION] =
 		manifest->max_size[IA_CSS_COL_DIMENSION];
@@ -556,7 +556,7 @@ int ia_css_data_terminal_manifest_set_min_fragment_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_set_min_fragment_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	manifest->min_fragment_size[IA_CSS_COL_DIMENSION] =
 		min_size[IA_CSS_COL_DIMENSION];
@@ -581,7 +581,7 @@ int ia_css_data_terminal_manifest_set_max_fragment_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_set_max_fragment_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	manifest->max_fragment_size[IA_CSS_COL_DIMENSION] =
 		max_size[IA_CSS_COL_DIMENSION];
@@ -606,7 +606,7 @@ int ia_css_data_terminal_manifest_get_min_fragment_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_get_min_fragment_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	min_size[IA_CSS_COL_DIMENSION] =
 		manifest->min_fragment_size[IA_CSS_COL_DIMENSION];
@@ -631,7 +631,7 @@ int ia_css_data_terminal_manifest_get_max_fragment_size(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, VERBOSE,
 		"ia_css_data_terminal_manifest_get_max_fragment_size(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 
 	max_size[IA_CSS_COL_DIMENSION] =
 		manifest->max_fragment_size[IA_CSS_COL_DIMENSION];
@@ -665,7 +665,7 @@ int ia_css_terminal_manifest_print(
 	IA_CSS_TRACE_0(PSYSAPI_STATIC, INFO,
 		"ia_css_terminal_manifest_print(): enter:\n");
 
-	verifexit(manifest != NULL, EINVAL);
+	verifexit(manifest != NULL);
 	NOT_USED(fid);
 
 	IA_CSS_TRACE_1(PSYSAPI_STATIC, INFO, "sizeof(manifest) = %d\n",
@@ -875,7 +875,7 @@ int ia_css_terminal_manifest_print(
 
 		verifexit(ia_css_kernel_bitmap_print(
 			ia_css_data_terminal_manifest_get_kernel_bitmap(
-				dterminal_manifest), fid) == 0, EINVAL);
+				dterminal_manifest), fid) == 0);
 		IA_CSS_TRACE_1(PSYSAPI_STATIC, INFO,
 			"formats(manifest) = %04x\n",
 		(int)ia_css_data_terminal_manifest_get_frame_format_bitmap(
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
index 02f068a..dfac55e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.c
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
index 6b02467..a2e502e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/psys/bxtB0_gen_reg_dump/ia_css_debug_dump.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/reg_dump_generic_bridge.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/reg_dump_generic_bridge.c
index 5c9dfea..97c48d5 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/reg_dump_generic_bridge.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/reg_dump/src/reg_dump_generic_bridge.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/interface/regmem_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/interface/regmem_access.h
index 8bcac94..2c7c5c6 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/interface/regmem_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/interface/regmem_access.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/regmem.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/regmem.mk
index 8555221..8fdfba4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/regmem.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/regmem.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_access_host.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_access_host.h
index 25c4333..422c7d7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_access_host.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_access_host.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_const.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_const.h
index 13ea3f6..d296e4c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_const.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/regmem/src/regmem_const.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/assert_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/assert_support.h
index 3893222..06be58f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/assert_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/assert_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/cpu_mem_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/cpu_mem_support.h
index 9fbea90..d5ccbbb4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/cpu_mem_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/cpu_mem_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/error_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/error_support.h
index 385bc58..7835d9b 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/error_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/error_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -53,7 +53,7 @@ do {                                \
 	}                               \
 } while (0)
 
-#define verifexit(cond, error_tag)  \
+#define verifexit(cond)  \
 do {                               \
 	if (!(cond)) {              \
 		goto EXIT;         \
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/math_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/math_support.h
index 5e6b124..d5da965 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/math_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/math_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/misc_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/misc_support.h
index 9c618a9..ccb4ace 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/misc_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/misc_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/platform_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/platform_support.h
index 70ecabf..9073373 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/platform_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/platform_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/print_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/print_support.h
index 827f4ce..e683fed 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/print_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/print_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/storage_class.h
index e767c56..5baa8ca 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/type_support.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/type_support.h
index 3c937ae..7f01c19 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/type_support.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/support/type_support.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom.h
index 0b5a289..187781a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom_config.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom_config.h
index 2ab4c24..3213d72 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom_config.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/interface/ia_css_syscom_config.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom.c
index 964d363..5172413 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_config_fw.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_config_fw.h
index 6f63c46..fef3ca7 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_config_fw.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_config_fw.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_context.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_context.h
index 705ba94..de34529 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_context.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/src/ia_css_syscom_context.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/syscom.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/syscom.mk
index 6f1b70e..5d584c1 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/syscom.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/syscom/syscom.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/interface/ia_css_trace.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/interface/ia_css_trace.h
index a76ba86..22b7173 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/interface/ia_css_trace.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/interface/ia_css_trace.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/trace.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/trace.mk
index 35d05cf..bd35af0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/trace.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/trace/trace.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_access.h
index fd8e33f..d3b8faa 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_access.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_map.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_map.h
index 18189cd..5d39063 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_map.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/shared_memory_map.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_config.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_config.h
index 2ecac68..6d7b387 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_config.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_config.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_memory_access_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_memory_access_types.h
index 0f4c49e..3ab3271 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_memory_access_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_memory_access_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access.h
index 08bcb6e..d52b4e3 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_initialization.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_initialization.h
index 5fa588f..63a5843 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_initialization.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_initialization.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_types.h
index 5ada29c..94fcd4e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_subsystem_access_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_types.h
index 2a5db83..f307224 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied/vied/vied_types.h
@@ -1,6 +1,6 @@
 /*
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_nci_acb/interface/vied_nci_acb_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_nci_acb/interface/vied_nci_acb_types.h
index 399a43d..8792eca 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_nci_acb/interface/vied_nci_acb_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_nci_acb/interface/vied_nci_acb_types.h
@@ -1,6 +1,6 @@
 /*
  * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,8 +12,8 @@
 * more details.
  */
 
-#ifndef __VIED_NCI_ACB_TYPES_H
-#define __VIED_NCI_ACB_TYPES_H
+#ifndef __NCI_ACB_TYPES_H
+#define __NCI_ACB_TYPES_H
 
 #include "type_support.h"
 #include "storage_class.h"
@@ -30,33 +30,33 @@
 #define IPU_DEVICE_ACB_PROC_N_LINES_CMD_ID (0x0001)
 
 typedef enum {
-	VIED_NCI_ACB_PORT_ISP = 0,
-	VIED_NCI_ACB_PORT_ACC = 1,
-	VIED_NCI_ACB_PORT_INVALID = 0xFF
-} vied_nci_acb_port_t;
+	NCI_ACB_PORT_ISP = 0,
+	NCI_ACB_PORT_ACC = 1,
+	NCI_ACB_PORT_INVALID = 0xFF
+} nci_acb_port_t;
 
 typedef struct {
 	uint32_t ctrl_id;
-} vied_nci_acb_init_cmd_t;
+} nci_acb_init_cmd_t;
 
 typedef __register struct {
 	uint32_t ctrl_id;
 	uint32_t config_set;
 	uint32_t num_lines;
-} vied_nci_acb_process_cmd_t;
+} nci_acb_process_cmd_t;
 
 typedef struct {
 	/* 0 = ISP, 1 = Acc */
-	vied_nci_acb_port_t in_select;
+	nci_acb_port_t in_select;
 	/* 0 = ISP, 1 = Acc */
-	vied_nci_acb_port_t out_select;
+	nci_acb_port_t out_select;
 	/* When set, Ack will be sent only when Eof arrives */
 	uint32_t ignore_line_num;
 	/* Fork adapter to enable streaming to both output
 	 * (next acb out and isp out)
 	 */
 	uint32_t fork_acb_output;
-} vied_nci_acb_route_t;
+} nci_acb_route_t;
 
 typedef __register struct {
 	/* ACB_FRAME_SIZE */
@@ -67,15 +67,15 @@ typedef __register struct {
 	/* ACB_ACB_SCALE */
 	uint32_t scale_mult;
 	uint32_t scale_nf;
-} vied_nci_acb_control_config_t;
+} nci_acb_control_config_t;
 
 typedef __register struct {
-	vied_nci_acb_control_config_t ctrl;
+	nci_acb_control_config_t ctrl;
 	uint32_t event_queue_address;
 	uint32_t ack_pid;
 	uint32_t ack_sid;
 	uint32_t ack_msg;
-} vied_nci_acb_config_t;
+} nci_acb_config_t;
 
 
-#endif /* __VIED_NCI_ACB_TYPES_H */
+#endif /* __NCI_ACB_TYPES_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_param_storage_class.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_param_storage_class.h
index f93ae48..7e8626a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_param_storage_class.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_param_storage_class.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -17,7 +17,7 @@
 
 #include "storage_class.h"
 
-#ifndef _INLINE_PARAMETERS_
+#ifndef __INLINE_PARAMETERS__
 #define IA_CSS_PARAMETERS_STORAGE_CLASS_H STORAGE_CLASS_EXTERN
 #define IA_CSS_PARAMETERS_STORAGE_CLASS_C
 #else
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal.h
index 8174ab8..c723d7d 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -192,8 +192,8 @@ uint16_t *ia_css_program_terminal_get_line_count(
 	const unsigned int set_count
 );
 
-#ifdef _INLINE_PARAMETERS_
+#ifdef __INLINE_PARAMETERS__
 #include "ia_css_terminal_impl.h"
-#endif /* _INLINE_PARAMETERS_ */
+#endif /* __INLINE_PARAMETERS__ */
 
 #endif /* __IA_CSS_TERMINAL_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest.h
index 2f716d4..dd823a0 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -127,8 +127,8 @@ ia_css_program_terminal_manifest_get_kernel_frgmnt_seq_info_desc(
 	const unsigned int info_index
 );
 
-#ifdef _INLINE_PARAMETERS_
+#ifdef __INLINE_PARAMETERS__
 #include "ia_css_terminal_manifest_impl.h"
-#endif /* _INLINE_PARAMETERS_ */
+#endif /* __INLINE_PARAMETERS__ */
 
 #endif /* __IA_CSS_TERMINAL_MANIFEST_H */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest_types.h
index 97050c7..e88e9a4 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_manifest_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_types.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_types.h
index 1464bce..23ece7f 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_types.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/interface/ia_css_terminal_types.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -45,9 +45,11 @@ typedef struct ia_css_param_payload_s ia_css_param_payload_t;
 typedef struct ia_css_terminal_s ia_css_terminal_t;
 
 /* =================== Generic Parameter Payload - START =================== */
+#define N_UINT64_IN_PARAM_PAYLOAD_STRUCT	1
 #define N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT	4
+
 #define IA_CSS_PARAM_PAYLOAD_STRUCT_BITS \
-	(IA_CSS_UINT64_T_BITS \
+	(N_UINT64_IN_PARAM_PAYLOAD_STRUCT * IA_CSS_UINT64_T_BITS \
 	+ VIED_VADDRESS_BITS \
 	+ N_PADDING_UINT8_IN_PARAM_PAYLOAD_STRUCT * IA_CSS_UINT8_T_BITS)
 
@@ -69,8 +71,10 @@ struct ia_css_param_payload_s {
 
 
 /* ==================== Cached Param Terminal - START ==================== */
+#define N_UINT32_IN_PARAM_SEC_STRUCT 2
+
 #define SIZE_OF_PARAM_SEC_STRUCT_BITS \
-	(2*IA_CSS_UINT32_T_BITS)
+	(N_UINT32_IN_PARAM_SEC_STRUCT * IA_CSS_UINT32_T_BITS)
 
 /* Frame constant parameters section */
 struct ia_css_param_section_desc_s {
@@ -80,11 +84,13 @@ struct ia_css_param_section_desc_s {
 	uint32_t mem_size;
 };
 
-#define N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT 6
+#define N_UINT16_IN_PARAM_TERMINAL_STRUCT		1
+#define N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT	6
+
 #define SIZE_OF_PARAM_TERMINAL_STRUCT_BITS \
 	(SIZE_OF_TERMINAL_STRUCT_BITS \
 	+ IA_CSS_PARAM_PAYLOAD_STRUCT_BITS \
-	+ IA_CSS_UINT16_T_BITS \
+	+ N_UINT16_IN_PARAM_TERMINAL_STRUCT * IA_CSS_UINT16_T_BITS \
 	+ N_PADDING_UINT8_IN_PARAM_TERMINAL_STRUCT * IA_CSS_UINT8_T_BITS)
 
 /* Frame constant parameters terminal */
@@ -101,8 +107,10 @@ struct ia_css_param_terminal_s {
 
 
 /* ==================== Spatial Param Terminal - START ==================== */
+#define N_UINT16_IN_FRAG_GRID_STRUCT (2 * IA_CSS_N_DATA_DIMENSION)
+
 #define SIZE_OF_FRAG_GRID_STRUCT_BITS \
-	(2*IA_CSS_N_DATA_DIMENSION*IA_CSS_UINT16_T_BITS)
+	(N_UINT16_IN_FRAG_GRID_STRUCT * IA_CSS_UINT16_T_BITS)
 
 struct ia_css_fragment_grid_desc_s {
 	/*
@@ -117,10 +125,12 @@ struct ia_css_fragment_grid_desc_s {
 	uint16_t fragment_grid_dimension[IA_CSS_N_DATA_DIMENSION];
 };
 
-#define N_PADDING_UINT8_IN_FRAME_GRID_PARAM_SEC_STRUCT 4
+#define N_UINT32_IN_FRAME_GRID_PARAM_SEC_STRUCT		3
+#define N_PADDING_UINT8_IN_FRAME_GRID_PARAM_SEC_STRUCT	4
+
 #define SIZE_OF_FRAME_GRID_PARAM_SEC_STRUCT_BITS \
-	((3*IA_CSS_UINT32_T_BITS) \
-	+ (N_PADDING_UINT8_IN_FRAME_GRID_PARAM_SEC_STRUCT*IA_CSS_UINT8_T_BITS))
+	(N_UINT32_IN_FRAME_GRID_PARAM_SEC_STRUCT * IA_CSS_UINT32_T_BITS \
+	+ N_PADDING_UINT8_IN_FRAME_GRID_PARAM_SEC_STRUCT * IA_CSS_UINT8_T_BITS)
 
 /*
  * A plane of parameters with spatial aspect
@@ -139,10 +149,12 @@ struct ia_css_frame_grid_param_section_desc_s {
 	uint8_t  padding[N_PADDING_UINT8_IN_FRAME_GRID_PARAM_SEC_STRUCT];
 };
 
+#define N_UINT16_IN_FRAME_GRID_STRUCT_STRUCT IA_CSS_N_DATA_DIMENSION
 #define N_PADDING_UINT8_IN_FRAME_GRID_STRUCT 4
+
 #define SIZE_OF_FRAME_GRID_STRUCT_BITS \
-	((IA_CSS_N_DATA_DIMENSION*IA_CSS_UINT16_T_BITS) \
-	+ (N_PADDING_UINT8_IN_FRAME_GRID_STRUCT*IA_CSS_UINT8_T_BITS))
+	(N_UINT16_IN_FRAME_GRID_STRUCT_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_PADDING_UINT8_IN_FRAME_GRID_STRUCT * IA_CSS_UINT8_T_BITS)
 
 struct ia_css_frame_grid_desc_s {
 	/* Resolution width/height of the frame of
@@ -152,12 +164,15 @@ struct ia_css_frame_grid_desc_s {
 	uint8_t padding[N_PADDING_UINT8_IN_FRAME_GRID_STRUCT];
 };
 
+#define N_UINT32_IN_SPATIAL_PARAM_TERM_STRUCT 1
+#define N_UINT16_IN_SPATIAL_PARAM_TERM_STRUCT 2
+
 #define SIZE_OF_SPATIAL_PARAM_TERM_STRUCT_BITS \
 	(SIZE_OF_TERMINAL_STRUCT_BITS \
 	+ IA_CSS_PARAM_PAYLOAD_STRUCT_BITS \
 	+ SIZE_OF_FRAME_GRID_STRUCT_BITS \
-	+ IA_CSS_UINT32_T_BITS \
-	+ (2*IA_CSS_UINT16_T_BITS))
+	+ N_UINT32_IN_SPATIAL_PARAM_TERM_STRUCT * IA_CSS_UINT32_T_BITS \
+	+ N_UINT16_IN_SPATIAL_PARAM_TERM_STRUCT * IA_CSS_UINT16_T_BITS)
 
 struct ia_css_spatial_param_terminal_s {
 	/* Spatial Parameter terminal base */
@@ -183,8 +198,10 @@ struct ia_css_spatial_param_terminal_s {
 
 
 /* ==================== Sliced Param Terminal - START ==================== */
+#define N_UINT32_IN_SLICE_PARAM_SECTION_DESC_STRUCT 2
+
 #define SIZE_OF_SLICE_PARAM_SECTION_DESC_STRUCT_BITS \
-	(2*IA_CSS_UINT32_T_BITS)
+	(N_UINT32_IN_SLICE_PARAM_SECTION_DESC_STRUCT * IA_CSS_UINT32_T_BITS)
 
 /* A Slice of parameters ready to be trasferred from/to registers */
 struct ia_css_slice_param_section_desc_s {
@@ -194,10 +211,12 @@ struct ia_css_slice_param_section_desc_s {
 	uint32_t mem_size;
 };
 
-#define N_PADDING_UINT8_FRAGMENT_SLICE_DESC_STRUCT 4
+#define N_UINT16_IN_FRAGMENT_SLICE_DESC_STRUCT		2
+#define N_PADDING_UINT8_FRAGMENT_SLICE_DESC_STRUCT	4
+
 #define SIZE_OF_FRAGMENT_SLICE_DESC_STRUCT_BITS \
-	((2*IA_CSS_UINT16_T_BITS) \
-	+ (N_PADDING_UINT8_FRAGMENT_SLICE_DESC_STRUCT*IA_CSS_UINT8_T_BITS))
+	(N_UINT16_IN_FRAGMENT_SLICE_DESC_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_PADDING_UINT8_FRAGMENT_SLICE_DESC_STRUCT * IA_CSS_UINT8_T_BITS)
 
 struct ia_css_fragment_slice_desc_s {
 	/*
@@ -210,13 +229,16 @@ struct ia_css_fragment_slice_desc_s {
 	uint8_t padding[N_PADDING_UINT8_FRAGMENT_SLICE_DESC_STRUCT];
 };
 
-#define N_PADDING_UINT8_SLICED_PARAM_TERMINAL_STRUCT 2
+#define N_UINT32_IN_SLICED_PARAM_TERMINAL_STRUCT	1
+#define N_UINT16_IN_SLICED_PARAM_TERMINAL_STRUCT	1
+#define N_PADDING_UINT8_SLICED_PARAM_TERMINAL_STRUCT	2
+
 #define SIZE_OF_SLICED_PARAM_TERM_STRUCT_BITS \
 	(SIZE_OF_TERMINAL_STRUCT_BITS \
 	+ IA_CSS_PARAM_PAYLOAD_STRUCT_BITS \
-	+ IA_CSS_UINT32_T_BITS \
-	+ IA_CSS_UINT16_T_BITS \
-	+ (N_PADDING_UINT8_SLICED_PARAM_TERMINAL_STRUCT*IA_CSS_UINT8_T_BITS))
+	+ N_UINT32_IN_SLICED_PARAM_TERMINAL_STRUCT * IA_CSS_UINT32_T_BITS \
+	+ N_UINT16_IN_SLICED_PARAM_TERMINAL_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_PADDING_UINT8_SLICED_PARAM_TERMINAL_STRUCT * IA_CSS_UINT8_T_BITS)
 
 struct ia_css_sliced_param_terminal_s {
 	/* Spatial Parameter terminal base */
@@ -237,9 +259,10 @@ struct ia_css_sliced_param_terminal_s {
 
 /* ==================== Program Terminal - START ==================== */
 
-#define N_PADDING_UINT8_IN_FRAG_PARAM_SEC_STRUCT 4
+#define N_UINT32_IN_FRAG_PARAM_SEC_STRUCT 2
+
 #define SIZE_OF_FRAG_PARAM_SEC_STRUCT_BITS \
-	(2*IA_CSS_UINT32_T_BITS)
+	(N_UINT32_IN_FRAG_PARAM_SEC_STRUCT * IA_CSS_UINT32_T_BITS)
 
 /* Fragment constant parameters section */
 struct ia_css_fragment_param_section_desc_s {
@@ -249,8 +272,10 @@ struct ia_css_fragment_param_section_desc_s {
 	uint32_t mem_size;
 };
 
+#define N_UINT16_IN_FRAG_SEQ_COMMAND_STRUCT IA_CSS_N_COMMAND_COUNT
+
 #define SIZE_OF_FRAG_SEQ_COMMANDS_STRUCT_BITS \
-	(4*IA_CSS_UINT16_T_BITS)
+	(N_UINT16_IN_FRAG_SEQ_COMMAND_STRUCT * IA_CSS_UINT16_T_BITS)
 
 /* 4 commands packe together to save memory space */
 struct ia_css_kernel_fragment_sequencer_command_desc_s {
@@ -258,9 +283,10 @@ struct ia_css_kernel_fragment_sequencer_command_desc_s {
 	uint16_t line_count[IA_CSS_N_COMMAND_COUNT];
 };
 
+#define N_UINT16_IN_FRAG_SEQ_INFO_STRUCT (5 * IA_CSS_N_DATA_DIMENSION + 2)
+
 #define SIZE_OF_FRAG_SEQ_INFO_STRUCT_BITS \
-	((5*IA_CSS_UINT16_T_BITS*IA_CSS_N_DATA_DIMENSION) \
-	+ (2*IA_CSS_UINT16_T_BITS))
+	(N_UINT16_IN_FRAG_SEQ_INFO_STRUCT * IA_CSS_UINT16_T_BITS)
 
 struct ia_css_kernel_fragment_sequencer_info_desc_s {
 	/* Slice dimensions */
@@ -285,12 +311,14 @@ struct ia_css_kernel_fragment_sequencer_info_desc_s {
 	uint16_t command_desc_offset;
 };
 
-#define N_PADDING_UINT8_IN_PROG_TERM_STRUCT 4
+#define N_UINT16_IN_PROG_TERM_STRUCT		2
+#define N_PADDING_UINT8_IN_PROG_TERM_STRUCT	4
+
 #define SIZE_OF_PROG_TERM_STRUCT_BITS \
 	(SIZE_OF_TERMINAL_STRUCT_BITS \
 	+ IA_CSS_PARAM_PAYLOAD_STRUCT_BITS \
-	+ (2*IA_CSS_UINT16_T_BITS) \
-	+ (N_PADDING_UINT8_IN_PROG_TERM_STRUCT*IA_CSS_UINT8_T_BITS))
+	+ N_UINT16_IN_PROG_TERM_STRUCT * IA_CSS_UINT16_T_BITS \
+	+ N_PADDING_UINT8_IN_PROG_TERM_STRUCT*IA_CSS_UINT8_T_BITS)
 
 struct ia_css_program_terminal_s {
 	/* Program terminal base */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal.c
index e671534..d97be0e 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,9 +12,9 @@
 * more details.
 */
 
-#ifdef _INLINE_PARAMETERS_
+#ifdef __INLINE_PARAMETERS__
 #include "storage_class.h"
 STORAGE_CLASS_INLINE int __ia_css_param_avoid_warning_on_empty_file(void) { return 0; }
-#else /* _INLINE_PARAMETERS_ */
+#else /* __INLINE_PARAMETERS__ */
 #include "ia_css_terminal_impl.h"
-#endif /* _INLINE_PARAMETERS_ */
+#endif /* __INLINE_PARAMETERS__ */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_impl.h
index fbb21e8..9096427 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest.c
index 916312c..791ab52 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest.c
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
@@ -12,9 +12,9 @@
 * more details.
 */
 
-#ifdef _INLINE_PARAMETERS_
+#ifdef __INLINE_PARAMETERS__
 #include "storage_class.h"
 STORAGE_CLASS_INLINE int __ia_css_param_avoid_warning_on_empty_file(void) { return 0; }
-#else /* _INLINE_PARAMETERS_ */
+#else /* __INLINE_PARAMETERS__ */
 #include "ia_css_terminal_manifest_impl.h"
-#endif /* _INLINE_PARAMETERS_ */
+#endif /* __INLINE_PARAMETERS__ */
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest_impl.h b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest_impl.h
index 7585a6e..8f9925a 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest_impl.h
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/src/ia_css_terminal_manifest_impl.h
@@ -1,6 +1,6 @@
 /**
 * Support for Intel Camera Imaging ISP subsystem.
-* Copyright (c) 2010 - 2016, Intel Corporation.
+* Copyright (c) 2010 - 2017, Intel Corporation.
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/vied_parameters.mk b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/vied_parameters.mk
index ccb3024..c17b098 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/vied_parameters.mk
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/lib/vied_parameters/vied_parameters.mk
@@ -1,6 +1,6 @@
 # #
 # Support for Intel Camera Imaging ISP subsystem.
-# Copyright (c) 2010 - 2016, Intel Corporation.
+# Copyright (c) 2010 - 2017, Intel Corporation.
 #
 # This program is free software; you can redistribute it and/or modify it
 # under the terms and conditions of the GNU General Public License,
diff --git a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/libcsspsys2600.c b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/libcsspsys2600.c
index 9d7215f..bd78f8c 100644
--- a/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/libcsspsys2600.c
+++ b/drivers/media/pci/intel-ipu4/ipu4_bxtB0/lib2600psys/libcsspsys2600.c
@@ -21,10 +21,126 @@
 #include <uapi/linux/intel-ipu4-psys.h>
 
 #include "../../intel-ipu4.h"
-#include "../../intel-ipu4-psys.h"
 #include "../../intel-ipu4-psys-abi.h"
+#include "../../intel-ipu4-psys.h"
 #include "../../intel-ipu4-resources.h"
 #include "../../intel-ipu4-wrapper.h"
+#include "../../intel-ipu4-mmu.h"
+
+#include <ia_css_psys_process_group_cmd_impl.h>
+#include <ia_css_psys_process_private_types.h>
+#include <ia_css_psys_init.h>
+#include <ia_css_psys_transport.h>
+#include <ia_css_terminal_base_types.h>
+#include <ia_css_terminal_types.h>
+#include <ia_css_program_group_param_types.h>
+#include <ia_css_psys_terminal_private_types.h>
+#include <ia_css_program_group_data.h>
+
+#define BASIC_ABI_CHECK
+
+#ifndef BASIC_ABI_CHECK
+#define ABI_CHECK(a, b, field)					\
+	{								\
+	if (offsetof(typeof(*a), field) != offsetof(typeof(*b), field))	\
+		pr_err("intel_ipu4 psys ABI mismatch %s\n",		\
+		       __stringify(field));		    \
+	}
+#else
+#define ABI_CHECK(a, b, field) { }
+#endif
+
+#define SIZE_OF_CHECK(a, b) \
+	{		    \
+	if (sizeof(*a) != sizeof(*b))\
+		pr_err("intel_ipu4 psys ABI size of mismatch %s\n",	\
+		       __stringify(a));					\
+	}								\
+
+static void abi_sanity_checker(void)
+{
+	struct ipu_fw_psys_process_group *ipu_fw_psys_pg;
+	struct ia_css_process_group_s *ia_css_pg;
+
+	struct ipu_fw_psys_process *ipu_fw_psys_ps;
+	struct ia_css_process_s *ia_css_ps;
+
+	struct ipu_fw_psys_srv_init *ipu_fw_psys_init;
+	struct ia_css_psys_server_init *ia_css_psys_init;
+
+	struct ipu_fw_psys_cmd *ipu_fw_psys_cmd;
+	struct ia_css_psys_cmd_s *ia_css_psys_cmd;
+
+	struct ipu_fw_psys_event *ipu_fw_psys_event;
+	struct ia_css_psys_event_s *ia_css_psys_event;
+
+	struct ipu_fw_psys_terminal *ipu_fw_psys_terminal;
+	struct ia_css_terminal_s *ia_css_terminal;
+
+	struct ipu_fw_psys_param_terminal *ipu_fw_psys_param_terminal;
+	struct ia_css_param_terminal_s *ia_css_param_terminal;
+
+	struct ipu_fw_psys_param_payload *ipu_fw_psys_param_payload;
+	struct ia_css_param_payload_s *ia_css_param_payload;
+
+	struct ipu_fw_psys_data_terminal *ipu_fw_psys_data_terminal;
+	struct ia_css_data_terminal_s *ia_css_data_terminal;
+
+	struct ipu_fw_psys_frame *ipu_fw_psys_frame;
+	struct ia_css_frame_s *ia_css_frame;
+
+	struct ipu_fw_psys_frame_descriptor *ipu_fw_psys_frame_descriptor;
+	struct ia_css_frame_descriptor_s *ia_css_frame_descriptor;
+
+	struct ipu_fw_psys_stream *ipu_fw_psys_stream;
+	struct ia_css_stream_s *ia_css_stream;
+
+	SIZE_OF_CHECK(ipu_fw_psys_pg, ia_css_pg);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, ID);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, process_count);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, processes_offset);
+
+	SIZE_OF_CHECK(ipu_fw_psys_ps, ia_css_ps);
+	ABI_CHECK(ipu_fw_psys_ps, ia_css_ps, ID);
+	ABI_CHECK(ipu_fw_psys_ps, ia_css_ps, dev_chn_offset);
+	ABI_CHECK(ipu_fw_psys_ps, ia_css_ps, cell_id);
+
+	SIZE_OF_CHECK(ipu_fw_psys_init, ia_css_psys_init);
+	ABI_CHECK(ipu_fw_psys_init, ia_css_psys_init, icache_prefetch_sp);
+	ABI_CHECK(ipu_fw_psys_init, ia_css_psys_init, icache_prefetch_isp);
+
+	SIZE_OF_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, command);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, msg);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, process_group);
+
+	SIZE_OF_CHECK(ipu_fw_psys_event, ia_css_psys_event);
+	ABI_CHECK(ipu_fw_psys_event, ia_css_psys_event, status);
+	ABI_CHECK(ipu_fw_psys_event, ia_css_psys_event, token);
+
+	SIZE_OF_CHECK(ipu_fw_psys_terminal, ia_css_terminal);
+	ABI_CHECK(ipu_fw_psys_terminal, ia_css_terminal, terminal_type);
+
+	SIZE_OF_CHECK(ipu_fw_psys_param_terminal, ia_css_param_terminal);
+	ABI_CHECK(ipu_fw_psys_param_terminal, ia_css_param_terminal,
+		  param_payload);
+
+	SIZE_OF_CHECK(ipu_fw_psys_param_payload, ia_css_param_payload);
+	ABI_CHECK(ipu_fw_psys_param_payload, ia_css_param_payload, buffer);
+
+	SIZE_OF_CHECK(ipu_fw_psys_data_terminal, ia_css_data_terminal);
+	ABI_CHECK(ipu_fw_psys_data_terminal, ia_css_data_terminal, frame);
+	ABI_CHECK(ipu_fw_psys_data_terminal, ia_css_data_terminal,
+		  connection_type);
+
+	SIZE_OF_CHECK(ipu_fw_psys_frame, ia_css_frame);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, data_bytes);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, data);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, buffer_state);
+
+	SIZE_OF_CHECK(ipu_fw_psys_frame_descriptor, ia_css_frame_descriptor);
+	SIZE_OF_CHECK(ipu_fw_psys_stream, ia_css_stream);
+}
 
 /*Implement SMIF/Vied subsystem access here */
 
@@ -209,6 +325,24 @@ int libcsspsys2600_pg_set_ipu_vaddress(struct intel_ipu4_psys_kcmd *kcmd,
 						     kcmd->kpg->pg, vaddress);
 }
 
+int libcsspsys2600_pg_get_load_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_load_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
+int libcsspsys2600_pg_get_init_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_init_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
+int libcsspsys2600_pg_get_processing_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_processing_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
 void *libcsspsys2600_pg_get_terminal(struct intel_ipu4_psys_kcmd *kcmd,
 							 int index)
 {
@@ -227,6 +361,9 @@ static int libcsspsys2600_open(struct intel_ipu4_psys *psys)
 	bool opened;
 	int retry = INTEL_IPU4_PSYS_OPEN_RETRY;
 
+	intel_ipu4_wrapper_init(PSYS_MMID, &psys->adev->dev,
+				psys->pdata->base);
+
 	server_init->icache_prefetch_sp = psys->icache_prefetch_sp;
 	server_init->icache_prefetch_isp = psys->icache_prefetch_isp;
 
@@ -301,6 +438,9 @@ struct intel_ipu4_psys_abi abi = {
 	.pg_set_ipu_vaddress = libcsspsys2600_pg_set_ipu_vaddress,
 	.pg_get_terminal = libcsspsys2600_pg_get_terminal,
 	.pg_set_token = libcsspsys2600_pg_set_token,
+	.pg_get_load_cycles = libcsspsys2600_pg_get_load_cycles,
+	.pg_get_init_cycles = libcsspsys2600_pg_get_init_cycles,
+	.pg_get_processing_cycles = libcsspsys2600_pg_get_processing_cycles,
 	.open = libcsspsys2600_open,
 	.close = libcsspsys2600_close,
 };
@@ -347,6 +487,9 @@ static int __init libcsspsys2600_init(void)
 		ipu_device_cell_memory_address(
 			SPC0, IPU_DEVICE_SP2600_CONTROL_DMEM);
 	intel_ipu4_psys_abi_init_ext(&abi);
+
+	abi_sanity_checker();
+
 	return 0;
 
 out_syscom_config_free:
diff --git a/drivers/media/pci/intel-ipu4/ipu5A0/Makefile b/drivers/media/pci/intel-ipu4/ipu5A0/Makefile
index ffd50ad..1aa02f7 100644
--- a/drivers/media/pci/intel-ipu4/ipu5A0/Makefile
+++ b/drivers/media/pci/intel-ipu4/ipu5A0/Makefile
@@ -20,8 +20,10 @@ ccflags-y += -DIPU_STEP_IPU5A0
 
 include $(srcpath)/$(src)/../Makefile.link
 include $(srcpath)/$(src)/../Makefile.common
+ifdef CONFIG_VIDEO_INTEL_IPU_FW_LIB
 include $(srcpath)/$(src)/../Makefile.lib2600.ipu5
 include $(srcpath)/$(src)/../Makefile.lib2600psys.ipu5
+endif
 
 ccflags-y += -I$(srcpath)/$(src)/../../../../../include/
 ccflags-y += -I$(srcpath)/$(src)/../
diff --git a/drivers/media/pci/intel-ipu4/ipu5A0/Makefile.ipu5isys_src b/drivers/media/pci/intel-ipu4/ipu5A0/Makefile.ipu5isys_src
index c82b58e..c9044fc 100644
--- a/drivers/media/pci/intel-ipu4/ipu5A0/Makefile.ipu5isys_src
+++ b/drivers/media/pci/intel-ipu4/ipu5A0/Makefile.ipu5isys_src
@@ -1,15 +1,19 @@
 IPU_ISYSLIB_SRC = \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_private.o \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public.o \
+	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public_trace.o
+
+ifeq ($(CONFIG_VIDEO_INTEL_IPU5), m)
+IPU_ISYSLIB_SRC += \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/buffer_access.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_input_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_output_buffer.o \
 	$(IPU_ISYSLIB_ROOT_REL)/buffer/src/cpu/ia_css_shared_buffer.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_private.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public.o \
-	$(IPU_ISYSLIB_ROOT_REL)/isysapi/src/ia_css_isys_public_trace.o \
 	$(IPU_ISYSLIB_ROOT_REL)/pkg_dir/src/ia_css_pkg_dir.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/queue.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/recv_port.o \
 	$(IPU_ISYSLIB_ROOT_REL)/port/src/send_port.o \
 	$(IPU_ISYSLIB_ROOT_REL)/reg_dump/src/reg_dump_generic_bridge.o \
-	$(IPU_ISYSLIB_ROOT_REL)/syscom/src/ia_css_syscom.o
\ No newline at end of file
+	$(IPU_ISYSLIB_ROOT_REL)/syscom/src/ia_css_syscom.o
+endif
diff --git a/drivers/media/pci/intel-ipu4/ipu5A0/lib2600psys/libcsspsys2600.c b/drivers/media/pci/intel-ipu4/ipu5A0/lib2600psys/libcsspsys2600.c
index 9d7215f..96e8925 100644
--- a/drivers/media/pci/intel-ipu4/ipu5A0/lib2600psys/libcsspsys2600.c
+++ b/drivers/media/pci/intel-ipu4/ipu5A0/lib2600psys/libcsspsys2600.c
@@ -21,10 +21,116 @@
 #include <uapi/linux/intel-ipu4-psys.h>
 
 #include "../../intel-ipu4.h"
-#include "../../intel-ipu4-psys.h"
 #include "../../intel-ipu4-psys-abi.h"
+#include "../../intel-ipu4-psys.h"
 #include "../../intel-ipu4-resources.h"
 #include "../../intel-ipu4-wrapper.h"
+#include "../../intel-ipu4-mmu.h"
+
+#include <ia_css_psys_process_group_cmd_impl.h>
+#include <ia_css_psys_init.h>
+#include <ia_css_psys_transport.h>
+#include <ia_css_terminal_base_types.h>
+#include <ia_css_terminal_types.h>
+#include <ia_css_program_group_param_types.h>
+#include <ia_css_program_group_data.h>
+
+#define BASIC_ABI_CHECK
+
+#ifndef BASIC_ABI_CHECK
+#define ABI_CHECK(a, b, field)						\
+	{								\
+	if (offsetof(typeof(*a), field) != offsetof(typeof(*b), field))	\
+		pr_err("intel_ipu4 psys ABI mismatch %s\n",		\
+		       __stringify(field));				\
+	}
+#else
+#define ABI_CHECK(a, b, field) { }
+#endif
+
+#define SIZE_OF_CHECK(a, b)						\
+	{								\
+		if (sizeof(*a) != sizeof(*b))				\
+		pr_err("intel_ipu4 psys ABI size of mismatch %s\n",	\
+		       __stringify(a));					\
+	}
+
+#define SIZE_CHECK(a, b)						\
+	{								\
+		if ((a) != (b))				\
+		pr_err("intel_ipu4 psys ABI size mismatch %s\n",	\
+		       __stringify(a));					\
+	}
+
+static void abi_sanity_checker(void)
+{
+	struct ipu_fw_psys_process_group *ipu_fw_psys_pg;
+	struct ia_css_process_group_s *ia_css_pg;
+
+	struct ipu_fw_psys_srv_init *ipu_fw_psys_init;
+	struct ia_css_psys_server_init *ia_css_psys_init;
+
+	struct ipu_fw_psys_cmd *ipu_fw_psys_cmd;
+	struct ia_css_psys_cmd_s *ia_css_psys_cmd;
+
+	struct ipu_fw_psys_event *ipu_fw_psys_event;
+	struct ia_css_psys_event_s *ia_css_psys_event;
+
+	struct ipu_fw_psys_terminal *ipu_fw_psys_terminal;
+	struct ia_css_terminal_s *ia_css_terminal;
+
+	struct ipu_fw_psys_param_terminal *ipu_fw_psys_param_terminal;
+	struct ia_css_param_terminal_s *ia_css_param_terminal;
+
+	struct ipu_fw_psys_param_payload *ipu_fw_psys_param_payload;
+	struct ia_css_param_payload_s *ia_css_param_payload;
+
+	struct ipu_fw_psys_frame *ipu_fw_psys_frame;
+	struct ia_css_frame_s *ia_css_frame;
+
+	struct ipu_fw_psys_frame_descriptor *ipu_fw_psys_frame_descriptor;
+	struct ia_css_frame_descriptor_s *ia_css_frame_descriptor;
+
+	struct ipu_fw_psys_stream *ipu_fw_psys_stream;
+	struct ia_css_stream_s *ia_css_stream;
+
+	SIZE_OF_CHECK(ipu_fw_psys_pg, ia_css_pg);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, ID);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, process_count);
+	ABI_CHECK(ipu_fw_psys_pg, ia_css_pg, processes_offset);
+
+	SIZE_OF_CHECK(ipu_fw_psys_init, ia_css_psys_init);
+	ABI_CHECK(ipu_fw_psys_init, ia_css_psys_init, icache_prefetch_sp);
+	ABI_CHECK(ipu_fw_psys_init, ia_css_psys_init, icache_prefetch_isp);
+
+	SIZE_OF_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, command);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, msg);
+	ABI_CHECK(ipu_fw_psys_cmd, ia_css_psys_cmd, process_group);
+
+	SIZE_OF_CHECK(ipu_fw_psys_event, ia_css_psys_event);
+	ABI_CHECK(ipu_fw_psys_event, ia_css_psys_event, status);
+	ABI_CHECK(ipu_fw_psys_event, ia_css_psys_event, token);
+
+	SIZE_OF_CHECK(ipu_fw_psys_terminal, ia_css_terminal);
+	ABI_CHECK(ipu_fw_psys_terminal, ia_css_terminal, terminal_type);
+
+	SIZE_OF_CHECK(ipu_fw_psys_param_terminal, ia_css_param_terminal);
+	ABI_CHECK(ipu_fw_psys_param_terminal, ia_css_param_terminal,
+		  param_payload);
+
+	SIZE_OF_CHECK(ipu_fw_psys_param_payload, ia_css_param_payload);
+	ABI_CHECK(ipu_fw_psys_param_payload, ia_css_param_payload, buffer);
+
+	SIZE_OF_CHECK(ipu_fw_psys_frame, ia_css_frame);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, data_bytes);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, data);
+	ABI_CHECK(ipu_fw_psys_frame, ia_css_frame, buffer_state);
+
+	SIZE_OF_CHECK(ipu_fw_psys_frame_descriptor, ia_css_frame_descriptor);
+	SIZE_OF_CHECK(ipu_fw_psys_stream, ia_css_stream);
+	SIZE_CHECK(IPU_FW_PSYS_N_CELL_ID, VIED_NCI_N_CELL_ID);
+}
 
 /*Implement SMIF/Vied subsystem access here */
 
@@ -90,7 +196,7 @@ static struct intel_ipu4_psys_kcmd *libcsspsys2600_pg_rcv(
 	return kcmd ? kcmd : ERR_PTR(-EIO);
 }
 
-static int libcsspsys2600_terminal_set(struct ia_css_terminal *terminal,
+static int libcsspsys2600_terminal_set(struct ipu_fw_psys_terminal *terminal,
 				       int terminal_idx,
 				       struct intel_ipu4_psys_kcmd *kcmd,
 				       vied_vaddress_t buffer,
@@ -209,6 +315,24 @@ int libcsspsys2600_pg_set_ipu_vaddress(struct intel_ipu4_psys_kcmd *kcmd,
 						     kcmd->kpg->pg, vaddress);
 }
 
+int libcsspsys2600_pg_get_load_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_load_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
+int libcsspsys2600_pg_get_init_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_init_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
+int libcsspsys2600_pg_get_processing_cycles(struct intel_ipu4_psys_kcmd *kcmd)
+{
+	return ia_css_process_group_get_pg_processing_cycles(
+		(ia_css_process_group_t *)kcmd->kpg->pg);
+}
+
 void *libcsspsys2600_pg_get_terminal(struct intel_ipu4_psys_kcmd *kcmd,
 							 int index)
 {
@@ -227,6 +351,9 @@ static int libcsspsys2600_open(struct intel_ipu4_psys *psys)
 	bool opened;
 	int retry = INTEL_IPU4_PSYS_OPEN_RETRY;
 
+	intel_ipu4_wrapper_init(PSYS_MMID, &psys->adev->dev,
+				psys->pdata->base);
+
 	server_init->icache_prefetch_sp = psys->icache_prefetch_sp;
 	server_init->icache_prefetch_isp = psys->icache_prefetch_isp;
 
@@ -301,6 +428,9 @@ struct intel_ipu4_psys_abi abi = {
 	.pg_set_ipu_vaddress = libcsspsys2600_pg_set_ipu_vaddress,
 	.pg_get_terminal = libcsspsys2600_pg_get_terminal,
 	.pg_set_token = libcsspsys2600_pg_set_token,
+	.pg_get_load_cycles = libcsspsys2600_pg_get_load_cycles,
+	.pg_get_init_cycles = libcsspsys2600_pg_get_init_cycles,
+	.pg_get_processing_cycles = libcsspsys2600_pg_get_processing_cycles,
 	.open = libcsspsys2600_open,
 	.close = libcsspsys2600_close,
 };
@@ -347,6 +477,9 @@ static int __init libcsspsys2600_init(void)
 		ipu_device_cell_memory_address(
 			SPC0, IPU_DEVICE_SP2600_CONTROL_DMEM);
 	intel_ipu4_psys_abi_init_ext(&abi);
+
+	abi_sanity_checker();
+
 	return 0;
 
 out_syscom_config_free:
diff --git a/drivers/media/pci/intel-ipu4/libintel-ipu4.c b/drivers/media/pci/intel-ipu4/libintel-ipu4.c
index ba7053c..cfaeb6b 100644
--- a/drivers/media/pci/intel-ipu4/libintel-ipu4.c
+++ b/drivers/media/pci/intel-ipu4/libintel-ipu4.c
@@ -79,7 +79,8 @@ static int intel_ipu4_isys_library_init(struct intel_ipu4_isys *isys,
 
 	if (!wrapper_init_done) {
 		wrapper_init_done = true;
-		intel_ipu4_wrapper_set_device(dev, ISYS_MMID);
+		intel_ipu4_wrapper_init(ISYS_MMID, &isys->adev->dev,
+							    isys->pdata->base);
 	}
 
 	/*
diff --git a/drivers/media/pci/intel-ipu4/libintel-ipu5.c b/drivers/media/pci/intel-ipu4/libintel-ipu5.c
index 4b13794..7437750 100644
--- a/drivers/media/pci/intel-ipu4/libintel-ipu5.c
+++ b/drivers/media/pci/intel-ipu4/libintel-ipu5.c
@@ -79,7 +79,8 @@ static int intel_ipu4_isys_library_init(struct intel_ipu4_isys *isys,
 
 	if (!wrapper_init_done) {
 		wrapper_init_done = true;
-		intel_ipu4_wrapper_set_device(dev, ISYS_MMID);
+		intel_ipu4_wrapper_init(ISYS_MMID, &isys->adev->dev,
+					isys->pdata->base);
 	}
 
 	/*
diff --git a/include/media/intel-ipu4-acpi.h b/include/media/intel-ipu4-acpi.h
new file mode 100644
index 0000000..af361dd
--- /dev/null
+++ b/include/media/intel-ipu4-acpi.h
@@ -0,0 +1,38 @@
+/*
+ * Copyright (c) 2016 Intel Corporation.
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License version
+ * 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ */
+
+#ifndef MEDIA_INTEL_IPU4_ACPI_H
+#define MEDIA_INTEL_IPU4_ACPI_H
+
+#include <media/intel-ipu4-isys.h>
+#include "intel-ipu4-isys.h"
+
+int intel_ipu4_get_acpi_devices(void *driver_data,
+				struct device *dev,
+				int (*fn)
+				(struct device *, void *,
+				 struct intel_ipu4_isys_csi2_config *csi2,
+				 bool reprobe));
+
+struct intel_ipu4_regulator {
+	char *src_dev_name;
+	char *src_rail;
+	char *dest_rail;
+};
+
+/* These can be override by plarform data. */
+extern const struct intel_ipu4_regulator imx230regulators[] __weak;
+extern const struct intel_ipu4_regulator ov8858regulators[] __weak;
+
+#endif
diff --git a/include/uapi/linux/intel-ipu4-isys-isa-fw.h b/include/uapi/linux/intel-ipu4-isys-isa-fw.h
new file mode 100644
index 0000000..22c85a3
--- /dev/null
+++ b/include/uapi/linux/intel-ipu4-isys-isa-fw.h
@@ -0,0 +1,123 @@
+/*
+ * Copyright (c) 2014--2016 Intel Corporation.
+ *
+ * This program is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU General Public License version
+ * 2 as published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ */
+
+#ifndef INTEL_IPU4_ISYS_ISA_FW_H
+#define INTEL_IPU4_ISYS_ISA_FW_H
+
+#define ia_css_terminal_offsets(pg)			\
+	((uint16_t *)((void *)(pg) +			\
+		      (pg)->terminals_offset_offset))
+
+#define to_ia_css_terminal(pg, i)				\
+	((struct ia_css_terminal *)(				\
+		 (void *)(pg) + ia_css_terminal_offsets(pg)[i]))
+
+#define ia_css_terminal_offset(pg, i)					\
+	(!(i) ? sizeof *(pg) + ((((pg)->terminal_count - 1) | 3) + 1)	\
+	 * sizeof(uint16_t) :						\
+	 ia_css_terminal_offsets(pg)[(i) - 1]				\
+	 + to_ia_css_terminal(pg, (i) - 1)->size)
+
+/* BEGIN DEFINITIONS IMPORTED FROM FIRMWARE */
+
+#define N_IPU_FW_ISYS_KERNEL_ID 20
+
+struct ia_css_process_group_light {
+	uint32_t size;
+	uint16_t terminals_offset_offset;
+	uint16_t terminal_count;
+};
+
+enum ia_css_terminal_type {
+	IPU_FW_TERMINAL_TYPE_DATA_IN = 0,
+	IPU_FW_TERMINAL_TYPE_DATA_OUT,
+	IPU_FW_TERMINAL_TYPE_PARAM_STREAM,
+	IPU_FW_TERMINAL_TYPE_PARAM_CACHED_IN,
+	IPU_FW_TERMINAL_TYPE_PARAM_CACHED_OUT,
+	IPU_FW_TERMINAL_TYPE_PARAM_SPATIAL_IN,
+	IPU_FW_TERMINAL_TYPE_PARAM_SPATIAL_OUT,
+	IPU_FW_TERMINAL_TYPE_PARAM_SLICED_IN,
+	IPU_FW_TERMINAL_TYPE_PARAM_SLICED_OUT,
+	IPU_FW_TERMINAL_TYPE_STATE_IN,
+	IPU_FW_TERMINAL_TYPE_STATE_OUT,
+	IPU_FW_TERMINAL_TYPE_PROGRAM,
+	IPU_FW_N_TERMINAL_TYPES
+};
+
+struct ia_css_terminal {
+	enum ia_css_terminal_type terminal_type;
+	int16_t parent_offset;
+	uint16_t size;
+	uint16_t tm_index;
+	uint8_t id;
+	uint8_t padding[5];
+};
+
+struct ia_css_param_payload {
+	uint64_t host_buffer;
+	uint32_t buffer;
+	uint8_t padding[4];
+};
+
+struct ia_css_param_section_desc {
+	uint32_t mem_offset;
+	uint32_t mem_size;
+};
+
+struct ia_css_param_terminal {
+	struct ia_css_terminal base;
+	struct ia_css_param_payload param_payload;
+	uint16_t param_section_desc_offset;
+	uint8_t padding[6];
+};
+
+struct ia_css_program_terminal {
+	struct ia_css_terminal base;
+	struct ia_css_param_payload param_payload;
+	uint16_t fragment_param_section_desc_offset;
+	uint16_t kernel_fragment_sequencer_info_desc_offset;
+	uint8_t padding[4];
+};
+
+struct ia_css_sliced_param_terminal {
+	struct ia_css_terminal base;
+	struct ia_css_param_payload param_payload;
+	uint32_t kernel_id;
+	uint16_t fragment_slice_desc_offset;
+	uint8_t padding[2];
+};
+
+enum ia_css_dimension {
+	IPU_FW_COL_DIMENSION = 0,
+	IPU_FW_ROW_DIMENSION = 1,
+	IPU_FW_N_DATA_DIMENSION = 2
+};
+
+struct ia_css_frame_grid_desc {
+	uint16_t frame_grid_dimension[IPU_FW_N_DATA_DIMENSION];
+	uint8_t padding[4];
+};
+
+struct ia_css_spatial_param_terminal {
+	struct ia_css_terminal base;
+	struct ia_css_param_payload param_payload;
+	struct ia_css_frame_grid_desc frame_grid_desc;
+	uint32_t kernel_id;
+	uint16_t frame_grid_param_section_desc_offset;
+	uint16_t fragment_grid_desc_offset;
+};
+
+/* END DEFINITIONS IMPORTED FROM FIRMWARE */
+
+#endif /* INTEL_IPU4_ISYS_ISA_FW_H */
-- 
1.7.5.4

