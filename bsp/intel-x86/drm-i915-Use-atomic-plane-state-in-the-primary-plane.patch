From bcf6f11e6b7ec5083c83dd7441307b8f77e97019 Mon Sep 17 00:00:00 2001
From: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Date: Thu, 10 Sep 2015 16:07:56 +0200
Subject: [PATCH 135/435] drm/i915: Use atomic plane state in the primary
 plane update.

commit 'd4b08630fb6e3fe9948456b09feb223fba2b48a6' upstream

Signed-off-by: Maarten Lankhorst <maarten.lankhorst@linux.intel.com>
Signed-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>
Signed-off-by: Hu <yadi.hu@windriver.com>
---
 drivers/gpu/drm/i915/intel_display.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/gpu/drm/i915/intel_display.c b/drivers/gpu/drm/i915/intel_display.c
index 97900ac..51cbff13 100644
--- a/drivers/gpu/drm/i915/intel_display.c
+++ b/drivers/gpu/drm/i915/intel_display.c
@@ -13448,7 +13448,9 @@ intel_commit_primary_plane(struct drm_plane *plane,
 		/* FIXME: kill this fastboot hack */
 		intel_update_pipe_size(intel_crtc);
 
-	dev_priv->display.update_primary_plane(crtc, fb, crtc->x, crtc->y);
+	dev_priv->display.update_primary_plane(crtc, fb,
+					       state->src.x1 >> 16,
+					       state->src.y1 >> 16);
 }
 
 static void
-- 
1.7.5.4

