From 10b3aae1c6f3d808c26601bbee68725c85f6d334 Mon Sep 17 00:00:00 2001
From: fupan li <fupan.li@windriver.com>
Date: Tue, 31 Mar 2015 13:39:51 +0800
Subject: [PATCH 9/9] atomisp: register i2c subsystem before gpu's i2c

Since the baytrail's designware i2c controller dynamically allocating its bus number,
which is defined as below:

        [baytrail] = {
                .bus_num = -1,
                .
                .
         }
But the ov5640 and mt9m114 camera connected to the fourth designware i2c controller
are registered to i2c bus number ANVL_I2C_BUS_NUM, which is defined as 3.

We should register i2c subsystem before gpu's i2c controller, thus can make sure the designware
i2c controller get a bus number 3.

Signed-off-by: fupan li <fupan.li@windriver.com>
---
 drivers/Makefile |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/Makefile b/drivers/Makefile
index 532e0c6..d74670d 100644
--- a/drivers/Makefile
+++ b/drivers/Makefile
@@ -44,6 +44,7 @@ obj-$(CONFIG_RESET_CONTROLLER)	+= reset/
 # default.
 obj-y				+= tty/
 obj-y				+= char/
+obj-y                           += i2c/
 
 # gpu/ comes after char for AGP vs DRM startup
 obj-y				+= gpu/
@@ -91,7 +92,7 @@ obj-$(CONFIG_GAMEPORT)		+= input/gameport/
 obj-$(CONFIG_INPUT)		+= input/
 obj-$(CONFIG_I2O)		+= message/
 obj-$(CONFIG_RTC_LIB)		+= rtc/
-obj-y				+= i2c/ media/
+obj-y				+= media/
 obj-$(CONFIG_PPS)		+= pps/
 obj-$(CONFIG_PTP_1588_CLOCK)	+= ptp/
 obj-$(CONFIG_W1)		+= w1/
-- 
1.7.5.4

