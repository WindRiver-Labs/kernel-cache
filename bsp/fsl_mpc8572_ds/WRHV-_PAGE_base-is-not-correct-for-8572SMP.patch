From bc72ee75fa7defe6efa1fa7dd8f74f1fdf3f7e98 Mon Sep 17 00:00:00 2001
From: Jeremy McNicoll <jeremy.mcnicoll@windriver.com>
Date: Sun, 6 Jun 2010 02:50:00 -0400
Subject: [PATCH] WRHV: _PAGE_base is not correct for 8572SMP

Could someone else look at this and let me know.
If I can delete these 2 lines....

thanks.
---
 arch/powerpc/include/asm/pte-common.h |   10 +++++++---
 1 files changed, 7 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/include/asm/pte-common.h b/arch/powerpc/include/asm/pte-common.h
index 53c0a46..5df35ff 100644
--- a/arch/powerpc/include/asm/pte-common.h
+++ b/arch/powerpc/include/asm/pte-common.h
@@ -105,9 +105,13 @@ extern unsigned long bad_call_to_PMD_PAGE_SIZE(void);
  * the processor might need it for DMA coherency.
  */
 #define _PAGE_BASE_NC	(_PAGE_PRESENT | _PAGE_ACCESSED | _PAGE_PSIZE)
-#if defined(CONFIG_SMP) || defined(CONFIG_PPC_STD_MMU)
-#define _PAGE_BASE	(_PAGE_BASE_NC | _PAGE_COHERENT)
-#elif defined(CONFIG_WRHV_E500)
+/* The 8572 does not need a new version of PAGE_BASE , does the
+  P4080 need its own version?  Its the weekend and I need some time
+  away from work ;-) */ 
+
+//#if defined(CONFIG_SMP) || defined(CONFIG_PPC_STD_MMU)
+//#define _PAGE_BASE	(_PAGE_BASE_NC | _PAGE_COHERENT)
+#if defined(CONFIG_WRHV_E500)
 #define _PAGE_BASE (_PAGE_PRESENT | _PAGE_ACCESSED | VMMU_PROT_USER_READ)
 #else
 #define _PAGE_BASE	(_PAGE_BASE_NC)
-- 
1.6.0.3

