From 60ad9770ab5f6927ffa9cc99dc4fe6fe99e9da81 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Thu, 22 Oct 2009 14:01:17 -0400
Subject: [PATCH 1/8] vbi: GPLify arch specific files

This makes the remaining arch specific files GPL, as well as
removing the old changelog info that we don't want to see.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/powerpc/include/asm/arch_vbi.h    |   44 ++++++-------------
 arch/powerpc/include/asm/ppc85xx_vbi.h |   28 ++++++------
 arch/powerpc/include/asm/reg_vbi.h     |   25 +++++------
 arch/powerpc/include/asm/vbi.h         |   23 ++++++----
 include/asm-x86/arch_vbi.h             |   30 ++++++-------
 include/asm-x86/reg_vbi.h              |   49 +++++----------------
 include/asm-x86/sys_vbi.h              |   73 +++++---------------------------
 include/asm-x86/vbi.h                  |   23 +++++-----
 8 files changed, 100 insertions(+), 195 deletions(-)

diff --git a/arch/powerpc/include/asm/arch_vbi.h b/arch/powerpc/include/asm/arch_vbi.h
index f58b600..529d1f3 100644
--- a/arch/powerpc/include/asm/arch_vbi.h
+++ b/arch/powerpc/include/asm/arch_vbi.h
@@ -1,35 +1,17 @@
-/* vbiPpcArch.h - PowerPC architecture specific definitions */
-
-/* Copyright 2009 Wind River Systems, Inc. */
-
 /*
-modification history
---------------------
-01u,08sep09,dtr  Add definitions for new API vbiExcOffsetsGet/Set.
-01t,28aug09,mmi  add MSG_HEADER definitions
-01s,26aug09,mmi  fix defect WIND00178026 and WIND00178028: remove extra ";"
-		 from VBI_STATUS_ADDR_GET (), VBI_CNTRL_ADDR_GET(), 
-		 VBI_CONFIG_ADDR_GET(). 
-01r,27jul09,mpk  add hardware register set to vbi
-01q,18jul09,mmi  add bsp server message layout
-01p,16jul09,mmi  initialize to zero the register loaded in intdisable field
-01o,15jul09,mmi  fix VBI_INT_VCORE_LOCK() error
-01n,14jul09,mmi  add macro to find base addresses for status, control and
-                 config
-01m,07jul09,mmi  fix comment of int locking macro
-01l,22jun09,mmi  add assembly macros to read regs.
-01k,11jun09,mmi  add interrupts macros
-01j,10jun09,mmi  add assembly macro's for context switch and interrupts
-01i,08jun09,md   add define for maximum number of cores
-01h,08jun09,mmi  update descriptions
-01g,25may09,md   add byte order define
-01f,09feb09,mmi  add defines for vbi exception management
-01e,29jan09,dtr  debug.
-01d,29jan09,dtr  Remove some old defs.
-01c,28jan09,dtr  Use new structures.
-01b,23jan09,mmi  add debug registers
-01a,21jan09,mmi  created
-*/
+ * arch_vbi.h - PowerPC architecture specific definitions
+ *
+ * Copyright 2009 Wind River Systems, Inc.
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
+ */
 
 #ifndef __INCvbiPpcArchh
 #define __INCvbiPpcArchh
diff --git a/arch/powerpc/include/asm/ppc85xx_vbi.h b/arch/powerpc/include/asm/ppc85xx_vbi.h
index ae71d29..3213fe9 100644
--- a/arch/powerpc/include/asm/ppc85xx_vbi.h
+++ b/arch/powerpc/include/asm/ppc85xx_vbi.h
@@ -1,18 +1,18 @@
-/* ppc85xx.h - PowerPC specific header */
-
-/* Copyright 2007 Wind River Systems, Inc. */
-
 /*
-modification history
---------------------
-01g,15sep09,dtr  Seperate out e500mc specific defs to another header file.
-01f,25aug09,dtr  Add additional SPR registers for E500MC.
-01e,19jun09,dtr  Modifying for e500mc. Some cleanup.
-01d,23apr09,dtr  Set mask for allowed MSR values.
-01c,11feb09,dtr  Assume e500v2 support.
-01b,17oct07,md   remove MSR specific settings
-01a,03oct07,md   written from VxWorks ppc85xx.h version 01v 
-*/
+ * ppc85xx.h - PowerPC specific header
+ *
+ * Copyright 2007 Wind River Systems, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
+ */
 
 #ifndef __INCppc85xxh
 #define __INCppc85xxh
diff --git a/arch/powerpc/include/asm/reg_vbi.h b/arch/powerpc/include/asm/reg_vbi.h
index 7f5abe7..9afd54d 100644
--- a/arch/powerpc/include/asm/reg_vbi.h
+++ b/arch/powerpc/include/asm/reg_vbi.h
@@ -1,22 +1,19 @@
-/* sys/ppc/regs.h - PowerPC cpu registers */
-
 /*
+ *  ppc reg_vbi.h - PowerPC cpu registers
+ *
  * Copyright (c) 2007 Wind River Systems, Inc.
  *
- * The right to copy, distribute or otherwise make use of this software
- * may be licensed only pursuant to the terms of an applicable Wind River
- * license agreement. 
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
  */
 
-/*
-modification history
---------------------
-01d,31aug09,mmi  mv VBI_HREG_SET to vbiPpcArch.h
-01c,15jul09,dtr  Add PPCE500MC CPU.
-01b,30jul09,mpk  add VBI_HREG_SET for supporting register read, write
-01a,03oct07,md   written based on VxWorks 01l version
-*/
-
 #ifndef __INCppcRegsh
 #define __INCppcRegsh
 
diff --git a/arch/powerpc/include/asm/vbi.h b/arch/powerpc/include/asm/vbi.h
index 427de23..17c5b6c 100644
--- a/arch/powerpc/include/asm/vbi.h
+++ b/arch/powerpc/include/asm/vbi.h
@@ -1,13 +1,18 @@
-/* sys/ppc/asm.h - PowerPC tool dependent headers */
-
-/* Copyright 2007 Wind River Systems, Inc. */
 /*
-modification history
---------------------
-01c,15jul09,dtr  Support CPU PPCE500MC.
-01b,23nov07,foo  add spr defines
-01a,03oct07,md   written from VxWorks toolPpc.h version 02c
-*/
+ * asm/vbi.h - PowerPC tool dependent headers
+ *
+ * Copyright 2007 Wind River Systems, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
+ */
 
 #ifndef __INCsysPpcAsmh
 #define __INCsysPpcAsmh
diff --git a/include/asm-x86/arch_vbi.h b/include/asm-x86/arch_vbi.h
index 8b63a6a..e8c04fa 100644
--- a/include/asm-x86/arch_vbi.h
+++ b/include/asm-x86/arch_vbi.h
@@ -1,20 +1,18 @@
-/* vbiX86Arch.h - x86 architecture specific definitions */
-
-/* Copyright 2009 Wind River Systems, Inc. */
-
 /*
-modification history
---------------------
-01i,31aug09,mmi  move VBI_HREG_SET to vbiX86Arch.h
-01h,26aug09,mmi  fix WIND00178026: update file name
-01g,17aug09,md   fix comments
-01f,14aug09,md   update to match hypervisor version
-01e,28jul09,mpk  add hardware register set to vbi
-01d,08jun09,md   add define for maximum number of cores
-01c,25may09,md   add byte order define
-01b,06feb09,mmi  add MAX interrupts definition
-01a,14jan09,mmi  created
-*/
+ * x86 arch_vbi.h - x86 architecture specific definitions
+ *
+ * Copyright 2009 Wind River Systems, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
+ */
 
 #ifndef __INCvbiX86Archh
 #define __INCvbiX86Archh
diff --git a/include/asm-x86/reg_vbi.h b/include/asm-x86/reg_vbi.h
index 89264ac..3e11bd3 100644
--- a/include/asm-x86/reg_vbi.h
+++ b/include/asm-x86/reg_vbi.h
@@ -1,43 +1,18 @@
-/* sys/x86/regs.h - x86 cpu registers */
-
 /*
+ * x86 regs_vbi.h - x86 cpu registers
+ *
  * Copyright (c) 2007-2009 Wind River Systems, Inc.
  *
- * The right to copy, distribute or otherwise make use of this software
- * may be licensed only pursuant to the terms of an applicable Wind River
- * license agreement. 
-*/
-
-/*
-modification history
---------------------
-01z,14sep09,md   add new processor bit definition
-01y,31aug09,mmi  move VBI_HREG_SET to vbiX86Arch.h
-01x,14aug09,md   adjust VBI_HREG_SET
-01w,29jul09,mpk  add VBI_HREG_SET for supporting register read, write
-01v,16jul09,dbt  fixed registers offset
-01u,17jun09,dbt  added 64-bit support, clean up IDT support
-01t,26sep08,md   add IDT entry definitions
-01s,18aug08,md   add new cpuid features
-01r,07aug08,md   add cpuid cache query defines
-01q,30jul08,md   add cpuid signature defines
-01p,18jun08,md   add VT-x2 MSR's
-01o,24mar08,md   add IA32_PERF_STAT MSR and MSR_FSB_FREQ
-01n,14mar08,md   add x86GetCpuid
-01m,12mar08,md   add MSR_VMX_PROCBASED_CTLS2_MSR
-01l,22feb08,md   add APIC support
-01k,15feb08,md   add some VT-x specific SPR's
-01j,04feb08,md   add additional register get functions
-01i,21jan08,md   add vt defines
-01h,03oct07,md   renamed REG_SET to HREG_SET
-01g,02sep07,md   added IDT definitions
-01f,30aug07,md   added call gate specifications
-01e,08aug07,md   add defines for segment priv levels
-01d,07aug07,md   changed use of u_int to uint32_t
-01c,31jul07,md   added additional GDT definitions
-01b,25jul07,md   added cr registers to REG_SET, added GDT & GDTR struct
-01a,16jul07,md   written based on VxWorks 01w version
-*/
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
+ */
 
 #ifndef	__INCx86regsh
 #define	__INCx86regsh
diff --git a/include/asm-x86/sys_vbi.h b/include/asm-x86/sys_vbi.h
index a807015..c90757b 100644
--- a/include/asm-x86/sys_vbi.h
+++ b/include/asm-x86/sys_vbi.h
@@ -1,70 +1,19 @@
-/* sys/x86/arch.h - x86 architecture specific definitions */
-
 /*
+ * sys_vbi.h - x86 architecture specific definitions
+ *
  * Copyright (c) 2007-2009 Wind River Systems, Inc.
  *
- * The right to copy, distribute, modify or otherwise make use
- * of this software may be licensed only pursuant to the terms
- * of an applicable Wind River license agreement.
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
  */
 
-/*
-modification history
---------------------
-02w,24sep09,mmi  add virtual interrupts
-02v,01sep09,mmi  include interface.h
-02u,19aug09,md   add VBI register load/save region
-02t,28jul09,mpk  add cache align size
-02s,18jun09,dtr  Move excMgrId def here.
-02r,11jun09,md   add MSI interrupt space
-02q,09jun09,md   add support for additional I/O APICs
-02p,16jul09,dbt  Added vmx_cr4 registery in ARCH_INFO structure.
-02o,13jul09,dbt  Added x86Vb32IdtXxx() API prototypes.
-02n,10jul09,dbt  Added information about guest MMU mode (32 bits, 64bits,...).
-02m,03jul09,dbt  Added HY_TSS_GDT_ENTRY_SIZE macro.
-02l,30jun09,dbt  64-bits support.
-		 Added support for 32-bits VB GDT
-02k,25jun09,dbt  Updated bitClear prototype.
-02j,19jun09,dbt  Updated idtIntGateCreate() prototype for 64 bits support.
-02m,14jul09,rdd  VT-d integration
-02i,20may09,md   add byte order define
-02h,27apr09,mpk  Supervisor Syscall Interface for Privileged Guest OS
-02g,20apr09,mpk  context vaddr start
-02f,09mar09,md   add test and set function
-02e,13feb09,md   add per-cpu hypervisor TSS
-02d,20jan09,mmi  add VIOAPIC entries size
-02c,15jan09,md   add configuration options
-02b,20nov08,dtr  Remove vIoapic entries in ARCH_INFO.
-02a,18nov08,dbt  Added MSR area.
-01z,12nov08,md   fix isCpuCorePresent macro
-01y,28oct08,dbt  Added vtlbInit() prototype. Added vtlb_desc structure to
-                 ARCH_INFO.
-01x,27oct08,md   re-work multi-core ipi
-01w,17oct08,md   add ipi interrupt vector definitions
-01v,22sep08,md   add interrupt statistics
-01u,03sep08,md   update CPU_MAPPING to indicate if core is present
-01t,31jul08,md   add vmcs bitmap pointers
-01s,17jul08,md   add cpu mapping table
-01r,20may08,md   add multi-core support
-01q,19may08,gws  replace interrupt queues
-01p,23apr08,gws  macro rename
-01o,17apr08,gws  add macros for int vectors
-01n,14apr08,md   re-work interrupt delivery
-01m,27mar08,md   add pointer to queued interrupts
-01l,17mar08,md   add arch specific stats
-01k,07mar08,md   add cached copies of CR0 and CR3
-01j,04mar08,md   add FRAMEBASESZ
-01i,26feb08,md   add APIC timer interrupt
-01h,19feb08,md   add VT-x register save area
-01g,28jan08,md   add VT-x support
-01f,05oct07,md   add network/host translation functions
-01e,05sep07,md   clean up
-01d,30aug07,md   added IDT and syscall transition defines
-01c,31jul07,md   added gdtInit() and gdtTssCreate() prototypes
-01b,27jul07,md   added struct arch_info
-01a,06jul07,md   written.
-*/
-
 #ifndef __INCx86Archh
 #define __INCx86Archh
 
diff --git a/include/asm-x86/vbi.h b/include/asm-x86/vbi.h
index c550441..7a5f0b8 100644
--- a/include/asm-x86/vbi.h
+++ b/include/asm-x86/vbi.h
@@ -1,20 +1,19 @@
-/* sys/x86/asm.h - x86 tool dependent headers */
-
 /*
+ * x86 vbi.h - x86 tool dependent headers
+ *
  * Copyright 2007-2009 Wind River Systems, Inc.
  *
- * The right to copy, distribute, modify or otherwise make use
- * of this software may be licensed only pursuant to the terms
- * of an applicable Wind River license agreement.
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
+ * See the GNU General Public License for more details.
+ *
  */
 
-/*
-modification history
---------------------
-01b,06aug09,md   add 64-bit support
-01a,04oct07,md   written from VxWorks asmI86.h version 01n
-*/
-
 #ifndef __INCsysX86Asmh
 #define __INCsysX86Asmh
 
-- 
1.6.5.rc3

