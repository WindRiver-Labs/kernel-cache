From 161b64b5f35c28ac1ac08f8ee34b490fe78c2c87 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 3 Nov 2009 22:43:28 -0500
Subject: [PATCH 06/80] vbi: oldIntDisable -> prev_irq_disable

for i in `git grep -l oldIntDisable` ; do echo $i ; mv $i $i~ ; cat $i~ |sed 's/oldIntDisable/prev_irq_disable/g' > $i ; done

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/interface.h |    4 ++--
 include/vbi/vbi.h       |    2 +-
 kernel/vbi/show.c       |    2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/include/vbi/interface.h b/include/vbi/interface.h
index 5fb13ed..3809a7f 100644
--- a/include/vbi/interface.h
+++ b/include/vbi/interface.h
@@ -376,7 +376,7 @@ struct vb_control
  *       |		|<-------64bits - timeStamp; free running clock ticks
  *       |		|
  *       |--------------|
- *       |		|<-------32bits - oldIntDisable; interrupt state before
+ *       |		|<-------32bits - prev_irq_disable; interrupt state before
  *       |--------------|		   an interrupt was injected
  *       |		|<-------32bits -
  *       |--------------|
@@ -416,7 +416,7 @@ struct vb_status {
 	 * control->irq_disable is set to -1 by WRHV at the time of delivery of
 	 * the interrupt
 	 */
-	uint32_t oldIntDisable;
+	uint32_t prev_irq_disable;
 
 	/* VMMU tables which were active when an MMU exception occurred */
 	VB_ALIGN_FIELD_64 (void *vmmu0, pad1);
diff --git a/include/vbi/vbi.h b/include/vbi/vbi.h
index b0b567a..baa92bb 100644
--- a/include/vbi/vbi.h
+++ b/include/vbi/vbi.h
@@ -157,7 +157,7 @@ various data structures.
  *
  */
 #define VBI_INT_VCORE_PREVSTATE_GET()				\
-        ((VBI_STATUS_ADDR_GET()->oldIntDisable) == -1? TRUE: FALSE)
+        ((VBI_STATUS_ADDR_GET()->prev_irq_disable) == -1? TRUE: FALSE)
 
 /* timeStamp field  */
 #define VBI_TIMESTAMP_GET()					\
diff --git a/kernel/vbi/show.c b/kernel/vbi/show.c
index b6d5139..0d9b638 100644
--- a/kernel/vbi/show.c
+++ b/kernel/vbi/show.c
@@ -117,7 +117,7 @@ void vbiStatusShow(struct vb_status *p)
 
 	printk("  Pending interrupts: 0x%08x\n", p->int_pend_type);
 	printk("  timestamp:          %lld\n", p->timeStamp);
-	printk("  old int disable:    0x%08x\n", p->oldIntDisable);
+	printk("  old int disable:    0x%08x\n", p->prev_irq_disable);
 #ifdef _WRHV_ARCH_HAS_STATUS_REGS
 	vbiStsRegsDisplay();
 #endif
-- 
1.6.5.2

