From 0f18cbadd98e773ac590ac9a5ba48358bffc6510 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Fri, 23 Oct 2009 15:52:41 -0400
Subject: [PATCH 5/8] kprintf: Thanks for coming out, see ya

Replace all instances of kprintf with printk.  There is no
need for yet another definition of the same old thing.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/interface.h |   13 +------------
 kernel/vbi/io_apic.c    |    3 +--
 kernel/vbi/msg.c        |    2 +-
 kernel/vbi/ns.c         |    2 +-
 kernel/vbi/show.c       |    2 +-
 5 files changed, 5 insertions(+), 17 deletions(-)

diff --git a/include/vbi/interface.h b/include/vbi/interface.h
index a33bdc6..5468879 100644
--- a/include/vbi/interface.h
+++ b/include/vbi/interface.h
@@ -114,11 +114,7 @@ files where the data structrures layout is defined.
 # endif
 #endif
 
-#ifdef PRJ_BUILD
-# define VB_PRINTF(fmt, args...)    printf(fmt, ##args)
-#else
-# define VB_PRINTF(fmt, args...)    kprintf(fmt, ##args)
-#endif
+#define VB_PRINTF(fmt, args...)    printk(fmt, ##args)
 
 #undef VB_DEBUG  /* define it to turn on debugging */
 #ifdef VB_DEBUG
@@ -764,15 +760,8 @@ typedef struct vbConfig {
     VB_ALIGN_FIELD_64 (VB_SYSCALL *vbSyscallTable, pad9);
     VB_ALIGN_FIELD_64 (VB_SYSCALL_STUB2 *vbSyscallStub2, pad10);
 #endif
-
 } VB_CONFIG;
 
-#ifndef __INCvxWorksh 
-extern int kprintf (const char *, ...);
-#else
-extern int printf (const char *, ...);
-#endif 
-
 #endif /*_ASMLANGUAGE */
 
 #endif  /* __INCvbInterfaceh */
diff --git a/kernel/vbi/io_apic.c b/kernel/vbi/io_apic.c
index f078d11..bbb3f98 100644
--- a/kernel/vbi/io_apic.c
+++ b/kernel/vbi/io_apic.c
@@ -18,7 +18,6 @@
 #include <linux/module.h>
 #include <vbi/vbi.h>
 #include <vbi/private.h>
-#define kprintf printk
 
 /* globals */
 
@@ -51,7 +50,7 @@
 #endif
 
 #ifdef DEBUG
-#define DEBUGM(fmt, arg...) kprintf(fmt, ##arg)
+#define DEBUGM(fmt, arg...) printk(fmt, ##arg)
 #else
 #define DEBUGM(fmt, arg...)
 #endif
diff --git a/kernel/vbi/msg.c b/kernel/vbi/msg.c
index 6c55be0..10286ff 100644
--- a/kernel/vbi/msg.c
+++ b/kernel/vbi/msg.c
@@ -23,7 +23,7 @@
 #endif /* CONFIG_WRHV */
 
 #define DEBUGM(fmt, args...) 
-#define _DEBUGM(fmt, args...) kprintf(fmt, ##args)
+#define _DEBUGM(fmt, args...) printk(fmt, ##args)
 
 /*******************************************************************************
 *
diff --git a/kernel/vbi/ns.c b/kernel/vbi/ns.c
index 8cc8fee..4e07216 100644
--- a/kernel/vbi/ns.c
+++ b/kernel/vbi/ns.c
@@ -43,7 +43,7 @@ for processing.
  */
 
 #ifdef DEBUG
-#define DEBUGM(fmt, args...)    kprintf(fmt, ##args)
+#define DEBUGM(fmt, args...)    printk(fmt, ##args)
 #else
 #define DEBUGM(fmt, args...)   
 #endif
diff --git a/kernel/vbi/show.c b/kernel/vbi/show.c
index af89c39..939c085 100644
--- a/kernel/vbi/show.c
+++ b/kernel/vbi/show.c
@@ -23,8 +23,8 @@ control and configuration data structures.
 */
 
 #define LONG_FMT "0x%lx"
-#define kprintf printk
 #include <linux/types.h>
+#include <linux/kernel.h>
 #include <vbi/vbi.h>
 
 /*******************************************************************************
-- 
1.6.5.rc3

