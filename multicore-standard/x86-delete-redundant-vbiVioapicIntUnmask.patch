From f79edd4d079fcf56ce5ff87b062b7b5dabab3adb Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Tue, 3 Nov 2009 10:33:42 +0800
Subject: [PATCH 18/22] x86: delete redundant vbiVioapicIntUnmask

It is meaningless to call vbiVioapicIntUnmask in ipi
handlers, so delete them.

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 arch/x86/kernel/vbi/wrhv.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/arch/x86/kernel/vbi/wrhv.c b/arch/x86/kernel/vbi/wrhv.c
index 951a165..d65c27c 100644
--- a/arch/x86/kernel/vbi/wrhv.c
+++ b/arch/x86/kernel/vbi/wrhv.c
@@ -417,7 +417,6 @@ irqreturn_t wrhv_ipi_func_call_single_handler(int irq, void *dev_id)
 	generic_smp_call_function_single_interrupt();
 	__get_cpu_var(irq_stat).irq_call_count++;
 	irq_exit();
-	vbiVioapicIntUnmask(irq);
 	return IRQ_HANDLED;
 }
 
@@ -427,7 +426,6 @@ irqreturn_t wrhv_ipi_func_call_handler(int irq, void *dev_id)
 	generic_smp_call_function_interrupt();
 	__get_cpu_var(irq_stat).irq_call_count++;
 	irq_exit();
-	vbiVioapicIntUnmask(irq);
 	return IRQ_HANDLED;
 }
 
@@ -478,14 +476,12 @@ out:
 	put_cpu_no_resched();
 	__get_cpu_var(irq_stat).irq_tlb_count++;
 
-	vbiVioapicIntUnmask(irq);
 	return IRQ_HANDLED;
 }
 
 irqreturn_t wrhv_ipi_resched_handler(int irq, void *dev_id)
 {
 	__get_cpu_var(irq_stat).irq_resched_count++;
-	vbiVioapicIntUnmask(irq);
 	return IRQ_HANDLED;
 }
 #endif
-- 
1.6.5.2

