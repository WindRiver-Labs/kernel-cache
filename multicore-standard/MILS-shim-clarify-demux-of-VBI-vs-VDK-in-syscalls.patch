From 17da725ec3fdc362aeb424f0e0e1f21f8601d706 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Fri, 26 Feb 2010 15:30:21 -0500
Subject: [PATCH] MILS shim: clarify demux of VBI vs VDK in syscalls

Do the demux up at the top of the file, where you can see
it when looking for it.

This will eventually be folded into the shim commit to
reduce the overall commit quantity/noise.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/syscalls.h |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/include/vbi/syscalls.h b/include/vbi/syscalls.h
index 33396ff..2117fc0 100644
--- a/include/vbi/syscalls.h
+++ b/include/vbi/syscalls.h
@@ -14,7 +14,10 @@
  *
  */
 
-#if !defined(_VBI_SYSCALLS_H) && !defined(CONFIG_WRHV_MILS)
+#ifdef CONFIG_WRHV_MILS
+#include <vbi/vdk_syscalls.h>
+#else
+#ifndef _VBI_SYSCALLS_H
 #define _VBI_SYSCALLS_H
 
 /*
@@ -311,8 +314,5 @@ typedef uint32_t VBMGMT_HANDLE;
 typedef uint32_t VBI_NS_HANDLE;
 
 #endif	/* _ASMLANGUAGE */
-
-#else
-#include <vbi/vdk_syscalls.h>
-
 #endif	/* _VBI_SYSCALLS_H */
+#endif /* ! CONFIG_WRHV_MILS */
-- 
1.7.0

