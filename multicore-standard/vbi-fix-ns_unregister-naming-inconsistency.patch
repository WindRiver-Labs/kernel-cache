From c6d13dd76379e602530ceb45b4fb3be0985f44fb Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 2 Dec 2009 18:02:05 -0500
Subject: [PATCH 21/43] vbi: fix ns_unregister naming inconsistency

The original vbi source erroneously uses two different names
for the same thing (note "r" vs "R"):

vbi.git$git grep vbiNsUnRegister
vbi/include/vbiSyscall.h:extern vbiStatus_t vbiNsUnRegister (char *name, uint32_t  revision);
vbi.git$

vbi.git$git grep vbiNsUnregister
vbi/src/vbiNs.c:* SEE ALSO: vbiNsLookup(), vbiNsUnregister()
vbi/src/vbiNs.c:* vbiStatus_t vbiNsUnregister
vbi/src/vbiNs.c:vbiStatus_t vbiNsUnregister
vbi/src/vbiNs.c:* SEE ALSO: vbiNsRegister(), vbiNsUnregister()
vbi.git$

We inherited the same problem, and were mapping the compat version
onto the (likely) incorrect name as well.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/compat.h |    2 +-
 kernel/vbi/ns.c      |    4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/include/vbi/compat.h b/include/vbi/compat.h
index ae9d296..ed586b4 100644
--- a/include/vbi/compat.h
+++ b/include/vbi/compat.h
@@ -146,7 +146,7 @@
 #define vbiNsOp			vbi_ns_op
 #define vbiNsLookup		vbi_ns_lookup
 #define vbiNsRegister		vbi_ns_register
-#define vbiNsUnRegister		vbi_ns_unregister
+#define vbiNsUnregister		vbi_ns_unregister
 
 #define vbiConfigShow		vbi_show_cfg
 #define vbiControlShow		vbi_show_ctrl
diff --git a/kernel/vbi/ns.c b/kernel/vbi/ns.c
index a592e56..025c986 100644
--- a/kernel/vbi/ns.c
+++ b/kernel/vbi/ns.c
@@ -52,14 +52,14 @@ int32_t vbi_ns_register(char *name, uint32_t revision)
 }
 
 /*
- * vbiNsUnegister - un-register a service with the naming system
+ * vbi_ns_unregister - un-register a service with the naming system
  *
  * This routine removes us as the provider of the specified service.
  * A message for the request is formulated and sent off to the name service
  * manager for processing.
  *
  */
-int32_t vbiNsUnregister(char *name, uint32_t revision)
+int32_t vbi_ns_unregister(char *name, uint32_t revision)
 {
 	if (name == NULL)
 		return -1;
-- 
1.6.5.2

