From d05b7455c814997da727529b20372ca61103dfe5 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 2 Dec 2009 13:45:37 -0500
Subject: [PATCH 12/43] vbi: vbiGuestPhysAddr_t --> void *

for i in `git grep -l vbiGuestPhysAddr_t` ; do mv $i $i~ ; cat $i~|sed 's/vbiGuestPhysAddr_t/void */' > $i ; done

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/compat.h |    1 +
 include/vbi/types.h  |    1 -
 include/vbi/vbi.h    |    6 ++----
 kernel/vbi/paddr.c   |   11 ++++++-----
 4 files changed, 9 insertions(+), 10 deletions(-)

diff --git a/include/vbi/compat.h b/include/vbi/compat.h
index 57bfc1c..3717811 100644
--- a/include/vbi/compat.h
+++ b/include/vbi/compat.h
@@ -51,6 +51,7 @@
 #define vbiCore_t		int32_t
 #define vbiCtx_t		int32_t
 #define vbiPhysAddr_t		uint64_t
+#define vbiGuestPhysAddr_t	void *
 
 /*
  * struct fields and similar
diff --git a/include/vbi/types.h b/include/vbi/types.h
index 73ddf31..31bb40b 100644
--- a/include/vbi/types.h
+++ b/include/vbi/types.h
@@ -34,7 +34,6 @@
 
 #ifndef _ASMLANGUAGE
 
-typedef void *vbiGuestPhysAddr_t;
 typedef int32_t vbiIntState_t;
 typedef int32_t vbiMemAttr_t;
 typedef int32_t vbiVector_t;
diff --git a/include/vbi/vbi.h b/include/vbi/vbi.h
index ed8b9da..ee655bb 100644
--- a/include/vbi/vbi.h
+++ b/include/vbi/vbi.h
@@ -538,10 +538,8 @@ extern int32_t vbi_send_vioapic_irq(uint32_t irq, uint32_t filter,
 extern int32_t vbi_redir_vioapic_irq(uint32_t irq, int32_t tCore);
 extern int32_t vbi_send_vcore_vioapic_irq(uint32_t irq, vbiCoreSet_t vcoreSet, 
 					  uint32_t options);
-extern int32_t vbi_get_guest_dma_addr(vbiGuestPhysAddr_t gaddr,
-				uint64_t *paddr);
-extern int32_t vbi_guest_phys_to_phys(vbiGuestPhysAddr_t gaddr,
-				uint64_t *paddr);
+extern int32_t vbi_get_guest_dma_addr(void *gaddr, uint64_t *paddr);
+extern int32_t vbi_guest_phys_to_phys(void *gaddr, uint64_t *paddr);
 
 extern void vbi_disp_vioapic(void);
 extern void vbi_show_shmem(void);
diff --git a/kernel/vbi/paddr.c b/kernel/vbi/paddr.c
index ba4075d..bf6ee77 100644
--- a/kernel/vbi/paddr.c
+++ b/kernel/vbi/paddr.c
@@ -37,10 +37,10 @@ perhaps to communicate with the hypervisor itself maybe buffer pointers.
  * 64-bit.
  *
  */
-int32_t vbi_guest_phys_to_phys(vbiGuestPhysAddr_t gaddr,
-					uint64_t *paddr)
+int32_t vbi_guest_phys_to_phys(void *gaddr, uint64_t *paddr)
 {
-	return vbi_hy_ioctl(VBI_HYIOCTL_PADDR, gaddr, paddr, (void*)VBI_HYIOCTL_PADDR_PHYS, 0 );
+	return vbi_hy_ioctl(VBI_HYIOCTL_PADDR, gaddr, paddr,
+				(void*)VBI_HYIOCTL_PADDR_PHYS, 0 );
 }
 
 /*
@@ -52,7 +52,8 @@ int32_t vbi_guest_phys_to_phys(vbiGuestPhysAddr_t gaddr,
  * running with > 4GB memory so the phys address is always 64-bit.
  *
  */
-int32_t vbi_get_guest_dma_addr(vbiGuestPhysAddr_t gaddr, uint64_t *paddr)
+int32_t vbi_get_guest_dma_addr(void *gaddr, uint64_t *paddr)
 {
-	return vbi_hy_ioctl(VBI_HYIOCTL_PADDR, gaddr, paddr, VBI_HYIOCTL_PADDR_DMA, 0);
+	return vbi_hy_ioctl(VBI_HYIOCTL_PADDR, gaddr, paddr,
+				VBI_HYIOCTL_PADDR_DMA, 0);
 }
-- 
1.6.5.2

