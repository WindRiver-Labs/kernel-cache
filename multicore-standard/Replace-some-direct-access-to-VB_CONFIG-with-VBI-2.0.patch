From e1289256dcc0601b273d4e934ff7073653bbcb60 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 23 Oct 2009 16:35:46 +0800
Subject: [PATCH] Replace some direct access to VB_CONFIG with VBI 2.0 calls

Use VBI 2.0 calls to access VB_CONFIG instead of direct access,
except the someone before calling vbi_init and which don't have
matched VBI.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/powerpc/platforms/85xx/wrhv_8572ds.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/wrhv_8572ds.c b/arch/powerpc/platforms/85xx/wrhv_8572ds.c
index 96fa7a7..86718d9 100644
--- a/arch/powerpc/platforms/85xx/wrhv_8572ds.c
+++ b/arch/powerpc/platforms/85xx/wrhv_8572ds.c
@@ -157,7 +157,7 @@ static int __init wrhv_8572ds_probe(void)
 	wrhv_mapping(); /* Map vb_config structure */
 	vbi_init(wrhvConfig);
 
-	strncpy(cmd_line, wrhvConfig->bootLine, VB_MAX_BOOTLINE_LENGTH - 1);
+	strncpy(cmd_line, VBI_BOOTLINE_ADDR_GET(), VB_MAX_BOOTLINE_LENGTH - 1);
 	cmd_line[VB_MAX_BOOTLINE_LENGTH - 1] = 0;
 
 	/* Save command line for /proc/cmdline */
-- 
1.6.5.2

