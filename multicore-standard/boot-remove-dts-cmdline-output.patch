From 0ca49440b5da33273c025fa7d21b9ddd747ac373 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 15 Dec 2009 18:04:15 -0800
Subject: [PATCH 3/4] boot: remove dts cmdline output

This patch intended to avoid print of cmdline from DTS file,
since cmdline from xml file will be the main stream.

Signed-off-by: Zumeng.Chen <zumeng.chen@windriver.com>
---
 arch/powerpc/boot/main.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/main.c b/arch/powerpc/boot/main.c
index 1ad38e4..835ee54 100644
--- a/arch/powerpc/boot/main.c
+++ b/arch/powerpc/boot/main.c
@@ -17,6 +17,9 @@
 #include "ops.h"
 #include "gunzip_util.h"
 #include "reg.h"
+#ifdef CONFIG_WRHV
+#include "wrhv_boot.h"
+#endif
 
 static struct gunzip_state gzstate;
 
@@ -182,6 +185,9 @@ void start(void)
 	vmlinux = prep_kernel();
 	initrd = prep_initrd(vmlinux, chosen,
 			     loader_info.initrd_addr, loader_info.initrd_size);
+#ifdef CONFIG_WRHV
+	strncpy(cmdline,(char *)(WRHV_CMDLINE_ADDR),WRHV_CMDLINE_SIZE);
+#endif
 	prep_cmdline(chosen);
 
 	printf("Finalizing device tree...");
-- 
1.6.5.2

