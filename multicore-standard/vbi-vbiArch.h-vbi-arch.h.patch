From 8fa9c1a6f50c8e1ca52a997d764cf8908ddff6d5 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 14 Oct 2009 19:43:10 -0400
Subject: [PATCH 04/27] vbi/vbiArch.h --> vbi/arch.h

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/arch.h        |   52 +++++++++++++++++++++++++++++++++++++++++++++
 include/vbi/vbInterface.h |    8 +++---
 include/vbi/vbi.h         |    4 +-
 include/vbi/vbiArch.h     |   52 ---------------------------------------------
 include/vbi/vbiSyscall.h  |    4 +-
 5 files changed, 60 insertions(+), 60 deletions(-)
 create mode 100644 include/vbi/arch.h
 delete mode 100644 include/vbi/vbiArch.h

diff --git a/include/vbi/arch.h b/include/vbi/arch.h
new file mode 100644
index 0000000..d47d0b6
--- /dev/null
+++ b/include/vbi/arch.h
@@ -0,0 +1,52 @@
+/* vbi/arch.h - vbi architecture specific definitions */
+
+/* Copyright 2008 Wind River Systems, Inc. */
+
+/*
+modification history
+--------------------
+01g,28aug09,mmi  adjust arch header files path
+01f,15jul09,dtr  Add CPU PPCE500MC.
+01e,25may09,md   add endian order type defines
+01d,17mar09,mpk  Cavium OCTEON MIPS64 port for hypervisor
+01c,29jan09,mmi  add vbi/ to the header files path
+01b,28jan09,mmi  check PENTIUM4 and PENTIUM, consider error case
+01a,21jan08,mmi  written.
+*/
+
+#ifndef __INCvbiArchh
+#define __INCvbiArchh
+
+/* endian types selectable by the arch specific header files */
+
+#define __VBI_LITTLE_ENDIAN 1234  /* least-significant byte first         */
+#define __VBI_BIG_ENDIAN    4321  /* most-significant byte first          */
+#define __VBI_PDP_ENDIAN    3412  /* LSB first in word, MSW first in long */
+
+/* include the appropriate arch specific header file */
+
+#if (CPU == MIPSI64R2)
+# include <mips64/vbiMips64Arch.h>
+#elif (CPU == PPC85XX) || (CPU == PPC32) || (CPU == PPCE500MC)
+#ifdef CONFIG_WRHV
+#include <vbi/ppc/vbiPpcArch.h>
+#else
+# include <ppc/vbiPpcArch.h>
+#endif /* CONFIG_WRHV */
+#elif (CPU == PENTIUM) || (CPU == PENTIUM4)
+#ifdef CONFIG_WRHV
+# include "x86/vbiX86Arch.h"
+#else
+# include <x86/vbiX86Arch.h>
+#endif /* CONFIG_WRHV */
+#else
+# error "no arch header file included"
+#endif
+
+/* ensure the arch has specified a byte ordering */
+
+#if !defined(__VBI_BYTE_ORDER)
+# error: Architecture has not defined a byte order!
+#endif
+
+#endif /* __INCvbiArchh */
diff --git a/include/vbi/vbInterface.h b/include/vbi/vbInterface.h
index 7e036c4..92bba80 100644
--- a/include/vbi/vbInterface.h
+++ b/include/vbi/vbInterface.h
@@ -12,7 +12,7 @@
 modification history
 --------------------
 02r,09sep09,mmi  include vbi types header file
-02q,28aug09,mmi  use a different wrapper header vbiArch.h for VBI and HV
+02q,28aug09,mmi  use a different wrapper header arch.h for VBI and HV
 02p,26aug09,mmi  fix WIND00178026: update copyright dates
 02o,06aug09,dtr  Modify status intPending to intPendingType as per docs.
 02n,03jul09,mmi  rename version flags
@@ -132,10 +132,10 @@ files where the data structrures layout is defined.
 
 #ifdef CONFIG_WRHV
 #include "vbiTypes.h"
-#include "vbiArch.h"
+#include "vbi/arch.h"
 #else
 #include <vbiTypes.h>
-#include <vbiArch.h>
+#include <vbi/arch.h>
 #endif /* CONFIG_WRHV */
 
 #ifdef __cplusplus
@@ -474,7 +474,7 @@ typedef struct vbControl {
 * hardware. The architecture specific structure is included only if 
 * _WRHV_ARCH_HAS_STATUS_REGS flag is defined. The data type  VB_STATUS_ARCH_REGS
 * holding the architecture dependent registers is defined by a file pulled
-* vbi/vbiArch.h at compile type according to CPU value.
+* vbi/arch.h at compile type according to CPU value.
 * The definition of VB_ARCH_STATUS_REGS can be found in the architecture
 * supplement documentation.
 * The purpose of this structure is to inform a virtual core at runtime the
diff --git a/include/vbi/vbi.h b/include/vbi/vbi.h
index a8dcbaf..9bf205b 100644
--- a/include/vbi/vbi.h
+++ b/include/vbi/vbi.h
@@ -50,7 +50,7 @@ modification history
 #include "vbiErrors.h"
 #include "vbiTypes.h"
 #include "vbiVersion.h"
-#include "vbiArch.h"
+#include "vbi/arch.h"
 #include "vbInterface.h"
 #include "vbiSyscall.h"
 #include "vbiInterrupt.h"
@@ -60,7 +60,7 @@ modification history
 #include <vbiErrors.h>
 #include <vbiTypes.h>
 #include <vbiVersion.h>
-#include <vbiArch.h>
+#include <vbi/arch.h>
 #include <vbInterface.h>
 #include <vbiSyscall.h>
 #include <vbiInterrupt.h>
diff --git a/include/vbi/vbiArch.h b/include/vbi/vbiArch.h
deleted file mode 100644
index d79e4ea..0000000
--- a/include/vbi/vbiArch.h
+++ /dev/null
@@ -1,52 +0,0 @@
-/* vbi/vbiArch.h - vbi architecture specific definitions */
-
-/* Copyright 2008 Wind River Systems, Inc. */
-
-/*
-modification history
---------------------
-01g,28aug09,mmi  adjust arch header files path
-01f,15jul09,dtr  Add CPU PPCE500MC.
-01e,25may09,md   add endian order type defines
-01d,17mar09,mpk  Cavium OCTEON MIPS64 port for hypervisor
-01c,29jan09,mmi  add vbi/ to the header files path
-01b,28jan09,mmi  check PENTIUM4 and PENTIUM, consider error case
-01a,21jan08,mmi  written.
-*/
-
-#ifndef __INCvbiArchh
-#define __INCvbiArchh
-
-/* endian types selectable by the arch specific header files */
-
-#define __VBI_LITTLE_ENDIAN 1234  /* least-significant byte first         */
-#define __VBI_BIG_ENDIAN    4321  /* most-significant byte first          */
-#define __VBI_PDP_ENDIAN    3412  /* LSB first in word, MSW first in long */
-
-/* include the appropriate arch specific header file */
-
-#if (CPU == MIPSI64R2)
-# include <mips64/vbiMips64Arch.h>
-#elif (CPU == PPC85XX) || (CPU == PPC32) || (CPU == PPCE500MC)
-#ifdef CONFIG_WRHV
-#include <vbi/ppc/vbiPpcArch.h>
-#else
-# include <ppc/vbiPpcArch.h>
-#endif /* CONFIG_WRHV */
-#elif (CPU == PENTIUM) || (CPU == PENTIUM4)
-#ifdef CONFIG_WRHV
-# include "x86/vbiX86Arch.h"
-#else
-# include <x86/vbiX86Arch.h>
-#endif /* CONFIG_WRHV */
-#else
-# error "no arch header file included"
-#endif
-
-/* ensure the arch has specified a byte ordering */
-
-#if !defined(__VBI_BYTE_ORDER)
-# error: Architecture has not defined a byte order!
-#endif
-
-#endif /* __INCvbiArchh */
diff --git a/include/vbi/vbiSyscall.h b/include/vbi/vbiSyscall.h
index 3252718..299932b 100644
--- a/include/vbi/vbiSyscall.h
+++ b/include/vbi/vbiSyscall.h
@@ -70,11 +70,11 @@ extern "C" {
 #define LINKAGE asmlinkage
 #include <linux/linkage.h>
 #include "vbiTypes.h"
-#include "vbiArch.h"
+#include "vbi/arch.h"
 #include "syscalls.h"
 #else
 #define LINKAGE
-#include <vbiArch.h>
+#include <vbi/arch.h>
 #include <syscalls.h>
 #endif /* CONFIG_WRHV */
 
-- 
1.6.3.3

