From 889c4f7d095451dc00ff23dfd612571256a0f485 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 20 Oct 2009 18:24:32 -0400
Subject: [PATCH 2/3] vbi: remove CONFIG_WRHV where unnecesarry

The current include layout was added conditional on WRHV,
(with quoted includes) and the original reference implementation
includes were left as they were.  This makes the in-use
includes the default (without the CONFIG_WRHV switch) and
deletes the old reference implementation includes.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 kernel/vbi/idle.c      |    4 ----
 kernel/vbi/interrupt.c |    6 ------
 kernel/vbi/lib.c       |    4 ----
 kernel/vbi/msg.c       |    5 -----
 kernel/vbi/ns.c        |    6 ------
 kernel/vbi/paddr.c     |    4 ----
 kernel/vbi/shmem.c     |    6 ------
 kernel/vbi/version.c   |    5 -----
 8 files changed, 0 insertions(+), 40 deletions(-)

diff --git a/kernel/vbi/idle.c b/kernel/vbi/idle.c
index 07f146c..3976750 100644
--- a/kernel/vbi/idle.c
+++ b/kernel/vbi/idle.c
@@ -21,12 +21,8 @@ into the idle state.
 
 /* includes */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <vbi/vbi.h>
-#else
-#include <vbi.h>
-#endif /* CONFIG_WRHV */
 
 /*******************************************************************************
 *
diff --git a/kernel/vbi/interrupt.c b/kernel/vbi/interrupt.c
index 8c331fb..e98487a 100644
--- a/kernel/vbi/interrupt.c
+++ b/kernel/vbi/interrupt.c
@@ -26,17 +26,11 @@
 #define DEBUGM(x)
 #endif
 
-#ifdef CONFIG_WRHV
 #include <linux/string.h>
 #include <vbi/vbi.h>
 #include <linux/types.h>
 #include <vbi/private.h>
 #include <linux/module.h>
-#else
-#include <string.h>
-#include <vbi.h>
-#include <private.h>
-#endif /* CONFIG_WRHV */
 
 /******************************************************************************
 *
diff --git a/kernel/vbi/lib.c b/kernel/vbi/lib.c
index 91f8fbf..770b6f1 100644
--- a/kernel/vbi/lib.c
+++ b/kernel/vbi/lib.c
@@ -136,13 +136,9 @@ INCLUDE FILES:  include/vbi/vbi.h
 \APPEND  ../include/interface.h
 */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <linux/module.h>
 #include <vbi/vbi.h>
-#else
-#include <vbi.h>
-#endif /* CONFIG_WRHV */
 
 VB_CONFIG *  wrhvVbConfig;  /* The address of the core's Config area
                             * This value is passed to the virtual board
diff --git a/kernel/vbi/msg.c b/kernel/vbi/msg.c
index 10286ff..70da875 100644
--- a/kernel/vbi/msg.c
+++ b/kernel/vbi/msg.c
@@ -14,13 +14,8 @@
  *
  */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <vbi/private.h>
-#else
-#include <vbi.h>
-#include <private.h>
-#endif /* CONFIG_WRHV */
 
 #define DEBUGM(fmt, args...) 
 #define _DEBUGM(fmt, args...) printk(fmt, ##args)
diff --git a/kernel/vbi/ns.c b/kernel/vbi/ns.c
index 79662d7..3bf1d49 100644
--- a/kernel/vbi/ns.c
+++ b/kernel/vbi/ns.c
@@ -25,15 +25,9 @@ for processing.
 
 */
 
-#ifdef CONFIG_WRHV
 #include <linux/string.h>
 #include <vbi/vbi.h>
 #include <vbi/private.h>
-#else
-#include <string.h>
-#include <vbi.h>
-#include <vbi/private.h>
-#endif /* CONFIG_WRHV */
 
 
 /* enable/disable debugging */
diff --git a/kernel/vbi/paddr.c b/kernel/vbi/paddr.c
index b0effbc..fe1507a 100644
--- a/kernel/vbi/paddr.c
+++ b/kernel/vbi/paddr.c
@@ -25,12 +25,8 @@ perhaps to communicate with the hypervisor itself maybe buffer pointers.
 
 /* includes */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <vbi/private.h>
-#else
-#include <vbi.h>
-#endif /* CONFIG_WRHV */
 
 
 /*******************************************************************************
diff --git a/kernel/vbi/shmem.c b/kernel/vbi/shmem.c
index f6ebea8..5794234 100644
--- a/kernel/vbi/shmem.c
+++ b/kernel/vbi/shmem.c
@@ -37,17 +37,11 @@ Alternatively the following macros can be used to obtained similar information
     -
 */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <vbi/vbi.h>
 #include <vbi/private.h>
-#else
-#include <string.h>
-#include <vbi.h>
-#include <vbi/private.h>
-#endif /* CONFIG_WRHV */
 
 /******************************************************************************
 *
diff --git a/kernel/vbi/version.c b/kernel/vbi/version.c
index cc4963d..1aa7b1f 100644
--- a/kernel/vbi/version.c
+++ b/kernel/vbi/version.c
@@ -26,14 +26,9 @@ the date/time information.  ANSI compliant compilers are required for
 building all hypervisor executables.
 */
 
-#ifdef CONFIG_WRHV
 #include <linux/types.h>
 #include <vbi/vbi.h>
 #include <vbi/version.h>
-#else
-#include <vbi.h>
-#include <vbi/version.h>
-#endif /* CONFIG_WRHV */
 
 /* numerical values for vbi version */
 
-- 
1.6.5.rc3

