From d447b066bfcd2177c9d68efd59bd4af390c3a0ca Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 18 Nov 2009 10:07:17 -0500
Subject: [PATCH 24/80] vbiDcacheFlush --> vbi_flush_dcache

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/powerpc/kernel/vbi/syscalls.S |    8 ++++----
 arch/powerpc/kernel/vbi/util.c     |    6 +++---
 arch/powerpc/kernel/wrhv_misc_32.S |    4 ++--
 include/vbi/syscall.h              |    2 +-
 4 files changed, 10 insertions(+), 10 deletions(-)

diff --git a/arch/powerpc/kernel/vbi/syscalls.S b/arch/powerpc/kernel/vbi/syscalls.S
index ca4e93a..15d1403 100644
--- a/arch/powerpc/kernel/vbi/syscalls.S
+++ b/arch/powerpc/kernel/vbi/syscalls.S
@@ -41,7 +41,7 @@ FUNC_EXPORT(vbi_send)
 FUNC_EXPORT(vbi_rx_op)
 FUNC_EXPORT(vbi_reply)
 FUNC_EXPORT(vbi_flush_icache)
-FUNC_EXPORT(vbiDcacheFlush)
+FUNC_EXPORT(vbi_flush_dcache)
 FUNC_EXPORT(vbiCacheTextUpdate)
 FUNC_EXPORT(vbiTlbFlush)
 FUNC_EXPORT(vbiPanic)
@@ -373,18 +373,18 @@ FUNC_LABEL(vbi_flush_icache)
 FUNC_END(vbi_flush_icache)
 
 /*
- * vbiDcacheFlush - flush the specified Data cache
+ * vbi_flush_dcache - flush the specified Data cache
  *
  * This routine makes a hypercall to flush the data cache of the calling core
  * for the specified address range.
  *
  */
-FUNC_LABEL(vbiDcacheFlush)
+FUNC_LABEL(vbi_flush_dcache)
 	lis r0, HI(VBI_SYS_dcache_flush)
 	ori r0, r0, LO(VBI_SYS_dcache_flush)
 	HCALL
 	blr
-FUNC_END(vbiDcacheFlush)
+FUNC_END(vbi_flush_dcache)
 
 /*
  *
diff --git a/arch/powerpc/kernel/vbi/util.c b/arch/powerpc/kernel/vbi/util.c
index 1c0c396..19804bf 100644
--- a/arch/powerpc/kernel/vbi/util.c
+++ b/arch/powerpc/kernel/vbi/util.c
@@ -118,12 +118,12 @@ int vb_context_mmu_on(int pid,	/* context id */
 void vb__flush_dcache_icache(void *start)
 {
 	vbi_flush_icache(start, 4096);
-	vbiDcacheFlush(start, 4096);
+	vbi_flush_dcache(start, 4096);
 }
 
 void vb_flush_dcache_range(unsigned long start, unsigned long stop)
 {
-	vbiDcacheFlush((void *) start, (stop - start + 1));
+	vbi_flush_dcache((void *) start, (stop - start + 1));
 }
 
 void vb__flush_icache_range(unsigned long start, unsigned long stop)
@@ -134,7 +134,7 @@ void vb__flush_icache_range(unsigned long start, unsigned long stop)
 void vb__flush_dcache_icache_phys(unsigned long physaddr)
 {
 	vbi_flush_icache((void *) physaddr, 4096);
-	vbiDcacheFlush((void *) physaddr, 4096);
+	vbi_flush_dcache((void *) physaddr, 4096);
 }
 
 EXPORT_SYMBOL_GPL(wrhv_int_lock);
diff --git a/arch/powerpc/kernel/wrhv_misc_32.S b/arch/powerpc/kernel/wrhv_misc_32.S
index 8b89a2c..3f96eee 100644
--- a/arch/powerpc/kernel/wrhv_misc_32.S
+++ b/arch/powerpc/kernel/wrhv_misc_32.S
@@ -67,12 +67,12 @@ _GLOBAL(paravirt_tlbie)
  */
 _GLOBAL(paravirt_clean_dcache_range)
 	/*
-	 * vbiDcacheFlush (void *start_addr, void *end_addr)
+	 * vbi_flush_dcache (void *start_addr, void *end_addr)
 	 */
 	#li	r5, 8
 	subf	r4,r3,r4
 	addi	r4, r4, 1
-	bl	vbiDcacheFlush
+	bl	vbi_flush_dcache
 	blr
 
 _GLOBAL(paravirt__flush_dcache_icache)
diff --git a/include/vbi/syscall.h b/include/vbi/syscall.h
index 9453cc4..178f9f6 100644
--- a/include/vbi/syscall.h
+++ b/include/vbi/syscall.h
@@ -110,7 +110,7 @@ extern asmlinkage int32_t vbi_reply(vbiCtx_t id, void *smsg, size_t slen,
 				VBI_MSG_CTL *ctl);
 
 extern asmlinkage vbiStatus_t vbiPanic(const char *msg);
-extern vbiStatus_t vbiDcacheFlush(void *saddr, size_t size);
+extern vbiStatus_t vbi_flush_dcache(void *saddr, size_t size);
 extern vbiStatus_t vbi_flush_icache(void *saddr, size_t size);
 extern asmlinkage vbiStatus_t vbiKputs(const char *s);
 extern asmlinkage vbiStatus_t vbiKputc(int c);
-- 
1.6.5.2

