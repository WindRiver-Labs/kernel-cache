From bcc3b17ecd29c7d13e15cc4c1d4fdc8626b2f303 Mon Sep 17 00:00:00 2001
Message-Id: <bcc3b17ecd29c7d13e15cc4c1d4fdc8626b2f303.1267106475.git.paul.gortmaker@windriver.com>
In-Reply-To: <34b9fad5266d91af7706d73f3fc707e92be8069d.1267106475.git.paul.gortmaker@windriver.com>
References: <34b9fad5266d91af7706d73f3fc707e92be8069d.1267106475.git.paul.gortmaker@windriver.com>
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 24 Feb 2010 22:16:45 -0500
Subject: [PATCH 5/5] MILS shim: Fix incorrectly mapped syscalls

The syscalls for 18 and 19 are for port* operations, they were
never assigned to the core/generic send/receive functions; that
was an error.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/vdk_syscalls.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/vbi/vdk_syscalls.h b/include/vbi/vdk_syscalls.h
index ff02a79..f199d8b 100644
--- a/include/vbi/vdk_syscalls.h
+++ b/include/vbi/vdk_syscalls.h
@@ -139,8 +139,8 @@ have mapped a NULL / no-op to HY_SYSCALL(23) */
 /* hypervisor services */
 #define VBI_SYS_hyIoctl          VDK_SYS_NULL  /* hypervisor ioctl */
 #define VBI_SYS_vmContextCreate  VDK_SYS_NULL  /* context create */
-#define VBI_SYS_send             HY_SYSCALL(18)  /* send a messages */
-#define VBI_SYS_receive          HY_SYSCALL(19)  /* receive a messages */
+#define VBI_SYS_send             VDK_SYS_NULL  /* send a message */
+#define VBI_SYS_receive          VDK_SYS_NULL  /* receive a message */
 #define VBI_SYS_reply            VDK_SYS_NULL  /* reply to a messages */
 #define VBI_SYS_panic            HY_SYSCALL(2)  /* halt the system */
 #define VBI_SYS_int              HY_SYSCALL(3)  /* deliver an interrupt */
-- 
1.6.5.2

