From 03b18e8b46d647b7ff62dcc79cf41b4dbe267d74 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 2 Dec 2009 20:10:32 -0500
Subject: [PATCH 31/43] vbStatus --> vb_status

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/powerpc/kernel/head_wrhv.S |    2 +-
 arch/powerpc/kernel/vbi/wrhv.c  |    6 +++---
 include/vbi/compat.h            |    1 +
 include/vbi/interface.h         |    2 +-
 kernel/vbi/lib.c                |    2 +-
 kernel/vbi/show.c               |    2 +-
 6 files changed, 8 insertions(+), 7 deletions(-)

diff --git a/arch/powerpc/kernel/head_wrhv.S b/arch/powerpc/kernel/head_wrhv.S
index e1f3e2b..7958316 100644
--- a/arch/powerpc/kernel/head_wrhv.S
+++ b/arch/powerpc/kernel/head_wrhv.S
@@ -261,7 +261,7 @@ interrupt_base:
 
 	/* Data Storage Interrupt */
 	START_EXCEPTION(DataStorage)
-        /*    only  r3, r4, CR are saved in vbStatus */
+        /*    only  r3, r4, CR are saved in vb_status */
        	lis	r4,wr_control@ha
        	lwz	r4,wr_control@l(r4)
 	stw	r10,VB_CONTROL_R10(r4)
diff --git a/arch/powerpc/kernel/vbi/wrhv.c b/arch/powerpc/kernel/vbi/wrhv.c
index e3bce84..4ac355d 100644
--- a/arch/powerpc/kernel/vbi/wrhv.c
+++ b/arch/powerpc/kernel/vbi/wrhv.c
@@ -182,8 +182,8 @@ void wrhv_mapping(void)
 	map_page((unsigned long)wr_config, (unsigned long)wr_config,
 		 _PAGE_RAM);
 
-	map_page((unsigned long)wr_config->vbStatus,
-		 (unsigned long)wr_config->vbStatus, _PAGE_RAM);
+	map_page((unsigned long)wr_config->vb_status,
+		 (unsigned long)wr_config->vb_status, _PAGE_RAM);
 	map_page((unsigned long)wr_config->vbControl,
 		 (unsigned long)wr_config->vbControl, _PAGE_RAM);
 	map_page((unsigned long)wr_config->interruptConfiguration,
@@ -967,7 +967,7 @@ void wrhv_init(void)
 	 */
 	wr_config = (struct vb_config *)0xF0000000;
 	wr_control = wr_config->vbControl;
-	wr_status = wr_config->vbStatus;
+	wr_status = wr_config->vb_status;
 
 	pv_info.name = "wrhv";
 	pv_info.paravirt_enabled = 1;
diff --git a/include/vbi/compat.h b/include/vbi/compat.h
index 63a2467..3e9c403 100644
--- a/include/vbi/compat.h
+++ b/include/vbi/compat.h
@@ -66,6 +66,7 @@
  */
 #define vbControlRegs		vb_control_regs
 #define vbStatusRegs		vb_status_regs
+#define vbStatus		vb_status
 
 #define wrhvControl		wr_control
 #define wrhvConfig		wr_config
diff --git a/include/vbi/interface.h b/include/vbi/interface.h
index 7816cdd..a2cea11 100644
--- a/include/vbi/interface.h
+++ b/include/vbi/interface.h
@@ -488,7 +488,7 @@ struct vb_config
 	 */
 
 	/* read-only status information */
-	VB_ALIGN_FIELD_64 (struct vb_status *vbStatus, pad1);
+	VB_ALIGN_FIELD_64 (struct vb_status *vb_status, pad1);
 
 	/* read-write control information */
 	VB_ALIGN_FIELD_64 (struct vb_control *vbControl, pad2);
diff --git a/kernel/vbi/lib.c b/kernel/vbi/lib.c
index 5c47026..1e51d22 100644
--- a/kernel/vbi/lib.c
+++ b/kernel/vbi/lib.c
@@ -192,6 +192,6 @@ void vbi_init(struct vb_config *config)
 
 	wr_vb_config = config;
 	wr_vb_control = wr_vb_config->vbControl;
-	wr_vb_status = wr_vb_config->vbStatus;
+	wr_vb_status = wr_vb_config->vb_status;
 
 }
diff --git a/kernel/vbi/show.c b/kernel/vbi/show.c
index 186ad58..1d76048 100644
--- a/kernel/vbi/show.c
+++ b/kernel/vbi/show.c
@@ -164,7 +164,7 @@ void vbi_show_cfg(void)
 	printk("pid:                %d\n", p->pid);
 	printk("Board ID:           %d\n", p->boardID);
 
-	printk("Status Address:     0x%p\n", p->vbStatus);
+	printk("Status Address:     0x%p\n", p->vb_status);
 	printk("Control Address:    0x%p\n", p->vbControl);
 #if defined (_WRHV_ARCH_HAS_VB_SYSTBL)
 	printk("Syscall Table Address:    0x%lx\n",
-- 
1.6.5.2

