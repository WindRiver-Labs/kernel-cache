From b30afab3fff3b905ea64b1c5b37b8d5f651cfadc Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 18 Nov 2009 10:07:16 -0500
Subject: [PATCH 23/80] vbiIcacheFlush --> vbi_flush_icache

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/powerpc/kernel/vbi/syscalls.S |    8 ++++----
 arch/powerpc/kernel/vbi/util.c     |    6 +++---
 include/vbi/syscall.h              |    2 +-
 3 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/arch/powerpc/kernel/vbi/syscalls.S b/arch/powerpc/kernel/vbi/syscalls.S
index 64b727c..ca4e93a 100644
--- a/arch/powerpc/kernel/vbi/syscalls.S
+++ b/arch/powerpc/kernel/vbi/syscalls.S
@@ -40,7 +40,7 @@ FUNC_EXPORT(vbi_ctx_ctl)
 FUNC_EXPORT(vbi_send)
 FUNC_EXPORT(vbi_rx_op)
 FUNC_EXPORT(vbi_reply)
-FUNC_EXPORT(vbiIcacheFlush)
+FUNC_EXPORT(vbi_flush_icache)
 FUNC_EXPORT(vbiDcacheFlush)
 FUNC_EXPORT(vbiCacheTextUpdate)
 FUNC_EXPORT(vbiTlbFlush)
@@ -359,18 +359,18 @@ FUNC_END(vbi_shell_start_debug)
 
 /*
  *
- * vbiIcacheFlush - flush the instruction cache
+ * vbi_flush_icache - flush the instruction cache
  *
  * This routine makes a hypercall to flush the instruction cache of the calling
  * core for the specified address range.
  *
  */
-FUNC_LABEL(vbiIcacheFlush)
+FUNC_LABEL(vbi_flush_icache)
 	lis r0, HI(VBI_SYS_icache_flush)
 	ori r0, r0, LO(VBI_SYS_icache_flush)
 	HCALL
 	blr
-FUNC_END(vbiIcacheFlush)
+FUNC_END(vbi_flush_icache)
 
 /*
  * vbiDcacheFlush - flush the specified Data cache
diff --git a/arch/powerpc/kernel/vbi/util.c b/arch/powerpc/kernel/vbi/util.c
index d3ef0ca..1c0c396 100644
--- a/arch/powerpc/kernel/vbi/util.c
+++ b/arch/powerpc/kernel/vbi/util.c
@@ -117,7 +117,7 @@ int vb_context_mmu_on(int pid,	/* context id */
 
 void vb__flush_dcache_icache(void *start)
 {
-	vbiIcacheFlush(start, 4096);
+	vbi_flush_icache(start, 4096);
 	vbiDcacheFlush(start, 4096);
 }
 
@@ -128,12 +128,12 @@ void vb_flush_dcache_range(unsigned long start, unsigned long stop)
 
 void vb__flush_icache_range(unsigned long start, unsigned long stop)
 {
-	vbiIcacheFlush((void *) start, (stop - start + 1));
+	vbi_flush_icache((void *) start, (stop - start + 1));
 }
 
 void vb__flush_dcache_icache_phys(unsigned long physaddr)
 {
-	vbiIcacheFlush((void *) physaddr, 4096);
+	vbi_flush_icache((void *) physaddr, 4096);
 	vbiDcacheFlush((void *) physaddr, 4096);
 }
 
diff --git a/include/vbi/syscall.h b/include/vbi/syscall.h
index 4150277..9453cc4 100644
--- a/include/vbi/syscall.h
+++ b/include/vbi/syscall.h
@@ -111,7 +111,7 @@ extern asmlinkage int32_t vbi_reply(vbiCtx_t id, void *smsg, size_t slen,
 
 extern asmlinkage vbiStatus_t vbiPanic(const char *msg);
 extern vbiStatus_t vbiDcacheFlush(void *saddr, size_t size);
-extern vbiStatus_t vbiIcacheFlush(void *saddr, size_t size);
+extern vbiStatus_t vbi_flush_icache(void *saddr, size_t size);
 extern asmlinkage vbiStatus_t vbiKputs(const char *s);
 extern asmlinkage vbiStatus_t vbiKputc(int c);
 extern vbiStatus_t vbiVmmuConfig(struct vmmuConfig * config);
-- 
1.6.5.2

