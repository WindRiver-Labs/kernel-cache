From da1bab2eee0a2f3c375a487b84f99e8d5721b234 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 20 Oct 2009 18:24:32 -0400
Subject: [PATCH 27/27] vbi: make includes independent of CONFIG_WRHV

The current include layout was added conditional on WRHV,
(with quoted includes) and the original reference implementation
includes were left as they were.  This makes the in-use
includes the default (without the CONFIG_WRHV switch) and
deletes the old reference implementation includes.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/interface.h |    5 -----
 include/vbi/private.h   |   10 +++-------
 include/vbi/syscall.h   |   10 ++--------
 include/vbi/vbi.h       |   14 +-------------
 4 files changed, 6 insertions(+), 33 deletions(-)

diff --git a/include/vbi/interface.h b/include/vbi/interface.h
index d4ef0df..7d34fb8 100644
--- a/include/vbi/interface.h
+++ b/include/vbi/interface.h
@@ -85,13 +85,8 @@ files where the data structrures layout is defined.
 #ifndef __INCvbInterfaceh
 #define __INCvbInterfaceh
 
-#ifdef CONFIG_WRHV
-#include "vbi/types.h"
-#include "vbi/arch.h"
-#else
 #include <vbi/types.h>
 #include <vbi/arch.h>
-#endif /* CONFIG_WRHV */
 
 /* VB versioning information */
 
diff --git a/include/vbi/private.h b/include/vbi/private.h
index 7b83be0..519b679 100644
--- a/include/vbi/private.h
+++ b/include/vbi/private.h
@@ -18,18 +18,14 @@
 #ifndef __INCvbiPrvh
 #define __INCvbiPrvh
 
-#ifdef CONFIG_WRHV
 #define _WRS_INLINE     static __inline__
 #define EOS     '\0'    /* C string terminator */
 #define LINKAGE asmlinkage
 #include <linux/types.h>
 #include <linux/linkage.h>
-#include "syscalls.h"
-#include "vbi/syscall.h"
-#include "vbi/types.h"
-#else
-#define LINKAGE
-#endif /* CONFIG_WRHV */
+#include <vbi/syscalls.h>
+#include <vbi/syscall.h>
+#include <vbi/types.h>
 
 #ifndef _ASMLANGUAGE
 
diff --git a/include/vbi/syscall.h b/include/vbi/syscall.h
index 742c64d..54b6f83 100644
--- a/include/vbi/syscall.h
+++ b/include/vbi/syscall.h
@@ -17,17 +17,11 @@
 #ifndef __INCvbiSyscallh
 #define __INCvbiSyscallh
 
-#ifdef CONFIG_WRHV
 #define LINKAGE asmlinkage
 #include <linux/linkage.h>
-#include "vbi/types.h"
-#include "vbi/arch.h"
-#include "syscalls.h"
-#else
-#define LINKAGE
+#include <vbi/types.h>
 #include <vbi/arch.h>
-#include <syscalls.h>
-#endif /* CONFIG_WRHV */
+#include <vbi/syscalls.h>
 
 #ifndef	_ASMLANGUAGE
 
diff --git a/include/vbi/vbi.h b/include/vbi/vbi.h
index 35610f0..98277d1 100644
--- a/include/vbi/vbi.h
+++ b/include/vbi/vbi.h
@@ -18,26 +18,14 @@
 #ifndef __INCvbih
 #define __INCvbih
 
-#ifdef CONFIG_WRHV
-#include "vbi/errors.h"
-#include "vbi/types.h"
-#include "vbi/version.h"
-#include "vbi/arch.h"
-#include "vbi/interface.h"
-#include "vbi/syscall.h"
-#include "vbi/interrupt.h"
-#include "vbi/shmem.h"
-#else
-#include <stdlib.h>
 #include <vbi/errors.h>
 #include <vbi/types.h>
 #include <vbi/version.h>
 #include <vbi/arch.h>
 #include <vbi/interface.h>
-#include <syscall.h>
+#include <vbi/syscall.h>
 #include <vbi/interrupt.h>
 #include <vbi/shmem.h>
-#endif /* CONFIG_WRHV */
 
 #ifndef _ASMLANGUAGE
 /*
-- 
1.6.3.3

