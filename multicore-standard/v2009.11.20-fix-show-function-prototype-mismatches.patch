From 3043879a2839ad74c3223457e3562e3870140784 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Thu, 26 Nov 2009 19:46:12 -0500
Subject: [PATCH 7/7] v2009.11.20: fix show function prototype mismatches

Integrate the pre Black Monday release

[cf: 01n,18nov09,mmi  fix XXXRegsDisplay() parameters
     01m,13nov09,mmi  fix mismatch of proto and definition ]

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 kernel/vbi/show.c |   33 +++++++++++++++++----------------
 1 files changed, 17 insertions(+), 16 deletions(-)

diff --git a/kernel/vbi/show.c b/kernel/vbi/show.c
index 0ec14f3..2181eab 100644
--- a/kernel/vbi/show.c
+++ b/kernel/vbi/show.c
@@ -35,8 +35,9 @@ control and configuration data structures.
  *
  */
 
-void vbi_show_shmem(struct vb_config *config)
+void vbi_show_shmem(void)
 {
+	struct vb_config *config = VBI_CONFIG_ADDR_GET();
 	struct vb_sm_info *p = config->sharedMemoryRegionsConfigAddress;
 	int num_sm = config->num_sm;
 	void *pState = config->sharedMemoryRegionsStateAddress;
@@ -60,11 +61,11 @@ void vbi_show_shmem(struct vb_config *config)
  * This routine traverse the array of memory regions descriptor for a
  * given board and displays the information on hypervisor console.
  *
- * RETURNS: returns OK or errno in case of failure
- *
  */
-void vbi_show_mem(struct vb_config *config)
+void vbi_show_mem(void)
+
 {
+	struct vb_config *config = VBI_CONFIG_ADDR_GET();
 	struct vb_mem_info *p = config->memoryRegionsConfigAddress;
 	int num_sm = config->num_mem;
 	int i;
@@ -87,8 +88,9 @@ void vbi_show_mem(struct vb_config *config)
  * board and displays the information on hypervisor console.
  *
  */
-static void vbi_show_irq(struct vb_config *config)
+static void vbi_show_irq(void)
 {
+	struct vb_config *config = VBI_CONFIG_ADDR_GET();
 	struct vb_int_info *p = config->interruptConfiguration;
 	int num_int = config->num_ints;
 	int i;
@@ -111,8 +113,9 @@ static void vbi_show_irq(struct vb_config *config)
  * This routine displays information in the status structure for a given board.
  *
  */
-void vbi_show_stat(struct vb_status *p)
+void vbi_show_stat(void)
 {
+	struct vb_status *p = VBI_STATUS_ADDR_GET();
 	printk("VB status: 0x%p\n", p);
 
 	printk("  Pending interrupts: 0x%08x\n", p->int_pend_type);
@@ -126,11 +129,10 @@ void vbi_show_stat(struct vb_status *p)
 /*
  * vbi_show_ctrl - print information about a board's control structures
  *
- * This routine displays information in the control structure for a given board.
- *
  */
-void vbi_show_ctrl(struct vb_control *p)
+void vbi_show_ctrl(void)
 {
+	struct vb_control *p = VBI_CNTRL_ADDR_GET();
 	int i;
 
 	printk("VB control data: 0x%p\n", p);
@@ -150,14 +152,13 @@ void vbi_show_ctrl(struct vb_control *p)
 }
 
 /*
- * vbi_show_cfg - print information about a board's config structures
- *
- * This routine displays information in the config structure for a given board.
+ * vbi_show_cfg - print information about a board's config structure
  *
  */
 
-void vbi_show_cfg(struct vb_config *p)
+void vbi_show_cfg(void)
 {
+	struct vb_config *p = VBI_CONFIG_ADDR_GET();
 	printk("VB config data: 0x%p\n", p);
 
 	printk("pid:                %d\n", p->pid);
@@ -183,7 +184,7 @@ void vbi_show_cfg(struct vb_config *p)
 
 	printk("num_ints:             %d\n", p->num_ints);
 
-	vbi_show_mem(p);
-	vbi_show_shmem(p);
-	vbi_show_irq(p);
+	vbi_show_mem();
+	vbi_show_shmem();
+	vbi_show_irq();
 }
-- 
1.6.5.2

