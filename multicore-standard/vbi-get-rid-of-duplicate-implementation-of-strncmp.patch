From d731441a96b4af80d508447029af51bf5d19ba4d Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Thu, 29 Oct 2009 19:11:17 -0400
Subject: [PATCH 06/26] vbi: get rid of duplicate implementation of strncmp()

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/vbi/private.h  |   14 --------------
 kernel/vbi/interrupt.c |    2 +-
 kernel/vbi/shmem.c     |    4 ++--
 3 files changed, 3 insertions(+), 17 deletions(-)

diff --git a/include/vbi/private.h b/include/vbi/private.h
index 0b1a719..1abf297 100644
--- a/include/vbi/private.h
+++ b/include/vbi/private.h
@@ -25,20 +25,6 @@
 
 #ifndef _ASMLANGUAGE
 
-static __inline__ vbiStatus_t _vbiStrncmp(const char * s1, const char * s2, size_t n)
-{                                        
-	if (n == 0)
-		return (0);
- 
-	while (*s1++ == *s2++)
-	{
- 		if ((s1 [-1] == '\0') || (--n == 0))
- 		    return (0);
-	}
- 
-	return ((s1 [-1]) - (s2 [-1]));
-}
-
 /* private ioapic operator */
 extern asmlinkage vbiStatus_t vbiIoapicOp (uint32_t ioctl, vbiIrq_t irq, uint32_t filter, vbiVb_t vbId);
 
diff --git a/kernel/vbi/interrupt.c b/kernel/vbi/interrupt.c
index 7a030ed..88ddbc6 100644
--- a/kernel/vbi/interrupt.c
+++ b/kernel/vbi/interrupt.c
@@ -55,7 +55,7 @@ vbiIrq_t vbiIntVecFind(char *intName, int32_t intDirection)
 		if (intDirection != (int32_t)(info->intDirection))
 			continue;
 
-		if (!_vbiStrncmp ((char *)intName, (char *)info->intName,
+		if (!strncmp((char *)intName, (char *)info->intName,
 				VB_MAX_WRHV_NAME_LENGTH)) {
 
 		        /* Found */
diff --git a/kernel/vbi/shmem.c b/kernel/vbi/shmem.c
index 9e4ae03..d9947c1 100644
--- a/kernel/vbi/shmem.c
+++ b/kernel/vbi/shmem.c
@@ -60,7 +60,7 @@ vbiStatus_t vbiShmemRegionFind(int8_t *smName, void **addr,
 
 	for (i = 0; i < num; i++, info++)
         {
-		if (!_vbiStrncmp((char *)smName, (char *)info->name,
+		if (!strncmp((char *)smName, (char *)info->name,
 				VB_MAX_WRHV_NAME_LENGTH)) {
 			/* Found */
 			*addr   = info->addr;
@@ -95,7 +95,7 @@ vbiStatus_t vbiMemRegionFind(int8_t *name, void **addr,
 
 	for (i = 0; i < num; i++, info++)
 	{
-		if (!_vbiStrncmp ((char *)name, (char *)info->name,
+		if (!strncmp((char *)name, (char *)info->name,
 			VB_MAX_WRHV_NAME_LENGTH)) {
 			/* Found */
 			*addr   = info->addr;
-- 
1.6.5.2

