From 48969947f45f8dce75ea604faa3d0b3e07b6b288 Mon Sep 17 00:00:00 2001
From: Shinya Kuribayashi <shinya.kuribayashi@necel.com>
Date: Tue, 28 Apr 2009 14:19:06 +0900
Subject: [PATCH] net: nec_candy: Replace EMMA3P define with CONFIG_SOC_EMMA

Signed-off-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com>
---
 drivers/net/nec_candy.c |    8 ++++----
 drivers/net/nec_candy.h |   10 +++++-----
 2 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/drivers/net/nec_candy.c b/drivers/net/nec_candy.c
index ff35a69..defb7a3 100644
--- a/drivers/net/nec_candy.c
+++ b/drivers/net/nec_candy.c
@@ -567,13 +567,13 @@ candy_hw_init(struct net_device *dev)
 	/*
 	 * initialize DMA / FIFO
 	 */
-#ifdef EMMA3P
+#ifdef CONFIG_SOC_EMMA
 	candy_out(p->txcfg, DTBS16);
 	candy_out(p->txfc, TPTV | TX_DRTH | TX_FLTH);
 	candy_out(p->rxcfg, DRBS16);
 	candy_out(p->rxfc, UWM | LWM | RX_DRTH16W);
 	candy_out(p->rxpd, AL | DUWM | DLWM);
-#else	/* EMMA3P */
+#else	/* CONFIG_SOC_EMMA */
 #ifdef WORKAROUND_E7_AFCE
 	candy_out(p->txcfg, DTBS8);
 #else
@@ -583,14 +583,14 @@ candy_hw_init(struct net_device *dev)
 	candy_out(p->rxcfg, DRBS8);
 	candy_out(p->rxfc, UWM | LWM | RX_DRTH16W);
 	candy_out(p->rxpd, AL);
-#endif	/* EMMA3P */
+#endif	/* CONFIG_SOC_EMMA */
 
 #ifdef CONFIG_CANDY_AFCE2
 	/* unfortunately AFCE1 function is useless. never enable it. */
 	candy_set_bits(p->txcfg, AFCE2 | AP0TE);
 #endif
 
-#ifdef EMMA3P
+#ifdef CONFIG_SOC_EMMA
 	/*
 	 * mode configuration
 	 */
diff --git a/drivers/net/nec_candy.h b/drivers/net/nec_candy.h
index 669470c..2be609d 100644
--- a/drivers/net/nec_candy.h
+++ b/drivers/net/nec_candy.h
@@ -19,8 +19,8 @@
 /***********************************************************************
  * Configure
  ***********************************************************************/
-#define EMMA3P
-#ifdef EMMA3P
+
+#ifdef CONFIG_SOC_EMMA
 #define VR4133A
 #endif
 
@@ -82,7 +82,7 @@ static int rx_copybreak = 160;
 #define WORKAROUND_E10_VR4133
 #endif
 
-#ifdef EMMA3P
+#ifdef CONFIG_SOC_EMMA
 #undef WORKAROUND_E7_AFCE
 #undef WORKAROUND_E10_PRM_AMC
 #undef WORKAROUND_E13_TXFC
@@ -302,7 +302,7 @@ static int rx_copybreak = 160;
  */
 #define TX_FLTH		0x000000a0	/* 101000b (160byte) */
 #else
-#ifdef EMMA3P
+#ifdef CONFIG_SOC_EMMA
 #define TX_FLTH		0x00000080	/* default 100000b (32word, 128byte) */
 #else
 #define TX_FLTH		0x000000c0	/* default 110000b (48word, 192byte) */
@@ -415,7 +415,7 @@ static int rx_copybreak = 160;
 #define RFLE		0x0002		/* Receive Frame Length Error */
 #define RXOK		0x0001		/* Receive OK */
 
-#if defined(CONFIG_NEC_CMBVR4133) || defined(EMMA3P)
+#if defined(CONFIG_NEC_CMBVR4133) || defined(CONFIG_SOC_EMMA)
 #define CANDY_REGS_VER	2		/* version 2 */
 #else
 #define CANDY_REGS_VER	1		/* version 1 */
-- 
1.6.0.4

