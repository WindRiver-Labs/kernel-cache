From b51ced4f6c93f714a42bf4aea48c5fbdb6536316 Mon Sep 17 00:00:00 2001
From: Shinya Kuribayashi <shinya.kuribayashi@necel.com>
Date: Mon, 7 Sep 2009 09:30:22 +0900
Subject: [PATCH 11/12] USB: EMMA EHCI/OHCI: Set usb_hcd_platform_shutdown in platform_driver

With this fix, [eo]hci_shutdown() would be invoked on shutdown.

Signed-off-by: Shinya Kuribayashi <shinya.kuribayashi@necel.com>
---
 drivers/usb/host/ehci-emma.c |    1 +
 drivers/usb/host/ohci-emma.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/usb/host/ehci-emma.c b/drivers/usb/host/ehci-emma.c
index 5ed135c..9e6deae 100644
--- a/drivers/usb/host/ehci-emma.c
+++ b/drivers/usb/host/ehci-emma.c
@@ -253,6 +253,7 @@ static int ehci_hcd_emma_drv_remove(struct platform_device *pdev)
 static struct platform_driver ehci_hcd_emma_driver = {
 	.probe		= ehci_hcd_emma_drv_probe,
 	.remove		= ehci_hcd_emma_drv_remove,
+	.shutdown	= usb_hcd_platform_shutdown,
 	.driver = {
 		.name	= "emma-ehci",
 		.owner	= THIS_MODULE,
diff --git a/drivers/usb/host/ohci-emma.c b/drivers/usb/host/ohci-emma.c
index ce37019..e0113ba 100644
--- a/drivers/usb/host/ohci-emma.c
+++ b/drivers/usb/host/ohci-emma.c
@@ -265,6 +265,7 @@ static int ohci_hcd_emma_drv_remove(struct platform_device *pdev)
 static struct platform_driver ohci_hcd_emma_driver = {
 	.probe		= ohci_hcd_emma_drv_probe,
 	.remove		= ohci_hcd_emma_drv_remove,
+	.shutdown	= usb_hcd_platform_shutdown,
 	.driver = {
 		.name	= "emma-ohci",
 		.owner	= THIS_MODULE,
-- 
1.6.3.3

