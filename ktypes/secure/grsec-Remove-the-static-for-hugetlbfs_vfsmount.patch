From 24c3ef881b0e91c89573b28e47b982c9dabd1aaf Mon Sep 17 00:00:00 2001
From: Jianchuan Wang <jianchuan.wang@windriver.com>
Date: Mon, 9 May 2016 05:38:23 +0000
Subject: [PATCH] grsec: Remove the static for hugetlbfs_vfsmount

grsecurity/gracl.c will use hugetlbfs_vfsmount
when enabling CONFIG_GRKERNSEC and CONFIG_HUGETLBFS.

Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 fs/hugetlbfs/inode.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/fs/hugetlbfs/inode.c b/fs/hugetlbfs/inode.c
index 4f9d2da..6a3a82f 100644
--- a/fs/hugetlbfs/inode.c
+++ b/fs/hugetlbfs/inode.c
@@ -948,8 +948,11 @@ static struct file_system_type hugetlbfs_fs_type = {
 	.kill_sb	= kill_litter_super,
 };
 MODULE_ALIAS_FS("hugetlbfs");
-
+#if defined(CONFIG_GRKERNSEC) && defined(CONFIG_HUGETLBFS)
+struct vfsmount *hugetlbfs_vfsmount[HUGE_MAX_HSTATE];
+#else
 static struct vfsmount *hugetlbfs_vfsmount[HUGE_MAX_HSTATE];
+#endif
 
 static int can_do_hugetlb_shm(void)
 {
-- 
1.7.5.4

