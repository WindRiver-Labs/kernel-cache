From 258c535020d13c8d8769315ba83fbe8a51c242ed Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Fri, 30 Mar 2012 00:27:00 -0400
Subject: [PATCH] perf: 3.3+ build fixups

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 tools/perf/Makefile      |    2 +-
 tools/perf/util/header.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/tools/perf/Makefile b/tools/perf/Makefile
index b5955db..4b6a398 100644
--- a/tools/perf/Makefile
+++ b/tools/perf/Makefile
@@ -182,7 +182,7 @@ endif
 
 ### --- END CONFIGURATION SECTION ---
 
-BASIC_CFLAGS = -Iutil/include -Iarch/$(ARCH)/include -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE
+BASIC_CFLAGS = -Iutil/include -Iarch/$(ARCH)/include -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64 -D_GNU_SOURCE -I../../include
 BASIC_LDFLAGS =
 
 # Guard against environment variables
diff --git a/tools/perf/util/header.c b/tools/perf/util/header.c
index fcd9cf3..d572e61 100644
--- a/tools/perf/util/header.c
+++ b/tools/perf/util/header.c
@@ -1177,7 +1177,7 @@ static void print_event_desc(struct perf_header *ph, int fd, FILE *fp)
 		goto error;
 
 	msz = sizeof(attr);
-	if (sz < (ssize_t)msz)
+	if (sz < (u32)msz)
 		msz = sz;
 
 	for (i = 0 ; i < nre; i++) {
-- 
1.7.5.4

