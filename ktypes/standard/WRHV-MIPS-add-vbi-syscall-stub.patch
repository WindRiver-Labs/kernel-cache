From e3833375ef5a6948b23f1fe2f9373c9fc0ab87f4 Mon Sep 17 00:00:00 2001
From: Liang Li <liang.li@windriver.com>
Date: Tue, 1 Mar 2011 16:58:53 +0800
Subject: [PATCH 1/3] WRHV: MIPS: add vbi syscall stub

Add vbi_vb_mem, vbi_vb_vb_control and vbi_activate_vb to
syscall stub for mips

Signed-off-by: Liang Li <liang.li@windriver.com>
---
 arch/mips/kernel/scall32-o32.S |    3 +++
 arch/mips/kernel/scall64-n32.S |    3 +++
 arch/mips/kernel/scall64-o32.S |    3 +++
 3 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/mips/kernel/scall32-o32.S b/arch/mips/kernel/scall32-o32.S
index 24be036..d84cdf4 100644
--- a/arch/mips/kernel/scall32-o32.S
+++ b/arch/mips/kernel/scall32-o32.S
@@ -585,6 +585,9 @@ einval:	li	v0, -ENOSYS
 	sys	sys_accept4		4
 	sys     sys_recvmmsg            5
 	sys	sys_revokeat		2
+	sys	sys_vbi_mem		5
+	sys 	sys_vbi_activate_vb	2
+	sys 	sys_vbi_control		3
 	.endm
 
 	/* We pre-compute the number of _instruction_ bytes needed to
diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index f0f42e1..973faa6 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -423,4 +423,7 @@ EXPORT(sysn32_call_table)
 	PTR     compat_sys_recvmmsg
 	PTR     sys_getdents64
 	PTR	sys_revokeat
+	PTR     sys_vbi_mem
+	PTR     sys_vbi_activate_vb
+	PTR     sys_vbi_control
 	.size	sysn32_call_table,.-sysn32_call_table
diff --git a/arch/mips/kernel/scall64-o32.S b/arch/mips/kernel/scall64-o32.S
index 93986ca..33b977f 100644
--- a/arch/mips/kernel/scall64-o32.S
+++ b/arch/mips/kernel/scall64-o32.S
@@ -540,4 +540,7 @@ EXPORT(syso32_call_table)
 	PTR	sys_accept4
 	PTR     compat_sys_recvmmsg
 	PTR	sys_revokeat
+	PTR     sys_vbi_mem
+	PTR     sys_vbi_activate_vb
+	PTR     sys_vbi_control
 	.size	sys_call_table,.-sys_call_table
-- 
1.7.0.4

