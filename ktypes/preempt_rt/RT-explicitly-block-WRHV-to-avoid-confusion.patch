From 8fbad7315981053929f1beff19ce5f62f42b6c8e Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Thu, 19 May 2011 13:49:21 -0400
Subject: [PATCH] RT: explicitly block WRHV to avoid confusion

In a virtual machine, there is no way any sort of control
over latencies can be achieved, so explicitly exclude the
pairing of the two.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 kernel/Kconfig.preempt |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/kernel/Kconfig.preempt b/kernel/Kconfig.preempt
index f4602f8..14e5a37 100644
--- a/kernel/Kconfig.preempt
+++ b/kernel/Kconfig.preempt
@@ -59,6 +59,7 @@ config PREEMPT_RT
 	select PREEMPT_HARDIRQS
 	select PREEMPT_RCU
 	select RT_MUTEXES
+	depends on !WRHV
 	help
 	  This option further reduces the scheduling latency of the
 	  kernel by replacing almost every spinlock used by the kernel
-- 
1.7.4.4

