From b4b5c1f15ad014a9d05770487da13a39e3e8238a Mon Sep 17 00:00:00 2001
From: Thomas Gleixner <tglx@linutronix.de>
Date: Fri, 3 Sep 2010 00:07:38 -0700
Subject: [PATCH 25/27] dca: Fix fallout from raw_spinlock conversion

(cherry picked from tip commit 911d28c51827fb0dbf2dcc1e3f2f7618c87cf1eb)

Compiling stuff helps even if there is no hardware to test on.

Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
---
 drivers/dca/dca-core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/dca/dca-core.c b/drivers/dca/dca-core.c
index 4cb0e57..026b058 100644
--- a/drivers/dca/dca-core.c
+++ b/drivers/dca/dca-core.c
@@ -308,7 +308,7 @@ int register_dca_provider(struct dca_provider *dca, struct device *dev)
 	if (!domain) {
 		raw_spin_unlock_irqrestore(&dca_lock, flags);
 
-		newdomain = dca_allocate_domain(rc);
+		newdomain = dca_allocate_domain(dca_pci_rc_from_dev(dev));
 		if (!newdomain)
 			return -ENODEV;
 
-- 
1.6.5.2

