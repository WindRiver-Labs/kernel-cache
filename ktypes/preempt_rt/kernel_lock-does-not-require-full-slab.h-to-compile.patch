From 7b5ab30942b08b527e47a13164689d20302a0327 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Sun, 20 Feb 2011 00:24:01 -0500
Subject: [PATCH] kernel_lock: does not require full <slab.h> to compile.

There was a detanglement of kernel headers (and specifically
relating to slab.h) during the 33 --> 34 kernel development
cycle between the rev list ^9e74e7c b66696e that breaks compile
of RT with implicit function decls.  While re-adding slab.h
will fix it, it is overkill, as only perf_event.h is required.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 lib/kernel_lock.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/kernel_lock.c b/lib/kernel_lock.c
index 9c31749..199c5c5 100644
--- a/lib/kernel_lock.c
+++ b/lib/kernel_lock.c
@@ -12,7 +12,7 @@
 #include <linux/kallsyms.h>
 #include <linux/mutex.h>
 #include <linux/smp_lock.h>
-#include <linux/slab.h>
+#include <linux/perf_event.h>
 
 #define CREATE_TRACE_POINTS
 #include <trace/events/bkl.h>
-- 
1.7.4

