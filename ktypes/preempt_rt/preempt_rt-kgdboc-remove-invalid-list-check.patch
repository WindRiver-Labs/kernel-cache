From 989ebd866c5225c0af51308f7f5b05f438bdf6d7 Mon Sep 17 00:00:00 2001
From: Mark Asselstine <mark.asselstine@windriver.com>
Date: Thu, 22 Jul 2010 11:44:20 -0700
Subject: [PATCH] preempt_rt: kgdboc: remove invalid list check

During porting of RT to our kernel similar changes were duplicated
to cover the removal of file_move() which included a BUG_ON check for
an empty list. The block of code is correct but the BUG_ON is not needed
since an empty list is valid and expected in this case. Functions which
operate on the list are safe to call with an empty list so no concerns
there.

Signed-off-by: Mark Asselstine <mark.asselstine@windriver.com>
---
 drivers/char/tty_io.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/char/tty_io.c b/drivers/char/tty_io.c
index 4c288d6..48b1526 100644
--- a/drivers/char/tty_io.c
+++ b/drivers/char/tty_io.c
@@ -334,7 +334,6 @@ int tty_console_poll_open(struct tty_driver *driver, struct file **filp,
 		ret = tty->ops->open(tty, *filp);
 	}
 	if (ret == 0) {
-		BUG_ON(list_empty(&(*filp)->f_u.fu_list));
 		file_sb_list_del(*filp); /*__dentry_open has put it on sb list*/
 		spin_lock(&tty_files_lock);
 		list_add(&(*filp)->f_u.fu_list, &tty->tty_files);
-- 
1.6.5.2

