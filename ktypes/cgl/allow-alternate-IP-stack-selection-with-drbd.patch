From 8b9587df024f555a47441ef2cfc8f7f59d643b8d Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Fri, 2 Jan 2009 23:38:57 -0500
Subject: [PATCH] allow alternate IP stack selection with drbd

The upstream DRBD support has an explicit select of
CONFIG_INET. This means that the native stack cannot
be disabled or an alternate stack used when DRBD is
enabled in the kernel.

In particular, this means that the INTERPEAK stack
cannot be enabled. The solution is to change the
select INET to depend on INTERPEAK not being
enabled.

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 drivers/block/drbd/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/block/drbd/Kconfig b/drivers/block/drbd/Kconfig
index 466cd36..b482208 100644
--- a/drivers/block/drbd/Kconfig
+++ b/drivers/block/drbd/Kconfig
@@ -3,7 +3,7 @@
 #
 config BLK_DEV_DRBD
 	tristate "DRBD Distributed Replicated Block Device support"
-	select INET
+	select INET if !INTERPEAK
 	select PROC_FS
 	select CONNECTOR
 	select CRYPTO
-- 
1.6.0.3

