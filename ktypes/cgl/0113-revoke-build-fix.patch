From 74562886f13a78bea6ffbfbeaf098e47779e8e8d Mon Sep 17 00:00:00 2001
From: Yong Zhang <yong.zhang@windriver.com>
Date: Mon, 17 Mar 2014 14:57:53 +0800
Subject: [PATCH 113/113] [For CGL] revoke: build fix

In commit c6a365f6d9b[sanitize vfs_fsync calling conventions]
we remove the parameter 'dentry' of vfs_fsync(), apply the same
change to generic_file_revoke().

Signed-off-by: Yong Zhang <yong.zhang@windriver.com>
---
 fs/revoke.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fs/revoke.c b/fs/revoke.c
index fc333a0..3d045ac 100644
--- a/fs/revoke.c
+++ b/fs/revoke.c
@@ -448,6 +448,6 @@ asmlinkage long sys_revokeat(int dfd, const char __user *filename)
 
 int generic_file_revoke(struct file *file)
 {
-	return vfs_fsync(file, file->f_path.dentry, 1);
+	return vfs_fsync(file, 1);
 }
 EXPORT_SYMBOL(generic_file_revoke);
-- 
1.7.9.5

