From c0d1a7e46387e7008577e5d27ca1549b7b83863c Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Fri, 5 Jul 2013 13:56:44 +0800
Subject: [PATCH 7/8] unionfs: compile warning: different variable type of
 const for assignation

warning: assignment discards 'const' qualifier from pointer target type [enabled by default]

Signed-off-by: Li Wang <li.wang@windriver.com>
---
 fs/unionfs/inode.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/fs/unionfs/inode.c b/fs/unionfs/inode.c
index dd522c2..99e782a 100644
--- a/fs/unionfs/inode.c
+++ b/fs/unionfs/inode.c
@@ -717,7 +717,7 @@ static void unionfs_put_link(struct dentry *dentry, struct nameidata *nd,
 			     void *cookie)
 {
 	struct dentry *parent;
-	char *buf;
+	const char *buf = nd_get_link(nd);
 
 	unionfs_read_lock(dentry->d_sb, UNIONFS_SMUTEX_CHILD);
 	parent = unionfs_lock_parent(dentry, UNIONFS_DMUTEX_PARENT);
@@ -732,7 +732,6 @@ static void unionfs_put_link(struct dentry *dentry, struct nameidata *nd,
 	/* XXX: can't run this check b/c this fxn can receive a poisoned 'nd' PTR */
 	unionfs_check_nd(nd);
 #endif
-	buf = nd_get_link(nd);
 	if (!IS_ERR(buf))
 		kfree(buf);
 	unionfs_unlock_dentry(dentry);
-- 
1.7.5.4

