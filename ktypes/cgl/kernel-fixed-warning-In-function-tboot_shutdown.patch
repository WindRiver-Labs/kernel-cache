From 4f1ff0852e84a540dc8fc496abf2da5c3f773ab8 Mon Sep 17 00:00:00 2001
From: "wenlin.kang" <wenlin.kang@windriver.com>
Date: Sat, 12 Oct 2013 13:10:20 +0800
Subject: [PATCH 2/2] kernel:fixed warning In function 'tboot_shutdown'

CQID: WIND00436136

fixed warning In function 'tboot_shutdown'
(warning: cast to pointer from integer of different size)

Signed-off-by: wenlin.kang <wenlin.kang@windriver.com>
---
 arch/x86/kernel/tboot.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/x86/kernel/tboot.c b/arch/x86/kernel/tboot.c
index 79758f0..a6c1864 100644
--- a/arch/x86/kernel/tboot.c
+++ b/arch/x86/kernel/tboot.c
@@ -219,7 +219,7 @@ static int tboot_setup_sleep(void)
 
 void tboot_shutdown(u32 shutdown_type)
 {
-	void (* __noreturn shutdown)(void);
+	void (*shutdown)(void);
 
 	if (!tboot_enabled())
 		return;
@@ -241,7 +241,7 @@ void tboot_shutdown(u32 shutdown_type)
 
 	switch_to_tboot_pt();
 
-	shutdown = (void *)tboot->shutdown_entry;
+	shutdown = (void(*)(void))(unsigned long)tboot->shutdown_entry;
 	shutdown();
 
 	/* should not reach here */
-- 
1.7.5.4

