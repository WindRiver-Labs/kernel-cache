From 866fccf4ade9f002f3b2cd0e389f2d332df15dda Mon Sep 17 00:00:00 2001
From: Yongli He <yongli.he@windriver.com>
Date: Tue, 31 Aug 2010 01:44:01 -0700
Subject: [PATCH] l2tp-ppp missing in compat ioctl

sock file ops use comapt ioctl in mips n32 add  PPPIOCGL2TPSTATS
to compat path.

Signed-off-by: Yongli He <yongli.he@windriver.com>
---
 net/socket.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/net/socket.c b/net/socket.c
index cbc5db2..66cdc59 100644
--- a/net/socket.c
+++ b/net/socket.c
@@ -107,6 +107,8 @@
 #include <linux/atalk.h>
 
 #include <linux/grsock.h>
+#include <linux/ppp_defs.h>
+#include <linux/if_ppp.h>
 
 static int sock_no_open(struct inode *irrelevant, struct file *dontcare);
 static ssize_t sock_aio_read(struct kiocb *iocb, const struct iovec *iov,
@@ -3049,6 +3051,7 @@ static int compat_sock_ioctl_trans(struct file *file, struct socket *sock,
 	case SIOCGSOCKSTATS:
 	case SIOCZEROSOCKSTATS:
 #endif
+	case PPPIOCGL2TPSTATS:
 		return sock_ioctl(file, cmd, arg);
 
 	case SIOCGIFFLAGS:
-- 
1.6.5.2

