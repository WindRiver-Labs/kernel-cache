From 5f68b5978bba42f372bcd7825181cfdab5b869f7 Mon Sep 17 00:00:00 2001
From: Scott Wood <scottwood@freescale.com>
Date: Mon, 2 Feb 2015 20:09:22 -0600
Subject: [PATCH 025/132] BRINGUP ONLY: early console hack

Temporary workaround for enabling early console
until we get device tree awareness in early console driver

Signed-off-by: Scott Wood <scottwood@freescale.com>
Signed-off-by: Bhupesh Sharma <bhupesh.sharma@freescale.com>
Change-Id: Id694bf2259be86e21743cdee1accd1f2cc14a8a8
Reviewed-on: http://git.am.freescale.net:8181/30098
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Signed-off-by: Stuart Yoder <stuart.yoder@freescale.com>
[Original patch from FSL LS2085 SDK EAR4.0]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/tty/serial/8250/8250_early.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/tty/serial/8250/8250_early.c b/drivers/tty/serial/8250/8250_early.c
index cfef801..909ae2e 100644
--- a/drivers/tty/serial/8250/8250_early.c
+++ b/drivers/tty/serial/8250/8250_early.c
@@ -125,6 +125,12 @@ static void __init init_port(struct earlycon_device *device)
 	unsigned int divisor;
 	unsigned char c;
 
+#ifdef CONFIG_ARCH_FSL_LS2085A
+	/* Workaround for enabling early console until we get
+	 * device tree awareness in early console driver. */
+	return;
+#endif
+
 	serial8250_early_out(port, UART_LCR, 0x3);	/* 8n1 */
 	serial8250_early_out(port, UART_IER, 0);	/* no interrupt */
 	serial8250_early_out(port, UART_FCR, 0);	/* no fifo */
-- 
1.7.5.4

