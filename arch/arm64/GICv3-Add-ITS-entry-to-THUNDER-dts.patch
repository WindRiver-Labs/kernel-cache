From 7a22444238c22344459f9d4b5cc4ec987543ab19 Mon Sep 17 00:00:00 2001
From: Tirumalesh Chalamarla <tchalamarla@cavium.com>
Date: Thu, 17 Jul 2014 13:34:48 -0700
Subject: [PATCH 424/430] GICv3: Add ITS entry to THUNDER dts

This commit comes from:
  git://git.kernel.org/pub/scm/linux/kernel/git/rric/linux.git

The PCIe host controller uses MSIs provided by GICv3 ITS. Enable it on
Thunder SoCs by adding an entry to DT.

Signed-off-by: Tirumalesh Chalamarla <tchalamarla@cavium.com>
Signed-off-by: Robert Richter <rrichter@cavium.com>
(cherry picked from commit 197ce6f088f373dbe833394558a6e999394615b3)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm64/boot/dts/thunder-88xx.dts |    9 +++++++++
 1 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/arm64/boot/dts/thunder-88xx.dts b/arch/arm64/boot/dts/thunder-88xx.dts
index 718a765..0d0f20f 100644
--- a/arch/arm64/boot/dts/thunder-88xx.dts
+++ b/arch/arm64/boot/dts/thunder-88xx.dts
@@ -350,10 +350,19 @@
 		gic0: interrupt-controller@801000000000 {
 			compatible = "arm,gic-v3";
 			#interrupt-cells = <3>;
+			#address-cells = <2>;
+			#size-cells = <2>;
+			ranges;
 			interrupt-controller;
 			reg = <0x8010 0x00000000 0x0 0x010000>, /* GICD */
 			      <0x8010 0x80000000 0x0 0x200000>; /* GICR */
 			interrupts = <1 9 0xf04>;
+
+			its: gic-its@801000020000 {
+				compatible = "arm,gic-v3-its";
+				msi-controller;
+				reg = <0x8010 0x20000 0x0 0x200000>;
+			};
 		};
 
 		uaa0: serial@87e024000000 {
-- 
1.7.5.4

