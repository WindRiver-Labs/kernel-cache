From b3d41b1017ca9489682ebfe7a28c2df4670162f9 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Tue, 30 Jun 2015 14:20:47 +0800
Subject: [PATCH 030/132] soc/fsl: add freescale dir for SOC specific drivers

Some Freescale device drivers need to move to soc/, because these drivers
are specific drivers. Before the soc/ to be created, the drivers had been
there arch/ or drivers/misc/, but now soc/ dir is a better choice.

Signed-off-by: Wang Dongsheng <dongsheng.wang@freescale.com>
(cherry picked from LS1-SDK commit 339c75cdd53fe02d713f172737e6420c5b12f062)
Patchwork link: https://patchwork.kernel.org/patch/4978991/
Change-Id: I4821849534e0b87f09b3c7289c0469111927f1da
Reviewed-on: http://git.am.freescale.net:8181/28007
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Bhupesh Sharma <bhupesh.sharma@freescale.com>
Tested-by: Bhupesh Sharma <bhupesh.sharma@freescale.com>

(cherry picked from commit e02d74e4475975405b49736cf52884e3e91fc8dc)
Signed-off-by: Stuart Yoder <stuart.yoder@freescale.com>
[Original patch from FSL LS2085 SDK EAR4.0]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/Kconfig             |    2 ++
 drivers/Makefile            |    3 +++
 drivers/soc/Kconfig         |   15 +++++++++++++++
 drivers/soc/Makefile        |    5 +++++
 drivers/soc/fsl/Kconfig     |    3 +++
 drivers/soc/fsl/Kconfig.arm |   15 +++++++++++++++
 drivers/soc/fsl/Makefile    |    5 +++++
 drivers/soc/fsl/ls/Kconfig  |    3 +++
 8 files changed, 51 insertions(+), 0 deletions(-)
 create mode 100644 drivers/soc/Kconfig
 create mode 100644 drivers/soc/Makefile
 create mode 100644 drivers/soc/fsl/Kconfig
 create mode 100644 drivers/soc/fsl/Kconfig.arm
 create mode 100644 drivers/soc/fsl/Makefile
 create mode 100644 drivers/soc/fsl/ls/Kconfig

diff --git a/drivers/Kconfig b/drivers/Kconfig
index b3138fb..76a350f 100644
--- a/drivers/Kconfig
+++ b/drivers/Kconfig
@@ -144,6 +144,8 @@ source "drivers/remoteproc/Kconfig"
 
 source "drivers/rpmsg/Kconfig"
 
+source "drivers/soc/Kconfig"
+
 source "drivers/devfreq/Kconfig"
 
 source "drivers/extcon/Kconfig"
diff --git a/drivers/Makefile b/drivers/Makefile
index 3cc8214..17506ba 100644
--- a/drivers/Makefile
+++ b/drivers/Makefile
@@ -33,6 +33,9 @@ obj-y				+= amba/
 # really early.
 obj-$(CONFIG_DMADEVICES)	+= dma/
 
+# SOC specific infrastructure drivers.
+obj-y				+= soc/
+
 obj-$(CONFIG_VIRTIO)		+= virtio/
 obj-$(CONFIG_XEN)		+= xen/
 
diff --git a/drivers/soc/Kconfig b/drivers/soc/Kconfig
new file mode 100644
index 0000000..9e9d67d
--- /dev/null
+++ b/drivers/soc/Kconfig
@@ -0,0 +1,15 @@
+menu "SOC (System On Chip) specific Drivers"
+
+config	FSL_SOC_DRIVERS
+	bool "Freescale Soc Drivers"
+	default n
+	help
+	Say y here to enable Freescale Soc Device Drivers support.
+	The Soc Drivers provides the device driver that is a specific block
+	or feature on Freescale platform.
+
+if FSL_SOC_DRIVERS
+	source "drivers/soc/fsl/Kconfig"
+endif
+
+endmenu
diff --git a/drivers/soc/Makefile b/drivers/soc/Makefile
new file mode 100644
index 0000000..10191c9
--- /dev/null
+++ b/drivers/soc/Makefile
@@ -0,0 +1,5 @@
+#
+# Makefile for the Linux Kernel SOC specific device drivers.
+#
+
+obj-$(CONFIG_FSL_SOC_DRIVERS)	+= fsl/
diff --git a/drivers/soc/fsl/Kconfig b/drivers/soc/fsl/Kconfig
new file mode 100644
index 0000000..72df9b3
--- /dev/null
+++ b/drivers/soc/fsl/Kconfig
@@ -0,0 +1,3 @@
+if ARM
+source "drivers/soc/fsl/Kconfig.arm"
+endif
diff --git a/drivers/soc/fsl/Kconfig.arm b/drivers/soc/fsl/Kconfig.arm
new file mode 100644
index 0000000..63bacdd
--- /dev/null
+++ b/drivers/soc/fsl/Kconfig.arm
@@ -0,0 +1,15 @@
+#
+# Freescale ARM SOC Drivers
+#
+
+config	LS_SOC_DRIVERS
+	bool "Layerscape Soc Drivers"
+	default n
+	help
+	Say y here to enable Freescale Layerscape Soc Device Drivers support.
+	The Soc Drivers provides the device driver that is a specific block
+	or feature on Layerscape platform.
+
+if LS_SOC_DRIVERS
+	source "drivers/soc/fsl/ls/Kconfig"
+endif
diff --git a/drivers/soc/fsl/Makefile b/drivers/soc/fsl/Makefile
new file mode 100644
index 0000000..d5a4c31
--- /dev/null
+++ b/drivers/soc/fsl/Makefile
@@ -0,0 +1,5 @@
+#
+# Makefile for Freescale Soc specific device drivers.
+#
+
+obj-$(CONFIG_LS_SOC_DRIVERS) += ls/
diff --git a/drivers/soc/fsl/ls/Kconfig b/drivers/soc/fsl/ls/Kconfig
new file mode 100644
index 0000000..e7f51cf
--- /dev/null
+++ b/drivers/soc/fsl/ls/Kconfig
@@ -0,0 +1,3 @@
+#
+# Layerscape Soc drivers
+#
-- 
1.7.5.4

