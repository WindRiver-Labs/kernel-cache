From 181e3e7e82dad0650065d355dcf8d86d876e4a98 Mon Sep 17 00:00:00 2001
From: Liang Li <liang.li@windriver.com>
Date: Tue, 1 Mar 2011 16:58:53 +0800
Subject: [PATCH] WRHV: MIPS: add vbi syscall stub

Add vbi_vb_mem, vbi_vb_vb_control and vbi_activate_vb to
syscall stub for mips

Signed-off-by: Liang Li <liang.li@windriver.com>
---
 arch/mips/kernel/scall32-o32.S |    3 +++
 arch/mips/kernel/scall64-n32.S |    3 +++
 arch/mips/kernel/scall64-o32.S |    3 +++
 3 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/mips/kernel/scall32-o32.S b/arch/mips/kernel/scall32-o32.S
index 79639f8..c7a7c81 100644
--- a/arch/mips/kernel/scall32-o32.S
+++ b/arch/mips/kernel/scall32-o32.S
@@ -585,6 +585,9 @@ einval:	li	v0, -ENOSYS
 	sys	sys_perf_event_open	5
 	sys	sys_accept4		4
 	sys     sys_recvmmsg            5
+	sys	sys_vbi_mem		5
+	sys 	sys_vbi_activate_vb	2
+	sys 	sys_vbi_control		3
 	.endm
 
 	/* We pre-compute the number of _instruction_ bytes needed to
diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index 515390a..c4d456a 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -428,4 +428,7 @@ EXPORT(sysn32_call_table)
 	PTR	sys_accept4
 	PTR     compat_sys_recvmmsg
 	PTR     sys_getdents64
+	PTR     sys_vbi_mem
+	PTR     sys_vbi_activate_vb
+	PTR     sys_vbi_control
 	.size	sysn32_call_table,.-sysn32_call_table
diff --git a/arch/mips/kernel/scall64-o32.S b/arch/mips/kernel/scall64-o32.S
index 4079891..040855d 100644
--- a/arch/mips/kernel/scall64-o32.S
+++ b/arch/mips/kernel/scall64-o32.S
@@ -544,4 +544,7 @@ EXPORT(syso32_call_table)
 	PTR	sys_perf_event_open
 	PTR	sys_accept4
 	PTR     compat_sys_recvmmsg
+	PTR     sys_vbi_mem
+	PTR     sys_vbi_activate_vb
+	PTR     sys_vbi_control
 	.size	sys_call_table,.-sys_call_table
-- 
1.6.5.2

