From 57a9c429c1a684453f99f014e25a8db703086216 Mon Sep 17 00:00:00 2001
From: Lans Zhang <jia.zhang@windriver.com>
Date: Mon, 12 Apr 2010 21:02:01 +0800
Subject: [PATCH 7/8] mips/cavium: return correct sockopt size for n32 on 64bit target

Replace sys_getsockopt with compat_sys_getsockopt to get the
correct sockopt size, which guarantees requested match filled
with the correct size against the size checking.

Signed-off-by: Benson Li <Benson.Li@windriver.com>
Signed-off-by: Lans Zhang <jia.zhang@windriver.com>
---
 arch/mips/kernel/scall64-n32.S |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index 44337ba..f9fd422 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -174,7 +174,7 @@ EXPORT(sysn32_call_table)
 	PTR	sys_getpeername
 	PTR	sys_socketpair
 	PTR	compat_sys_setsockopt
-	PTR	sys_getsockopt
+	PTR     compat_sys_getsockopt
 	PTR	sys_clone			/* 6055 */
 	PTR	sys_fork
 	PTR	sys32_execve
-- 
1.6.5.2

