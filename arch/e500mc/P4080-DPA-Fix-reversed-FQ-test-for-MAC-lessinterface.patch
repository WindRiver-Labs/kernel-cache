From 5a127c48d9c3cb4e8eab5f641724b7c656784316 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Tue, 19 Jan 2010 15:15:00 +0800
Subject: [PATCH 100/252] P4080/DPA: Fix reversed FQ test for MAC-lessinterfaces

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
[Cleanly applied the FSL SDK 2.0.3 patch:
"kernel-2.6.30-P4080-DPA-Fix-reversed-FQ-test-for-MAC-lessinterfac.patch"]
Integrated-by: Yuri Nedel <Yuri.Nedel@windriver.com>
---
 drivers/net/dpa/dpa.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/dpa/dpa.c b/drivers/net/dpa/dpa.c
index 7791043..4aa0180 100644
--- a/drivers/net/dpa/dpa.c
+++ b/drivers/net/dpa/dpa.c
@@ -2556,7 +2556,7 @@ dpa_probe(struct of_device *_of_dev)
 		/* For now, stick to the idea that we have to have
 		 * static declarations on MAC-less devices */
 		for (i = 0; i < ARRAY_SIZE(fqids); i++)
-			if (unlikely(fqids[i])) {
+			if (unlikely(fqids[i] == NULL)) {
 				cpu_dev_err(dev, "%s:%hu:%s(): "
 			     "MAC-less interfaces require %s FQ declarations\n",
 			      __file__, __LINE__, __func__, rtx[i]);
-- 
1.6.5.2

