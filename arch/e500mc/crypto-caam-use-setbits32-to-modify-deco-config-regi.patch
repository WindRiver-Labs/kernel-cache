From cb61140f0c1c444ee2760d8fe086dd4d5b968d00 Mon Sep 17 00:00:00 2001
From: Andrew Liu <shengping.liu@windriver.com>
Date: Fri, 10 Sep 2010 10:53:38 +0800
Subject: [PATCH 185/252] crypto: caam - use setbits32 to modify deco config register

Patch taken from FSL vendor SDK 2.1.

it's simpler & easier to read.

Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
Integrated-by: Andrew Liu <shengping.liu@windriver.com>
---
 drivers/crypto/caam/ctrl.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

diff --git a/drivers/crypto/caam/ctrl.c b/drivers/crypto/caam/ctrl.c
index 16cceb9..b1bbf38 100644
--- a/drivers/crypto/caam/ctrl.c
+++ b/drivers/crypto/caam/ctrl.c
@@ -108,7 +108,6 @@ static int caam_probe(struct of_device *ofdev,
 	struct device_node *nprop, *np;
 	struct caam_full *topregs;
 	struct caam_drv_private *ctrlpriv;
-	u32 mstrcfg;
 
 	ctrlpriv = kzalloc(sizeof(struct caam_drv_private), GFP_KERNEL);
 	if (!ctrlpriv)
@@ -134,9 +133,7 @@ static int caam_probe(struct of_device *ofdev,
 	ctrlpriv->secvio_irq = of_irq_to_resource(nprop, 0, NULL);
 
 	/* Enable DECO watchdogs in master configuration register */
-	mstrcfg = rd_reg32(&ctrlpriv->ctrl->mcr);
-	mstrcfg |= MCFGR_WDENABLE;
-	wr_reg32(&ctrlpriv->ctrl->mcr, mstrcfg);
+	setbits32(&ctrlpriv->ctrl->mcr, MCFGR_WDENABLE);
 
 	/*
 	 * Device tree provides no information on the actual number
-- 
1.6.5.2

