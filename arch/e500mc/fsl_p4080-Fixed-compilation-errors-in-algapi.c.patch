From 4f7e2aeab5a972f7bfc0cbf8f766f5ffbbfee5b8 Mon Sep 17 00:00:00 2001
From: Yuri Nedel <Yuri.Nedel@windriver.com>
Date: Wed, 26 May 2010 14:45:24 -0700
Subject: [PATCH 130/252] fsl_p4080: Fixed compilation errors in algapi.c

Ported "algapi.c" to the kernel 2.6.34 (from 2.6.27).

Signed-off-by: Yuri Nedel <Yuri.Nedel@windriver.com>
---
 drivers/crypto/caam/algapi.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/crypto/caam/algapi.c b/drivers/crypto/caam/algapi.c
index a954c06..4b84fc1 100644
--- a/drivers/crypto/caam/algapi.c
+++ b/drivers/crypto/caam/algapi.c
@@ -256,7 +256,7 @@ static int build_protocol_desc_ipsec_encap(struct caam_ctx *ctx,
 	struct device *dev = ctx->dev;
 	struct crypto_async_request *req_base = &areq->base;
 	struct sk_buff *skb = req_base->data;
-	struct dst_entry *dst = skb->dst;
+	struct dst_entry *dst = skb_dst(skb);
 	struct xfrm_state *x = dst->xfrm;
 	struct ipsec_encap_pdb *sh_desc;
 	int endidx;
-- 
1.6.5.2

