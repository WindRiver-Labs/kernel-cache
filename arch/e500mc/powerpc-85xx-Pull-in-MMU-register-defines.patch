From 505df886d189eab333d6f862aa9d11ff96222f09 Mon Sep 17 00:00:00 2001
From: Kumar Gala <galak@kernel.crashing.org>
Date: Tue, 10 May 2011 00:25:52 -0500
Subject: [PATCH 016/233] powerpc/85xx: Pull in MMU register #defines

Extracted from vendor drop QorIQ-DPAA-SDK-V1-20110609-systembuilder.iso
0061-powerpc-85xx-Pull-in-MMU-register-defines.patch

Pull in asm/mmu-book3e.h changes from upstream commit:

commit 988cf86d4f0da4150e808300c145ba87c0aad02f
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Oct 8 02:13:25 2010 -0500

    powerpc/fsl-booke: Add support for FSL Arch v1.0 MMU in setup_page_sizes

    Update setup_page_sizes() to support for a MMU v1.0 FSL style MMU
    implementation.  In such a processor, we don't have TLB0PS or EPTCFG
    registers (and access to these registers may cause exceptions).  We need
    to parse the older format of TLBnCFG for page size support.  Additionaly,
    assume since we are an FSL implementation that we have 2 TLB arrays and
    the second array contains the variable size pages.

    Signed-off-by: Kumar Gala <galak@kernel.crashing.org>

Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
---
 arch/powerpc/include/asm/mmu-book3e.h |   15 +++++++++++++++
 1 files changed, 15 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/include/asm/mmu-book3e.h b/arch/powerpc/include/asm/mmu-book3e.h
index 9e1119b..894edcd 100644
--- a/arch/powerpc/include/asm/mmu-book3e.h
+++ b/arch/powerpc/include/asm/mmu-book3e.h
@@ -114,6 +114,17 @@
 
 #define MAS7_RPN		0xFFFFFFFF
 
+/* Bit definitions for MMUCFG */
+#define MMUCFG_MAVN	0x00000003	/* MMU Architecture Version Number */
+#define MMUCFG_MAVN_V1	0x00000000	/* v1.0 */
+#define MMUCFG_MAVN_V2	0x00000001	/* v2.0 */
+#define MMUCFG_NTLBS	0x0000000c	/* Number of TLBs */
+#define MMUCFG_PIDSIZE	0x000007c0	/* PID Reg Size */
+#define MMUCFG_TWC	0x00008000	/* TLB Write Conditional (v2.0) */
+#define MMUCFG_LRAT	0x00010000	/* LRAT Supported (v2.0) */
+#define MMUCFG_RASIZE	0x00fe0000	/* Real Addr Size */
+#define MMUCFG_LPIDSIZE	0x0f000000	/* LPID Reg Size */
+
 /* Bit definitions for MMUCSR0 */
 #define MMUCSR0_TLB1FI	0x00000002	/* TLB1 Flash invalidate */
 #define MMUCSR0_TLB0FI	0x00000004	/* TLB0 Flash invalidate */
@@ -133,6 +144,10 @@
 #define TLBnCFG_GTWE		0x00010000	/* Guest can write */
 #define TLBnCFG_IND		0x00020000	/* IND entries supported */
 #define TLBnCFG_PT		0x00040000	/* Can load from page table */
+#define TLBnCFG_MINSIZE		0x00f00000	/* Minimum Page Size (v1.0) */
+#define TLBnCFG_MINSIZE_SHIFT	20
+#define TLBnCFG_MAXSIZE		0x000f0000	/* Maximum Page Size (v1.0) */
+#define TLBnCFG_MAXSIZE_SHIFT	16
 #define TLBnCFG_ASSOC		0xff000000	/* Associativity */
 
 /* TLBnPS encoding */
-- 
1.7.0.4

