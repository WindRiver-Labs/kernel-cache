From bf85dfd3b52a6729543bc52310fc9b629240f4cd Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Wed, 19 May 2010 00:01:05 -0700
Subject: [PATCH 213/252] powerpc: enable swiotlb for p4080ds

The PCIe host controller on p4080ds can't access all the 4G
ram. So we have to enable the swiotlb to make the PCIe device
work correctly. The mainline kernel already have this swiotlb support,
but we remove that when porting the FSL SDK. This patch just restore
these codes, and also remove some duplicate codes in p4080_ds.c.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/platforms/85xx/corenet_ds.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/corenet_ds.c b/arch/powerpc/platforms/85xx/corenet_ds.c
index 534c2ec..c3ba2d9 100644
--- a/arch/powerpc/platforms/85xx/corenet_ds.c
+++ b/arch/powerpc/platforms/85xx/corenet_ds.c
@@ -114,6 +114,9 @@ static const struct of_device_id of_device_ids[] __devinitconst = {
 		.compatible	= "simple-bus"
 	},
 	{
+		.compatible	= "fsl,dpaa"
+	},
+	{
 		.compatible	= "fsl,rapidio-delta",
 	},
 	{}
-- 
1.6.5.2

