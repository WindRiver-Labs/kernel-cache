From b25be00c3a9b5809cb03c6b497fac471c5baab4b Mon Sep 17 00:00:00 2001
From: Kumar Gala <kumar.gala@freescale.com>
Date: Thu, 14 Oct 2010 02:27:55 -0500
Subject: [PATCH 010/233] powerpc/fsl-booke64: Rename memblock -> lmb so mm/tlb_nohash.c builds

Extracted from vendor drop QorIQ-DPAA-SDK-V1-20110609-systembuilder.iso
0048-powerpc-fsl-booke64-Rename-memblock-lmb-so-mm-tlb_no.patch

Since we pulled in the following commit from upstream, we need to fit so
it builds on an older kernel.

commit 55fd766b5fad8240b7a6e994b5779a46d28f73d4
Author: Kumar Gala <galak@kernel.crashing.org>
Date:   Fri Oct 16 18:48:40 2009 -0500

powerpc/fsl-booke64: Use TLB CAMs to cover linear mapping on FSL 64-bit chips

Signed-off-by: Kumar Gala <kumar.gala@freescale.com>
---
 arch/powerpc/mm/tlb_nohash.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/mm/tlb_nohash.c b/arch/powerpc/mm/tlb_nohash.c
index 93cda9e..c416793 100644
--- a/arch/powerpc/mm/tlb_nohash.c
+++ b/arch/powerpc/mm/tlb_nohash.c
@@ -437,8 +437,8 @@ static void __early_init_mmu(int boot_cpu)
 		linear_map_top = map_mem_in_cams(linear_map_top, num_cams);
 
 		/* limit memory so we dont have linear faults */
-		memblock_enforce_memory_limit(linear_map_top);
-		memblock_analyze();
+		lmb_enforce_memory_limit(linear_map_top);
+		lmb_analyze();
 	}
 #endif
 
-- 
1.7.0.4

