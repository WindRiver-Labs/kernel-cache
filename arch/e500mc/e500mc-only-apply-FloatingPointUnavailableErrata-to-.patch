From 66610032baad63deb5f6c925474dec4e7f706378 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Tue, 21 Dec 2010 00:16:03 -0500
Subject: [PATCH] e500mc: only apply FloatingPointUnavailableErrata to config_ppc_fpu

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/powerpc/kernel/head_fsl_booke.S |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/kernel/head_fsl_booke.S b/arch/powerpc/kernel/head_fsl_booke.S
index 3342d53..dc14a2f 100644
--- a/arch/powerpc/kernel/head_fsl_booke.S
+++ b/arch/powerpc/kernel/head_fsl_booke.S
@@ -321,7 +321,11 @@ skpinv:	addi	r6,r6,1				/* Increment */
 	SET_IVOR(4,  ExternalInput);
 	SET_IVOR(5,  Alignment);
 	SET_IVOR(6,  Program);
+#ifdef CONFIG_PPC_FPU
 	SET_IVOR(7,  FloatingPointUnavailableErrata);
+#else
+	SET_IVOR(7,  FloatingPointUnavailable);
+#endif
 	SET_IVOR(8,  SystemCall);
 	SET_IVOR(9,  AuxillaryProcessorUnavailable);
 	SET_IVOR(10, Decrementer);
-- 
1.6.5.2

