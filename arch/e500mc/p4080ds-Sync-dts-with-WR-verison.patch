From 992bea9cc1299ec21a3c83f240326fb8dfc85f31 Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 4 Jul 2011 12:59:11 +0800
Subject: [PATCH 184/233] p4080ds: Sync dts with WR verison

1. add nor flash partition
2. correct i2c eeprom model

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 arch/powerpc/boot/dts/p4080ds-usdpaa.dts |   52 ++++++++++++++++++++++++++++-
 arch/powerpc/boot/dts/p4080ds.dts        |   52 ++++++++++++++++++++++++++++-
 2 files changed, 100 insertions(+), 4 deletions(-)

diff --git a/arch/powerpc/boot/dts/p4080ds-usdpaa.dts b/arch/powerpc/boot/dts/p4080ds-usdpaa.dts
index 83a2a65..8c52c95 100644
--- a/arch/powerpc/boot/dts/p4080ds-usdpaa.dts
+++ b/arch/powerpc/boot/dts/p4080ds-usdpaa.dts
@@ -827,11 +827,11 @@
 			interrupts = <38 2 0 0>;
 			dfsrr;
 			eeprom@51 {
-				compatible = "at24,24c256";
+				compatible = "at24,24c02";
 				reg = <0x51>;
 			};
 			eeprom@52 {
-				compatible = "at24,24c256";
+				compatible = "at24,24c02";
 				reg = <0x52>;
 			};
 			rtc@68 {
@@ -1680,6 +1680,54 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+			
+			partition@0 {
+				label = "rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "kernel";
+				reg = <0x20000 0x300000>;
+			};
+			partition@320000 {
+				label = "dtb";
+				reg = <0x320000 0x20000>;
+			};
+			partition@340000 {
+				label = "fs1";
+				reg = <0x340000 0x3c40000>;
+			};
+			partition@3f80000 {
+				label = "alt-u-boot";
+				reg = <0x3f80000 0x80000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "alt-rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "fs2";
+				reg = <0x4020000  0x2fe0000>;
+			};
+			partition@7000000 {
+				label = "fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "fs3";
+				reg = <0x7020000  0xf60000>;
+			};
+			partition@7f80000 {
+				label = "u-boot";
+				reg = <0x7f80000 0x80000>;
+				read-only;
+			};
 		};
 	};
 
diff --git a/arch/powerpc/boot/dts/p4080ds.dts b/arch/powerpc/boot/dts/p4080ds.dts
index 573c25d..c3860c3 100644
--- a/arch/powerpc/boot/dts/p4080ds.dts
+++ b/arch/powerpc/boot/dts/p4080ds.dts
@@ -798,11 +798,11 @@
 			interrupts = <38 2 0 0>;
 			dfsrr;
 			eeprom@51 {
-				compatible = "at24,24c256";
+				compatible = "at24,24c02";
 				reg = <0x51>;
 			};
 			eeprom@52 {
-				compatible = "at24,24c256";
+				compatible = "at24,24c02";
 				reg = <0x52>;
 			};
 			rtc@68 {
@@ -1651,6 +1651,54 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+			
+			partition@0 {
+				label = "rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "kernel";
+				reg = <0x20000 0x300000>;
+			};
+			partition@320000 {
+				label = "dtb";
+				reg = <0x320000 0x20000>;
+			};
+			partition@340000 {
+				label = "fs1";
+				reg = <0x340000 0x3c40000>;
+			};
+			partition@3f80000 {
+				label = "alt-u-boot";
+				reg = <0x3f80000 0x80000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "alt-rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "fs2";
+				reg = <0x4020000  0x2fe0000>;
+			};
+			partition@7000000 {
+				label = "fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "fs3";
+				reg = <0x7020000  0xf60000>;
+			};
+			partition@7f80000 {
+				label = "u-boot";
+				reg = <0x7f80000 0x80000>;
+				read-only;
+			};
 		};
 	};
 
-- 
1.7.0.4

