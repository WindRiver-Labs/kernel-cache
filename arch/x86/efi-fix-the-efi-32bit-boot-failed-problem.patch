From 61a0787418398e3e650f9b14bf664740e948022a Mon Sep 17 00:00:00 2001
From: fli <fupan.li@windriver.com>
Date: Tue, 14 Jul 2015 19:55:26 +0800
Subject: [PATCH] efi: fix the efi 32bit boot failed problem

It should use the label's address instead of the value stored in
the label's address to caculate the code32_start address.

Signed-off-by: fli <fupan.li@windriver.com>
---
 arch/x86/boot/compressed/head_32.S |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/x86/boot/compressed/head_32.S b/arch/x86/boot/compressed/head_32.S
index abb988a..3b28eff 100644
--- a/arch/x86/boot/compressed/head_32.S
+++ b/arch/x86/boot/compressed/head_32.S
@@ -54,7 +54,7 @@ ENTRY(efi_pe_entry)
 	call	reloc
 reloc:
 	popl	%ecx
-	subl	reloc, %ecx
+	subl	$reloc, %ecx
 	movl	%ecx, BP_code32_start(%eax)
 
 	sub	$0x4, %esp
-- 
1.7.5.4

