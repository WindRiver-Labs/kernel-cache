From bdf999b6225b73c8dd7be3d651492427368db38c Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Wed, 12 Sep 2012 09:08:42 +0800
Subject: [PATCH 11/62] fsl_imx6: Add GPIO device init

refer to imx6q device tree to implement platform device register
for GPIO feature(arch/arm/boot/dts/imx6q.dtsi).

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-mx6/mach-mx6q_sabrelite.c |    8 ++++++++
 arch/arm/plat-mxc/include/mach/mx6q.h   |   28 ++++++++++++++--------------
 2 files changed, 22 insertions(+), 14 deletions(-)

diff --git a/arch/arm/mach-mx6/mach-mx6q_sabrelite.c b/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
index bb99f7d..1123254 100644
--- a/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
+++ b/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
@@ -311,6 +311,14 @@ static void __init fixup_mxc_board(struct tag *tags, char **cmdline,
 
 static void __init mx6_soc_init(void)
 {
+	mxc_register_gpio("imx31-gpio", 0, GPIO1_BASE_ADDR, SZ_16K, MXC_INT_GPIO1_LOW, MXC_INT_GPIO1_HIGH);
+	mxc_register_gpio("imx31-gpio", 1, GPIO2_BASE_ADDR, SZ_16K, MXC_INT_GPIO2_LOW, MXC_INT_GPIO2_HIGH);
+	mxc_register_gpio("imx31-gpio", 2, GPIO3_BASE_ADDR, SZ_16K, MXC_INT_GPIO3_LOW, MXC_INT_GPIO3_HIGH);
+	mxc_register_gpio("imx31-gpio", 3, GPIO4_BASE_ADDR, SZ_16K, MXC_INT_GPIO4_LOW, MXC_INT_GPIO4_HIGH);
+	mxc_register_gpio("imx31-gpio", 4, GPIO5_BASE_ADDR, SZ_16K, MXC_INT_GPIO5_LOW, MXC_INT_GPIO5_HIGH);
+	mxc_register_gpio("imx31-gpio", 5, GPIO6_BASE_ADDR, SZ_16K, MXC_INT_GPIO6_LOW, MXC_INT_GPIO6_HIGH);
+	mxc_register_gpio("imx31-gpio", 6, GPIO7_BASE_ADDR, SZ_16K, MXC_INT_GPIO7_LOW, MXC_INT_GPIO7_HIGH);
+
 	/* i.mx6q has the i.mx35 type sdma */
 	imx_add_imx_sdma("imx35-sdma", MX6Q_SDMA_BASE_ADDR, MX6Q_INT_SDMA, &imx6q_sdma_pdata);
 }
diff --git a/arch/arm/plat-mxc/include/mach/mx6q.h b/arch/arm/plat-mxc/include/mach/mx6q.h
index ff2702e..b286704 100644
--- a/arch/arm/plat-mxc/include/mach/mx6q.h
+++ b/arch/arm/plat-mxc/include/mach/mx6q.h
@@ -374,20 +374,20 @@
 #define MXC_INT_GPIO1_INT2_NUM		95
 #define MXC_INT_GPIO1_INT1_NUM		96
 #define MXC_INT_GPIO1_INT0_NUM		97
-#define MXC_INT_GPIO1_INT15_0_NUM	98
-#define MXC_INT_GPIO1_INT31_16_NUM	99
-#define MXC_INT_GPIO2_INT15_0_NUM	100
-#define MXC_INT_GPIO2_INT31_16_NUM	101
-#define MXC_INT_GPIO3_INT15_0_NUM	102
-#define MXC_INT_GPIO3_INT31_16_NUM	103
-#define MXC_INT_GPIO4_INT15_0_NUM	104
-#define MXC_INT_GPIO4_INT31_16_NUM	105
-#define MXC_INT_GPIO5_INT15_0_NUM	106
-#define MXC_INT_GPIO5_INT31_16_NUM	107
-#define MXC_INT_GPIO6_INT15_0_NUM	108
-#define MXC_INT_GPIO6_INT31_16_NUM	109
-#define MXC_INT_GPIO7_INT15_0_NUM	110
-#define MXC_INT_GPIO7_INT31_16_NUM	111
+#define MXC_INT_GPIO1_LOW		98
+#define MXC_INT_GPIO1_HIGH		99
+#define MXC_INT_GPIO2_LOW		100
+#define MXC_INT_GPIO2_HIGH		101
+#define MXC_INT_GPIO3_LOW		102
+#define MXC_INT_GPIO3_HIGH		103
+#define MXC_INT_GPIO4_LOW		104
+#define MXC_INT_GPIO4_HIGH		105
+#define MXC_INT_GPIO5_LOW		106
+#define MXC_INT_GPIO5_HIGH		107
+#define MXC_INT_GPIO6_LOW		108
+#define MXC_INT_GPIO6_HIGH		109
+#define MXC_INT_GPIO7_LOW		110
+#define MXC_INT_GPIO7_HIGH		111
 #define MXC_INT_WDOG1			112
 #define MXC_INT_WDOG2			113
 #define MXC_INT_KPP			114
-- 
1.7.9.7

