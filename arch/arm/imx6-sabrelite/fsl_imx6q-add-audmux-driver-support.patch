From 2172c4ffd308c2eafe7de6f72f1afc2813cec888 Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Fri, 14 Sep 2012 17:25:36 +0800
Subject: [PATCH 51/62] fsl_imx6q: add audmux driver support

Source: Extract from vendor-drop package, L3.0.15_12.04.01_ER_source.tar.gz

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/arm/mach-mx6/mach-mx6q_sabrelite.c |    8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/arch/arm/mach-mx6/mach-mx6q_sabrelite.c b/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
index 242ca4b..3e9d865 100644
--- a/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
+++ b/arch/arm/mach-mx6/mach-mx6q_sabrelite.c
@@ -765,6 +765,10 @@ static struct i2c_board_info mxc_i2c0_board_info[] __initdata = {
 	},
 };
 
+static const struct resource imx6q_audmux_res[] __initconst = {
+	DEFINE_RES_MEM(MX6Q_AUDMUX_BASE_ADDR, SZ_16K),
+};
+
 static int imx6q_init_audio(void)
 {
 	mxc_register_device(&mx6_sabrelite_audio_device,
@@ -927,6 +931,10 @@ static void __init mx6_soc_init(void)
 
 	/* i.mx6q has the i.mx35 type sdma */
 	imx_add_imx_sdma("imx35-sdma", MX6Q_SDMA_BASE_ADDR, MX6Q_INT_SDMA, &imx6q_sdma_pdata);
+
+	/* i.mx6q has the i.mx31 type audmux */
+	platform_device_register_simple("imx31-audmux", 0, imx6q_audmux_res,
+					ARRAY_SIZE(imx6q_audmux_res));
 }
 
 static void imx6q_sabrelite_usbotg_vbus(bool on)
-- 
1.7.9.7

