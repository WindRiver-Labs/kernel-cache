From 9a251335f511a43d8062523dbff76c09d6aa97ce Mon Sep 17 00:00:00 2001
From: Vaibhav Hiremath <hvaibhav@ti.com>
Date: Mon, 22 Feb 2010 21:00:40 +0530
Subject: [PATCH 098/108] OMAP: DSS: Added cpu_is_3630 check for DSI FREQSEL configuration

commit f3e5e0baef23ffe37d6ddf4a383fc0ce550688b5 from
the branch origin/OMAPPSP_03.00.01.06 of
git://arago-project.org/git/projects/linux-omap3.git

FREQSEL bit fields is marked as reserved under OMAP36x/AM37x, so encapsulated
it under !cpu_is_3630()

Signed-off-by: Vaibhav Hiremath <hvaibhav@ti.com>
Integrated-by: Stanley.Miao <stanley.miao@windriver.com>
---
 drivers/video/omap2/dss/dsi.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/video/omap2/dss/dsi.c b/drivers/video/omap2/dss/dsi.c
index 3af207b..2638769 100644
--- a/drivers/video/omap2/dss/dsi.c
+++ b/drivers/video/omap2/dss/dsi.c
@@ -1029,7 +1029,8 @@ int dsi_pll_set_clock_div(struct dsi_clock_info *cinfo)
 		f = 0x7;
 
 	l = dsi_read_reg(DSI_PLL_CONFIGURATION2);
-	l = FLD_MOD(l, f, 4, 1);		/* DSI_PLL_FREQSEL */
+	if (!cpu_is_omap3630())
+		l = FLD_MOD(l, f, 4, 1);	/* DSI_PLL_FREQSEL */
 	l = FLD_MOD(l, cinfo->use_dss2_fck ? 0 : 1,
 			11, 11);		/* DSI_PLL_CLKSEL */
 	l = FLD_MOD(l, cinfo->highfreq,
-- 
1.7.0.4

