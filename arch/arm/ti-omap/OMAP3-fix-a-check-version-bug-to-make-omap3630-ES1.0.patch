From fc83918af58a1d8763716de9cb752c7e5ba8c238 Mon Sep 17 00:00:00 2001
From: Stanley.Miao <stanley.miao@windriver.com>
Date: Fri, 3 Jun 2011 14:58:53 +0800
Subject: [PATCH 107/108] OMAP3: fix a check version bug to make omap3630 ES1.0 work

Because cpu_is_omap34xx() returns true for all omap3 platforms, omap3630 ES1.0
will slip into this "if" option, which make omap3630 ES1.0 doesn't work.

Signed-off-by: Stanley.Miao <stanley.miao@windriver.com>
---
 arch/arm/mach-omap2/clock3xxx_data.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/clock3xxx_data.c b/arch/arm/mach-omap2/clock3xxx_data.c
index 734cfae..b0414dd 100644
--- a/arch/arm/mach-omap2/clock3xxx_data.c
+++ b/arch/arm/mach-omap2/clock3xxx_data.c
@@ -3528,7 +3528,7 @@ int __init omap3xxx_clk_init(void)
 		 * Update this if there are further clock changes between ES2
 		 * and production parts
 		 */
-		if (cpu_is_omap34xx() && omap_rev_is_1_0()) {
+		if (omap_rev() == OMAP3430_REV_ES1_0) {
 			/* No 3430ES1-only rates exist, so no RATE_IN_3430ES1 */
 			cpu_clkflg |= CK_3430ES1;
 		} else {
-- 
1.7.0.4

