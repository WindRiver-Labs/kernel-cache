From 4d6c87cada648f44b8654918a7063495bdb905db Mon Sep 17 00:00:00 2001
From: Liming Wang <liming.wang@windriver.com>
Date: Tue, 3 Jul 2012 10:51:10 +0800
Subject: [PATCH 14/28] SPEAr: get rid of NO_IRQ initializers

commit 8395e9dd ARM: amba: spear: get rid of NO_IRQ initializers

NO_IRQ has been dropped from kernel, so remove all NO_IRQ from code.

Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 arch/arm/mach-spear13xx/spear1310.c      |   12 ++++++------
 arch/arm/mach-spear13xx/spear1310_reva.c |   10 +++++-----
 arch/arm/mach-spear13xx/spear1340.c      |    2 +-
 arch/arm/mach-spear13xx/spear13xx.c      |    9 +++++----
 4 files changed, 17 insertions(+), 16 deletions(-)

diff --git a/arch/arm/mach-spear13xx/spear1310.c b/arch/arm/mach-spear13xx/spear1310.c
index da1c5483..7427bcc 100644
--- a/arch/arm/mach-spear13xx/spear1310.c
+++ b/arch/arm/mach-spear13xx/spear1310.c
@@ -800,7 +800,7 @@ struct amba_device spear1310_ssp1_device = {
 		.end = SPEAR1310_SSP1_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_SSP1, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_SSP1},
 };
 
 /* uart1 device registeration */
@@ -813,7 +813,7 @@ struct amba_device spear1310_uart1_device = {
 		.end = SPEAR1310_UART1_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_UART1, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_UART1},
 };
 
 /* uart2 device registeration */
@@ -826,7 +826,7 @@ struct amba_device spear1310_uart2_device = {
 		.end = SPEAR1310_UART2_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_UART2, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_UART2},
 };
 
 /* uart3 device registeration */
@@ -839,7 +839,7 @@ struct amba_device spear1310_uart3_device = {
 		.end = SPEAR1310_UART3_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_UART3, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_UART3},
 };
 
 /* uart4 device registeration */
@@ -852,7 +852,7 @@ struct amba_device spear1310_uart4_device = {
 		.end = SPEAR1310_UART4_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_UART4, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_UART4},
 };
 
 /* uart5 device registeration */
@@ -865,7 +865,7 @@ struct amba_device spear1310_uart5_device = {
 		.end = SPEAR1310_UART5_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_IRQ_UART5, NO_IRQ},
+	.irq = {SPEAR1310_IRQ_UART5},
 };
 
 /* CAN device registeration */
diff --git a/arch/arm/mach-spear13xx/spear1310_reva.c b/arch/arm/mach-spear13xx/spear1310_reva.c
index 42b4d60..8e80232 100644
--- a/arch/arm/mach-spear13xx/spear1310_reva.c
+++ b/arch/arm/mach-spear13xx/spear1310_reva.c
@@ -383,7 +383,7 @@ struct amba_device spear1310_reva_uart1_device = {
 		.end = SPEAR1310_REVA_UART1_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_REVA_IRQ_UART1, NO_IRQ},
+	.irq = {SPEAR1310_REVA_IRQ_UART1},
 };
 
 /* uart2 device registeration */
@@ -396,7 +396,7 @@ struct amba_device spear1310_reva_uart2_device = {
 		.end = SPEAR1310_REVA_UART2_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_REVA_IRQ_UART2, NO_IRQ},
+	.irq = {SPEAR1310_REVA_IRQ_UART2},
 };
 
 /* uart3 device registeration */
@@ -409,7 +409,7 @@ struct amba_device spear1310_reva_uart3_device = {
 		.end = SPEAR1310_REVA_UART3_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_REVA_IRQ_UART3, NO_IRQ},
+	.irq = {SPEAR1310_REVA_IRQ_UART3},
 };
 
 /* uart4 device registeration */
@@ -422,7 +422,7 @@ struct amba_device spear1310_reva_uart4_device = {
 		.end = SPEAR1310_REVA_UART4_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_REVA_IRQ_UART4, NO_IRQ},
+	.irq = {SPEAR1310_REVA_IRQ_UART4},
 };
 
 /* uart5 device registeration */
@@ -435,7 +435,7 @@ struct amba_device spear1310_reva_uart5_device = {
 		.end = SPEAR1310_REVA_UART5_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1310_REVA_IRQ_UART5, NO_IRQ},
+	.irq = {SPEAR1310_REVA_IRQ_UART5},
 };
 
 /* CAN device registeration */
diff --git a/arch/arm/mach-spear13xx/spear1340.c b/arch/arm/mach-spear13xx/spear1340.c
index a4a0898..01b902e 100644
--- a/arch/arm/mach-spear13xx/spear1340.c
+++ b/arch/arm/mach-spear13xx/spear1340.c
@@ -1408,7 +1408,7 @@ struct amba_device spear1340_uart1_device = {
 		.end = SPEAR1340_UART1_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR1340_IRQ_UART1, NO_IRQ},
+	.irq = {SPEAR1340_IRQ_UART1},
 };
 
 /* Add Platform Devices */
diff --git a/arch/arm/mach-spear13xx/spear13xx.c b/arch/arm/mach-spear13xx/spear13xx.c
index 75648c7..c2f6a5a 100644
--- a/arch/arm/mach-spear13xx/spear13xx.c
+++ b/arch/arm/mach-spear13xx/spear13xx.c
@@ -25,6 +25,7 @@
 #include <linux/netdevice.h>
 #include <linux/platform_data/spear_thermal.h>
 #include <linux/stmmac.h>
+#include <linux/irq.h>
 #include <asm/hardware/gic.h>
 #include <asm/irq.h>
 #include <asm/pmu.h>
@@ -137,7 +138,7 @@ struct amba_device spear13xx_gpio_device[] = {
 			.end = SPEAR13XX_GPIO0_BASE + SZ_4K - 1,
 			.flags = IORESOURCE_MEM,
 		},
-		.irq = {SPEAR13XX_IRQ_GPIO0, NO_IRQ},
+		.irq = {SPEAR13XX_IRQ_GPIO0},
 	}, {
 		.dev = {
 			.init_name = "gpio1",
@@ -148,7 +149,7 @@ struct amba_device spear13xx_gpio_device[] = {
 			.end = SPEAR13XX_GPIO1_BASE + SZ_4K - 1,
 			.flags = IORESOURCE_MEM,
 		},
-		.irq = {SPEAR13XX_IRQ_GPIO1, NO_IRQ},
+		.irq = {SPEAR13XX_IRQ_GPIO1},
 	}
 };
 
@@ -202,7 +203,7 @@ struct amba_device spear13xx_ssp_device = {
 		.end = SPEAR13XX_SSP_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR13XX_IRQ_SSP, NO_IRQ},
+	.irq = {SPEAR13XX_IRQ_SSP},
 };
 
 /* uart device registeration */
@@ -243,7 +244,7 @@ struct amba_device spear13xx_uart_device = {
 		.end = SPEAR13XX_UART_BASE + SZ_4K - 1,
 		.flags = IORESOURCE_MEM,
 	},
-	.irq = {SPEAR13XX_IRQ_UART, NO_IRQ},
+	.irq = {SPEAR13XX_IRQ_UART},
 };
 
 /* adc device registeration */
-- 
1.7.9.7

