From 2819b8c7138ca59bf0102b3e8c07b66abf08d5a3 Mon Sep 17 00:00:00 2001
From: caijun li <cli1@pek-wb-build32.wrs.com>
Date: Wed, 2 Nov 2011 10:47:31 +0800
Subject: [PATCH] ARM: Add __enable_mmu to the Stack Unwinding table

Whenever doing backtrace to start_kernel(, it will backtrace to
__enable_mmu(. Since __enable_mmu( is not added in the stack unwinding
table, the following warning messages will be printed:

unwind: Index not found c0008034
unwind: Unknown symbol address c0008034

Now add it to the stack unwinding table.

Signed-off-by: Stanley.Miao <stanley.miao@windriver.com>
---
 arch/arm/kernel/head.S |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/kernel/head.S b/arch/arm/kernel/head.S
index 82ea924..536568a 100644
--- a/arch/arm/kernel/head.S
+++ b/arch/arm/kernel/head.S
@@ -21,6 +21,7 @@
 #include <asm/memory.h>
 #include <asm/thread_info.h>
 #include <asm/system.h>
+#include <asm/unwind.h>
 
 #if (PHYS_OFFSET & 0x001fffff)
 #error "PHYS_OFFSET must be at an even 2MiB boundary!"
@@ -158,6 +159,8 @@ __secondary_data:
  * registers.
  */
 __enable_mmu:
+ UNWIND(.fnstart        )
+ UNWIND(.cantunwind     )
 #ifdef CONFIG_ALIGNMENT_TRAP
 	orr	r0, r0, #CR_A
 #else
@@ -179,6 +182,7 @@ __enable_mmu:
 	mcr	p15, 0, r5, c3, c0, 0		@ load domain access register
 	mcr	p15, 0, r4, c2, c0, 0		@ load page table pointer
 	b	__turn_mmu_on
+ UNWIND(.fnend          )
 ENDPROC(__enable_mmu)
 
 /*
-- 
1.7.0.4

