From c342167dfac13a6b07b92bd9a457fc097e12af49 Mon Sep 17 00:00:00 2001
From: Archit Taneja <archit@ti.com>
Date: Tue, 10 Dec 2013 14:13:31 +0530
Subject: [PATCH 0766/1115] omapdss: hdmi5 core: return bytes read in
 hdmi5_read_edid

hdmi5_read_edid returns 0 if edid read is successfull. The omapfb and drm
drivers expect the omapdss edid read function to return the number of bytes
read.

Fix the return value such that it returns the bytes read if edid read is
successful.

Signed-off-by: Archit Taneja <archit@ti.com>
(cherry picked from commit 1290138e9d6412d1d2ddc1ecb9202b54e65c0b1d)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/video/omap2/dss/hdmi5_core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/video/omap2/dss/hdmi5_core.c b/drivers/video/omap2/dss/hdmi5_core.c
index 6215c09..1ce5db5 100644
--- a/drivers/video/omap2/dss/hdmi5_core.c
+++ b/drivers/video/omap2/dss/hdmi5_core.c
@@ -219,7 +219,7 @@ int hdmi5_read_edid(struct hdmi_core_data *core, u8 *edid, int len)
 out:
 	hdmi_core_ddc_uninit(core);
 
-	return r;
+	return r ? r : len;
 }
 
 void hdmi5_core_dump(struct hdmi_core_data *core, struct seq_file *s)
-- 
1.7.5.4

