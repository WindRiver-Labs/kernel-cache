From ebcdd24f5cb9893218a471acb1f7fee2237b4d7c Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Wed, 11 Dec 2013 23:24:42 -0600
Subject: [PATCH 0721/1115] ARM: OMAP: remoteproc: adjust the CMA pool size
 for OMAP5 IPU

The CMA pool size for IPU on OMAP5 is reduced from the previous
168 MB to 56 MB. This reduction is done to account for the removal
of the OMAP camera stack, and to match to that of the size used
on DRA7xx IPU2 processor. The DSP CMA start address and size are
unchanged. This reduced size causes the CMA pools to end at
0x99000000 instead of the previous 0xA0000000.

NOTE:
1. This requires the BIOS-side images to use the reduced carveout
   entries in the resource table, so older images with different
   resource tables will not boot after this change.
2. This change also helps with the enablement of fdt_high relocation
   in ti-u-boot, which causes the DT blob to occupy memory in the last
   MB before 0xA0000000 (fdt_high value) and thereby resulting in the
   failure of one of the rproc CMA pools.

Signed-off-by: Suman Anna <s-anna@ti.com>
(cherry picked from commit 20b92180f6388dd17a76df4aa111754d23ef1e00)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/remoteproc.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/remoteproc.c b/arch/arm/mach-omap2/remoteproc.c
index 52c9920..497c776 100644
--- a/arch/arm/mach-omap2/remoteproc.c
+++ b/arch/arm/mach-omap2/remoteproc.c
@@ -80,7 +80,7 @@ static void dra7_ctrl_write_dsp2_boot_addr(u32 bootaddr);
 #define DRA7_RPROC_CMA_SIZE_DSP1	(0x4000000)
 
 #define OMAP4_RPROC_CMA_SIZE_IPU	(0x7000000)
-#define OMAP5_RPROC_CMA_SIZE_IPU	(0xA400000)
+#define OMAP5_RPROC_CMA_SIZE_IPU	(0x3800000)
 #define DRA7_RPROC_CMA_SIZE_IPU2	(0x3800000)
 #define DRA7_RPROC_CMA_SIZE_IPU1	(0x2000000)
 
-- 
1.7.5.4

