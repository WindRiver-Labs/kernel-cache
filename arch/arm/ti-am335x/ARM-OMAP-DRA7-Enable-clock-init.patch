From 725802651412579634c758e638efbfa944dd4162 Mon Sep 17 00:00:00 2001
From: Tero Kristo <t-kristo@ti.com>
Date: Thu, 29 Aug 2013 11:35:43 +0300
Subject: [PATCH 0330/1115] ARM: OMAP: DRA7: Enable clock init

Initializes clock data from device tree.

Signed-off-by: Tero Kristo <t-kristo@ti.com>
(cherry picked from commit 199dc89a71f282e59881b6128a82b8221bbd51e7)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/io.c |    1 +
 include/linux/clk/ti.h   |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/io.c b/arch/arm/mach-omap2/io.c
index fd4bb71..315a148 100644
--- a/arch/arm/mach-omap2/io.c
+++ b/arch/arm/mach-omap2/io.c
@@ -682,6 +682,7 @@ void __init dra7xx_init_early(void)
 	dra7xx_clockdomains_init();
 	dra7xx_hwmod_init();
 	omap_hwmod_init_postsetup();
+	omap_clk_init = dra7xx_clk_init;
 }
 #endif
 
diff --git a/include/linux/clk/ti.h b/include/linux/clk/ti.h
index 90cb61b..0fcd2e7 100644
--- a/include/linux/clk/ti.h
+++ b/include/linux/clk/ti.h
@@ -226,6 +226,7 @@ static inline void of_omap_clk_deny_autoidle_all(void) { }
 #endif
 
 int omap5xxx_clk_init(void);
+int dra7xx_clk_init(void);
 
 extern const struct clk_hw_omap_ops clkhwops_omap3_dpll;
 extern const struct clk_hw_omap_ops clkhwops_omap4_dpllmx;
-- 
1.7.5.4

