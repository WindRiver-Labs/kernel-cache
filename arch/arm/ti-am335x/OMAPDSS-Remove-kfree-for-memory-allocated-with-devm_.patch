From 23d579ce6f437eb243e7d7b50dc56f5b016f38fe Mon Sep 17 00:00:00 2001
From: Emil Goode <emilgoode@gmail.com>
Date: Wed, 5 Jun 2013 19:29:56 +0200
Subject: [PATCH 0453/1115] OMAPDSS: Remove kfree for memory allocated with
 devm_kzalloc

It's not necessary to free memory allocated with devm_kzalloc
in a remove function and using kfree leads to a double free.

Signed-off-by: Emil Goode <emilgoode@gmail.com>
Signed-off-by: Tomi Valkeinen <tomi.valkeinen@ti.com>
(cherry picked from commit b0e449ce658c0eacbf7bdc76efe15a65359f63ef)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/video/omap2/displays/panel-picodlp.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/drivers/video/omap2/displays/panel-picodlp.c b/drivers/video/omap2/displays/panel-picodlp.c
index 875b890..153e9be 100644
--- a/drivers/video/omap2/displays/panel-picodlp.c
+++ b/drivers/video/omap2/displays/panel-picodlp.c
@@ -469,8 +469,6 @@ static void picodlp_panel_remove(struct omap_dss_device *dssdev)
 	i2c_unregister_device(picod->picodlp_i2c_client);
 	dev_set_drvdata(dssdev->dev, NULL);
 	dev_dbg(dssdev->dev, "removing picodlp panel\n");
-
-	kfree(picod);
 }
 
 static int picodlp_panel_enable(struct omap_dss_device *dssdev)
-- 
1.7.5.4

