From af1dc296fd603cb70f9ad0ac32dd4fda1482f68f Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Tue, 10 Dec 2013 12:13:33 -0600
Subject: [PATCH 0709/1115] ARM: DRA7: hwmod data: remove main_clk for
 spinlock

There is no separate functional clock that needs to be enabled
for the hardware spinlock module in DRA7xx, like in other OMAP
SoCs. The L4CFG_L3_GICLK interface clock serves as both the
functional and interface clock to the module, and is defined
through the associated omap_hwmod_ocp_if definition, so remove
the main_clk field from the hwmod definition.

This is inline with the hwmod definition on OMAP4 and OMAP5,
and also fixes the warning trace:
"platform 4a0f6000.spinlock: FIXME: clock-name 'fck' DOES NOT exist in dt!"

Signed-off-by: Suman Anna <s-anna@ti.com>
(cherry picked from commit 4fb4f80a3f2b30f4cb1acb036cd525871d54cbd5)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/omap_hwmod_7xx_data.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
index bd6aef0..f01a150 100644
--- a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
@@ -2054,7 +2054,6 @@ static struct omap_hwmod dra7xx_spinlock_hwmod = {
 	.name		= "spinlock",
 	.class		= &dra7xx_spinlock_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_SPINLOCK_CLKCTRL_OFFSET,
-- 
1.7.5.4

