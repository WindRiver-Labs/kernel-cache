From 20026393cc9bc6668cb314f9867fb386ec23add8 Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Thu, 18 Jul 2013 19:31:57 -0500
Subject: [PATCH 0699/1115] ARM: OMAP: remoteproc: request timers for DRA7xx
 DSP1 processor

The GPTimer #5 is chosen as the BIOS tick source for the DRA7xx
DSP1 processor, so add this timer data to be able to successfully
boot and run a DSP1 image configured with this timer. The timers
are optional, but are mandatory to support device management features
such as power management and watchdog support. The timer value also
needs to be unique from the ones used by other processors so that
they can be run simultaneously.

Signed-off-by: Suman Anna <s-anna@ti.com>
(cherry picked from commit 7c812acc1b16bcaeb4bdc4fe73a83358676db9c8)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/remoteproc.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/remoteproc.c b/arch/arm/mach-omap2/remoteproc.c
index 02dffce..ce0d283 100644
--- a/arch/arm/mach-omap2/remoteproc.c
+++ b/arch/arm/mach-omap2/remoteproc.c
@@ -131,6 +131,8 @@ static struct omap_rproc_pdata dra7_rproc_data[] = {
 		.firmware	= "dra7-dsp1-fw.xe66",
 		.mbox_name	= "mbox-dsp1",
 		.oh_name	= "dsp1",
+		.timers		= dsp_timers,
+		.timers_cnt	= ARRAY_SIZE(dsp_timers),
 		.set_bootaddr	= dra7_ctrl_write_dsp1_boot_addr,
 	},
 	{
-- 
1.7.5.4

