From 89af9bbf444b286332ca3ae3f2eab046e9cad048 Mon Sep 17 00:00:00 2001
From: Balaji T K <balajitk@ti.com>
Date: Thu, 26 Sep 2013 14:11:32 +0530
Subject: [PATCH 1082/1115] mmc: omap_hsmmc: set debounce time for sd card
 detect gpio

set card detect debounce time to 50mS

Signed-off-by: Balaji T K <balajitk@ti.com>
(cherry picked from commit d4a4974b76953bcb87c79835432e91b1997c9d38)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/mmc/host/omap_hsmmc.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/host/omap_hsmmc.c b/drivers/mmc/host/omap_hsmmc.c
index a8169f5..5339595 100644
--- a/drivers/mmc/host/omap_hsmmc.c
+++ b/drivers/mmc/host/omap_hsmmc.c
@@ -407,6 +407,9 @@ static int omap_hsmmc_gpio_init(struct omap_mmc_platform_data *pdata)
 		ret = gpio_direction_input(pdata->slots[0].switch_pin);
 		if (ret)
 			goto err_free_sp;
+		ret = gpio_set_debounce(pdata->slots[0].switch_pin, 50000);
+		if (ret)
+			goto err_free_sp;
 	} else
 		pdata->slots[0].switch_pin = -EINVAL;
 
-- 
1.7.5.4

