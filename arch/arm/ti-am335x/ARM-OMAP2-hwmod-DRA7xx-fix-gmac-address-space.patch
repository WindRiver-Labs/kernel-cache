From 08443f98051858ff7a9901a4ca36c8888320d40a Mon Sep 17 00:00:00 2001
From: Mugunthan V N <mugunthanvnm@ti.com>
Date: Tue, 22 Oct 2013 13:40:39 +0530
Subject: [PATCH 0624/1115] ARM: OMAP2+: hwmod: DRA7xx: fix gmac address space

Register target address to be used for gmac is the second device
address space. By default, hwmod picks first address space (0th index)
for register target.

With removal of address space from hwmod and using DT instead, cpgmac
is getting wrong address space for register target.

Fix it by indicating the address space to be used for register target.

Reported-by: J Keerthy <j-keerthy@ti.com>
Signed-off-by: Mugunthan V N <mugunthanvnm@ti.com>
(cherry picked from commit 8ce282f31978bd877ce954194f1340f5890bd2a1)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/omap_hwmod_7xx_data.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
index 3bcd039..4bc9f2f 100644
--- a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
@@ -297,6 +297,7 @@ static struct omap_hwmod dra7xx_gmac_hwmod = {
 	.clkdm_name	= "gmac_clkdm",
 	.flags		= (HWMOD_SWSUP_SIDLE | HWMOD_SWSUP_MSTANDBY),
 	.main_clk	= "dpll_gmac_ck",
+	.mpu_rt_idx	= 1,
 	.prcm		= {
 		.omap4	= {
 			.clkctrl_offs	= DRA7XX_CM_GMAC_GMAC_CLKCTRL_OFFSET,
-- 
1.7.5.4

