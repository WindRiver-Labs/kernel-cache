From d9aa9bcdd5fbeba86b4b8c156e52f2567222dd09 Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Tue, 10 Dec 2013 11:36:46 -0600
Subject: [PATCH 0706/1115] ARM: DRA7: hwmod data: remove main_clk for
 mailboxes

There is no separate functional clock that needs to be enabled
for the mailbox module instances in DRA7xx, like in other OMAP
SoCs. The L4CFG_L3_GICLK interface clock serves as both the
functional and interface clock to the modules, and this clock
is defined through the associated omap_hwmod_ocp_if definitions,
so remove the main_clk field from the hwmod definitions.

This is inline with the hwmod definitions on OMAP4 and OMAP5,
and also fixes the warning traces with the DT clock series from
the platform base tree. The traces look like
"platform xxxxxxxx.mailbox: FIXME: clock-name 'fck' DOES NOT exist in dt!"

Signed-off-by: Suman Anna <s-anna@ti.com>
(cherry picked from commit e53e9c7a5e0967e1214e3f63d5a16d889f870acf)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 arch/arm/mach-omap2/omap_hwmod_7xx_data.c |   13 -------------
 1 files changed, 0 insertions(+), 13 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
index 8fd1f44..4871c3f 100644
--- a/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_7xx_data.c
@@ -1117,7 +1117,6 @@ static struct omap_hwmod dra7xx_mailbox1_hwmod = {
 	.name		= "mailbox1",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX1_CLKCTRL_OFFSET,
@@ -1131,7 +1130,6 @@ static struct omap_hwmod dra7xx_mailbox2_hwmod = {
 	.name		= "mailbox2",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX2_CLKCTRL_OFFSET,
@@ -1145,7 +1143,6 @@ static struct omap_hwmod dra7xx_mailbox3_hwmod = {
 	.name		= "mailbox3",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX3_CLKCTRL_OFFSET,
@@ -1159,7 +1156,6 @@ static struct omap_hwmod dra7xx_mailbox4_hwmod = {
 	.name		= "mailbox4",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX4_CLKCTRL_OFFSET,
@@ -1173,7 +1169,6 @@ static struct omap_hwmod dra7xx_mailbox5_hwmod = {
 	.name		= "mailbox5",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX5_CLKCTRL_OFFSET,
@@ -1187,7 +1182,6 @@ static struct omap_hwmod dra7xx_mailbox6_hwmod = {
 	.name		= "mailbox6",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX6_CLKCTRL_OFFSET,
@@ -1201,7 +1195,6 @@ static struct omap_hwmod dra7xx_mailbox7_hwmod = {
 	.name		= "mailbox7",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX7_CLKCTRL_OFFSET,
@@ -1215,7 +1208,6 @@ static struct omap_hwmod dra7xx_mailbox8_hwmod = {
 	.name		= "mailbox8",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX8_CLKCTRL_OFFSET,
@@ -1229,7 +1221,6 @@ static struct omap_hwmod dra7xx_mailbox9_hwmod = {
 	.name		= "mailbox9",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX9_CLKCTRL_OFFSET,
@@ -1243,7 +1234,6 @@ static struct omap_hwmod dra7xx_mailbox10_hwmod = {
 	.name		= "mailbox10",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX10_CLKCTRL_OFFSET,
@@ -1257,7 +1247,6 @@ static struct omap_hwmod dra7xx_mailbox11_hwmod = {
 	.name		= "mailbox11",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX11_CLKCTRL_OFFSET,
@@ -1271,7 +1260,6 @@ static struct omap_hwmod dra7xx_mailbox12_hwmod = {
 	.name		= "mailbox12",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX12_CLKCTRL_OFFSET,
@@ -1285,7 +1273,6 @@ static struct omap_hwmod dra7xx_mailbox13_hwmod = {
 	.name		= "mailbox13",
 	.class		= &dra7xx_mailbox_hwmod_class,
 	.clkdm_name	= "l4cfg_clkdm",
-	.main_clk	= "l3_iclk_div",
 	.prcm = {
 		.omap4 = {
 			.clkctrl_offs = DRA7XX_CM_L4CFG_MAILBOX13_CLKCTRL_OFFSET,
-- 
1.7.5.4

