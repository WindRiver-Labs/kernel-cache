From 429d7fdc216735844764d1a7c697e5ce409bb75f Mon Sep 17 00:00:00 2001
From: Guoqing Jiang <Guoqing.Jiang@windriver.com>
Date: Wed, 11 Sep 2013 14:17:44 +0800
Subject: [PATCH 46/57] ARM/keyston: delete struct sys_timer

Commit 6bb27d7349db51b50c40534710fe164ca0d58902 "ARM: delete
struct sys_timer" replace sys_timer with the machine descriptor
.timer, make it adapt to keystone too.

Signed-off-by: Guoqing Jiang <Guoqing.Jiang@windriver.com>
---
 arch/arm/mach-keystone/keystone.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/arch/arm/mach-keystone/keystone.c b/arch/arm/mach-keystone/keystone.c
index 42c4dd4..e688b50 100644
--- a/arch/arm/mach-keystone/keystone.c
+++ b/arch/arm/mach-keystone/keystone.c
@@ -261,10 +261,6 @@ static void __init keystone_timer_init(void)
 	panic("no timer!\n");
 }
 
-static struct sys_timer keystone_timer = {
-	.init = keystone_timer_init,
-};
-
 static bool is_coherent(struct device *dev)
 {
 	struct device_node *node = of_node_get(dev->of_node);
@@ -442,7 +438,7 @@ void keystone_restart(char mode, const char *cmd)
 #define KEYSTONE_MACHINE_DEFS				\
 	.map_io		= keystone_map_io,		\
 	.init_irq	= keystone_init_irq,		\
-	.timer		= &keystone_timer,		\
+	.init_time	= &keystone_timer_init,		\
 	.init_machine	= keystone_init,		\
 	.init_meminfo	= keystone_init_meminfo,	\
 	.restart	= keystone_restart,
-- 
1.8.4.93.g57e4c17

