From 232f6b8b8248363d41bc43450cdd7043cd0860fe Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 15 Oct 2010 16:40:07 +0800
Subject: [PATCH] MPc85xx: cpufreq: REMOVE unused routine verify_pll()

The routine verify_pll() designed to verify core frequency after set_pll() by
reading PORPLLSR and print a message. Since the register can not reflect the
core frequency, the patch remove the routine.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/platforms/85xx/cpufreq.c |   16 ----------------
 1 files changed, 0 insertions(+), 16 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/cpufreq.c b/arch/powerpc/platforms/85xx/cpufreq.c
index 753a46b..9c5b4fd 100644
--- a/arch/powerpc/platforms/85xx/cpufreq.c
+++ b/arch/powerpc/platforms/85xx/cpufreq.c
@@ -102,20 +102,6 @@ static void set_pll(unsigned int pll, int cpu)
 	printk("PMJCR request %08x at CPU %d\n", tmp, cpu);
 }
 
-static void verify_pll(int cpu)
-{
-	int shift;
-	u32 busfreq, pll, corefreq;
-
-	shift = (cpu == 1) ? 24 : 16;
-	busfreq = fsl_get_sys_freq();
-	pll = (in_be32(porpllsr) >> shift) & 0x3f;
-
-	corefreq = (busfreq * pll) >> 1;
-	corefreq /= 1000000;
-	printk("PORPLLSR core freq %dMHz at CPU %d\n", corefreq, cpu);
-}
-
 /*
  * cpufreq functions
  */
@@ -197,8 +183,6 @@ static int mpc85xx_cpufreq_target(struct cpufreq_policy *policy,
 
 	ppc_proc_freq = freqs.new * 1000ul;
 
-	verify_pll(policy->cpu);
-
 	return 0;
 }
 
-- 
1.6.5.2

