From 11d6ed4c8a8978abeef60196986add44cf316ba3 Mon Sep 17 00:00:00 2001
From: Ralf Baechle <ralf@linux-mips.org>
Date: Wed, 1 Apr 2009 16:11:53 +0200
Subject: [PATCH 040/117] MIPS: Print the actual detected I-cache associativity on bootup.

commit 11d6ed4c8a8978abeef60196986add44cf316ba3 from linux-mips

Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
(cherry picked from commit 63246e05df6f9a8373ea7031c1809fa7ac4fb1b6)
---
 arch/mips/mm/c-r4k.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/mm/c-r4k.c b/arch/mips/mm/c-r4k.c
index 871e828..2fea627 100644
--- a/arch/mips/mm/c-r4k.c
+++ b/arch/mips/mm/c-r4k.c
@@ -1047,7 +1047,7 @@ static void __cpuinit probe_pcache(void)
 
 	printk("Primary instruction cache %ldkB, %s, %s, linesize %d bytes.\n",
 	       icache_size >> 10,
-	       cpu_has_vtag_icache ? "VIVT" : "VIPT",
+	       c->icache.flags & MIPS_CACHE_VTAG ? "VIVT" : "VIPT",
 	       way_string[c->icache.ways], c->icache.linesz);
 
 	printk("Primary data cache %ldkB, %s, %s, %s, linesize %d bytes\n",
-- 
1.7.0

