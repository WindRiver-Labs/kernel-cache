From 843c07ee4efa348954d858d9bae89a6c8899ac14 Mon Sep 17 00:00:00 2001
From: Phil Sutter <n0-1@freewrt.org>
Date: Mon, 19 Jan 2009 23:42:51 +0100
Subject: [PATCH 027/117] MIPS: RB532: Fix set_latch_u5()

commit 843c07ee4efa348954d858d9bae89a6c8899ac14 from linux-mips

The data to be written is just a byte, so use writeb instead of writel.
Also, dev3.base contains the address, not the data so referencing here
is wrong.

Signed-off-by: Phil Sutter <n0-1@freewrt.org>
Signed-off-by: Ralf Baechle <ralf@linux-mips.org>
(cherry picked from commit cfdc5fbbeb4f7fd7188f616d3917a4fcd78ec55f)
---
 arch/mips/rb532/gpio.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/rb532/gpio.c b/arch/mips/rb532/gpio.c
index 00a1c78..fa22fb9 100644
--- a/arch/mips/rb532/gpio.c
+++ b/arch/mips/rb532/gpio.c
@@ -96,7 +96,7 @@ void set_latch_u5(unsigned char or_mask, unsigned char nand_mask)
 	spin_lock_irqsave(&dev3.lock, flags);
 
 	dev3.state = (dev3.state | or_mask) & ~nand_mask;
-	writel(dev3.state, &dev3.base);
+	writeb(dev3.state, dev3.base);
 
 	spin_unlock_irqrestore(&dev3.lock, flags);
 }
-- 
1.7.0

