From 2adee72b684436aaee56626e7a2534155de0402e Mon Sep 17 00:00:00 2001
From: Chris Torek <chris.torek@windriver.com>
Date: Wed, 10 Dec 2008 12:02:09 -0700
Subject: [PATCH] sparc64: Fix bug in PTRACE_SETFPREGS64 handling.

>The SPARC64 kernel code for PTRACE_SETFPREGS64 appears to be an exact copy
>of that for PTRACE_GETFPREGS64.  This means that gdbserver and native
>64-bit GDB cannot set floating-point registers.

It looks like a simple typo.

[This is commit ee4ee527278a66321301d4f1f5ae22e49ab18fad from
 2.6.28-rc7.]

Signed-off-by: David S. Miller <davem@davemloft.net>
Signed-off-by: Chris Torek <chris.torek@windriver.com>
---
 arch/sparc64/kernel/ptrace.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/sparc64/kernel/ptrace.c b/arch/sparc64/kernel/ptrace.c
index 47e9895..c67b41d 100644
--- a/arch/sparc64/kernel/ptrace.c
+++ b/arch/sparc64/kernel/ptrace.c
@@ -1015,7 +1015,7 @@ long arch_ptrace(struct task_struct *child, long request, long addr, long data)
 		break;
 
 	case PTRACE_SETFPREGS64:
-		ret = copy_regset_to_user(child, view, REGSET_FP,
+		ret = copy_regset_from_user(child, view, REGSET_FP,
 					  0 * sizeof(u64),
 					  33 * sizeof(u64),
 					  fps);
-- 
1.6.0.2.GIT

