From f72ed6d4ffb9c21d07cb69b7329eeb9e50190a5c Mon Sep 17 00:00:00 2001
From: Yue Tao <yue.tao@windriver.com>
Date: Wed, 21 Nov 2012 01:11:48 -0800
Subject: [PATCH] Revert "kgdb,mutex: add a kgdb integrity check"

This reverts commit f1a9fdd8caedba46bec3a1aa16ffeffb88a4ef61.
---
 kernel/mutex.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/kernel/mutex.c b/kernel/mutex.c
index 425939b..4c0b7b3 100644
--- a/kernel/mutex.c
+++ b/kernel/mutex.c
@@ -23,7 +23,6 @@
 #include <linux/spinlock.h>
 #include <linux/interrupt.h>
 #include <linux/debug_locks.h>
-#include <linux/kgdb.h>
 
 /*
  * In the DEBUG case we are using the "NULL fastpath" for mutexes,
@@ -148,14 +147,6 @@ __mutex_lock_common(struct mutex *lock, long state, unsigned int subclass,
 	unsigned long flags;
 
 	preempt_disable();
-#ifdef CONFIG_KGDB
-	if (atomic_read(&kgdb_active) == raw_smp_processor_id()) {
-		int lvl = console_loglevel;
-		console_loglevel = 8;
-		WARN_ON(1);
-		console_loglevel = lvl;
-	}
-#endif
 	mutex_acquire(&lock->dep_map, subclass, 0, ip);
 
 #ifdef CONFIG_MUTEX_SPIN_ON_OWNER
-- 
1.7.0.2

