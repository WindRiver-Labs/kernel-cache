From 2c978df5d68769adecdf27397972f79a45a8afa0 Mon Sep 17 00:00:00 2001
From: Jason Wessel <jason.wessel@windriver.com>
Date: Mon, 26 Apr 2010 15:56:14 -0500
Subject: [PATCH] Correctly deal with make that has an argument which contains an "s"

Commit xxxx upstream (currently pending)

When using remake, which is based on gnumake, if you invoke
an example build as shown below, the build will become silent
due to the top level make file incorrectly guessing that
the end user wants a silent build because an argument that
contained an "s" was used.

remake --no-extended-errors

Fix up the top level Makefile to use filter with a list of
options that mean silent with the various revisions of gnumake,
instead of findstring.

Signed-off-by: Jason Wessel <jason.wessel@windriver.com>
CC: Michal Marek <mmarek@suse.cz>
CC: Andrew Morton <akpm@linux-foundation.org>
CC: linux-kbuild@vger.kernel.org
Integrated-by: Mark Asselstine <mark.asselstine@windriver.com>
---
 Makefile |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/Makefile b/Makefile
index 735e748..4ca1b1d 100644
--- a/Makefile
+++ b/Makefile
@@ -288,7 +288,7 @@ endif
 # If the user is running make -s (silent mode), suppress echoing of
 # commands
 
-ifneq ($(findstring s,$(MAKEFLAGS)),)
+ifneq ($(filter s% -s% --silent --quiet,$(MAKEFLAGS)),)
   quiet=silent_
 endif
 
-- 
1.6.0.4

