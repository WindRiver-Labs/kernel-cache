From 7a9e2b2a4cf21b8a57a6b2399f221ebcd4d07f98 Mon Sep 17 00:00:00 2001
From: Xiaotian Feng <Xiaotian.Feng@windriver.com>
Date: Fri, 22 May 2009 10:38:05 +0800
Subject: [PATCH] gianfar: fix ievent BABR handling error

Gianfar interrupt handler uses IEVENT_ERR_MASK to check and handle errors.
Babbling RX error (IEVENT_BABR) should be included in IEVENT_ERROR_MASK.

Signed-off-by: Xiaotian Feng <xiaotian.feng@windriver.com>
---
 drivers/net/gianfar.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/gianfar.h b/drivers/net/gianfar.h
index f46e9b6..4c95693 100644
--- a/drivers/net/gianfar.h
+++ b/drivers/net/gianfar.h
@@ -244,7 +244,7 @@ extern const char gfar_driver_version[];
 (IEVENT_RXC | IEVENT_BSY | IEVENT_EBERR | IEVENT_MSRO | \
  IEVENT_BABT | IEVENT_TXC | IEVENT_TXE | IEVENT_LC \
  | IEVENT_CRL | IEVENT_XFUN | IEVENT_DPE | IEVENT_PERR \
- | IEVENT_MAG)
+ | IEVENT_MAG | IEVENT_BABR)
 
 #define IMASK_INIT_CLEAR	0x00000000
 #define IMASK_BABR              0x80000000
-- 
1.6.3.3

