From 164d1af0e2167f89a7f7d9d7a62f33f5959dc45c Mon Sep 17 00:00:00 2001
From: Bhaskar Upadhaya <Bhaskar.Upadhaya@freescale.com>
Date: Fri, 4 Mar 2011 20:06:16 +0530
Subject: [PATCH 3/4] powerpc/p1010: Modifying the flexcan compatible field

Signed-off-by: Bhaskar Upadhaya <Bhaskar.Upadhaya@freescale.com>

[Kevin: Original patch taken from FSL NODPAA SDK 1.0
QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso. This is generated
by squashing the following patches in this SDK.
0065-powerpc-p1010-Modifying-the-flexcan-compatible-field.patch
0067-powerpc-p1010-Modified-the-dts-binding-for-Flexcan.patch
0079-powerpc-p1010-Modifying-the-flexcan-compatible-field.patch
0081-powerpc-p1010-Modified-the-dts-binding-for-Flexcan.patch]

Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 Documentation/powerpc/dts-bindings/fsl/can.txt |    4 ++--
 drivers/net/can/flexcan_iface.c                |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/Documentation/powerpc/dts-bindings/fsl/can.txt b/Documentation/powerpc/dts-bindings/fsl/can.txt
index 2192f53..6d7fff1 100644
--- a/Documentation/powerpc/dts-bindings/fsl/can.txt
+++ b/Documentation/powerpc/dts-bindings/fsl/can.txt
@@ -35,7 +35,7 @@ also specify which clock source and divider shall be used for the controller:
 
 Note that the MPC5121 Rev. 1 processor is not supported.
 
-fsl,flexcan2.0 nodes
+fsl,flexcan-v1.0 nodes
 -----------------------
 In addition to the required compatible-, reg- and interrupt-properties, you can
 also specify which clock source shall be used for the controller.
@@ -70,7 +70,7 @@ Examples:
 	};
 
 	can0@1c000 {
-		compatible = "fsl,flexcan2.0";
+		compatible = "fsl,flexcan-v1.0";
 		reg = <0x1c000 0x1000>;
 		interrupts = <48 0x2>;
 		interrupt-parent = <&mpic>;
diff --git a/drivers/net/can/flexcan_iface.c b/drivers/net/can/flexcan_iface.c
index c03f14e..25c84fb 100644
--- a/drivers/net/can/flexcan_iface.c
+++ b/drivers/net/can/flexcan_iface.c
@@ -140,7 +140,7 @@ static int flexcan_of_remove(struct of_device *ofdev)
 
 static struct of_device_id flexcan_match[] = {
 	{
-	 .compatible = "fsl,flexcan2.0",
+	 .compatible = "fsl,flexcan-v1.0",
 	 },
 	{},
 };
-- 
1.7.0.4

