From b9e494a4344f0afd2a0e53b3cd8215978e7f5e66 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Tue, 9 Aug 2011 19:23:03 +0800
Subject: [PATCH 21/47] gianfar: Fix programming of threshold registers

The threshold register should never be programmed.

Extracted from vendor drop QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso
linux-2.6.35-qoriq-gianfar-Fix-programming-of-threshold-re.patch.

Signed-off-by: Sandeep Gopalpet <sandeep.kumar@freescale.com>
Signed-off-by: Jiajun Wu <b06378@freescale.com>
Integrated-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 drivers/net/gianfar.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

diff --git a/drivers/net/gianfar.c b/drivers/net/gianfar.c
index a471bfc..a151f2d 100644
--- a/drivers/net/gianfar.c
+++ b/drivers/net/gianfar.c
@@ -535,9 +535,6 @@ static void gfar_init_mac(struct net_device *ndev)
 
 	gfar_write(&regs->attr, attrs);
 
-	gfar_write(&regs->fifo_tx_thr, priv->fifo_threshold);
-	gfar_write(&regs->fifo_tx_starve, priv->fifo_starve);
-	gfar_write(&regs->fifo_tx_starve_shutoff, priv->fifo_starve_off);
 }
 
 static struct net_device_stats *gfar_get_stats(struct net_device *dev)
-- 
1.7.0.2

