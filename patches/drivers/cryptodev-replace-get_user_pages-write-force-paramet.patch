From dc74ad88d73bfc1716051dff71216dffa81f180b Mon Sep 17 00:00:00 2001
From: Li Zhou <li.zhou@windriver.com>
Date: Mon, 14 Jan 2019 09:45:17 +0800
Subject: [PATCH] cryptodev: replace get_user_pages() write/force parameters
 with gup_flags

Replace get_user_pages() write/force parameters with gup_flags
in cryptodev codes, because the parameters of get_user_pages
function have been changed as below:
-		    int write, int force, struct page **pages,
+		    unsigned int gup_flags, struct page **pages,

Here do the modification referring to the earlier commit:
<mm: replace get_user_pages() write/force parameters with gup_flags>

Signed-off-by: Li Zhou <li.zhou@windriver.com>
---
 drivers/staging/crypto/cryptodev/zc.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/crypto/cryptodev/zc.c b/drivers/staging/crypto/cryptodev/zc.c
index 29b0501..f9ec6fd 100644
--- a/drivers/staging/crypto/cryptodev/zc.c
+++ b/drivers/staging/crypto/cryptodev/zc.c
@@ -60,7 +60,7 @@ int __get_userbuf(uint8_t __user *addr, uint32_t len, int write,
 
 	down_read(&mm->mmap_sem);
 	ret = get_user_pages(task, mm,
-			(unsigned long)addr, pgcount, write, 0, pg, NULL);
+			(unsigned long)addr, pgcount, write ? FOLL_WRITE : 0, pg, NULL);
 	up_read(&mm->mmap_sem);
 	if (ret != pgcount)
 		return -EINVAL;
-- 
1.7.9.5

