From 70b5d0907c0eb4dece9d3c193e7b9ccfc6c1e08d Mon Sep 17 00:00:00 2001
From: Jian Liu <jian.liu@windriver.com>
Date: Mon, 11 Aug 2014 10:03:12 +0800
Subject: [PATCH 2/2] mtd: define `mtd_is_*()' functions

commit 7387ce773256f446bdd0280b2449b635441f906e upstream

These functions can be used instead of referencing -EUCLEAN and -EBADMSG
all over the place. They should help make code a little bit more
readable.

Signed-off-by: Brian Norris <computersforpeace@gmail.com>
Signed-off-by: Artem Bityutskiy <artem.bityutskiy@intel.com>
Signed-off-by: Jian Liu <jian.liu@windriver.com>
---
 include/linux/mtd/mtd.h |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/include/linux/mtd/mtd.h b/include/linux/mtd/mtd.h
index 0f32a9b..399a8b6 100644
--- a/include/linux/mtd/mtd.h
+++ b/include/linux/mtd/mtd.h
@@ -321,6 +321,18 @@ static inline void mtd_erase_callback(struct erase_info *instr)
 }
 #endif
 
+static inline int mtd_is_bitflip(int err) {
+       return err == -EUCLEAN;
+}
+
+static inline int mtd_is_eccerr(int err) {
+       return err == -EBADMSG;
+}
+
+static inline int mtd_is_bitflip_or_eccerr(int err) {
+       return mtd_is_bitflip(err) || mtd_is_eccerr(err);
+}
+
 /*
  * Debugging macro and defines
  */
@@ -345,3 +357,5 @@ static inline void mtd_erase_callback(struct erase_info *instr)
 #endif /* CONFIG_MTD_DEBUG */
 
 #endif /* __MTD_MTD_H__ */
+
+
-- 
1.7.0

