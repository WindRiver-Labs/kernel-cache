From ee69bf396b95e18c90e52faad20ceb4aca99e12f Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Wed, 13 Jul 2011 17:26:15 +0800
Subject: [PATCH 45/47] SD/MMC: increase bounce buffer size to improve system throughput

The maximum block number in a process of read/write operation depends
on bounce buffer size.

Extracted from vendor drop QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso
linux-2.6.35-qoriq-SD-MMC-increase-bounce-buffer-size-to-i.patch.

Signed-off-by: Qiang Liu <b32616@freescale.com>
Integrated-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 drivers/mmc/card/queue.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/card/queue.c b/drivers/mmc/card/queue.c
index d6ded24..7d39fe5 100644
--- a/drivers/mmc/card/queue.c
+++ b/drivers/mmc/card/queue.c
@@ -20,7 +20,11 @@
 #include <linux/mmc/host.h>
 #include "queue.h"
 
+#ifdef CONFIG_OPTIMIZE_SD_PERFORMANCE
+#define MMC_QUEUE_BOUNCESZ	262144
+#else
 #define MMC_QUEUE_BOUNCESZ	65536
+#endif
 
 #define MMC_QUEUE_SUSPENDED	(1 << 0)
 
-- 
1.7.0.4

