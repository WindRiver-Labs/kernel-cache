From e6a7f4be7afeb40a500fd58ab6418e9ff60e8984 Mon Sep 17 00:00:00 2001
From: Michel Thebeau <michel.thebeau@windriver.com>
Date: Fri, 15 Feb 2013 09:12:05 -0500
Subject: [PATCH] mtd/fsl-nand: add return to fsl_elbc_write_page() to fix a
 compile warning

Fix the following compiling warning introduced by fsl elbc nand driver:
drivers/mtd/nand/fsl_elbc_nand.c:806:23: warning: assignment from
incompatible pointer type [enabled by default]

The upstream ltsi commit "MTD: nand: add return value for
write_page()/write_page_raw()  functions in structure of
nand_ecc_ctrl.", fdbad98dff8007f2b8bee6698b5d25ebba0471c9, adds a return
value to the function pointer: int (*write_page)(.. etc)

A return value does not seem to benefit fsl_elbc_write_page().  It calls
fsl_elbc_write_buf() which also does not return a value, but has range
checking which it reports through dev_err().

So return 0 always, as the upstream commit does.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
Signed-off-by: Michel Thebeau <michel.thebeau@windriver.com>
---
 drivers/mtd/nand/fsl_elbc_nand.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/mtd/nand/fsl_elbc_nand.c b/drivers/mtd/nand/fsl_elbc_nand.c
index 80b5264..40bd5fb 100644
--- a/drivers/mtd/nand/fsl_elbc_nand.c
+++ b/drivers/mtd/nand/fsl_elbc_nand.c
@@ -755,12 +755,14 @@ static int fsl_elbc_read_page(struct mtd_info *mtd,
 /* ECC will be calculated automatically, and errors will be detected in
  * waitfunc.
  */
-static void fsl_elbc_write_page(struct mtd_info *mtd,
+static int fsl_elbc_write_page(struct mtd_info *mtd,
                                 struct nand_chip *chip,
                                 const uint8_t *buf)
 {
 	fsl_elbc_write_buf(mtd, buf, mtd->writesize);
 	fsl_elbc_write_buf(mtd, chip->oob_poi, mtd->oobsize);
+
+	return 0;
 }
 
 static int fsl_elbc_chip_init(struct fsl_elbc_mtd *priv)
-- 
1.7.9.7

