From 8afe5c99df8387a6dc28bf85ab26340aada45999 Mon Sep 17 00:00:00 2001
From: Guoqing Jiang <Guoqing.Jiang@windriver.com>
Date: Thu, 23 Jun 2011 17:22:19 +0800
Subject: [PATCH 11/20] TI816x i2c: Cleaned up resource builder entries

This patch is based on below commit from arago git tree.
git://arago-project.org/git/projects/linux-omap3.git
811a8b ti816x: i2c: Cleaned up resource builder entries

This patch fixes compiler error as i2c_pdata should have been used instead of
i2c_rate in I2C builder. Also I2C BUILDER structure entries are not needed to be
added currently for ti816x since ti816x specific settings are overridden for
bus=1.

TODO: Still need update for ti816x 2nd I2C.

Signed-off-by: Hemant Pedanekar <hemantp@ti.com>
[This one is picked from the original commit to compatible
with wrlinux tree]
Integrated-by: Guoqing Jiang <Guoqing.Jiang@windriver.com>
---
 arch/arm/plat-omap/i2c.c |    9 ++-------
 1 files changed, 2 insertions(+), 7 deletions(-)

diff --git a/arch/arm/plat-omap/i2c.c b/arch/arm/plat-omap/i2c.c
index e84befb..ad6556e 100644
--- a/arch/arm/plat-omap/i2c.c
+++ b/arch/arm/plat-omap/i2c.c
@@ -58,9 +58,6 @@ static struct resource i2c_resources[][2] = {
 #if	defined(CONFIG_ARCH_OMAP3)
 	{ I2C_RESOURCE_BUILDER(OMAP2_I2C_BASE3, INT_34XX_I2C3_IRQ) },
 #endif
-#if	define(CONFIG_ARCH_TI816X)
-	{ I2C_RESOURCE_BUILDER(TI816x_I2C_BASE0, INT_TI816x_I2C0_IRQ) },
-#endif
 };
 
 #define I2C_DEV_BUILDER(bus_id, res, data)		\
@@ -77,15 +74,13 @@ static struct resource i2c_resources[][2] = {
 static u32 i2c_rate[ARRAY_SIZE(i2c_resources)];
 static struct platform_device omap_i2c_devices[] = {
 	I2C_DEV_BUILDER(1, i2c_resources[0], &i2c_rate[0]),
-#if	defined(CONFIG_ARCH_OMAP2) || defined(CONFIG_ARCH_OMAP3)
+#if	defined(CONFIG_ARCH_OMAP2) || defined(CONFIG_ARCH_OMAP3) || \
+						defined(CONFIG_ARCH_TI816X)
 	I2C_DEV_BUILDER(2, i2c_resources[1], &i2c_rate[1]),
 #endif
 #if	defined(CONFIG_ARCH_OMAP3)
 	I2C_DEV_BUILDER(3, i2c_resources[2], &i2c_rate[2]),
 #endif
-#if	defined(CONFIG_ARCH_TI816X)
-	I2C_DEV_BUILDER(1, i2c_resources[3], &i2c_rate[3]),
-#endif
 };
 
 #define OMAP_I2C_CMDLINE_SETUP	(BIT(31))
-- 
1.7.0.2

