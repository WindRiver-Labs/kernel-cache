From 2033acc0116142d5345bbf29aab32231c099e555 Mon Sep 17 00:00:00 2001
From: Zhang Xiao <xiao.zhang@windriver.com>
Date: Fri, 4 Dec 2009 12:50:44 +0800
Subject: [PATCH] Fix a bug for FEC multicust address setting

Based on the datasheet, the firmware use GADDR1~2 instead of IADDR1~2 as the
hash table to judge the multicast address.

Signed-off-by: Zhang Xiao <xiao.zhang@windriver.com>
---
 drivers/net/fs_enet/mac-fec.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/fs_enet/mac-fec.c b/drivers/net/fs_enet/mac-fec.c
index 0a7d1c5..ad0d19a 100644
--- a/drivers/net/fs_enet/mac-fec.c
+++ b/drivers/net/fs_enet/mac-fec.c
@@ -226,8 +226,8 @@ static void set_multicast_finish(struct net_device *dev)
 	}
 
 	FC(fecp, r_cntrl, FEC_RCNTRL_PROM);
-	FW(fecp, hash_table_high, fep->fec.hthi);
-	FW(fecp, hash_table_low, fep->fec.htlo);
+	FW(fecp, grp_hash_table_high, fep->fec.hthi);
+	FW(fecp, grp_hash_table_low, fep->fec.htlo);
 }
 
 static void set_multicast_list(struct net_device *dev)
-- 
1.6.5.2

