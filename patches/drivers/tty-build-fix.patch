From 49edcf0ffb9b97319847e25179b2ea1a2a429406 Mon Sep 17 00:00:00 2001
From: Yong Zhang <yong.zhang@windriver.com>
Date: Thu, 15 Sep 2011 14:31:45 +0800
Subject: [PATCH 9/9] tty: build fix

drivers/char/tty_ldisc.c: In function 'tty_ldisc_flush':
drivers/char/tty_ldisc.c:409: error: implicit declaration of function 'tty_buffer_flush'
remake[7]: *** [drivers/char/tty_ldisc.o] Error 1

Signed-off-by: Yong Zhang <yong.zhang@windriver.com>
---
 drivers/char/tty_io.c |    2 +-
 include/linux/tty.h   |    2 ++
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/char/tty_io.c b/drivers/char/tty_io.c
index 62c7cdb..6a24a26 100644
--- a/drivers/char/tty_io.c
+++ b/drivers/char/tty_io.c
@@ -406,7 +406,7 @@ static void __tty_buffer_flush(struct tty_struct *tty)
  *	Locking: none
  */
 
-static void tty_buffer_flush(struct tty_struct *tty)
+void tty_buffer_flush(struct tty_struct *tty)
 {
 	unsigned long flags;
 	spin_lock_irqsave(&tty->buf.lock, flags);
diff --git a/include/linux/tty.h b/include/linux/tty.h
index 8fb63db..2a22500 100644
--- a/include/linux/tty.h
+++ b/include/linux/tty.h
@@ -392,6 +392,8 @@ extern void tty_port_init(struct tty_port *port);
 extern int tty_port_alloc_xmit_buf(struct tty_port *port);
 extern void tty_port_free_xmit_buf(struct tty_port *port);
 
+extern void tty_buffer_flush(struct tty_struct *tty);
+
 extern int tty_register_ldisc(int disc, struct tty_ldisc_ops *new_ldisc);
 extern int tty_unregister_ldisc(int disc);
 extern int tty_set_ldisc(struct tty_struct *tty, int ldisc);
-- 
1.7.0.4

