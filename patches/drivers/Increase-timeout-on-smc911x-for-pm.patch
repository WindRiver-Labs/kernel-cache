From ed3875a2105bf238f6f099d38ff85f3c5f0a982a Mon Sep 17 00:00:00 2001
From: Eugeny S. Mints <eugeny.mints@embeddedalley.com>
Date: Sat, 7 Mar 2009 18:10:57 -0500
Subject: [PATCH 07/11] Increase timeout on smc911x for pm.

Increased timeout on smc911x allows the ethernet driver to cleanly come
back out of pm suspend.  This timeout loop never gets
invoked from an IRQ handler.

Signed-off-by: Eugeny S. Mints <eugeny.mints@embeddedalley.com>
Signed-off-by: Jim Somerville <Jim.Somerville@windriver.com>
---
 drivers/net/smc911x.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/smc911x.c b/drivers/net/smc911x.c
index 635820d..1b9dae6 100644
--- a/drivers/net/smc911x.c
+++ b/drivers/net/smc911x.c
@@ -182,7 +182,7 @@ static void smc911x_reset(struct net_device *dev)
 	if ((SMC_GET_PMT_CTRL(lp) & PMT_CTRL_READY_) == 0) {
 		/* Write to the bytetest will take out of powerdown */
 		SMC_SET_BYTE_TEST(lp, 0);
-		timeout=10;
+		timeout=10000;
 		do {
 			udelay(10);
 			reg = SMC_GET_PMT_CTRL(lp) & PMT_CTRL_READY_;
-- 
1.6.5.2

