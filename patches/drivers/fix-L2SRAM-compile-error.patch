From ed668c665e63f7395776f792cebcfa9844559450 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Mon, 18 Jul 2011 15:30:30 +0800
Subject: [PATCH 31/47] fix L2SRAM compile error

The following error happens when build L2SRAM:
  arch/powerpc/sysdev/fsl_85xx_l2ctlr.c:239: error: unknown field
  'of_match_table' specified in initializer
Fix this problem by adjusting mpc85xx_l2ctlr_of_platform_driver field.

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 arch/powerpc/sysdev/fsl_85xx_l2ctlr.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_85xx_l2ctlr.c b/arch/powerpc/sysdev/fsl_85xx_l2ctlr.c
index 85eef3e..17439b0 100644
--- a/arch/powerpc/sysdev/fsl_85xx_l2ctlr.c
+++ b/arch/powerpc/sysdev/fsl_85xx_l2ctlr.c
@@ -233,11 +233,8 @@ static struct of_device_id mpc85xx_l2ctlr_of_match[] = {
 };
 
 static struct of_platform_driver mpc85xx_l2ctlr_of_platform_driver = {
-	.driver	= {
-		.name		= "fsl-l2ctlr",
-		.owner		= THIS_MODULE,
-		.of_match_table	= mpc85xx_l2ctlr_of_match,
-	},
+	.name		= "fsl-l2ctlr",
+	.match_table	= mpc85xx_l2ctlr_of_match,
 	.probe		= mpc85xx_l2ctlr_of_probe,
 	.remove		= __devexit_p(mpc85xx_l2ctlr_of_remove),
 };
-- 
1.7.0.4

