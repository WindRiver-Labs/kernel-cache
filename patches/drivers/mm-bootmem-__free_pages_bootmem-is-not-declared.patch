From 1a550f6d34c70511c78630c6df47791ef070fd7e Mon Sep 17 00:00:00 2001
From: Jian Liu <jian.liu@windriver.com>
Date: Thu, 6 Nov 2014 16:34:31 +0800
Subject: [PATCH] mm/bootmem: __free_pages_bootmem is not declared

During the backport of DMA CMA support, the upstream commit 10e89523bf5
[ mm/bootmem: remove duplicated declaration of __free_pages_bootmem()]
was included.

But __free_pages_bootmem() is called in arch/x86/mm/init_64.c. There will
be an error if __free_pages_bootmem() is deleted from include/linux/bootmem.h.

__free_pages_bootmem is used internally by MM core for the kernel after 3.11.
So this revise should be revert.

Signed-off-by: Jian Liu <jian.liu@windriver.com>
---
 include/linux/bootmem.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/bootmem.h b/include/linux/bootmem.h
index a0f8fe2..5f0b0e1 100644
--- a/include/linux/bootmem.h
+++ b/include/linux/bootmem.h
@@ -52,6 +52,7 @@ extern void free_bootmem_node(pg_data_t *pgdat,
 			      unsigned long size);
 extern void free_bootmem(unsigned long physaddr, unsigned long size);
 extern void free_bootmem_late(unsigned long physaddr, unsigned long size);
+extern void __free_pages_bootmem(struct page *page, unsigned int order);
 
 /*
  * Flags for reserve_bootmem (also if CONFIG_HAVE_ARCH_BOOTMEM_NODE,
-- 
1.7.5.4

