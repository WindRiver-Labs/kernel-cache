From aad5b590849a158861d20d1e3edb1a85d549d25c Mon Sep 17 00:00:00 2001
From: Qi Hou <qi.hou@windriver.com>
Date: Mon, 16 Jan 2017 17:58:39 +0800
Subject: [PATCH 4/4] i2c: add missing of_node_put in i2c_del_mux_adapter

Refcount of of_node is increased with of_node_get() in i2c_add_mux_adapter().
It must be decreased with of_node_put() in i2c_del_mux_adapter().

Signe-off-by: Qi Hou <qi.hou@windriver.com>
---
 drivers/i2c/i2c-mux.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/i2c/i2c-mux.c b/drivers/i2c/i2c-mux.c
index 2ba7c0f..9f313344 100644
--- a/drivers/i2c/i2c-mux.c
+++ b/drivers/i2c/i2c-mux.c
@@ -209,6 +209,7 @@ void i2c_del_mux_adapter(struct i2c_adapter *adap)
 	sysfs_remove_link(&priv->mux_dev->kobj, symlink_name);
 
 	sysfs_remove_link(&priv->adap.dev.kobj, "mux_device");
+	of_node_put(adap->dev.of_node);
 	i2c_del_adapter(adap);
 	kfree(priv);
 }
-- 
1.7.5.4

