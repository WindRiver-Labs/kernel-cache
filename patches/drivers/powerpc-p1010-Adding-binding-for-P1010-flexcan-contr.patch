From a7c4cb1e98586b77365730ebc8c26e68908ec6c1 Mon Sep 17 00:00:00 2001
From: Bhaskar Upadhaya <bhaskar.upadhaya@freescale.com>
Date: Thu, 24 Feb 2011 19:48:09 +0530
Subject: [PATCH 2/4] powerpc/p1010: Adding binding for P1010 flexcan controller

Signed-off-by: Bhaskar Upadhaya <bhaskar.upadhaya@freescale.com>

[Kevin: Original patch taken from FSL NODPAA SDK 1.0
QorIQ-NONDPAA-SDK-V1-20110429_ltib.iso.]

Integrated-by: Kevin Hao <kexin.hao@windriver.com>
---
 Documentation/powerpc/dts-bindings/fsl/can.txt |   26 ++++++++++++++++++++++++
 1 files changed, 26 insertions(+), 0 deletions(-)

diff --git a/Documentation/powerpc/dts-bindings/fsl/can.txt b/Documentation/powerpc/dts-bindings/fsl/can.txt
index 2fa4fcd..2192f53 100644
--- a/Documentation/powerpc/dts-bindings/fsl/can.txt
+++ b/Documentation/powerpc/dts-bindings/fsl/can.txt
@@ -35,6 +35,23 @@ also specify which clock source and divider shall be used for the controller:
 
 Note that the MPC5121 Rev. 1 processor is not supported.
 
+fsl,flexcan2.0 nodes
+-----------------------
+In addition to the required compatible-, reg- and interrupt-properties, you can
+also specify which clock source shall be used for the controller.
+
+- fsl,flexcan-clock-source : CAN Engine Clock Source.This property selects
+			     the peripheral clock. PLLclock is fed to the
+			     prescaler to generate the Serial Clock (Sclock).
+			     Valid values are 0,1
+			     "0": CAN engine clock source is oscillator clock.
+				Current release doesnâ€™t support this option.
+			     "1" The CAN engine clock source is the bus clock
+				(platform clock).
+
+- fsl,flexcan-clock-divider : for the reference and system clock, an additional
+			      clock divider can be specified.
+
 Examples:
 	can@1300 {
 		compatible = "fsl,mpc5121-mscan";
@@ -51,3 +68,12 @@ Examples:
 		fsl,mscan-clock-source = "ref";
 		fsl,mscan-clock-divider = <3>;
 	};
+
+	can0@1c000 {
+		compatible = "fsl,flexcan2.0";
+		reg = <0x1c000 0x1000>;
+		interrupts = <48 0x2>;
+		interrupt-parent = <&mpic>;
+		fsl,flexcan-clock-source = <1>;
+		fsl,flexcan-clock-divider = <2>;
+	};
-- 
1.7.0.4

