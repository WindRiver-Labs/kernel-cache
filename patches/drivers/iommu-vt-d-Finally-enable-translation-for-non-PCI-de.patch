From cc1703ee1f20e1148a64f5d40c09bada7d54cd5c Mon Sep 17 00:00:00 2001
From: David Woodhouse <David.Woodhouse@intel.com>
Date: Mon, 10 Mar 2014 20:04:11 -0700
Subject: [PATCH 052/108] iommu/vt-d: Finally enable translation for non-PCI
 devices

commit 66077edc972c1c8dc2cf08e96a956c2db9bd705c upstream.

Signed-off-by: David Woodhouse <David.Woodhouse@intel.com>
Signed-off-by: Liwei Song <liwei.song@windriver.com>
---
 drivers/iommu/intel-iommu.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

diff --git a/drivers/iommu/intel-iommu.c b/drivers/iommu/intel-iommu.c
index 1bddd2f..a970ee9 100644
--- a/drivers/iommu/intel-iommu.c
+++ b/drivers/iommu/intel-iommu.c
@@ -2905,9 +2905,6 @@ static int iommu_no_mapping(struct device *dev)
 {
 	int found;
 
-	if (unlikely(!dev_is_pci(dev)))
-		return 1;
-
 	if (iommu_dummy(dev))
 		return 1;
 
-- 
1.7.5.4

