From 3a6e0bdac0fc6d3e466b1703f5d00f6bde99f023 Mon Sep 17 00:00:00 2001
From: Zhenbo Gao <zhenbo.gao@windriver.com>
Date: Wed, 28 Mar 2018 16:39:17 +0800
Subject: [PATCH 011/376] Revert "tipc: deal with return value of
 tipc_conn_new callback"

This reverts commit 7e552f8d583ab6a083a366bba72521e884fa9658.

A big patch set for upgrading TIPC(to v4.16-rc6) will come soon

Signed-off-by: Zhenbo Gao <zhenbo.gao@windriver.com>
---
 net/tipc/server.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/net/tipc/server.c b/net/tipc/server.c
index a91a2f7..77ff03e 100644
--- a/net/tipc/server.c
+++ b/net/tipc/server.c
@@ -309,10 +309,6 @@ static int tipc_accept_from_sock(struct tipc_conn *con)
 
 	/* Notify that new connection is incoming */
 	newcon->usr_data = s->tipc_conn_new(newcon->conid);
-	if (!newcon->usr_data) {
-		sock_release(newsock);
-		return -ENOMEM;
-	}
 
 	/* Wake up receive process in case of 'SYN+' message */
 	newsock->sk->sk_data_ready(newsock->sk);
-- 
1.7.5.4

