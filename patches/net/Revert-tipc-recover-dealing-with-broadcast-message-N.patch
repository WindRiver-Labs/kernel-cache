From dd3fc491dd4c483e77b407342d57c76ef02b2fbb Mon Sep 17 00:00:00 2001
From: Zhenbo Gao <zhenbo.gao@windriver.com>
Date: Wed, 28 Mar 2018 16:37:31 +0800
Subject: [PATCH 003/376] Revert "tipc: recover dealing with broadcast message
 NAME_DISTRIBUTOR"

This reverts commit 7a1f440f08d6ad766a741b9f94c9ab3d29fe43ef.

A big patch set for upgrading TIPC(to v4.16-rc6) will come soon

Signed-off-by: Zhenbo Gao <zhenbo.gao@windriver.com>
---
 net/tipc/bcast.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/net/tipc/bcast.c b/net/tipc/bcast.c
index 023c470..c5cbdcb 100644
--- a/net/tipc/bcast.c
+++ b/net/tipc/bcast.c
@@ -435,7 +435,6 @@ void tipc_bclink_rcv(struct net *net, struct sk_buff *buf)
 	int pos = 0;
 	struct sk_buff *iskb;
 	struct sk_buff_head *arrvq, *inputq;
-	struct sk_buff_head msgs;
 
 	/* Screen out unwanted broadcast messages */
 	if (msg_mc_netid(msg) != tn->net_id)
@@ -519,14 +518,6 @@ receive:
 			}
 			tipc_bclink_unlock(net);
 			tipc_node_unlock(node);
-		} else if (msg_user(msg) == NAME_DISTRIBUTOR) {
-			tipc_bclink_lock(net);
-			bclink_accept_pkt(node, seqno);
-			tipc_bclink_unlock(net);
-			tipc_node_unlock(node);
-			skb_queue_head_init(&msgs);
-			skb_queue_tail(&msgs, buf);
-			tipc_named_rcv(net, &msgs);
 		} else {
 			tipc_bclink_lock(net);
 			bclink_accept_pkt(node, seqno);
-- 
1.7.5.4

