From 45d10077d0aed6b3387701b4af44c0716f8f2bae Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Sat, 11 Oct 2014 10:18:27 +0800
Subject: [PATCH 1/2] ipv6: Fix the warning: unused variable 'fhdr'

Since the commit 563bceb7e8 [ip6_output: do skb ufo init for peeked
non ufo skb as well] move the fhdr defined and operations to the out
of the if conditions. So it is not necessary.

warning: unused variable 'fhdr' [-Wunused-variable]
   struct frag_hdr fhdr;
                   ^

Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 net/ipv6/ip6_output.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/net/ipv6/ip6_output.c b/net/ipv6/ip6_output.c
index 9d9a827..7dac9c1 100644
--- a/net/ipv6/ip6_output.c
+++ b/net/ipv6/ip6_output.c
@@ -1140,8 +1140,6 @@ static inline int ip6_ufo_append_data(struct sock *sk,
 	 * udp datagram
 	 */
 	if ((skb = skb_peek_tail(&sk->sk_write_queue)) == NULL) {
-		struct frag_hdr fhdr;
-
 		skb = sock_alloc_send_skb(sk,
 			hh_len + fragheaderlen + transhdrlen + 20,
 			(flags & MSG_DONTWAIT), &err);
-- 
1.7.5.4

