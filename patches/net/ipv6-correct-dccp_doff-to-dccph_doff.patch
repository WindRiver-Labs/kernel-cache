From 90187436fba4f74e5eeb2d60e8bfd4747794e015 Mon Sep 17 00:00:00 2001
From: Qi Hou <qi.hou@windriver.com>
Date: Wed, 8 Mar 2017 09:59:13 +0800
Subject: [PATCH 1/2] ipv6: correct dccp_doff to dccph_doff

In struct dccp_hdr, there is no field named "dccp_doff" but a dccph_doff.

So correct the reference to dccp_doff to dccph_doff. Or there would be a
compile error, like below:

|kernel-source/net/dccp/ipv6.c:769:40: error: 'const struct dccp_hdr' has
 no member named 'dccp_doff'
|   return __sk_receive_skb(sk, skb, 1, dh->dccp_doff * 4) ? -1 : 0;
|                                         ^

It is introduced by commit 960570cea4fc ("tcp: take care of truncations
done by sk_filter()"). According to the changes made by this commit, it
seems that this commit has made by merging two commit commits from upstream
They are commit ac6e780070e30 ("tcp: take care of truncations done by
sk_filter()") and commit 4f0c40d94461 ("dccp: limit sk_filter trim to
payload").

In commit 960570cea4fc, "dccph_doff" was mistakenly written as "dccp_doff".
To fix it, correct "dccp_doff" to "dccph_doff".

Signed-off-by: Qi Hou <qi.hou@windriver.com>
---
 net/dccp/ipv6.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/net/dccp/ipv6.c b/net/dccp/ipv6.c
index 61ea82b..ef9f612 100644
--- a/net/dccp/ipv6.c
+++ b/net/dccp/ipv6.c
@@ -804,7 +804,7 @@ static int dccp_v6_rcv(struct sk_buff *skb)
 	if (!xfrm6_policy_check(sk, XFRM_POLICY_IN, skb))
 		goto discard_and_relse;
 
-	return __sk_receive_skb(sk, skb, 1, dh->dccp_doff * 4) ? -1 : 0;
+	return __sk_receive_skb(sk, skb, 1, dh->dccph_doff * 4) ? -1 : 0;
 
 no_dccp_socket:
 	if (!xfrm6_policy_check(NULL, XFRM_POLICY_IN, skb))
-- 
1.7.5.4

