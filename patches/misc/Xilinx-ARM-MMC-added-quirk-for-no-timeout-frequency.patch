From b39911c0bddf5fc7a25f2a19eddd66ab8103c280 Mon Sep 17 00:00:00 2001
From: John Linn <john.linn@xilinx.com>
Date: Fri, 8 Jun 2012 11:38:04 -0700
Subject: [PATCH 060/628] Xilinx: ARM: MMC: added quirk for no timeout
 frequency

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 33b9a5ead88d0dc366affc3837f769b88205e184

The newer silicon, > 1.0, now has a value of 0 in the
timeout clock frequency of the capabilities register.
This allows the sdhci to deal with that.

Signed-off-by: John Linn <john.linn@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/mmc/host/sdhci-of-xilinxps.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/drivers/mmc/host/sdhci-of-xilinxps.c b/drivers/mmc/host/sdhci-of-xilinxps.c
index 2a9bd1c..127ca9c 100644
--- a/drivers/mmc/host/sdhci-of-xilinxps.c
+++ b/drivers/mmc/host/sdhci-of-xilinxps.c
@@ -36,7 +36,8 @@ static struct sdhci_ops sdhci_zynq_ops = {
 };
 
 static struct sdhci_pltfm_data sdhci_zynq_pdata = {
-	.quirks = SDHCI_QUIRK_CAP_CLOCK_BASE_BROKEN,
+	.quirks = SDHCI_QUIRK_CAP_CLOCK_BASE_BROKEN | \
+			SDHCI_QUIRK_DATA_TIMEOUT_USES_SDCLK,
 	.ops = &sdhci_zynq_ops,
 };
 
-- 
1.7.5.4

