From d2fb19d78aa0fc6bdaa771a0675118b0c87784d6 Mon Sep 17 00:00:00 2001
From: Jiping Ma <jiping.ma2@windriver.com>
Date: Fri, 10 Aug 2018 04:19:00 +0000
Subject: [PATCH] x86-32: kernel warning of file
 arch/x86/include/asm/pgtable_types.h

commit [23d458b018] introduced the following warning to the build
via an incomplete backport of functionality.

Signed-off-by: Jiping Ma <jiping.ma2@windriver.com>
---
 arch/x86/kernel/cpu/perf_event_intel_bts.c |    2 +-
 arch/x86/kernel/ldt.c                      |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/x86/kernel/cpu/perf_event_intel_bts.c b/arch/x86/kernel/cpu/perf_event_intel_bts.c
index 519fe69..24e7fde 100644
--- a/arch/x86/kernel/cpu/perf_event_intel_bts.c
+++ b/arch/x86/kernel/cpu/perf_event_intel_bts.c
@@ -128,7 +128,7 @@ bts_buffer_setup_aux(int cpu, void **pages, int nr_pages, bool overwrite)
 		page_size = buf_size(page);
 
 		if (kaiser_add_mapping((unsigned long)kaddr,
-					page_size, __PAGE_KERNEL) < 0) {
+					page_size, (unsigned long)__PAGE_KERNEL) < 0) {
 			buf->nr_bufs = nbuf;
 			bts_buffer_free_aux(buf);
 			return NULL;
diff --git a/arch/x86/kernel/ldt.c b/arch/x86/kernel/ldt.c
index 5797d43..cb3e2d3 100644
--- a/arch/x86/kernel/ldt.c
+++ b/arch/x86/kernel/ldt.c
@@ -77,7 +77,7 @@ static struct ldt_struct *alloc_ldt_struct(int size)
 	}
 
 	ret = kaiser_add_mapping((unsigned long)new_ldt->entries, alloc_size,
-				 __PAGE_KERNEL);
+				 (unsigned long)__PAGE_KERNEL);
 	new_ldt->size = size;
 	if (ret) {
 		__free_ldt_struct(new_ldt);
-- 
1.7.9.5

