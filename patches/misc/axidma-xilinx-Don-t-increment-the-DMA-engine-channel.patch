From 923237db080e499dd1fcfdd680970d858a5ecb49 Mon Sep 17 00:00:00 2001
From: Srikanth Thokala <srikanth.thokala@xilinx.com>
Date: Wed, 18 Sep 2013 17:27:36 +0530
Subject: [PATCH 127/628] axidma: xilinx: Don't increment the DMA engine
 channel count

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 671f651a8e81640c3ba600cf925c2510698c993a

Channel count will be incremented internally by dma_async_device_
register().

Signed-off-by: Srikanth Thokala <sthokal@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/dma/xilinx/xilinx_axidma.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axidma.c b/drivers/dma/xilinx/xilinx_axidma.c
index c0893e3..47ec1a2 100644
--- a/drivers/dma/xilinx/xilinx_axidma.c
+++ b/drivers/dma/xilinx/xilinx_axidma.c
@@ -1008,7 +1008,6 @@ static int xilinx_dma_chan_probe(struct xilinx_dma_device *xdev,
 
 	/* Add the channel to DMA device channel list */
 	list_add_tail(&chan->common.device_node, &xdev->common.channels);
-	xdev->common.chancnt++;
 
 	return 0;
 }
-- 
1.7.5.4

