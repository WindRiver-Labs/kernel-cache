From 624da74b59de7904fb33d57792d78baebeb76bdb Mon Sep 17 00:00:00 2001
From: Krishnankutty Kolathappilly <kkolat@codeaurora.org>
Date: Wed, 6 Nov 2013 10:08:39 -0800
Subject: [PATCH] ALSA: compress: Memset timestamp structure to zero.

commit 591b1f455c32206704cbcf426bb30911c260c33e from
https://source.codeaurora.org/quic/la/kernel/msm-3.10

snd_compr_tstamp is initialized using aggregate initialization
that does not zero out the padded bytes. Initialize timestamp
structure to zero using memset to avoid this.

CRs-Fixed: 568717
Change-Id: I7a7d188705161f06201f1a1f2945bb6acd633d5d
Signed-off-by: Krishnankutty Kolathappilly <kkolat@codeaurora.org>
Signed-off-by: Qi Hou <qi.hou@windriver.com>
---
 sound/core/compress_offload.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/core/compress_offload.c b/sound/core/compress_offload.c
index c6e58a9..8a17b4c 100644
--- a/sound/core/compress_offload.c
+++ b/sound/core/compress_offload.c
@@ -499,6 +499,7 @@ snd_compr_tstamp(struct snd_compr_stream *stream, unsigned long arg)
 {
 	struct snd_compr_tstamp tstamp;
 
+	memset(&tstamp, 0, sizeof(tstamp));
 	snd_compr_update_tstamp(stream, &tstamp);
 	return copy_to_user((struct snd_compr_tstamp __user *)arg,
 		&tstamp, sizeof(tstamp)) ? -EFAULT : 0;
-- 
1.7.5.4

