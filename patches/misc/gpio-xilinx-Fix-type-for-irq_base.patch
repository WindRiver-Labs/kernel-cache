From bc0240602259a771306cb1a57f3fcae6df35f9b1 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 3 Sep 2013 16:22:12 +0200
Subject: [PATCH 363/628] gpio: xilinx: Fix type for irq_base

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 32161b344f3eb80f59bd99e9ca215a93b40b929a

irq_alloc_descs() returns negative numbers
on error path. Use int type to capture it.

Bug was introduced by this commit:
"GPIO: xilinx: Add irq support to the driver"
(sha1: 796ae5e3e4ae5f550e0ba01ade34604c83b08cfd)

Reported-by: Kester Aernoudt <kestera@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/gpio/gpio-xilinx.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/gpio/gpio-xilinx.c b/drivers/gpio/gpio-xilinx.c
index 0f5d221..e004a9b 100644
--- a/drivers/gpio/gpio-xilinx.c
+++ b/drivers/gpio/gpio-xilinx.c
@@ -64,7 +64,7 @@ struct xgpio_instance {
 	u32 gpio_state;
 	u32 gpio_dir;
 	u32 offset;
-	u32 irq_base;
+	int irq_base;
 	u32 irq_enable;
 	spinlock_t gpio_lock;
 	struct irq_domain *irq_domain;
-- 
1.7.5.4

