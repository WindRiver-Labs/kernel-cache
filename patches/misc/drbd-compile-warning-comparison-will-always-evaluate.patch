From fc0bfe888023aa6977821b57095ffd25a161df59 Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Thu, 18 Jul 2013 13:57:52 +0800
Subject: [PATCH 6/8] drbd: compile warning: comparison will always evaluate
 as 'true'

warning: the comparison will always evaluate as 'true' for the address of 'xxx' will never be NULL [-Waddress]

Signed-off-by: Li Wang <li.wang@windriver.com>
---
 drivers/block/drbd/drbd_main.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/drivers/block/drbd/drbd_main.c b/drivers/block/drbd/drbd_main.c
index 211fc44..36a51ac 100644
--- a/drivers/block/drbd/drbd_main.c
+++ b/drivers/block/drbd/drbd_main.c
@@ -4184,11 +4184,10 @@ const char *drbd_buildtag(void)
 
 	if (buildtag[0] == 0) {
 #ifdef CONFIG_MODULES
-		if (THIS_MODULE != NULL)
-			sprintf(buildtag, "srcversion: %-24s", THIS_MODULE->srcversion);
-		else
+		sprintf(buildtag, "srcversion: %-24s", THIS_MODULE->srcversion);
+#else
+		buildtag[0] = 'b';
 #endif
-			buildtag[0] = 'b';
 	}
 
 	return buildtag;
-- 
1.7.5.4

