From 9041aa336dd779d4c993b0a383fc4d5b67aff45b Mon Sep 17 00:00:00 2001
From: Soren Brinkmann <soren.brinkmann@xilinx.com>
Date: Fri, 4 Jan 2013 10:28:40 -0800
Subject: [PATCH 169/628] char: xilinx_devcfg: Simplify driver initialization

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 2c289e08906553221e97893bbda9549136815196

Use module_platform_driver macro which creates
init and exit functions.

Signed-off-by: Soren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/char/xilinx_devcfg.c |   22 +---------------------
 1 files changed, 1 insertions(+), 21 deletions(-)

diff --git a/drivers/char/xilinx_devcfg.c b/drivers/char/xilinx_devcfg.c
index eb9c75f..114be65 100644
--- a/drivers/char/xilinx_devcfg.c
+++ b/drivers/char/xilinx_devcfg.c
@@ -1631,27 +1631,7 @@ static struct platform_driver xdevcfg_platform_driver = {
 	},
 };
 
-/**
- * xdevcfg_module_init -  register the Device Configuration.
- *
- * Returns 0 on success, otherwise negative error.
- */
-static int __init xdevcfg_module_init(void)
-{
-	return platform_driver_register(&xdevcfg_platform_driver);
-}
-
-/**
- * xdevcfg_module_exit -  Unregister the Device Configuration.
- */
-static void __exit xdevcfg_module_exit(void)
-{
-	platform_driver_unregister(&xdevcfg_platform_driver);
-
-}
-
-module_init(xdevcfg_module_init);
-module_exit(xdevcfg_module_exit);
+module_platform_driver(xdevcfg_platform_driver);
 
 MODULE_AUTHOR("Xilinx, Inc");
 MODULE_DESCRIPTION("Xilinx Device Config Driver");
-- 
1.7.5.4

