From f62a902c0b9ff42d8596bbcee15de959b767244a Mon Sep 17 00:00:00 2001
From: Lans Zhang <jia.zhang@windriver.com>
Date: Thu, 7 Aug 2014 10:11:36 +0800
Subject: [PATCH 22/25] PCI/MSI: Return -ENOSYS for unimplemented interfaces,
 not -1

commit 8ec5db6b20c860ddd1311c794b38c98ce86ac7ae upstream

Suggested-by: Ben Hutchings <bhutchings@solarflare.com>
Signed-off-by: Alexander Gordeev <agordeev@redhat.com>
Signed-off-by: Bjorn Helgaas <bhelgaas@google.com>
Reviewed-by: Tejun Heo <tj@kernel.org>
Signed-off-by: Lans Zhang <jia.zhang@windriver.com>
---
 include/linux/pci.h |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/include/linux/pci.h b/include/linux/pci.h
index 0322f8a..469e2de 100644
--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -1127,13 +1127,13 @@ static inline int pci_msi_vec_count(struct pci_dev *dev)
 
 static inline int pci_enable_msi_block(struct pci_dev *dev, int nvec)
 {
-	return -1;
+	return -ENOSYS;
 }
 
 static inline int
 pci_enable_msi_block_auto(struct pci_dev *dev, int *maxvec)
 {
-	return -1;
+	return -ENOSYS;
 }
 
 static inline void pci_msi_shutdown(struct pci_dev *dev)
@@ -1148,7 +1148,7 @@ static inline int pci_msix_vec_count(struct pci_dev *dev)
 static inline int pci_enable_msix(struct pci_dev *dev,
 				  struct msix_entry *entries, int nvec)
 {
-	return -1;
+	return -ENOSYS;
 }
 
 static inline void pci_msix_shutdown(struct pci_dev *dev)
-- 
1.7.5.4

