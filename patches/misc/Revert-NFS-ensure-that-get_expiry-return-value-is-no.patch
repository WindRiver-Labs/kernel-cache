From 98086c1a435e9987b8fa675ec3598fc5d5716464 Mon Sep 17 00:00:00 2001
From: Zhang Xiao <xiao.zhang@windriver.com>
Date: Mon, 29 Jun 2015 01:59:15 +0000
Subject: [PATCH] Revert "NFS: ensure that get_expiry return value is non
 negative"

This reverts commit 961a6553ed010004c69b9e56e7b69240e72c1af6.

This breaks the orgianl logic/defination of get_expiry and
seconds_since_boot. getboottime get the real boot time while
get_monotonic_boottime returns monotonic time since boot.
Function get_expiry and seconds_since_boot can only use
getboottime and it shouldn't be replaced by
get_monotonic_boottime directly.

Signed-off-by: Zhang Xiao <xiao.zhang@windriver.com>
---
 include/linux/sunrpc/cache.h |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/include/linux/sunrpc/cache.h b/include/linux/sunrpc/cache.h
index 53a6dee..437ddb6 100644
--- a/include/linux/sunrpc/cache.h
+++ b/include/linux/sunrpc/cache.h
@@ -157,7 +157,7 @@ struct cache_deferred_req {
 static inline time_t seconds_since_boot(void)
 {
 	struct timespec boot;
-	get_monotonic_boottime(&boot);
+	getboottime(&boot);
 	return get_seconds() - boot.tv_sec;
 }
 
@@ -291,7 +291,7 @@ static inline time_t get_expiry(char **bpp)
 		return 0;
 	if (rv < 0)
 		return 0;
-	get_monotonic_boottime(&boot);
+	getboottime(&boot);
 	return rv - boot.tv_sec;
 }
 
-- 
1.7.5.4

