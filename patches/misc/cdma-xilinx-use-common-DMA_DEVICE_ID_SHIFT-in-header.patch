From 5824e1d923df4689260965d1689e93390963f9f4 Mon Sep 17 00:00:00 2001
From: Srikanth Thokala <srikanth.thokala@xilinx.com>
Date: Fri, 20 Sep 2013 12:29:39 +0530
Subject: [PATCH 145/628] cdma: xilinx: use common DMA_DEVICE_ID_SHIFT in
 header file

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 022c6a3402cc16d4e2f3bcc99673aef2c142ef32

This patches uses DMA_DEVICE_ID_SHIFT constant defined in
include/linux/amba/xilinx_dma.h

Signed-off-by: Srikanth Thokala <sthokal@xilinx.com>
Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/dma/xilinx/xilinx_axicdma.c |    5 +----
 1 files changed, 1 insertions(+), 4 deletions(-)

diff --git a/drivers/dma/xilinx/xilinx_axicdma.c b/drivers/dma/xilinx/xilinx_axicdma.c
index 5272769..a11e39e 100644
--- a/drivers/dma/xilinx/xilinx_axicdma.c
+++ b/drivers/dma/xilinx/xilinx_axicdma.c
@@ -79,9 +79,6 @@
 #define XILINX_CDMA_RESET_LOOP	1000000
 #define XILINX_CDMA_HALT_LOOP	1000000
 
-/* Device Id in the private structure */
-#define XILINX_CDMA_DEVICE_ID_SHIFT	28
-
 /* IO accessors */
 #define cdma_write(addr, val)	(iowrite32(val, addr))
 #define cdma_read(addr)		(ioread32(addr))
@@ -887,7 +884,7 @@ static int xilinx_cdma_chan_probe(struct xilinx_cdma_device *xdev,
 	 * Can change it to be a structure to have more matching information
 	 */
 	chan->private = (chan->direction & 0xFF) | XILINX_DMA_IP_CDMA |
-		(device_id << XILINX_CDMA_DEVICE_ID_SHIFT);
+		(device_id << XILINX_DMA_DEVICE_ID_SHIFT);
 	chan->common.private = (void *)&(chan->private);
 
 	if (!chan->has_dre)
-- 
1.7.5.4

