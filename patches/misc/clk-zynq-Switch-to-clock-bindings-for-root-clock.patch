From 4cd91ceb75bd4ff41c5d92f1fffaac1aecbaa215 Mon Sep 17 00:00:00 2001
From: Soren Brinkmann <soren.brinkmann@xilinx.com>
Date: Thu, 20 Dec 2012 10:53:03 -0800
Subject: [PATCH 607/628] clk: zynq: Switch to clock bindings for root clock

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 30c152388cb0ff3b426d03b9559a0b4b8e6e3ff2

Switching to the newly introduced clock bindings to register
all fixed rate clocks with the clock framework.

Signed-off-by: Soren Brinkmann <soren.brinkmann@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 arch/arm/boot/dts/zynq-zc706.dts |   22 +++++++++++++++++-----
 1 files changed, 17 insertions(+), 5 deletions(-)

diff --git a/arch/arm/boot/dts/zynq-zc706.dts b/arch/arm/boot/dts/zynq-zc706.dts
index b53b15e..1561c07 100644
--- a/arch/arm/boot/dts/zynq-zc706.dts
+++ b/arch/arm/boot/dts/zynq-zc706.dts
@@ -16,11 +16,6 @@
 		linux,stdout-path = "/amba@0/uart@E0001000";
 	};
 
-	soc {
-		compatible = "xlnx,zynq";
-		clock-frequency = <33333333>;
-	};
-
 	amba@0 {
 		compatible = "simple-bus";
 		#address-cells = <0x1>;
@@ -52,6 +47,23 @@
 			clock = <50000000>;
 		};
 
+		slcr: slcr@f8000000 {
+			compatible = "xlnx,zynq-slcr";
+			reg = <0xF8000000 0x1000>;
+
+			clocks {
+				#address-cells = <1>;
+				#size-cells = <0>;
+
+				ps_clk: ps_clk {
+					#clock-cells = <0>;
+					compatible = "fixed-clock";
+					clock-frequency = <33333333>;
+					clock-output-names = "PS_CLK";
+				};
+			};
+		};
+
 		timer@0xf8001000 {
 			compatible = "xlnx,ps7-ttc-1.00.a";
 			reg = <0xf8001000 0x1000>;
-- 
1.7.5.4

