From ca839362e5a9d4a587e65c7a29fe3e59a7e7acda Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 10 Sep 2013 15:45:30 +0200
Subject: [PATCH 072/628] mmc: host: xilinxps: Use standard mmc binding

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 99d2700c5ed443375386e65bb1c5412159223b76

Use standard MMC binding which uses "broken-cd" property
in sdhci_get_of_property() which is called in sdhci_pltfm_register().

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/mmc/host/sdhci-of-xilinxps.c |    6 ------
 1 files changed, 0 insertions(+), 6 deletions(-)

diff --git a/drivers/mmc/host/sdhci-of-xilinxps.c b/drivers/mmc/host/sdhci-of-xilinxps.c
index 4a4a9b0..a026c8c 100644
--- a/drivers/mmc/host/sdhci-of-xilinxps.c
+++ b/drivers/mmc/host/sdhci-of-xilinxps.c
@@ -143,8 +143,6 @@ static const struct dev_pm_ops xsdhcips_dev_pm_ops = {
 static int sdhci_zynq_probe(struct platform_device *pdev)
 {
 	int ret;
-	const void *prop;
-	struct device_node *np = pdev->dev.of_node;
 	struct sdhci_host *host;
 	struct sdhci_pltfm_host *pltfm_host;
 	struct xsdhcips *xsdhcips;
@@ -198,10 +196,6 @@ static int sdhci_zynq_probe(struct platform_device *pdev)
 	pltfm_host = sdhci_priv(host);
 	pltfm_host->priv = xsdhcips;
 
-	prop = of_get_property(np, "xlnx,has-cd", NULL);
-	if (prop == NULL || (!(u32) be32_to_cpup(prop)))
-		host->quirks |= SDHCI_QUIRK_BROKEN_CARD_DETECTION;
-
 	return 0;
 
 clk_notif_unreg:
-- 
1.7.5.4

