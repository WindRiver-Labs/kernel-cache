From a63eab7036d8c2bce2bc3ac915cb3b7987ad3442 Mon Sep 17 00:00:00 2001
From: Liming Wang <liming.wang@windriver.com>
Date: Thu, 20 Mar 2014 18:22:33 +0800
Subject: [PATCH 006/628] zynq: pcie: Remove __devinit, __devexit,
 __definitdata, __devexit_p, __exit_p

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 068160c0 Merge commit 'v3.8' into master-next

Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 arch/arm/mach-zynq/xaxipcie-msi.c |    1 +
 arch/arm/mach-zynq/xaxipcie.c     |   12 ++++++------
 2 files changed, 7 insertions(+), 6 deletions(-)

diff --git a/arch/arm/mach-zynq/xaxipcie-msi.c b/arch/arm/mach-zynq/xaxipcie-msi.c
index 8eb038b..1d45a96 100644
--- a/arch/arm/mach-zynq/xaxipcie-msi.c
+++ b/arch/arm/mach-zynq/xaxipcie-msi.c
@@ -25,6 +25,7 @@
 
 #include <linux/msi.h>
 #include <linux/irq.h>
+#include "common.h"
 
 #define XILINX_NUM_MSI_IRQS	127
 
diff --git a/arch/arm/mach-zynq/xaxipcie.c b/arch/arm/mach-zynq/xaxipcie.c
index 11e7745..862ca5a 100644
--- a/arch/arm/mach-zynq/xaxipcie.c
+++ b/arch/arm/mach-zynq/xaxipcie.c
@@ -42,6 +42,7 @@
 
 #include <linux/pci.h>
 #include <asm/mach/pci.h>
+#include "common.h"
 
 /* Register definitions */
 #define PCIE_CFG_CMD			0x00000004
@@ -362,7 +363,7 @@ static int xaxi_pcie_write_config(struct pci_bus *bus,
  *
  * @note: None
  */
-void __devinit xaxi_pcie_set_bridge_resource(struct xaxi_pcie_port *port)
+void xaxi_pcie_set_bridge_resource(struct xaxi_pcie_port *port)
 {
 	const u32 *ranges = port->ranges;
 	int rlen = port->range_len;
@@ -480,8 +481,7 @@ static int xaxi_pcie_hookup_resources(struct xaxi_pcie_port *port,
 	return 0;
 }
 
-void __devinit xaxi_pcie_process_bridge_OF_ranges(
-					struct xaxi_pcie_port *port,
+void xaxi_pcie_process_bridge_OF_ranges(struct xaxi_pcie_port *port,
 					int primary)
 {
 	/* The address cells of PCIe node */
@@ -610,7 +610,7 @@ static struct pci_ops xaxi_pcie_ops = {
 	.write = xaxi_pcie_write_config,
 };
 
-static int __devinit xaxi_pcie_setup(int nr, struct pci_sys_data *sys)
+static int xaxi_pcie_setup(int nr, struct pci_sys_data *sys)
 {
 	u32 val;
 	struct xaxi_pcie_port *port = &xaxi_pcie_ports[nr];
@@ -932,7 +932,7 @@ xaxi_pcie_instantiate_port_info(struct xaxi_pcie_of_config *config,
  *
  * @note: Read related info from device tree
  */
-int __devinit xaxi_pcie_get_of_config(struct device_node *node,
+int xaxi_pcie_get_of_config(struct device_node *node,
 		struct xaxi_pcie_of_config *info)
 {
 	u32 *value;
@@ -1036,7 +1036,7 @@ static int __init xaxi_pcie_of_probe(struct device_node *node)
 	return err;
 }
 
-static struct of_device_id xaxi_pcie_match[] __devinitdata = {
+static struct of_device_id xaxi_pcie_match[] = {
 	{ .compatible = "xlnx,axi-pcie-1.05.a" ,},
 	{}
 };
-- 
1.7.5.4

