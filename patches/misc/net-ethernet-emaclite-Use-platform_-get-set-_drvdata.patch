From 3e5af0092adb73fa669580295e2c2fbd7b88f7c2 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Mon, 17 Jun 2013 13:43:33 +0200
Subject: [PATCH 435/628] net: ethernet: emaclite: Use
 platform_{get,set}_drvdata()

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 3bd0d085 xilinx: Use platform_{get,set}_drvdata()

Based on mainline commit:
"serial: use platform_{get,set}_drvdata()"
(sha1: 696faedd616e202f5c510cd03dcc8853c11ca6db)

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
[cherry picked the xilinx emaclite driver modification only]
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/net/ethernet/xilinx/xilinx_emaclite.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/xilinx/xilinx_emaclite.c b/drivers/net/ethernet/xilinx/xilinx_emaclite.c
index 6f2fc7e..351724f 100644
--- a/drivers/net/ethernet/xilinx/xilinx_emaclite.c
+++ b/drivers/net/ethernet/xilinx/xilinx_emaclite.c
@@ -1279,7 +1279,6 @@ static int xemaclite_of_remove(struct platform_device *of_dev)
 	release_mem_region(ndev->mem_start, ndev->mem_end-ndev->mem_start + 1);
 
 	xemaclite_remove_ndev(ndev);
-	dev_set_drvdata(dev, NULL);
 
 	return 0;
 }
-- 
1.7.5.4

