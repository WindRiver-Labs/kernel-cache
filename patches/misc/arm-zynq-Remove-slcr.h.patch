From 1760506fedbc8aac14418e8a3a59419c14dfdd8d Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 12 Mar 2013 12:05:35 +0100
Subject: [PATCH 176/628] arm: zynq: Remove slcr.h

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 2091e7343a828f6e44c7575066c6597408b3e72f

It is controversial patch because xilinx_devcfg
contains some externs which shouldn't contain
but we can live with this for now because that driver
needs to be changed anyway.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 arch/arm/mach-zynq/pm.c      |    1 -
 drivers/char/xilinx_devcfg.c |    3 ++-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-zynq/pm.c b/arch/arm/mach-zynq/pm.c
index 16e6c6b..847a6ab 100644
--- a/arch/arm/mach-zynq/pm.c
+++ b/arch/arm/mach-zynq/pm.c
@@ -33,7 +33,6 @@
 #include <asm/hardware/cache-l2x0.h>
 #include <asm/mach/map.h>
 #include <asm/suspend.h>
-#include <mach/slcr.h>
 #include "common.h"
 
 #define DDRC_CTRL_REG1_OFFS		0x60
diff --git a/drivers/char/xilinx_devcfg.c b/drivers/char/xilinx_devcfg.c
index c95787c..58c1df3 100644
--- a/drivers/char/xilinx_devcfg.c
+++ b/drivers/char/xilinx_devcfg.c
@@ -33,7 +33,8 @@
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
-#include <mach/slcr.h>
+extern void xslcr_init_preload_fpga(void);
+extern void xslcr_init_postload_fpga(void);
 
 #define DRIVER_NAME "xdevcfg"
 
-- 
1.7.5.4

