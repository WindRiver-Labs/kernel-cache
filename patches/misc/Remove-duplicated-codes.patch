From 00aaf92d3f5add034b9e0a8c4ec0d5a22539f2d0 Mon Sep 17 00:00:00 2001
From: Yue Tao <yue.tao@windriver.com>
Date: Mon, 15 Jul 2013 19:45:15 -0700
Subject: [PATCH] Remove duplicated codes.

Signed-off-by: Yue Tao <yue.tao@windriver.com>
---
 kernel/panic.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/kernel/panic.c b/kernel/panic.c
index bdef550..b4fe7e1 100644
--- a/kernel/panic.c
+++ b/kernel/panic.c
@@ -90,14 +90,6 @@ void panic(const char *fmt, ...)
 	local_irq_disable();
 
 	/*
-	 * Disable local interrupts. This will prevent panic_smp_self_stop
-	 * from deadlocking the first cpu that invokes the panic, since
-	 * there is nothing to prevent an interrupt handler (that runs
-	 * after the panic_lock is acquired) from invoking panic again.
-	 */
-	local_irq_disable();
-
-	/*
 	 * It's possible to come here directly from a panic-assertion and
 	 * not have preempt disabled. Some functions called from here want
 	 * preempt to be disabled. No point enabling it later though...
-- 
1.7.5.4

