From cba2fb1e9bbd64dd91371963db3749f4a6df0ed6 Mon Sep 17 00:00:00 2001
From: Jianchuan Wang <jianchuan.wang@windriver.com>
Date: Wed, 23 Mar 2016 11:04:21 +0800
Subject: [PATCH] livedump: Depend on the CONFIG_BLOCK

Depending on the CONFIG_BLOCK since livedump calls get_task_ioprio() in
the function livedump_clone().

Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 init/Kconfig |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/init/Kconfig b/init/Kconfig
index 7f57bf6..3b86f4f 100644
--- a/init/Kconfig
+++ b/init/Kconfig
@@ -1488,7 +1488,8 @@ config ELF_CORE
 	  Enable support for generating core dumps. Disabling saves about 4k.
 
 config LIVEDUMP
-	default y
+	depends on BLOCK
+	default n
 	bool "Enable Live Application Dump"
 	help
 	  Enable support for live application dump, i.e. the capability to
-- 
1.7.5.4

