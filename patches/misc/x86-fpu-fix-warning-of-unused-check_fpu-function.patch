From d647a10e0e257ec29df521f43d4238d95082aa60 Mon Sep 17 00:00:00 2001
From: Rui Wang <rui.wang@windriver.com>
Date: Mon, 13 Aug 2018 09:57:32 +0800
Subject: [PATCH] x86/fpu: fix warning of unused check_fpu function

if CONFIG_X86_32 is not set, and because check_fpu is a static
function, compiler will consider that it will never be used,
then a warning message about unused-function will appear. So
add the same macro to judge if it should be compiled into kernel.

Signed-off-by: Rui Wang <rui.wang@windriver.com>
---
 arch/x86/kernel/cpu/bugs.c |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/arch/x86/kernel/cpu/bugs.c b/arch/x86/kernel/cpu/bugs.c
index 25dda40..f249833 100644
--- a/arch/x86/kernel/cpu/bugs.c
+++ b/arch/x86/kernel/cpu/bugs.c
@@ -19,6 +19,7 @@
 #include <asm/pgtable.h>
 #include <asm/cacheflush.h>
 
+#ifdef CONFIG_X86_32
 static double __initdata x = 4195835.0;
 static double __initdata y = 3145727.0;
 
@@ -64,6 +65,7 @@ static void __init check_fpu(void)
 		pr_warn("Hmm, FPU with FDIV bug\n");
 	}
 }
+#endif
 
 void __init check_bugs(void)
 {
-- 
1.7.9.5

