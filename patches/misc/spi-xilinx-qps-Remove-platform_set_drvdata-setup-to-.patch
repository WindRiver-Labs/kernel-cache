From f70c2cd96796a96da668647761d11ed2d46a217f Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Mon, 8 Jul 2013 10:37:50 +0200
Subject: [PATCH 260/628] spi: xilinx-qps: Remove platform_set_drvdata setup
 to NULL

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 3b3e7f40fb1deb85be6886fe4d24e10e242374ba

It is done automatically.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/spi/spi-xilinx-qps.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/drivers/spi/spi-xilinx-qps.c b/drivers/spi/spi-xilinx-qps.c
index 64ba674..9234068 100644
--- a/drivers/spi/spi-xilinx-qps.c
+++ b/drivers/spi/spi-xilinx-qps.c
@@ -1163,7 +1163,6 @@ clk_put:
 clk_put_aper:
 	clk_put(xqspi->aperclk);
 remove_master:
-	platform_set_drvdata(pdev, NULL);
 	spi_master_put(master);
 	kfree(master);
 	return ret;
@@ -1203,9 +1202,6 @@ static int xqspips_remove(struct platform_device *pdev)
 
 	kfree(master);
 
-	/* Prevent double remove */
-	platform_set_drvdata(pdev, NULL);
-
 	dev_dbg(&pdev->dev, "remove succeeded\n");
 	return 0;
 }
-- 
1.7.5.4

