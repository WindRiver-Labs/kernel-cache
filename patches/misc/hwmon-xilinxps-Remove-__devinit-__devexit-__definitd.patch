From fab97cf0bf26abd045dc17b46ff757a01006a4cf Mon Sep 17 00:00:00 2001
From: Liming Wang <liming.wang@windriver.com>
Date: Tue, 25 Mar 2014 19:00:20 +0800
Subject: [PATCH 196/628] hwmon: xilinxps: Remove __devinit, __devexit,
 __definitdata, __devexit_p, __exit_p

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 068160c0 Merge commit 'v3.8' into master-next

cherry picked the xilinx hwmon driver modification.

Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/hwmon/xilinx-xadcps.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/hwmon/xilinx-xadcps.c b/drivers/hwmon/xilinx-xadcps.c
index e392981..13463a1 100644
--- a/drivers/hwmon/xilinx-xadcps.c
+++ b/drivers/hwmon/xilinx-xadcps.c
@@ -633,7 +633,7 @@ static irqreturn_t xadc_irq(int irq, void *data)
 	return IRQ_HANDLED;
 }
 
-static struct xadc_op xadc_ops[] __devinitdata = {
+static struct xadc_op xadc_ops[] = {
 	{.cmd = WRITEOP(REG_CFG1, REG_CFG1_CAL_SSOG |
 			REG_CFG1_CAL_ADCOG |
 			SETFIELD(REG_CFG1, SEQ, MODE_DEF)),},
@@ -649,12 +649,12 @@ static struct xadc_op xadc_ops[] __devinitdata = {
 	{.cmd = WRITEOP(REG_CFG1, REG_CFG1_CAL_SSOG | REG_CFG1_CAL_ADCOG |
 			SETFIELD(REG_CFG1, SEQ, MODE_IND)),},
 };
-static struct xadc_batch setup __devinitdata = {
+static struct xadc_batch setup = {
 	.count = ARRAY_SIZE(xadc_ops),
 	.ops = xadc_ops,
 };
 
-static int __devinit xadc_probe(struct platform_device *pdev)
+static int xadc_probe(struct platform_device *pdev)
 {
 	struct xadc_t *xadc;
 	u16 val;
@@ -774,7 +774,7 @@ err_free:
 	return ret;
 }
 
-static int __devexit xadc_remove(struct platform_device *pdev)
+static int xadc_remove(struct platform_device *pdev)
 {
 	struct xadc_t *xadc = platform_get_drvdata(pdev);
 
@@ -797,7 +797,7 @@ static int __devexit xadc_remove(struct platform_device *pdev)
 	return 0;
 }
 
-static struct of_device_id xadcps_of_match[] __devinitdata = {
+static struct of_device_id xadcps_of_match[] = {
 	{ .compatible = "xlnx,ps7-xadc-1.00.a", },
 	{ /* end of table */}
 };
@@ -805,7 +805,7 @@ MODULE_DEVICE_TABLE(of, xadcps_of_match);
 
 static struct platform_driver xadc_driver = {
 	.probe = xadc_probe,
-	.remove = __devexit_p(xadc_remove),
+	.remove = xadc_remove,
 	.driver = {
 		.name = "xadcps",
 		.owner = THIS_MODULE,
-- 
1.7.5.4

