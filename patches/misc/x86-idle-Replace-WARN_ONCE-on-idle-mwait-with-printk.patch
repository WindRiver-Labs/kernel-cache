From 07426f0827043946846a89ac0d556953c494a5c1 Mon Sep 17 00:00:00 2001
From: Nam Ninh <nam.ninh@windriver.com>
Date: Tue, 24 Sep 2013 13:52:53 -0400
Subject: [PATCH] x86 idle: Replace WARN_ONCE on idle mwait with printk

We are using idle=mwait boot param that triggers the WARN_ONCE on
future deprecation of mwait, which in turn output a call trace.
Replacing WARN_ONCE with printk won't harm anything, but make
the boot log cleaner.

Signed-off-by: Nam Ninh <nam.ninh@windriver.com>

diff --git a/arch/x86/kernel/process.c b/arch/x86/kernel/process.c
index 8778758..4faf7cf 100644
--- a/arch/x86/kernel/process.c
+++ b/arch/x86/kernel/process.c
@@ -721,7 +721,7 @@ static int __init idle_setup(char *str)
 		boot_option_idle_override = IDLE_POLL;
 	} else if (!strcmp(str, "mwait")) {
 		boot_option_idle_override = IDLE_FORCE_MWAIT;
-		WARN_ONCE(1, "\"idle=mwait\" will be removed in 2012\n");
+		printk(KERN_INFO "\"idle=mwait\" will be removed in 2012\n");
 	} else if (!strcmp(str, "halt")) {
 		/*
 		 * When the boot option of idle=halt is added, halt is
-- 
1.8.3.1

