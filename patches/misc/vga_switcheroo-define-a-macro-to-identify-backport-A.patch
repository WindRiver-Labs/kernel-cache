From e0eb731aa5230920f106444e390505d3d1744615 Mon Sep 17 00:00:00 2001
From: Xin Ouyang <Xin.Ouyang@windriver.com>
Date: Tue, 18 Jun 2013 15:50:33 +0800
Subject: [PATCH] vga_switcheroo: define a macro to identify backport API
 change

We have backport a 3.5+ commit 26ec685ff9d9c16525d8ec4c97e52fcdb187b302
"vga_switcheroo: introduce struct vga_switcheroo_client_ops" to
standard/base. This would cause build failures because compat-wireless
has redefined this struct for 3.4- kernels.

Define a new macro VGA_SWITCHEROO_CLIENT_OPS to identify the API change,
so compat-wireless could test on it, to avoid failures.

Signed-off-by: Xin Ouyang <Xin.Ouyang@windriver.com>
---
 include/linux/vga_switcheroo.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/vga_switcheroo.h b/include/linux/vga_switcheroo.h
index 3c54ebc..b5f4ed7 100644
--- a/include/linux/vga_switcheroo.h
+++ b/include/linux/vga_switcheroo.h
@@ -28,6 +28,7 @@ struct vga_switcheroo_handler {
 	int (*get_client_id)(struct pci_dev *pdev);
 };
 
+#define VGA_SWITCHEROO_CLIENT_OPS	1
 struct vga_switcheroo_client_ops {
 	void (*set_gpu_state)(struct pci_dev *dev, enum vga_switcheroo_state);
 	void (*reprobe)(struct pci_dev *dev);
-- 
1.7.5.4

