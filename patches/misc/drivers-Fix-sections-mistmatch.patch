From 64168668b1ae0e6aa089da817ad2cf6d9ecf15bd Mon Sep 17 00:00:00 2001
From: Michal Simek <monstr@monstr.eu>
Date: Fri, 12 Oct 2012 14:32:28 +0200
Subject: [PATCH 216/628] drivers: Fix sections mistmatch

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 3a3384d5aaf3d79e0687e406b660d8bac6431e0e

Just define proper sections.

Signed-off-by: Michal Simek <monstr@monstr.eu>
[cherry picked the xilinx qspi driver modification only]
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/spi/spi-xilinx-qps.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/spi/spi-xilinx-qps.c b/drivers/spi/spi-xilinx-qps.c
index 1a06ab1..97f33cf 100644
--- a/drivers/spi/spi-xilinx-qps.c
+++ b/drivers/spi/spi-xilinx-qps.c
@@ -581,7 +581,7 @@ static irqreturn_t xqspips_irq(int irq, void *dev_id)
  *
  * returns:	Number of bytes transferred in the last transfer
  **/
-static int xqspips_start_transfer(struct spi_device *qspi,
+static int __devinit xqspips_start_transfer(struct spi_device *qspi,
 			struct spi_transfer *transfer)
 {
 	struct xqspips *xqspi = spi_master_get_devdata(qspi->master);
@@ -680,7 +680,7 @@ xfer_data:
  * xqspips_work_queue - Get the request from queue to perform transfers
  * @work:	Pointer to the work_struct structure
  **/
-static void xqspips_work_queue(struct work_struct *work)
+static void __devinit xqspips_work_queue(struct work_struct *work)
 {
 	struct xqspips *xqspi = container_of(work, struct xqspips, work);
 	unsigned long flags;
-- 
1.7.5.4

