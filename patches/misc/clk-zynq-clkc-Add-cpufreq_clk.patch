From 08646717da1f106ca58bdaedc4bf37a9e38acd32 Mon Sep 17 00:00:00 2001
From: Liming Wang <liming.wang@windriver.com>
Date: Fri, 21 Mar 2014 18:01:11 +0800
Subject: [PATCH 025/628] clk/zynq/clkc: Add cpufreq_clk

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 3ec2f90889767f61924985ee8004c16bfb84a6cb

Split the code from above commit.

Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/clk/zynq/clkc.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/clk/zynq/clkc.c b/drivers/clk/zynq/clkc.c
index a544bc0..139d3ca 100644
--- a/drivers/clk/zynq/clkc.c
+++ b/drivers/clk/zynq/clkc.c
@@ -321,6 +321,7 @@ static void __init zynq_clk_setup(struct device_node *np)
 	clks[cpu_6or4x] = clk_register_gate(NULL, clk_output_name[cpu_6or4x],
 			"cpu_div", CLK_SET_RATE_PARENT | CLK_IGNORE_UNUSED,
 			SLCR_ARM_CLK_CTRL, 24, 0, &armclk_lock);
+	clk_register_clkdev(clks[cpu_6or4x], "cpufreq_clk", NULL);
 
 	clk = clk_register_fixed_factor(NULL, "cpu_3or2x_div", "cpu_div", 0,
 			1, 2);
-- 
1.7.5.4

