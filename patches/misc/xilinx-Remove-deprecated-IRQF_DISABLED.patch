From ede61221881713e27a656caefd6711ba75e133a5 Mon Sep 17 00:00:00 2001
From: Michal Simek <michal.simek@xilinx.com>
Date: Tue, 20 Aug 2013 16:47:58 +0200
Subject: [PATCH 544/628] xilinx: Remove deprecated IRQF_DISABLED

git://github.com/Xilinx/linux-xlnx.git xilinx-v14.7
commit 0bc95b3f521a7429e94fb9f2c954acc877fb5138

Removed IRQF_DISABLED as it's no-op and should be removed.

Signed-off-by: Michal Simek <michal.simek@xilinx.com>
Signed-off-by: Liming Wang <liming.wang@windriver.com>
---
 drivers/usb/host/ehci-xilinx-usbps.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/usb/host/ehci-xilinx-usbps.c b/drivers/usb/host/ehci-xilinx-usbps.c
index da9203a..4904374 100644
--- a/drivers/usb/host/ehci-xilinx-usbps.c
+++ b/drivers/usb/host/ehci-xilinx-usbps.c
@@ -79,7 +79,7 @@ static int ehci_xusbps_otg_start_host(struct usb_phy *otg)
 	struct xusbps_otg *xotg =
 			xceiv_to_xotg(hcd->phy);
 
-	usb_add_hcd(hcd, xotg->irq, IRQF_SHARED | IRQF_DISABLED);
+	usb_add_hcd(hcd, xotg->irq, IRQF_SHARED);
 	return 0;
 }
 
@@ -213,7 +213,7 @@ static int usb_hcd_xusbps_probe(const struct hc_driver *driver,
 		/* inform otg driver about host driver */
 		xusbps_update_transceiver();
 	} else {
-		retval = usb_add_hcd(hcd, irq, IRQF_DISABLED | IRQF_SHARED);
+		retval = usb_add_hcd(hcd, irq, IRQF_SHARED);
 		if (retval)
 			goto err_out_clk_unreg_notif;
 
@@ -226,7 +226,7 @@ static int usb_hcd_xusbps_probe(const struct hc_driver *driver,
 	}
 #else
 	/* Don't need to set host mode here. It will be done by tdi_reset() */
-	retval = usb_add_hcd(hcd, irq, IRQF_DISABLED | IRQF_SHARED);
+	retval = usb_add_hcd(hcd, irq, IRQF_SHARED);
 	if (retval)
 		goto err_out_clk_unreg_notif;
 #endif
-- 
1.7.5.4

