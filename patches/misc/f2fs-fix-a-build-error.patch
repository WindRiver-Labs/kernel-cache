From a5a102d640f2c1b997d83f9324cf46c11475a347 Mon Sep 17 00:00:00 2001
From: Jibin Xu <jibin.xu@windriver.com>
Date: Fri, 31 Aug 2018 14:19:58 +0800
Subject: [PATCH] f2fs: fix a build error

When build kernel with f2fs be enabled, it will print
error messages as below:
"error: 'struct bio' has no member named 'bi_sector'".

The reason is 5b7f13ce372e backport a patch, but it is
incomplete, so complete it to fix the build error.

Signed-off-by: Jibin Xu <jibin.xu@windriver.com>
---
 fs/f2fs/segment.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/fs/f2fs/segment.c b/fs/f2fs/segment.c
index d8e84e4..c034126 100644
--- a/fs/f2fs/segment.c
+++ b/fs/f2fs/segment.c
@@ -735,7 +735,7 @@ static void submit_write_page(struct f2fs_sb_info *sbi, struct page *page,
 alloc_new:
 	if (sbi->bio[type] == NULL) {
 		sbi->bio[type] = f2fs_bio_alloc(bdev, max_hw_blocks(sbi));
-		sbi->bio[type]->bi_sector = SECTOR_FROM_BLOCK(sbi, blk_addr);
+		sbi->bio[type]->bi_iter.bi_sector = SECTOR_FROM_BLOCK(sbi, blk_addr);
 		/*
 		 * The end_io will be assigned at the sumbission phase.
 		 * Until then, let bio_add_page() merge consecutive IOs as much
-- 
1.7.9.5

