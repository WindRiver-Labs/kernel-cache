# rcu / Isolation / NOHZ changes.  Target via feature merge granularity.
#
# Note: this file is meant to be read top down in terms of time progression,
# such that the most recent changes are at the bottom, and the earliest
# changes needing backport to 3.4 are at the top.
#
# Sorting order is mandated by the merge commmits that brought the changes
# to mainline.
#
# Dont forget that rcN~1000 is _older_ than rcN~500, since we count backwards
# from rcN, i.e. the rcN tag is equal to rcN~0.
# -------------------------------------------------------------------------

######################## 3.11 ######################

# v3.11-rc1~146^2^2^5~2 --- v3.10-rc5-16-g7807acd
patch rcu-Remove-TINY_PREEMPT_RCU-tracing-documentation.patch
# v3.11-rc1~146^2^2^4~1 --- v3.10-rc5-6-g99f8891
patch rcu-Remove-srcu_read_lock_raw-and-srcu_read_unlock_r.patch
# v3.11-rc1~146^2^2~10 --- v3.10-rc5-4-gd7f3e20
patch rcu-Convert-rcutree.c-printk-calls.patch
# v3.11-rc1~146^2^2~8 --- v3.10-rc5-6-g6eaef63
patch rcu-Move-code-to-apply-callback-numbering-simplifica.patch
# v3.11-rc1~146^2^2~7 --- v3.10-rc5-7-g398ebe6
patch rcu-Make-__note_new_gpnum-check-for-ends-of-prior-gr.patch
# v3.11-rc1~146^2^2~6 --- v3.10-rc5-8-gd34ea32
patch rcu-Rename-note_new_gpnum-to-note_gp_changes.patch
# v3.11-rc1~146^2^2~9 --- v3.10-rc5-5-gefc151c
patch rcu-Convert-rcutree_plugin.h-printk-calls.patch
# v3.11-rc1~146^2^2~5 --- v3.10-rc5-9-g470716f
patch rcu-Switch-callers-from-rcu_process_gp_end-to-note_g.patch
# v3.11-rc1~146^2^2~4 --- v3.10-rc5-10-gba9fbe9
patch rcu-Merge-__rcu_process_gp_end-into-__note_gp_change.patch
# v3.11-rc1~146^2^2~3 --- v3.10-rc5-11-g63274cf
patch rcu-Eliminate-check_for_new_grace_period-wrapper-fun.patch
# v3.11-rc1~146^2^2~2 --- v3.10-rc5-12-gce3d9c0
patch rcu-Inline-trivial-wrapper-function-rcu_start_gp_per.patch
# v3.11-rc1~146^2^2~1 --- v3.10-rc5-13-g05eb552
patch rcu-Move-redundant-call-to-note_gp_changes-into-call.patch
# v3.11-rc1~146^2^2^3~3 --- v3.10-rc5-6-g9a5739d
patch rcu-Remove-Experimental-flags.patch
# v3.11-rc1~146^2^2^3~1 --- v3.10-rc5-8-g4982969
patch rcu-Merge-adjacent-identical-ifdefs.patch
# v3.11-rc1~146^2^2^5~12 --- v3.10-rc5-6-g127781d
patch rcu-Remove-TINY_PREEMPT_RCU.patch
# v3.11-rc1~146^2^2^5~11 --- v3.10-rc5-7-g221304e
patch rcu-Remove-show_tiny_preempt_stats.patch
# v3.11-rc1~146^2^2^5~10 --- v3.10-rc5-8-g9acaac8
patch rcu-Remove-rcu_preempt_check_callbacks.patch
# v3.11-rc1~146^2^2^5~9 --- v3.10-rc5-9-g47d6593
patch rcu-Remove-rcu_preempt_remove_callbacks.patch
# v3.11-rc1~146^2^2^5~8 --- v3.10-rc5-10-g58c4e69
patch rcu-Remove-rcu_preempt_process_callbacks.patch
# v3.11-rc1~146^2^2^5~7 --- v3.10-rc5-11-g9dc5ad3
patch rcu-Simplify-RCU_TINY-RCU-callback-invocation.patch
# v3.11-rc1~146^2^2^5~6 --- v3.10-rc5-12-g4879c84
patch rcu-Remove-check_cpu_stall_preempt.patch
# v3.11-rc1~146^2^2^5~5 --- v3.10-rc5-13-g57f1801
patch rcu-Remove-the-CONFIG_TINY_RCU-ifdefs-in-rcutiny.h.patch
# v3.11-rc1~146^2^2^5~4 --- v3.10-rc5-14-gfa2b3b0
patch rcu-Remove-rcu_preempt_note_context_switch.patch
# v3.11-rc1~146^2^2^5~3 --- v3.10-rc5-15-g318bdcd
patch rcu-Consolidate-rcutiny_plugin.h-ifdefs.patch
# v3.11-rc1~146^2^2^5~1 --- v3.10-rc5-17-g2439b69
patch rcu-Shrink-TINY_RCU-by-moving-exit_rcu.patch
# v3.11-rc1~146^2^2^5 --- v3.10-rc5-18-g1496144
patch rcu-Shrink-TINY_RCU-by-reworking-CPU-stall-ifdefs.patch

# v3.11-rc1~146^2^2^2~2 --- v3.10-rc5-6-g295fde8
patch nohz_full-Update-based-on-Sedat-Dilek-review.patch
# v3.11-rc1~146^2^2^2~1 --- v3.10-rc5-7-gce5f4fc
patch nohz_full-Document-additional-restrictions.patch
# v3.11-rc1~146^2^2^2 -- v3.10-rc5-8-gf7bac9b
patch kthread-Add-kworker-kthreads-to-OS-jitter-documentat.patch
# v3.11-rc1~146^2^2^3~2 -- v3.10-rc5-7-g026ad28
patch rcu-Drive-quiescent-state-forcing-delay-from-HZ.patch

# v3.11-rc1~89^2~34 -- v3.9-rc2-74-gb965162
patch rcu-Fix-Documentation-typo-CONFIG_RCU_NOCB_CPUS.patch

# not mainline, just cleanups created internally
# comment out for now ; largely cosmetic anyway.
# patch nohz-print-out-actual-name-of-softirq-pending.patch
# patch nohz-add-cpu-number-to-softirq-pending-message.patch

# fixes that were needed when nohz backports are run in 3.4-rt context
#patch cputime-convert-vtime-seqlock-to-raw-spinlock.patch
#patch cputime-take-irq-lock-in-task_gtime-and-fetch_task_c.patch

# v3.11-rc1~9^2~3^2~4 -- v3.10-rc6-1-ge12d027
patch nohz-Warn-if-the-machine-can-not-perform-nohz_full.patch
# v3.11-rc1~9^2~3^2~1 -- v3.10-rc6-4-g940be35
patch watchdog-Boot-disable-by-default-on-full-dynticks.patch
# v3.11-rc1~9^2~3^2 -- v3.10-rc6-5-g5b8621a
patch nohz-Remove-obsolete-check-for-full-dynticks-CPUs-to.patch

# v3.11-rc7~28^2~1^2~1 -- v3.11-rc2-1-g543487c
patch nohz-Do-not-warn-about-unstable-tsc-unless-user-uses.patch
# v3.11-rc7~28^2~1^2 -- v3.11-rc2-2-gca06416
patch nohz-fix-compile-warning-in-tick_nohz_init.patch
# v3.11-rc7~28^2^2 --- v3.10-9301-g53c0352 (we don't have prereq's)
#patch sched_clock-Fix-integer-overflow.patch

######################## 3.12 ######################

patch tracing-Add-__tracepoint_string-to-export-string-poi.patch
# v3.12-rc1~170^2^2~6 --- v3.11-rc2-2-ge66c33d
patch rcu-Add-const-annotation-to-char-for-RCU-tracepoints.patch
# v3.12-rc1~170^2^2~5 --- v3.11-rc2-3-ga41bfeb
patch rcu-Simplify-RCU_STATE_INITIALIZER-macro.patch
# v3.12-rc1~170^2^2~4 --- v3.11-rc2-4-gf7f7bac
patch rcu-Have-the-RCU-tracepoints-use-the-tracepoint_stri.patch
# v3.12-rc1~170^2^2~3 --- v3.11-rc2-5-gd84297c
patch rcu-Fix-rcu_barrier-documentation.patch
# v3.12-rc1~170^2^2~2 --- v3.11-rc2-6-g6ae3771
patch rcu-Update-RTFP-documentation.patch
# v3.12-rc1~170^2^2~1 --- v3.11-rc2-7-g45c8a36
patch doc-Fix-memory-barrier-control-dependency-example.patch
# v3.12-rc1~170^2^2^2~8 --- v3.11-rc2-5-gd1d74d1
patch rcu-Expedite-grace-periods-during-suspend-resume.patch
# v3.12-rc1~170^2^2^2~7 --- v3.11-rc2-6-g15100df
patch rcu-Simplify-debug-objects-fixups.patch
# v3.12-rc1~170^2^2^2~6 --- v3.11-rc2-7-gb778ae2
patch debugobjects-Make-debug_object_activate-return-statu.patch
# v3.12-rc1~170^2^2^2~5 --- v3.11-rc2-8-gae15018
patch rcu-Make-call_rcu-leak-callbacks-for-debug-object-er.patch
# v3.12-rc1~170^2^2^2~4 --- v3.11-rc2-9-g1eafd31
patch rcu-Avoid-redundant-grace-period-kthread-wakeups.patch
# v3.12-rc1~170^2^2^2~3 --- v3.11-rc2-10-gc34ac00 (in stable)
#patch rculist-list_first_or_null_rcu-should-use-list_entry.patch
# v3.12-rc1~170^2^2^2~2 --- v3.11-rc2-11-g5361471
patch rcu-Select-IRQ_WORK-from-TREE_PREEMPT_RCU.patch
# v3.12-rc1~170^2^2^2~1 --- v3.11-rc2-12-g458fb38
patch rcu-Simplify-_rcu_barrier-processing.patch
# v3.12-rc1~170^2^2^2 --- v3.11-rc2-13-g5a581b3 - now in stable
# patch jiffies-Avoid-undefined-behavior-from-signed-overflo.patch
# v3.12-rc1~170^2^2^3~8 --- v3.11-rc2-5-gfeed66e
patch rcu-Eliminate-unused-APIs-intended-for-adaptive-tick.patch
# v3.12-rc1~170^2^2^3~7 --- v3.11-rc2-6-g8bdf7a2
patch nohz_full-Add-testing-information-to-documentation.patch
# v3.12-rc1~170^2^2^3~6 --- v3.11-rc2-7-gb44379a
patch nohz_full-Add-Kconfig-parameter-for-scalable-detecti.patch
# v3.12-rc1~170^2^2^3~5 --- v3.11-rc2-8-g2333210
patch nohz_full-Add-rcu_dyntick-data-for-scalable-detectio.patch
# v3.12-rc1~170^2^2^3~4 --- v3.11-rc2-9-geb348b8
patch nohz_full-Add-per-CPU-idle-state-tracking.patch
# v3.12-rc1~170^2^2^3~3 --- v3.11-rc2-10-gd4bd54f
patch nohz_full-Add-full-system-idle-states-and-variables.patch
# v3.12-rc1~170^2^2^3~2 --- v3.11-rc2-11-g217af2a
patch nohz_full-Add-full-system-idle-arguments-to-API.patch
# v3.12-rc1~170^2^2^3~1 --- v3.11-rc2-12-g0edd1b1
patch nohz_full-Add-full-system-idle-state-machine.patch
# v3.12-rc1~170^2^2^3 --- v3.11-rc2-13-geb75767
patch nohz_full-Force-RCU-s-grace-period-kthreads-onto-tim.patch
# v3.12-rc1~170^2^2^4~4 --- v3.11-rc2-5-gd2818df
patch rcu-Add-duplicate-callback-tests-to-rcutorture.patch
# v3.12-rc1~170^2^2^4~3 --- v3.11-rc2-6-g2ec1f2d
patch rcu-Increase-rcutorture-test-coverage.patch
# v3.12-rc1~170^2^2^4~2 --- v3.11-rc2-7-gd10453e
patch rcu-Sort-rcutorture-module-parameters.patch
# v3.12-rc1~170^2^2^4~1 --- v3.11-rc2-8-gef47db8
patch rcu-Remove-unused-variable-from-rcu_torture_writer.patch
# v3.12-rc1~170^2^2^4 --- v3.11-rc2-9-g7a6a410
patch rcu-Make-rcutorture-emit-online-failures-if-verbose.patch

# v3.12-rc1~79^2 --- v3.11-rc3-25-ga0a5a05
patch ftrace-rcu-Do-not-trace-debug_lockdep_rcu_enabled.patch

#
# Merge branch 'timers/nohz-v3' of git://git.kernel.org/pub/scm/linux/kernel/git/frederic/linux-dynticks into timers/nohz
# v3.12-rc2~21^2~3
#
# v3.12-rc2~21^2~3^2~22 --- v3.11-rc2-99-gfbb00b5
patch sched-Consolidate-open-coded-preemptible-checks.patch
# v3.12-rc2~21^2~3^2~21 --- v3.11-rc2-100-g2d854e5
patch context_tracing-Fix-guest-accounting-with-native-vti.patch
# v3.12-rc2~21^2~3^2~20 --- v3.11-rc2-101-g5b206d4
patch vtime-Update-a-few-comments.patch
# v3.12-rc2~21^2~3^2~19 --- v3.11-rc2-102-gd65ec12
patch context_tracking-Fix-runtime-CPU-off-case.patch
# v3.12-rc2~21^2~3^2~18 --- v3.11-rc2-103-g2e70933
patch nohz-Only-enable-context-tracking-on-full-dynticks-C.patch
# v3.12-rc2~21^2~3^2~17 --- v3.11-rc2-104-gd84d27a
patch context_tracking-Remove-full-dynticks-hacky-dependen.patch
# v3.12-rc2~21^2~3^2~16 --- v3.11-rc2-105-g65f382f
patch context_tracking-Ground-setup-for-static-key-use.patch
# v3.12-rc2~21^2~3^2~15 --- v3.11-rc2-106-gad65782
patch context_tracking-Optimize-main-APIs-off-case-with-st.patch
# v3.12-rc2~21^2~3^2~14 --- v3.11-rc2-107-g48d6a81
patch context_tracking-Optimize-guest-APIs-off-case-with-s.patch
# v3.12-rc2~21^2~3^2~13 --- v3.11-rc2-108-g73d424f
patch context_tracking-Optimize-context-switch-off-case-wi.patch
# v3.12-rc2~21^2~3^2~12 --- v3.11-rc2-109-g1b6a259
patch context_tracking-User-kernel-broundary-cross-trace-e.patch
# v3.12-rc2~21^2~3^2~11 --- v3.11-rc2-110-g7621d1f
patch vtime-Remove-a-few-unneeded-generic-vtime-state-chec.patch
# v3.12-rc2~21^2~3^2~10 --- v3.11-rc2-111-g5446156
patch vtime-Fix-racy-cputime-delta-update.patch
# v3.12-rc2~21^2~3^2~9 --- v3.11-rc2-112-ge7358b3
patch context_tracking-Split-low-level-state-headers.patch
# v3.12-rc2~21^2~3^2~8 --- v3.11-rc2-113-g2d4b847
patch hardirq-Split-preempt-count-mask-definitions.patch
# v3.12-rc2~21^2~3^2~7 --- v3.11-rc2-114-ga703f9b
patch m68k-hardirq_count-only-need-preempt_mask.h.patch
# v3.12-rc2~21^2~3^2~6 --- v3.11-rc2-115-ga5725ac
patch vtime-Describe-overriden-functions-in-dedicated-arch.patch
# v3.12-rc2~21^2~3^2~5 --- v3.11-rc2-116-gb049340
patch vtime-Optimize-full-dynticks-accounting-off-case-wit.patch
# v3.12-rc2~21^2~3^2~4 --- v3.11-rc2-117-gb854faf
patch vtime-Always-scale-generic-vtime-accounting-results.patch
# v3.12-rc2~21^2~3^2~3 --- v3.11-rc2-118-gaf2350b
patch vtime-Always-debug-check-snapshot-source-_before_-up.patch
# v3.12-rc2~21^2~3^2~2 --- v3.11-rc2-119-g73867dc
patch nohz-Rename-a-few-state-variables.patch
# v3.12-rc2~21^2~3^2~1 --- v3.11-rc2-120-g460775d
patch nohz-Optimize-full-dynticks-state-checks-with-static.patch
# v3.12-rc2~21^2~3^2 --- v3.11-rc2-121-gd13508f
patch nohz-Optimize-full-dynticks-s-sched-hooks-with-stati.patch

patch nohz-Include-local-CPU-in-full-dynticks-global-kick.patch
# v3.12-rc2~21^2~2 --- v3.11-rc5-30-gc2e7fcf



######################## 3.13 ######################

# v3.13-rc1~152^2^2~6 -- v3.12-rc1-1-g64d3b7a1d528
patch rcu-Update-stall-warning-documentation.patch
# v3.13-rc1~152^2^2~5 -- v3.12-rc1-2-g64f26e5c86af
patch kthread-Add-pointer-to-vmstat-avoidance-patch.patch
# v3.13-rc1~152^2^2~4 -- v3.12-rc1-3-g4b0d3f0fde41
patch rcu-Fix-occurrence-of-the-the-in-checklist.txt.patch

# v3.13-rc1~152^2^2~3^2~10 -- v3.12-rc1-1-g5c889690aa08
patch mm-Place-preemption-point-in-do_mlockall-loop.patch
# v3.13-rc1~152^2^2~3^2~9 -- v3.12-rc1-2-gb3f2d02598fc
patch rcu-Use-proper-cpp-macro-for-gp_flags.patch
# v3.13-rc1~152^2^2~3^2~8 -- v3.12-rc1-3-g01896f7e0a12
patch rcu-Convert-local-functions-to-static.patch
# v3.13-rc1~152^2^2~3^2~7 -- v3.12-rc1-4-g829511d8aa7a
patch rcu-Fix-dubious-if-condition-in-__call_rcu_nocb_enqu.patch
# v3.13-rc1~152^2^2~3^2~6 -- v3.12-rc1-5-g2a855b644c31
patch rcu-Make-list_splice_init_rcu-account-for-RCU-reader.patch
# v3.13-rc1~152^2^2~3^2~5 -- v3.12-rc1-6-gc9d4b0af9e06
patch rcu-Replace-__get_cpu_var-uses.patch
# v3.13-rc1~152^2^2~3^2~4 -- v3.12-rc1-7-g289828e62de0
patch rcu-Silence-unused-variable-warnings.patch
# v3.13-rc1~152^2^2~3^2~3 -- v3.12-rc1-8-g69c8d28c9644
patch rcu-Micro-optimize-rcu_cpu_has_callbacks.patch
# v3.13-rc1~152^2^2~3^2~2 -- v3.12-rc1-9-g26cdfedf6a90
patch rcu-Reject-memory-order-induced-stall-warning-false-.patch
# v3.13-rc1~152^2^2~3^2~1 -- v3.12-rc1-10-g0d75292467b0
patch rcu-Have-rcutiny-tracepoints-use-tracepoint_string.patch
# v3.13-rc1~152^2^2~3^2 -- v3.12-rc1-11-g5d5a08003d3e
patch rcu-Fix-CONFIG_RCU_NOCB_CPU_ALL-panic-on-machines-wi.patch

# v3.13-rc1~152^2^2~2^2~8 -- v3.12-rc1-1-gf7be82093952
patch rcu-Improve-grace-period-start-logic.patch
# v3.13-rc1~152^2^2~2^2~7 -- v3.12-rc1-2-g88d6df612cc3
patch rcu-Prevent-spurious-wakeup-DoS-attack-on-rcu_gp_kth.patch
# v3.13-rc1~152^2^2~2^2~6 -- v3.12-rc1-3-g591c6d1710cd
patch rcu-Flag-lockless-access-to-gp_flags-with-ACCESS_ONC.patch
# v3.13-rc1~152^2^2~2^2~5 -- v3.12-rc1-4-g63c4db78e804
patch rcu-Add-tracing-to-rcu_gp_kthread.patch
# v3.13-rc1~152^2^2~2^2~4 -- v3.12-rc1-5-gbb311eccbdab
patch rcu-Add-tracing-of-normal-non-NOCB-grace-period-requ.patch
# v3.13-rc1~152^2^2~2^2~3 -- v3.12-rc1-6-g9261dd0da6c6
patch rcu-Add-tracing-for-rcuo-no-CBs-CPU-wakeup-handshake.patch
# v3.13-rc1~152^2^2~2^2~2 -- v3.12-rc1-7-g756cbf6befe6
patch rcu-Distinguish-between-NOCB-and-non-NOCB-rcu_callba.patch
# v3.13-rc1~152^2^2~2^2~1 -- v3.12-rc1-8-g69a79bb12a81
patch rcu-Track-rcu_nocb_kthread-s-sleeping-and-awakening.patch
# v3.13-rc1~152^2^2~2^2 -- v3.12-rc1-9-g15f5191b6acb
patch rcu-Avoid-sparse-warnings-in-rcu_nocb_wake-trace-eve.patch

# v3.13-rc1~57^2~12^2~5 -- v3.12-rc1-1-g7a497c963ece
patch rcu-Remove-redundant-code-from-rcu_cleanup_after_idl.patch
# v3.13-rc1~57^2~12^2~4 -- v3.12-rc1-2-gc229828ca6bc
patch rcu-Throttle-rcu_try_advance_all_cbs-execution.patch
# v3.13-rc1~57^2~12^2~3 -- v3.12-rc1-3-gc337f8f58ed7
patch rcu-Throttle-invoke_rcu_core-invocations-due-to-non-.patch
# v3.13-rc1~57^2~12^2~2 -- v3.12-rc1-4-gcc6783f788d8
patch rcu-Is-it-safe-to-enter-an-RCU-read-side-critical-se.patch
# v3.13-rc1~57^2~12^2~1 -- v3.12-rc1-5-gf9ffc31ebd38
patch rcu-Change-EXPORT_SYMBOL-to-EXPORT_SYMBOL_GPL.patch
# v3.13-rc1~57^2~12^2 -- v3.12-rc1-6-g5c173eb8bcb9
patch rcu-Consistent-rcu_is_watching-naming.patch

# Ugh.  Do we take this for ease of future patching?
# v3.13-rc1~152^2^2 -- v3.12-rc1-33-g4102adab9189
#patch rcu-Move-RCU-related-source-code-to-kernel-rcu-direc.patch

# v3.13-rc3~20^2~5
patch NOHZ-Check-for-nohz-active-instead-of-nohz-enabled.patch
# v3.13-rc3~20^2
patch nohz-Fix-another-inconsistency-between-CONFIG_NO_HZ-.patch

# v3.14-rc1~174^2^2^2~14
patch rcu-Kick-CPU-halfway-to-RCU-CPU-stall-warning.patch

# misc
patch softirq-notify-when-masking-messages.patch
