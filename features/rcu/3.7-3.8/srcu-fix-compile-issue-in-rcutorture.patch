From 73dc523ce7c3945dcbce8455ecd20eadf9606b5c Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 30 Apr 2013 10:54:39 -0400
Subject: [PATCH] srcu: fix compile issue in rcutorture

Our cherry pick of mainline commit 55c6659afaa6

    "srcu: Add DEFINE_SRCU()"

causes a compile failure in rcutorture, due to the added
argument to __DELAYED_WORK_INITIALIZER macro.  Since it is
clear from the paulmck addendum to the commit log that the
original was created w/o the extra arg (and hence the flags
arg is zero) we simply revert it back to using the two arg
format which is the default prior to mainline f991b318c.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/include/linux/srcu.h b/include/linux/srcu.h
index 04f4121..3dd9d0a 100644
--- a/include/linux/srcu.h
+++ b/include/linux/srcu.h
@@ -94,7 +94,7 @@ void process_srcu(struct work_struct *work);
 		.batch_check0 = RCU_BATCH_INIT(name.batch_check0),	\
 		.batch_check1 = RCU_BATCH_INIT(name.batch_check1),	\
 		.batch_done = RCU_BATCH_INIT(name.batch_done),		\
-		.work = __DELAYED_WORK_INITIALIZER(name.work, process_srcu, 0),\
+		.work = __DELAYED_WORK_INITIALIZER(name.work, process_srcu),\
 		__SRCU_DEP_MAP_INIT(name)				\
 	}
 
-- 
1.8.1.2

