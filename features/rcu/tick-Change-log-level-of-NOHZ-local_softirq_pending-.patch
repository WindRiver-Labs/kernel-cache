From 3ba286c8db7d455a3fd1153c44f4428d7adee330 Mon Sep 17 00:00:00 2001
From: Rado Vrbovsky <rvrbovsk@redhat.com>
Date: Fri, 8 Feb 2013 12:37:30 -0500
Subject: [PATCH] tick: Change log level of NOHZ: local_softirq_pending message

commit cfea7d7e452f57682a0bb55a55e9f79c569558c2 upstream.

The "NOHZ: local_softirq_pending" message is a largely informational
message.  This makes extra work for customers that have a policy of
investigating all kernel log messages logged at <= KERN_ERR log level.
This patch sets the message to a different log level.

[ tglx: Use pr_warn() ]

Signed-off-by: Rado Vrbovsky <rvrbovsk@redhat.com>
Cc: Don Zickus <dzickus@redhat.com>
Link: http://lkml.kernel.org/r/2037057938.893524.1360345050772.JavaMail.root@redhat.com
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/kernel/time/tick-sched.c b/kernel/time/tick-sched.c
index c8dae8e..8c64af6 100644
--- a/kernel/time/tick-sched.c
+++ b/kernel/time/tick-sched.c
@@ -733,8 +733,8 @@ static bool can_stop_idle_tick(int cpu, struct tick_sched *ts)
 		static int ratelimit;
 
 		if (ratelimit < 10) {
-			printk(KERN_ERR "NOHZ: local_softirq_pending %02x\n",
-			       (unsigned int) local_softirq_pending());
+			pr_warn("NOHZ: local_softirq_pending %02x\n",
+				(unsigned int) local_softirq_pending());
 			ratelimit++;
 		}
 		return false;
-- 
1.8.1.2

