From 2c7561f1bdd927bf802f532c2170b2375acba292 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 21 May 2013 18:21:50 -0400
Subject: [PATCH] nohz: add cpu number to softirq pending message

With the ability to specify cores as nohz cores, and as RCU
offload cores, it will be useful to know which core(s) the
warnings are coming from.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/kernel/time/tick-sched.c b/kernel/time/tick-sched.c
index 360619e..71f99ad 100644
--- a/kernel/time/tick-sched.c
+++ b/kernel/time/tick-sched.c
@@ -737,7 +737,8 @@ static bool can_stop_idle_tick(int cpu, struct tick_sched *ts)
 			u32 vec_nr;
 			u32 bits = local_softirq_pending();
 
-			pr_warn("NOHZ: local_softirq_pending (%02x)", bits);
+			pr_warn("NOHZ: local_softirq_pending (cpu=%d, vec=0x%02x)",
+				cpu, bits);
 			for (vec_nr = 0; bits; vec_nr++, bits >>= 1)
 				if (bits & 1)
 					printk(" %s", softirq_to_name[vec_nr]);
-- 
1.8.3.1

