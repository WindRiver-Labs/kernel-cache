From 9b0510744ef362b31bda8f37920fade70e1d1e57 Mon Sep 17 00:00:00 2001
From: huoysh <huoysh@artekmicro.com>
Date: Tue, 15 Dec 2015 10:31:01 +0800
Subject: [PATCH 38/62] usb3.0: BUGFIX: BUG00439873 some hardisk can't enum
 after reset vbus; add 200ms delay for vbus reset when
 start controller

commit d614d94db29939825490dada77e5384d137c6e17 from
https://github.com/xapp-le/kernel.git

Change-Id: Ib6d8bbeb160a6b3559c9225085272229a5b2054c
---
 drivers/usb/host/xhci_ss_retry_mode.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/host/xhci_ss_retry_mode.c b/drivers/usb/host/xhci_ss_retry_mode.c
index 42ff795..0f131cc 100755
--- a/drivers/usb/host/xhci_ss_retry_mode.c
+++ b/drivers/usb/host/xhci_ss_retry_mode.c
@@ -152,11 +152,11 @@ void ss_retry_mode(void __iomem *base)
 	mdelay(5);
     	ss_mac_sample_edge_init(base ); 
 	ss_try_next_mode(base);	
-	mdelay(5);
+	mdelay(200);
     
 	usb_set_vbus_power(1);
     
-	mdelay(1);
+	mdelay(5);
     
     	val = 0x200;
 	writel(val,base+XHCI_PORT2_STATUS);	
-- 
1.7.5.4

