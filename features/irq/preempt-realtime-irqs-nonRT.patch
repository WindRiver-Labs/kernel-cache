Index: linux-2.6.26.8-rt12/kernel/irq/handle.c
===================================================================
--- linux-2.6.26.8-rt12.orig/kernel/irq/handle.c	2008-12-19 23:28:44.000000000 -0500
+++ linux-2.6.26.8-rt12/kernel/irq/handle.c	2008-12-19 23:29:28.000000000 -0500
@@ -248,6 +249,13 @@ unsigned int __do_IRQ(unsigned int irq)
 		desc->chip->end(irq);
 		return 1;
 	}
+	/*
+	 * If the task is currently running in user mode, don't
+	 * detect soft lockups.  If CONFIG_DETECT_SOFTLOCKUP is not
+	 * configured, this should be optimized out.
+	 */
+	if (user_mode(get_irq_regs()))
+		touch_softlockup_watchdog();
 
 	spin_lock(&desc->lock);
 	if (desc->chip->ack)
