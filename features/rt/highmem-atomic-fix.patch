From 0d85346a4a5fc6600ee703e70018921ca59d36ca Mon Sep 17 00:00:00 2001
From: Ingo Molnar <mingo@elte.hu>
Date: Fri, 3 Jul 2009 08:43:59 -0500
Subject: [PATCH] highmem: atomic fix

commit 819ab1a56373f040d347411ee311980f295449b7 in tip.

CHECKME: really bogus? triggers on !PREEMPT_RT + highmem, 32-bit.

Signed-off-by: Ingo Molnar <mingo@elte.hu>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 mm/filemap.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/mm/filemap.c b/mm/filemap.c
index 3760bdc..510b96d 100644
--- a/mm/filemap.c
+++ b/mm/filemap.c
@@ -1874,7 +1874,7 @@ size_t iov_iter_copy_from_user_atomic(struct page *page,
 	char *kaddr;
 	size_t copied;
 
-	BUG_ON(!in_atomic());
+//	BUG_ON(!in_atomic());
 	kaddr = kmap_atomic(page, KM_USER0);
 	if (likely(i->nr_segs == 1)) {
 		int left;
-- 
1.7.0.4

