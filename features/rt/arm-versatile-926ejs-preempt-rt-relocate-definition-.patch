From 4a1557b26cd847a6e7c42d83e56b2a2bc2793621 Mon Sep 17 00:00:00 2001
From: Michel Thebeau <michel.thebeau@windriver.com>
Date: Mon, 4 Mar 2013 12:50:11 -0500
Subject: [PATCH] arm-versatile-926ejs: preempt-rt: relocate definition of
 hrtimer_rt_defer()

kernel/hrtimer.c:1044:4: error: implicit declaration of function 'hrtimer_rt_defer
kernel/hrtimer.c:1406:12: error: static declaration of 'hrtimer_rt_defer' follows non-static declaration
kernel/hrtimer.c:1044:9: note: previous implicit declaration of 'hrtimer_rt_defer' was here

In kernel-cache commit 78feec1e049b3dd6c481b1a8d4abb800ccc0c8a0 we fixed
some merge breakage for preempt-rt in "kernel/hrtimer.c".  The buildall
found this additional problem for arm-versatile-926ejs-preempt-rt

hrtimer_rt_defer() is defined in an ifdef CONFIG_PREEMPT_RT_BASE block
and neutered in the #else.  So move the declaration of
hrtimer_rt_defer() out of the ifdef CONFIG_HIGH_RES_TIMERS block.

Signed-off-by: Michel Thebeau <michel.thebeau@windriver.com>
---
 kernel/hrtimer.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/kernel/hrtimer.c b/kernel/hrtimer.c
index 88ce52a..b0d236b 100644
--- a/kernel/hrtimer.c
+++ b/kernel/hrtimer.c
@@ -625,7 +625,6 @@ static int hrtimer_reprogram(struct hrtimer *timer,
 }
 
 static void __run_hrtimer(struct hrtimer *timer, ktime_t *now);
-static int hrtimer_rt_defer(struct hrtimer *timer);
 
 /*
  * Initialize the high resolution related parts of cpu_base
@@ -979,6 +978,7 @@ remove_hrtimer(struct hrtimer *timer, struct hrtimer_clock_base *base)
 	return 0;
 }
 
+static int hrtimer_rt_defer(struct hrtimer *timer);
 int __hrtimer_start_range_ns(struct hrtimer *timer, ktime_t tim,
 		unsigned long delta_ns, const enum hrtimer_mode mode,
 		int wakeup)
-- 
1.7.10.4

