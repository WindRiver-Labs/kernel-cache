From 49cbadd5461942b96544f4df0e78154efe858e55 Mon Sep 17 00:00:00 2001
From: Tsutomu OWA <tsutomu.owa@toshiba.co.jp>
Date: Fri, 5 Sep 2008 00:23:04 -0400
Subject: [PATCH] From tsutomu.owa@toshiba.co.jp Mon May 14 15:28:23 2007
 Date: Mon, 14 May 2007 15:28:23 +0900
 To: linuxppc-dev@ozlabs.org, linux-kernel@vger.kernel.org
 Cc: mingo@elte.hu, tglx@linutronix.de
 Subject: Re: [patch 2/4] powerpc 2.6.21-rt1: convert spinlocks to raw ones for Celleb.

Convert more spinlocks to raw ones for Celleb.

Signed-off-by: Tsutomu OWA <tsutomu.owa@toshiba.co.jp>
-- owa
---
 arch/powerpc/platforms/cell/beat_htab.c      |    2 +-
 arch/powerpc/platforms/cell/beat_interrupt.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/platforms/cell/beat_htab.c b/arch/powerpc/platforms/cell/beat_htab.c
index 2e67bd8..d246f4a 100644
--- a/arch/powerpc/platforms/cell/beat_htab.c
+++ b/arch/powerpc/platforms/cell/beat_htab.c
@@ -40,7 +40,7 @@
 #define DBG_LOW(fmt...) do { } while (0)
 #endif
 
-static DEFINE_SPINLOCK(beat_htab_lock);
+static DEFINE_RAW_SPINLOCK(beat_htab_lock);
 
 static inline unsigned int beat_read_mask(unsigned hpte_group)
 {
diff --git a/arch/powerpc/platforms/cell/beat_interrupt.c b/arch/powerpc/platforms/cell/beat_interrupt.c
index 192a935..5b637c5 100644
--- a/arch/powerpc/platforms/cell/beat_interrupt.c
+++ b/arch/powerpc/platforms/cell/beat_interrupt.c
@@ -30,7 +30,7 @@
 #include "beat_wrapper.h"
 
 #define	MAX_IRQS	NR_IRQS
-static DEFINE_SPINLOCK(beatic_irq_mask_lock);
+static DEFINE_RAW_SPINLOCK(beatic_irq_mask_lock);
 static uint64_t	beatic_irq_mask_enable[(MAX_IRQS+255)/64];
 static uint64_t	beatic_irq_mask_ack[(MAX_IRQS+255)/64];
 
-- 
1.6.0.90.g436ed

