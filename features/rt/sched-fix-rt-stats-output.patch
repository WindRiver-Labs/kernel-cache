From 897b4499cfcac5c1ccc9b03b62c445ac86a23c10 Mon Sep 17 00:00:00 2001
From: Ankita Garg <ankita@in.ibm.com>
Date: Fri, 3 Jul 2009 08:44:06 -0500
Subject: [PATCH] sched: fix rt stats output

commit 59f677c0026eb02599c06709ef71023d9334c747 in tip.

So, I have merged my previous patch (to display rt_nr_running info in
sched_debug.c) with this one.

Signed-off-by: Ankita Garg <ankita@in.ibm.com>
[mingo@elte.hu: fix it to work on !SCHEDSTATS too]
Signed-off-by: Ingo Molnar <mingo@elte.hu>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 kernel/sched_debug.c |   13 +++++++++++++
 1 files changed, 13 insertions(+), 0 deletions(-)

diff --git a/kernel/sched_debug.c b/kernel/sched_debug.c
index 19be00b..ea8c653 100644
--- a/kernel/sched_debug.c
+++ b/kernel/sched_debug.c
@@ -282,6 +282,19 @@ static void print_cpu(struct seq_file *m, int cpu)
 	P(cpu_load[2]);
 	P(cpu_load[3]);
 	P(cpu_load[4]);
+#ifdef CONFIG_PREEMPT_RT
+	/* Print rt related rq stats */
+	P(rt.rt_nr_running);
+	P(rt.rt_nr_uninterruptible);
+# ifdef CONFIG_SCHEDSTATS
+	P(rto_schedule);
+	P(rto_schedule_tail);
+	P(rto_wakeup);
+	P(rto_pulled);
+	P(rto_pushed);
+# endif
+#endif
+
 #undef P
 #undef PN
 
-- 
1.7.0.4

