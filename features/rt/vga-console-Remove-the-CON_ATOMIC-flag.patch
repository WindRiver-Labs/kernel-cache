From 808545f28a3d65fb7f410a50a6de02d6b475beaa Mon Sep 17 00:00:00 2001
From: Thomas Gleixner <tglx@linutronix.de>
Date: Wed, 10 Mar 2010 23:45:34 +0100
Subject: [PATCH] vga console: Remove the CON_ATOMIC flag

commit 4216e30a7199d574f98acc68fa1e08a2f8b7cc2a in tip.

vgacon_restore_screen() takes > 3ms in the worst case. !@#$%!

Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 drivers/char/vt.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/char/vt.c b/drivers/char/vt.c
index 223476e..a82d177 100644
--- a/drivers/char/vt.c
+++ b/drivers/char/vt.c
@@ -2571,7 +2571,7 @@ static struct console vt_console_driver = {
 	.write		= vt_console_print,
 	.device		= vt_console_device,
 	.unblank	= unblank_screen,
-	.flags		= CON_PRINTBUFFER | CON_ATOMIC,
+	.flags		= CON_PRINTBUFFER,
 	.index		= -1,
 };
 #endif
-- 
1.7.0.4

