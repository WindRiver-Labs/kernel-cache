From: rt-users <linux-rt-users@vger.kernel.org>  
Subject: Use TSC as ftrace clock

Use tsc as ftrace clock till we get all the sched_clock fixes in.

Import from the RT patch series of: frace-use-tsc.patch

---
 kernel/trace/trace.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/trace/trace.c b/kernel/trace/trace.c
index 8f3fb3d..c632066 100644
--- a/kernel/trace/trace.c
+++ b/kernel/trace/trace.c
@@ -60,7 +60,7 @@ ns2usecs(cycle_t nsec)
 
 cycle_t ftrace_now(int cpu)
 {
-	return cpu_clock(cpu);
+	return sched_clock();
 }
 
 /*
