From 7883219ebe82e8ac7f049efc1f9da5ec18108ab4 Mon Sep 17 00:00:00 2001
From: Steven Rostedt <srostedt@redhat.com>
Date: Fri, 5 Sep 2008 00:23:52 -0400
Subject: [PATCH] Limit the number of readers to number of CPUS by default.

Signed-off-by: Steven Rostedt <srostedt@redhat.com>
---
 kernel/rtmutex.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/rtmutex.c b/kernel/rtmutex.c
index 38cb8e8..300ea1c 100644
--- a/kernel/rtmutex.c
+++ b/kernel/rtmutex.c
@@ -1016,7 +1016,7 @@ __rt_spin_lock_init(spinlock_t *lock, char *name, struct lock_class_key *key)
 }
 EXPORT_SYMBOL(__rt_spin_lock_init);
 
-int rt_rwlock_limit;
+int rt_rwlock_limit = NR_CPUS;
 
 static inline int rt_release_bkl(struct rt_mutex *lock, unsigned long flags);
 static inline void rt_reacquire_bkl(int saved_lock_depth);
-- 
1.6.0.90.g436ed

