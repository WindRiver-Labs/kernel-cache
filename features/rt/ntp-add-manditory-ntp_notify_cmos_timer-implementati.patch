From 57bf925362d72bbcd800e0d7d7606387bff1db12 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Sun, 20 Oct 2013 00:58:02 -0400
Subject: [PATCH] ntp: add manditory ntp_notify_cmos_timer() implementation

commit 63946e86 [timekeeping: Fix HRTICK related deadlock from ntp lock changes]
adds a non #ifdef'd call to ntp_notify_cmos_timer from timekeeping.c. So to
ensure that it is always defined, we must add a stub function to the RT_FULL
condition (which previously was not required).

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 kernel/time/ntp.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/kernel/time/ntp.c b/kernel/time/ntp.c
index 0f24f4a..a2b06c1 100644
--- a/kernel/time/ntp.c
+++ b/kernel/time/ntp.c
@@ -554,6 +554,9 @@ static __init int create_cmos_delay_thread(void)
 	return 0;
 }
 early_initcall(create_cmos_delay_thread);
+
+void ntp_notify_cmos_timer(void) { }
+
 #else
 void ntp_notify_cmos_timer(void)
 {
-- 
1.8.1.2

