From 353ba3b00a8e2bd889c243f086145b562d9c9133 Mon Sep 17 00:00:00 2001
From: Thomas Gleixner <tglx@linutronix.de>
Date: Tue, 20 Jul 2010 22:49:00 +0200
Subject: [PATCH] dca: Fix fallout from raw_spinlock conversion

commit 911d28c51827fb0dbf2dcc1e3f2f7618c87cf1eb in tip.

Compiling stuff helps even if there is no hardware to test on.

Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 drivers/dca/dca-core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/dca/dca-core.c b/drivers/dca/dca-core.c
index 4cb0e57..026b058 100644
--- a/drivers/dca/dca-core.c
+++ b/drivers/dca/dca-core.c
@@ -308,7 +308,7 @@ int register_dca_provider(struct dca_provider *dca, struct device *dev)
 	if (!domain) {
 		raw_spin_unlock_irqrestore(&dca_lock, flags);
 
-		newdomain = dca_allocate_domain(rc);
+		newdomain = dca_allocate_domain(dca_pci_rc_from_dev(dev));
 		if (!newdomain)
 			return -ENODEV;
 
-- 
1.7.0.4

