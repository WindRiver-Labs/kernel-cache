From 9cda86b7878b5a415d54f8f187d8923e02971799 Mon Sep 17 00:00:00 2001
From: John Kacur <jkacur@redhat.com>
Date: Wed, 28 Apr 2010 21:34:27 +0200
Subject: [PATCH] rt: Remove irrelevant CONFIGS from reminder block.

commit f4c30135fddb7d23d26f722b6f50e251d8764414 in tip.

- remove CONFIGS that do not have an impact to -rt from the reminder block.
- reformat DEBUG_COUNT so that it is more easily human readable.
- correct CONFIG_FTRACE to CONFIG_FUNCTION_TRACER.

Signed-off-by: John Kacur <jkacur@redhat.com>
Cc: Steven Rostedt <rostedt@goodmis.org>
Cc: Clark Williams <williams@redhat.com>
LKML-Reference: <1272483267-10900-1-git-send-email-jkacur@redhat.com>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 init/main.c |   29 ++++++++++-------------------
 1 files changed, 10 insertions(+), 19 deletions(-)

diff --git a/init/main.c b/init/main.c
index 9399e7e..627f4c7 100644
--- a/init/main.c
+++ b/init/main.c
@@ -926,15 +926,15 @@ static int __init kernel_init(void * unused)
 	WARN_ON(irqs_disabled());
 #endif
 
-#define DEBUG_COUNT (defined(CONFIG_DEBUG_RT_MUTEXES) + \
-	defined(CONFIG_IRQSOFF_TRACER) + defined(CONFIG_PREEMPT_TRACER) + \
-	defined(CONFIG_STACK_TRACER) + defined(CONFIG_INTERRUPT_OFF_HIST) + \
-	defined(CONFIG_PREEMPT_OFF_HIST) + \
-	defined(CONFIG_WAKEUP_LATENCY_HIST) + \
-	defined(CONFIG_MISSED_TIMER_OFFSETS_HIST) + \
-	defined(CONFIG_DEBUG_SLAB) + defined(CONFIG_DEBUG_PAGEALLOC) + \
-	defined(CONFIG_LOCKDEP) + \
-	(defined(CONFIG_FTRACE) - defined(CONFIG_FTRACE_MCOUNT_RECORD)))
+#define DEBUG_COUNT	(defined(CONFIG_DEBUG_RT_MUTEXES) +	\
+			defined(CONFIG_IRQSOFF_TRACER) +	\
+			defined(CONFIG_PREEMPT_TRACER) +	\
+			defined(CONFIG_FUNCTION_TRACER) +	\
+			defined(CONFIG_INTERRUPT_OFF_HIST) +	\
+			defined(CONFIG_PREEMPT_OFF_HIST) +	\
+			defined(CONFIG_DEBUG_SLAB) +		\
+			defined(CONFIG_PREEMPT_OFF_HIST) +	\
+			defined(CONFIG_LOCKDEP))
 
 #if DEBUG_COUNT > 0
 	printk(KERN_ERR "*****************************************************************************\n");
@@ -954,11 +954,8 @@ static int __init kernel_init(void * unused)
 #ifdef CONFIG_PREEMPT_TRACER
 	printk(KERN_ERR "*        CONFIG_PREEMPT_TRACER                                              *\n");
 #endif
-#ifdef CONFIG_STACK_TRACER
-	printk(KERN_ERR "*        CONFIG_STACK_TRACER                                                *\n");
-#endif
 #if defined(CONFIG_FTRACE) && !defined(CONFIG_FTRACE_MCOUNT_RECORD)
-	printk(KERN_ERR "*        CONFIG_FTRACE                                                      *\n");
+	printk(KERN_ERR "*        CONFIG_FUNCTION_TRACER                                              *\n");
 #endif
 #ifdef CONFIG_INTERRUPT_OFF_HIST
 	printk(KERN_ERR "*        CONFIG_INTERRUPT_OFF_HIST                                          *\n");
@@ -966,12 +963,6 @@ static int __init kernel_init(void * unused)
 #ifdef CONFIG_PREEMPT_OFF_HIST
 	printk(KERN_ERR "*        CONFIG_PREEMPT_OFF_HIST                                            *\n");
 #endif
-#ifdef CONFIG_WAKEUP_LATENCY_HIST
-	printk(KERN_ERR "*        CONFIG_WAKEUP_LATENCY_HIST                                         *\n");
-#endif
-#ifdef CONFIG_MISSED_TIMER_OFFSETS_HIST
-	printk(KERN_ERR "*        CONFIG_MISSED_TIMER_OFFSETS_HIST                                   *\n");
-#endif
 #ifdef CONFIG_DEBUG_SLAB
 	printk(KERN_ERR "*        CONFIG_DEBUG_SLAB                                                  *\n");
 #endif
-- 
1.7.0.4

