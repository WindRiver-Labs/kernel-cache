From 9f8ccc0930288d783821ae4a3a2316c44b289085 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Wed, 31 Aug 2016 14:52:14 -0400
Subject: [PATCH] dcache: fix implicit wait.h include in <linux/dcache.h>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

To fix:

  In file included from fs/notify/fsnotify.c:19:0:
  ./include/linux/dcache.h:103:3: error: unknown type name ‘wait_queue_head_t’
     wait_queue_head_t *d_wait; /* in-lookup ones only */
     ^
  ./include/linux/dcache.h:233:6: error: unknown type name ‘wait_queue_head_t’
        wait_queue_head_t *);
        ^
  make[2]: *** [fs/notify/fsnotify.o] Error 1

The same fail appears in file included from security/security.c:15:0:

This was observed in -rt, but it is quite possible the same issue will
appear for certain configs or arch builds on mainline as well.

Fixes: d9171b934526 ("parallel lookups machinery, part 4 (and last)")
Cc: Al Viro <viro@zeniv.linux.org.uk>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/include/linux/dcache.h b/include/linux/dcache.h
index 5ff3e9a4fe5f..b719cb8b6b5d 100644
--- a/include/linux/dcache.h
+++ b/include/linux/dcache.h
@@ -3,6 +3,7 @@
 
 #include <linux/atomic.h>
 #include <linux/list.h>
+#include <linux/wait.h>
 #include <linux/rculist.h>
 #include <linux/rculist_bl.h>
 #include <linux/spinlock.h>
-- 
2.5.0

