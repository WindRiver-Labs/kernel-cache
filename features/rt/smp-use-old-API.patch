From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Sat, 31 Jan 2009 18:11:47 -0500
Subject: [PATCH] smp: use old API for cpu in mask

Commit 2d3854a37e8b767a51aba38ed6d22817b0631e33 with the new APIs
isn't present in 2.6.27, so revert back to the old API for now on
the cherry pick of the upstream SMP patch.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 kernel/smp.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/smp.c b/kernel/smp.c
index 7c428cf..d7584c9 100644
--- a/kernel/smp.c
+++ b/kernel/smp.c
@@ -348,7 +348,7 @@ int smp_call_function_mask(cpumask_t mask, void (*func)(void *), void *info,
 		for_each_online_cpu(cpu) {
 			if (cpu == smp_processor_id())
 				continue;
-			if (cpumask_test_cpu(cpu, &mask))
+			if (cpu_isset(cpu, mask))
 				smp_call_function_single(cpu, func, info, wait);
 		}
 		return 0;
