From 7befac7c8b3288d3184930c8a9693830c2d65346 Mon Sep 17 00:00:00 2001
From: Thomas Gleixner <tglx@linutronix.de>
Date: Fri, 5 Sep 2008 00:23:59 -0400
Subject: [PATCH] rt-mutex-cleanup.patch
 Date: Fri, 20 Jun 2008 12:20:09 +0200
 Signed-off-by: Thomas Gleixner <tglx@linutronix.de>

---
 kernel/rtmutex.c |    7 +++++--
 1 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/kernel/rtmutex.c b/kernel/rtmutex.c
index b485438..125a25f 100644
--- a/kernel/rtmutex.c
+++ b/kernel/rtmutex.c
@@ -125,9 +125,12 @@ static inline void mark_rt_rwlock_check(struct rw_mutex *rwm)
 #endif
 
 #ifdef CONFIG_PREEMPT_RT
-#define task_is_reader(task) ((task) == RT_RW_READER)
+static inline int task_is_reader(struct task_struct *task)
+{
+	return task == RT_RW_READER;
+}
 #else
-#define task_is_reader(task) (0)
+static inline int task_is_reader(struct task_struct *task) { return 0; }
 #endif
 
 int pi_initialized;
-- 
1.6.0.90.g436ed

