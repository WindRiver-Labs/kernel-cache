From 986c2426847ce45e535d5991dcdf46dfd4231b16 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 30 Sep 2008 20:03:12 -0400
Subject: [PATCH] patch preempt-realtime-supress-nohz-softirq-warning.patch

---
 kernel/time/tick-sched.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/kernel/time/tick-sched.c b/kernel/time/tick-sched.c
index cdbee57..1fa1961 100644
--- a/kernel/time/tick-sched.c
+++ b/kernel/time/tick-sched.c
@@ -238,6 +238,8 @@ void tick_nohz_stop_sched_tick(int inidle)
 	if (need_resched())
 		goto end;
 
+
+#ifndef CONFIG_PREEMPT_RT
 	if (unlikely(local_softirq_pending())) {
 		static int ratelimit;
 
@@ -248,6 +250,7 @@ void tick_nohz_stop_sched_tick(int inidle)
 		}
 		goto end;
 	}
+#endif
 
 	ts->idle_calls++;
 	/* Read jiffies and the time when jiffies were updated last */
-- 
1.6.0.90.g436ed

