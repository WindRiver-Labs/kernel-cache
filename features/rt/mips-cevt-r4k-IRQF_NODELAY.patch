From 82531eb9d36cb9a49d5425090743c69e8c95fdcb Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Thu, 21 May 2009 19:30:58 -0400
Subject: cevt-r4k: set IRQF_NODELAY for the timer interrupt

We need the IRQF_NODELAY flag set on the timer interrupt
for all timer IRQ sources when preemptible IRQ support
is enabled.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 arch/mips/kernel/cevt-r4k.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/kernel/cevt-r4k.c b/arch/mips/kernel/cevt-r4k.c
index 0de7a68..df0092f 100644
--- a/arch/mips/kernel/cevt-r4k.c
+++ b/arch/mips/kernel/cevt-r4k.c
@@ -133,7 +133,7 @@ out:
 
 struct irqaction c0_compare_irqaction = {
 	.handler = c0_compare_interrupt,
-	.flags = IRQF_DISABLED | IRQF_PERCPU,
+	.flags = IRQF_DISABLED | IRQF_PERCPU | IRQF_NODELAY,
 	.name = "timer",
 };
 
-- 
1.6.3.2

