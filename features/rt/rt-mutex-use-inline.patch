Subject: rt-mutex-cleanup.patch
From: Thomas Gleixner <tglx@linutronix.de>
Date: Fri, 20 Jun 2008 12:20:09 +0200

Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
---
 kernel/rtmutex.c |    7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

Index: linux-2.6.26.3-rt6/kernel/rtmutex.c
===================================================================
--- linux-2.6.26.3-rt6.orig/kernel/rtmutex.c	2008-09-05 00:23:58.000000000 -0400
+++ linux-2.6.26.3-rt6/kernel/rtmutex.c	2008-09-05 00:23:59.000000000 -0400
@@ -125,9 +125,12 @@ static inline void mark_rt_rwlock_check(
 #endif
 
 #ifdef CONFIG_PREEMPT_RT
-#define task_is_reader(task) ((task) == RT_RW_READER)
+static inline int task_is_reader(struct task_struct *task)
+{
+	return task == RT_RW_READER;
+}
 #else
-#define task_is_reader(task) (0)
+static inline int task_is_reader(struct task_struct *task) { return 0; }
 #endif
 
 int pi_initialized;
