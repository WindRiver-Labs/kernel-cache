From 78dbe17e82b7a531fd4ec256ffa6b92175f92be0 Mon Sep 17 00:00:00 2001
From: Chad Reese <kreese@caviumnetworks.com>
Date: Sun, 23 May 2010 08:42:31 -0700
Subject: [PATCH 238/337] MIPS: Octeon: Don't require network devices to be
 running for ioctls.

Based On SDK 3.0.0-482

None of the ioctl() calls to a network device require the interface to
be up. Take out the check for "running".

Signed-off-by: Chad Reese <kreese@caviumnetworks.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/net/ethernet/octeon/ethernet-mdio.c |    3 ---
 1 files changed, 0 insertions(+), 3 deletions(-)

diff --git a/drivers/net/ethernet/octeon/ethernet-mdio.c b/drivers/net/ethernet/octeon/ethernet-mdio.c
index ca29d92..5c8e22c 100644
--- a/drivers/net/ethernet/octeon/ethernet-mdio.c
+++ b/drivers/net/ethernet/octeon/ethernet-mdio.c
@@ -225,9 +225,6 @@ int cvm_oct_ioctl(struct net_device *dev, struct ifreq *rq, int cmd)
 	union cvmx_srio_tx_message_header tx_header;
 	int ivalue;
 
-	if (!netif_running(dev))
-		return -EINVAL;
-
 	switch (cmd) {
 	case CAVIUM_NET_IOCTL_SETPRIO:
 		ivalue = rq->ifr_ifru.ifru_ivalue;
-- 
1.7.5.4

