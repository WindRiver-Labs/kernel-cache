From ac2bc5722c69b00ab8b8f5d8814d11dc7f65a8e2 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Wed, 4 Jul 2012 16:24:03 -0700
Subject: [PATCH 115/337] staging/netdev: octeon-ethernet: Print message on
 request_irq() failure in ethernet-spi.c

Based On SDK 3.0.0-482

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/staging/octeon/ethernet-spi.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/octeon/ethernet-spi.c b/drivers/staging/octeon/ethernet-spi.c
index 69309ff..193685d 100644
--- a/drivers/staging/octeon/ethernet-spi.c
+++ b/drivers/staging/octeon/ethernet-spi.c
@@ -294,8 +294,11 @@ int cvm_oct_spi_init(struct net_device *dev)
 	if (number_spi_ports == 0) {
 		r = request_irq(OCTEON_IRQ_RML, cvm_oct_spi_rml_interrupt,
 				IRQF_SHARED, "SPI", &number_spi_ports);
-		if (r)
+		if (r) {
+			netdev_err(dev, "request_irq(%d) failed\n",
+				   OCTEON_IRQ_RML);
 			return r;
+		}
 	}
 	number_spi_ports++;
 
-- 
1.7.5.4

