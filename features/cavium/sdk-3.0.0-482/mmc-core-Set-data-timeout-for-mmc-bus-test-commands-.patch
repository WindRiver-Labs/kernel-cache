From 995cb357ad5015f8132318fe5b794ada90e3dc79 Mon Sep 17 00:00:00 2001
From: Minjian Wu <minjianwu@micron.com>
Date: Sat, 24 Aug 2013 23:25:12 -0400
Subject: [PATCH 07/20] mmc: core: Set data timeout for mmc bus test commands
 (CMD14 and CMD19).

commit 84532e33975bd8fc969c77c8a2a980df2ec096a5 upstream

Signed-off-by: Minjian Wu <minjianwu@micron.com>
Acked-by: Ulf Hansson <ulf.hansson@linaro.org>
Signed-off-by: Chris Ball <cjb@laptop.org>
Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 drivers/mmc/core/mmc_ops.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/mmc/core/mmc_ops.c b/drivers/mmc/core/mmc_ops.c
index 6b5e9c6..ba709de 100644
--- a/drivers/mmc/core/mmc_ops.c
+++ b/drivers/mmc/core/mmc_ops.c
@@ -525,6 +525,7 @@ mmc_send_bus_test(struct mmc_card *card, struct mmc_host *host, u8 opcode,
 
 	data.sg = &sg;
 	data.sg_len = 1;
+	mmc_set_data_timeout(&data, card);
 	sg_init_one(&sg, data_buf, len);
 	mmc_wait_for_req(host, &mrq);
 	err = 0;
-- 
1.7.5.4

