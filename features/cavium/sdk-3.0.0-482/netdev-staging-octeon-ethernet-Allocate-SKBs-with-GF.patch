From 978627ba3d0b8ead1d3a478ffc9002b2ca953a1b Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Wed, 4 Jul 2012 12:06:39 -0700
Subject: [PATCH 110/337] netdev/staging: octeon-ethernet: Allocate SKBs with
 GFP_ATOMIC.

Based On SDK 3.0.0-482

... because we are allocating from atomic context.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/staging/octeon/ethernet-mem.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/octeon/ethernet-mem.c b/drivers/staging/octeon/ethernet-mem.c
index c27ddd8..6b2741e 100644
--- a/drivers/staging/octeon/ethernet-mem.c
+++ b/drivers/staging/octeon/ethernet-mem.c
@@ -68,7 +68,7 @@ static int cvm_oct_fill_hw_skbuff(struct fpa_pool *pool, int elements)
 		int extra_reserve;
 		u8 *desired_data;
 		struct sk_buff *skb = alloc_skb(size + CVM_OCT_SKB_TO_FPA_PADDING,
-						GFP_KERNEL);
+						GFP_ATOMIC);
 		if (skb == NULL) {
 			pr_err("Failed to allocate skb for hardware pool %d\n",
 			       pool_num);
-- 
1.7.5.4

