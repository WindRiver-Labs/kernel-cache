From c1f1d800a2d4071c6480ce6fd55a7b078aaaca5c Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 26 Nov 2012 13:59:40 -0800
Subject: [PATCH 237/337] netdev: octeon-ethernet: Show SPI interfaces as
 always carrier-on.

Based On SDK 3.0.0-482

We cannot communicate with the PHYs, so just show carrier-on.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/net/ethernet/octeon/ethernet.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/octeon/ethernet.c b/drivers/net/ethernet/octeon/ethernet.c
index ded293a..45c874b 100644
--- a/drivers/net/ethernet/octeon/ethernet.c
+++ b/drivers/net/ethernet/octeon/ethernet.c
@@ -535,6 +535,7 @@ static const struct net_device_ops cvm_oct_sgmii_netdev_ops = {
 static const struct net_device_ops cvm_oct_spi_netdev_ops = {
 	.ndo_init		= cvm_oct_spi_init,
 	.ndo_uninit		= cvm_oct_spi_uninit,
+	.ndo_open		= cvm_oct_phy_setup_device,
 	.ndo_start_xmit		= cvm_oct_xmit,
 	.ndo_set_rx_mode	= cvm_oct_common_set_multicast_list,
 	.ndo_set_mac_address	= cvm_oct_common_set_mac_address,
-- 
1.7.5.4

