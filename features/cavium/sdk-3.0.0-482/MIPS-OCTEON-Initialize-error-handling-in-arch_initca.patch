From 6effbdddc36153c5617fcccab6521d10d68c01a2 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 14 Jan 2013 17:53:56 -0800
Subject: [PATCH 311/337] MIPS: OCTEON: Initialize error handling in
 arch_initcall().

Based On SDK 3.0.0-482

This allow other subsystems to subscribe to it as they are initialized.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/cavium-octeon/octeon-error-tree.c |    7 ++-----
 1 files changed, 2 insertions(+), 5 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-error-tree.c b/arch/mips/cavium-octeon/octeon-error-tree.c
index 3833939..80d7e97 100644
--- a/arch/mips/cavium-octeon/octeon-error-tree.c
+++ b/arch/mips/cavium-octeon/octeon-error-tree.c
@@ -6,7 +6,7 @@
  * Copyright (C) 2013 Cavium, Inc.
  */
 
-#include <linux/module.h>
+#include <linux/init.h>
 #include <linux/interrupt.h>
 
 #include <asm/mipsregs.h>
@@ -178,7 +178,4 @@ static int __init octeon_error_tree_init(void)
 
 	return octeon_error_tree_ciu(tree->tree);
 }
-
-module_init(octeon_error_tree_init);
-
-MODULE_LICENSE("GPL");
+arch_initcall(octeon_error_tree_init);
-- 
1.7.5.4

