From bfd8b9d3acb896adbdd1af893c5002dd474b7ff8 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 16 Oct 2012 11:19:54 -0700
Subject: [PATCH 201/337] MIPS: Align stack top for
 CONFIG_MIPS_HUGE_TLB_SUPPORT.

Based On SDK 3.0.0-482

The alignment is beneficial for both HUGETLB_PAGE and
TRANSPARENT_HUGEPAGE.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/include/asm/processor.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/include/asm/processor.h b/arch/mips/include/asm/processor.h
index c3acb96..2f5f59e 100644
--- a/arch/mips/include/asm/processor.h
+++ b/arch/mips/include/asm/processor.h
@@ -73,7 +73,7 @@ extern unsigned int vced_count, vcei_count;
 
 #define TASK_IS_32BIT_ADDR test_thread_flag(TIF_32BIT_ADDR)
 
-# ifdef CONFIG_HUGETLB_PAGE
+# ifdef CONFIG_MIPS_HUGE_TLB_SUPPORT
 /*
  * Align the STACK_TOP on a HPAGE_SIZE boundry so the stack may be
  * remapped to a huge page.
-- 
1.7.5.4

