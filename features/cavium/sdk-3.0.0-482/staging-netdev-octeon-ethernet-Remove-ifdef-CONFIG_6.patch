From 7edc8dc7e2b393b940cf9f51f1fca916c62c6f8b Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Thu, 5 Jul 2012 18:33:59 -0700
Subject: [PATCH 119/337] staging/netdev: octeon-ethernet: Remove #ifdef
 CONFIG_64BIT

Based On SDK 3.0.0-482

Octeon only supports 64-bit kernel.  Checking for CONFIG_64BIT is
redundant.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 drivers/staging/octeon/ethernet-rx.c |    9 ---------
 drivers/staging/octeon/ethernet.c    |    5 -----
 2 files changed, 0 insertions(+), 14 deletions(-)

diff --git a/drivers/staging/octeon/ethernet-rx.c b/drivers/staging/octeon/ethernet-rx.c
index ac10617..216e1d2 100644
--- a/drivers/staging/octeon/ethernet-rx.c
+++ b/drivers/staging/octeon/ethernet-rx.c
@@ -517,23 +517,14 @@ static int cvm_oct_napi_poll(struct napi_struct *napi, int budget)
 
 				/* Increment RX stats for virtual ports */
 				if (work->word1.cn38xx.ipprt >= CVMX_PIP_NUM_INPUT_PORTS) {
-#ifdef CONFIG_64BIT
 					atomic64_add(1, (atomic64_t *)&priv->stats.rx_packets);
 					atomic64_add(skb->len, (atomic64_t *)&priv->stats.rx_bytes);
-#else
-					atomic_add(1, (atomic_t *)&priv->stats.rx_packets);
-					atomic_add(skb->len, (atomic_t *)&priv->stats.rx_bytes);
-#endif
 				}
 				netif_receive_skb(skb);
 				rx_count++;
 			} else {
 				/* Drop any packet received for a device that isn't up */
-#ifdef CONFIG_64BIT
 				atomic64_add(1, (atomic64_t *)&priv->stats.rx_dropped);
-#else
-				atomic_add(1, (atomic_t *)&priv->stats.rx_dropped);
-#endif
 				dev_kfree_skb_irq(skb);
 			}
 		} else {
diff --git a/drivers/staging/octeon/ethernet.c b/drivers/staging/octeon/ethernet.c
index 0fe1d73..f0d6f60 100644
--- a/drivers/staging/octeon/ethernet.c
+++ b/drivers/staging/octeon/ethernet.c
@@ -242,13 +242,8 @@ static struct net_device_stats *cvm_oct_common_get_stats(struct net_device *dev)
 		 * The drop counter must be incremented atomically
 		 * since the RX tasklet also increments it.
 		 */
-#ifdef CONFIG_64BIT
 		atomic64_add(rx_status.dropped_packets,
 			     (atomic64_t *)&priv->stats.rx_dropped);
-#else
-		atomic_add(rx_status.dropped_packets,
-			     (atomic_t *)&priv->stats.rx_dropped);
-#endif
 	}
 
 	return &priv->stats;
-- 
1.7.5.4

