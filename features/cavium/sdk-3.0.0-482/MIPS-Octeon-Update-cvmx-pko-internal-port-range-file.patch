From 9b5ea874a4bc2dfc627b9adab12e74d66b7c8b01 Mon Sep 17 00:00:00 2001
From: Venkat Subbiah <venkat.subbiah@cavium.com>
Date: Mon, 7 Jan 2013 09:39:30 -0800
Subject: [PATCH 290/337] MIPS: Octeon: Update cvmx-pko-internal-port-range
 files.

Based On SDK 3.0.0-482

Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 .../executive/cvmx-pko-internal-ports-range.c      |    2 ++
 .../asm/octeon/cvmx-pko-internal-ports-range.h     |    5 +++++
 2 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/arch/mips/cavium-octeon/executive/cvmx-pko-internal-ports-range.c b/arch/mips/cavium-octeon/executive/cvmx-pko-internal-ports-range.c
index 70d301d..5238d3c 100644
--- a/arch/mips/cavium-octeon/executive/cvmx-pko-internal-ports-range.c
+++ b/arch/mips/cavium-octeon/executive/cvmx-pko-internal-ports-range.c
@@ -38,6 +38,7 @@
  ***********************license end**************************************/
 
 #ifdef CVMX_BUILD_FOR_LINUX_KERNEL
+#include <linux/export.h>
 #include <asm/octeon/cvmx-range.h>
 #include <asm/octeon/cvmx-global-resources.h>
 #include <asm/octeon/cvmx-bootmem.h>
@@ -146,6 +147,7 @@ void cvmx_pko_internal_ports_range_free_all(void)
 		}
 	//cvmx_range_show(pko_internal_ports_range);
 }
+EXPORT_SYMBOL(cvmx_pko_internal_ports_range_free_all);
 
 void cvmx_pko_internal_ports_range_show(void)
 {
diff --git a/arch/mips/include/asm/octeon/cvmx-pko-internal-ports-range.h b/arch/mips/include/asm/octeon/cvmx-pko-internal-ports-range.h
index cdc822c..5001142 100644
--- a/arch/mips/include/asm/octeon/cvmx-pko-internal-ports-range.h
+++ b/arch/mips/include/asm/octeon/cvmx-pko-internal-ports-range.h
@@ -67,6 +67,11 @@ int cvmx_pko_internal_ports_alloc(int interface, int port, uint64_t count);
  */
 int cvmx_pko_internal_ports_free(int interface, int port);
 
+/*
+ * Frees up all the allocated internal ports.
+ */
+void cvmx_pko_internal_ports_range_free_all(void);
+
 extern int __cvmx_pko_internal_ports_range_init(void);
 
 #endif
-- 
1.7.5.4

