From 3f426ee764ce24397a7516bfe52bc6bf395c7db2 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 18 Jan 2013 12:28:04 -0800
Subject: [PATCH 329/337] MIPS: OCTEON: Fix OOPs in octeon-hw-status.c

Based On SDK 3.0.0-482

... Due to thinko.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Jack Tan <jack.tan@windriver.com>
---
 arch/mips/cavium-octeon/octeon-hw-status.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-hw-status.c b/arch/mips/cavium-octeon/octeon-hw-status.c
index f29dc68..71b3b6b 100644
--- a/arch/mips/cavium-octeon/octeon-hw-status.c
+++ b/arch/mips/cavium-octeon/octeon-hw-status.c
@@ -185,9 +185,11 @@ static struct octeon_hw_status_node *find_child(struct octeon_hw_status_node *r,
 					       struct octeon_hw_status_reg *sr)
 {
 	struct octeon_hw_status_node *cw = r->child;
-
+	struct find_node_cb_data cbd;
+	cbd.r = NULL;
+	cbd.sr = sr;
 	while(cw) {
-		if (find_node_cb(cw, sr))
+		if (find_node_cb(cw, &cbd))
 			break;
 		cw = cw->next;
 	}
-- 
1.7.5.4

