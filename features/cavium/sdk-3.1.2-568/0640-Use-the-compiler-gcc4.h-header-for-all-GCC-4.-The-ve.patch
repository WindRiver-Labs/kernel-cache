From 2278957bf24f167da03a725151cfcd0db0ee97c6 Mon Sep 17 00:00:00 2001
From: Andrew Pinski <apinski@cavium.com>
Date: Wed, 16 Jul 2014 18:05:50 -0700
Subject: [PATCH 640/974] Use the compiler-gcc4.h header for all GCC >=4. The
 versioning scheme for GCC has changed such that the next release is 5.1.0 and
 then the next year will be 6.1.0.

Signed-off-by: Andrew Pinski <apinski@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 include/linux/compiler-gcc.h | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/include/linux/compiler-gcc.h b/include/linux/compiler-gcc.h
index 02ae99e..7cd085a 100644
--- a/include/linux/compiler-gcc.h
+++ b/include/linux/compiler-gcc.h
@@ -100,10 +100,16 @@
 #define __maybe_unused			__attribute__((unused))
 #define __always_unused			__attribute__((unused))
 
+/* GCC version scheme starting with 5 is the same
+ * major release as GCC 4. */
+#if __GNUC__ >= 4
+#include "linux/compiler-gcc4.h"
+#else
 #define __gcc_header(x) #x
 #define _gcc_header(x) __gcc_header(linux/compiler-gcc##x.h)
 #define gcc_header(x) _gcc_header(x)
 #include gcc_header(__GNUC__)
+#endif
 
 #if !defined(__noclone)
 #define __noclone	/* not needed */
-- 
2.6.2

