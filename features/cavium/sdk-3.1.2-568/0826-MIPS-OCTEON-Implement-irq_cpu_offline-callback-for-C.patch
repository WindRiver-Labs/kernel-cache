From 15dbf5dbfb73e1d37c18f7f06f776591abade748 Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Sun, 27 Jul 2014 18:05:50 -0700
Subject: [PATCH 826/974] MIPS:OCTEON: Implement irq_cpu_offline callback for
 CIU3 interrupts.

The irq_cpu_offline callback adjusts smp_affinity of the interrupts.
This is required for CPU Hotplug to work properly when a core is
unplugged.

Bug #13887.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-irq.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/cavium-octeon/octeon-irq.c b/arch/mips/cavium-octeon/octeon-irq.c
index cf5d27a..3f402d8 100644
--- a/arch/mips/cavium-octeon/octeon-irq.c
+++ b/arch/mips/cavium-octeon/octeon-irq.c
@@ -2241,7 +2241,7 @@ static struct irq_chip octeon_irq_chip_ciu3 = {
 	.irq_unmask = octeon_irq_ciu3_enable,
 #ifdef CONFIG_SMP
 	.irq_set_affinity = octeon_irq_ciu3_set_affinity,
-//	.irq_cpu_offline = octeon_irq_cpu_offline_ciu,
+	.irq_cpu_offline = octeon_irq_cpu_offline_ciu,
 #endif
 };
 
-- 
2.6.2

