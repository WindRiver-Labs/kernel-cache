From 40866d90f88bec625e328f4b0f14ba37a1972fe5 Mon Sep 17 00:00:00 2001
From: Peter Swain <pswain@cavium.com>
Date: Wed, 16 Jul 2014 18:05:50 -0700
Subject: [PATCH 673/974] usb: dwc3: simplify OCTEON ifdefs

[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/usb/dwc3/core.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/drivers/usb/dwc3/core.c b/drivers/usb/dwc3/core.c
index a275a0d..535576c 100644
--- a/drivers/usb/dwc3/core.c
+++ b/drivers/usb/dwc3/core.c
@@ -105,7 +105,7 @@ static void dwc3_core_soft_reset(struct dwc3 *dwc)
 	dwc3_writel(dwc->regs, DWC3_GUSB2PHYCFG(0), reg);
 
 	index = (((uint64_t)(dwc->regs) & 0x10000000000ull) ? 1:0);
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	octeon3_usb_phy_reset(index);
 #else
 	usb_phy_init(dwc->usb2_phy);
@@ -369,7 +369,7 @@ err0:
 
 static void dwc3_core_exit(struct dwc3 *dwc)
 {
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_shutdown(dwc->usb2_phy);
 	usb_phy_shutdown(dwc->usb3_phy);
 #endif
@@ -475,7 +475,7 @@ static int dwc3_probe(struct platform_device *pdev)
 	dwc->regs_size	= resource_size(res);
 	dwc->dev	= dev;
 
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	dev->dma_mask	= &xhci_octeon_dma_mask;
 #else
 	dev->dma_mask	= dev->parent->dma_mask;
@@ -629,14 +629,14 @@ static int dwc3_remove(struct platform_device *pdev)
 	dwc3_event_buffers_cleanup(dwc);
 	dwc3_free_event_buffers(dwc);
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_set_suspend(dwc->usb2_phy, 1);
 	usb_phy_set_suspend(dwc->usb3_phy, 1);
 #endif
 
 	dwc3_core_exit(dwc);
 
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	xhci_octeon_stop(pdev);
 #endif
 
@@ -712,7 +712,7 @@ static int dwc3_suspend(struct device *dev)
 	dwc->gctl = dwc3_readl(dwc->regs, DWC3_GCTL);
 	spin_unlock_irqrestore(&dwc->lock, flags);
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_shutdown(dwc->usb3_phy);
 	usb_phy_shutdown(dwc->usb2_phy);
 #endif
@@ -725,7 +725,7 @@ static int dwc3_resume(struct device *dev)
 	struct dwc3	*dwc = dev_get_drvdata(dev);
 	unsigned long	flags;
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_init(dwc->usb3_phy);
 	usb_phy_init(dwc->usb2_phy);
 #endif
-- 
2.6.2

