From c8424952c101cabe9854c98a0954f64d678899d4 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 6 Aug 2013 16:28:11 -0700
Subject: [PATCH 245/974] MIPS: OCTEON: Seperate SoC and CPU related config
 items

Segregate SOC and CPU related config items so that if we select
CPU_CAVIUM_OCTEON, we don't get to select SoC support unrelated to the
CPU, those are enabled by CAVIUM_OCTEON_SOC.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/Kconfig | 88 +++++++++++++++++++++--------------------
 1 file changed, 46 insertions(+), 42 deletions(-)

diff --git a/arch/mips/cavium-octeon/Kconfig b/arch/mips/cavium-octeon/Kconfig
index 2177a02..5177edb 100644
--- a/arch/mips/cavium-octeon/Kconfig
+++ b/arch/mips/cavium-octeon/Kconfig
@@ -47,47 +47,6 @@ config FAST_ACCESS_TO_THREAD_POINTER
 	  the TLB fault handlers. This CVMSEG address isn't available to user
 	  applications.
 
-config CAVIUM_OCTEON_LOCK_L2
-	bool "Lock often used kernel code in the L2"
-	default "y"
-	help
-	  Enable locking parts of the kernel into the L2 cache.
-
-config CAVIUM_OCTEON_LOCK_L2_TLB
-	bool "Lock the TLB handler in L2"
-	depends on CAVIUM_OCTEON_LOCK_L2
-	default "y"
-	help
-	  Lock the low level TLB fast path into L2.
-
-config CAVIUM_OCTEON_LOCK_L2_EXCEPTION
-	bool "Lock the exception handler in L2"
-	depends on CAVIUM_OCTEON_LOCK_L2
-	default "y"
-	help
-	  Lock the low level exception handler into L2.
-
-config CAVIUM_OCTEON_LOCK_L2_LOW_LEVEL_INTERRUPT
-	bool "Lock the interrupt handler in L2"
-	depends on CAVIUM_OCTEON_LOCK_L2
-	default "y"
-	help
-	  Lock the low level interrupt handler into L2.
-
-config CAVIUM_OCTEON_LOCK_L2_INTERRUPT
-	bool "Lock the 2nd level interrupt handler in L2"
-	depends on CAVIUM_OCTEON_LOCK_L2
-	default "y"
-	help
-	  Lock the 2nd level interrupt handler in L2.
-
-config CAVIUM_OCTEON_LOCK_L2_MEMCPY
-	bool "Lock memcpy() in L2"
-	depends on CAVIUM_OCTEON_LOCK_L2
-	default "y"
-	help
-	  Lock the kernel's implementation of memcpy() into L2.
-
 choice
 	prompt "Allow User space to access hardware IO directly"
 	default CAVIUM_OCTEON_USER_IO_PER_PROCESS
@@ -146,6 +105,51 @@ config CAVIUM_OCTEON_USER_MEM_DISABLED
 
 endchoice
 
+endif # CPU_CAVIUM_OCTEON
+
+if CAVIUM_OCTEON_SOC
+
+config CAVIUM_OCTEON_LOCK_L2
+	bool "Lock often used kernel code in the L2"
+	default "y"
+	help
+	  Enable locking parts of the kernel into the L2 cache.
+
+config CAVIUM_OCTEON_LOCK_L2_TLB
+	bool "Lock the TLB handler in L2"
+	depends on CAVIUM_OCTEON_LOCK_L2
+	default "y"
+	help
+	  Lock the low level TLB fast path into L2.
+
+config CAVIUM_OCTEON_LOCK_L2_EXCEPTION
+	bool "Lock the exception handler in L2"
+	depends on CAVIUM_OCTEON_LOCK_L2
+	default "y"
+	help
+	  Lock the low level exception handler into L2.
+
+config CAVIUM_OCTEON_LOCK_L2_LOW_LEVEL_INTERRUPT
+	bool "Lock the interrupt handler in L2"
+	depends on CAVIUM_OCTEON_LOCK_L2
+	default "y"
+	help
+	  Lock the low level interrupt handler into L2.
+
+config CAVIUM_OCTEON_LOCK_L2_INTERRUPT
+	bool "Lock the 2nd level interrupt handler in L2"
+	depends on CAVIUM_OCTEON_LOCK_L2
+	default "y"
+	help
+	  Lock the 2nd level interrupt handler in L2.
+
+config CAVIUM_OCTEON_LOCK_L2_MEMCPY
+	bool "Lock memcpy() in L2"
+	depends on CAVIUM_OCTEON_LOCK_L2
+	default "y"
+	help
+	  Lock the kernel's implementation of memcpy() into L2.
+
 config CAVIUM_RESERVE32
 	int "Memory to reserve for user processes shared region (MB)"
 	range 0 1536
@@ -234,4 +238,4 @@ config OCTEON_ERROR_INJECTOR
 	  Used to test hardware error reporting.  Should never be used
 	  in a normal running system.
 
-endif # CPU_CAVIUM_OCTEON
+endif #CAVIUM_OCTEON_SOC
-- 
2.6.2

