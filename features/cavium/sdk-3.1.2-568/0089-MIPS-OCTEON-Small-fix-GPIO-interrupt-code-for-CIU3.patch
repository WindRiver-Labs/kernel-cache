From 0d8f6683563a84b069b032943744eb1b0eb04abd Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 3 Mar 2015 16:18:04 -0800
Subject: [PATCH 089/184] MIPS: OCTEON: Small fix GPIO interrupt code for CIU3.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 2e138bdb481d692b7aac05b17b1675c9bca0bc42
Description:

We cannot reliably set GPIO_BIT_CFGX back to zero, so never do it.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/octeon-irq.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-irq.c b/arch/mips/cavium-octeon/octeon-irq.c
index f0d57d7..dc5881f 100644
--- a/arch/mips/cavium-octeon/octeon-irq.c
+++ b/arch/mips/cavium-octeon/octeon-irq.c
@@ -3125,8 +3125,6 @@ static void octeon_irq_ciu3_disable_gpio(struct irq_data *data)
 	struct octeon_ciu_chip_data *cd;
 	cd = irq_data_get_irq_chip_data(data);
 
-	cvmx_write_csr_node(cd->ciu_node, CVMX_GPIO_BIT_CFGX(cd->gpio_line), 0);
-
 	octeon_irq_ciu3_disable(data);
 }
 
@@ -3160,7 +3158,6 @@ void octeon_irq_ciu3_gpio_mask_ack(struct irq_data *data)
 	cvmx_read_csr(isc_w1c_addr);
 }
 
-
 static struct irq_chip octeon_irq_chip_ciu3_gpio = {
 	.name = "CIU3-GPIO",
 	.irq_enable	= octeon_irq_ciu3_enable_gpio,
-- 
1.9.1

