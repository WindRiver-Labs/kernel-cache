From 3eaa7f1cca657ada9e5bdf5729c953afe4ffef9d Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 4 Nov 2014 11:06:56 -0800
Subject: [PATCH 010/184] MIPS: OCTEON: Rename csrc-octeon clocksource
 variables for clarity.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: a734e33af06b5b1aa800550442a6d000457131fd
Description:

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/csrc-octeon.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/mips/cavium-octeon/csrc-octeon.c b/arch/mips/cavium-octeon/csrc-octeon.c
index 6f1bc23..20b6a37 100644
--- a/arch/mips/cavium-octeon/csrc-octeon.c
+++ b/arch/mips/cavium-octeon/csrc-octeon.c
@@ -109,7 +109,7 @@ static cycle_t octeon_cvmcount_read(struct clocksource *cs)
 	return read_c0_cvmcount();
 }
 
-static struct clocksource clocksource_mips = {
+static struct clocksource csrc_octeon = {
 	.name		= "OCTEON_CVMCOUNT",
 	.read		= octeon_cvmcount_read,
 	.mask		= CLOCKSOURCE_MASK(64),
@@ -121,8 +121,8 @@ unsigned long long notrace sched_clock(void)
 	/* 64-bit arithmatic can overflow, so use 128-bit.  */
 	u64 t1, t2, t3;
 	unsigned long long rv;
-	u64 mult = clocksource_mips.mult;
-	u64 shift = clocksource_mips.shift;
+	u64 mult = csrc_octeon.mult;
+	u64 shift = csrc_octeon.shift;
 	u64 cnt = read_c0_cvmcount();
 
 	asm (
@@ -142,8 +142,8 @@ unsigned long long notrace sched_clock(void)
 
 void __init plat_time_init(void)
 {
-	clocksource_mips.rating = 300;
-	clocksource_register_hz(&clocksource_mips, octeon_get_clock_rate());
+	csrc_octeon.rating = 300;
+	clocksource_register_hz(&csrc_octeon, octeon_get_clock_rate());
 }
 
 void __udelay(unsigned long us)
-- 
1.9.1

