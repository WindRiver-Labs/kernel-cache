From 36178a85e8ebd934edbf7bcf05d0a2c9d03badc8 Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Mon, 18 Jan 2016 12:31:29 -0800
Subject: [PATCH 10/13] MIPS: OCTEON: Enable error interrupts for
 CVMX_ERROR_GROUP_INTERNAL

The interrupt array contains interrupts for LMC, L2C, BGX, ILK, ILA
along with other blocks. EDAC driver registers LMC and L2C error
interrupts, so don't enable it here.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
[Original patch taken from patch set for OCTEON SDK 3.1.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-error-tree.c |    8 ++------
 1 files changed, 2 insertions(+), 6 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-error-tree.c b/arch/mips/cavium-octeon/octeon-error-tree.c
index 4ee0d95..6f71cbc 100644
--- a/arch/mips/cavium-octeon/octeon-error-tree.c
+++ b/arch/mips/cavium-octeon/octeon-error-tree.c
@@ -386,9 +386,7 @@ int octeon_error_tree_shutdown(void)
 		for (i = 0; octeon_78xx_error_array[i].intsn < 0xfffff; i++) {
 			enum cvmx_error_groups group;
 			group = octeon_78xx_error_array[i].error_group;
-			if (group != CVMX_ERROR_GROUP_ETHERNET
-			    && group != CVMX_ERROR_GROUP_ILK
-			    && group != CVMX_ERROR_GROUP_ILA)
+			if (group == CVMX_ERROR_GROUP_INTERNAL)
 				octeon_ciu3_errbits_disable_intsn(node, octeon_78xx_error_array[i].intsn);
 		}
 	}
@@ -440,9 +438,7 @@ static int __init octeon_error_tree_init78(void)
 		for (i = 0; octeon_78xx_error_array[i].intsn < 0xfffff; i++) {
 			enum cvmx_error_groups group;
 			group = octeon_78xx_error_array[i].error_group;
-			if (group != CVMX_ERROR_GROUP_ETHERNET
-			    && group != CVMX_ERROR_GROUP_ILK
-			    && group != CVMX_ERROR_GROUP_ILA)
+			if (group == CVMX_ERROR_GROUP_INTERNAL)
 				octeon_ciu3_errbits_enable_intsn(node, octeon_78xx_error_array[i].intsn);
 		}
 
-- 
1.7.5.4

