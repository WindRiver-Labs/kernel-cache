From 385c5a06c407ca543ea714087b31e92713dd9d3d Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 10 Apr 2015 15:35:11 -0700
Subject: [PATCH 118/184] GICv3: Add function to export the irqdomain of the
 gic-v3.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from THUNDERX Tree
ChangeID: d3de09702e455635ed7a41c67e5d65d64fcdc6aa
Description:

The is needed by follow-on patches to map SPI identifiers to irqs.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/irqchip/irq-gic-v3.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/drivers/irqchip/irq-gic-v3.c b/drivers/irqchip/irq-gic-v3.c
index a7e72ed..a46f14d 100644
--- a/drivers/irqchip/irq-gic-v3.c
+++ b/drivers/irqchip/irq-gic-v3.c
@@ -51,6 +51,11 @@ struct gic_chip_data {
 
 static struct gic_chip_data gic_data __read_mostly;
 
+struct irq_domain *gic_get_irq_domain(void)
+{
+	return gic_data.domain;
+}
+
 #define gic_data_rdist()		(this_cpu_ptr(gic_data.rdists.rdist))
 #define gic_data_rdist_rd_base()	(gic_data_rdist()->rd_base)
 #define gic_data_rdist_sgi_base()	(gic_data_rdist_rd_base() + SZ_64K)
-- 
1.9.1

