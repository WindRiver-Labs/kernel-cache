From ac599094624316ae8d04bbdebe959c606c4067e7 Mon Sep 17 00:00:00 2001
From: Sorin Dumitru <sdumitru@ixiacom.com>
Date: Thu, 20 Feb 2014 13:46:59 -0800
Subject: [PATCH 597/974] mips: n32: use compat getsockopt syscall

The IP_PKTOPTIONS sockopt puts control messages
in option_values, these need to be handled
differently in the compat case. This is already
done through the MSG_CMSG_COMPAT flag, we just
need to use compat_sys_getsockopt which sets that
flag.

Signed-off-by: Sorin Dumitru <sdumitru@ixiacom.com>
Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/kernel/scall64-n32.S | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index cab1507..4d4282b 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -158,7 +158,7 @@ EXPORT(sysn32_call_table)
 	PTR	sys_getpeername
 	PTR	sys_socketpair
 	PTR	compat_sys_setsockopt
-	PTR	sys_getsockopt
+	PTR	compat_sys_getsockopt
 	PTR	__sys_clone			/* 6055 */
 	PTR	__sys_fork
 	PTR	compat_sys_execve
-- 
2.6.2

