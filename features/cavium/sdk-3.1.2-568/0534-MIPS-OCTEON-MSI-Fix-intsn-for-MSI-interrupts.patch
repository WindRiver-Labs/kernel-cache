From 4933b3901c6b01f6c0a640264846b5e5f598073f Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Tue, 11 Feb 2014 13:46:59 -0800
Subject: [PATCH 534/974] MIPS:OCTEON:MSI: Fix intsn for MSI interrupts

Each SLI_MSI_RCVx are 64 bits apart.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/pci/msi-octeon.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/pci/msi-octeon.c b/arch/mips/pci/msi-octeon.c
index a72533c..06631e6 100644
--- a/arch/mips/pci/msi-octeon.c
+++ b/arch/mips/pci/msi-octeon.c
@@ -306,7 +306,7 @@ int arch_setup_msi_irq(struct pci_dev *dev, struct msi_desc *desc)
 		domain = octeon_irq_get_block_domain(node, MSI_BLOCK_NUMBER);
 
 		/* Get a irq for the msi intsn (hardware interrupt) */
-		hwirq = MSI_BLOCK_NUMBER << 12 | msi;
+		hwirq = MSI_BLOCK_NUMBER << 12 | (msi * 64);
 		irq = irq_create_mapping(domain, hwirq);
 		irqd_set_trigger_type(irq_get_irq_data(irq),
 				      IRQ_TYPE_EDGE_RISING);
-- 
2.6.2

