From a20063113e01fafc01af4ab5efb2ed6e36909b9d Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Fri, 7 Feb 2014 19:10:44 -0800
Subject: [PATCH 446/974] netdev: octeon-ethernet: Initialize gmx_base for SPI
 interface.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/octeon/ethernet.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/octeon/ethernet.c b/drivers/net/ethernet/octeon/ethernet.c
index 45929d6..2411eef 100644
--- a/drivers/net/ethernet/octeon/ethernet.c
+++ b/drivers/net/ethernet/octeon/ethernet.c
@@ -1004,6 +1004,7 @@ static int cvm_oct_probe(struct platform_device *pdev)
 				priv->tx_lockless = priv->tx_multiple_queues && !disable_lockless_pko;
 				dev->netdev_ops = priv->tx_lockless ?
 					&cvm_oct_spi_lockless_netdev_ops : &cvm_oct_spi_netdev_ops;
+				priv->gmx_base = CVMX_GMXX_RXX_INT_REG(interface_port, interface);
 				strcpy(dev->name, "spi%d");
 				break;
 
-- 
2.6.2

