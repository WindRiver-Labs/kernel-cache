From 8703595758dac37f8b8c79976e22dd3d9f3db576 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Thu, 3 Jul 2014 18:05:50 -0700
Subject: [PATCH 858/974] MIPS: OCTEON: Small fix GPIO interrupt code for CIU3.

We cannot reliably set GPIO_BIT_CFGX back to zero, so never do it.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-irq.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-irq.c b/arch/mips/cavium-octeon/octeon-irq.c
index 33ba03a..acd7a60 100644
--- a/arch/mips/cavium-octeon/octeon-irq.c
+++ b/arch/mips/cavium-octeon/octeon-irq.c
@@ -3069,8 +3069,6 @@ static void octeon_irq_ciu3_disable_gpio(struct irq_data *data)
 	struct octeon_ciu_chip_data *cd;
 	cd = irq_data_get_irq_chip_data(data);
 
-	cvmx_write_csr_node(cd->ciu_node, CVMX_GPIO_BIT_CFGX(cd->gpio_line), 0);
-
 	octeon_irq_ciu3_disable(data);
 }
 
@@ -3104,7 +3102,6 @@ void octeon_irq_ciu3_gpio_mask_ack(struct irq_data *data)
 	cvmx_read_csr(isc_w1c_addr);
 }
 
-
 static struct irq_chip octeon_irq_chip_ciu3_gpio = {
 	.name = "CIU3-GPIO",
 	.irq_enable	= octeon_irq_ciu3_enable_gpio,
-- 
2.6.2

