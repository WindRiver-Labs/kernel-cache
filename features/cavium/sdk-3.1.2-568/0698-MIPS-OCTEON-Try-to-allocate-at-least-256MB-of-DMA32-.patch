From 046594a499ae63e75d7e1effdec764e1d1d5b135 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 29 Jul 2014 18:05:50 -0700
Subject: [PATCH 698/974] MIPS: OCTEON: Try to allocate at least 256MB of DMA32
 memory.

The last attempt (of 64MB) was not sufficient.  We need more than
128MB, so go all the way to 256.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/setup.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/setup.c b/arch/mips/cavium-octeon/setup.c
index a2be65f1..4a66caa 100644
--- a/arch/mips/cavium-octeon/setup.c
+++ b/arch/mips/cavium-octeon/setup.c
@@ -1010,8 +1010,8 @@ void __init plat_mem_setup(void)
 	limit_min = 0;
 	while ((boot_mem_map.nr_map < BOOT_MEM_MAP_MAX)
 		&& (total < MAX_MEMORY)) {
-		/* Try to get 64MB of 32=bit memory */
-		if (total >= 64 * (1<<20))
+		/* Try to get 256MB of 32-bit memory */
+		if (total >= 256 * (1<<20))
 			limit_max = ~0ull;		/* unlimitted */
 
 		memory = cvmx_bootmem_phy_alloc(mem_alloc_size,
-- 
2.6.2

