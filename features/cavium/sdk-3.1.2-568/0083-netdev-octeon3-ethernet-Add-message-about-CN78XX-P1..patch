From c0acbd9fab8a9f1eebfb2d31ea6404ca88a3a7e5 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Wed, 25 Feb 2015 16:59:33 -0800
Subject: [PATCH 083/184] netdev: octeon3-ethernet: Add message about
 CN78XX-P1.0 lack of rmmod support.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 2318e0c7c48b799121c323983bcb835fb2d8382b
Description:

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon3-ethernet.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/net/ethernet/octeon/octeon3-ethernet.c b/drivers/net/ethernet/octeon/octeon3-ethernet.c
index d2ce358..e444fc3 100644
--- a/drivers/net/ethernet/octeon/octeon3-ethernet.c
+++ b/drivers/net/ethernet/octeon/octeon3-ethernet.c
@@ -2420,6 +2420,9 @@ static void __exit octeon3_eth_exit(void)
 	if (!OCTEON_IS_MODEL(OCTEON_CN78XX))
 		return;
 
+	if (OCTEON_IS_MODEL(OCTEON_CN78XX_PASS1_0))
+		pr_err("ERROR: rmmod of this driver is not supported on CN78XX-P1.0\n");
+
 	platform_driver_unregister(&octeon3_eth_driver);
 }
 module_exit(octeon3_eth_exit);
-- 
1.9.1

