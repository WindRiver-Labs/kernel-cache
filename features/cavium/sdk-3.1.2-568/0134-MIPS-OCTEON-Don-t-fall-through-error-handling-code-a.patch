From 3cc145e73f3a9de91055fd8f4f00b2b414b74c00 Mon Sep 17 00:00:00 2001
From: Carlos Munoz <cmunoz@caviumnetworks.com>
Date: Wed, 5 Aug 2015 18:16:04 -0700
Subject: [PATCH 134/184] MIPS: OCTEON: Don't fall through error handling code
 after successfully initializing pool.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 130c00cb35080cdc4f9c828fb40890b88442a9c9
Description:

Signed-off-by: Carlos Munoz <cmunoz@caviumnetworks.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/octeon-fpa3.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/mips/cavium-octeon/octeon-fpa3.c b/arch/mips/cavium-octeon/octeon-fpa3.c
index 8c6c4a5..5e347fe 100644
--- a/arch/mips/cavium-octeon/octeon-fpa3.c
+++ b/arch/mips/cavium-octeon/octeon-fpa3.c
@@ -121,6 +121,9 @@ int octeon_fpa3_pool_init(int			node,
 	cfg.s.ena = 1;
 	cvmx_write_csr_node(node, CVMX_FPA_POOLX_CFG(pool->lpool), cfg.u64);
 
+	mutex_unlock(&octeon_fpa3_lock);
+	return 0;
+
  error_stack:
 	cvmx_fpa3_release_pool(*pool);
  error:
-- 
1.9.1

