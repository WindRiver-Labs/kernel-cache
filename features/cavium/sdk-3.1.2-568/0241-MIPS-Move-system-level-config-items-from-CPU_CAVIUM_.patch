From 043903c52b72c598352ec42b1c9d58f269f0c07a Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 6 Aug 2013 16:15:48 -0700
Subject: [PATCH 241/974] MIPS: Move system level config items from
 CPU_CAVIUM_OCTEON to CAVIUM_OCTEON_SOC

They are a property of the SoC not the CPU itself.  Also get rid of
CPU_SUPPORTS_HIGHMEM as it doesn't support a 32-bit kernel and HIGHMEM
is untested and usless on 64-bit kernels.

Update the help text to be more factual.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/Kconfig | 40 ++++++++++++++++++----------------------
 1 file changed, 18 insertions(+), 22 deletions(-)

diff --git a/arch/mips/Kconfig b/arch/mips/Kconfig
index f1b2c06..db2773b 100644
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@ -758,17 +758,23 @@ config CAVIUM_OCTEON_SOC
 	select HOLES_IN_ZONE
 	select ARCH_REQUIRE_GPIOLIB
 	select MTD_COMPLEX_MAPPINGS
+	select LIBFDT
+	select USE_OF
+	select USB_EHCI_BIG_ENDIAN_MMIO
+	select HAVE_KVM
+	select ARCH_SPARSEMEM_ENABLE
+	select SYS_SUPPORTS_SMP
+	select NR_CPUS_DEFAULT_32
 	help
-	  This option supports all of the Octeon reference boards from Cavium
-	  Networks. It builds a kernel that dynamically determines the Octeon
-	  CPU type and supports all known board reference implementations.
-	  Some of the supported boards are:
-		EBT3000
-		EBH3000
-		EBH3100
-		Thunder
-		Kodama
-		Hikari
+	  This option supports all of the Octeon SoCs and reference
+	  boards from Cavium, Inc. The Cavium Octeon processor is a
+	  highly integrated chip containing many Ethernet hardware
+	  widgets for networking tasks. The processor can have up to
+	  many Mips64v2 cores (32+) and many integrated 10M - 10G
+	  Ethernet ports.  It builds a kernel that dynamically
+	  determines the Octeon CPU type and supports all known board
+	  reference implementations.
+
 	  Say Y here for most Octeon reference boards.
 
 config NLM_XLR_BOARD
@@ -1405,22 +1411,13 @@ config CPU_SB1
 config CPU_CAVIUM_OCTEON
 	bool "Cavium Octeon processor"
 	depends on SYS_HAS_CPU_CAVIUM_OCTEON
-	select ARCH_SPARSEMEM_ENABLE
 	select CPU_HAS_PREFETCH
 	select CPU_SUPPORTS_64BIT_KERNEL
-	select SYS_SUPPORTS_SMP
-	select NR_CPUS_DEFAULT_32
 	select WEAK_ORDERING
-	select CPU_SUPPORTS_HIGHMEM
 	select CPU_SUPPORTS_HUGEPAGES
-	select LIBFDT
-	select USE_OF
-	select USB_EHCI_BIG_ENDIAN_MMIO
 	help
-	  The Cavium Octeon processor is a highly integrated chip containing
-	  many ethernet hardware widgets for networking tasks. The processor
-	  can have up to 16 Mips64v2 cores and 8 integrated gigabit ethernets.
-	  Full details can be found at http://www.caviumnetworks.com.
+	  The Cavium Octeon processor is Mips64v2 + extensions.
+
 
 config CPU_BMIPS3300
 	bool "BMIPS3300"
-- 
2.6.2

