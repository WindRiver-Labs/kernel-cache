From edc53bccdb761aa2e9da7e690dfc890cbbe7be04 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Fri, 4 Aug 2017 10:58:04 +0800
Subject: [PATCH 178/184] cav-octeon3: get rid of SET_ETHTOOL_OPS

commit 7ad24ea4bf62 "net: get rid of SET_ETHTOOL_OPS" removes
SET_ETHTOOL_OPS, follow it.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon3-ethernet.c | 2 +-
 drivers/net/ethernet/octeon/octeon_mgmt.c      | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/drivers/net/ethernet/octeon/octeon3-ethernet.c b/drivers/net/ethernet/octeon/octeon3-ethernet.c
index f7125bf..9b7d377 100644
--- a/drivers/net/ethernet/octeon/octeon3-ethernet.c
+++ b/drivers/net/ethernet/octeon/octeon3-ethernet.c
@@ -1709,7 +1709,7 @@ static int octeon3_eth_common_ndo_init(struct net_device	*netdev,
 	octeon3_napi_init_node(priv->numa_node, netdev);
 
 	/* Register ethtool methods */
-	SET_ETHTOOL_OPS(netdev, &octeon3_ethtool_ops);
+	netdev->ethtool_ops = &octeon3_ethtool_ops;
 
 	return 0;
 err:
diff --git a/drivers/net/ethernet/octeon/octeon_mgmt.c b/drivers/net/ethernet/octeon/octeon_mgmt.c
index 62a1119..774f64f 100644
--- a/drivers/net/ethernet/octeon/octeon_mgmt.c
+++ b/drivers/net/ethernet/octeon/octeon_mgmt.c
@@ -1633,7 +1633,7 @@ static int octeon_mgmt_o3_probe(struct platform_device *pdev)
 	p->port = pd->port;
 	p->numa_node = pd->numa_node;
 	netdev->netdev_ops = &octeon_mgmt_o3_ops;
-	SET_ETHTOOL_OPS(netdev, &octeon_mgmt_o3_ethtool_ops);
+	netdev->ethtool_ops = &octeon_mgmt_o3_ethtool_ops;
 
 	p->mix_phys = 0x1070000100000ull + 0x800 * p->port + (1ull << 36) * p->numa_node;
 	p->mix_size = 0x100;
@@ -1763,7 +1763,7 @@ static int octeon_mgmt_probe(struct platform_device *pdev)
 	p->agl_prt_ctl = (u64)devm_ioremap(&pdev->dev, p->agl_prt_ctl_phys,
 					   p->agl_prt_ctl_size);
 	netdev->netdev_ops = &octeon_mgmt_ops;
-	SET_ETHTOOL_OPS(netdev, &octeon_mgmt_ethtool_ops);
+	netdev->ethtool_ops = &octeon_mgmt_ethtool_ops;
 
 	mac = of_get_mac_address(pdev->dev.of_node);
 
-- 
1.9.1

