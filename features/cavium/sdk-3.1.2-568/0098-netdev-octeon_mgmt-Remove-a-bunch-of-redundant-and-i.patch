From e97febc579c2894e3f08dcd60c2e5f30a3fdaf8c Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 9 Mar 2015 15:37:37 -0700
Subject: [PATCH 098/184] netdev: octeon_mgmt: Remove a bunch of redundant and
 incorrect devm_*().

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: b8ee299b7f2dcff29d60f09c1c255c1957ccda45
Description:

The devres system cleans all this up automatically, so we don't need
all this code, also devm_release_region() was used where we should
have devm_release_mem_region().  Just get rid of all of it.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from octeon-linux-kernel-patches-SDK-3.1.2-release]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon_mgmt.c | 16 ----------------
 1 file changed, 16 deletions(-)

diff --git a/drivers/net/ethernet/octeon/octeon_mgmt.c b/drivers/net/ethernet/octeon/octeon_mgmt.c
index 76f47dd..52863ee 100644
--- a/drivers/net/ethernet/octeon/octeon_mgmt.c
+++ b/drivers/net/ethernet/octeon/octeon_mgmt.c
@@ -1573,22 +1573,6 @@ static int octeon_mgmt_remove(struct platform_device *pdev)
 	dev_set_drvdata(&pdev->dev, NULL);
 	free_netdev(netdev);
 
-	if (p->agl_prt_ctl)
-		devm_iounmap(&pdev->dev,
-			(void __iomem *)p->agl_prt_ctl);
-	if (p->agl_prt_ctl_phys)
-		devm_release_region(&pdev->dev,
-			p->agl_prt_ctl_phys, p->agl_prt_ctl_size);
-	if (p->agl)
-		devm_iounmap(&pdev->dev,
-			(void __iomem *)p->agl);
-	if (p->agl_phys)
-		devm_release_region(&pdev->dev, p->agl_phys, p->agl_size);
-	if (p->mix)
-		devm_iounmap(&pdev->dev,
-			(void __iomem *)p->mix);
-	if (p->mix_phys)
-		devm_release_region(&pdev->dev, p->mix_phys, p->mix_size);
 	return 0;
 }
 
-- 
1.9.1

