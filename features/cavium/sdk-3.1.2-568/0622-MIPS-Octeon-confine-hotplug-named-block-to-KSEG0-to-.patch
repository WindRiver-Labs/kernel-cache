From 1bf87be819399091468c54173d6b44498bcc6113 Mon Sep 17 00:00:00 2001
From: Leonid Rosenboim <lrosenboim@caviumnetworks.com>
Date: Fri, 25 Jul 2014 14:39:04 -0700
Subject: [PATCH 622/974] MIPS: Octeon: confine hotplug named block to KSEG0 to
 support N32 apps

Bug# 9924

Signed-off-by: Leonid Rosenboim <lrosenboim@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/smp.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/mips/cavium-octeon/smp.c b/arch/mips/cavium-octeon/smp.c
index d2755e9..fff45b9 100644
--- a/arch/mips/cavium-octeon/smp.c
+++ b/arch/mips/cavium-octeon/smp.c
@@ -257,10 +257,11 @@ static void octeon_smp_setup(void)
 	}
 
 	/* Atomically allocate Hotplug global structure */
+	/* must be KSEG0-addresable to support N32 hotplugged apps */
 	hgp = (struct cvmx_app_hotplug_global *)
 		cvmx_bootmem_alloc_named_range_once(
 			CVMX_APP_HOTPLUG_INFO_REGION_SIZE,
-			0x0, 0x0, 0,
+			0x0, 1ull << 29, 0,
 			CVMX_APP_HOTPLUG_INFO_REGION_NAME,
 			octeon_hotplug_global_init
 		);
-- 
2.6.2

