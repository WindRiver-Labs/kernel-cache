From 361fcb95541eb89763bccfafa48cdf56baae5609 Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Thu, 10 Dec 2015 00:16:03 -0800
Subject: [PATCH 03/13] MIPS:OCTEON: Fix interrupt type for SRIO devices.

SRIO uses rising edge type interrupts for SRIO on cnf75xx model.

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
[Original patch taken from patch set for OCTEON SDK 3.1.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-rapidio.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-rapidio.c b/arch/mips/cavium-octeon/octeon-rapidio.c
index 43a5276..c871f97 100644
--- a/arch/mips/cavium-octeon/octeon-rapidio.c
+++ b/arch/mips/cavium-octeon/octeon-rapidio.c
@@ -1018,7 +1018,7 @@ static void octeon_srio_interrupt_75xx_cfg(int srio_port)
 		ints[i].mport_id = srio_port;
 		domain = octeon_irq_get_block_domain(0, SRIO_INTSN_E);
 		ints[i].irq = irq_create_mapping(domain, ints[i].intsn);
-		irq_set_irq_type(ints[i].irq, IRQ_TYPE_LEVEL_HIGH);
+		irq_set_irq_type(ints[i].irq, IRQ_TYPE_EDGE_RISING);
 	}
 }
 
-- 
1.7.5.4

