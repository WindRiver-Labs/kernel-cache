From acf2e4a932f556cc16c0c91ff855500013786cf0 Mon Sep 17 00:00:00 2001
From: Andreas Herrmann <andreas.herrmann@caviumnetworks.com>
Date: Tue, 1 Jul 2014 18:05:50 -0700
Subject: [PATCH 786/974] MIPS: OCTEON: Unconditionally enable
 CAVIUM_ERET_MISPREDICT_WORKAROUND

Bug #13368

Unconditionally enable CAVIUM_ERET_MISPREDICT_WORKAROUND when kernel
is built with KVM_MIPS_VZ support.

When hardware is available that does not require the workaround we
might need to rethink this decision.

Signed-off-by: Andreas Herrmann <andreas.herrmann@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/Kconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/mips/Kconfig b/arch/mips/Kconfig
index c3c352c..4c11e8a 100644
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@ -772,6 +772,7 @@ config CAVIUM_OCTEON_SOC
 	select SPARSE_IRQ if NUMA
 	select HANDLE_DOMAIN_IRQ
 	select USB_ARCH_HAS_XHCI
+	select CAVIUM_ERET_MISPREDICT_WORKAROUND if KVM_MIPS_VZ
 	help
 	  This option supports all of the Octeon SoCs and reference
 	  boards from Cavium, Inc. The Cavium Octeon processor is a
-- 
2.6.2

