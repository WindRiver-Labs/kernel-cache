From 5e87cea914726643081e4de68de333064af3b9e0 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 28 Feb 2014 13:46:59 -0800
Subject: [PATCH 510/974] MIPS: OCTEON: Whole tree make device tree compatible
 strings consistent for cn7890.

... requires corresponding u-boot changes.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/octeon-irq.c           | 2 +-
 drivers/char/octeon-ocla.c                     | 2 +-
 drivers/net/ethernet/octeon/octeon-bgx-nexus.c | 4 ++--
 drivers/net/ethernet/octeon/octeon-bgx-port.c  | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-irq.c b/arch/mips/cavium-octeon/octeon-irq.c
index 64f8d90..c476d43 100644
--- a/arch/mips/cavium-octeon/octeon-irq.c
+++ b/arch/mips/cavium-octeon/octeon-irq.c
@@ -2791,7 +2791,7 @@ static struct of_device_id __initdata ciu_types[] = {
 	{.compatible = "cavium,octeon-3860-ciu", .data = octeon_irq_init_ciu},
 	{.compatible = "cavium,octeon-3860-gpio", .data = octeon_irq_init_gpio},
 	{.compatible = "cavium,octeon-6880-ciu2", .data = octeon_irq_init_ciu2},
-	{.compatible = "cavium,octeon-7880-ciu3", .data = octeon_irq_init_ciu3},
+	{.compatible = "cavium,octeon-7890-ciu3", .data = octeon_irq_init_ciu3},
 	{.compatible = "cavium,octeon-7130-cib", .data = octeon_irq_init_cib},
 	{}
 };
diff --git a/drivers/char/octeon-ocla.c b/drivers/char/octeon-ocla.c
index 74ac0b3..93a07c9 100644
--- a/drivers/char/octeon-ocla.c
+++ b/drivers/char/octeon-ocla.c
@@ -457,7 +457,7 @@ static const struct file_operations ocla_fops = {
 };
 
 static const struct of_device_id ocla_of_match_table[] = {
-        { .compatible = "cavium,octeon-7xxx-ocla", },
+        { .compatible = "cavium,octeon-7130-ocla", },
         {}
 };
 
diff --git a/drivers/net/ethernet/octeon/octeon-bgx-nexus.c b/drivers/net/ethernet/octeon/octeon-bgx-nexus.c
index 635bd71..ba109b3 100644
--- a/drivers/net/ethernet/octeon/octeon-bgx-nexus.c
+++ b/drivers/net/ethernet/octeon/octeon-bgx-nexus.c
@@ -58,7 +58,7 @@ static int bgx_probe(struct platform_device *pdev)
 	interface = (addr >> 24) & 0xf;
 	numa_node = (addr >> 36) & 0x7;
 	for_each_available_child_of_node(pdev->dev.of_node, child) {
-		if (!of_device_is_compatible(child, "cavium,octeon-7880-bgx-port"))
+		if (!of_device_is_compatible(child, "cavium,octeon-7890-bgx-port"))
 			continue;
 		r = of_property_read_u32(child, "reg", &port);
 		if (r)
@@ -106,7 +106,7 @@ static void bgx_shutdown(struct platform_device *pdev)
 
 static struct of_device_id bgx_match[] = {
 	{
-		.compatible = "cavium,octeon-7880-bgx",
+		.compatible = "cavium,octeon-7890-bgx",
 	},
 	{},
 };
diff --git a/drivers/net/ethernet/octeon/octeon-bgx-port.c b/drivers/net/ethernet/octeon/octeon-bgx-port.c
index 20652bb..6c3799c 100644
--- a/drivers/net/ethernet/octeon/octeon-bgx-port.c
+++ b/drivers/net/ethernet/octeon/octeon-bgx-port.c
@@ -191,7 +191,7 @@ static void bgx_port_shutdown(struct platform_device *pdev)
 
 static struct of_device_id bgx_port_match[] = {
 	{
-		.compatible = "cavium,octeon-7880-bgx-port",
+		.compatible = "cavium,octeon-7890-bgx-port",
 	},
 	{},
 };
-- 
2.6.2

