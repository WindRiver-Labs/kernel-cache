From 749431f2ec083bd29e88731487898fe42d40aeb0 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 24 Feb 2014 13:46:59 -0800
Subject: [PATCH 480/974] MIPS/OCTEON: Fix FPA breakage in BCH code.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/cavium-octeon/executive/cvmx-bch.c | 4 ++--
 arch/mips/include/asm/octeon/cvmx-bch.h      | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/executive/cvmx-bch.c b/arch/mips/cavium-octeon/executive/cvmx-bch.c
index 6a515fc..a0628c1 100644
--- a/arch/mips/cavium-octeon/executive/cvmx-bch.c
+++ b/arch/mips/cavium-octeon/executive/cvmx-bch.c
@@ -50,7 +50,7 @@
 # include <asm/octeon/cvmx-config.h>
 # include <asm/octeon/cvmx-bch-defs.h>
 # include <asm/octeon/cvmx-bch.h>
-# include <asm/octeon/cvmx-fpa.h>
+# include <asm/octeon/cvmx-fpa1.h>
 # include <asm/octeon/cvmx-helper-fpa.h>
 # include <asm/octeon/cvmx-cmd-queue.h>
 #elif defined(CVMX_BUILD_FOR_UBOOT)
@@ -108,7 +108,7 @@ int cvmx_bch_initialize(void)
 
 	debug("pool: %d, pool size: %llu\n", bch_pool, bch_pool_size);
 	/* Setup the FPA */
-	cvmx_fpa_enable();
+	cvmx_fpa1_enable();
 
 	bch_pool = cvm_oct_alloc_fpa_pool(bch_pool, bch_pool_size);
 	if (bch_pool < 0) {
diff --git a/arch/mips/include/asm/octeon/cvmx-bch.h b/arch/mips/include/asm/octeon/cvmx-bch.h
index b0cbd6a..481d2af 100644
--- a/arch/mips/include/asm/octeon/cvmx-bch.h
+++ b/arch/mips/include/asm/octeon/cvmx-bch.h
@@ -51,7 +51,7 @@
 #ifdef CVMX_BUILD_FOR_LINUX_KERNEL
 # include <asm/octeon/octeon.h>
 # include <asm/octeon/cvmx-bch-defs.h>
-# include <asm/octeon/cvmx-fpa.h>
+# include <asm/octeon/cvmx-fpa1.h>
 #elif defined(CVMX_BUILD_FOR_UBOOT)
 # include <common.h>
 # include <asm/arch/cvmx.h>
-- 
2.6.2

