From 2e11cd5c7d39af35d8e5570f52ba1541e387fc21 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Thu, 6 Feb 2014 13:46:59 -0800
Subject: [PATCH 573/974] netdev: octeon3-ethernet: Autoconf the ports if no
 PHY present.

This allows them to work on MAC-to-MAC mode.

Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.2-568]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/octeon/octeon-bgx-port.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/octeon/octeon-bgx-port.c b/drivers/net/ethernet/octeon/octeon-bgx-port.c
index 11cefba..373b268 100644
--- a/drivers/net/ethernet/octeon/octeon-bgx-port.c
+++ b/drivers/net/ethernet/octeon/octeon-bgx-port.c
@@ -254,6 +254,7 @@ int bgx_port_enable(struct net_device *netdev)
 	}
 
 	if (priv->phy_np == NULL) {
+		cvmx_helper_link_autoconf(priv->ipd_port);
 		netif_carrier_on(netdev);
 		return 0;
 	}
-- 
2.6.2

