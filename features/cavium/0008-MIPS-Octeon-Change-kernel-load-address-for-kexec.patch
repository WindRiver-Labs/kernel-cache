From a9d1cada977c7c7c585658860d5b521127d0e68b Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Thu, 7 Mar 2013 18:10:24 +0800
Subject: [PATCH 08/22] MIPS: Octeon: Change kernel load address for kexec

commit edd3b404f84317b95d08a01514bc59a809f300ab changed kernel load
address to 0x100000 from 0x1100000 for making more memory usable.
But, kexec tools assume the memory segment starts from 0x1000000, so
kexec tools can't load kernel image started from 0x100000.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/Makefile |    5 +++++
 1 file changed, 5 insertions(+)

diff --git a/arch/mips/Makefile b/arch/mips/Makefile
index 2f21d3a..afc757f 100644
--- a/arch/mips/Makefile
+++ b/arch/mips/Makefile
@@ -224,6 +224,11 @@ endif
 #
 include $(srctree)/arch/mips/Kbuild.platforms
 
+
+ifdef CONFIG_KEXEC
+load-$(CONFIG_CPU_CAVIUM_OCTEON)        = 0xffffffff81100000
+endif
+
 ifdef CONFIG_PHYSICAL_START
 load-y                                  = $(CONFIG_PHYSICAL_START)
 endif
-- 
1.7.10.4

