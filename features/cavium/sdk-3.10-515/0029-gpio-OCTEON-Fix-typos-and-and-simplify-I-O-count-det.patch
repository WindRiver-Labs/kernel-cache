From 313269847abeb0d84893e0cefb00e45a7be5041c Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 13 Apr 2012 09:50:12 -0700
Subject: [PATCH 029/382] gpio/OCTEON: Fix typos and and simplify I/O count determination

Based on SDK octeon3_3.10.

Also let ngpio be 20, that will cover all known chips and on chips
that have only 16, nobody will be requesting 16..19 so we are good
there too.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Leonid Rosenboim <lrosenboim@caviumnetworks.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/gpio/gpio-octeon.c |   11 ++---------
 1 files changed, 2 insertions(+), 9 deletions(-)

diff --git a/drivers/gpio/gpio-octeon.c b/drivers/gpio/gpio-octeon.c
index e679b44..1b98ae6 100644
--- a/drivers/gpio/gpio-octeon.c
+++ b/drivers/gpio/gpio-octeon.c
@@ -113,14 +113,7 @@ static int __init octeon_gpio_probe(struct platform_device *pdev)
 	chip->owner = THIS_MODULE;
 	chip->base = 0;
 	chip->can_sleep = 0;
-
-	if (OCTEON_IS_MODEL(OCTEON_CN66XX) ||
-	    OCTEON_IS_MODEL(OCTEON_CN61XX) ||
-	    OCTEON_IS_MODEL(OCTEON_CNF71XX))
-		chip->ngpio = 20;
-	else
-		chip->ngpio = 16;
-
+	chip->ngpio = 20;
 	chip->direction_input = octeon_gpio_dir_in;
 	chip->get = octeon_gpio_get;
 	chip->direction_output = octeon_gpio_dir_out;
@@ -146,7 +139,7 @@ static struct of_device_id octeon_gpio_match[] = {
 	},
 	{},
 };
-MODULE_DEVICE_TABLE(of, octeon_mgmt_match);
+MODULE_DEVICE_TABLE(of, octeon_gpio_match);
 
 static struct platform_driver octeon_gpio_driver = {
 	.driver = {
-- 
1.7.0.4

