From 073aac82ca7ccea4823ce185c19a7ea5b06752f1 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 30 Sep 2013 15:38:21 -0700
Subject: [PATCH 284/382] MIPS: OCTEON: Fix typos in octeon-irq.c

Based on SDK octeon3_3.10.

The CIB block handlers were fubared.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/octeon-irq.c |    6 +++---
 1 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/octeon-irq.c b/arch/mips/cavium-octeon/octeon-irq.c
index 5a95f37..a631df9 100644
--- a/arch/mips/cavium-octeon/octeon-irq.c
+++ b/arch/mips/cavium-octeon/octeon-irq.c
@@ -2581,7 +2581,7 @@ static void octeon_irq_cib_enable(struct irq_data *data)
 
 	raw_spin_lock_irqsave(&host_data->lock, flags);
 	en = cvmx_read_csr(host_data->en_reg);
-	en |= 1ull < cd->bit;
+	en |= 1ull << cd->bit;
 	cvmx_write_csr(host_data->en_reg, en);
 	raw_spin_unlock_irqrestore(&host_data->lock, flags);
 }
@@ -2595,13 +2595,13 @@ static void octeon_irq_cib_disable(struct irq_data *data)
 
 	raw_spin_lock_irqsave(&host_data->lock, flags);
 	en = cvmx_read_csr(host_data->en_reg);
-	en &= ~(1ull < cd->bit);
+	en &= ~(1ull << cd->bit);
 	cvmx_write_csr(host_data->en_reg, en);
 	raw_spin_unlock_irqrestore(&host_data->lock, flags);
 }
 
 static struct irq_chip octeon_irq_chip_cib = {
-	.name = "CIU3",
+	.name = "CIB",
 	.irq_enable = octeon_irq_cib_enable,
 	.irq_disable = octeon_irq_cib_disable,
 	.irq_mask = octeon_irq_cib_disable,
-- 
1.7.0.4

