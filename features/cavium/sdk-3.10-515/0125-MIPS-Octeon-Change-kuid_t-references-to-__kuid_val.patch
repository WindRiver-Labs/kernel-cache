From 5a40442d5edd188b098dc4bd3d894ce27bc64854 Mon Sep 17 00:00:00 2001
From: Corey Minyard <cminyard@mvista.com>
Date: Fri, 14 Jun 2013 13:05:06 -0500
Subject: [PATCH 125/382] MIPS: Octeon: Change kuid_t references to __kuid_val()

Based on SDK octeon3_3.10.

There were some arithmetic references to some kuid_t values.  That
won't work if CONFIG_UIDGID_STRICT_TYPE_CHECKS is set, use the
proper reference.

Signed-off-by: Corey Minyard <cminyard@mvista.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/setup.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/mips/cavium-octeon/setup.c b/arch/mips/cavium-octeon/setup.c
index 73ce877..e6134db 100644
--- a/arch/mips/cavium-octeon/setup.c
+++ b/arch/mips/cavium-octeon/setup.c
@@ -523,10 +523,10 @@ static int is_task_and_current_same(struct task_struct *t)
 	const struct cred *cred = current_cred(), *tcred;
 
 	tcred = __task_cred(t);
-	if ((cred->euid ^ tcred->suid) &&
-	    (cred->euid ^ tcred->uid) &&
-	    (cred->uid  ^ tcred->suid) &&
-	    (cred->uid  ^ tcred->uid)) {
+	if ((__kuid_val(cred->euid) ^ __kuid_val(tcred->suid)) &&
+	    (__kuid_val(cred->euid) ^ __kuid_val(tcred->uid)) &&
+	    (__kuid_val(cred->uid)  ^ __kuid_val(tcred->suid)) &&
+	    (__kuid_val(cred->uid)  ^ __kuid_val(tcred->uid))) {
 		return 0;
 	}
 	return 1;
-- 
1.7.0.4

