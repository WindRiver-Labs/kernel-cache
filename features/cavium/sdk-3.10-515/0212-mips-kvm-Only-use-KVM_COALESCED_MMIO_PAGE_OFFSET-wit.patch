From 6f78f94ada40483af9490c460086d93f6e0f5f32 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Wed, 5 Jun 2013 15:17:01 -0700
Subject: [PATCH 212/382] mips/kvm: Only use KVM_COALESCED_MMIO_PAGE_OFFSET with KVM_MIPS_TE

Based on SDK octeon3_3.10.

The forthcoming MIPS VZ code doesn't currently use this, so it must
only be enabled for KVM_MIPS_TE.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/include/asm/kvm_host.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/arch/mips/include/asm/kvm_host.h b/arch/mips/include/asm/kvm_host.h
index df2eca7..e011cd6 100644
--- a/arch/mips/include/asm/kvm_host.h
+++ b/arch/mips/include/asm/kvm_host.h
@@ -25,7 +25,9 @@
 /* memory slots that does not exposed to userspace */
 #define KVM_PRIVATE_MEM_SLOTS 	0
 
+#ifdef CONFIG_KVM_MIPS_TE
 #define KVM_COALESCED_MMIO_PAGE_OFFSET 1
+#endif
 
 /* Don't support huge pages */
 #define KVM_HPAGE_GFN_SHIFT(x)	0
-- 
1.7.0.4

