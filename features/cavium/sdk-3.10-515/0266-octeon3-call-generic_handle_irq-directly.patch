From a5d116d2a0f3da7c153cdd038454388a3b6e1cba Mon Sep 17 00:00:00 2001
From: Stijn Devriendt <sdevrien@cisco.com>
Date: Mon, 9 Sep 2013 10:29:21 -0700
Subject: [PATCH 266/382] octeon3: call generic_handle_irq directly

Based on SDK octeon3_3.10.

We are already in IRQ context, so we can call generic_handle_irq directly
instead of re-entering IRQ context via do_IRQ.

Signed-off-by: Stijn Devriendt <sdevrien@cisco.com>
Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/pci/msi-octeon.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/mips/pci/msi-octeon.c b/arch/mips/pci/msi-octeon.c
index 1ec3656..236038b 100644
--- a/arch/mips/pci/msi-octeon.c
+++ b/arch/mips/pci/msi-octeon.c
@@ -437,7 +437,7 @@ static irqreturn_t __octeon_msi_do_interrupt(int index, u64 msi_bits)
 
 		irq = octeon_irq_msi_to_irq(bit + 64 * index);
 
-		do_IRQ(irq);
+		generic_handle_irq(irq);
 		return IRQ_HANDLED;
 	}
 	return IRQ_NONE;
-- 
1.7.0.4

