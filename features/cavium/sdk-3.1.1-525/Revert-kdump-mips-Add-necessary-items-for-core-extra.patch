From df4e5cc77d49037029931f044acce3a20322f209 Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Wed, 7 Jan 2015 05:24:01 +0000
Subject: [PATCH] Revert "kdump mips: Add necessary items for core extraction"

The reverted commit introduces the following compile warning:
 arch/mips/kernel/machine_kexec.c:131:2: error: implicit declaration of
 function 'VMCOREINFO_ADDRESS' [-Werror=implicit-function-declaration]

Since the kexec and kdump is not supported for octeon3, so revert
the commit.

Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/kernel/machine_kexec.c |   30 ------------------------------
 1 files changed, 0 insertions(+), 30 deletions(-)

diff --git a/arch/mips/kernel/machine_kexec.c b/arch/mips/kernel/machine_kexec.c
index e3dc83f..992e184 100644
--- a/arch/mips/kernel/machine_kexec.c
+++ b/arch/mips/kernel/machine_kexec.c
@@ -12,7 +12,6 @@
 
 #include <asm/cacheflush.h>
 #include <asm/page.h>
-#include <asm/pgtable.h>
 
 extern const unsigned char relocate_new_kernel[];
 extern const size_t relocate_new_kernel_size;
@@ -109,32 +108,3 @@ machine_kexec(struct kimage *image)
 #endif
 	((noretfun_t) reboot_code_buffer)();
 }
-
-void arch_crash_save_vmcoreinfo(void)
-{
-	VMCOREINFO_NUMBER(PAGE_SHIFT);
-	VMCOREINFO_NUMBER(PGD_ORDER);
-#if defined(CONFIG_32BIT) || !defined(CONFIG_PAGE_SIZE_64KB)
-	VMCOREINFO_NUMBER(PMD_ORDER);
-#endif
-	VMCOREINFO_NUMBER(PTE_ORDER);
-	VMCOREINFO_NUMBER(_PAGE_PRESENT);
-#ifdef CONFIG_MIPS_HUGE_TLB_SUPPORT
-	VMCOREINFO_NUMBER(_PAGE_HUGE);
-#endif
-#ifdef CONFIG_64BIT
-#ifdef CONFIG_MAPPED_KERNEL
-	VMCOREINFO_ADDRESS(_text);
-	VMCOREINFO_ADDRESS(_end);
-	VMCOREINFO_ADDRESS(phys_to_kernel_offset);
-#endif
-	VMCOREINFO_ADDRESS(CKSEG0);
-	VMCOREINFO_ADDRESS(CKSSEG);
-#else /* CONFIG_64BIT */
-	VMCOREINFO_ADDRESS(PAGE_OFFSET);
-	VMCOREINFO_ADDRESS(PHYS_OFFSET);
-#endif /* CONFIG_64BIT */
-
-	VMCOREINFO_ADDRESS(IO_BASE);
-	VMCOREINFO_NUMBER(_PFN_SHIFT);
-}
-- 
1.7.5.4

