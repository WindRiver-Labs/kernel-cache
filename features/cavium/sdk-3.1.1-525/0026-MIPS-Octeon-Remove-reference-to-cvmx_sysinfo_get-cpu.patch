From c07e2e52d2cd191da1efddf4fd951bce67955586 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Tue, 6 Nov 2012 14:26:43 -0800
Subject: [PATCH 026/122] MIPS: Octeon: Remove reference to
 cvmx_sysinfo_get()->cpu_clock_hz from cvmx.h

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 9b1d01b447eef25f425251c2bdc1f64bbd5e2fb8
Description:

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/include/asm/octeon/cvmx.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/include/asm/octeon/cvmx.h b/arch/mips/include/asm/octeon/cvmx.h
index f991e77..a238d9d 100644
--- a/arch/mips/include/asm/octeon/cvmx.h
+++ b/arch/mips/include/asm/octeon/cvmx.h
@@ -417,7 +417,7 @@ static inline uint64_t cvmx_get_cycle_global(void)
 	int result;							\
 	do {								\
 		uint64_t done = cvmx_get_cycle() + (uint64_t)timeout_usec * \
-			cvmx_sysinfo_get()->cpu_clock_hz / 1000000;	\
+			octeon_get_clock_rate() / 1000000;		\
 		type c;							\
 		while (1) {						\
 			c.u64 = cvmx_read_csr(address);			\
-- 
1.8.2.1

