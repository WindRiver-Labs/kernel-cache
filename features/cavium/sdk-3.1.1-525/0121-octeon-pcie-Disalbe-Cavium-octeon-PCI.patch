From a0d8c9c7c85eb5d4dc9bc82c9340b7801b52aa73 Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Wed, 22 Oct 2014 16:49:32 +0800
Subject: [PATCH 121/122] octeon-pcie: Disalbe Cavium octeon PCI

Cavium octeon PCI driver is not supported.
This is a workaround. This change will be reverted after
the PCI driver is supported.

Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/Kconfig      | 1 -
 arch/mips/pci/Makefile | 2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)

diff --git a/arch/mips/Kconfig b/arch/mips/Kconfig
index fd5451f..073edc2 100644
--- a/arch/mips/Kconfig
+++ b/arch/mips/Kconfig
@@ -716,7 +716,6 @@ config CAVIUM_OCTEON_SOC
 	select SYS_HAS_EARLY_PRINTK
 	select SYS_HAS_CPU_CAVIUM_OCTEON
 	select SWAP_IO_SPACE
-	select HW_HAS_PCI
 	select ZONE_DMA32
 	select USB_ARCH_HAS_OHCI
 	select USB_ARCH_HAS_EHCI
diff --git a/arch/mips/pci/Makefile b/arch/mips/pci/Makefile
index 137f2a6..579fdee 100644
--- a/arch/mips/pci/Makefile
+++ b/arch/mips/pci/Makefile
@@ -54,7 +54,7 @@ obj-$(CONFIG_TOSHIBA_RBTX4938)	+= fixup-rbtx4938.o
 obj-$(CONFIG_VICTOR_MPC30X)	+= fixup-mpc30x.o
 obj-$(CONFIG_ZAO_CAPCELLA)	+= fixup-capcella.o
 obj-$(CONFIG_MIKROTIK_RB532)	+= pci-rc32434.o ops-rc32434.o fixup-rc32434.o
-obj-$(CONFIG_CAVIUM_OCTEON_SOC) += pci-octeon.o pcie-octeon.o
+obj-$(CONFIG_HW_HAS_PCI) 	+= pci-octeon.o pcie-octeon.o
 obj-$(CONFIG_CPU_XLR)		+= pci-xlr.o
 obj-$(CONFIG_CPU_XLP)		+= pci-xlp.o
 
-- 
1.8.2.1

