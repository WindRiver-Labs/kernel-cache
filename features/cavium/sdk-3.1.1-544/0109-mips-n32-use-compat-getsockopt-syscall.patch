From 2073023cfa383ace92e0400db03c64dfe3fa78f6 Mon Sep 17 00:00:00 2001
From: Sorin Dumitru <sdumitru@ixiacom.com>
Date: Fri, 20 Jun 2014 14:23:35 +0300
Subject: [PATCH 109/202] mips: n32: use compat getsockopt syscall

The IP_PKTOPTIONS sockopt puts control messages
in option_values, these need to be handled
differently in the compat case. This is already
done through the MSG_CMSG_COMPAT flag, we just
need to use compat_sys_getsockopt which sets that
flag.

Signed-off-by: Sorin Dumitru <sdumitru@ixiacom.com>
Signed-off-by: David Daney <david.daney@cavium.com>
[Original patch taken from Cavium SDK 3.1.1-544]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/kernel/scall64-n32.S | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index cab1507..4d4282b 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -158,7 +158,7 @@ EXPORT(sysn32_call_table)
 	PTR	sys_getpeername
 	PTR	sys_socketpair
 	PTR	compat_sys_setsockopt
-	PTR	sys_getsockopt
+	PTR	compat_sys_getsockopt
 	PTR	__sys_clone			/* 6055 */
 	PTR	__sys_fork
 	PTR	compat_sys_execve
-- 
1.8.2.1

