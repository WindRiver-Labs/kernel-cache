From f06b5c3f67fb2958957e469010dae5d653350965 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 13 Feb 2015 15:24:56 +0530
Subject: [PATCH 116/148] mips: n32: use compat getsockopt syscall

Commit fed3b09f5f2c83c831f638b7ae2d6083850eb08e from
git://git.yoctoproject.org/linux-yocto-3.14

The IP_PKTOPTIONS sockopt puts control messages in option_values, these need to be handled differently in the compat case. This is already
done through the MSG_CMSG_COMPAT flag, we just need to use compat_sys_getsockopt which sets that flag.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Sorin Dumitru <sdumitru@ixiacom.com>
Signed-off-by: Abhishek Paliwal <abhishek.paliwal@aricent.com>
---
 arch/mips/kernel/scall64-n32.S | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/kernel/scall64-n32.S b/arch/mips/kernel/scall64-n32.S
index f7e5b72..1037bb5 100644
--- a/arch/mips/kernel/scall64-n32.S
+++ b/arch/mips/kernel/scall64-n32.S
@@ -159,7 +159,7 @@ EXPORT(sysn32_call_table)
 	PTR	sys_getpeername
 	PTR	sys_socketpair
 	PTR	compat_sys_setsockopt
-	PTR	sys_getsockopt
+	PTR	compat_sys_getsockopt
 	PTR	__sys_clone			/* 6055 */
 	PTR	__sys_fork
 	PTR	compat_sys_execve
-- 
1.8.2.1

