From 8afeb7876b68700ce15f5465628c7cdba2c2eee9 Mon Sep 17 00:00:00 2001
From: Peter Swain <peter.swain@cavium.com>
Date: Tue, 19 Aug 2014 00:45:12 -0700
Subject: [PATCH 129/202] mips: octeon-ethernet: extend ethtool PCS-reset to
 30mS

PHY-reset for qca833x can need longer than 10mS

Signed-off-by: Peter Swain <peter.swain@cavium.com>
[Original patch taken from Cavium SDK 3.1.1-544]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/net/ethernet/octeon/ethernet-mdio.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/octeon/ethernet-mdio.c b/drivers/net/ethernet/octeon/ethernet-mdio.c
index 79adb11..ec9d916 100644
--- a/drivers/net/ethernet/octeon/ethernet-mdio.c
+++ b/drivers/net/ethernet/octeon/ethernet-mdio.c
@@ -163,7 +163,7 @@ static int cvm_eth_reset(struct net_device *dev, u32 *maskp)
 			down_info.s.link_up = 0;
 			cvmx_helper_link_set(priv->ipd_port, down_info);
 			set_port_pcs(dev, 0);
-			msleep(10);
+			msleep(30);
 			set_port_pcs(dev, 1);
 			link_info.s.link_up = 1;
 			cvmx_helper_link_set(priv->ipd_port, link_info);
-- 
1.8.2.1

