From ddbdab13400da1161638e1c3fe4f9dea3ee590d8 Mon Sep 17 00:00:00 2001
From: Peter Swain <pswain@cavium.com>
Date: Tue, 16 Sep 2014 16:45:23 -0700
Subject: [PATCH 145/202] usb: dwc3: simplify OCTEON ifdefs

Signed-off-by: Peter Swain <peter.swain@cavium.com>
[Original patch taken from Cavium SDK 3.1.1-544]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/usb/dwc3/core.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

diff --git a/drivers/usb/dwc3/core.c b/drivers/usb/dwc3/core.c
index f1e5a51..64f8aa8 100644
--- a/drivers/usb/dwc3/core.c
+++ b/drivers/usb/dwc3/core.c
@@ -105,7 +105,7 @@ static void dwc3_core_soft_reset(struct dwc3 *dwc)
 	dwc3_writel(dwc->regs, DWC3_GUSB2PHYCFG(0), reg);
 
 	index = (((uint64_t)(dwc->regs) & 0x10000000000ull) ? 1:0);
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	octeon3_usb_phy_reset(index);
 #else
 	usb_phy_init(dwc->usb2_phy);
@@ -369,7 +369,7 @@ err0:
 
 static void dwc3_core_exit(struct dwc3 *dwc)
 {
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_shutdown(dwc->usb2_phy);
 	usb_phy_shutdown(dwc->usb3_phy);
 #endif
@@ -475,7 +475,7 @@ static int dwc3_probe(struct platform_device *pdev)
 	dwc->regs_size	= resource_size(res);
 	dwc->dev	= dev;
 
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	dev->dma_mask	= &xhci_octeon_dma_mask;
 #else
 	dev->dma_mask	= dev->parent->dma_mask;
@@ -608,7 +608,7 @@ static int dwc3_remove(struct platform_device *pdev)
 {
 	struct dwc3	*dwc = platform_get_drvdata(pdev);
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_set_suspend(dwc->usb2_phy, 1);
 	usb_phy_set_suspend(dwc->usb3_phy, 1);
 #endif
@@ -638,7 +638,7 @@ static int dwc3_remove(struct platform_device *pdev)
 	dwc3_free_event_buffers(dwc);
 	dwc3_core_exit(dwc);
 
-#if defined(CONFIG_USB_XHCI_HCD_OCTEON) || defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	xhci_octeon_stop(pdev);
 #endif
 	return 0;
@@ -710,7 +710,7 @@ static int dwc3_suspend(struct device *dev)
 	dwc->gctl = dwc3_readl(dwc->regs, DWC3_GCTL);
 	spin_unlock_irqrestore(&dwc->lock, flags);
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_shutdown(dwc->usb3_phy);
 	usb_phy_shutdown(dwc->usb2_phy);
 #endif
@@ -723,7 +723,7 @@ static int dwc3_resume(struct device *dev)
 	struct dwc3	*dwc = dev_get_drvdata(dev);
 	unsigned long	flags;
 
-#if !defined(CONFIG_USB_XHCI_HCD_OCTEON) && !defined(CONFIG_USB_XHCI_HCD_OCTEON_MODULE)
+#if !IS_ENABLED(CONFIG_USB_XHCI_HCD_OCTEON)
 	usb_phy_init(dwc->usb3_phy);
 	usb_phy_init(dwc->usb2_phy);
 #endif
-- 
1.8.2.1

