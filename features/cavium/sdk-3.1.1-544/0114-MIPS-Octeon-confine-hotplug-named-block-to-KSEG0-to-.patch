From 52d762157a0debd50dc7777047610399f913de6a Mon Sep 17 00:00:00 2001
From: Leonid Rosenboim <lrosenboim@caviumnetworks.com>
Date: Fri, 25 Jul 2014 10:21:10 -0700
Subject: [PATCH 114/202] MIPS: Octeon: confine hotplug named block to KSEG0 to
 support N32 apps

Signed-off-by: Leonid Rosenboim <lrosenboim@caviumnetworks.com>
[Original patch taken from Cavium SDK 3.1.1-544]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/mips/cavium-octeon/smp.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/mips/cavium-octeon/smp.c b/arch/mips/cavium-octeon/smp.c
index d2755e9..fff45b9 100644
--- a/arch/mips/cavium-octeon/smp.c
+++ b/arch/mips/cavium-octeon/smp.c
@@ -257,10 +257,11 @@ static void octeon_smp_setup(void)
 	}
 
 	/* Atomically allocate Hotplug global structure */
+	/* must be KSEG0-addresable to support N32 hotplugged apps */
 	hgp = (struct cvmx_app_hotplug_global *)
 		cvmx_bootmem_alloc_named_range_once(
 			CVMX_APP_HOTPLUG_INFO_REGION_SIZE,
-			0x0, 0x0, 0,
+			0x0, 1ull << 29, 0,
 			CVMX_APP_HOTPLUG_INFO_REGION_NAME,
 			octeon_hotplug_global_init
 		);
-- 
1.8.2.1

