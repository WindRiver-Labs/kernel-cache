From 1d9d231e299ddb32800642207f07281292963b05 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 30 May 2014 16:53:58 -0700
Subject: [PATCH 504/518] netdev: octeon3-ethernet: Remove some cvmx probing
 calls.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 462a1dbfd568449e49e79461933482368f5df2ad
Description:

They disable the link, thus preventing 10G PHYs from sensing link state.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon3-ethernet.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/octeon/octeon3-ethernet.c b/drivers/net/ethernet/octeon/octeon3-ethernet.c
index 2efba71..81273ca 100644
--- a/drivers/net/ethernet/octeon/octeon3-ethernet.c
+++ b/drivers/net/ethernet/octeon/octeon3-ethernet.c
@@ -611,8 +611,7 @@ static int octeon3_eth_ndo_init(struct net_device *netdev)
 	priv->rx_buf_count = num_packet_buffers;
 
 	ipd_port = cvmx_helper_get_ipd_port(priv->xiface, priv->port_index);
-	cvmx_helper_interface_enumerate(priv->xiface);
-	cvmx_helper_interface_probe(priv->xiface);
+
 	r =  __cvmx_pko3_config_gen_interface(priv->xiface, priv->port_index, 1, false);
 	if (r)
 		return -ENODEV;
-- 
1.9.1

