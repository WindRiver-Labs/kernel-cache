From 30af29b975e4d267405b48e651ddcfa1882f402d Mon Sep 17 00:00:00 2001
From: Chandrakala Chavva <cchavva@caviumnetworks.com>
Date: Sat, 28 Sep 2013 18:10:06 -0700
Subject: [PATCH 260/518] MIPS: OCTEON: Sync up SE files.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 0698a5bb2c84dffcb0a33c64aa1881ae87d98ffd
Description:

Signed-off-by: Chandrakala Chavva <cchavva@caviumnetworks.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/executive/cvmx-helper-agl.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/mips/cavium-octeon/executive/cvmx-helper-agl.c b/arch/mips/cavium-octeon/executive/cvmx-helper-agl.c
index c3e6ce2..a56fc07 100644
--- a/arch/mips/cavium-octeon/executive/cvmx-helper-agl.c
+++ b/arch/mips/cavium-octeon/executive/cvmx-helper-agl.c
@@ -233,7 +233,9 @@ int __cvmx_helper_agl_enable(int interface)
  */
 cvmx_helper_link_info_t __cvmx_helper_agl_link_get(int ipd_port)
 {
-	return cvmx_agl_link_get(ipd_port);
+	int interface = cvmx_helper_get_interface_num(ipd_port);
+	int port = cvmx_helper_agl_get_port(interface);
+	return cvmx_agl_link_get(port);
 }
 
 /**
@@ -251,5 +253,7 @@ cvmx_helper_link_info_t __cvmx_helper_agl_link_get(int ipd_port)
  */
 int __cvmx_helper_agl_link_set(int ipd_port, cvmx_helper_link_info_t link_info)
 {
-	return cvmx_agl_link_set(ipd_port, link_info, 1);	
+	int interface = cvmx_helper_get_interface_num(ipd_port);
+	int port = cvmx_helper_agl_get_port(interface);
+	return cvmx_agl_link_set(port, link_info, 1);
 }
-- 
1.9.1

