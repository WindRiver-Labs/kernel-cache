From 84015a400bc065f678ea0d59028f6058f5aec71c Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 5 May 2014 15:56:24 -0400
Subject: [PATCH 455/518] netdev: octeon3-ethernet: Allocate PKI qpg per port.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 1a273050a64ea658460f462a1230427acba34d4e
Description:

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon3-ethernet.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/octeon/octeon3-ethernet.c b/drivers/net/ethernet/octeon/octeon3-ethernet.c
index 3fea4d0..d5d5ebc 100644
--- a/drivers/net/ethernet/octeon/octeon3-ethernet.c
+++ b/drivers/net/ethernet/octeon/octeon3-ethernet.c
@@ -570,6 +570,7 @@ static int octeon3_eth_ndo_init(struct net_device *netdev)
 		goto err;
 	}
 	prt_schd->style = -1; /* Allocate net style per port */
+	prt_schd->qpg_base = -1;
 	prt_schd->aura_per_prt = true;
 	prt_schd->aura = priv->pki_laura;
 	prt_schd->sso_grp_per_prt = true;
@@ -737,7 +738,6 @@ static int octeon3_eth_ndo_start_xmit(struct sk_buff *skb, struct net_device *ne
 	 * submitting the command below
 	 */
 	wmb();
-
 	send_hdr.u64 = 0;
 #ifdef __LITTLE_ENDIAN
 	send_hdr.s.le = 1;
-- 
1.9.1

