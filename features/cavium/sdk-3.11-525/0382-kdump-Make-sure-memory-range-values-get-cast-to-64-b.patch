From 091dbc84007e0c3e9da4f0be235e12b5b571a624 Mon Sep 17 00:00:00 2001
From: Corey Minyard <cminyard@mvista.com>
Date: Thu, 6 Feb 2014 17:22:10 -0600
Subject: [PATCH 382/518] kdump: Make sure memory range values get cast to
 64-bits

Source: Cavium Networks, Inc
MR: 5283
Type: Defect Fix
Disposition: Local
ChangeID: ce6e78c3b359f7d40d3149fda744959e6b67fef1
Description:

Cast properly to make sure the memory values are properly 64-bit.

Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 kernel/kexec.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/kernel/kexec.c b/kernel/kexec.c
index b302308..1459bdb 100644
--- a/kernel/kexec.c
+++ b/kernel/kexec.c
@@ -1564,7 +1564,8 @@ unsigned long __attribute__ ((weak)) paddr_vmcoreinfo_note(void)
 static int
 save_ram_range(unsigned long start, unsigned long size, void *dummy)
 {
-	VMCOREINFO_MEMRANGE(sysram, start << PAGE_SHIFT, size << PAGE_SHIFT);
+	VMCOREINFO_MEMRANGE(sysram, ((unsigned long long) start) << PAGE_SHIFT,
+			    ((unsigned long long) size) << PAGE_SHIFT);
 	return 0;
 }
 
-- 
1.9.1

