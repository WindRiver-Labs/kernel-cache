From 08881fb2472023b2b85762db19454b50af99a9ef Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 24 Mar 2014 12:20:24 -0700
Subject: [PATCH 419/518] MIPS/OCTEON: Fix FPA breakage in BCH code.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 8d659cd3c0c17910ce1cbc4b7383d14f78bc408e
Description:

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/executive/cvmx-bch.c | 4 ++--
 arch/mips/include/asm/octeon/cvmx-bch.h      | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/executive/cvmx-bch.c b/arch/mips/cavium-octeon/executive/cvmx-bch.c
index 6a515fc..a0628c1 100644
--- a/arch/mips/cavium-octeon/executive/cvmx-bch.c
+++ b/arch/mips/cavium-octeon/executive/cvmx-bch.c
@@ -50,7 +50,7 @@
 # include <asm/octeon/cvmx-config.h>
 # include <asm/octeon/cvmx-bch-defs.h>
 # include <asm/octeon/cvmx-bch.h>
-# include <asm/octeon/cvmx-fpa.h>
+# include <asm/octeon/cvmx-fpa1.h>
 # include <asm/octeon/cvmx-helper-fpa.h>
 # include <asm/octeon/cvmx-cmd-queue.h>
 #elif defined(CVMX_BUILD_FOR_UBOOT)
@@ -108,7 +108,7 @@ int cvmx_bch_initialize(void)
 
 	debug("pool: %d, pool size: %llu\n", bch_pool, bch_pool_size);
 	/* Setup the FPA */
-	cvmx_fpa_enable();
+	cvmx_fpa1_enable();
 
 	bch_pool = cvm_oct_alloc_fpa_pool(bch_pool, bch_pool_size);
 	if (bch_pool < 0) {
diff --git a/arch/mips/include/asm/octeon/cvmx-bch.h b/arch/mips/include/asm/octeon/cvmx-bch.h
index b0cbd6a..481d2af 100644
--- a/arch/mips/include/asm/octeon/cvmx-bch.h
+++ b/arch/mips/include/asm/octeon/cvmx-bch.h
@@ -51,7 +51,7 @@
 #ifdef CVMX_BUILD_FOR_LINUX_KERNEL
 # include <asm/octeon/octeon.h>
 # include <asm/octeon/cvmx-bch-defs.h>
-# include <asm/octeon/cvmx-fpa.h>
+# include <asm/octeon/cvmx-fpa1.h>
 #elif defined(CVMX_BUILD_FOR_UBOOT)
 # include <common.h>
 # include <asm/arch/cvmx.h>
-- 
1.9.1

