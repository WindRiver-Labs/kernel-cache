From 4d49d95bdabca084ec55c5500dd755c67caa9382 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Mon, 2 Jun 2014 11:49:03 -0700
Subject: [PATCH 506/518] netdev: octeon3-ethernet: Fix little endian RX.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 5f88d64bb13ddebdf70dbfde7d38d98506031fb6
Description:

When build for little-endian, we must set PKI accordingly.  PKO was
already OK.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/net/ethernet/octeon/octeon3-ethernet.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/net/ethernet/octeon/octeon3-ethernet.c b/drivers/net/ethernet/octeon/octeon3-ethernet.c
index 81273ca..6fc4f3c 100644
--- a/drivers/net/ethernet/octeon/octeon3-ethernet.c
+++ b/drivers/net/ethernet/octeon/octeon3-ethernet.c
@@ -670,7 +670,11 @@ static int octeon3_eth_ndo_init(struct net_device *netdev)
 	later_skip = 8 * 16;
 	pki_prt_cfg.style_cfg.parm_cfg.first_skip = first_skip;
 	pki_prt_cfg.style_cfg.parm_cfg.later_skip = later_skip;
+#ifdef __LITTLE_ENDIAN
+	pki_prt_cfg.style_cfg.parm_cfg.pkt_lend = true;
+#else
 	pki_prt_cfg.style_cfg.parm_cfg.pkt_lend = false;
+#endif
 	pki_prt_cfg.style_cfg.parm_cfg.tag_type = CVMX_SSO_TAG_TYPE_UNTAGGED;
 	pki_prt_cfg.style_cfg.parm_cfg.qpg_dis_grptag = true;
 	pki_prt_cfg.style_cfg.parm_cfg.dis_wq_dat = false;
-- 
1.9.1

