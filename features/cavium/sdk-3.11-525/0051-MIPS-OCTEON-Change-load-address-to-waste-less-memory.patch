From 9d92fcaf26e53c7c0578e1f3eba647061891ef97 Mon Sep 17 00:00:00 2001
From: David Daney <david.daney@cavium.com>
Date: Fri, 21 Sep 2012 14:02:46 -0700
Subject: [PATCH 051/518] MIPS: OCTEON: Change load address to waste less
 memory.

Source: Cavium Networks, Inc.
MR: 00000
Type: Integration
Disposition: Merged from Octeon Tree
ChangeID: 4e03dca7b4297c74f6f19ae872d5d8341df86589
Description:

"Modern" octeon bootloaders allow us to load the image at 0x100000.
Moving there from 0x1100000 makes 16MB more memory usable.

Signed-off-by: David Daney <david.daney@cavium.com>
Signed-off-by: Corey Minyard <cminyard@mvista.com>
[Original patch taken from Cavium SDK 3.1.1 525]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/mips/cavium-octeon/Platform | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/arch/mips/cavium-octeon/Platform b/arch/mips/cavium-octeon/Platform
index 8a301cb..1069c2f 100644
--- a/arch/mips/cavium-octeon/Platform
+++ b/arch/mips/cavium-octeon/Platform
@@ -4,8 +4,10 @@
 platform-$(CONFIG_CAVIUM_OCTEON_SOC)	+= cavium-octeon/
 cflags-$(CONFIG_CAVIUM_OCTEON_SOC)	+=				\
 		-I$(srctree)/arch/mips/include/asm/mach-cavium-octeon
-ifdef CONFIG_CAVIUM_OCTEON_2ND_KERNEL
-load-$(CONFIG_CAVIUM_OCTEON_SOC)	+= 0xffffffff84100000
+
+ifdef CONFIG_MAPPED_KERNEL
+  load-$(CONFIG_CAVIUM_OCTEON_SOC)    = 0xffffffffc0000000
 else
-load-$(CONFIG_CAVIUM_OCTEON_SOC)	+= 0xffffffff81100000
+  load-$(CONFIG_CAVIUM_OCTEON_SOC)    = 0xffffffff80100000
 endif
+
-- 
1.9.1

