From 4cc9099c14a1abfb556c617b1c0c7f27f1199da9 Mon Sep 17 00:00:00 2001
From: "Eric W. Biederman" <ebiederm@aristanetworks.com>
Date: Mon, 8 Aug 2011 15:31:56 -0500
Subject: [PATCH 15/16] ns proc: Enable setns for support for the pid
 namespace

Signed-off-by: Eric W. Biederman <ebiederm@xmission.com>

[YS: Original patch taken from http://lxc.sourceforge.net/patches/linux/3.0.0/3.0.0-lxc1/patches/;
Context modified to WR kernel tree]

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 kernel/pid_namespace.c |    3 ---
 1 file changed, 3 deletions(-)

diff --git a/kernel/pid_namespace.c b/kernel/pid_namespace.c
index 136a8c9..0a89e0a 100644
--- a/kernel/pid_namespace.c
+++ b/kernel/pid_namespace.c
@@ -304,12 +304,9 @@ static void pidns_put(void *ns)
 
 static int pidns_install(struct nsproxy *nsproxy, void *ns)
 {
-	return -EINVAL;
-#ifdef notyet
 	put_pid_ns(nsproxy->pid_ns);
 	nsproxy->pid_ns = get_pid_ns(ns);
 	return 0;
-#endif
 }
 
 static unsigned int pidns_inum(void *vns)
-- 
1.7.9.7

