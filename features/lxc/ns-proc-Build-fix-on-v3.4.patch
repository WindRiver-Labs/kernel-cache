From 5ec38c85e21f936885cfe21f56169219a767400c Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 15 Jun 2012 16:39:41 -0700
Subject: [PATCH 16/16] ns proc: Build fix on v3.4

vfsmount is no longer a field of struct mnt_namspace, now the include order is
mnt_namespace->mount->vfsmount.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 fs/namespace.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/fs/namespace.c b/fs/namespace.c
index 3e8816e..8f748f0 100644
--- a/fs/namespace.c
+++ b/fs/namespace.c
@@ -2704,8 +2704,8 @@ static int mntns_install(struct nsproxy *nsproxy, void *ns)
 	nsproxy->mnt_ns = mnt_ns;
 
 	/* Find the root */
-	root.mnt    = mnt_ns->root;
-	root.dentry = mnt_ns->root->mnt_root;
+	root.mnt    = &mnt_ns->root->mnt;
+	root.dentry = mnt_ns->root->mnt.mnt_root;
 	path_get(&root);
 	while(d_mountpoint(root.dentry) && follow_down(&root))
 		;
-- 
1.7.9.7

