From 745aad632a4c1f8e43e430ec78ad98de9dbc2117 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:26:47 -0400
Subject: [PATCH 169/391] psrwlock/psrwlock-fix-init-atomic

PSRWlock fix init atomic long

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 lib/psrwlock.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/psrwlock.c b/lib/psrwlock.c
index acf4bf6..10f38ce 100644
--- a/lib/psrwlock.c
+++ b/lib/psrwlock.c
@@ -70,7 +70,7 @@ __psrwlock_init(struct psrwlock *lock, const char *name,
 	atomic_set(&lock->uc, 0);
 	atomic_set(&lock->ws, 0);
 	for (i = 0; i < PSRW_NR_PRIO; i++)
-		atomic_set(&lock->prio[i], 0);
+		atomic_long_set(&lock->prio[i], 0);
 	lock->rctx_bitmap = rctx;
 	lock->wctx = wctx;
 	INIT_LIST_HEAD(&lock->wait_list_r);
-- 
1.6.5.2

