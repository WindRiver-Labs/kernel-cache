From 858abbd02c22216e306dfcbb1291e0b660366138 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:25:55 -0400
Subject: [PATCH 081/391] lttng-instrumentation/traceprobes

Traceprobes

Menu option to activate tracing probes.

Masami Hiramatsu <mhiramat@redhat.com :

Tested on x86-64.

Changelog :
- Default to m instead of y.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Acked-by: Masami Hiramatsu <mhiramat@redhat.com>
CC: Alexander Viro <viro@zeniv.linux.org.uk>
CC: 'Peter Zijlstra' <peterz@infradead.org>
CC: "Frank Ch. Eigler" <fche@redhat.com>
CC: 'Ingo Molnar' <mingo@elte.hu>
CC: 'Hideo AOKI' <haoki@redhat.com>
CC: Takashi Nishiie <t-nishiie@np.css.fujitsu.com>
CC: 'Steven Rostedt' <rostedt@goodmis.org>
---
 ltt/Kconfig         |   11 +++++++++++
 ltt/Makefile        |    1 +
 ltt/probes/Makefile |    1 +
 3 files changed, 13 insertions(+), 0 deletions(-)
 create mode 100644 ltt/probes/Makefile

diff --git a/ltt/Kconfig b/ltt/Kconfig
index d47bf70..6fb1948 100644
--- a/ltt/Kconfig
+++ b/ltt/Kconfig
@@ -70,6 +70,17 @@ config LTT_FAST_SERIALIZE
 	  Library for serializing information from custom, efficient, tracepoint
 	  probes.
 
+config LTT_TRACEPROBES
+	tristate "Compile lttng tracing probes"
+	depends on LTT_FAST_SERIALIZE
+	depends on LTT_SERIALIZE
+	default m
+	select LTT_FILTER
+	help
+	  Compile lttng tracing probes, which connect to the tracepoints when
+	  loaded and format the information collected by the tracepoints with
+	  the Markers.
+
 config LTT_TRACE_CONTROL
 	tristate "Linux Trace Toolkit Trace Controller"
 	depends on LTT_TRACER
diff --git a/ltt/Makefile b/ltt/Makefile
index af77ff2..ef63ce5 100644
--- a/ltt/Makefile
+++ b/ltt/Makefile
@@ -15,3 +15,4 @@ obj-$(CONFIG_LTT_TRACE_CONTROL)		+= ltt-trace-control.o
 obj-$(CONFIG_LTT_USERSPACE_EVENT)	+= ltt-userspace-event.o
 obj-$(CONFIG_LTT_FILTER)		+= ltt-filter.o
 obj-$(CONFIG_LTT_KPROBES)		+= ltt-kprobes.o
+obj-$(CONFIG_LTT_TRACEPROBES)		+= probes/
diff --git a/ltt/probes/Makefile b/ltt/probes/Makefile
new file mode 100644
index 0000000..a8b481e
--- /dev/null
+++ b/ltt/probes/Makefile
@@ -0,0 +1 @@
+# LTTng tracing probes
-- 
1.6.5.2

