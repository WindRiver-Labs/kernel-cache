From 20824270753567846f736f3c0d46e42c6d1d0761 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:27:48 -0400
Subject: [PATCH 282/391] omap-trace-clock-32-to-64-use-spinlock-fix

The definition should be turned from a mutex to a spinlock too.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 kernel/trace/trace-clock-32-to-64.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/trace/trace-clock-32-to-64.c b/kernel/trace/trace-clock-32-to-64.c
index 6249d5e..c9697a6 100644
--- a/kernel/trace/trace-clock-32-to-64.c
+++ b/kernel/trace/trace-clock-32-to-64.c
@@ -34,7 +34,7 @@
 #define HW_LS32(hw)			((hw) & HW_BITMASK)
 #define SW_MS32(sw)			((sw) & ~HW_BITMASK)
 
-static DEFINE_MUTEX(synthetic_tsc_lock);
+static DEFINE_SPINLOCK(synthetic_tsc_lock);
 static int synthetic_tsc_refcount;  /* Number of readers */
 static int synthetic_tsc_enabled;   /* synth. TSC enabled on all online CPUs */
 
-- 
1.6.5.2

