From e71e40d0e4217fe9077f4deed89be486bf83f78d Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date: Thu, 30 Oct 2008 23:26:59 -0400
Subject: [PATCH] lttng-marker-control-speedup-get-channel

It works faster.

Signed-off-by: Zhao Lei <zhaolei@cn.fujitsu.com>
Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 ltt/ltt-marker-control.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/ltt/ltt-marker-control.c b/ltt/ltt-marker-control.c
index cde8285..c5bb578 100644
--- a/ltt/ltt-marker-control.c
+++ b/ltt/ltt-marker-control.c
@@ -473,7 +473,7 @@ static int do_set_channel(const char *name, const char *pname,
 	/*
 	 * Do not let userspace mess with core markers.
 	 */
-	if (user && get_channel_index_from_name("metadata") == new_channel)
+	if (user && GET_CHANNEL_INDEX(metadata) == new_channel)
 		return -EPERM;
 
 	ltt_lock_traces();
-- 
1.5.5.1

