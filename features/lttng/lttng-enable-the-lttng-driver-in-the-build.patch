From d3cecd2ab17f1a729c58714d5fb862cf3aceaef0 Mon Sep 17 00:00:00 2001
From: Jianchuan Wang <jianchuan.wang@windriver.com>
Date: Tue, 8 Sep 2015 16:30:42 +0800
Subject: [PATCH 2/3] lttng: enable the lttng driver in the build

Enable the build for the lttng module in drivers/stagging/lttng.

Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 drivers/staging/Kconfig        | 2 ++
 drivers/staging/Makefile       | 1 +
 drivers/staging/lttng/Makefile | 1 +
 3 files changed, 4 insertions(+)

diff --git a/drivers/staging/Kconfig b/drivers/staging/Kconfig
index bfacf69..a66a7c8 100644
--- a/drivers/staging/Kconfig
+++ b/drivers/staging/Kconfig
@@ -112,4 +112,6 @@ source "drivers/staging/i2o/Kconfig"
 
 source "drivers/staging/fsl-mc/Kconfig"
 
+source "drivers/staging/lttng/Kconfig"
+
 endif # STAGING
diff --git a/drivers/staging/Makefile b/drivers/staging/Makefile
index 2bbd1bf..d269cf4 100644
--- a/drivers/staging/Makefile
+++ b/drivers/staging/Makefile
@@ -48,3 +48,4 @@ obj-$(CONFIG_COMMON_CLK_XLNX_CLKWZRD)	+= clocking-wizard/
 obj-$(CONFIG_FB_TFT)		+= fbtft/
 obj-$(CONFIG_I2O)		+= i2o/
 obj-$(CONFIG_FSL_MC_BUS)	+= fsl-mc/
+obj-$(CONFIG_LTTNG)	+= lttng/
diff --git a/drivers/staging/lttng/Makefile b/drivers/staging/lttng/Makefile
index b8df89f..b37b4b1 100644
--- a/drivers/staging/lttng/Makefile
+++ b/drivers/staging/lttng/Makefile
@@ -23,6 +23,7 @@ $(error Duplicate version.h files found in $(lttng_check_linux_version) and $(lt
 endif
 endif
 
+KBUILD_EXTMOD =${srctree}/drivers/staging/lttng
 include $(MAKEFILEDIR)/Makefile.ABI.workarounds
 
 obj-m += lttng-ring-buffer-client-discard.o
-- 
2.0.2

