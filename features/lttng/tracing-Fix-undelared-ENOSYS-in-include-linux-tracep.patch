From 6d2e078cb81a108443b2d0205f4c02b265fd5b35 Mon Sep 17 00:00:00 2001
From: Wu Zhangjin <zhangjin.wu@windriver.com>
Date: Tue, 22 Jun 2010 01:12:41 -0700
Subject: [PATCH] tracing: Fix undelared ENOSYS in include/linux/tracepoint.h

The header file include/linux/tracepoint.h may be included without
include/linux/errno.h and then the compiler will fail on building for
undelcared ENOSYS. This patch fixes this problem via including <linux/errno.h>
to include/linux/tracepoint.h.

Exactly, lib/kernel_lock.c in wrlinux include a header file <linux/kmemtrace.h>
and at last include <linux/tracepoint.h>, when the CONFIG_MARKERS is disabled,
there will be no <linux/errno.h> included, then building fails.

Signed-off-by: Wu Zhangjin <zhangjin.wu@windriver.com>
---
 include/linux/tracepoint.h |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/include/linux/tracepoint.h b/include/linux/tracepoint.h
index f6aa36f..95e959e 100644
--- a/include/linux/tracepoint.h
+++ b/include/linux/tracepoint.h
@@ -14,6 +14,7 @@
  * See the file COPYING for more details.
  */
 
+#include <linux/errno.h>
 #include <linux/immediate.h>
 #include <linux/types.h>
 #include <linux/rcupdate.h>
-- 
1.6.5.2

