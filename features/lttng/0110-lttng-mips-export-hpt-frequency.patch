From 71f3bbd9370f9feecc5c6d7fc58e9f077287b6a5 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date: Tue, 12 Aug 2008 10:32:54 -0400
Subject: [PATCH] lttng-mips-export-hpt-frequency

LTTng mips export hpt frequency

LTTng needs it from modules.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 arch/mips/kernel/time.c  |    1 +
 include/asm-mips/timex.h |    2 ++
 2 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/mips/kernel/time.c b/arch/mips/kernel/time.c
index 1f467d5..75e45b5 100644
--- a/arch/mips/kernel/time.c
+++ b/arch/mips/kernel/time.c
@@ -70,6 +70,7 @@ EXPORT_SYMBOL(perf_irq);
  */
 
 unsigned int mips_hpt_frequency;
+EXPORT_SYMBOL(mips_hpt_frequency);
 
 void __init clocksource_set_clock(struct clocksource *cs, unsigned int clock)
 {
diff --git a/include/asm-mips/timex.h b/include/asm-mips/timex.h
index 6529704..337ee5e 100644
--- a/include/asm-mips/timex.h
+++ b/include/asm-mips/timex.h
@@ -38,6 +38,8 @@ static inline cycles_t get_cycles(void)
 	return 0;
 }
 
+extern unsigned int mips_hpt_frequency;
+
 #endif /* __KERNEL__ */
 
 #endif /*  _ASM_TIMEX_H */
-- 
1.5.5.1

