From 4b2e844ea7257693983fc89774281857baaef5dc Mon Sep 17 00:00:00 2001
From: Stanley.Miao <stanley.miao@windriver.com>
Date: Mon, 21 Jun 2010 10:57:39 +0800
Subject: [PATCH] lttng: clock: make HAVE_TRACE_CLOCK selectable in omap archtecture

TRACE_CLOCK is not needed if we don't enable CONFIG_LTT, so make it
selectable in case it has some impact on the stability.

Signed-off-by: Stanley.Miao <stanley.miao@windriver.com>
---
 arch/arm/plat-omap/Kconfig |    8 ++++++--
 1 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arm/plat-omap/Kconfig b/arch/arm/plat-omap/Kconfig
index c18db87..9abe74b 100644
--- a/arch/arm/plat-omap/Kconfig
+++ b/arch/arm/plat-omap/Kconfig
@@ -32,8 +32,6 @@ config ARCH_OMAP3
 	select CPU_V7
 	select USB_ARCH_HAS_EHCI
 	select ARM_L1_CACHE_SHIFT_6
-	select HAVE_TRACE_CLOCK
-	select HAVE_TRACE_CLOCK_32_TO_64
 	select OMAP_32K_TIMER
 
 
@@ -57,6 +55,12 @@ config OMAP_DEBUG_LEDS
 	depends on OMAP_DEBUG_DEVICES
 	default y if LEDS || LEDS_OMAP_DEBUG
 
+config HAVE_TRACE_CLOCK
+	bool "Have Trace Clock"
+	depends on ARCH_OMAP3
+	default y if LTT
+	select HAVE_TRACE_CLOCK_32_TO_64
+
 config OMAP_SMARTREFLEX
 	bool "SmartReflex support"
 	depends on ARCH_OMAP3 && TWL4030_CORE && PM
-- 
1.6.0.3

