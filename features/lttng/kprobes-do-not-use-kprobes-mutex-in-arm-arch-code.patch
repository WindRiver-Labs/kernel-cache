From 372d0d6fe5f3fbe27ae614c9615a4da15344cc99 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Wed, 10 Dec 2008 13:33:56 -0500
Subject: [PATCH] kprobes: do not use kprobes mutex in arm arch code

This completes the work of patch 95 in the lttng
series by removing arch arm's use of kprobe_mutex.

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/arm/kernel/kprobes.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/arch/arm/kernel/kprobes.c b/arch/arm/kernel/kprobes.c
index d28513f..45354e0 100644
--- a/arch/arm/kernel/kprobes.c
+++ b/arch/arm/kernel/kprobes.c
@@ -92,9 +92,7 @@ void __kprobes arch_disarm_kprobe(struct kprobe *p)
 void __kprobes arch_remove_kprobe(struct kprobe *p)
 {
 	if (p->ainsn.insn) {
-		mutex_lock(&kprobe_mutex);
 		free_insn_slot(p->ainsn.insn, 0);
-		mutex_unlock(&kprobe_mutex);
 		p->ainsn.insn = NULL;
 	}
 }
-- 
1.6.0.3

