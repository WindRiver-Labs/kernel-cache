From 66c03d92f4ff85dd54b2d425727cbe1e9562d326 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Mon, 23 Jul 2012 14:44:56 -0700
Subject: [PATCH] lttng: omap: Remove reserve_pmu in init_trace_clock

Since PMU is a shared resource, reserving PMU in any init function
is wrong, preventing other kernel subsystems, like perf, from using PMU.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/arm/mach-omap2/trace-clock.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/arch/arm/mach-omap2/trace-clock.c b/arch/arm/mach-omap2/trace-clock.c
index 6465b27..e4e008d 100644
--- a/arch/arm/mach-omap2/trace-clock.c
+++ b/arch/arm/mach-omap2/trace-clock.c
@@ -697,12 +697,9 @@ EXPORT_SYMBOL_GPL(trace_clock_debug);
 
 static __init int init_trace_clock(void)
 {
-	int cpu, ret;
+	int cpu;
 	u64 rem;
 
-	ret = reserve_pmu(ARM_PMU_DEVICE_CPU);
-	if (ret)
-		return ret;
 	clock = get_clocksource_32k();
 	/*
 	 * clear_ccnt_interval based on the cpu fastest frequency. Never
-- 
1.7.9.7

