From 7a4d1717a90877cd74f31b096d5d3cb3e3dfd9b6 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Tue, 16 Nov 2010 14:31:39 +0800
Subject: [PATCH] Kernel/LTTV event size differs for event udpv4_rcv_extended

This is because the inproper alignment for struct serialize_l4412228, this struct
has a 8-byte member.
For some 32-bit platforms, the cross-compiler gcc makes the struct serialize_l4412228
align to 8 bytes, this will lead to different size for event udpv4_rcv_extended
between kernel and lttv.
So force the struct serialize_l4412228 align to 4 bytes.

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 include/linux/ltt-type-serializer.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/include/linux/ltt-type-serializer.h b/include/linux/ltt-type-serializer.h
index 021a107..322f7df 100644
--- a/include/linux/ltt-type-serializer.h
+++ b/include/linux/ltt-type-serializer.h
@@ -172,6 +172,8 @@ struct serialize_l214421224411111 {
 	uint8_t end_field[0];
 } LTT_ALIGN;
 
+#pragma pack(4)
+
 struct serialize_l4412228 {
 	unsigned long f1;
 	uint32_t f2;
@@ -183,4 +185,6 @@ struct serialize_l4412228 {
 	uint64_t f8;
 	unsigned char end_field[0];
 } LTT_ALIGN;
+
+#pragma pack()
 #endif /* _LTT_TYPE_SERIALIZER_H */
-- 
1.6.5.2

