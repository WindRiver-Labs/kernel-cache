From 6c9ce0ebd1b22d32c1bcf54fb5736835c2af258e Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:26:29 -0400
Subject: [PATCH 142/391] lttng-instrumentation/lttng-instrumentation-scheduler-arch-tracepoints-probes

LTTng instrumentation sched arch tracepoint probe

sched_kthread_create tracepoints probe

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 ltt/probes/kernel-trace.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/ltt/probes/kernel-trace.c b/ltt/probes/kernel-trace.c
index dfdbb77..b505a84 100644
--- a/ltt/probes/kernel-trace.c
+++ b/ltt/probes/kernel-trace.c
@@ -307,6 +307,13 @@ void probe_sched_process_fork(struct task_struct *parent,
 		parent->pid, child->pid, child->tgid);
 }
 
+void probe_sched_kthread_create(void *fn, int pid)
+{
+	trace_mark_tp(kernel_kthread_create, sched_kthread_create,
+		probe_sched_kthread_create,
+		"fn %p pid %d", fn, pid);
+}
+
 void probe_timer_itimer_expired(struct signal_struct *sig)
 {
 	trace_mark_tp(kernel_timer_itimer_expired, timer_itimer_expired,
-- 
1.6.5.2

