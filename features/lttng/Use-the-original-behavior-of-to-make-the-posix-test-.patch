From c8c2662242a48ef8cda253de42e5f1d0a76917a3 Mon Sep 17 00:00:00 2001
From: Jason Wessel <jason.wessel@windriver.com>
Date: Mon, 24 Oct 2011 17:00:31 -0500
Subject: [PATCH] Use the original behavior of to make the posix test suite clock_gettime tests pass

The posixtestsuite tests do not pass, specifically the following two tests:
  conformance/interfaces/clock_gettime/7-1.test
  conformance/interfaces/clock_gettime/8-2.test

The fallthrough from the case statement prior to the most recent ltt patches
uses a different return code other than -EINVAL for the failure case
and the posixtest suite expects these return codes.

Signed-off-by: Jason Wessel <jason.wessel@windriver.com>
---
 arch/x86/vdso/vclock_gettime.c |    2 --
 1 files changed, 0 insertions(+), 2 deletions(-)

diff --git a/arch/x86/vdso/vclock_gettime.c b/arch/x86/vdso/vclock_gettime.c
index 7bc4815..2365a5b 100644
--- a/arch/x86/vdso/vclock_gettime.c
+++ b/arch/x86/vdso/vclock_gettime.c
@@ -173,8 +173,6 @@ notrace int __vdso_clock_gettime(clockid_t clock, struct timespec *ts)
 			return do_trace_clock(ts);
 		case CLOCK_TRACE_FREQ:
 			return do_trace_clock_freq(ts);
-		default:
-			return -EINVAL;
 		}
 	return vdso_fallback_gettime(clock, ts);
 }
-- 
1.7.0.4

