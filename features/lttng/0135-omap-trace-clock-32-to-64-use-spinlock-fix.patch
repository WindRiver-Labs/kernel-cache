From 1847a1b36016e1e1eb5e786404d79e03fa0b968d Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Wed, 18 May 2011 18:42:19 -0400
Subject: [PATCH 135/248] omap-trace-clock-32-to-64-use-spinlock-fix

The definition should be turned from a mutex to a spinlock too.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 kernel/trace/trace-clock-32-to-64.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/trace/trace-clock-32-to-64.c b/kernel/trace/trace-clock-32-to-64.c
index 6249d5e..c9697a6 100644
--- a/kernel/trace/trace-clock-32-to-64.c
+++ b/kernel/trace/trace-clock-32-to-64.c
@@ -34,7 +34,7 @@
 #define HW_LS32(hw)			((hw) & HW_BITMASK)
 #define SW_MS32(sw)			((sw) & ~HW_BITMASK)
 
-static DEFINE_MUTEX(synthetic_tsc_lock);
+static DEFINE_SPINLOCK(synthetic_tsc_lock);
 static int synthetic_tsc_refcount;  /* Number of readers */
 static int synthetic_tsc_enabled;   /* synth. TSC enabled on all online CPUs */
 
-- 
1.7.0.4

