From 6663cd64c183c4d4bc8f22d05ff971450b0971ab Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:28:39 -0400
Subject: [PATCH 380/390] rcu-head-init-fix

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
---
 security/selinux/avc.c     |    2 +-
 security/selinux/netnode.c |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/security/selinux/avc.c b/security/selinux/avc.c
index 989fef8..4395a74 100644
--- a/security/selinux/avc.c
+++ b/security/selinux/avc.c
@@ -288,7 +288,7 @@ static struct avc_node *avc_alloc_node(void)
 	if (!node)
 		goto out;
 
-	INIT_RCU_HEAD(&node->rhead);
+	rcu_head_init(&node->rhead);
 	INIT_HLIST_NODE(&node->list);
 	avc_cache_stats_incr(allocations);
 
diff --git a/security/selinux/netnode.c b/security/selinux/netnode.c
index dc92792..9b43403 100644
--- a/security/selinux/netnode.c
+++ b/security/selinux/netnode.c
@@ -183,7 +183,7 @@ static void sel_netnode_insert(struct sel_netnode *node)
 		BUG();
 	}
 
-	INIT_RCU_HEAD(&node->rcu);
+	rcu_head_init(&node->rcu);
 
 	/* we need to impose a limit on the growth of the hash table so check
 	 * this bucket to make sure it is within the specified bounds */
-- 
1.6.5.2

