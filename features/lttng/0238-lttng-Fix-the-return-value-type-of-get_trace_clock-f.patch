From 882af28a17a7d8a49e5715f16c39a2da03a476eb Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Thu, 24 May 2012 15:56:15 -0700
Subject: [PATCH 238/248] lttng: Fix the return value type of get_trace_clock function

Change the return value type of get_trace_clock from void to int to follow
the latest change of get_trace_clock.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 include/asm-generic/trace-clock.h |    2 +-
 kernel/trace/trace-clock.c        |    3 ++-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/include/asm-generic/trace-clock.h b/include/asm-generic/trace-clock.h
index 138ac9b..e3f9ba0 100644
--- a/include/asm-generic/trace-clock.h
+++ b/include/asm-generic/trace-clock.h
@@ -67,7 +67,7 @@ static inline u32 trace_clock_freq_scale(void)
 	return 1;
 }
 
-extern void get_trace_clock(void);
+extern int get_trace_clock(void);
 extern void put_trace_clock(void);
 
 static inline void set_trace_clock_is_sync(int state)
diff --git a/kernel/trace/trace-clock.c b/kernel/trace/trace-clock.c
index 3ed1667..e80e7e0 100644
--- a/kernel/trace/trace-clock.c
+++ b/kernel/trace/trace-clock.c
@@ -70,7 +70,7 @@ static void disable_trace_clock(void)
 	del_timer_sync(&trace_clock_timer);
 }
 
-void get_trace_clock(void)
+int get_trace_clock(void)
 {
 	get_synthetic_tsc();
 	mutex_lock(&trace_clock_mutex);
@@ -79,6 +79,7 @@ void get_trace_clock(void)
 	enable_trace_clock();
 end:
 	mutex_unlock(&trace_clock_mutex);
+	return 0;
 }
 EXPORT_SYMBOL_GPL(get_trace_clock);
 
-- 
1.7.0.4

