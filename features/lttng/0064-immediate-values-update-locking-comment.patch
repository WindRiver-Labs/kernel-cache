From 99926e901e2364a9999068a3065a96f1961680a1 Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
Date: Thu, 2 Oct 2008 01:43:47 -0400
Subject: [PATCH] immediate-values-update-locking-comment

Immediate Values Update Locking Comments

Specify the fact that module now use a sleepable psrwlock read lock for module
list read protection.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 kernel/immediate.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/kernel/immediate.c b/kernel/immediate.c
index e7a722d..e982f7c 100644
--- a/kernel/immediate.c
+++ b/kernel/immediate.c
@@ -55,7 +55,8 @@ static int stop_machine_imv_update(void *imv_ptr)
 }
 
 /*
- * imv_mutex nests inside module_mutex. imv_mutex protects builtin
+ * imv_mutex nests inside the preemptable module_psrwlock read lock. It also
+ * nests inside markers_mutex and tracepoint_mutex. imv_mutex protects builtin
  * immediates and module immediates.
  */
 static DEFINE_MUTEX(imv_mutex);
-- 
1.5.5.1

