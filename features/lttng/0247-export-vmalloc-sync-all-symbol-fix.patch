From 4b5a223721c0f3ebb024b2bbbc1bb4bdb9883a2d Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:27:28 -0400
Subject: [PATCH 247/391] export-vmalloc-sync-all-symbol-fix

export vmalloc_sync_all() fix

Need to export it for all architectures.

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 arch/x86/mm/fault.c |    1 -
 mm/vmalloc.c        |    2 +-
 2 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/arch/x86/mm/fault.c b/arch/x86/mm/fault.c
index 28fa2c0..83e0492 100644
--- a/arch/x86/mm/fault.c
+++ b/arch/x86/mm/fault.c
@@ -241,7 +241,6 @@ void vmalloc_sync_all(void)
 		spin_unlock_irqrestore(&pgd_lock, flags);
 	}
 }
-EXPORT_SYMBOL_GPL(vmalloc_sync_all);
 
 /*
  * 32-bit:
diff --git a/mm/vmalloc.c b/mm/vmalloc.c
index ae00746..9a76c46 100644
--- a/mm/vmalloc.c
+++ b/mm/vmalloc.c
@@ -1996,7 +1996,7 @@ EXPORT_SYMBOL(remap_vmalloc_range);
 void  __attribute__((weak)) vmalloc_sync_all(void)
 {
 }
-
+EXPORT_SYMBOL_GPL(vmalloc_sync_all);
 
 static int f(pte_t *pte, pgtable_t table, unsigned long addr, void *data)
 {
-- 
1.6.5.2

