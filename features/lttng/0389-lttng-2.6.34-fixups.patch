From dd2d8eac1883ef3ea1316efaa0bd6002fd4a1583 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Mon, 24 May 2010 00:46:24 -0400
Subject: [PATCH 389/391] lttng: 2.6.34 fixups

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/x86/kernel/immediate.c |    1 +
 ipc/syscall.c               |    2 ++
 ltt/ltt-channels.c          |    1 +
 ltt/ltt-userspace-event.c   |    1 +
 4 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/x86/kernel/immediate.c b/arch/x86/kernel/immediate.c
index 71f93e1..5d77ac3 100644
--- a/arch/x86/kernel/immediate.c
+++ b/arch/x86/kernel/immediate.c
@@ -93,6 +93,7 @@
 #include <linux/rcupdate.h>
 #include <linux/kprobes.h>
 #include <linux/io.h>
+#include <linux/slab.h>
 
 #include <asm/cacheflush.h>
 
diff --git a/ipc/syscall.c b/ipc/syscall.c
index 652ce04..eeadb0d 100644
--- a/ipc/syscall.c
+++ b/ipc/syscall.c
@@ -12,8 +12,10 @@
 #include <linux/shm.h>
 #include <linux/syscalls.h>
 #include <linux/uaccess.h>
+#include <trace/ipc.h>
 
 DEFINE_TRACE(sys_ipc);
+DEFINE_TRACE(ipc_call);
 
 SYSCALL_DEFINE6(ipc, unsigned int, call, int, first, unsigned long, second,
 		unsigned long, third, void __user *, ptr, long, fifth)
diff --git a/ltt/ltt-channels.c b/ltt/ltt-channels.c
index 81be66a..cb4a7ec 100644
--- a/ltt/ltt-channels.c
+++ b/ltt/ltt-channels.c
@@ -15,6 +15,7 @@
 #include <linux/ltt-channels.h>
 #include <linux/mutex.h>
 #include <linux/vmalloc.h>
+#include <linux/slab.h>
 
 /*
  * ltt_channel_mutex may be nested inside the LTT trace mutex.
diff --git a/ltt/ltt-userspace-event.c b/ltt/ltt-userspace-event.c
index 46edbed..2cbece5 100644
--- a/ltt/ltt-userspace-event.c
+++ b/ltt/ltt-userspace-event.c
@@ -11,6 +11,7 @@
 #include <linux/fs.h>
 #include <linux/debugfs.h>
 #include <linux/ltt-type-serializer.h>
+#include <linux/slab.h>
 
 #define LTT_WRITE_EVENT_FILE	"write_event"
 
-- 
1.6.5.2

