From e5d368b76eeedb7b745c858063567dbe919f1861 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Fri, 13 Jul 2012 14:40:20 +0800
Subject: [PATCH] powerpc/ppc64: fix multiple definition of
 __tracepoint_ipc_call

Remove DEFINE_TRACE(ipc_call) in arch/powerpc/kernel/sys_ppc32.c
since ipc subsystem already define this. Otherwise, we can't
build ppc64 like this:

  LD      vmlinux.o
  ipc/built-in.o:(__tracepoints+0x78): multiple definition of `__tracepoint_ipc_call'
  arch/powerpc/kernel/built-in.o:(__tracepoints+0x168): first defined here
  make[1]: *** [vmlinux.o] Error 1
  make: *** [sub-make] Error 2

{
This should be squashed into commit 1f675dcce8dde2ebefd3c3c70ebbaccda80e35e3

    lttng-instrumentation/lttng-instrumentation-powerpc
}

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/kernel/sys_ppc32.c |    2 --
 1 file changed, 2 deletions(-)

diff --git a/arch/powerpc/kernel/sys_ppc32.c b/arch/powerpc/kernel/sys_ppc32.c
index 5cd4999..ba3b3f8 100644
--- a/arch/powerpc/kernel/sys_ppc32.c
+++ b/arch/powerpc/kernel/sys_ppc32.c
@@ -53,8 +53,6 @@
 #include <asm/syscalls.h>
 #include <asm/switch_to.h>
 
-DEFINE_TRACE(ipc_call);
-
 asmlinkage long ppc32_select(u32 n, compat_ulong_t __user *inp,
 		compat_ulong_t __user *outp, compat_ulong_t __user *exp,
 		compat_uptr_t tvp_x)
-- 
1.7.9.7

