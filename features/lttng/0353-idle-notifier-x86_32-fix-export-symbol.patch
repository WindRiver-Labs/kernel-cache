From dc456fa9b4c80145f959c62dc28bcf88756de10a Mon Sep 17 00:00:00 2001
From: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Date: Thu, 13 May 2010 19:28:25 -0400
Subject: [PATCH 353/391] idle-notifier-x86_32-fix-export-symbol

idle notifier x86_32 fix export symbol

Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@polymtl.ca>
---
 arch/x86/include/asm/idle.h  |    6 +++---
 arch/x86/kernel/process_32.c |    3 +++
 arch/x86/kernel/process_64.c |    3 +++
 3 files changed, 9 insertions(+), 3 deletions(-)

diff --git a/arch/x86/include/asm/idle.h b/arch/x86/include/asm/idle.h
index 778b3a1..9b1db10 100644
--- a/arch/x86/include/asm/idle.h
+++ b/arch/x86/include/asm/idle.h
@@ -1,9 +1,9 @@
 #ifndef _ASM_X86_IDLE_H
 #define _ASM_X86_IDLE_H
 
-void enter_idle(void);
-void __exit_idle(void);
-void exit_idle(void);
+extern void enter_idle(void);
+extern void __exit_idle(void);
+extern void exit_idle(void);
 
 void c1e_remove_cpu(int cpu);
 
diff --git a/arch/x86/kernel/process_32.c b/arch/x86/kernel/process_32.c
index 59a13a2..8f0aab6 100644
--- a/arch/x86/kernel/process_32.c
+++ b/arch/x86/kernel/process_32.c
@@ -74,6 +74,7 @@ void enter_idle(void)
 	trace_pm_idle_entry();
 	notify_idle(IDLE_START);
 }
+EXPORT_SYMBOL_GPL(enter_idle);
 
 void __exit_idle(void)
 {
@@ -82,6 +83,7 @@ void __exit_idle(void)
 	notify_idle(IDLE_END);
 	trace_pm_idle_exit();
 }
+EXPORT_SYMBOL_GPL(__exit_idle);
 
 /* Called from interrupts to signify idle end */
 void exit_idle(void)
@@ -91,6 +93,7 @@ void exit_idle(void)
 		return;
 	__exit_idle();
 }
+EXPORT_SYMBOL_GPL(exit_idle);
 
 /*
  * Return saved PC of a blocked thread.
diff --git a/arch/x86/kernel/process_64.c b/arch/x86/kernel/process_64.c
index 6b5fb67..354e38d 100644
--- a/arch/x86/kernel/process_64.c
+++ b/arch/x86/kernel/process_64.c
@@ -72,6 +72,7 @@ void enter_idle(void)
 	trace_pm_idle_entry();
 	notify_idle(IDLE_START);
 }
+EXPORT_SYMBOL_GPL(enter_idle);
 
 void __exit_idle(void)
 {
@@ -80,6 +81,7 @@ void __exit_idle(void)
 	notify_idle(IDLE_END);
 	trace_pm_idle_exit();
 }
+EXPORT_SYMBOL_GPL(__exit_idle);
 
 /* Called from interrupts to signify idle end */
 void exit_idle(void)
@@ -89,6 +91,7 @@ void exit_idle(void)
 		return;
 	__exit_idle();
 }
+EXPORT_SYMBOL_GPL(exit_idle);
 
 #ifndef CONFIG_SMP
 static inline void play_dead(void)
-- 
1.6.5.2

