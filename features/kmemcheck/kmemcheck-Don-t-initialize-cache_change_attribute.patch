From 1d1d39b53ba957ad6d3e455fa9b527bd027024c1 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 29 Apr 2010 10:16:23 +0800
Subject: [PATCH 2/2] kmemcheck: Don't initialize cache_change_attribute

WARNING: kmemcheck: Caught 64-bit read from uninitialized memory (ffff88007f4480c8)
050000000000000000000000000000000000000000000000d880447f0088ffff
 i i i i i i i i u u u u u u u u i i i i i i i i i i i i i i i i
                 ^

Pid: 1, comm: swapper Not tainted 2.6.34-rc5-WR4.0.0.0_standard #5 0DN075/Precision WorkStation 390
RIP: 0010:[<ffffffff81156028>]  [<ffffffff81156028>] nfs_lookup+0x148/0x1c0
RSP: 0018:ffff88007f88f9b0  EFLAGS: 00010246
RAX: 0000000000000000 RBX: 0000000000000000 RCX: ffff88007f40e558
RDX: 0000000000000000 RSI: ffff88007f448560 RDI: ffff88007f40e540
RBP: ffff88007f88fb30 R08: 0000000000000000 R09: ffff88007f448590
R10: 0000000001c000e1 R11: ffff88007f448560 R12: ffff88007f40e540
R13: ffff88007f4481a0 R14: ffff88007f40e480 R15: ffff88007f88f9b0
FS:  0000000000000000(0000) GS:ffff880001800000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 000000008005003b
CR2: ffff88007e979800 CR3: 000000000154c000 CR4: 00000000000006b0
DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
DR3: 0000000000000000 DR6: 00000000ffff4ff0 DR7: 0000000000000400
 [<ffffffff810beb07>] do_lookup+0xf7/0x2a0
 [<ffffffff810c0c52>] link_path_walk+0x122/0xcb0
 [<ffffffff810c2a97>] do_filp_open+0x177/0x660
 [<ffffffff810bbb31>] open_exec+0x21/0xb0
 [<ffffffff810bc191>] do_execve+0xc1/0x3a0
 [<ffffffff8100b309>] sys_execve+0x49/0x80
 [<ffffffff81003228>] kernel_execve+0x68/0xd0
 [<ffffffff815af76b>] kernel_init+0x1d6/0x1fe
 [<ffffffff810031b4>] kernel_thread_helper+0x4/0x10
 [<ffffffffffffffff>] 0xffffffffffffffff

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 fs/nfs/inode.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/fs/nfs/inode.c b/fs/nfs/inode.c
index 50a56ed..088b8f0 100644
--- a/fs/nfs/inode.c
+++ b/fs/nfs/inode.c
@@ -315,6 +315,7 @@ nfs_fhget(struct super_block *sb, struct nfs_fh *fh, struct nfs_fattr *fattr)
 
 		nfsi->read_cache_jiffies = fattr->time_start;
 		nfsi->attr_gencount = fattr->gencount;
+		nfsi->cache_change_attribute = 0;
 		if (fattr->valid & NFS_ATTR_FATTR_ATIME)
 			inode->i_atime = fattr->atime;
 		else if (nfs_server_capable(inode, NFS_CAP_ATIME))
-- 
1.6.5.2

