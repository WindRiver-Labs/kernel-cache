From f05e833b3e4e6d3b472e458b3e943361876aeaae Mon Sep 17 00:00:00 2001
From: Eric Lapuyade <eric.lapuyade@linux.intel.com>
Date: Mon, 2 Sep 2013 12:34:34 +0200
Subject: [PATCH 33/44] NFC: NCI: Fix wrong allocation size in
 nci_spi_allocate_device()

Signed-off-by: Eric Lapuyade <eric.lapuyade@intel.com>
Signed-off-by: Samuel Ortiz <sameo@linux.intel.com>
(cherry picked from commit 7cc367809ca1a161851dc9552e102ee62dd7728d)
---
 net/nfc/nci/spi.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/net/nfc/nci/spi.c b/net/nfc/nci/spi.c
index c7cf37b..b679595 100644
--- a/net/nfc/nci/spi.c
+++ b/net/nfc/nci/spi.c
@@ -150,7 +150,7 @@ struct nci_spi_dev *nci_spi_allocate_device(struct spi_device *spi,
 	if (!supported_protocols)
 		return NULL;
 
-	ndev = devm_kzalloc(&spi->dev, sizeof(struct nci_dev), GFP_KERNEL);
+	ndev = devm_kzalloc(&spi->dev, sizeof(struct nci_spi_dev), GFP_KERNEL);
 	if (!ndev)
 		return NULL;
 
-- 
1.8.4.93.g57e4c17

