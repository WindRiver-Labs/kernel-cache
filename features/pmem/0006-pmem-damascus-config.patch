From 961ab0c74a954d7213f0f56f27b1853cc3c507b8 Mon Sep 17 00:00:00 2001
From: Yongli He <yongli.he@windriver.com>
Date: Tue, 23 Sep 2008 15:34:14 +0800
Subject: [PATCH] pmem damascus config

Kconfig option of damascus(Intel MPCBL0040) for processor features and pmem
was added.

Signed-off-by: Jason HU <yongqi.hu@windriver.com>
Integrated-by: Yongli he   <yongli.he@windriver.com>
diff --git a/arch/x86/Kconfig b/arch/x86/Kconfig
index a9bc76f..81af735 100644
--- a/arch/x86/Kconfig
+++ b/arch/x86/Kconfig
@@ -1006,6 +1006,12 @@ config INTEL_ATCA7101
   	 help
  	  Enable this option for running on the Motorola ATCA 7101
 
+config INTEL_DAMASCUS
+	bool "Intel Damascus (MPCBL0040) Blade"
+	default n
+	help
+	 Enable this option for running on the Intel Damascus (MPCBL0040)
+
 # Some NUMA nodes have memory ranges that span
 # other nodes.  Even though a pfn is valid and
 # between a node's start and end pfns, it may not
diff --git a/mm/pmem/Kconfig b/mm/pmem/Kconfig
index 9ab32af..b5402fa 100644
--- a/mm/pmem/Kconfig
+++ b/mm/pmem/Kconfig
@@ -27,7 +27,7 @@ config PMEM_SIZE
 
 config PMEM_HARDWARE
 	bool "Enable hardware persistent memory"
-	depends on PMEM && (ARCH_IXP2000 || PPC32 || PPC64 || INTEL_ATCA7101 || INTEL_ATCA717)
+	depends on PMEM && (PPC32 || PPC64 || INTEL_ATCA7101 || INTEL_DAMASCUS || INTEL_ATCA717)
 	default n
 
 choice
@@ -55,6 +55,12 @@ config PMEM_HW_ATCA7101
 	help
 	  Motorola ATCA 7101 with persistent memory on a PCI 9030 device.
 
+config PMEM_HW_DAMASCUS
+	bool "DAMASCUS"
+	depends on INTEL_DAMASCUS
+	help
+	  Intel Damascus (MPCBL0040) with persistent memory on a PCI 9030 device.
+
 config PMEM_HW_ATCA717
 	bool "ATCA 717"
 	depends on INTEL_ATCA717
@@ -74,7 +80,7 @@ config FIRMWARE_SIZE
 config PMEM_PCI_DRIVER
 	bool
 	default y
-	depends on PMEM_HW_ATCA7101 || PMEM_HW_ATCA717 || PMEM_HW_ATCA6101 || PMEM_HW_ATCAF101
+	depends on PMEM_HW_ATCA7101 || PMEM_HW_DAMASCUS || PMEM_HW_ATCA717 || PMEM_HW_ATCA6101 || PMEM_HW_ATCAF101
 
 config PMEM_DEBUG
 	bool "Debug persistent memory"
