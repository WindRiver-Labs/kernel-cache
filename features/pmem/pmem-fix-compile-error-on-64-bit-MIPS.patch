From c2e0475d52a8f6d46b0e84d158b0f0ad59450e70 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 19 Jan 2010 16:03:19 -0800
Subject: [PATCH] pmem: fix compile error on 64 bit MIPS

The pmem header checks for CONFIG_MIPS64, but no such thing
exists, and so you get:

include/linux/pmem.h:443:2: error: #error "Unknown host architecture"

The valid choices are:

  linux-mti_malta64f_be-cgl-build$grep MIPS .config |grep 64
  CONFIG_MIPS_BONITO64=y
  CONFIG_CPU_MIPS64_R1=y
  # CONFIG_CPU_MIPS64_R2 is not set
  CONFIG_SYS_HAS_CPU_MIPS64_R1=y
  CONFIG_CPU_MIPS64=y
  linux-mti_malta64f_be-cgl-build$

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>
---
 include/linux/pmem.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/include/linux/pmem.h b/include/linux/pmem.h
index 8ea00fd..a275a8c 100644
--- a/include/linux/pmem.h
+++ b/include/linux/pmem.h
@@ -433,7 +433,7 @@ extern int lhb_mask;
 #define PMEM_ARCH_LOCAL  PMEM_ARCH_X86
 #elif defined(CONFIG_ARM)
 #define PMEM_ARCH_LOCAL  PMEM_ARCH_ARM
-#elif defined(CONFIG_MIPS64)
+#elif defined(CONFIG_CPU_MIPS64)
 #define PMEM_ARCH_LOCAL  PMEM_ARCH_MIPS64
 #elif defined(CONFIG_PPC64)
 #define PMEM_ARCH_LOCAL  PMEM_ARCH_PPC64
-- 
1.6.5.2

