From fed06dfc67035826b2692e99732cb0ac0b14ea4f Mon Sep 17 00:00:00 2001
From: Daniel Vetter <daniel.vetter@ffwll.ch>
Date: Mon, 4 May 2015 14:58:33 +0200
Subject: [PATCH 0351/1077] drm/i915: Simplify cmd-parser DISPATCH_SECURE check

commit c6b8a4bc1ece2469ceef55f3c9423afdcb3b95c8 upstream.

i915_needs_cmd_parser already checks that for us.

Suggested-by: Mika Kuoppala <mika.kuoppala@intel.com>
Cc: Mika Kuoppala <mika.kuoppala@intel.com>
Signed-off-by: Daniel Vetter <daniel.vetter@intel.com>
Signed-off-by: Pengyu Ma <pengyu.ma@windriver.com>
---
 drivers/gpu/drm/i915/i915_gem_execbuffer.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_gem_execbuffer.c b/drivers/gpu/drm/i915/i915_gem_execbuffer.c
index 8587944..688a0ae 100644
--- a/drivers/gpu/drm/i915/i915_gem_execbuffer.c
+++ b/drivers/gpu/drm/i915/i915_gem_execbuffer.c
@@ -1559,8 +1559,7 @@ i915_gem_do_execbuffer(struct drm_device *dev, void *data,
 		 * don't want that set when the command parser is
 		 * enabled.
 		 */
-		if (USES_PPGTT(dev))
-			dispatch_flags |= I915_DISPATCH_SECURE;
+		dispatch_flags |= I915_DISPATCH_SECURE;
 
 		exec_start = 0;
 	}
-- 
2.0.2

