From 9c716e3d5d24d984cdd3ab3c4766a5f8b8ad6792 Mon Sep 17 00:00:00 2001
From: David Mercado <david.mercado@windriver.com>
Date: Tue, 19 Nov 2013 18:49:50 -0500
Subject: [PATCH 140/159] kmap_types.h: Limit KM_TYPE_NR to 15 for systems
 with 16 or more cores

git.yoctoproject.org/git/linux-yocto-3.10
commit c2a3acc5a9fa1c0b099c44443cf253e4642b87cb standard/axxia/base.

Signed-off-by: Eddy Raineri <eddy.raineri@windriver.com>
---
 arch/arm/include/asm/kmap_types.h |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/arm/include/asm/kmap_types.h b/arch/arm/include/asm/kmap_types.h
index 83eb2f7..3e527f9 100644
--- a/arch/arm/include/asm/kmap_types.h
+++ b/arch/arm/include/asm/kmap_types.h
@@ -4,6 +4,11 @@
 /*
  * This is the "bare minimum".  AIO seems to require this.
  */
+#if (NR_CPUS > 15)
+/* Prevent overlap between fixmap mapping and CPU vector page for 16th core */
+#define KM_TYPE_NR 15
+#else
 #define KM_TYPE_NR 16
+#endif
 
 #endif
-- 
1.7.5.4

