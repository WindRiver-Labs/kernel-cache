From f095100e81f2fc51f23a0511b3fa9e76141f857c Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 4 Apr 2014 03:11:31 +0000
Subject: [PATCH 170/175] gpio:pl061:set irq_base to 0 for devices not support irq

In pl061 driver, set irq_base to 0 for devices which can not
get irq information.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/gpio/gpio-pl061.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpio/gpio-pl061.c b/drivers/gpio/gpio-pl061.c
index 116af90..1620dd2 100644
--- a/drivers/gpio/gpio-pl061.c
+++ b/drivers/gpio/gpio-pl061.c
@@ -345,7 +345,7 @@ static int pl061_probe(struct device *dev,
 
 	irq_set_chained_handler(irq, pl061_irq_handler);
 	irq_set_handler_data(irq, chip);
-	if (irq_base > 0) {
+	if (irq_base >= 0) {
 		chip->domain = irq_domain_add_simple(dev->of_node, PL061_GPIO_NR,
 					     irq_base, &pl061_domain_ops, chip);
 		if (!chip->domain)
@@ -469,7 +469,7 @@ static int pl061_of_probe(struct platform_device *ofdev)
 	irq = of_irq_to_resource(ofdev->dev.of_node, 0, NULL);
 	pl061_data.irq_base = irq;
 	if (irq == NO_IRQ)
-		pl061_data.irq_base = (unsigned) -1;
+		pl061_data.irq_base = 0;
 
 	ofdev->dev.platform_data = &pl061_data;
 
-- 
1.7.1

