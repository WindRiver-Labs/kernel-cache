From 1cfc5d6b9ec91d9e10f58a6dbd0f9619ec13ef2f Mon Sep 17 00:00:00 2001
From: Zhong Hongbo <hongbo.zhong@windriver.com>
Date: Mon, 23 Jun 2014 10:09:19 +0800
Subject: [PATCH 1/3] lsi-acp34xx: Fix d do not be undeclared

linux/drivers/dma/lsi-dma32.c:272:17:
error: 'd' undeclared (first use in this function)
|     reg = readw(&d->src_x_ctr);
|                  ^
|
linux/drivers/dma/lsi-dma32.c:272:17:
note: each undeclared identifier is reported only once for each function
it appears in
| make[4]: *** [drivers/dma/lsi-dma32.o] Error 1

Signed-off-by: Hongbo Zhong <hongbo.zhong@windriver.com>
---
 drivers/dma/lsi-dma32.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/dma/lsi-dma32.c b/drivers/dma/lsi-dma32.c
index 3490788..2fd0461 100644
--- a/drivers/dma/lsi-dma32.c
+++ b/drivers/dma/lsi-dma32.c
@@ -230,6 +230,7 @@ static void gpdma_start(struct gpdma_channel *dmac)
 {
 	struct virt_dma_desc *vdesc;
 	struct gpdma_desc    *desc;
+	struct descriptor    *d;
 	phys_addr_t           paddr;
 
 	vdesc = vchan_next_desc(&dmac->vc);
@@ -242,6 +243,7 @@ static void gpdma_start(struct gpdma_channel *dmac)
 	/* Remove from list and mark as active */
 	list_del(&vdesc->node);
 	desc = to_gpdma_desc(vdesc);
+	d = &desc->hw;
 	dmac->active = desc;
 
 	if (!(dmac->engine->chip->flags & LSIDMA_SEG_REGS)) {
-- 
1.7.5.4

