From 6cf00e81f19a31435f12206db49f6a12815416e8 Mon Sep 17 00:00:00 2001
From: SangeethaRao <sangeetha.rao@lsi.com>
Date: Wed, 4 Dec 2013 20:50:14 -0600
Subject: [PATCH 15/71] arch/powerpc: Checking in correct USB entries to
 ACP3421 DTS

git://git.yoctoproject.org/linux-yocto-3.10 standard/axxia/base
commit bbf1f497124cfe49efe6b1ab28ac8cb0071fd9ef

These changes were made to fix the failure in the USB.
This change only affects the ACP34321 DTS

Signed-off-by: SangeethaRao <sangeetha.rao@lsi.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/powerpc/boot/dts/acp342x.dts |   33 +++++++++++++++++----------------
 1 files changed, 17 insertions(+), 16 deletions(-)

diff --git a/arch/powerpc/boot/dts/acp342x.dts b/arch/powerpc/boot/dts/acp342x.dts
index b851788..f5cf3a6 100644
--- a/arch/powerpc/boot/dts/acp342x.dts
+++ b/arch/powerpc/boot/dts/acp342x.dts
@@ -90,64 +90,65 @@
                         clock-frequency = <0>; // Filled in by zImage
                         UART0: serial@00404000 {
                                 device_type = "serial";
-                                compatible = "acp-uart0";
+                                compatible = "lsi,acp-uart0";
                                 enabled = <1>;
                                 reg = <0x00404000 0x1000>;
                                 clock-reg = <0x00408040 0x20>;
                                 clock-frequency = <0xbebc200>;
                                 current-speed = <9600>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <22 4>;
+                                interrupts = <22>;
                         };
                         UART1: serial@00405000 {
                                 device_type = "serial";
-                                compatible = "acp-uart1";
+                                compatible = "lsi,acp-uart1";
                                 enabled = <0>;
                                 reg = <0x00405000 0x1000>;
                                 clock-reg = <0x00408060 0x20>;
                                 clock-frequency = <200000000>;
                                 current-speed = <9600>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <23 4>;
+                                interrupts = <23>;
                         };
                         USB0: usb@004a4000 {
                                 device_type = "usb";
-                                compatible = "acp-usb";
-                                enabled = <0>;
-                                reg = <0x004a4000 0x00020000>;
+                                compatible = "lsi,acp-usb";
+                                enabled = <1>;
+                                reg = <0x20 0x004A0000 0x0 0020000>,
+					<0x20 0x0040C000 0x0 0001000>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <31 4>;
+                                interrupts = <31>;
                         };
                         I2C: i2c@00403000 {
-                                compatible = "acp-i2c";
+                                compatible = "lsi,acp-i2c";
                                 enabled = <0>;
                                 reg = <0x00403000 0x00001000>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <21 4>;
+                                interrupts = <21>;
                         };
                         SSP: ssp@00402000 {
-                                compatible = "acp-ssp";
+                                compatible = "arm,acp-ssp";
                                 enabled = <0>;
                                 reg = <0x00402000 0x00001000>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <20 4>;
+                                interrupts = <20>;
                         };
                         NAND: nand@00440000 {
                                 device_type = "nand";
-                                compatible = "acp-nand";
+                                compatible = "lsi,acp-nand";
                                 enabled = <1>;
                                 reg = <0x00440000 0x20000
                                        0x0040c000 0x1000>;
                         };
                         FEMAC: femac@00480000 {
                                 device_type = "network";
-                                compatible = "acp-femac";
+                                compatible = "lsi,acp-femac";
                                 enabled = <1>;
                                 reg = <0x00480000 0x1000
                                        0x00481000 0x1000
                                        0x00482000 0x1000>;
                                 interrupt-parent = <&MPIC>;
-                                interrupts = <33 4>;
+                                interrupts = <33>;
                                 mdio-reg = <0x00409000 0x1000>;
                                 // The following will get filled in by
                                 // the boot loader.
@@ -284,7 +285,7 @@
         };
 
         rio0: rapidio@f0020000 {
-                compatible = "acp,rapidio-delta";
+                compatible = "lsi,rapidio-delta";
                 device_type = "rapidio";
                 enabled = <0>;
                 #size = <0>;    /* 0 = (256, small system)
-- 
1.7.5.4

