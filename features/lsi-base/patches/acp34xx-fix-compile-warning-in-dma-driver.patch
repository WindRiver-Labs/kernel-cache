From 0ab1bdcbd0daee27972071bd3044be7c17dd7088 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Mon, 24 Aug 2015 06:12:38 +0000
Subject: [PATCH 1/2] acp34xx: fix compile warning in dma driver

Fix compile warning in dma driver.

drivers/dma/lsi-dma32.c: In function 'desc_to_paddr':
drivers/dma/lsi-dma32.c:234:22: warning: passing argument 1 of 'virt_to_phys' discards 'const' qualifier from pointer target type
  phys_addr_t paddr = virt_to_phys(&desc->hw);
                      ^
In file included from arch/powerpc/include/asm/pgtable-ppc32.h:9:0,
                 from arch/powerpc/include/asm/pgtable.h:18,
                 from include/linux/mm.h:51,
                 from drivers/dma/lsi-dma32.c:26:
arch/powerpc/include/asm/io.h:772:29: note: expected 'volatile void *' but argument is of type 'const struct descriptor *'
 static inline unsigned long virt_to_phys(volatile void * address)

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/dma/lsi-dma32.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/dma/lsi-dma32.c b/drivers/dma/lsi-dma32.c
index 896ed26..aae10c7 100644
--- a/drivers/dma/lsi-dma32.c
+++ b/drivers/dma/lsi-dma32.c
@@ -231,7 +231,7 @@ static void init_descriptor(struct gpdma_desc *desc,
 static phys_addr_t desc_to_paddr(const struct gpdma_channel *dmac,
 				 const struct gpdma_desc *desc)
 {
-	phys_addr_t paddr = virt_to_phys(&desc->hw);
+	phys_addr_t paddr = virt_to_phys((void *)&desc->hw);
 	WARN_ON(paddr & 0xf);
 	if (dmac->engine->chip->flags & LSIDMA_NEXT_FULL)
 		paddr |= 0x8;
-- 
1.7.5.4

