From b181f7b5454e0ed5b4c94a16afd4763d78730f07 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Tue, 11 Aug 2015 01:39:13 +0000
Subject: [PATCH] ACP34xx: Update device tree for nand controller

In ACP34xx's nand controller driver, the ECC status register and mask
are different on 344x/342x, so update compatible field of machine in
ACP34xx device-tree to fit nand controller driver.

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/powerpc/boot/dts/ACP342x.dts   |    2 +-
 arch/powerpc/boot/dts/ACP344xV2.dts |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/ACP342x.dts b/arch/powerpc/boot/dts/ACP342x.dts
index bf1d2a5..190de01 100644
--- a/arch/powerpc/boot/dts/ACP342x.dts
+++ b/arch/powerpc/boot/dts/ACP342x.dts
@@ -20,7 +20,7 @@
 	#address-cells = <2>;
 	#size-cells = <1>;
 	model = "ibm,acpx1-4xx";
-	compatible = "ibm,acpx1-4xx","ibm,47x-AMP";
+	compatible = "ibm,acpx1-4xx","ibm,47x-AMP","lsi,acp3420";
 	dcr-parent = <&{/cpus/cpu@0}>;
 
 	aliases {
diff --git a/arch/powerpc/boot/dts/ACP344xV2.dts b/arch/powerpc/boot/dts/ACP344xV2.dts
index f803083..5a4bb72 100644
--- a/arch/powerpc/boot/dts/ACP344xV2.dts
+++ b/arch/powerpc/boot/dts/ACP344xV2.dts
@@ -20,7 +20,7 @@
         #address-cells = <2>;
         #size-cells = <1>;
         model = "ibm,acpx1-4xx";
-        compatible = "ibm,acpx1-4xx","ibm,47x-AMP";
+        compatible = "ibm,acpx1-4xx","ibm,47x-AMP","lsi,acp3440";
         dcr-parent = <&{/cpus/cpu@0}>;
 
         aliases {
-- 
1.7.5.4

