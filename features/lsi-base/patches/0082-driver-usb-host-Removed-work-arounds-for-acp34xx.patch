From 5f1bb28771a7d4241a1b532fa26f7e126dcad22b Mon Sep 17 00:00:00 2001
From: Charlie Paul <cpaul.windriver@gmail.com>
Date: Wed, 15 Jul 2015 18:56:17 -0700
Subject: [PATCH 82/82] driver/usb/host: Removed work arounds for acp34xx

commit 5f1bb28771a7d4241a1b532fa26f7e126dcad22b from
git://git.yoctoproject.org/linux-yocto-3.14

THe workarounds for acp34xx are not needed.

Signed-off-by: Charlie Paul <cpaul.windriver@gmail.com>
---
 drivers/usb/host/ehci-ci13612.c | 23 -----------------------
 1 file changed, 23 deletions(-)

diff --git a/drivers/usb/host/ehci-ci13612.c b/drivers/usb/host/ehci-ci13612.c
index fed0511..fbc2fde 100644
--- a/drivers/usb/host/ehci-ci13612.c
+++ b/drivers/usb/host/ehci-ci13612.c
@@ -42,14 +42,6 @@ static void ci13612_usb_setup(struct usb_hcd *hcd)
 	struct ehci_hcd *ehci = hcd_to_ehci(hcd);
 	u32 txfulltuning = 0;
 
-	if ((of_find_compatible_node(NULL, NULL, "lsi,acp3500")
-		!= NULL)
-		|| (of_find_compatible_node(NULL, NULL, "lsi,axxia35xx")
-		!= NULL)) {
-		writel(3, USB_SBUSCFG);
-		return;
-	}
-
 	/* Fix for HW errata 0002832: Settings of VUSB_HS_TX_BURST and
 	 * TXFILLTUNING.
 	 * TXFIFOTHRES should satisfy
@@ -142,13 +134,6 @@ static int
 ci13612_fixup_usbcmd_rs(struct ehci_hcd *ehci)
 {
 	u32 port_status;
-	/* This workaround is not applicable to 3500 */
-	if ((of_find_compatible_node(NULL, NULL, "lsi,acp3500")
-		!= NULL)
-		|| (of_find_compatible_node(NULL, NULL, "lsi,axxia35xx")
-		!= NULL)) {
-		return 0;
-	}
 
 	port_status = ehci_readl(ehci, &ehci->regs->port_status[0]);
 	pr_info("ehci-ci13612: port_status = 0x%x\n", port_status);
@@ -180,14 +165,6 @@ ci13612_fixup_txpburst(struct ehci_hcd *ehci)
 {
 	unsigned burst_size;
 
-	/* This workaround is not applicable to 3500 */
-	if ((of_find_compatible_node(NULL, NULL, "lsi,acp3500")
-		!= NULL)
-		|| (of_find_compatible_node(NULL, NULL, "lsi,axxia35xx")
-		!= NULL)) {
-		return;
-	}
-
 	burst_size = ehci_readl(ehci, &ehci->regs->reserved1[1]);
 	burst_size = (burst_size & 0xffff00ff) | 0x4000;	/* TXPBURST */
 	ehci_writel(ehci, burst_size, &ehci->regs->reserved1[1]);
-- 
1.9.1

