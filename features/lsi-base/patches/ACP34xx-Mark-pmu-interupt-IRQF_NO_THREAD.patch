From 43943991e6b62e342be94645586bd56f45dbf0a8 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Thu, 20 Aug 2015 01:24:26 +0000
Subject: [PATCH] ACP34xx: Mark pmu interupt IRQF_NO_THREAD

PMU interrupts must not be threaded.

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/powerpc/perf/core-lsi-acp.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/perf/core-lsi-acp.c b/arch/powerpc/perf/core-lsi-acp.c
index 84bd851..d9dd4a3 100644
--- a/arch/powerpc/perf/core-lsi-acp.c
+++ b/arch/powerpc/perf/core-lsi-acp.c
@@ -151,7 +151,7 @@ static int acp_pmu_reserve_hardware(void)
 			continue;
 		}
 		err = request_irq(irq, acp_pmu_isr,
-				  IRQF_DISABLED | IRQF_NOBALANCING,
+				  IRQF_DISABLED | IRQF_NOBALANCING | IRQF_NO_THREAD,
 				  "pmu", NULL);
 		if (err) {
 			pr_err("PMU reqeust for IRQ%d failed\n", irq);
-- 
1.7.5.4

