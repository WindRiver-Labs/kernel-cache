From c040bf90a69d97fd3512aa6106b3df54f787f236 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Sat, 27 Apr 2013 14:11:17 +0800
Subject: [PATCH 51/82] ACP34xx:Fix a few mismatch section warnings

commit c040bf90a69d97fd3512aa6106b3df54f787f236 from
git://git.yoctoproject.org/linux-yocto-3.14

Fix a few mismatch section warnings introduced by this BSP, includes:

WARNING: vmlinux.o(.text+0x228): Section mismatch in reference from the variable start_secondary_47x to the function .cpuinit.text:mmu_init_secondary()
The function start_secondary_47x() references
the function __cpuinit mmu_init_secondary().
This is often because start_secondary_47x lacks a __cpuinit
annotation or the annotation of mmu_init_secondary is wrong.

WARNING: vmlinux.o(.text+0x24c): Section mismatch in reference from the variable start_secondary_47x to the function .devinit.text:start_secondary()
The function start_secondary_47x() references
the function __devinit start_secondary().
This is often because start_secondary_47x lacks a __devinit
annotation or the annotation of start_secondary is wrong.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/kernel/head_44x.S | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/kernel/head_44x.S b/arch/powerpc/kernel/head_44x.S
index e2165cd..bc6a832 100644
--- a/arch/powerpc/kernel/head_44x.S
+++ b/arch/powerpc/kernel/head_44x.S
@@ -1022,9 +1022,9 @@ END_FTR_SECTION_IFSET(CPU_FTR_476_DD2)
 	blr
 
 #ifdef CONFIG_SMP
-
 /* Entry point for secondary 47x processors */
-_GLOBAL(start_secondary_47x)
+__CPUINIT
+_ENTRY(start_secondary_47x)
         mr      r24,r3          /* CPU number */
 
 	bl	init_cpu_state
@@ -1061,7 +1061,7 @@ _GLOBAL(start_secondary_47x)
 	mtspr	SPRN_SPRG3,r4
 
 	b	start_secondary
-
+__FINIT
 #endif /* CONFIG_SMP */
 
 /*
-- 
1.9.1

