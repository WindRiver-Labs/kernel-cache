From 685c94ac99394466ddf0af555df068359ddf7aae Mon Sep 17 00:00:00 2001
From: David Mercado <david.mercado@windriver.com>
Date: Wed, 20 Nov 2013 17:37:34 -0500
Subject: [PATCH 153/175] LSI AXM55XX SIM: Fix build warning in mach-axxia/axxia.c

git.yoctoproject.org/git/linux-yocto-3.10
commit b180482f7d42b4851b4814ede18dce259c578ec9 standard/axxia/base.

Fix build warning when building AXM55XX for Sim.

Signed-off-by: David Mercado <david.mercado@windriver.com>
---
 arch/arm/mach-axxia/axxia.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-axxia/axxia.c b/arch/arm/mach-axxia/axxia.c
index 2b7c2c1..ba5574d 100644
--- a/arch/arm/mach-axxia/axxia.c
+++ b/arch/arm/mach-axxia/axxia.c
@@ -245,6 +245,7 @@ static struct spi_board_info spi_devs[] __initdata = {
 	}
 };
 
+#ifndef CONFIG_ARCH_AXXIA_SIM
 static int
 l3_set_pstate(void __iomem *l3ctrl, unsigned int req, unsigned int act)
 {
@@ -273,6 +274,7 @@ l3_set_pstate(void __iomem *l3ctrl, unsigned int req, unsigned int act)
 
 	return 0;
 }
+#endif
 
 static int
 axxia_bus_notifier(struct notifier_block *nb, unsigned long event, void *obj)
@@ -300,11 +302,11 @@ static struct notifier_block axxia_amba_nb = {
 
 void __init axxia_dt_init(void)
 {
+#ifndef CONFIG_ARCH_AXXIA_SIM
 	void __iomem *l3ctrl;
 	int rc;
 
 	/* Enable L3-cache */
-#ifndef CONFIG_ARCH_AXXIA_SIM
 	l3ctrl = ioremap(0x2000000000ULL, SZ_4M);
 	if (l3ctrl) {
 		rc = l3_set_pstate(l3ctrl, 0x3, 0xc);
-- 
1.7.1

