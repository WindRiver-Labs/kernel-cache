From 33272c96fda10a3f7ca8f88ee7c2f34304e74adc Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Mon, 27 Jan 2014 07:14:21 +0000
Subject: [PATCH] gpio:pl061:set irq_base to 0 for devices not support irq

In pl061 driver, set irq_base to 0 for devices which can not
get irq information.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/gpio/gpio-pl061.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpio/gpio-pl061.c b/drivers/gpio/gpio-pl061.c
index 4ca8b9a..f688817 100644
--- a/drivers/gpio/gpio-pl061.c
+++ b/drivers/gpio/gpio-pl061.c
@@ -306,7 +306,7 @@ static int pl061_probe(struct device *dev,
 			*retchip = NULL;
 		return -ENOMEM;
 	}
-	if (irq_base > 0) {
+	if (irq_base >= 0) {
 		chip->domain = irq_domain_add_simple(dev->of_node, PL061_GPIO_NR,
 					     irq_base, &pl061_domain_ops, chip);
 		if (!chip->domain)
@@ -469,7 +469,7 @@ static int pl061_of_probe(struct platform_device *ofdev)
 	irq = of_irq_to_resource(ofdev->dev.of_node, 0, NULL);
 	pl061_data.irq_base = irq;
 	if (irq == NO_IRQ)
-		pl061_data.irq_base = (unsigned) -1;
+		pl061_data.irq_base = 0;
 
 	ofdev->dev.platform_data = &pl061_data;
 
-- 
1.7.5.4

