From a771fb2f7aeddc797ca62083aef09b31665cc970 Mon Sep 17 00:00:00 2001
From: wwang22 <wen.wang@lsi.com>
Date: Wed, 9 Oct 2013 10:34:06 -0400
Subject: [PATCH 119/159] drivers/misc: Disabled debug message in MTC driver

git.yoctoproject.org/git/linux-yocto-3.10
commit eb548c74cfb450baa06e245ac67047077926701f standard/axxia/base.

Signed-off-by: wwang22 <wen.wang@lsi.com>
---
 drivers/misc/lsi-mtc.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/drivers/misc/lsi-mtc.c b/drivers/misc/lsi-mtc.c
index d31a64e..ebbdac8 100644
--- a/drivers/misc/lsi-mtc.c
+++ b/drivers/misc/lsi-mtc.c
@@ -31,7 +31,6 @@
 #include <linux/string.h>
 #include "linux/lsi_mtc_ioctl.h"
 
-#define DEBUG
 
 /*
    device tree node:
@@ -2853,8 +2852,9 @@ static int __devinit mtc_probe(struct platform_device *pdev)
 	static struct mtc_device *dev;
 	void __iomem *regs;
 	int rc;
+	u32 *pRegs;
 
-	printk(KERN_DEBUG "!!!!MTC: mtc_probe()\n");
+	printk(KERN_DEBUG"!!!!MTC: mtc_probe()\n");
 	/* Allocate space for device private data */
 	dev = kzalloc(sizeof *dev, GFP_KERNEL);
 	if (!dev) {
@@ -2871,6 +2871,7 @@ static int __devinit mtc_probe(struct platform_device *pdev)
 		rc = -EINVAL;
 		goto err;
 	}
+	pRegs = (u32 *) regs;
 #ifdef __MTC_SIMULATION
 	dev->regs = &_mtc_regs;
 	dev->prgmem = _mtc_prgmem;
@@ -2878,8 +2879,8 @@ static int __devinit mtc_probe(struct platform_device *pdev)
 
 #else
 	dev->regs = regs;
-	dev->prgmem = (u32 *) regs + MTC_PRGMEM_OFFSET / 4;
-	dev->tdomem = (u32 *) regs + MTC_TDOMEM_OFFSET / 4;
+	dev->prgmem =  pRegs + MTC_PRGMEM_OFFSET/4;
+	dev->tdomem =  pRegs + MTC_TDOMEM_OFFSET/4;
 #endif
 	/* Attach to IRQ */
 	dev->irq = irq_of_parse_and_map(pdev->dev.of_node, 0);
-- 
1.7.5.4

