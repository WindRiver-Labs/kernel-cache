From d5395e431334d45548eb94f6afc56ee70820095e Mon Sep 17 00:00:00 2001
From: SangeethaRao <sangeetha.rao@lsi.com>
Date: Fri, 14 Feb 2014 00:36:50 -0600
Subject: [PATCH 46/71] LSI powerpc/sysdev: Removing the power of 2 size
 restriction

git://git.yoctoproject.org/linux-yocto-3.10 standard/axxia/base
commit abfa1efa2a02f7a7ededd71abfca3bb43c26dad4

Removed the power of 2 size restriction for PCIe inbound
mapping in LSI PCIe driver

Signed-off-by: SangeethaRao <sangeetha.rao@lsi.com>
Signed-off-by: Zhong Hongbo <hongbo.zhong@windriver.com>
---
 arch/powerpc/sysdev/lsi_pci.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/arch/powerpc/sysdev/lsi_pci.c b/arch/powerpc/sysdev/lsi_pci.c
index e820572..6e56756 100644
--- a/arch/powerpc/sysdev/lsi_pci.c
+++ b/arch/powerpc/sysdev/lsi_pci.c
@@ -152,9 +152,8 @@ static int __init acp_parse_dma_ranges(struct pci_controller *hose,
 		return -ENXIO;
 	}
 
-	/* Check we are a power of 2 size and that base is a multiple of size*/
-	if ((size & (size - 1)) != 0  ||
-	    (res->start & (size - 1)) != 0) {
+	/* Check that base is a multiple of size*/
+	if ((res->start & (size - 1)) != 0) {
 		pr_err("%s: dma-ranges unaligned\n",
 		       hose->dn->full_name);
 		return -ENXIO;
-- 
1.7.5.4

