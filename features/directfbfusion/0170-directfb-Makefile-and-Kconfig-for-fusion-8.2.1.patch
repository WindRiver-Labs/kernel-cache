From 757a94c18044ecfe41cd373c743f9fe527f6e803 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 15 Mar 2011 09:57:49 +0800
Subject: [PATCH] directfb: Makefile and Kconfig for fusion 8.2.1

This patch tries to add it into linux kernel,
so Kconfig and Makefile are changed.

Makefile-2.6 is renamed to Makefile and 2.4 version is deleted.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/char/Kconfig             |    1 +
 drivers/char/Makefile            |    1 +
 drivers/char/fusion/Makefile     |    3 +++
 drivers/char/fusion/Makefile-2.4 |    6 ------
 drivers/char/fusion/Makefile-2.6 |    3 ---
 5 files changed, 5 insertions(+), 9 deletions(-)
 create mode 100644 drivers/char/fusion/Makefile
 delete mode 100644 drivers/char/fusion/Makefile-2.4
 delete mode 100644 drivers/char/fusion/Makefile-2.6

diff --git a/drivers/char/Kconfig b/drivers/char/Kconfig
index 2cfa460..7dfc24c 100644
--- a/drivers/char/Kconfig
+++ b/drivers/char/Kconfig
@@ -708,6 +708,7 @@ config IBM_BSR
 	  between several cores on a system
 
 source "drivers/char/ipmi/Kconfig"
+source "drivers/char/fusion/Kconfig"
 
 config DS1620
 	tristate "NetWinder thermometer support"
diff --git a/drivers/char/Makefile b/drivers/char/Makefile
index 617c983..571b891 100644
--- a/drivers/char/Makefile
+++ b/drivers/char/Makefile
@@ -102,6 +102,7 @@ obj-$(CONFIG_MWAVE)		+= mwave/
 obj-$(CONFIG_AGP)		+= agp/
 obj-$(CONFIG_PCMCIA)		+= pcmcia/
 obj-$(CONFIG_IPMI_HANDLER)	+= ipmi/
+obj-$(CONFIG_FUSION_DEVICE)	+= fusion/
 
 obj-$(CONFIG_HANGCHECK_TIMER)	+= hangcheck-timer.o
 obj-$(CONFIG_TCG_TPM)		+= tpm/
diff --git a/drivers/char/fusion/Makefile b/drivers/char/fusion/Makefile
new file mode 100644
index 0000000..8c825b2
--- /dev/null
+++ b/drivers/char/fusion/Makefile
@@ -0,0 +1,3 @@
+obj-$(CONFIG_FUSION_DEVICE) += fusion.o
+
+fusion-y := call.o entries.o fifo.o fusiondev.o fusionee.o list.o property.o reactor.o ref.o skirmish.o shmpool.o
diff --git a/drivers/char/fusion/Makefile-2.4 b/drivers/char/fusion/Makefile-2.4
deleted file mode 100644
index dc13229..0000000
--- a/drivers/char/fusion/Makefile-2.4
+++ /dev/null
@@ -1,6 +0,0 @@
-O_TARGET := fusion.o
-
-obj-y   := call.o entries.o fifo.o fusiondev.o fusionee.o list.o property.o reactor.o ref.o skirmish.o shmpool.o
-obj-$(CONFIG_FUSION_DEVICE)   := $(O_TARGET)
-
-include $(TOPDIR)/Rules.make
diff --git a/drivers/char/fusion/Makefile-2.6 b/drivers/char/fusion/Makefile-2.6
deleted file mode 100644
index 8c825b2..0000000
--- a/drivers/char/fusion/Makefile-2.6
+++ /dev/null
@@ -1,3 +0,0 @@
-obj-$(CONFIG_FUSION_DEVICE) += fusion.o
-
-fusion-y := call.o entries.o fifo.o fusiondev.o fusionee.o list.o property.o reactor.o ref.o skirmish.o shmpool.o
-- 
1.7.3.3

