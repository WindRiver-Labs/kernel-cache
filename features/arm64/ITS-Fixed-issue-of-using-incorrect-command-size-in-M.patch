From be413e59b9e635b6459cdd3a991d6d7ab93cb445 Mon Sep 17 00:00:00 2001
From: Sunil Goutham <sgoutham@cavium.com>
Date: Fri, 6 Jun 2014 16:06:37 +0530
Subject: [PATCH 173/430] ITS: Fixed issue of using incorrect 'command size'
 in MAPD command

The commit comes from
  git://git.kernel.org/pub/scm/linux/kernel/git/rric/linux.git

Signed-off-by: Sunil Goutham <sgoutham@cavium.com>
Signed-off-by: Robert Richter <rrichter@cavium.com>
(cherry picked from commit b81d43b96fdd9c496cff01936ac462ba8628a97f)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/irqchip/irq-gic-v3-its.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/irqchip/irq-gic-v3-its.c b/drivers/irqchip/irq-gic-v3-its.c
index aba080f..1549587 100644
--- a/drivers/irqchip/irq-gic-v3-its.c
+++ b/drivers/irqchip/irq-gic-v3-its.c
@@ -197,8 +197,8 @@ static void its_encode_phys_id(struct its_cmd_block *cmd, u32 phys_id)
 
 static void its_encode_size(struct its_cmd_block *cmd, u8 size)
 {
-	cmd->raw_cmd[1] &= ~0x1fUL;
-	cmd->raw_cmd[1] |= size & 0x1f;
+	cmd->raw_cmd[1] &= ~0xffUL;
+	cmd->raw_cmd[1] |= size & 0xff;
 }
 
 static void its_encode_itt(struct its_cmd_block *cmd, u64 itt_addr)
-- 
1.7.5.4

