From fb7367b3838886c20a18beb61c870df080aeafaa Mon Sep 17 00:00:00 2001
From: Marc Zyngier <marc.zyngier@arm.com>
Date: Mon, 30 Jun 2014 10:32:56 +0100
Subject: [PATCH 169/430] GICv3: repaint id to event_id

This commit comes from:
  git://git.kernel.org/pub/scm/linux/kernel/git/rric/linux.git

Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>
(cherry picked from commit 28b195a09a9d35ebd472426cafe0066af9aa1352)
Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 drivers/irqchip/irq-gic-v3-its.c |   32 ++++++++++++++++----------------
 1 files changed, 16 insertions(+), 16 deletions(-)

diff --git a/drivers/irqchip/irq-gic-v3-its.c b/drivers/irqchip/irq-gic-v3-its.c
index 822f55e..aa3144f 100644
--- a/drivers/irqchip/irq-gic-v3-its.c
+++ b/drivers/irqchip/irq-gic-v3-its.c
@@ -109,12 +109,12 @@ struct its_cmd_desc {
 	union {
 		struct {
 			struct its_device *dev;
-			u32 id;
+			u32 event_id;
 		} its_inv_cmd;
 
 		struct {
 			struct its_device *dev;
-			u32 id;
+			u32 event_id;
 		} its_int_cmd;
 
 		struct {
@@ -130,7 +130,7 @@ struct its_cmd_desc {
 		struct {
 			struct its_device *dev;
 			u32 phys_id;
-			u32 id;
+			u32 event_id;
 		} its_mapvi_cmd;
 
 		struct {
@@ -141,7 +141,7 @@ struct its_cmd_desc {
 
 		struct {
 			struct its_device *dev;
-			u32 id;
+			u32 event_id;
 		} its_discard_cmd;
 
 		struct {
@@ -183,7 +183,7 @@ static void its_encode_devid(struct its_cmd_block *cmd, u32 devid)
 	cmd->raw_cmd[0] |= ((u64)devid) << 32;
 }
 
-static void its_encode_id(struct its_cmd_block *cmd, u32 id)
+static void its_encode_event_id(struct its_cmd_block *cmd, u32 id)
 {
 	cmd->raw_cmd[1] &= ~0xffffffffUL;
 	cmd->raw_cmd[1] |= id;
@@ -273,7 +273,7 @@ static struct its_collection *its_build_mapvi_cmd(struct its_cmd_block *cmd,
 {
 	its_encode_cmd(cmd, GITS_CMD_MAPVI);
 	its_encode_devid(cmd, desc->its_mapvi_cmd.dev->device_id);
-	its_encode_id(cmd, desc->its_mapvi_cmd.id);
+	its_encode_event_id(cmd, desc->its_mapvi_cmd.event_id);
 	its_encode_phys_id(cmd, desc->its_mapvi_cmd.phys_id);
 	its_encode_collection(cmd, desc->its_mapvi_cmd.dev->collection->col_id);
 
@@ -287,7 +287,7 @@ static struct its_collection *its_build_movi_cmd(struct its_cmd_block *cmd,
 {
 	its_encode_cmd(cmd, GITS_CMD_MOVI);
 	its_encode_devid(cmd, desc->its_movi_cmd.dev->device_id);
-	its_encode_id(cmd, desc->its_movi_cmd.id);
+	its_encode_event_id(cmd, desc->its_movi_cmd.id);
 	its_encode_collection(cmd, desc->its_movi_cmd.col->col_id);
 
 	its_fixup_cmd(cmd);
@@ -300,7 +300,7 @@ static struct its_collection *its_build_discard_cmd(struct its_cmd_block *cmd,
 {
 	its_encode_cmd(cmd, GITS_CMD_DISCARD);
 	its_encode_devid(cmd, desc->its_discard_cmd.dev->device_id);
-	its_encode_id(cmd, desc->its_discard_cmd.id);
+	its_encode_event_id(cmd, desc->its_discard_cmd.event_id);
 
 	its_fixup_cmd(cmd);
 
@@ -312,7 +312,7 @@ static struct its_collection *its_build_inv_cmd(struct its_cmd_block *cmd,
 {
 	its_encode_cmd(cmd, GITS_CMD_INV);
 	its_encode_devid(cmd, desc->its_inv_cmd.dev->device_id);
-	its_encode_id(cmd, desc->its_inv_cmd.id);
+	its_encode_event_id(cmd, desc->its_inv_cmd.event_id);
 
 	its_fixup_cmd(cmd);
 
@@ -336,7 +336,7 @@ static struct its_collection *its_build_int_cmd(struct its_cmd_block *cmd,
 {
 	its_encode_cmd(cmd, GITS_CMD_INT);
 	its_encode_devid(cmd, desc->its_int_cmd.dev->device_id);
-	its_encode_id(cmd, desc->its_int_cmd.id);
+	its_encode_event_id(cmd, desc->its_int_cmd.event_id);
 
 	its_fixup_cmd(cmd);
 
@@ -469,12 +469,12 @@ post:
 	its_wait_for_range_completion(its, cmd, next_cmd);
 }
 
-static void its_send_inv(struct its_device *dev, u32 lpi)
+static void its_send_inv(struct its_device *dev, u32 event_id)
 {
 	struct its_cmd_desc desc;
 
 	desc.its_inv_cmd.dev = dev;
-	desc.its_inv_cmd.id = lpi;
+	desc.its_inv_cmd.event_id = event_id;
 
 	its_send_single_command(dev->its, its_build_inv_cmd, &desc);
 }
@@ -485,7 +485,7 @@ static void its_send_int(struct its_device *dev, u32 id)
 	struct its_cmd_desc desc;
 
 	desc.its_int_cmd.dev = dev;
-	desc.its_int_cmd.id = id;
+	desc.its_int_cmd.event_id = id;
 
 	its_send_single_command(dev->its, its_build_int_cmd, &desc);
 }
@@ -518,7 +518,7 @@ static void its_send_mapvi(struct its_device *dev, u32 irq_id, u32 id)
 
 	desc.its_mapvi_cmd.dev = dev;
 	desc.its_mapvi_cmd.phys_id = irq_id;
-	desc.its_mapvi_cmd.id = id;
+	desc.its_mapvi_cmd.event_id = id;
 
 	its_send_single_command(dev->its, its_build_mapvi_cmd, &desc);
 }
@@ -535,12 +535,12 @@ static void its_send_movi(struct its_device *dev,
 	its_send_single_command(dev->its, its_build_movi_cmd, &desc);
 }
 
-static void its_send_discard(struct its_device *dev, u32 irq_id)
+static void its_send_discard(struct its_device *dev, u32 id)
 {
 	struct its_cmd_desc desc;
 
 	desc.its_discard_cmd.dev = dev;
-	desc.its_discard_cmd.id = irq_id;
+	desc.its_discard_cmd.event_id = id;
 
 	its_send_single_command(dev->its, its_build_discard_cmd, &desc);
 }
-- 
1.7.5.4

