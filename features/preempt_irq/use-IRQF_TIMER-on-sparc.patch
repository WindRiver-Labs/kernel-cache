From a7e33587b7e870fc02543551ac87dacb69bae22b Mon Sep 17 00:00:00 2001
From: Hong H. Pham <hong.pham@windriver.com>
Date: Tue, 20 Jan 2009 10:16:02 -0500
Subject: [PATCH] preempt_irq: use IRQF_TIMER on sparc

Timer interrupts can not be threaded, so the IRQF_NODELAY flag must be
specified.  We get this via IRQF_TIMER.

Signed-off-by: Hong H. Pham <hong.pham@windriver.com>
---
 arch/sparc64/kernel/irq.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/sparc64/kernel/irq.c b/arch/sparc64/kernel/irq.c
index 7495bc7..7872476 100644
--- a/arch/sparc64/kernel/irq.c
+++ b/arch/sparc64/kernel/irq.c
@@ -986,6 +986,7 @@ static void __init init_send_mondo_info(void)
 
 static struct irqaction timer_irq_action = {
 	.name = "timer",
+	.flags = IRQF_TIMER,
 };
 
 /* Only invoked on boot processor. */
-- 
1.6.0.3

