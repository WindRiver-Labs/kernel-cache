From 03399be3ee91c3e6959e18503bc555f099799322 Mon Sep 17 00:00:00 2001
From: Corey Minyard <cminyard@mvista.com>
Date: Fri, 2 Aug 2013 15:24:34 -0500
Subject: [PATCH] rt: Fix NO_HZ config use

NO_HZ is old, it has become NO_HZ_COMMON. NO_HZ generally still works
because a leftover NO_HZ in a config file will still work, but it needs
to be fixed.

Signed-off-by: Corey Minyard <cminyard@mvista.com>
[http://marc.info/?l=linux-rt-users&m=137547868908896&w=2]
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/kernel/softirq.c b/kernel/softirq.c
index c4c7ecb..c611d94 100644
--- a/kernel/softirq.c
+++ b/kernel/softirq.c
@@ -87,7 +87,7 @@ DEFINE_TRACE(irq_tasklet_high_exit);
 DEFINE_TRACE(irq_tasklet_low_entry);
 DEFINE_TRACE(irq_tasklet_low_exit);
 
-#ifdef CONFIG_NO_HZ
+#ifdef CONFIG_NO_HZ_COMMON
 # ifdef CONFIG_PREEMPT_RT_FULL
 
 struct softirq_runner {
@@ -111,7 +111,7 @@ static inline void softirq_clr_runner(unsigned int sirq)
 }
 # endif
 
-#else /* !NO_HZ */
+#else /* !NO_HZ_COMMON */
 static inline void softirq_set_runner(unsigned int sirq) { }
 static inline void softirq_clr_runner(unsigned int sirq) { }
 #endif
-- 
1.8.3.1

