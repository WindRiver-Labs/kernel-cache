From d72cb797c2bd10b059e37d903f5a58a4f80f67b8 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Fri, 7 May 2010 16:03:35 +0800
Subject: [PATCH] cgroups: blkio fix compiling error

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 block/blk-ioc.c                |    1 -
 drivers/md/dm-ioband-ctl.c     |    4 ++--
 drivers/md/dm-ioband-rangebw.c |    1 +
 mm/biotrack.c                  |    1 +
 4 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/block/blk-ioc.c b/block/blk-ioc.c
index 64eb434..9e4f876 100644
--- a/block/blk-ioc.c
+++ b/block/blk-ioc.c
@@ -90,7 +90,6 @@ void init_io_context(struct io_context *ioc)
 	ioc->ioprio = 0;
 	ioc->last_waited = jiffies; /* doesn't matter... */
 	ioc->nr_batch_requests = 0; /* because this is 0 */
-	ioc->aic = NULL;
 	INIT_RADIX_TREE(&ioc->radix_root, GFP_ATOMIC | __GFP_HIGH);
 	INIT_HLIST_HEAD(&ioc->cic_list);
 	ioc->ioc_data = NULL;
diff --git a/drivers/md/dm-ioband-ctl.c b/drivers/md/dm-ioband-ctl.c
index 9927ad3..f1b1d33 100644
--- a/drivers/md/dm-ioband-ctl.c
+++ b/drivers/md/dm-ioband-ctl.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/bio.h>
+#include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
 #include <linux/rbtree.h>
@@ -433,8 +434,7 @@ static int ioband_ctr(struct dm_target *ti, unsigned argc, char **argv)
 	}
 	io_limit = val;
 
-	r = dm_get_device(ti, argv[0], 0, ti->len,
-			  dm_table_get_mode(ti->table), &dev);
+	r = dm_get_device(ti, argv[0], dm_table_get_mode(ti->table), &dev);
 	if (r) {
 		ti->error = "Device lookup failed";
 		return r;
diff --git a/drivers/md/dm-ioband-rangebw.c b/drivers/md/dm-ioband-rangebw.c
index cce08a7..68de788 100644
--- a/drivers/md/dm-ioband-rangebw.c
+++ b/drivers/md/dm-ioband-rangebw.c
@@ -20,6 +20,7 @@
 
 #include <linux/bio.h>
 #include <linux/workqueue.h>
+#include <linux/slab.h>
 #include <linux/rbtree.h>
 #include <linux/jiffies.h>
 #include <linux/random.h>
diff --git a/mm/biotrack.c b/mm/biotrack.c
index 002ae95..327216c 100644
--- a/mm/biotrack.c
+++ b/mm/biotrack.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/smp.h>
 #include <linux/bit_spinlock.h>
+#include <linux/slab.h>
 #include <linux/blkdev.h>
 #include <linux/biotrack.h>
 #include <linux/mm_inline.h>
-- 
1.6.0.3

