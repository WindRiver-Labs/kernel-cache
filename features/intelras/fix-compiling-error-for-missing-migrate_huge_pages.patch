From 8784d77d3ca5d8c019117c0d6b6e4ba6c120b7c1 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Thu, 13 Oct 2011 11:13:53 +0800
Subject: [PATCH] fix compiling error for missing migrate_huge_pages

commit "HWPOISON, hugetlb: soft offlining for hugepage"
introduced a change to mm/memory-failure.c in which a call
to the migrate_huge_pages() function was introduced. At this
point we don't want to implement migrate_huge_pages()
therefore simply return an error.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 include/linux/migrate.h |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/include/linux/migrate.h b/include/linux/migrate.h
index b32563f..8e7ce1a 100644
--- a/include/linux/migrate.h
+++ b/include/linux/migrate.h
@@ -5,6 +5,8 @@
 #include <linux/mempolicy.h>
 
 typedef struct page *new_page_t(struct page *, unsigned long private, int **);
+static inline int migrate_huge_pages(struct list_head *l, new_page_t x,
+	unsigned long private, int offlining) { return -ENOSYS; }
 
 #ifdef CONFIG_MIGRATION
 #define PAGE_MIGRATION 1
-- 
1.7.0.4

