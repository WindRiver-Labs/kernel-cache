From 32a8580b4f0b5672e8c92101ae3334dccb0728c5 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 28 Feb 2014 07:55:01 -0800
Subject: [PATCH] grsec/ppc: Classic PPC32 MMU doesn't have EXEC bit

It is not correct to emulate _PAGE_EXEC bit with _PAGE_GUARDED on classic
PPC32 MMU. It prevents from qemuppc booting up due to wrong page table access
permission.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/powerpc/include/asm/pte-hash32.h | 1 -
 1 file changed, 1 deletion(-)

diff --git a/arch/powerpc/include/asm/pte-hash32.h b/arch/powerpc/include/asm/pte-hash32.h
index 85d86bf..4aad413 100644
--- a/arch/powerpc/include/asm/pte-hash32.h
+++ b/arch/powerpc/include/asm/pte-hash32.h
@@ -21,7 +21,6 @@
 #define _PAGE_FILE	0x004	/* when !present: nonlinear file mapping */
 #define _PAGE_USER	0x004	/* usermode access allowed */
 #define _PAGE_GUARDED	0x008	/* G: prohibit speculative access */
-#define _PAGE_EXEC	_PAGE_GUARDED
 #define _PAGE_COHERENT	0x010	/* M: enforce memory coherence (SMP systems) */
 #define _PAGE_NO_CACHE	0x020	/* I: cache inhibit */
 #define _PAGE_WRITETHRU	0x040	/* W: cache write-through */
-- 
2.0.2

