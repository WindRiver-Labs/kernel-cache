From 9ad5fe07045dc25bcc02acfca3b45b5f32fdab9f Mon Sep 17 00:00:00 2001
From: Jianchuan Wang <jianchuan.wang@windriver.com>
Date: Thu, 19 Mar 2015 03:30:32 +0000
Subject: [PATCH 2/6] grsec: Add const attribute for variable addr in the
 register_ipv6_seq_ops_addr

There is a warning because of incompatible pointer type.

Signed-off-by: Jianchuan Wang <jianchuan.wang@windriver.com>
---
 fs/proc/proc_net.c  | 4 ++--
 net/ipv6/addrconf.c | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/fs/proc/proc_net.c b/fs/proc/proc_net.c
index b4f262a..f816b1d 100644
--- a/fs/proc/proc_net.c
+++ b/fs/proc/proc_net.c
@@ -28,9 +28,9 @@
 #include "internal.h"
 
 #if defined(CONFIG_IPV6) || defined(CONFIG_IPV6_MODULE)
-static struct seq_operations *ipv6_seq_ops_addr;
+static const struct seq_operations *ipv6_seq_ops_addr;
 
-void register_ipv6_seq_ops_addr(struct seq_operations *addr)
+void register_ipv6_seq_ops_addr(const struct seq_operations *addr)
 {
 	ipv6_seq_ops_addr = addr;
 }
diff --git a/net/ipv6/addrconf.c b/net/ipv6/addrconf.c
index 230c2c5..5418f31 100644
--- a/net/ipv6/addrconf.c
+++ b/net/ipv6/addrconf.c
@@ -3523,7 +3523,7 @@ static const struct file_operations if6_fops = {
 	.release	= seq_release_net,
 };
 
-extern void register_ipv6_seq_ops_addr(struct seq_operations *addr);
+extern void register_ipv6_seq_ops_addr( const struct seq_operations *addr);
 extern void unregister_ipv6_seq_ops_addr(void);
 
 static int __net_init if6_proc_net_init(struct net *net)
-- 
2.0.1

