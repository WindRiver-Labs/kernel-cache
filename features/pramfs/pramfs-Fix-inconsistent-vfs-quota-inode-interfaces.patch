From 066b59db49057168bc7b4f45b9442b30bfc27fdd Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Wed, 21 Jul 2010 08:51:54 +0800
Subject: [PATCH] pramfs: Fix inconsistent vfs quota inode interfaces

update pramfs VFS code to the latest quota interfaces of
2.6.34+

The related fix commit ID for other filesystem as follows:
    63936ddaa16b9486e2d426ed7b09f559a5c60f87

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 fs/pramfs/inode.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/fs/pramfs/inode.c b/fs/pramfs/inode.c
index c3d2b18..47fa02b 100644
--- a/fs/pramfs/inode.c
+++ b/fs/pramfs/inode.c
@@ -342,8 +342,8 @@ static void pram_free_inode(struct inode *inode)
 	 */
 	if (!is_bad_inode(inode)) {
 		/* Quota is already initialized in iput() */
-		vfs_dq_free_inode(inode);
-		vfs_dq_drop(inode);
+		dquot_free_inode(inode);
+		dquot_drop(inode);
 	}
 
 	lock_super(sb);
@@ -486,8 +486,8 @@ struct inode *pram_new_inode(const struct inode *dir, int mode)
 
 	unlock_super(sb);
 
-	if (vfs_dq_alloc_inode(inode)) {
-		vfs_dq_drop(inode);
+	if (dquot_alloc_inode(inode)) {
+		dquot_drop(inode);
 		inode->i_flags |= S_NOQUOTA;
 		inode->i_nlink = 0;
 		iput(inode);
-- 
1.6.5.2

