From e6d9d78c560236310f4367a4fd2c795107eb8499 Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Tue, 12 Jul 2011 21:11:54 +0800
Subject: [PATCH] fix find_next_zero_bit proper to both big and little

It seems pram_find_next_zero_bit is only proper to little endian,
so replace it with find_next_zero_bit fitting for both, and remove
the macro pram_find_next_zero_bit.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
---
 fs/pramfs/balloc.c |    2 +-
 fs/pramfs/pram.h   |    1 -
 2 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/fs/pramfs/balloc.c b/fs/pramfs/balloc.c
index 48b6e95..b8ca950 100644
--- a/fs/pramfs/balloc.c
+++ b/fs/pramfs/balloc.c
@@ -88,7 +88,7 @@ int pram_new_block(struct super_block *sb, unsigned long *blocknr, int zero)
 
 	if (ps->s_free_blocks_count) {
 		/* find the oldest unused block */
-		bnr = pram_find_next_zero_bit(bitmap,
+		bnr = find_next_zero_bit(bitmap,
 					 be32_to_cpu(ps->s_blocks_count),
 					 be32_to_cpu(ps->s_free_blocknr_hint));
 
diff --git a/fs/pramfs/pram.h b/fs/pramfs/pram.h
index ad1d2c4..1ccf9ca 100644
--- a/fs/pramfs/pram.h
+++ b/fs/pramfs/pram.h
@@ -53,7 +53,6 @@ extern int pram_mmap(struct file *file, struct vm_area_struct *vma);
 
 #define pram_set_bit			ext2_set_bit
 #define pram_clear_bit			ext2_clear_bit
-#define pram_find_next_zero_bit		ext2_find_next_zero_bit
 
 #define clear_opt(o, opt)	(o &= ~PRAM_MOUNT_##opt)
 #define set_opt(o, opt)		(o |= PRAM_MOUNT_##opt)
-- 
1.7.0.4

