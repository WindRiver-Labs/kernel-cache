From a7b89d328037979a783bc23c6af26135c040b46d Mon Sep 17 00:00:00 2001
From: Zumeng Chen <zumeng.chen@windriver.com>
Date: Wed, 28 Apr 2010 15:41:05 +0800
Subject: [PATCH 2/2] build proper dependency for SEC and IXDP4XX

OCF_TALITOS depends on FSL_SOC, and OCF_IXP4XX depends on
CRYPTO_DEV_IXP4XX.

Also select PPC_MERGE when OCF_TALITOS is enabled.

Signed-off-by: Zumeng Chen <zumeng.chen@windriver.com>
Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 crypto/ocf/Kconfig |    5 +++--
 1 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/crypto/ocf/Kconfig b/crypto/ocf/Kconfig
index b9c24ff..07736ad 100644
--- a/crypto/ocf/Kconfig
+++ b/crypto/ocf/Kconfig
@@ -40,7 +40,7 @@ config OCF_SAFE
 
 config OCF_IXP4XX
 	tristate "IXP4xx (HW crypto engine)"
-	depends on OCF_OCF
+	depends on OCF_OCF && CRYPTO_DEV_IXP4XX
 	help
 	  XScale IXP4xx crypto accelerator driver.  Requires the
 	  Intel Access library.
@@ -68,7 +68,8 @@ config OCF_HIFNHIPP
 
 config OCF_TALITOS
 	tristate "talitos (HW crypto engine)"
-	depends on OCF_OCF
+	depends on OCF_OCF && FSL_SOC
+	select PPC_MERGE
 	help
 	  OCF driver for Freescale's security engine (SEC/talitos).
 
-- 
1.7.0.4

