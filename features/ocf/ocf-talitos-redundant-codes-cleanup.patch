From 22cb62e76dcc46d72297aad7d0d222c7cc2b0f51 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Mon, 3 Dec 2012 12:36:30 +0800
Subject: [PATCH 3/5] ocf/talitos: redundant codes cleanup

After commit "ocf/talitos: Update driver code so as to keep consistent
with kernel", some codes are redundant and need to be cleanup.

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 crypto/ocf/talitos/talitos.c |   36 ------------------------------------
 1 files changed, 0 insertions(+), 36 deletions(-)

diff --git a/crypto/ocf/talitos/talitos.c b/crypto/ocf/talitos/talitos.c
index 4cd9eab..7cdc89a 100644
--- a/crypto/ocf/talitos/talitos.c
+++ b/crypto/ocf/talitos/talitos.c
@@ -154,14 +154,8 @@ static void talitos_init_device(struct talitos_softc *sc);
 static void talitos_reset_device_master(struct talitos_softc *sc);
 static void talitos_reset_device(struct talitos_softc *sc);
 static void talitos_errorprocessing(struct talitos_softc *sc);
-#ifdef CONFIG_PPC
-static int talitos_probe(struct platform_device *pdev,
-				const struct of_device_id *match);
-static int talitos_remove(struct platform_device *pdev);
-#else
 static int talitos_probe(struct platform_device *pdev);
 static int talitos_remove(struct platform_device *pdev);
-#endif
 #ifdef CONFIG_OCF_RANDOMHARVEST
 static int talitos_read_random(void *arg, u_int32_t *buf, int maxwords);
 static void talitos_rng_init(struct talitos_softc *sc);
@@ -1082,12 +1076,7 @@ talitos_reset_device(struct talitos_softc *sc)
 
 /* Set up the crypto device structure, private data,
  * and anything else we need before we start */
-#ifdef CONFIG_PPC
-static int talitos_probe(struct platform_device *pdev,
-				const struct of_device_id *match)
-#else
 static int talitos_probe(struct platform_device *pdev)
-#endif
 {
 	struct talitos_softc *sc = NULL;
 	struct resource *r;
@@ -1267,11 +1256,7 @@ out:
 	return -ENOMEM;
 }
 
-#ifdef CONFIG_PPC
-static int talitos_remove(struct platform_device *pdev)
-#else
 static int talitos_remove(struct platform_device *pdev)
-#endif
 {
 #ifdef CONFIG_PPC
 	struct talitos_softc *sc = dev_get_drvdata(&pdev->dev);
@@ -1301,7 +1286,6 @@ static int talitos_remove(struct platform_device *pdev)
 	return 0;
 }
 
-#ifdef CONFIG_PPC
 static struct of_device_id talitos_match[] = {
 	{ .compatible = "fsl,sec3.0", },
 	{ .compatible = "fsl,sec2.0", },
@@ -1329,26 +1313,6 @@ static void __exit talitos_exit(void)
 {
 	platform_driver_unregister(&talitos_driver);
 }
-#else
-/* Structure for a platform device driver */
-static struct platform_driver talitos_driver = {
-	.probe = talitos_probe,
-	.remove = talitos_remove,
-	.driver = {
-		.name = "fsl-sec2",
-	}
-};
-
-static int __init talitos_init(void)
-{
-	return platform_driver_register(&talitos_driver);
-}
-
-static void __exit talitos_exit(void)
-{
-	platform_driver_unregister(&talitos_driver);
-}
-#endif
 
 module_init(talitos_init);
 module_exit(talitos_exit);
-- 
1.7.0

