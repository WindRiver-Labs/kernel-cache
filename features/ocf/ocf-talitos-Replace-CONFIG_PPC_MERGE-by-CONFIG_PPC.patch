From 53e5b8efaaec272868ff345e391e5ba53f341b03 Mon Sep 17 00:00:00 2001
From: Xufeng Zhang <xufeng.zhang@windriver.com>
Date: Thu, 29 Nov 2012 10:20:35 +0800
Subject: [PATCH 1/5] ocf/talitos: Replace CONFIG_PPC_MERGE by CONFIG_PPC

Since commit dbc1c5c2 "powerpc: Remove Kconfig support for PPC_MERGE",
PPC_MERGE Kconfig support has been removed, so we need to update ocf/talitos
code accordingly by changing CONFIG_PPC_MERGE to CONFIG_PPC.

Signed-off-by: Xufeng Zhang <xufeng.zhang@windriver.com>
---
 crypto/ocf/talitos/talitos.c |   22 +++++++++++-----------
 1 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/crypto/ocf/talitos/talitos.c b/crypto/ocf/talitos/talitos.c
index c4bc8c0..54cb8c0 100644
--- a/crypto/ocf/talitos/talitos.c
+++ b/crypto/ocf/talitos/talitos.c
@@ -154,7 +154,7 @@ static void talitos_init_device(struct talitos_softc *sc);
 static void talitos_reset_device_master(struct talitos_softc *sc);
 static void talitos_reset_device(struct talitos_softc *sc);
 static void talitos_errorprocessing(struct talitos_softc *sc);
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 static int talitos_probe(struct of_device *ofdev, const struct of_device_id *match);
 static int talitos_remove(struct of_device *ofdev);
 #else
@@ -1081,7 +1081,7 @@ talitos_reset_device(struct talitos_softc *sc)
 
 /* Set up the crypto device structure, private data,
  * and anything else we need before we start */
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 static int talitos_probe(struct of_device *ofdev, const struct of_device_id *match)
 #else
 static int talitos_probe(struct platform_device *pdev)
@@ -1089,7 +1089,7 @@ static int talitos_probe(struct platform_device *pdev)
 {
 	struct talitos_softc *sc = NULL;
 	struct resource *r;
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 	struct device *device = &ofdev->dev;
 	struct device_node *np = ofdev->node;
 	const unsigned int *prop;
@@ -1111,19 +1111,19 @@ static int talitos_probe(struct platform_device *pdev)
 
 	sc->sc_irq = -1;
 	sc->sc_cid = -1;
-#ifndef CONFIG_PPC_MERGE
+#ifndef CONFIG_PPC
 	sc->sc_dev = pdev;
 #endif
 	sc->sc_num = num_chips++;
 
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 	dev_set_drvdata(device, sc);
 #else
 	platform_set_drvdata(sc->sc_dev, sc);
 #endif
 
 	/* get the irq line */
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 	err = of_address_to_resource(np, 0, &res);
 	if (err)
 		return -EINVAL;
@@ -1157,7 +1157,7 @@ static int talitos_probe(struct platform_device *pdev)
 		 | talitos_read(sc->sc_base_addr + TALITOS_ID_HI);
 	DPRINTF("sec id 0x%llx\n", sc->sc_chiprev);
 
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 	/* get SEC properties from device tree, defaulting to SEC 2.0 */
 
 	prop = of_get_property(np, "num-channels", NULL);
@@ -1259,19 +1259,19 @@ static int talitos_probe(struct platform_device *pdev)
 	return 0;
 
 out:
-#ifndef CONFIG_PPC_MERGE
+#ifndef CONFIG_PPC
 	talitos_remove(pdev);
 #endif
 	return -ENOMEM;
 }
 
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 static int talitos_remove(struct of_device *ofdev)
 #else
 static int talitos_remove(struct platform_device *pdev)
 #endif
 {
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 	struct talitos_softc *sc = dev_get_drvdata(&ofdev->dev);
 #else
 	struct talitos_softc *sc = platform_get_drvdata(pdev);
@@ -1299,7 +1299,7 @@ static int talitos_remove(struct platform_device *pdev)
 	return 0;
 }
 
-#ifdef CONFIG_PPC_MERGE
+#ifdef CONFIG_PPC
 static struct of_device_id talitos_match[] = {
 	{
 		.type = "crypto",
-- 
1.7.0

