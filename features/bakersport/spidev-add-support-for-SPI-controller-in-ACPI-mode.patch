From f79a4e21c8983c9de396bcae2b25839e74a70176 Mon Sep 17 00:00:00 2001
From: fupan li <fupan.li@windriver.com>
Date: Fri, 1 Nov 2013 15:33:04 +0800
Subject: [PATCH 13/14] spidev: add support for SPI controller in ACPI mode

The code changes are specific to Intel Baytrail platform.
This patch is picked from meta-baytrail of YP BSP. It can be accessed from
https://s3-us-west-2.amazonaws.com/isg-downloads/betav2/index.html

Signed-off-by: Chang, Rebecca Swee Fun <rebecca.swee.fun.chang@intel.com>
Signed-off-by: fli <fupan.li@windriver.com>
---
 drivers/spi/spidev.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/drivers/spi/spidev.c b/drivers/spi/spidev.c
index 911e9e0..1cc11c1 100644
--- a/drivers/spi/spidev.c
+++ b/drivers/spi/spidev.c
@@ -33,6 +33,7 @@
 #include <linux/compat.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
+#include <linux/acpi.h>
 
 #include <linux/spi/spi.h>
 #include <linux/spi/spidev.h>
@@ -651,11 +654,20 @@ static const struct of_device_id spidev_dt_ids[] = {
 
 MODULE_DEVICE_TABLE(of, spidev_dt_ids);
 
+static struct acpi_device_id spidev_acpi_match[] = {
+	{ "AUTH2750", 0 },
+	{ "SPI1001", 0 },
+	{},
+};
+
+MODULE_DEVICE_TABLE(acpi, spidev_acpi_match);
+
 static struct spi_driver spidev_spi_driver = {
 	.driver = {
 		.name =		"spidev",
 		.owner =	THIS_MODULE,
 		.of_match_table = of_match_ptr(spidev_dt_ids),
+		.acpi_match_table = ACPI_PTR(spidev_acpi_match),
 	},
 	.probe =	spidev_probe,
 	.remove =	spidev_remove,
-- 
1.8.4.93.g57e4c17

