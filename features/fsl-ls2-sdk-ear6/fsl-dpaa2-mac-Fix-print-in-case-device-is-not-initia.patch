From 6c4a6aca2726a446feeca8cf6db10e9bc26891b5 Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Mon, 12 Oct 2015 18:25:25 +0300
Subject: [PATCH 252/452] fsl-dpaa2: mac: Fix print in case device is not
 initialized

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
[Xulin: Original patch taken from FSL LS2085 SDK EAR6.0,
LS2085A-SDK-SOURCE-20160304-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/staging/fsl-dpaa2/mac/mac.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl-dpaa2/mac/mac.c b/drivers/staging/fsl-dpaa2/mac/mac.c
index a415575..3595df9 100644
--- a/drivers/staging/fsl-dpaa2/mac/mac.c
+++ b/drivers/staging/fsl-dpaa2/mac/mac.c
@@ -372,9 +372,8 @@ static void ppx_link_changed(struct net_device *netdev)
 	 */
 	err = dpmac_set_link_state(priv->mc_dev->mc_io, 0,
 				   priv->mc_dev->mc_handle, &state);
-
 	if (err && err != -EACCES && err != -ENAVAIL)
-		ppx_err(netdev, "dpmac_set_link_state err %d\n", err);
+		dev_err(&priv->mc_dev->dev, "dpmac_set_link_state: %d\n", err);
 }
 
 static int ppx_configure_link(struct ppx_priv *priv, struct dpmac_link_cfg *cfg)
-- 
1.7.5.4

