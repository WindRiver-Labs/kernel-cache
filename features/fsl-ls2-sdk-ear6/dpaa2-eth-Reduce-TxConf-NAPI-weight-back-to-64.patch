From 05bcaa99dbe0cbdf5d3954e4d513d2233786133e Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Sun, 7 Jun 2015 15:49:45 +0300
Subject: [PATCH 165/452] dpaa2-eth: Reduce TxConf NAPI weight back to 64

It turns out that not only the kernel frowned upon the old budget of 256,
but the measured values were well below that anyway.

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Change-Id: I62ddd3ea1dbfd8b51e2bcb2286e0d5eb10ac7f27
Reviewed-on: http://git.am.freescale.net:8181/37688
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Stuart Yoder <stuart.yoder@freescale.com>
[Xulin: Original patch taken from FSL LS2085 SDK EAR6.0,
LS2085A-SDK-SOURCE-20160304-yocto.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/staging/fsl-dpaa2/ethernet/ldpaa_eth.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl-dpaa2/ethernet/ldpaa_eth.h b/drivers/staging/fsl-dpaa2/ethernet/ldpaa_eth.h
index 0bdbfe8..4b2df73 100644
--- a/drivers/staging/fsl-dpaa2/ethernet/ldpaa_eth.h
+++ b/drivers/staging/fsl-dpaa2/ethernet/ldpaa_eth.h
@@ -47,7 +47,7 @@
 #define LDPAA_ETH_STORE_SIZE		16
 /* NAPI weights *must* be a multiple of 16, i.e. the store size. */
 #define LDPAA_ETH_RX_NAPI_WEIGHT	64
-#define LDPAA_ETH_TX_CONF_NAPI_WEIGHT   256
+#define LDPAA_ETH_TX_CONF_NAPI_WEIGHT   64
 
 /* TODO: Sort of arbitrary values for bpools, but we'll need to tune.
  * Supply enough buffers to reassembly several fragmented datagrams. Making it a
-- 
1.7.5.4

