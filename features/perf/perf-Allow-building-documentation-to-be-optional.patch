From fe1181d777a0cafa825a17f4db03348d8c0c0db8 Mon Sep 17 00:00:00 2001
From: Mark Asselstine <mark.asselstine@windriver.com>
Date: Fri, 27 Mar 2015 15:01:32 -0400
Subject: [PATCH] perf: Allow building documentation to be optional

Perf will build documentation simply by determining if asciidoc and
xmlto are available. This does not allow a user to skip building
documenation for whatever reason they might have, valid or not.

Allow the user to use SKIP_DOCS to control the building (or not) of
documentation.

Signed-off-by: Mark Asselstine <mark.asselstine@windriver.com>

diff --git a/tools/perf/Makefile.perf b/tools/perf/Makefile.perf
index 7257e7e9e38a..401915f9b2f2 100644
--- a/tools/perf/Makefile.perf
+++ b/tools/perf/Makefile.perf
@@ -777,10 +777,18 @@ help:
 	@echo '  clean			- clean all binary objects and build output'
 
 
-DOC_TARGETS := doc man html info pdf
+SKIP_DOCS ?= 0
 
-INSTALL_DOC_TARGETS := $(patsubst %,install-%,$(DOC_TARGETS)) try-install-man
-INSTALL_DOC_TARGETS += quick-install-doc quick-install-man quick-install-html
+ifneq ($(strip $(SKIP_DOCS)),0)
+	DOC_TARGETS :=
+	INSTALL_DOC_TARGETS :=
+try-install-man:
+	$(info SKIP_DOCS specified so skipping doc installation)
+else
+	DOC_TARGETS := doc man html info pdf
+	INSTALL_DOC_TARGETS := $(patsubst %,install-%,$(DOC_TARGETS)) try-install-man
+	INSTALL_DOC_TARGETS += quick-install-doc quick-install-man quick-install-html
+endif
 
 # 'make doc' should call 'make -C Documentation all'
 $(DOC_TARGETS):
-- 
2.3.4

