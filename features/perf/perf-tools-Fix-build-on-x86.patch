From 697f53b2914db1debd4bb1c6b156dee7c0c55c7b Mon Sep 17 00:00:00 2001
From: Roy Li <rongqing.li@windriver.com>
Date: Tue, 24 Nov 2015 11:34:30 +0800
Subject: [PATCH 89/89] perf tools: Fix build on x86

always compile the tsc.o, otherwise the libperf will include
tsc.o twice, and lead to below error:

  CC       bitbake_build/tmp/work/qemux86_64-wrs-linux/perf/1.0-r9/perf-1.0/tests/open-syscall-tp-fields.o
	bitbake_build/tmp/work/qemux86_64-wrs-linux/perf/1.0-r9/perf-1.0/util/tsc.o: In function `perf_time_to_tsc':
	bitbake_build/tmp/work-shared/qemux86-64/kernel-source/tools/perf/util/tsc.c:7: multiple definition of `perf_time_to_tsc'

Signed-off-by: Roy Li <rongqing.li@windriver.com>
---
 tools/perf/util/Build | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/tools/perf/util/Build b/tools/perf/util/Build
index a646507..9aadd18 100644
--- a/tools/perf/util/Build
+++ b/tools/perf/util/Build
@@ -71,8 +71,7 @@ libperf-y += stat.o
 libperf-y += record.o
 libperf-y += srcline.o
 libperf-y += data.o
-libperf-$(CONFIG_X86) += tsc.o
-libperf-$(CONFIG_AUXTRACE) += tsc.o
+libperf-y += tsc.o
 libperf-y += cloexec.o
 libperf-y += thread-stack.o
 libperf-$(CONFIG_AUXTRACE) += auxtrace.o
-- 
2.0.2

