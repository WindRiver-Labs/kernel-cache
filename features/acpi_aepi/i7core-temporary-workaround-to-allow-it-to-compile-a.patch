From a072dfc25ad304f7a13d189884a96c00228c1d0f Mon Sep 17 00:00:00 2001
From: Mauro Carvalho Chehab <mchehab@redhat.com>
Date: Sat, 5 Sep 2009 00:47:21 -0300
Subject: [PATCH 046/111] i7core: temporary workaround to allow it to compile against 2.6.30

Upstream ID: a55456f3446d19853af54b64b3840312f46b6ea5

Signed-off-by: Mauro Carvalho Chehab <mchehab@redhat.com>
---
 drivers/edac/i7core_edac.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/edac/i7core_edac.c b/drivers/edac/i7core_edac.c
index 76f4e6d..af222ff 100644
--- a/drivers/edac/i7core_edac.c
+++ b/drivers/edac/i7core_edac.c
@@ -1536,8 +1536,10 @@ static void i7core_mce_output_error(struct mem_ctl_info *mci,
 	u32 syndrome = m->misc >> 32;
 	u32 errnum = find_first_bit(&error, 32);
 	int csrow;
-#ifdef CONFIG_SMP
-	u32 socket_id = cpu_data[m->cpu].phys_proc_id;
+/* FIXME */
+//#ifdef CONFIG_SMP
+#if 0
+	u32 socket_id = per_cpu(cpu_data, cpu).phys_proc_id;
 #else
 	u32 socket_id = 0;
 #endif
-- 
1.7.0.4

