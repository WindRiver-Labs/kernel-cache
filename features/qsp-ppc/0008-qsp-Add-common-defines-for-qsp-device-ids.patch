From 8e9f4d10c1f86b9aae8a71367f839e319284450d Mon Sep 17 00:00:00 2001
From: Ivar Holmqvist <ivarholmqvist@gmail.com>
Date: Mon, 16 Jul 2012 18:32:10 +0200
Subject: [PATCH 08/22] qsp: Add common defines for qsp device ids.

[Original patch is from simics-pkg-12514-4.8.1-linux64.tar]

Signed-off-by: Ruan Zhengwang <zhengwang.ruan@windriver.com>
---
 include/linux/qsp/qsp.h |   49 +++++++++++++++++++++++++++++++++++++++++++++++
 1 files changed, 49 insertions(+), 0 deletions(-)
 create mode 100644 include/linux/qsp/qsp.h

diff --git a/include/linux/qsp/qsp.h b/include/linux/qsp/qsp.h
new file mode 100644
index 0000000..cfcf547
--- /dev/null
+++ b/include/linux/qsp/qsp.h
@@ -0,0 +1,49 @@
+/*
+ *  Copyright 2012 Wind River, Inc
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2, or (at your option)
+ *  any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; see the file COPYING.  If not, write to
+ *  the Free Software Foundation, 675 Mass Ave, Cambridge, MA 02139, USA.
+ */
+
+#ifndef __LINUX_QSP_H
+#define __LINUX_QSP_H
+
+#define QSP_ID_VAL 0x12340000
+
+#define QSP_PIC_ID_VAL     (QSP_ID_VAL | 0x0001)
+#define QSP_SERIAL_ID_VAL  (QSP_ID_VAL | 0x0002)
+#define QSP_BLK_ID_VAL     (QSP_ID_VAL | 0x0003)
+#define QSP_RTC_ID_VAL     (QSP_ID_VAL | 0x0004)
+#define QSP_LED_ID_VAL     (QSP_ID_VAL | 0x0005)
+#define QSP_NET_ID_VAL     (QSP_ID_VAL | 0x0006)
+#define QSP_TIMER_ID_VAL   (QSP_ID_VAL | 0x0007)
+#define QSP_SYSREGS_ID_VAL (QSP_ID_VAL | 0x0008)
+#define QSP_FLASH_ID_VAL   (QSP_ID_VAL | 0x0009)
+#define QSP_PROBE_ID_VAL   (QSP_ID_VAL | 0x9999)
+
+
+static inline int qsp_device_valid(unsigned char __iomem *addr, int device_id)
+{
+	int id = readl(addr);
+	if (id == QSP_PROBE_ID_VAL) {
+		pr_debug("Device id is probe (%x != %x)\n", id, device_id);
+		return -EINVAL;
+	} else if (id != device_id) {
+		pr_warn("Device id is wrong (%x != %x)\n", id, device_id);
+		return -EINVAL;
+	} else
+		return 0;
+}
+
+#endif /* __LINUX_QSP_H */
-- 
1.7.1

