From ebeb3af5454c57af84308fdf85e127e17991b0cc Mon Sep 17 00:00:00 2001
From: Ivar Holmqvist <ivarholmqvist@gmail.com>
Date: Tue, 17 Apr 2012 17:59:52 +0200
Subject: [PATCH 03/22] simicsfs: Fix compile warnings (umode_t - int)

[Original patch is from simics-pkg-12514-4.8.1-linux64.tar]

Signed-off-by: Ruan Zhengwang <zhengwang.ruan@windriver.com>
---
 fs/simicsfs/hostfs_inode.c |   12 ++++++------
 1 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/fs/simicsfs/hostfs_inode.c b/fs/simicsfs/hostfs_inode.c
index 6e97c9c..2d6f935 100644
--- a/fs/simicsfs/hostfs_inode.c
+++ b/fs/simicsfs/hostfs_inode.c
@@ -589,7 +589,7 @@ hostfs_inode_lookup(struct inode *dir, struct dentry *dentry,
 }
 
 static int
-hostfs_inode_mkdir(struct inode *dir, struct dentry *dentry, int mode)
+hostfs_inode_mkdir(struct inode *dir, struct dentry *dentry, umode_t mode)
 {
         struct hf_mkdir_data odata;
         struct hf_hnode_data idata;
@@ -634,12 +634,12 @@ hostfs_inode_rmdir(struct inode *dir, struct dentry *dentry)
 }
 
 static int
-#ifndef KERNEL_2_6
-hostfs_inode_create(struct inode *dir, struct dentry *dentry, int mode)
-#else /* KERNEL_2_6 */
-hostfs_inode_create(struct inode *dir, struct dentry *dentry, int mode,
+#ifndef KERNEL_2_4
+hostfs_inode_create(struct inode *dir, struct dentry *dentry, umode_t mode,
                     struct nameidata *name_data)
-#endif /* KERNEL_2_6 */
+#else
+hostfs_inode_create(struct inode *dir, struct dentry *dentry, int mode)
+#endif
 {
         struct hf_create_data odata;
         struct hf_hnode_data idata;
-- 
1.7.1

