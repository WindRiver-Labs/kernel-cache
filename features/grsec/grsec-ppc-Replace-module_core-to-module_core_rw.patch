From 0dfa3d08d0856d704963d9f6f577f53875da06ea Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Mon, 10 Mar 2014 10:42:25 -0700
Subject: [PATCH] grsec/ppc: Replace module_core to module_core_rw

Since grsec patch series replace module_core to module_core_rx and
module_core_rw, fix the incorrect use to module_core.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 arch/powerpc/kernel/module_32.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/kernel/module_32.c b/arch/powerpc/kernel/module_32.c
index 72095ce..9fcc84e 100644
--- a/arch/powerpc/kernel/module_32.c
+++ b/arch/powerpc/kernel/module_32.c
@@ -305,7 +305,7 @@ int apply_relocate_add(Elf32_Shdr *sechdrs,
 	}
 #ifdef CONFIG_DYNAMIC_FTRACE
 	module->arch.tramp =
-		do_plt_call(module->module_core,
+		do_plt_call(module->module_core_rw,
 			    (unsigned long)ftrace_caller,
 			    sechdrs, module);
 #endif
-- 
1.8.5.2.233.g932f7e4

