From fbc830e3935704dac7a87668a1ca8e586d2da79f Mon Sep 17 00:00:00 2001
From: Yao Zhao <yao.zhao@windriver.com>
Date: Tue, 11 Dec 2012 17:06:43 -0500
Subject: [PATCH] grsec/ppc: remove support PAX_KERNEXEC in security/Kconfig

Discussion from upstream support forum:
http://forums.grsecurity.net/viewtopic.php?f=3&t=3170

According to Kconfig, x86 should be the only arch it supports currently.

Signed-off-by: Yao Zhao <yao.zhao@windriver.com>
---
 security/Kconfig |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/security/Kconfig b/security/Kconfig
index 1e5c4d6..21ec30b 100644
--- a/security/Kconfig
+++ b/security/Kconfig
@@ -565,7 +565,7 @@ config PAX_DLRESOLVE
 config PAX_KERNEXEC
 	bool "Enforce non-executable kernel pages"
 	default y if GRKERNSEC_CONFIG_AUTO && (GRKERNSEC_CONFIG_VIRT_NONE || (GRKERNSEC_CONFIG_VIRT_EPT && GRKERNSEC_CONFIG_VIRT_GUEST) || (GRKERNSEC_CONFIG_VIRT_EPT && GRKERNSEC_CONFIG_VIRT_KVM))
-	depends on (PPC || X86) && (!X86_32 || X86_WP_WORKS_OK) && !XEN
+	depends on X86 && (!X86_32 || X86_WP_WORKS_OK) && !XEN
 	select PAX_PER_CPU_PGD if X86_64 || (X86_32 && X86_PAE)
 	select PAX_KERNEXEC_PLUGIN if X86_64
 	help
-- 
1.7.9.7

