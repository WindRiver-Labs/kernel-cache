From 63410108fc4633af81eb8fe72fddadda8e57b6f2 Mon Sep 17 00:00:00 2001
From: Hong H. Pham <hong.pham@windriver.com>
Date: Fri, 7 Nov 2008 11:57:36 -0500
Subject: [PATCH] Disable Grsecurity and PAX for SPARC

Grsecurity and PAX is not supported for SPARC and SPARC64.

Signed-off-by: Hong H. Pham <hong.pham@windriver.com>
---
 grsecurity/Kconfig |    2 ++
 security/Kconfig   |    2 +-
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/grsecurity/Kconfig b/grsecurity/Kconfig
index a0005d9..47efc47 100644
--- a/grsecurity/Kconfig
+++ b/grsecurity/Kconfig
@@ -1,16 +1,18 @@
 #
 # grecurity configuration
 #
 
 menu "Grsecurity"
 
 config GRKERNSEC
 	bool "Grsecurity"
+	depends on !SPARC
+	depends on !SPARC64
 	select CRYPTO
 	select CRYPTO_SHA256
 	select SECURITY
 	select SECURITY_CAPABILITIES
 	help
 	  If you say Y here, you will be able to configure many features
 	  that will enhance the security of your system.  It is highly
 	  recommended that you say Y here and read through the help
diff --git a/security/Kconfig b/security/Kconfig
index 13e1952..0ba05cb 100644
--- a/security/Kconfig
+++ b/security/Kconfig
@@ -5,17 +5,17 @@
 menu "Security options"
 
 source grsecurity/Kconfig
 
 menu "PaX"
 
 config PAX
 	bool "Enable various PaX features"
-	depends on ALPHA || ARM || AVR32 || IA64 || MIPS32 || MIPS64 || PARISC || PPC32 || PPC64 || SPARC32 || SPARC64 || X86
+	depends on ALPHA || ARM || AVR32 || IA64 || MIPS32 || MIPS64 || PARISC || PPC32 || PPC64 || X86
 	help
 	  This allows you to enable various PaX features.  PaX adds
 	  intrusion prevention mechanisms to the kernel that reduce
 	  the risks posed by exploitable memory corruption bugs.
 
 menu "PaX Control"
 	depends on PAX
 
-- 
1.5.5.1

