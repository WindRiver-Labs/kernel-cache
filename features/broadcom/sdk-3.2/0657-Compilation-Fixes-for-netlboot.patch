From 196f8f2d26488c8d829dfafbff89fc1bb76236a1 Mon Sep 17 00:00:00 2001
From: Nebu Philips <nphilips@netlogicmicro.com>
Date: Tue, 2 Nov 2010 18:51:45 -0700
Subject: [PATCH 0657/1532] Compilation Fixes for netlboot

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 libfdt/contrib/fdt_helper.c | 4 +++-
 libfdt/contrib/fdt_helper.h | 2 +-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/libfdt/contrib/fdt_helper.c b/libfdt/contrib/fdt_helper.c
index 0f24d59..85f2656 100644
--- a/libfdt/contrib/fdt_helper.c
+++ b/libfdt/contrib/fdt_helper.c
@@ -30,8 +30,10 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
+#if !defined(NLM_HAL_NETLBOOT)
 #include <sys/mman.h>
 #endif
+#endif
 
 #include "libfdt.h"
 #include "fdt_helper.h"
@@ -57,7 +59,7 @@ int set_fdt_helper_print(int val)
 	return old_val;
 }
 
-#if !defined(__KERNEL__) && !defined(NLM_HAL_NETOS)
+#if !defined(__KERNEL__) && !defined(NLM_HAL_NETOS) && !defined(NLM_HAL_NETLBOOT)
 void *open_fdt(int fd)
 {
 	struct stat st;
diff --git a/libfdt/contrib/fdt_helper.h b/libfdt/contrib/fdt_helper.h
index fb3a556..f465c14 100644
--- a/libfdt/contrib/fdt_helper.h
+++ b/libfdt/contrib/fdt_helper.h
@@ -22,7 +22,7 @@
  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
  THE POSSIBILITY OF SUCH DAMAGE.
 *******************************#NETL_2#**********************************/
-#if !defined(__KERNEL__)
+#if !defined(__KERNEL__) && !defined(NLM_HAL_NETLBOOT)
 #include <stdint.h>
 #endif
 
-- 
1.9.1

