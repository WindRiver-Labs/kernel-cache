From 376dfe28213958dd8c8cece58f1d29482b52f950 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Fri, 10 Sep 2010 21:31:48 -0700
Subject: [PATCH 0188/1532] New directory structure to consolidate dts files

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/linux.dts    |  69 +++++++++
 arch/mips/boot/dts/multi-os.dts | 143 ++++++++++++++++++
 arch/mips/boot/dts/netos.dts    |  65 ++++++++
 arch/mips/boot/dts/tiny.dts     | 153 +++++++++++++++++++
 arch/mips/boot/dts/xlp.dts      |  40 +++++
 arch/mips/boot/dts/xlr.dts      | 320 ++++++++++++++++++++++++++++++++++++++++
 6 files changed, 790 insertions(+)
 create mode 100644 arch/mips/boot/dts/linux.dts
 create mode 100644 arch/mips/boot/dts/multi-os.dts
 create mode 100644 arch/mips/boot/dts/netos.dts
 create mode 100644 arch/mips/boot/dts/tiny.dts
 create mode 100644 arch/mips/boot/dts/xlp.dts
 create mode 100644 arch/mips/boot/dts/xlr.dts

diff --git a/arch/mips/boot/dts/linux.dts b/arch/mips/boot/dts/linux.dts
new file mode 100644
index 0000000..0a360fb
--- /dev/null
+++ b/arch/mips/boot/dts/linux.dts
@@ -0,0 +1,69 @@
+/* XLP8XX Device Tree Source
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLP8XX";
+	compatible = "NETL,XLP8XX_A0";
+
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	hypervisor {
+		hypervisor-name = "Xen";
+		cpu_possible_map = <0xff>;
+		is_dom0_hvm = <1>;
+		bootargs = "ncores=2 dom0_loadaddr=0xe0800000 dom0_size=0x1c000000 dom0_cpumask=0x0f -- ";
+		domain_heap = <0x80000000 0x20000000>;
+	};
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			cpu {
+				onlinemask = <0x0f>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+				owner = <1>;
+				sharedcfg = <0x1f000000>;
+			};
+			memory {
+				reg = <0x04000000 0x0C000000	// 192M at 64M
+					0x20000000 0x10000000>;  // 256M at 512M
+			};
+			pic {
+			};
+		};
+	};
+
+	chosen {
+		bootargs = " xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+	};
+
+	/* These binaries are downloaded at the resp physical memory locations
+	 * by their corresponding bootstrapping loaders. For example,
+	 * u-boot is loaded by x-load at 193M, sysconfig is loaded by u-boot
+	 * at 1M, hypervisor by u-boot hypervisor at 136M.
+	 * On simulator all these binaries are pre-loaded by using '-F' option
+	 * for convenience. On silicon, they will be loaded by their corresponding
+	 * temporary download locations the stage-1/stage-2 firmware
+	 */
+	firmware-download {
+		u-boot        = <0x0c100000 0x3f00000>;  /* 63M @ 193M */
+		sysconfig     = <0x00100000 0x00100000>; /* 1M @ 1M */
+		hypervisor    = <0x08800000 0x00800000>; /* 8M @ 136M */
+		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
+		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
+	};
+};
+
diff --git a/arch/mips/boot/dts/multi-os.dts b/arch/mips/boot/dts/multi-os.dts
new file mode 100644
index 0000000..835243a
--- /dev/null
+++ b/arch/mips/boot/dts/multi-os.dts
@@ -0,0 +1,143 @@
+/* XLP8XX Device Tree Source
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLP8XX";
+	compatible = "NETL,XLP8XX_A0";
+
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	hypervisor {
+		hypervisor-name = "Xen";
+		cpu_possible_map = <0xff>;
+		is_dom0_hvm = <1>;
+		bootargs = "ncores=2 dom0_loadaddr=0xe0800000 dom0_size=0x1c000000 dom0_cpumask=0x0f -- ";
+		domain_heap = <0x80000000 0x20000000>;
+	};
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			os = "linux";
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			cpu {
+				onlinemask = <0x0f>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+				owner = <1>;
+				sharedcfg = <0x1f000000>;
+			};
+			memory {
+				reg = <0x04000000 0x0C000000	// 192M at 64M
+					0x20000000 0x10000000>;  // 256M at 512M
+			};
+			pic {
+			};
+		};
+		dom@1 {
+			device_type = "domain";
+			os = "netos";
+
+			heap-size = <0x0 0x2000000>;                   // 32M
+			shared-mem = <0x0 0x40000000 0x0 0x08000000>;  // 128M @ 1GB
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			app-bootcmd = "ampload";
+			app-loadaddr = "0x60000000";
+
+			kernel {
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+				/* Location in Dom0 ramdisk */
+				location = "/tmp/xen/netos.elf";
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <1>;
+			};
+
+			cpu {
+				onlinemask = <0x30>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+				sharedcfg = <0x1f000000>;
+			};
+			memory {
+				reg = <0x30000000 0x08000000>;  // 128M @ 768M
+			};
+		};
+		dom@2 {
+			device_type = "domain";
+			os = "netos";
+
+			heap-size = <0x0 0x2000000>;                   // 32M
+			shared-mem = <0x0 0x48000000 0x0 0x08000000>;  // 128M @ 1.128GB
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			app-bootcmd = "smpload";
+			app-loadaddr = "0x60000000";
+
+			kernel {
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+				/* Location in Dom0 ramdisk */
+				location = "/tmp/xen/netos.elf";
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <0>;
+			};
+
+			cpu {
+				onlinemask = <0xC0>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+				sharedcfg = <0x1f000000>;
+			};
+			memory {
+				reg = <0x38000000 0x08000000>;  // 128M @ 896M
+			};
+		};
+	};
+
+	chosen {
+		bootargs = " xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+	};
+
+	/* These binaries are downloaded at the resp physical memory locations
+	 * by their corresponding bootstrapping loaders. For example,
+	 * u-boot is loaded by x-load at 193M, sysconfig is loaded by u-boot
+	 * at 1M, hypervisor by u-boot hypervisor at 136M.
+	 * On simulator all these binaries are pre-loaded by using '-F' option
+	 * for convenience. On silicon, they will be loaded by their corresponding
+	 * temporary download locations the stage-1/stage-2 firmware
+	 */
+	firmware-download {
+		u-boot        = <0x0c100000 0x3f00000>;  /* 63M @ 193M */
+		sysconfig     = <0x00100000 0x00100000>; /* 1M @ 1M */
+		hypervisor    = <0x08800000 0x00800000>; /* 8M @ 136M */
+		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
+		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
+	};
+};
+
diff --git a/arch/mips/boot/dts/netos.dts b/arch/mips/boot/dts/netos.dts
new file mode 100644
index 0000000..830efe7
--- /dev/null
+++ b/arch/mips/boot/dts/netos.dts
@@ -0,0 +1,65 @@
+/* XLP8XX Device Tree Source 
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLP8XX";
+	compatible = "NETL,XLP8XX_A0";
+
+	#address-cells = <1>;
+	#size-cells = <1>;
+
+	hypervisor {
+		hypervisor-name = "Xen";
+		cpu_possible_map = <0xff>;
+		is_dom0_hvm = <0>;
+		bootargs = "dom0_loadaddr=0xe0800000 dom0_cpumask=0x01 -- ";
+		domain_heap = <0x80000000 0x20000000>;
+	};
+
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			os = "netos";
+
+			heap-size = <0x0 0x4000000>; // 64M
+			shared-mem = <0x0 0x40000000 0x0 0x08000000>; // 128M @ 1GB
+
+			#address-cells = <1>;
+			#size-cells = <1>;
+
+			app-bootcmd = "smpload";
+			app-loadaddr = "0x60000000";
+
+			kernel {
+				/* Kernel Memory allocated from xen domain-heap */
+				size = <0x02000000>;  // 32M
+
+				/* Location in Dom0 ramdisk */
+				location = "/tmp/xen/netos.elf";
+
+				/* Domain destroy currently doesn't work with hyperexec */
+				dom_destroy_hack = <0>;
+			};
+
+			cpu {
+				onlinemask = <0xf>;
+                                nae-rx-vc = <0>;
+                                nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+			};
+			memory {
+				reg = <0x30000000 0x20000000>;  // 128M @ 768M
+			};
+		};
+	};
+
+	chosen {
+		bootargs = " xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+	};
+};
diff --git a/arch/mips/boot/dts/tiny.dts b/arch/mips/boot/dts/tiny.dts
new file mode 100644
index 0000000..390541b
--- /dev/null
+++ b/arch/mips/boot/dts/tiny.dts
@@ -0,0 +1,153 @@
+/* XLP8XX Device Tree Source 
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLP8XX";
+	compatible = "NETL,XLP8XX_A0";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			heap-size = <0x0 0x4000000>;
+			shared-mem = <0x0 0x80000000 0x0 0x20000000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			cpu {
+				onlinemask = <0xf>;
+				nae-rx-vc = <0>;
+				nae-fb-vc = <3>;
+			};
+			uart {
+				id = <0>;
+			};
+			memory {
+				reg = <0x00100000 0x0FF00000	// 255M at 1M
+					   0x20000000 0x20000000>;  // 512M at 512M
+			};
+			pic {
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+		nae-cfg {
+			num-ports = <4>;
+			start-port-id = <0>;
+			num-port-regs = <5>;
+			ucore {
+				src@1 {
+					num-opcodes = <52>;
+					mask = <0xffff>;
+					opcodes = <
+						0x3c1c0010 
+						0x279cf808 
+						0x3c020010 
+						0x2442f808 
+						0x3c030010 
+						0x2463f808 
+						0xac400000 
+						0x0043082b 
+						0x1420fffd 
+						0x24420004 
+						0x3c1d0010 
+						0x27bdf9c0 
+						0x27a50020 
+						0x27a60028 
+						0xaca00000 
+						0xacc00000 
+						0x0c000029 
+						0x00002021 
+						0x1000ffff 
+						0x00000000 
+						0x3c020000 
+						0x8c420104 
+						0x27bdffe0 
+						0x2403ffff 
+						0xafbf001c 
+						0xafb10018 
+						0x10430009 
+						0xafb00014 
+						0x3c100000 
+						0x26100104 
+						0x2411ffff 
+						0x0040f809 
+						0x2610fffc 
+						0x8e020000 
+						0x1451fffc 
+						0x00000000 
+						0x8fbf001c 
+						0x8fb10018 
+						0x8fb00014 
+						0x03e00008 
+						0x27bd0020 
+						0x00001821 
+						0x34088004 
+						0x8d060000 
+						0x30c5000f 
+						0x00052280 
+						0x34820001 
+						0x34088030 
+						0xad020000 
+						0x34088000 
+						0x0800002a 
+						0xad030000 
+					>;
+				};
+			};
+
+			port0 {
+				num-free-desc = <10>;
+				cfg-regs = <
+					0x35 0xd
+					0x1f 0x35
+					0x12 0x28
+					0x21 0x14
+					0x28 0x400
+				>;
+			};
+			port1 {
+				num-free-desc = <10>;
+				cfg-regs = <
+					0x35 0xd
+					0x1f 0x35
+					0x12 0x8
+					0x21 0x14
+					0x28 0x401
+				>;
+			};
+			port2 {
+				num-free-desc = <10>;
+				cfg-regs = <
+					0x35 0xd
+					0x1f 0x1f
+					0x12 0x8
+					0x21 0x14
+					0x28 0x402
+				>;
+			};
+			port3 {
+				num-free-desc = <10>;
+				cfg-regs = <
+					0x35 0xd
+					0x1f 0x12
+					0x12 0x8
+					0x21 0x14
+					0x28 0x403
+				>;
+			};
+		};
+		fmn{
+			spill-base-hi   = <0x00000000>;
+			spill-base-low  = <0xE0000000>;
+			spill-size  	= <0x1000000>;
+			tx-vc       	= <524>;
+			credit      	= <50>;
+		};
+	};
+};
diff --git a/arch/mips/boot/dts/xlp.dts b/arch/mips/boot/dts/xlp.dts
new file mode 100644
index 0000000..9606782
--- /dev/null
+++ b/arch/mips/boot/dts/xlp.dts
@@ -0,0 +1,40 @@
+/* XLP8XX Device Tree Source 
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLP8XX";
+	compatible = "NETL,XLP8XX_A0";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			heap-size = <0x0 0x4000000>;
+			shared-mem = <0x0 0x80000000 0x0 0x20000000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			cpu {
+				onlinemask = <0xf>;
+				nae-rx-vc = <0>;
+				nae-fb-vc = <1>;
+			};
+			uart {
+				id = <0>;
+			};
+			memory {
+				reg = <0x00100000 0x0FF00000	// 255M at 1M
+					   0x20000000 0x20000000>;  // 512M at 512M
+			};
+			pic {
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
+	};
+};
diff --git a/arch/mips/boot/dts/xlr.dts b/arch/mips/boot/dts/xlr.dts
new file mode 100644
index 0000000..5ae6a86
--- /dev/null
+++ b/arch/mips/boot/dts/xlr.dts
@@ -0,0 +1,320 @@
+/* XLR,XLS Device Tree Source
+ *
+ */
+
+/dts-v1/;
+/ {
+	model = "MIPS,XLR(S)";
+	compatible = "NETL,XLR";
+	#address-cells = <1>;
+	#size-cells = <1>;
+	doms {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		dom@0 {
+			device_type = "domain";
+			heap-size = <0x0 0x4000000>;
+			shared-mem = <0x0 0x80000000 0x0 0x20000000>;
+			#address-cells = <1>;
+			#size-cells = <1>;
+			cpu {
+				onlinemask = <0xffffffff>;
+			};
+			uart {
+				id = <0>;
+			};
+			memory {
+				reg = <0x00100000 0x0FF00000	// 255M at 1M
+					   0x20000000 0x20000000>;  // 512M at 512M
+			};
+			pic {
+			};
+		};
+		dom@1 {
+			device_type = "domain";
+			cpu {
+				onlinemask = <0xffff0000>;
+			};
+			uart {
+				id = <1>;
+			};
+			memory {
+			};
+		};
+		dom@2 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@3 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@4 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@5 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@6 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@7 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@8 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@9 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@10 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@11 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@12 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@13 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@14 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@15 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@16 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@17 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@18 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@19 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@20 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@21 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@23 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@24 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@25 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@26 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@27 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@28 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@29 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@30 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+		dom@31 {
+			device_type = "domain";
+			cpu {
+			};
+			uart {
+			};
+			memory {
+			};
+		};
+	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		bootenv = "board=arizona";
+	};
+
+	system {
+		iobase = <0xbef00000>;
+		boardmajor = <2>;
+		boardminor = <1>;
+		macaddress = [ 00 0f 30 00 09 6a ];
+		cpufrequency = <1190000000>;
+		globalshmem = <0x800ff000>;
+	};
+};
-- 
1.9.1

