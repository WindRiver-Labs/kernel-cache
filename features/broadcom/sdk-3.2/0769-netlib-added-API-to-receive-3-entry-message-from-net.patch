From dc3fe442c721154e186def46e9faade5542876d1 Mon Sep 17 00:00:00 2001
From: Jayanthi A <jayanthi.annadurai@broadcom.com>
Date: Fri, 26 Jul 2013 10:08:22 -0700
Subject: [PATCH 0769/1532] netlib: added API to receive 3 entry message from
 netsoc

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 .../netlogic/lib/netlib/include/netsoc_msgiface.h  | 31 ++++++++++++++++++++++
 1 file changed, 31 insertions(+)

diff --git a/arch/mips/netlogic/lib/netlib/include/netsoc_msgiface.h b/arch/mips/netlogic/lib/netlib/include/netsoc_msgiface.h
index fc0818e..0aaa4f1f 100644
--- a/arch/mips/netlogic/lib/netlib/include/netsoc_msgiface.h
+++ b/arch/mips/netlogic/lib/netlib/include/netsoc_msgiface.h
@@ -117,6 +117,37 @@ static __inline__ int netsoc_fmn_recv_3(uint32_t rxvc, uint32_t *node, uint32_t
         return size;
 }
 
+static __inline__ int netsoc_fmn_recv_3(uint32_t rxvc, uint32_t *node, uint32_t *nae_id, uint64_t *msg0, uint64_t *msg1, uint64_t *msg2)
+{
+        uint32_t src_id, size, code;
+        int rx_status = 0;
+
+
+        if(xlp_message_receive_3(rxvc,
+                              &src_id,
+                              &size,
+                              &code,
+                              msg0,
+                              msg1,
+			      msg2
+                              )) {
+
+                rx_status = xlp_read_rx_status();
+
+                if ((rx_status >> 28) & (1 << rxvc)) {
+                }
+                return 0;
+
+        }
+#ifdef NETSOC_MSG_DEBUG 
+        printf("src_id %d size %d code %d msg0 0x%llx msg1 0x%llx msg2 0x%llx\n",
+                         src_id, size, code, msg0, msg1, msg2);
+#endif  
+        *node = GET_NODE(src_id);
+        *nae_id = GET_BLOCK_ID(src_id);
+        return size;
+}
+
 /*
         To send a freein buffer to NAE free in descriptor queue
         destvc: FMN NAE-RX VC number
-- 
1.9.1

