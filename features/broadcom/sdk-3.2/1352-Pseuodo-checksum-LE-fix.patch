From 54aa30975c8bc6908f69e4f79877a1406cb97fff Mon Sep 17 00:00:00 2001
From: Hareesh R <hareeshr@broadcom.com>
Date: Tue, 17 Apr 2012 18:57:39 +0530
Subject: [PATCH 1352/1532] Pseuodo checksum LE fix

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/broadcom/nae/xlp_nae.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/broadcom/nae/xlp_nae.c b/drivers/net/ethernet/broadcom/nae/xlp_nae.c
index 3bdd414..1f589b4 100755
--- a/drivers/net/ethernet/broadcom/nae/xlp_nae.c
+++ b/drivers/net/ethernet/broadcom/nae/xlp_nae.c
@@ -347,10 +347,10 @@ static inline void create_last_p2p_desc(uint64_t *p2pmsg, struct sk_buff *skb, i
 uint16_t pseuodo_chksum(uint16_t *ipsrc, uint16_t proto)
 {
 	uint32_t sum = 0;
-	sum += ipsrc[0];
-	sum += ipsrc[1];
-	sum += ipsrc[2];
-	sum += ipsrc[3];
+	sum += cpu_to_be16(ipsrc[0]);
+	sum += cpu_to_be16(ipsrc[1]);
+	sum += cpu_to_be16(ipsrc[2]);
+	sum += cpu_to_be16(ipsrc[3]);
 	sum += proto;
 	while(sum >> 16)
 		sum = (sum & 0xffff)  + (sum >> 16);
-- 
1.9.1

