From a41dcfa445f0c853df0b06b8834d0bdd15774c58 Mon Sep 17 00:00:00 2001
From: Siva Pochiraju <sivap@netlogicmicro.com>
Date: Mon, 6 Dec 2010 15:16:56 -0800
Subject: [PATCH 0215/1532] Moved NAE regs IFACE_FIFO, RX_BASE_CONFIG,
 RX_BUF_CONFIG to gloabal regs

1. Moved per port regs to global regs
2. Chnaged per port values in nae.dts and changed Complex0 to xaui
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/nae.dts | 47 +++++++++++++++++++++-------------------------
 1 file changed, 21 insertions(+), 26 deletions(-)

diff --git a/arch/mips/boot/dts/nae.dts b/arch/mips/boot/dts/nae.dts
index f6bb412..5261a8d 100644
--- a/arch/mips/boot/dts/nae.dts
+++ b/arch/mips/boot/dts/nae.dts
@@ -55,53 +55,48 @@
 
 	complex@0 {
 		device_type = "nae-complex";
-		mode = "sgmii";
-
-		loopback_mode = <1 1 1 0>;
+		mode = "xaui";
+		loopback_mode = <0>;
 
 		// Max ingress fifo size 256 units (size of one unit is 64 byte)
-		iface_fifo_sizes = <13 13 13 13>;
+		iface_fifo_sizes = <110>;
 
 		// Max parser sequence fifo size 1024 packets 
 		// (if 1588 Timestamp is not required, then max size increases to 2048)
-		num_channels = <8 8 8 8>;
-		parser_sequence_fifo_sizes = <53 53 53 53>;
+		num_channels = <1>;
+		parser_sequence_fifo_sizes = <400>;
 
 		// Since rx_buffer is per context, we can have a few different ways
 		//  to populate the operand
-		rx_buffer_sizes = <20 20 20 20 20 20 20 20
-				   20 20 20 20 20 20 20 20
-				   20 20 20 20 20 20 20 20
-				   20 20 20 20 20 20 20 20>;
+		rx_buffer_sizes = <1888>;
 
-		// Max available descriptors are 1024 (across all complexes).
-		// Per port num_free_descriptors has to be even number
-		num_free_descs = <64 64 64 64>;
-		free_desc_sizes = <1536 1536 1536 1536>;
-		ucore_mask = <0xffff 0xffff 0xffff 0xffff>;
+		// Max available descriptors are 1024  (across all complexes).
+		// Per port num_free_descriptors must be even number
+		num_free_descs = <512>;
+		free_desc_sizes = <2048>;
+		ucore_mask = <0xffff>;
 	};
-
 	complex@2 {
 		device_type = "nae-complex";
 		mode = "xaui";
 		loopback_mode = <0>;
 
 		// Max ingress fifo size 256 units (size of one unit is 64 byte)
-		iface_fifo_sizes = <52>;
+		iface_fifo_sizes = <110>;
 
 		// Max parser sequence fifo size 1024 packets 
 		// (if 1588 Timestamp is not required, then max size increases to 2048)
-		num_channels = <8>;
-		parser_sequence_fifo_sizes = <53>;
+		num_channels = <1>;
+		parser_sequence_fifo_sizes = <400>;
 
 		// Since rx_buffer is per context, we can have a few different ways
 		//  to populate the operand
-		rx_buffer_sizes = <20 20 20 20 20 20 20 20>;
+		rx_buffer_sizes = <1888>;
 
 		// Max available descriptors are 1024  (across all complexes).
 		// Per port num_free_descriptors must be even number
-		num_free_descs = <512>;
-		free_desc_sizes = <1536>;
+		num_free_descs = <256>;
+		free_desc_sizes = <2048>;
 		ucore_mask = <0xffff>;
 	};
 	complex@4 {
@@ -115,18 +110,18 @@
 
 		// Max parser sequence fifo size 1024 packets 
 		// (if 1588 Timestamp is not required, then max size increases to 2048)
-		num_channels = <8 8>;
+		num_channels = <1 1>;
 		parser_sequence_fifo_sizes = <53 53>;
 
 		// Since rx_buffer is per context, we can have a few different ways
 		//  to populate the operand
-		rx_buffer_sizes = <20 20 20 20 20 20 20 20
-				   20 20 20 20 20 20 20 20>;
+		rx_buffer_sizes = <160 160>;
+				   
 
 		// Max available descriptors are 1024 (across all complexes).
 		// Per port num_free_descriptors must be even number
 		num_free_descs = <128 128>;
-		free_desc_sizes = <1536 1536>;
+		free_desc_sizes = <2048 2048>;
 		ucore_mask = <0xffff 0xffff>;
 	};
 };
-- 
1.9.1

