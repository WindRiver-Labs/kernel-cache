From 671ecbdb1d260e2a738330510e51c640b9de9331 Mon Sep 17 00:00:00 2001
From: reshmic <reshmic@broadcom.com>
Date: Wed, 2 May 2012 18:39:54 +0530
Subject: [PATCH 0306/1532] linux_dts_files: changed ipsec async vc to be
 different from nae_rx_vc

Fixed Hang on sae when packets are pumped at high rate
Have a seperate vc for nae and sae to get a high performance
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/mnxlp8xx-linux.dts | 12 ++++++------
 arch/mips/boot/dts/xlp3xx-linux.dts   | 12 ++++++------
 arch/mips/boot/dts/xlp4xx-linux.dts   | 12 ++++++------
 arch/mips/boot/dts/xlp8xx-linux.dts   | 12 ++++++------
 4 files changed, 24 insertions(+), 24 deletions(-)

diff --git a/arch/mips/boot/dts/mnxlp8xx-linux.dts b/arch/mips/boot/dts/mnxlp8xx-linux.dts
index 242d4d8..8bae0a6 100644
--- a/arch/mips/boot/dts/mnxlp8xx-linux.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-linux.dts
@@ -32,10 +32,10 @@
 				onlinemask = <0xffffffff 0xffffffff>;
                                 nae-rx-vc = <0>;
                                 nae-fb-vc = <1>;
-                                napi-vc-mask = <0x3>;
+                                napi-vc-mask = <0xb>;
 				sae-rx-vc = <0>; /* sharing with nae */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
-				ipsec-async-vc  = <0>;
+				ipsec-async-vc  = <3>;
 				ipsec-sync-vc   = <2>;
 			};
 			uart {
@@ -49,10 +49,10 @@
 					0x20000000 0xa0000000>; // 2586M at 512M
 			};
                         fmn {
-                                node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;                       
+                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;                       
 			};
 			pic {
 			};
diff --git a/arch/mips/boot/dts/xlp3xx-linux.dts b/arch/mips/boot/dts/xlp3xx-linux.dts
index bcb1838..6c4dfa9 100644
--- a/arch/mips/boot/dts/xlp3xx-linux.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux.dts
@@ -30,10 +30,10 @@
 				onlinemask = <0xffff>;
                                 nae-rx-vc = <0>;
                                 nae-fb-vc = <1>;
-				napi-vc-mask = <0x3>;
+				napi-vc-mask = <0xb>;
 				sae-rx-vc = <0>; /*  */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
-				ipsec-async-vc  = <0>;
+				ipsec-async-vc  = <3>;
                                 ipsec-sync-vc   = <2>;
 
 			};
@@ -47,10 +47,10 @@
 					0x20000000 0xa0000000>;  // 2586M at 512M
 			};
                         fmn {
-                                node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
+                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
 			pic {
 			};
diff --git a/arch/mips/boot/dts/xlp4xx-linux.dts b/arch/mips/boot/dts/xlp4xx-linux.dts
index c67bb2a..fd5ec96 100644
--- a/arch/mips/boot/dts/xlp4xx-linux.dts
+++ b/arch/mips/boot/dts/xlp4xx-linux.dts
@@ -30,10 +30,10 @@
 				onlinemask = <0xffff>;
                                 nae-rx-vc = <0>;
                                 nae-fb-vc = <1>;
-				napi-vc-mask = <0x3>;
+				napi-vc-mask = <0xb>;
 				sae-rx-vc = <0>; /* sharing with nae */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
-				ipsec-async-vc  = <0>;
+				ipsec-async-vc  = <3>;
 				ipsec-sync-vc   = <2>;
 
 			};
@@ -47,10 +47,10 @@
 					0x20000000 0x60000000>;  // 1536M at 512M
 			};
                         fmn {
-                                node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
+                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
 			pic {
 			};
diff --git a/arch/mips/boot/dts/xlp8xx-linux.dts b/arch/mips/boot/dts/xlp8xx-linux.dts
index cc4bb4c..b6fb469 100644
--- a/arch/mips/boot/dts/xlp8xx-linux.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux.dts
@@ -30,10 +30,10 @@
 				onlinemask = <0xffffffff>;
                                 nae-rx-vc = <0>;
                                 nae-fb-vc = <1>;
-				napi-vc-mask = <0x3>;
+				napi-vc-mask = <0xb>;
 				sae-rx-vc = <0>; /* sharing with nae */
 				sae-rx-sync-vc  = <3>; /* should be exclusive */
-				ipsec-async-vc  = <0>;
+				ipsec-async-vc  = <3>;
 				ipsec-sync-vc   = <2>;
 
 			};
@@ -47,10 +47,10 @@
 					0x20000000 0xa0000000>;  // 2586M at 512M
 			};
                         fmn {
-                                node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_1_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_2_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
-                                node_3_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
+                                node_0_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_1_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_2_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
+                                node_3_vc_mask = <0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb 0xbbbbbbbb>;
                         };
 			pic {
 			};
-- 
1.9.1

