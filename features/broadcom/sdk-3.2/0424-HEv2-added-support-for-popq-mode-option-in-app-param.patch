From 9d9d89a2ed6d11dda4a6d236245710ff350838f8 Mon Sep 17 00:00:00 2001
From: Virendra Pathak <vpathak@broadcom.com>
Date: Tue, 15 Oct 2013 16:43:06 +0530
Subject: [PATCH 0424/1532] HEv2: added support for popq mode option in
 app-param - Also added support in nae/ucore for popq mode

  sysconfig changes to run HEv2 brcm nae app in popq mode (e.g xlp9xx):-
     1. set enable-popq-mode = 1 in dts/xlp9xx-helinux.dts
     2. modify ucore to send pkts to popq in nae/ucore/default-ver1.c
  	  i.e uncomment
	  /* packet_dist((NET_VER1_VAL_DEST(XLP_9XX_POPQ_VC_BASE)) | VAL_PDM(FWD_DEST_ONLY)); */
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp2xx-helinux.dts | 1 +
 arch/mips/boot/dts/xlp3xx-helinux.dts | 1 +
 arch/mips/boot/dts/xlp4xx-helinux.dts | 1 +
 arch/mips/boot/dts/xlp8xx-helinux.dts | 1 +
 arch/mips/boot/dts/xlp9xx-helinux.dts | 1 +
 5 files changed, 5 insertions(+)

diff --git a/arch/mips/boot/dts/xlp2xx-helinux.dts b/arch/mips/boot/dts/xlp2xx-helinux.dts
index 45abcb8..5ce0e20 100644
--- a/arch/mips/boot/dts/xlp2xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp2xx-helinux.dts
@@ -114,6 +114,7 @@
 				enable-nae-p2p = <0>;
 				enable-poe = <0>;
 				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
 				launch-mode = "smp";	/* smp or amp */
 			};
 			nae{
diff --git a/arch/mips/boot/dts/xlp3xx-helinux.dts b/arch/mips/boot/dts/xlp3xx-helinux.dts
index f18742f..8ca2e18 100644
--- a/arch/mips/boot/dts/xlp3xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp3xx-helinux.dts
@@ -117,6 +117,7 @@
 				enable-nae-p2p = <0>;
 				enable-poe = <0>;
 				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
 				launch-mode = "smp";	/* smp or amp */
 			};
 			nae{
diff --git a/arch/mips/boot/dts/xlp4xx-helinux.dts b/arch/mips/boot/dts/xlp4xx-helinux.dts
index b3affd1..ce9e204 100644
--- a/arch/mips/boot/dts/xlp4xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp4xx-helinux.dts
@@ -107,6 +107,7 @@
 				enable-nae-jumbo = <0>;
 				enable-nae-p2p = <0>;
 				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
 				launch-mode = "smp";	/* smp or amp */
 			};
 			nae{
diff --git a/arch/mips/boot/dts/xlp8xx-helinux.dts b/arch/mips/boot/dts/xlp8xx-helinux.dts
index 36370ed..d359277 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux.dts
@@ -122,6 +122,7 @@
 				enable-nae-p2p = <0>;
 				enable-poe = <0>;
 				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
 				launch-mode = "smp";	/* smp or amp */
 			};
 			nae{
diff --git a/arch/mips/boot/dts/xlp9xx-helinux.dts b/arch/mips/boot/dts/xlp9xx-helinux.dts
index 74a0ff2..fac8973 100644
--- a/arch/mips/boot/dts/xlp9xx-helinux.dts
+++ b/arch/mips/boot/dts/xlp9xx-helinux.dts
@@ -133,6 +133,7 @@
 				enable-nae-p2p = <0>;
 				enable-poe = <0>;
 				enable-microstruct = <0>;
+				enable-popq-mode = <0>; /* If set to 1, popq mode is enabled else disabled */
 				launch-mode = "smp";	/* smp or amp */
 			};
 			nae{
-- 
1.9.1

