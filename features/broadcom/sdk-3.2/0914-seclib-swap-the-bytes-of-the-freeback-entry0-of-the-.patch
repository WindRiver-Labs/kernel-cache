From 23b5842c915a8090dcdaa65ca0ec99d63103abc2 Mon Sep 17 00:00:00 2001
From: reshmic <reshmic@broadcom.com>
Date: Thu, 13 Mar 2014 14:24:03 +0530
Subject: [PATCH 0914/1532] seclib: swap the bytes of the freeback entry0 of
 the data descriptor for LE mode.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/seclib/cryptosoc_lib.c | 4 ++--
 arch/mips/netlogic/lib/seclib/saesoc_lib.h    | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/mips/netlogic/lib/seclib/cryptosoc_lib.c b/arch/mips/netlogic/lib/seclib/cryptosoc_lib.c
index 3536f3f..6be6a4d 100644
--- a/arch/mips/netlogic/lib/seclib/cryptosoc_lib.c
+++ b/arch/mips/netlogic/lib/seclib/cryptosoc_lib.c
@@ -990,7 +990,7 @@ try_again:
 	while(retry_count > 0 ) {
 		if(gen_type2) {
 			if(rsp_msg)
-				*rsp_msg = msg2;
+				*rsp_msg = ccpu_to_be64(msg2);
 			if(xlp_message_send_2(req_vc, code, msg0, msg1) == 0)
 				break;
 		} else {
@@ -1080,7 +1080,7 @@ static int cryptosoc_process_async_request(int gen_type2,
 	while(retry_count > 0 ) {
 		if(gen_type2) {
 			if(rsp_msg)
-				*rsp_msg = msg2;
+				*rsp_msg = ccpu_to_be64(msg2);
 			if(xlp_message_send_2(req_vc, code, msg0, msg1) == 0)
 				break;
 		} else {
diff --git a/arch/mips/netlogic/lib/seclib/saesoc_lib.h b/arch/mips/netlogic/lib/seclib/saesoc_lib.h
index 99eed45..2a417d4 100644
--- a/arch/mips/netlogic/lib/seclib/saesoc_lib.h
+++ b/arch/mips/netlogic/lib/seclib/saesoc_lib.h
@@ -1913,7 +1913,7 @@ static inline int saesoc_process_request(
                 /* Designer freeback is only enabled in asyn mode */
                 if (dpriv->ndesfb_descs == 0) {
 		    fmnentry2 = mparam != NULL ? mparam->async_rsp_arg : 0ULL;
-		    ddesc->descs[nddescs] = fmnentry2;
+		    ddesc->descs[nddescs] = ccpu_to_be64(fmnentry2);
 		    rsp_msg_ptr = &ddesc->descs[nddescs];
 	            nddescs++;
                 }
@@ -2062,7 +2062,7 @@ static inline int saesoc_process_request(
                 /* Designer freeback is only enabled in asyn mode */
                 if (dpriv->ndesfb_descs == 0) {
 		    fmnentry2 = mparam != NULL ? mparam->async_rsp_arg : 0ULL;
-		    ddesc->descs[nddescs] = fmnentry2;
+		    ddesc->descs[nddescs] = ccpu_to_be64(fmnentry2);
 		    rsp_msg_ptr = &ddesc->descs[nddescs];
 	            nddescs++;
                 }
-- 
1.9.1

