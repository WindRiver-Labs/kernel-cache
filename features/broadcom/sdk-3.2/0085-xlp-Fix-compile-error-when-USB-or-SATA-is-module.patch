From 049e1f8af490d6afcab7852b08c877cad297cebf Mon Sep 17 00:00:00 2001
From: Jayachandran C <jchandra@broadcom.com>
Date: Mon, 14 Jul 2014 16:31:29 +0530
Subject: [PATCH 0085/1532] xlp: Fix compile error when USB or SATA is module

The XLP specific USB and SATA initialization code has to be compiled in
even when the corresponding driver is compiled as module.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/xlp/Makefile | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/mips/netlogic/xlp/Makefile b/arch/mips/netlogic/xlp/Makefile
index 6109671..7637ee6 100644
--- a/arch/mips/netlogic/xlp/Makefile
+++ b/arch/mips/netlogic/xlp/Makefile
@@ -1,6 +1,6 @@
 obj-y				+= setup.o nlm_hal.o dt.o
 obj-$(CONFIG_SMP)		+= wakeup.o
-obj-$(CONFIG_USB)		+= usb-init.o
-obj-$(CONFIG_USB)		+= usb-init-xlp2.o
-obj-$(CONFIG_SATA_AHCI)		+= ahci-init.o
-obj-$(CONFIG_SATA_AHCI)		+= ahci-init-xlp2.o
+obj-$(subst m,y,$(CONFIG_USB))	+= usb-init.o
+obj-$(subst m,y,$(CONFIG_USB))	+= usb-init-xlp2.o
+obj-$(subst m,y,$(CONFIG_SATA_AHCI))	+= ahci-init.o
+obj-$(subst m,y,$(CONFIG_SATA_AHCI))	+= ahci-init-xlp2.o
-- 
1.9.1

