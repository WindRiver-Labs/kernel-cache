From 133af3c02aa9eccff1a4fad02a8b6e22ab5abf4a Mon Sep 17 00:00:00 2001
From: Yonghong Song <ysong@broadcom.com>
Date: Mon, 8 Jul 2013 09:25:49 -0700
Subject: [PATCH 1158/1532] kmod: soc_interface: remove stale codes introduced
 in early development

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/misc/netlogic/soc_interface/on_chip.c | 30 ---------------------------
 1 file changed, 30 deletions(-)

diff --git a/drivers/misc/netlogic/soc_interface/on_chip.c b/drivers/misc/netlogic/soc_interface/on_chip.c
index 652caeb..eebca1d 100644
--- a/drivers/misc/netlogic/soc_interface/on_chip.c
+++ b/drivers/misc/netlogic/soc_interface/on_chip.c
@@ -1023,9 +1023,6 @@ static int __init on_chip_init(void)
 {
 	int i = 0, j = 0;
 	u8 node;
-#if defined(CONFIG_NLM_XLP9XX_IO)
-        uint32_t fmn_bar;
-#endif
 
 	fdt = initial_boot_params;
 	if (fdt == NULL) {
@@ -1056,34 +1053,7 @@ static int __init on_chip_init(void)
 	msgring_registered.value = 0;
 #endif
 
-#ifdef CONFIG_NLM_XLP9XX
-	xlp_io_base = KSEG1 + 0x18000000;
-	xlp_sys_base[0] = (xlp_io_base | (1 << 20) | XLP_CFG_BASE(0, XLP9XX_SYS)) & 0x1fffffff;
-
-#ifdef CONFIG_NLM_XLP9XX_IO
-	/* FIXME: for FMN, let us read the bootloader configured value and set it to the
-	 * correct bar register and initialize xlp_fmn_base properly.
-	 *
-	 * Note the set of bar register will not be needed once bootloader for griffin
-	 * is implemented properly.
-	 */
-
-	/* Need to program the current node, CMU (bus 0, device 0, node id as function number)
-	 * register 0x6. The same format as the BUS number to set the secondary bus number
-	 * and subordinate bus number correctly. The bus number must be in the range for
-	 * the bar register to go through.
-	 */
-	nlm_hal_write_32bit_reg((0x18000000 | (0 << 20) | XLP_CFG_BASE(0, XLP_IO)), 0x6, 0x00ff0100);
-
-	fmn_bar = 0xd0000000;
-	nlm_hal_write_32bit_reg((0x18000000 | (1 << 20) | XLP_CFG_BASE(0, XLP_FMN)), 0x4, fmn_bar);
-	nlm_hal_write_32bit_reg((0x18000000 | (1 << 20) | XLP_CFG_BASE(0, XLP_FMN)), 0x5, 0x0);
-	xlp_fmn_base[0] = 0x9000000000000000ULL | fmn_bar;
-#endif
-
-#else
 	nlm_hal_init();
-#endif
 
 	for (i = 0; i < NR_CPUS; i++)
 		for (j = 0; j < NLM_MAX_COUNTERS; j++)
-- 
1.9.1

