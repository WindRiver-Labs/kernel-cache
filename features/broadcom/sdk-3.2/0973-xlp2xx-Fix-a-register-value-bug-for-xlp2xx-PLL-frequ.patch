From 96a93bb6dec75f2bc5b42b40dca0f726738eda6f Mon Sep 17 00:00:00 2001
From: johuang <john.huang@broadcom.com>
Date: Wed, 14 May 2014 18:35:37 -0700
Subject: [PATCH 0973/1532] xlp2xx: Fix a register value bug for xlp2xx PLL
 frequency check

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/syslib/src/nlm_hal_sys.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/lib/syslib/src/nlm_hal_sys.c b/arch/mips/netlogic/lib/syslib/src/nlm_hal_sys.c
index 3aca5db..b7efc1c 100644
--- a/arch/mips/netlogic/lib/syslib/src/nlm_hal_sys.c
+++ b/arch/mips/netlogic/lib/syslib/src/nlm_hal_sys.c
@@ -722,7 +722,7 @@ uint64_t nlm_hal_xlp2xx_get_pllfreq_dyn(int node, uint8_t pll_type)
 	ref_clk_den = REF_CLK_DEN;
 	NLM_HAL_DO_DIV(ref_clk_num, ref_clk_den);
 	ref_clk_num +=  REF_CLK_NUM_400;
-	NLM_HAL_DO_DIV(ref_clk_num, xlp2xx_pll_Rate2Div(reg_ctrl0));
+	NLM_HAL_DO_DIV(ref_clk_num, xlp2xx_pll_Rate2Div(nlm_hal_read_sys_reg(node, reg_ctrl0)));
 
 	return ref_clk_num;
 }
-- 
1.9.1

