From 40eeb079fb51a5e0e2fd99a7d283f264b74f16a6 Mon Sep 17 00:00:00 2001
From: Siva Krishna Gudivada <sivag@broadcom.com>
Date: Thu, 4 Dec 2014 20:51:03 +0530
Subject: [PATCH 0600/1532] DPI: Updated nae_dpi demo dts files

    Added 128 credits from cpu to regx and vice versa
    Removed multiple ucore files for dpi nae app
    Updated legacy dts files with correct frin fifo masks
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/generic-fmn.dtsi          |  8 +++++++-
 arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi | 12 ++++++++++++
 2 files changed, 19 insertions(+), 1 deletion(-)

diff --git a/arch/mips/boot/dts/generic-fmn.dtsi b/arch/mips/boot/dts/generic-fmn.dtsi
index 6a58eeb..94baf8ed 100644
--- a/arch/mips/boot/dts/generic-fmn.dtsi
+++ b/arch/mips/boot/dts/generic-fmn.dtsi
@@ -18,7 +18,7 @@ fmn@node-0 {
 		cpu {
 			queue-size = <36864>; /* queue size for all the cpu vcs */
 			credits-from {
-				node-0 = <0 0 0 0 0 0 0 0 0 0 0 500 0 0 150 0>;
+				node-0 = <0 0 0 0 0 0 0 0 0 0 0 500 0 128 150 0>;
 			};
 		};
 
@@ -28,6 +28,12 @@ fmn@node-0 {
 			};
 		};
 
+		regx {
+			credits-from {
+				node-0 = <128 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
+			};
+		};
+
 		srio {
 			credits-from {
 				node-0 = <150 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0>;
diff --git a/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
index 4e7f256..9ad5257 100644
--- a/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
+++ b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
@@ -26,6 +26,7 @@ fmn@node-0 {
 					poe1 = <1024>;
 					nae = <32>;
 					nae1 = <32>;
+                    regx = <128>;
 				};
 			};
 		};
@@ -41,6 +42,16 @@ fmn@node-0 {
 			};
 		};
 
+        regx {
+             onchip-entries = <128>;
+             queue-size = <49152>;
+             credits-from {
+                 stn@node-0 {
+                     cpu = <128>;
+                 };
+             };
+        };
+
 		rsa {
 			onchip-entries = <256>;
 			queue-size = <49152>;
@@ -146,6 +157,7 @@ fmn@node-1 {
 			};
 		};
 
+
 		rsa {
 			onchip-entries = <256>;
 			queue-size = <49152>;
-- 
1.9.1

