From 6a37871f9b5bbd1a8a9ae72b807d8190dbb767e1 Mon Sep 17 00:00:00 2001
From: Sreekanth Molagavalli <sreekanth.molagavalli@broadcom.com>
Date: Tue, 15 Jul 2014 12:16:51 +0530
Subject: [PATCH 0558/1532] memory: Change Linux start memory to 0 MB.

	Linux is loaded at 1MB from sdk 3.0. Hence the first memory
	range in the DTB should be starting at least at the 1MB mark.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts        |  2 +-
 arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts        |  2 +-
 arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts |  4 ++--
 arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts    |  2 +-
 arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts         |  6 +++---
 arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts  |  2 +-
 arch/mips/boot/dts/xlp2xx-dpi-nae-mc.dts            |  2 +-
 arch/mips/boot/dts/xlp2xx-ep-linux.dts              |  2 +-
 arch/mips/boot/dts/xlp4xx-linux.dts                 |  4 ++--
 arch/mips/boot/dts/xlp5xx-helinux-nat.dts           | 10 +++++-----
 arch/mips/boot/dts/xlp8xx-helinux-nat.dts           |  6 +++---
 arch/mips/boot/dts/xlp9xx-helinux-nat.dts           | 10 +++++-----
 12 files changed, 26 insertions(+), 26 deletions(-)

diff --git a/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts b/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
index 583059c..8e0118b 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-helinux-nae.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0xa0000000
                         0 0xe0000000 0 0x20000000
                         0x2 0x80000000 0 0x80000000>;
diff --git a/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts b/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
index d76a328..4a235c1 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-helinux-nat.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0x40000000
                         0x2 0x29000000 0 0x80000000>;
         };
diff --git a/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts b/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
index c9b07f3..0b09d53 100644
--- a/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
+++ b/arch/mips/boot/dts/mn4xlp8xx-hybrid-nae-helinux.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0xa0000000
                         0 0xe0000000 0 0x20000000
                         0x2 0x80000000 0 0x80000000>; //2048m@10240m
@@ -47,7 +47,7 @@
 				sharedcfg = <0x1f000000>;
 			};
 			memory {
-				reg = <0x01000000 0x0B000000
+				reg = <0x00000000 0x0B000000
 					0x20000000 0xa0000000>; // 2586M at 512M
 
 			};
diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
index f70ed5d..9d6126a 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nat-32GB.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0x40000000 
                         0x2 0x29000000 0 0x80000000  // 2048m@8848m
                         0x4 0x29000000 0 0x80000000>; //2048m@17040m
diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
index 3c055d5..cb6740b 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nat.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   // 176M at 16M
+                reg =  <0 0x00000000 0 0x0B000000   // 176M at 0M
                         0 0x20000000 0 0x40000000 // 1GB @ 512MB
                         0x2 0x29000000 0 0x80000000>; //2048m@8848m
         };
@@ -129,7 +129,7 @@
 
 			};
 			owner-config {
-				nae = <0x0>;   
+				nae = <0x0>;
 				sae = <0x0>;
 				rsa = <0x0>;
 				fmn = <0x0>;
@@ -218,7 +218,7 @@
 
 	soc {
 	};
-	
+
 	frequency-config {
 		nae = <500>;
 		sae = <500>;
diff --git a/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts b/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
index 453e20c..f642b388 100644
--- a/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-hybrid-nae-helinux.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0xa0000000
                         0 0xe0000000 0 0x20000000
                         0x2 0x80000000 0 0x80000000>; //2048m@10240m
diff --git a/arch/mips/boot/dts/xlp2xx-dpi-nae-mc.dts b/arch/mips/boot/dts/xlp2xx-dpi-nae-mc.dts
index fd79831..4093f75 100644
--- a/arch/mips/boot/dts/xlp2xx-dpi-nae-mc.dts
+++ b/arch/mips/boot/dts/xlp2xx-dpi-nae-mc.dts
@@ -44,7 +44,7 @@
 				sharedcfg = <0x1f000000>;
 			};
 			/*memory {
-				reg = <0x01000000 0x0B000000
+				reg = <0x00000000 0x0B000000
 					0x28000000 0x38000000>;  //1024M - 128M at 512M + 128M
 					//0x28000000 0x98000000>;  // 2560M - 128M at 512M + 128M
 
diff --git a/arch/mips/boot/dts/xlp2xx-ep-linux.dts b/arch/mips/boot/dts/xlp2xx-ep-linux.dts
index ef41db1..1f59435 100644
--- a/arch/mips/boot/dts/xlp2xx-ep-linux.dts
+++ b/arch/mips/boot/dts/xlp2xx-ep-linux.dts
@@ -50,7 +50,7 @@
 				sharedcfg = <0x1f000000>;
 			};
 			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
+				reg = <0x00000000 0x0B000000	// 176M at 0M
 					0x20000000 0xa0000000>;  // 2586M at 512M
 			};
                         fmn {
diff --git a/arch/mips/boot/dts/xlp4xx-linux.dts b/arch/mips/boot/dts/xlp4xx-linux.dts
index 048d610..1ae2ce5 100644
--- a/arch/mips/boot/dts/xlp4xx-linux.dts
+++ b/arch/mips/boot/dts/xlp4xx-linux.dts
@@ -11,7 +11,7 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x00000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000
 			0 0x20000000 0 0x60000000>;  // 1536M at 512M
         };
 
@@ -59,7 +59,7 @@
 				sharedcfg = <0x1f000000>;
 			};
 			memory {
-				reg = <0x01000000 0x0B000000	// 176M at 16M
+				reg = <0x00000000 0x0B000000	// 176M at 0M
 					0x20000000 0x60000000>;  // 1536M at 512M
 			};
                         fmn {
diff --git a/arch/mips/boot/dts/xlp5xx-helinux-nat.dts b/arch/mips/boot/dts/xlp5xx-helinux-nat.dts
index 0525309..2dd3240 100644
--- a/arch/mips/boot/dts/xlp5xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/xlp5xx-helinux-nat.dts
@@ -12,7 +12,7 @@
 
 	memory {
                 device_type = "memory";
-                reg =  <0x0 0x1000000  0x0 0xb000000     /* 16M - 16+176M */
+                reg =  <0x0 0x0000000  0x0 0xb000000     /* 0M - 176M */
                         0x1 0x0        0x1 0x00000000>;  /*   4096M - 4096+6144M */
 
         };
@@ -98,7 +98,7 @@ pktmem {
 			os = "uspace";
 
 			heap-size = <0x0 0x8000000>; // 128M
-            shared-mem =  <0x0 0xe0000000 0x1 0x00000000>; // 4GB @ 3.5GB 
+            shared-mem =  <0x0 0xe0000000 0x1 0x00000000>; // 4GB @ 3.5GB
 
 			#address-cells = <1>;
 			#size-cells = <1>;
@@ -124,11 +124,11 @@ pktmem {
 				lzs-vc = <2>;
 				sae-rx-vc = <0>; /* sharing with nae */
 				sae-rx-sync-vc = <0>;  /* sharing with nae */
-				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae 
+				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae
 				   responses. Also there is no other vc as linux is using other 2 vcs */
                                 /* Setting this to '1' makes NAE driver to skip buf alloction and initial
                                    sending of packet buffers*/
-                                nae-buf-alloc-by-app = <1>; 
+                                nae-buf-alloc-by-app = <1>;
 			};
 			uart {
 				id = <0>;
@@ -218,7 +218,7 @@ pktmem {
                                 nae-fb-vc = <3>;
                                 /* Setting this to '1' makes NAE driver to skip buf alloction and initial
                                    sending of packet buffers*/
-                                nae-buf-alloc-by-app = <1>; 
+                                nae-buf-alloc-by-app = <1>;
 			};
 			uart {
 				id = <0>;
diff --git a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
index fe055c4..a6ae359 100644
--- a/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/xlp8xx-helinux-nat.dts
@@ -12,7 +12,7 @@
 	/*memory range for linux. This will not appear in dom0*/
     memory {
                 device_type = "memory";
-                reg =  <0x0 0x01000000 0x0 0x0B000000       /* 16M @ 16+176M      */
+                reg =  <0x0 0x00000000 0x0 0x0B000000       /* 0M @ 16+176M      */
                         0x1 0x0        0x1 0x80000000>;     /* 4096M - 4096+6144M */
         };
 	/* memory range for HEv2 pkt mem. Only one contig memory per node supported */
@@ -32,7 +32,7 @@
 		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0xffffffff -- ";
 		domain_heap = <0x80000000 0x20000000>;
 	};
-	
+
     doms {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -162,7 +162,7 @@
 
 	soc {
 	};
-	
+
 	frequency-config {
 		nae = <500>;
 		sae = <500>;
diff --git a/arch/mips/boot/dts/xlp9xx-helinux-nat.dts b/arch/mips/boot/dts/xlp9xx-helinux-nat.dts
index b964271..c1a6644 100644
--- a/arch/mips/boot/dts/xlp9xx-helinux-nat.dts
+++ b/arch/mips/boot/dts/xlp9xx-helinux-nat.dts
@@ -12,7 +12,7 @@
 
 	memory {
                 device_type = "memory";
-                reg =  <0x0 0x1000000  0x0 0xb000000        /* 16M - 16+176M */
+                reg =  <0x0 0x0000000  0x0 0xb000000        /* 0M - 176M */
                         0x1 0x0        0x1 0x80000000>;     /* 4096M - 4096+6144M */
 
         };
@@ -98,7 +98,7 @@ pktmem {
 			os = "uspace";
 
 			heap-size = <0x0 0x8000000>; // 128M
-            shared-mem =  <0x0 0xe0000000 0x1 0x00000000>; // 4GB @ 3.5GB 
+            shared-mem =  <0x0 0xe0000000 0x1 0x00000000>; // 4GB @ 3.5GB
 
 			#address-cells = <1>;
 			#size-cells = <1>;
@@ -124,11 +124,11 @@ pktmem {
 				lzs-vc = <2>;
 				sae-rx-vc = <0>; /* sharing with nae */
 				sae-rx-sync-vc = <0>;  /* sharing with nae */
-				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae 
+				/* helinux, as only 1 thread per cpu, it should poll for both nae and sae
 				   responses. Also there is no other vc as linux is using other 2 vcs */
                                 /* Setting this to '1' makes NAE driver to skip buf alloction and initial
                                    sending of packet buffers*/
-                                nae-buf-alloc-by-app = <1>; 
+                                nae-buf-alloc-by-app = <1>;
 			};
 			uart {
 				id = <0>;
@@ -218,7 +218,7 @@ pktmem {
                                 nae-fb-vc = <3>;
                                 /* Setting this to '1' makes NAE driver to skip buf alloction and initial
                                    sending of packet buffers*/
-                                nae-buf-alloc-by-app = <1>; 
+                                nae-buf-alloc-by-app = <1>;
 			};
 			uart {
 				id = <0>;
-- 
1.9.1

