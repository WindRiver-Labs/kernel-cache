From 3577437e44bb84dbe9ac11f05bd42b406b33f375 Mon Sep 17 00:00:00 2001
From: Vikas Gupta <vikas.gupta@broadcom.com>
Date: Fri, 27 Jun 2014 11:43:02 +0530
Subject: [PATCH 1015/1532] nae: added missing interface types in
 get_frame_size API

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/netlib/include/netsoc_nae.h | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/lib/netlib/include/netsoc_nae.h b/arch/mips/netlogic/lib/netlib/include/netsoc_nae.h
index bf7fa06..165d0ff 100644
--- a/arch/mips/netlogic/lib/netlib/include/netsoc_nae.h
+++ b/arch/mips/netlogic/lib/netlib/include/netsoc_nae.h
@@ -1469,8 +1469,13 @@ static inline int __netsoc_get_frame_size(net_port_t *netport)
                         break;
                 case XAUI_IF:
                 case RXAUI_IF:
-                        mac_base = netsoc_get_macreg_base_for_xgmac0(nae->mac_base, netport->hw_port_id);
+		case XFI_IF:
+			mac_base = __netsoc_get_xgmac_base(netport);
                         size = (netsoc_read_mac_reg(mac_base, XAUI_MAX_FRAME_LEN) >> 16) * 4;
+			break;
+		case XLAUI_IF:
+			size  = (int) __netsoc_read_xlgmac_reg(netport, XLAUI_FRM_LENGTH);
+			size &= (0xffff);	
                         break;
                 default:
                         return -NETSOC_API_PARAM_INVALID;
-- 
1.9.1

