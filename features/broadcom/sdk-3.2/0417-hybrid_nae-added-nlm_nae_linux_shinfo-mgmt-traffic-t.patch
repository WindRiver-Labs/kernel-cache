From 6f1725849329224713284aa118ca8ed4b7cb5829 Mon Sep 17 00:00:00 2001
From: Rahul Gupta <guptar@broadcom.com>
Date: Tue, 1 Oct 2013 18:46:22 +0530
Subject: [PATCH 0417/1532] hybrid_nae: added nlm_nae_linux_shinfo & mgmt
 traffic to dom0; tested & working on 8xx & 9xx

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp8xx-hybrid-nae-helinux.dts | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

diff --git a/arch/mips/boot/dts/xlp8xx-hybrid-nae-helinux.dts b/arch/mips/boot/dts/xlp8xx-hybrid-nae-helinux.dts
index 0699c92..8155349 100644
--- a/arch/mips/boot/dts/xlp8xx-hybrid-nae-helinux.dts
+++ b/arch/mips/boot/dts/xlp8xx-hybrid-nae-helinux.dts
@@ -12,16 +12,14 @@
         memory {
                 device_type = "memory";
                 reg =  <0 0x01000000 0 0x0B000000   
-                        0 0x20000000 0 0xa0000000
-                        0 0xe0000000 0 0x20000000
-                        0x2 0x80000000 0 0x80000000>; //2048m@10240m
+                        0 0x20000000 0 0x40000000>;
         };
         /* memory range for HEv2 pkt mem. Only one contig memory per node supported */
         pktmem {
                 device_type = "pktmem";
 
                 /* format: node number, 64-bit addr, 64-bit size */
-                reg = <0 0 0x80000000 0 0x08000000
+                reg = <0 0x0 0xe0000000 0x0 0x20000000
                        1 0x0 0x0 0x0 0x0
                        2 0x0 0x0 0x0 0x0
                        3 0x0 0x0 0x0 0x0>;
@@ -58,18 +56,18 @@
 			};
 			nae {
 				freein-fifo-mask = <0x30000 0x30000 0 0>;
-				sh-domains = <1 2>;
+				sh-domains = <1>;
 				/* node offsets and size */
 				vfbtbl-sw-offset = <0 0 0 0>;
 				vfbtbl-sw-nentries = <32 32 32 32>;
-				vfbtbl-hw-offset = <0 0 0 0>;
-				vfbtbl-hw-nentries = <0 0 0 0>;
+				vfbtbl-hw-offset = <32 32 32 32>;
+				vfbtbl-hw-nentries = <20 20 20 20>;
 			};
 			owner-config {
-				nae = <0x3>;   // currently for node0 and node1
+				nae = <0x1>;   // currently for node0 and node1
 				sae = <0x1>;   // for node0
 				rsa = <0x1>;
-				fmn = <0xf>;
+				fmn = <0x1>;
 			};
 			fmn {
                                 node_0_vc_mask = <0x33333333 0x33333333 0x33333333 0x33333333>;
@@ -127,7 +125,8 @@
 				/* replenish info syntax */
 				freein-fifo-replenish-by-owner = <1>;
 				/* < node paddr-H32bits paddr-L32bits size-H32bits size-L32bits */
-				freein-fifo-replenish-addr-info = <0x0 0x1 0x08000000 0x0 0x10000000>; /* 256M @4096M*/
+				freein-fifo-replenish-addr-info = <0x0 0x0 0x88000000 0x0 0x10000000>; /* 256M @ 2176M*/
+				/*freein-fifo-replenish-addr-info = <0x0 0x1 0x08000000 0x0 0x10000000>; *//* 256M @4096M*/
 				/* < node fifomask descsize headroom ndescs > */
 				freein-fifo-replenish-desc-info = <0 0xffff 2048 0 64>;
 			};
@@ -207,6 +206,7 @@
 	};
 
 	chosen {
+        netlogic,cpumask = <0xffffffff>;
 		bootargs = " console=ttyS0,115200 ";
 	};
 
-- 
1.9.1

