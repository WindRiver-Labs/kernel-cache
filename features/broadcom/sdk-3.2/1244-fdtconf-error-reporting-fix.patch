From fc3531a4b16a10d9f4e34439c148c2e3f1a6b41e Mon Sep 17 00:00:00 2001
From: Tanmay Jagdale <tanmayj@broadcom.com>
Date: Mon, 8 Sep 2014 09:38:32 +0530
Subject: [PATCH 1244/1532] fdtconf: error reporting fix

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/misc/netlogic/fdtconf/fdtconf.c | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/misc/netlogic/fdtconf/fdtconf.c b/drivers/misc/netlogic/fdtconf/fdtconf.c
index 3f1310a..c462c00 100644
--- a/drivers/misc/netlogic/fdtconf/fdtconf.c
+++ b/drivers/misc/netlogic/fdtconf/fdtconf.c
@@ -100,8 +100,9 @@ static void parse_and_fill_kern_params(void)
 			mask[word] |= 1u << bit;
 		}
 
-		if (fdt_setprop(fdt, node, "netlogic,cpumask", mask,
-				sizeof(mask)))
+		err = fdt_setprop(fdt, node, "netlogic,cpumask", mask,
+				sizeof(mask));
+		if (err)
 			dev_err(&fdtdev->dev, "Couldn't set cpumask\n");
 
 	} else
@@ -275,7 +276,8 @@ static int handle_opcodes(int node, char *file)
 	if (is_nlm_xlp3xx() || is_nlm_xlp2xx())
 		umask &= 0xff;
 
-	if (fdt_setprop(fdt, node, "mask", &umask, sizeof(umask)))
+	err = fdt_setprop(fdt, node, "mask", &umask, sizeof(umask));
+	if (err)
 		dev_err(&fdtdev->dev, "Could not set ucore mask");
 
 free:
-- 
1.9.1

