From a40d9cbc9740b6440d21730e43d09bc483da888c Mon Sep 17 00:00:00 2001
From: Saswat Kumar Dash <saswat.dash@broadcom.com>
Date: Thu, 4 Dec 2014 03:08:20 -0800
Subject: [PATCH 0599/1532] spill-mem: added netlogic,spill-mem under chosen/
 section of linux-kernel.dts

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/generic-fmn.dtsi        | 2 +-
 arch/mips/boot/dts/xlp2xx-linux-kernel.dts | 1 +
 arch/mips/boot/dts/xlp3xx-linux-kernel.dts | 1 +
 arch/mips/boot/dts/xlp5xx-linux-kernel.dts | 1 +
 arch/mips/boot/dts/xlp8xx-linux-kernel.dts | 1 +
 5 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/arch/mips/boot/dts/generic-fmn.dtsi b/arch/mips/boot/dts/generic-fmn.dtsi
index 9af7f81..6a58eeb 100644
--- a/arch/mips/boot/dts/generic-fmn.dtsi
+++ b/arch/mips/boot/dts/generic-fmn.dtsi
@@ -2,7 +2,7 @@ fmn@node-0 {
 	default-credits = <50>;
 	default-queue-size = <28672>;
 	fmn-spill-mem-base = <0x0 0x0>; /*0 - dynamic allocation, only for 64 bit linux */
-	fmn-spill-mem-size = <0x00000000 0x02000000>;
+	fmn-spill-mem-size = <0x0 0x0>; /* set the size in netlogic,spill-mem under chosen/ section */
 
 	q-config {
 		/*
diff --git a/arch/mips/boot/dts/xlp2xx-linux-kernel.dts b/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
index 76182b4..797ad62 100644
--- a/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
@@ -254,5 +254,6 @@
 		bootargs = "console=ttyS0,115200 rhash_entries=1048576";
 		netlogic,cpumask = <0xff>;
 		netlogic,reserve-mem = <256>;
+		netlogic,spill-mem = <32>;
 	};
 };
diff --git a/arch/mips/boot/dts/xlp3xx-linux-kernel.dts b/arch/mips/boot/dts/xlp3xx-linux-kernel.dts
index bfbe7a6..c1f763a 100644
--- a/arch/mips/boot/dts/xlp3xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux-kernel.dts
@@ -259,5 +259,6 @@
 		bootargs = "console=ttyS0,115200 rhash_entries=1048576";
 		netlogic,cpumask = <0xffff>;
 		netlogic,reserve-mem = <256>;
+		netlogic,spill-mem = <32>;
 	};
 };
diff --git a/arch/mips/boot/dts/xlp5xx-linux-kernel.dts b/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
index fba978a..07df5e6 100644
--- a/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
@@ -271,5 +271,6 @@
 		netlogic,cpumask = <0xffffffff>;
 		netlogic,reserve-mem = <256>;
 		netlogic,frfifo-mem = <128>;
+		netlogic,spill-mem = <32>;
 	};
 };
diff --git a/arch/mips/boot/dts/xlp8xx-linux-kernel.dts b/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
index bbbfa9e..c9a4966 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
@@ -242,5 +242,6 @@
 		netlogic,cpumask = <0xffffffff>;
 		netlogic,reserve-mem = <256>;
 		netlogic,frfifo-mem = <128>;
+		netlogic,spill-mem = <32>;
 	};
 };
-- 
1.9.1

