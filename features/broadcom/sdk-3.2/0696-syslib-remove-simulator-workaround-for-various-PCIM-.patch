From d8987ef5cb6569b8a144dcee57bbad038494d82c Mon Sep 17 00:00:00 2001
From: Yonghong Song <ysong@broadcom.com>
Date: Thu, 23 May 2013 10:08:03 -0700
Subject: [PATCH 0696/1532] syslib: remove simulator workaround for various
 PCIM base addresses

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/syslib/src/nlm_hal.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/lib/syslib/src/nlm_hal.c b/arch/mips/netlogic/lib/syslib/src/nlm_hal.c
index fd90a7e..619559b 100644
--- a/arch/mips/netlogic/lib/syslib/src/nlm_hal.c
+++ b/arch/mips/netlogic/lib/syslib/src/nlm_hal.c
@@ -401,6 +401,7 @@ __inline__ void nlm_hal_init(void)
 
         	/* PCI enumeration of supported devices*/
 
+#if 0
 		/* FIXME: this is a workaround for simulator, once uboot is ready for simulator,
 		 * the below should be removed.
 		 */
@@ -414,7 +415,9 @@ __inline__ void nlm_hal_init(void)
 			xlp_mac_base[0] = 0x0;
 			xlp_nae_base[0] = 0x0;
 			xlp_nae_base[0] = 0x0;
-		} else {
+		} else 
+#endif
+		{
 			xlp_fmn_base[node] = mask & nlm_hal_read_32bit_reg((0x18000000 + XLP_CFG_BASE(node, XLP_FMN)), PCI_MEM_BAR_0);
 
 			xlp_mac_base[node] = mask & nlm_hal_read_32bit_reg((0x18000000 + XLP_CFG_BASE(node, XLP_NAE)), PCI_MEM_BAR_0); //0x18018000
-- 
1.9.1

