From dc4d2767fa9d8972c72664e57f3e3dbe0e50f20c Mon Sep 17 00:00:00 2001
From: Jayanthi A <jayanthi.annadurai@broadcom.com>
Date: Thu, 24 Oct 2013 18:20:34 -0700
Subject: [PATCH 0825/1532] netlib: skipping port configuration if the
 interlaken port is not a base port

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/netlib/src/netsoc_nae.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_nae.c b/arch/mips/netlogic/lib/netlib/src/netsoc_nae.c
index 47adc3f..5389678 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_nae.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_nae.c
@@ -3986,6 +3986,9 @@ static int __netsoc_init_net_port(net_port_t *netport, uint32_t context)
                 __netsoc_config_xaui(netport);
         }
         else if (netport->iftype == INTERLAKEN_IF) {
+	        if (netport->ext_phy_addr != 0) // skip port configuration if the interlaken port is not a base port
+                       return 0;
+
                 if(netport->loopback)
         	        __netsoc_config_ilk_loopback(netport, nae->num_lanes[hw_port / XLP_ILK_MAX_LANES]);
                 __netsoc_config_interlaken(netport, nae->num_lanes[hw_port / XLP_ILK_MAX_LANES]);
-- 
1.9.1

