From 451fc9bf4c8ca8c1ed5a4aa6e05cf76addbb8a69 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Fri, 10 Sep 2010 23:53:17 -0700
Subject: [PATCH 0190/1532] Support to generate dtb files for netos, linux,
 multi-os, tiny, xlr

Top-level makefile changes to compile for different targets.
Pre-compiled dtb files with nae configurations.
Dummy 'soc' nodes to insert nae configuration.
Removed unused domain nodes in xlr.dts
Better clean target
Bug fix to check null pointer access in nae-configurator.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/linux.dts    |   4 +
 arch/mips/boot/dts/multi-os.dts |   4 +
 arch/mips/boot/dts/tiny.dts     | 109 +---------------
 arch/mips/boot/dts/xlr.dts      | 272 ----------------------------------------
 4 files changed, 11 insertions(+), 378 deletions(-)

diff --git a/arch/mips/boot/dts/linux.dts b/arch/mips/boot/dts/linux.dts
index 0a360fb..174fbfd 100644
--- a/arch/mips/boot/dts/linux.dts
+++ b/arch/mips/boot/dts/linux.dts
@@ -65,5 +65,9 @@
 		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
 		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
 	};
+
+	soc {
+
+	};
 };
 
diff --git a/arch/mips/boot/dts/multi-os.dts b/arch/mips/boot/dts/multi-os.dts
index 835243a..9136a46 100644
--- a/arch/mips/boot/dts/multi-os.dts
+++ b/arch/mips/boot/dts/multi-os.dts
@@ -139,5 +139,9 @@
 		dom0          = <0x09000000 0x03000000>; /* 48M @ 144M */
 		domU-ramdisk  = <0x60000000 0x60800000>; /* 8M @ 1536M */
 	};
+
+	soc {
+
+	};
 };
 
diff --git a/arch/mips/boot/dts/tiny.dts b/arch/mips/boot/dts/tiny.dts
index 390541b..fc5abad 100644
--- a/arch/mips/boot/dts/tiny.dts
+++ b/arch/mips/boot/dts/tiny.dts
@@ -36,113 +36,10 @@
 
 	chosen {
 		bootargs = "xlp_noi2c console=ttyS0,115200 rdinit=/sbin/init";
-		nae-cfg {
-			num-ports = <4>;
-			start-port-id = <0>;
-			num-port-regs = <5>;
-			ucore {
-				src@1 {
-					num-opcodes = <52>;
-					mask = <0xffff>;
-					opcodes = <
-						0x3c1c0010 
-						0x279cf808 
-						0x3c020010 
-						0x2442f808 
-						0x3c030010 
-						0x2463f808 
-						0xac400000 
-						0x0043082b 
-						0x1420fffd 
-						0x24420004 
-						0x3c1d0010 
-						0x27bdf9c0 
-						0x27a50020 
-						0x27a60028 
-						0xaca00000 
-						0xacc00000 
-						0x0c000029 
-						0x00002021 
-						0x1000ffff 
-						0x00000000 
-						0x3c020000 
-						0x8c420104 
-						0x27bdffe0 
-						0x2403ffff 
-						0xafbf001c 
-						0xafb10018 
-						0x10430009 
-						0xafb00014 
-						0x3c100000 
-						0x26100104 
-						0x2411ffff 
-						0x0040f809 
-						0x2610fffc 
-						0x8e020000 
-						0x1451fffc 
-						0x00000000 
-						0x8fbf001c 
-						0x8fb10018 
-						0x8fb00014 
-						0x03e00008 
-						0x27bd0020 
-						0x00001821 
-						0x34088004 
-						0x8d060000 
-						0x30c5000f 
-						0x00052280 
-						0x34820001 
-						0x34088030 
-						0xad020000 
-						0x34088000 
-						0x0800002a 
-						0xad030000 
-					>;
-				};
-			};
+	};
 
-			port0 {
-				num-free-desc = <10>;
-				cfg-regs = <
-					0x35 0xd
-					0x1f 0x35
-					0x12 0x28
-					0x21 0x14
-					0x28 0x400
-				>;
-			};
-			port1 {
-				num-free-desc = <10>;
-				cfg-regs = <
-					0x35 0xd
-					0x1f 0x35
-					0x12 0x8
-					0x21 0x14
-					0x28 0x401
-				>;
-			};
-			port2 {
-				num-free-desc = <10>;
-				cfg-regs = <
-					0x35 0xd
-					0x1f 0x1f
-					0x12 0x8
-					0x21 0x14
-					0x28 0x402
-				>;
-			};
-			port3 {
-				num-free-desc = <10>;
-				cfg-regs = <
-					0x35 0xd
-					0x1f 0x12
-					0x12 0x8
-					0x21 0x14
-					0x28 0x403
-				>;
-			};
-		};
-		fmn{
+	soc {
+		fmn {
 			spill-base-hi   = <0x00000000>;
 			spill-base-low  = <0xE0000000>;
 			spill-size  	= <0x1000000>;
diff --git a/arch/mips/boot/dts/xlr.dts b/arch/mips/boot/dts/xlr.dts
index 5ae6a86..70d4823 100644
--- a/arch/mips/boot/dts/xlr.dts
+++ b/arch/mips/boot/dts/xlr.dts
@@ -30,278 +30,6 @@
 			pic {
 			};
 		};
-		dom@1 {
-			device_type = "domain";
-			cpu {
-				onlinemask = <0xffff0000>;
-			};
-			uart {
-				id = <1>;
-			};
-			memory {
-			};
-		};
-		dom@2 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@3 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@4 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@5 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@6 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@7 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@8 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@9 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@10 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@11 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@12 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@13 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@14 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@15 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@16 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@17 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@18 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@19 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@20 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@21 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@23 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@24 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@25 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@26 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@27 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@28 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@29 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@30 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
-		dom@31 {
-			device_type = "domain";
-			cpu {
-			};
-			uart {
-			};
-			memory {
-			};
-		};
 	};
 
 	chosen {
-- 
1.9.1

