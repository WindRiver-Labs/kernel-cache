From ab2a2308f9397fdc04acfa733e8a3b5b92625a1a Mon Sep 17 00:00:00 2001
From: Saswat Dash <saswat.dash@broadcom.com>
Date: Mon, 3 Feb 2014 15:19:14 +0530
Subject: [PATCH 0886/1532] fmn: added EHB for popq configuration

[Based on SDK 3.2]
Delete the defination of _ehb() because the compile error as below:
nlm_hal_fmn.h:185:0: error: "_ehb" redefined [-Werror]
 #define _ehb() __asm__ __volatile__("ehb" : : : "memory")
 ^

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
index 95b2c8e..11e8d40 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn.h
@@ -239,6 +239,7 @@ static inline int nlm_hal_pop_cfg_update (uint32_t vc_mask)
 	config &= ~(0x1e);
 	config |= vc;
 	xlp_write_config(config);
+	_ehb();
 
 	return 0;
 }
-- 
1.9.1

