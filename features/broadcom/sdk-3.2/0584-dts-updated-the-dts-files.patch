From 3c6c7dfbe11981f7efa042c878072c2c96086d85 Mon Sep 17 00:00:00 2001
From: Tanmay Jagdale <tanmayj@broadcom.com>
Date: Tue, 7 Oct 2014 10:18:18 +0530
Subject: [PATCH 0584/1532] dts: updated the dts files

 - Update the xlp2xx and xlp3xx XMC dts files.
 - Updated the 2xx and 5xx pcie dts files.
 - Updated spi compatible property in xlp9xx and xlp5xx.
 - Added missing parameters in dts files.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp2xx-ep-linux-kernel.dts   | 11 +++++++++++
 arch/mips/boot/dts/xlp2xx-pcie-linux-kernel.dts |  6 ++++++
 arch/mips/boot/dts/xlp2xx-xmc-linux-kernel.dts  | 12 ++++++------
 arch/mips/boot/dts/xlp3xx-xmc-linux-kernel.dts  | 12 +++++-------
 arch/mips/boot/dts/xlp5xx-linux-kernel.dts      |  2 +-
 arch/mips/boot/dts/xlp5xx-pcie-linux-kernel.dts |  3 ++-
 arch/mips/boot/dts/xlp9xx-guest.dts             | 23 +++++++++++++++++++++--
 arch/mips/boot/dts/xlp9xx-linux-kernel.dts      |  2 +-
 arch/mips/boot/dts/xlp9xx-linux-mn-kernel.dts   |  6 ++++++
 9 files changed, 59 insertions(+), 18 deletions(-)

diff --git a/arch/mips/boot/dts/xlp2xx-ep-linux-kernel.dts b/arch/mips/boot/dts/xlp2xx-ep-linux-kernel.dts
index 8e9e50b..c67566c 100644
--- a/arch/mips/boot/dts/xlp2xx-ep-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp2xx-ep-linux-kernel.dts
@@ -64,6 +64,11 @@
 			interrupt-parent = <&pic>;
 			interrupts = <31>;
 
+			rtc@68 {
+				compatible = "dallas,ds1374";
+				reg = <0x68>;
+			};
+
 			dtt@2c {
 				compatible = "maxim,max6639";
 				reg = <0x4c>;
@@ -241,4 +246,10 @@
 			smsc,irq-push-pull;
 		};
 	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xff>;
+		netlogic,reserve-mem = <256>;
+	};
 };
diff --git a/arch/mips/boot/dts/xlp2xx-pcie-linux-kernel.dts b/arch/mips/boot/dts/xlp2xx-pcie-linux-kernel.dts
index f281e50..d6563b8 100644
--- a/arch/mips/boot/dts/xlp2xx-pcie-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp2xx-pcie-linux-kernel.dts
@@ -152,4 +152,10 @@
 			smsc,irq-push-pull;
 		};
 	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xff>;
+		netlogic,reserve-mem = <256>;
+	};
 };
diff --git a/arch/mips/boot/dts/xlp2xx-xmc-linux-kernel.dts b/arch/mips/boot/dts/xlp2xx-xmc-linux-kernel.dts
index 21c339d..861c6e1 100644
--- a/arch/mips/boot/dts/xlp2xx-xmc-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp2xx-xmc-linux-kernel.dts
@@ -9,12 +9,6 @@
 	#address-cells = <2>;
 	#size-cells = <2>;
 
-	memory {
-		device_type = "memory";
-		reg =  <0 0x00100000 0 0x0FF00000	// 255M at 1M
-			0 0x20000000 0 0xa0000000>;	// 2560M at 512M
-	};
-
 	soc {
 		#address-cells = <2>;
 		#size-cells = <1>;
@@ -141,4 +135,10 @@
 			interrupt-controller;
 		};
 	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xff>;
+		netlogic,reserve-mem = <128>;
+	};
 };
diff --git a/arch/mips/boot/dts/xlp3xx-xmc-linux-kernel.dts b/arch/mips/boot/dts/xlp3xx-xmc-linux-kernel.dts
index eaacb4e..3ebfc73 100644
--- a/arch/mips/boot/dts/xlp3xx-xmc-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp3xx-xmc-linux-kernel.dts
@@ -9,13 +9,6 @@
 	#address-cells = <2>;
 	#size-cells = <2>;
 
-	memory {
-		device_type = "memory";
-		reg =  <0 0x00100000 0 0x0FF00000	// 255M at 1M
-			0 0x20000000 0 0xa0000000	// 2560M at 512M
-			0 0xe0000000 0 0x40000000>;
-	};
-
 	soc {
 		#address-cells = <2>;
 		#size-cells = <1>;
@@ -147,6 +140,11 @@
 			interrupts = <39>;
 			interrupt-controller;
 		};
+	};
 
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xffff>;
+		netlogic,reserve-mem = <128>;
 	};
 };
diff --git a/arch/mips/boot/dts/xlp5xx-linux-kernel.dts b/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
index 02099c7..b44eef3 100644
--- a/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp5xx-linux-kernel.dts
@@ -101,7 +101,7 @@
 			interrupt-parent = <&pic>;
 
 			spi_nor@1 {
-				compatible = "micron,n25q128a13";
+				compatible = "micron,n25q128";
 				#address-cells = <1>;
 				#size-cells = <1>;
 
diff --git a/arch/mips/boot/dts/xlp5xx-pcie-linux-kernel.dts b/arch/mips/boot/dts/xlp5xx-pcie-linux-kernel.dts
index 05d77d3..c639261 100644
--- a/arch/mips/boot/dts/xlp5xx-pcie-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp5xx-pcie-linux-kernel.dts
@@ -107,7 +107,7 @@
 			interrupt-parent = <&pic>;
 
 			spi_nor@1 {
-				compatible = "micron,n25q128a13";
+				compatible = "micron,n25q128";
 				#address-cells = <1>;
 				#size-cells = <1>;
 
@@ -199,5 +199,6 @@
 
 	chosen {
 		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,reserve-mem = <256>;
 	};
 };
diff --git a/arch/mips/boot/dts/xlp9xx-guest.dts b/arch/mips/boot/dts/xlp9xx-guest.dts
index 02bf9f2..66205ec 100644
--- a/arch/mips/boot/dts/xlp9xx-guest.dts
+++ b/arch/mips/boot/dts/xlp9xx-guest.dts
@@ -35,12 +35,22 @@
 				net@0 {
 					port-mask = <0x4 0x0 0x0 0x0>;
 					frinlifo-mask = <0xffff 0x0 0x0 0x0>;
-					frinlifo-shared-mode = <0x0 0x0 0x0 0x0>;
+					frinlifo-shared-mode = <0 0 0 0>;
 					vfbid-sw-offset = <0x0 0x0 0x0 0x0>;
 					vfbid-sw-entries = <0x0 0x0 0x0 0x0>;
 					ucore-mask = <0x1 0x0 0x0 0x0>;
 					sram-off = <0x0 0x0 0x0 0x0>;
 				};
+
+				net@1 {
+					port-mask = <0x4 0 0 0>;
+					frinlifo-mask = <0xffff 0 0 0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0 0 0 0>;
+					vfbid-sw-entries = <0 0 0 0>;
+					ucore-mask = <0x1 0 0 0>;
+					sram-off = <0 0 0 0>;
+				};
 			};
 
 			dtre {
@@ -66,7 +76,16 @@
 				net@0 {
 					port-mask = <0x3 0x0 0x0 0x0>;
 					frinlifo-mask = <0xff 0x0 0x0 0x0>;
-					frinlifo-shared-mode = <0x0 0x0 0x0 0x0>;
+					frinlifo-shared-mode = <0 0 0 0>;
+					vfbid-sw-offset = <0x0 0x0 0x0 0x0>;
+					vfbid-sw-entries = <0x0 0x0 0x0 0x0>;
+					ucore-mask = <0x2 0x0 0x0 0x0>;
+					sram-off = <0x0 0x0 0x0 0x0>;
+				};
+				net@1 {
+					port-mask = <0x3 0x0 0x0 0x0>;
+					frinlifo-mask = <0xff 0x0 0x0 0x0>;
+					frinlifo-shared-mode = <0 0 0 0>;
 					vfbid-sw-offset = <0x0 0x0 0x0 0x0>;
 					vfbid-sw-entries = <0x0 0x0 0x0 0x0>;
 					ucore-mask = <0x2 0x0 0x0 0x0>;
diff --git a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
index 8518d01..d2e4e5a 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
@@ -107,7 +107,7 @@
 			interrupt-parent = <&pic>;
 
 			spi_nor@1 {
-				compatible = "micron,n25q128a13";
+				compatible = "micron,n25q128";
 				#address-cells = <1>;
 				#size-cells = <1>;
 
diff --git a/arch/mips/boot/dts/xlp9xx-linux-mn-kernel.dts b/arch/mips/boot/dts/xlp9xx-linux-mn-kernel.dts
index 3ab1d69..241e428 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-mn-kernel.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-mn-kernel.dts
@@ -205,4 +205,10 @@
 			};
 		};
 	};
+
+	chosen {
+		bootargs = "console=ttyS0,115200 rdinit=/sbin/init";
+		netlogic,cpumask = <0xffffffff 0xffffffff>;
+		netlogic,reserve-mem = <256 256>;
+	};
 };
-- 
1.9.1

