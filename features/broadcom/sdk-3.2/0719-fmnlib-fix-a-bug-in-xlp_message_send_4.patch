From 65c36cb13ca0ea18a3b36132ce9c796f25ddbd9b Mon Sep 17 00:00:00 2001
From: Yonghong Song <ysong@broadcom.com>
Date: Sun, 30 Jun 2013 21:51:17 -0700
Subject: [PATCH 0719/1532] fmnlib: fix a bug in xlp_message_send_4

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_dp.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_dp.h b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_dp.h
index 9685906..255e0bb 100644
--- a/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_dp.h
+++ b/arch/mips/netlogic/lib/fmnlib/nlm_hal_fmn_dp.h
@@ -390,9 +390,9 @@ static inline int xlp_message_send_4(uint32_t dst,
   xlp_load_tx_msg0(data0);
   xlp_load_tx_msg1(data1);
   xlp_load_tx_msg2(data2);
-  xlp_load_tx_msg2(data3);
+  xlp_load_tx_msg3(data3);
 
-  dest = ((code << 24) | (2 << 16) | dst);
+  dest = ((code << 24) | (3 << 16) | dst);
 
 #ifdef MSGRING_DUMP_MESSAGES
   nlm_hal_dbg_msg("Sending msg<%llx, %llx, %llx, %llx> to dest = %x\n", 
-- 
1.9.1

