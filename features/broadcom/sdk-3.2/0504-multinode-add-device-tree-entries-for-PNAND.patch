From 2bed4b64ada914dc6edde376979e82d0533278c8 Mon Sep 17 00:00:00 2001
From: Jayachandran C <jchandra@broadcom.com>
Date: Fri, 4 Apr 2014 21:30:38 +0530
Subject: [PATCH 0504/1532] multinode: add device tree entries for PNAND

Add DT entries for XLP8xx PNAND in multinode configurations.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts  | 26 ++++++++++++++++++++++++++
 arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts | 26 ++++++++++++++++++++++++++
 2 files changed, 52 insertions(+)

diff --git a/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
index b7caa56..4ed00f3 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
@@ -97,6 +97,32 @@
 			};
 		};
 
+		nand_flash@0,0 {
+			compatible = "netlogic,xlp-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x39000 0x1000>;
+
+			interrupts = <43>;
+			interrupt-parent = <&pic0>;
+			nand-ecc-mode = "hw";
+
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
+			};
+
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
+
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
+			};
+		};
+
 		gpio0: xlp_gpio@34000 {
 			compatible = "netlogic,xlp-gpio";
 			reg = <0 0x34100 0x1000>;
diff --git a/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
index 6fb855d..a0bc942 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
@@ -97,6 +97,32 @@
 			};
 		};
 
+		nand_flash@0,0 {
+			compatible = "netlogic,xlp-nand";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			reg = <0 0x39000 0x1000>;
+
+			interrupts = <43>;
+			interrupt-parent = <&pic0>;
+			nand-ecc-mode = "hw";
+
+			partition@0 {
+				label = "firmware";
+				reg = <0x0 0x20000000>;
+			};
+
+			partition@1 {
+				label = "kernel";
+				reg = <0x20000000 0x20000000>;
+			};
+
+			partition@2 {
+				label = "user";
+				reg = <0x40000000 0x0>;
+			};
+		};
+
 		gpio0: xlp_gpio@34000 {
 			compatible = "netlogic,xlp-gpio";
 			reg = <0 0x34100 0x1000>;
-- 
1.9.1

