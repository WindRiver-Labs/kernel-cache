From c3ccde996524731a166739bd526c9d08939f543c Mon Sep 17 00:00:00 2001
From: reshmic <reshmic@broadcom.com>
Date: Mon, 22 Jul 2013 22:35:40 +0530
Subject: [PATCH 1531/1532] crypto: Added openssl

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/seclib/cryptodev.h         | 11 ++++-------
 arch/mips/netlogic/lib/seclib/cryptosoc_lib_ifc.h | 19 +++++++++++++++++--
 2 files changed, 21 insertions(+), 9 deletions(-)

diff --git a/arch/mips/netlogic/lib/seclib/cryptodev.h b/arch/mips/netlogic/lib/seclib/cryptodev.h
index b5ac10c..ec4bd67 100644
--- a/arch/mips/netlogic/lib/seclib/cryptodev.h
+++ b/arch/mips/netlogic/lib/seclib/cryptodev.h
@@ -36,9 +36,7 @@
 #ifndef _NLM_CRYPTO_DEV_H
 #define _NLM_CRYPTO_DEV_H
 
-#include <errno.h>
-#include <sys/eventfd.h>
-#include <poll.h>
+
 
 #define NLM_CRYPTO_DEV_NAME "nlmcrypto"
 
@@ -47,10 +45,9 @@
 #define NLM_CRYPTO_CTXT_ALLOC			_IOWR(NLM_CRYPTO_IOC, 1, unsigned long long)
 #define NLM_CRYPTO_CTXT_FREE			_IOWR(NLM_CRYPTO_IOC, 2, unsigned long long)
 #define NLM_CRYPTO_GET_RX_VC_NUMS 		_IOWR(NLM_CRYPTO_IOC, 3, unsigned int)
-#define NLM_CRYPTO_GET_COMMON_SHM_ADDR_SZ 	_IOWR(NLM_CRYPTO_IOC, 4, unsigned long long)
-#define NLM_CRYPTO_GET_SAE_VC_NUMS		_IOWR(NLM_CRYPTO_IOC, 5, unsigned int)
-#define NLM_CRYPTO_GET_RSA_VC_NUMS		_IOWR(NLM_CRYPTO_IOC, 6, unsigned int)
-#define NLM_CRYPTO_GET_CHIP_FEATURE		_IOWR(NLM_CRYPTO_IOC, 7, unsigned int)
+#define NLM_CRYPTO_GET_SAE_VC_NUMS		_IOWR(NLM_CRYPTO_IOC, 4, unsigned int)
+#define NLM_CRYPTO_GET_RSA_VC_NUMS		_IOWR(NLM_CRYPTO_IOC, 5, unsigned int)
+#define NLM_CRYPTO_GET_CHIP_FEATURE		_IOWR(NLM_CRYPTO_IOC, 6, unsigned int)
 
 
 /* How many pages for the context response maintainance ,
diff --git a/arch/mips/netlogic/lib/seclib/cryptosoc_lib_ifc.h b/arch/mips/netlogic/lib/seclib/cryptosoc_lib_ifc.h
index 3bd54a2..8a983f2 100644
--- a/arch/mips/netlogic/lib/seclib/cryptosoc_lib_ifc.h
+++ b/arch/mips/netlogic/lib/seclib/cryptosoc_lib_ifc.h
@@ -30,8 +30,7 @@
 #ifndef _CRYPTOSOC_LIB_IFC_H
 #define _CRYPTOSOC_LIB_IFC_H
 
-#include "nlm_cmem.h"
-extern void **cmem_pgd;
+
 
 /* This app is going to support on all the processor varients */
 #define SAESOC_PTYPE_GEN_ALL_SUPPORT
@@ -54,6 +53,12 @@ extern void **cmem_pgd;
 #define CRYPTOSOC_MAX_PENDING_REQS_PER_CTX 64
 #define CRYPTOSOC_CTX_APP_PRIV_SZ   64
 
+#ifdef NLM_HAL_LINUX_USER
+
+#include "nlm_cmem.h"
+#include <assert.h>
+extern void **cmem_pgd;
+
 /* for control, packet descriptors and rsa request and result */
 static inline _uint64_t cryptosoc_virt_to_phys(unsigned long vaddr)
 {
@@ -70,4 +75,14 @@ static inline unsigned long cryptosoc_phys_to_virt(_uint64_t paddr)
 	return nlm_cmem_pa_to_va(cmem_pgd, paddr);
 }
 
+#else /*NLM_HAL_LINUX_USER*/
+static inline _uint64_t cryptosoc_virt_to_phys(unsigned long vaddr)
+{
+	return 0ULL;
+}
+static inline unsigned long cryptosoc_phys_to_virt(_uint64_t paddr)
+{
+	return 0UL;
+}
+#endif
 #endif
-- 
1.9.1

