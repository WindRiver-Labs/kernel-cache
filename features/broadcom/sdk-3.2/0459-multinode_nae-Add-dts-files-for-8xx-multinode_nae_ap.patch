From 4e34b50397337f7b0cd70cec6782fbef23f8dd7b Mon Sep 17 00:00:00 2001
From: Pavani Reddy <pavani@broadcom.com>
Date: Fri, 29 Nov 2013 18:39:38 +0530
Subject: [PATCH 0459/1532] multinode_nae: Add dts files for 8xx
 multinode_nae_app.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts | 32 +++++++++++++++++++++--------
 1 file changed, 23 insertions(+), 9 deletions(-)

diff --git a/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts b/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
index dafea20..46a4ffb 100644
--- a/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
+++ b/arch/mips/boot/dts/mnxlp8xx-helinux-nae.dts
@@ -11,10 +11,11 @@
 	/*memory range for linux. This will not appear in dom0*/
         memory {
                 device_type = "memory";
-                reg =  <0 0x01000000 0 0x0B000000   
+                reg =  <0 0x00000000 0 0x0B000000   
                         0 0x20000000 0 0xa0000000
                         0 0xe0000000 0 0x20000000
-                        0x2 0x80000000 0 0x80000000>;
+                        0x2 0x80000000 0 0x80000000
+						0x4 0x80000000 0 0x80000000>;
         };
 	
 	hypervisor {
@@ -23,6 +24,17 @@
 		bootargs = "ncores=8 dom0_loadaddr=0x72000000 dom0_size=0x1c000000 dom0_cpumask=0x0f -- ";
 		domain_heap = <0xf0000000 0xc0000000>; /* 3584MB -> 6656MB */
 	};
+	/* memory range for HEv2 pkt mem. Only one contig memory per node supported */
+	pktmem {
+		    device_type = "pktmem";
+
+	               /* format: node number, 64-bit addr, 64-bit size */
+	         reg = <0 0 0x80000000 0 0x08000000
+	                1 0x0 0x0 0x0 0x0
+	                2 0x0 0x0 0x0 0x0
+	                3 0x0 0x0 0x0 0x0>;
+			        };
+
 	doms {
 		#address-cells = <1>;
 		#size-cells = <1>;
@@ -82,7 +94,7 @@
 				nae = <0x0>;
 				sae = <0x1>;   // for node0
 				rsa = <0x1>;
-				fmn = <0xf>;
+				fmn = <0x3>;
 			};
 		};
 		dom@1 {
@@ -125,12 +137,12 @@
 				nae = <0x3>;   // currently for node0 and node1
 				sae = <0x1>;   // for node0
 				rsa = <0x1>;
-				fmn = <0xf>;
+				fmn = <0x0>;
 			};
 			app-param{
-				onlinemask = <0xffffffff>;
-				enable_ici_pkt_traffic = <1>;
-/*
+				onlinemask = <0xffffffff 0xffffffff>;
+				enable_ici_pkt_traffic = <0>;
+				
 				//Enable this for mode #1 and #2 Local Node Memory - For 16G+16G
 				nae_0_pkt_pool_start = <0x140>;	//Multiple of 16MB
 				nae_0_pkt_pool_size = <0x1000000>;
@@ -138,6 +150,7 @@
 				nae_1_pkt_pool_size = <0x1000000>;
 
 				
+/*
 				//Enable this for mode #1 and #2 Local Node Memory - For 16G+16G
 				nae_0_pkt_pool_start = <0x140>;	//Multiple of 16MB
 				nae_0_pkt_pool_size = <0x1000000>;
@@ -151,7 +164,6 @@
 				nae_0_pkt_pool_size = <0x1000000>;
 				nae_1_pkt_pool_start = <0x241>;	//Multiple of 16MB
 				nae_1_pkt_pool_size = <0x1000000>;
-*/
 
 				//Enable this for mode #3 Remote Node Memory  - For 8G+8G
 				nae_0_pkt_pool_start = <0x241>;	//Multiple of 16MB
@@ -159,11 +171,13 @@
 				nae_1_pkt_pool_start = <0x140>;	//Multiple of 16MB
 				nae_1_pkt_pool_size = <0x1000000>;
 
+*/
 			};
 		};
 	};
 
 	chosen {
+		netlogic,cpumask = <0xffffffff 0xffffffff>;
 		bootargs = " console=ttyS0,115200";
 	};
 
@@ -185,7 +199,7 @@
 
 	soc {
 		nodes {
-			num-nodes = <2>;
+		num-nodes = <2>;
 		};
 	};
 	frequency-config {
-- 
1.9.1

