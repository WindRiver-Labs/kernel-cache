From 69d4c4f3d29b84eb65a56c0ac63915a8e1104044 Mon Sep 17 00:00:00 2001
From: Pavani Reddy <pavani@broadcom.com>
Date: Wed, 17 Dec 2014 13:30:19 +0530
Subject: [PATCH 1474/1532] Nae : Register cpu handlers based on no of cores
 available

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/broadcom/nae/xlpge_rx.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/broadcom/nae/xlpge_rx.c b/drivers/net/ethernet/broadcom/nae/xlpge_rx.c
index 6baca68..b74309e 100644
--- a/drivers/net/ethernet/broadcom/nae/xlpge_rx.c
+++ b/drivers/net/ethernet/broadcom/nae/xlpge_rx.c
@@ -1171,7 +1171,11 @@ int nlm_xlp_enable_napi(void)
 	}
 	if(is_nlm_xlp9xx())
 		end = XLP_MSG_HANDLE_CPU19;
-	else 
+	else if(is_nlm_xlp2xx())
+		end = XLP_MSG_HANDLE_CPU1;
+	else if(is_nlm_xlp3xx())
+		end = XLP_MSG_HANDLE_CPU3;
+	else
 		end = XLP_MSG_HANDLE_CPU7;
 	/* register for p2p freeback handler */
 	printk("Registering P2P freeback vc handler....\n");
-- 
1.9.1

