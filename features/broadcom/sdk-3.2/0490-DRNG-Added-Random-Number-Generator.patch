From f30038052852da788f59480fa4a2d1637f61a6c4 Mon Sep 17 00:00:00 2001
From: Subhendu Sekhar Behera <sbehera@broadcom.com>
Date: Wed, 19 Feb 2014 21:36:53 +0530
Subject: [PATCH 0490/1532] DRNG: Added Random Number Generator

Signed-off-by: Prem Mallappa <pmallapp@broadcom.com>
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp2xx-ep-linux-tmpl.dts   |  5 +++++
 arch/mips/boot/dts/xlp2xx-linux-tmpl.dts      |  5 +++++
 arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts |  5 +++++
 arch/mips/boot/dts/xlp2xx-xmc-linux-tmpl.dts  |  5 +++++
 arch/mips/boot/dts/xlp3xx-linux-tmpl.dts      |  5 +++++
 arch/mips/boot/dts/xlp3xx-xmc-linux-tmpl.dts  |  5 +++++
 arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts   | 10 ++++++++++
 arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts  | 19 +++++++++++++++++++
 arch/mips/boot/dts/xlp8xx-linux-tmpl.dts      |  5 +++++
 arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts   |  5 +++++
 arch/mips/boot/dts/xlp9xx-linux-tmpl.dts      |  5 +++++
 11 files changed, 74 insertions(+)

diff --git a/arch/mips/boot/dts/xlp2xx-ep-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-ep-linux-tmpl.dts
index 75f4adf..d3d288e 100644
--- a/arch/mips/boot/dts/xlp2xx-ep-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-ep-linux-tmpl.dts
@@ -90,6 +90,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
index 9e97361..dd22687 100644
--- a/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux-tmpl.dts
@@ -90,6 +90,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
index 10b54ef..461388a 100644
--- a/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-pcie-linux-tmpl.dts
@@ -90,6 +90,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nand_flash@0,0 {
 			compatible = "netlogic,xlp-nand";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp2xx-xmc-linux-tmpl.dts b/arch/mips/boot/dts/xlp2xx-xmc-linux-tmpl.dts
index 6c25d68..bdc875a 100644
--- a/arch/mips/boot/dts/xlp2xx-xmc-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp2xx-xmc-linux-tmpl.dts
@@ -90,6 +90,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nand_flash@0,0 {
 			compatible = "netlogic,xlp-nand";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
index d6b6fa0..22efb22 100644
--- a/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp3xx-linux-tmpl.dts
@@ -91,6 +91,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp3xx-xmc-linux-tmpl.dts b/arch/mips/boot/dts/xlp3xx-xmc-linux-tmpl.dts
index 6efe2bd..335c26b 100644
--- a/arch/mips/boot/dts/xlp3xx-xmc-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp3xx-xmc-linux-tmpl.dts
@@ -92,6 +92,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nand_flash@0,0 {
 			compatible = "netlogic,xlp-nand";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
index 9e233cf..b7caa56 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-mn-tmpl.dts
@@ -29,6 +29,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		serial00: serial@30000 {
 			device_type = "serial";
 			compatible = "ns16550";
@@ -113,6 +118,11 @@
 			interrupt-controller;
 		};
 
+		rng@1 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x6a000 0x30>;
+		};
+
 		serial10: serial@70000 {
 			device_type = "serial";
 			compatible = "ns16550";
diff --git a/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
index 031a2b5..6fb855d 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-mn4-tmpl.dts
@@ -29,6 +29,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		serial00: serial@30000 {
 			device_type = "serial";
 			compatible = "ns16550";
@@ -113,6 +118,11 @@
 			interrupt-controller;
 		};
 
+		rng@1 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x6a000 0x30>;
+		};
+
 		serial10: serial@70000 {
 			device_type = "serial";
 			compatible = "ns16550";
@@ -152,6 +162,11 @@
 			reg = <0 0x84000 0x200>;
 		};
 
+		rng@2 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0xaa000 0x30>;
+		};
+
 		pic3: pic@c4000 {
 			compatible = "netlogic,xlp-pic";
 			interrupt-controller;
@@ -159,6 +174,10 @@
 			#interrupt-cells = <1>;
 			reg = <0 0xc4000 0x200>;
 		};
+		rng@3 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0xea000 0x30>;
+		};
 	};
 
 	chosen {
diff --git a/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts
index 59f121a..13d42e6 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-tmpl.dts
@@ -91,6 +91,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x2a000 0x30>;
+		};
+
 		nor_flash@1,0 {
 			compatible = "cfi-flash";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts b/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
index 8c239f29..44a1ca5 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-mn-tmpl.dts
@@ -37,6 +37,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x12a000 0x80>;
+		};
+
 		i2c0: i2c@113100 {
 			compatible = "netlogic,xlp9xx-i2c";
 			#address-cells = <1>;
diff --git a/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts b/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
index 642fb64..2b43c32 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-tmpl.dts
@@ -53,6 +53,11 @@
 			compatible = "netlogic,nlm-wdt";
 		};
 
+		rng@0 {
+			compatible = "netlogic,nlm-drng";
+			reg = <0 0x12a000 0x80>;
+		};
+
 		i2c0: i2c@113100 {
 			compatible = "netlogic,xlp9xx-i2c";
 			#address-cells = <1>;
-- 
1.9.1

