From 97995da71d077439a6623ef927c366c2775db6f2 Mon Sep 17 00:00:00 2001
From: Sreenidhi B R <sreenira@broadcom.com>
Date: Thu, 24 Jul 2014 12:22:55 +0530
Subject: [PATCH 0994/1532] poe: fixed poe reset sequence, updated from correct
 git branch.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/netlib/include/netsoc_poe.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/arch/mips/netlogic/lib/netlib/include/netsoc_poe.h b/arch/mips/netlogic/lib/netlib/include/netsoc_poe.h
index 7d001b8..2226516 100644
--- a/arch/mips/netlogic/lib/netlib/include/netsoc_poe.h
+++ b/arch/mips/netlogic/lib/netlib/include/netsoc_poe.h
@@ -307,20 +307,20 @@ static inline void __netsoc_reset_poe(poe_t *poe)
         else
                 reset_bit = 10;
 
-	netsoc_api_print(NETSOC_APIDBG_DEFAULT, "%s %d\n",__func__, __LINE__);
 
         /* POE reset in the SYS_RESET register */
         nlm_hal_write_sys_reg(poe->node, SYS_RESET, (1 << reset_bit));
         nlm_mdelay(1);
 
-	netsoc_api_print(NETSOC_APIDBG_DEFAULT, "%s %d\n",__func__, __LINE__);
         nlm_hal_write_sys_reg(poe->node, SYS_RESET, (0 << reset_bit));
         nlm_mdelay(1);
 
 	if (is_nlm_xlp9xx_ax())
 	{
-		netsoc_api_print(NETSOC_APIDBG_DEFAULT, "%s %d\n",__func__, __LINE__);
 		netsoc_write_poe_pcie_reg(poe_pcie_base, POE_RESET, 0x1);
+		nlm_mdelay(1);
+		netsoc_write_poe_pcie_reg(poe_pcie_base, POE_RESET, 0x0);
+		nlm_mdelay(1);
 	}
 
         return;
-- 
1.9.1

