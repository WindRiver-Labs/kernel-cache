From 3f9e17dd2e975d2d71395c2b739d7bee38a5fa1f Mon Sep 17 00:00:00 2001
From: Saswat Dash <saswat.dash@broadcom.com>
Date: Mon, 27 Jan 2014 10:27:07 +0530
Subject: [PATCH 0883/1532] NAE: Modified check for nae-rx-cpu-mask extraction

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
index 6aa533b..78db869 100644
--- a/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
+++ b/arch/mips/netlogic/lib/netlib/src/netsoc_fdt.c
@@ -454,7 +454,7 @@ start_for_dom:
 	if (nodeoffset >= 0) {
 		pval = (unsigned int *)fdt_getprop(fdt, nodeoffset, "nae-rx-cpu-mask", &plen);
 	}
-        if ((nodeoffset < 0) || (!plen)) {
+        if ((nodeoffset < 0) || (!pval) || (!plen)) {
 		sprintf(dom_node_str, "/doms/dom@%d/cpu", domid);
 		nodeoffset = fdt_path_offset(fdt, dom_node_str);
 		if (nodeoffset >= 0) {
-- 
1.9.1

