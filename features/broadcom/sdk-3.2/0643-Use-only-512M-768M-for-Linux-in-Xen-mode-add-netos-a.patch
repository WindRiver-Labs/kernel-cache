From ff51f0df1a0b3caeebfffde6131c8c0ac00fb4b9 Mon Sep 17 00:00:00 2001
From: Venu Vadapalli <vvadapalli@netlogicmicro.com>
Date: Wed, 11 Aug 2010 16:12:01 -0700
Subject: [PATCH 0643/1532] Use only 512M->768M for Linux in Xen mode, add
 netos autoboot commands

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 dts/sysconfig-xen.dts | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

diff --git a/dts/sysconfig-xen.dts b/dts/sysconfig-xen.dts
index 25a0810..db01f6c 100644
--- a/dts/sysconfig-xen.dts
+++ b/dts/sysconfig-xen.dts
@@ -14,7 +14,7 @@
 		hypervisor-name = "Xen";
 		cpu_possible_map = <0xff>;
 		is_dom0_hvm = <1>;
-		bootargs = "dom0_loadaddr=0x09000000 dom0_cpumask=0x01 -- ";
+		bootargs = "ncores=1 dom0_loadaddr=0x09000000 dom0_cpumask=0x01 -- ";
 	};
 	doms {
 		#address-cells = <1>;
@@ -34,7 +34,7 @@
 			};
 			memory {
 				reg = <0x04000000 0x0C000000	// 192M at 64M
-					0x20000000 0x20000000>;  // 512M at 512M
+					0x20000000 0x10000000>;  // 512M at 512M
 			};
 			pic {
 			};
@@ -43,14 +43,17 @@
 			device_type = "domain";
 			os = "netos";
 
-			heap-size = <0x0 0x4000000>;
-			shared-mem = <0x0 0x80000000 0x0 0x20000000>;
+			heap-size = <0x0 0x4000000>;                   // 64M
+			shared-mem = <0x0 0x80000000 0x0 0x20000000>;  // 512M @ 2GB
 
 			#address-cells = <1>;
 			#size-cells = <1>;
 
+			app-bootcmd = "ampload";
+			app-loadaddr = "0x47000000";
+
 			cpu {
-				onlinemask = <0x10>;
+				onlinemask = <0x08>;
 			};
 			uart {
 				id = <1>;
-- 
1.9.1

