From 49977f659726f051f9bc8709042eb8a08830dcaf Mon Sep 17 00:00:00 2001
From: Vikas Gupta <vikas.gupta@broadcom.com>
Date: Thu, 3 Oct 2013 11:13:59 -0700
Subject: [PATCH 0418/1532] xlp9xx: configuring the complexes in xgmac.

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp9xx-tiny.dts | 96 ++++++++++++++++++++++++++++++++------
 1 file changed, 82 insertions(+), 14 deletions(-)

diff --git a/arch/mips/boot/dts/xlp9xx-tiny.dts b/arch/mips/boot/dts/xlp9xx-tiny.dts
index d08c202..e672a65 100644
--- a/arch/mips/boot/dts/xlp9xx-tiny.dts
+++ b/arch/mips/boot/dts/xlp9xx-tiny.dts
@@ -70,7 +70,7 @@
 						>;
 				};
 				complex@0 {
-					mode = "xgmac"; /* sgmii only */
+					mode = "xgmac"; 
 					cpld = "yes";
 				      xgmac {                          /* valid when mode = xaui, rxaui or xfi */
 
@@ -90,8 +90,30 @@
 
 				};
 
+			complex@1 {
+					mode = "xgmac"; 
+					cpld = "yes";
+				      xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+
+						loopback = <0>;             /* loopback = 0 or 1 */
+						num-channels = <1>;         /* num-channels = 1 to 8 */
+						num-free-descs = <150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+						free-desc-size = <2048>;    /* descriptor size */
+						higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+						xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+						vlan-pri-en = <0x0>;        /* VLAN priority enable = 0 or 1 */
+
+						/* rxaui specific params*/
+						submode  = <2>;             /* 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell */
+						scrambler  = <0>;           /* scrambler disable = 0, enable = 1 */
+
+					};
+
+				};
+
+
 				complex@2 {
-					mode = "sgmii"; /* sgmii only */
+					mode = "sgmii"; 
 					sgmii {
 						loopback = <0>;                   /* loopback = 0 or 1 */
 						mgmt-port = <1>;                  /* num-channels = 1 to 8 */
@@ -138,20 +160,66 @@
         	        >;
 	        };
 
-			complex@0 {
-				mode = "sgmii"; /* sgmii only */
-
-				sgmii {                                      /* valid when mode = sgmii */
-					loopback = <0 0 0 0>;                   /* loopback = 0 or 1 */
-					mgmt-port = <0 0 0 0>;                  /* num-channels = 1 to 8 */
-					ext-phy-addr = <8 9 10 11>;               /* phy address for each port */
-					ext-phy-bus = <0 0 0 0>;                /* phy bus numbers */
-					num-channels = <1 1 1 1>;               /* num-channels = 1 to 8 */
-					num-free-descs = <52 52 52 52>;         /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
-					free-desc-size = <2048 2048 2048 2048>; /* descriptor size */
+
+		complex@0 {
+					mode = "xgmac"; 
+					cpld = "yes";
+				      xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+
+						loopback = <0>;             /* loopback = 0 or 1 */
+						num-channels = <1>;         /* num-channels = 1 to 8 */
+						num-free-descs = <150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+						free-desc-size = <2048>;    /* descriptor size */
+						higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+						xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+						vlan-pri-en = <0x0>;        /* VLAN priority enable = 0 or 1 */
+
+						/* rxaui specific params*/
+						submode  = <2>;             /* 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell */
+						scrambler  = <0>;           /* scrambler disable = 0, enable = 1 */
+
+					};
+
 				};
 
-			};
+			complex@1 {
+					mode = "xgmac"; 
+					cpld = "yes";
+				      xgmac {                          /* valid when mode = xaui, rxaui or xfi */
+
+						loopback = <0>;             /* loopback = 0 or 1 */
+						num-channels = <1>;         /* num-channels = 1 to 8 */
+						num-free-descs = <150>;     /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+						free-desc-size = <2048>;    /* descriptor size */
+						higig-mode = <0>;           /* 0=NO_HIGIG, 1=HIGIG, 2=HIGIG2 */
+						xgmii-speed = <10>;         /* 10=10G , 12=12G, 16=16G */
+						vlan-pri-en = <0x0>;        /* VLAN priority enable = 0 or 1 */
+
+						/* rxaui specific params*/
+						submode  = <2>;             /* 0:xaui 1:rxaui.xaui 2:rxaui.broadcom 3:rxaui.marvell */
+						scrambler  = <0>;           /* scrambler disable = 0, enable = 1 */
+
+					};
+
+				};
+
+				complex@2 {
+					mode = "sgmii"; /* sgmii only */
+					sgmii {
+						loopback = <0>;                   /* loopback = 0 or 1 */
+						mgmt-port = <1>;                  /* num-channels = 1 to 8 */
+						ext-phy-addr = <0>;               /* phy address for each port */
+						ext-phy-bus = <0>;                /* phy bus numbers */
+						num-channels = <1>;               /* num-channels = 1 to 8 */
+						num-free-descs = <52>;            /* Number of free descriptors, per port, if free in lifo is not in shared mode*/
+						free-desc-size = <2048>;          /* descriptor size */
+						};
+					};
+
+
+
+
+
 	};	
 
 	poe-1{
-- 
1.9.1

