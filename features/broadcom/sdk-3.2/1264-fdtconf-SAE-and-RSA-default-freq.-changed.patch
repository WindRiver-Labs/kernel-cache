From 8b913e301c752ec907fb3c91db9ff1a197a0ab22 Mon Sep 17 00:00:00 2001
From: Tanmay Jagdale <tanmayj@broadcom.com>
Date: Mon, 22 Dec 2014 14:30:35 +0530
Subject: [PATCH 1264/1532] fdtconf: SAE and RSA default freq. changed

Updated the default frequency of SAE and RSA engines to 767 Mhz
for XLP9XX family chips.
[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/misc/netlogic/fdtconf/fdtconf.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

diff --git a/drivers/misc/netlogic/fdtconf/fdtconf.c b/drivers/misc/netlogic/fdtconf/fdtconf.c
index 9465e99..bac1587 100644
--- a/drivers/misc/netlogic/fdtconf/fdtconf.c
+++ b/drivers/misc/netlogic/fdtconf/fdtconf.c
@@ -66,7 +66,9 @@
 #define	NAE_FREQ	500
 #define	NAE_2XX_FREQ	400
 #define	SAE_FREQ	500
+#define	SAE_9XX_FREQ	767
 #define	RSA_FREQ	500
+#define	RSA_9XX_FREQ	767
 #define	DTRE_FREQ	500
 #define	CDE_FREQ	250
 
@@ -274,14 +276,20 @@ static void set_default_device_frequency(void)
 	/* SAE Frequency */
 	prop = fdt_getprop(fdt, node, "sae", &plen);
 	if ((*prop == 0) || (prop == NULL)) {
-		val = cpu_to_fdt32(SAE_FREQ);
+		if (is_nlm_xlp9xx() || is_nlm_xlp5xx())
+			val = cpu_to_fdt32(SAE_9XX_FREQ);
+		else
+			val = cpu_to_fdt32(SAE_FREQ);
 		fdt_setprop(fdt, node, "sae", &val, sizeof(val));
 	}
 
 	/* RSA Frequency */
 	prop = fdt_getprop(fdt, node, "rsa", &plen);
 	if ((*prop == 0) || (prop == NULL)) {
-		val = cpu_to_fdt32(RSA_FREQ);
+		if (is_nlm_xlp9xx() || is_nlm_xlp5xx())
+			val = cpu_to_fdt32(RSA_9XX_FREQ);
+		else
+			val = cpu_to_fdt32(RSA_FREQ);
 		fdt_setprop(fdt, node, "rsa", &val, sizeof(val));
 	}
 
-- 
1.9.1

