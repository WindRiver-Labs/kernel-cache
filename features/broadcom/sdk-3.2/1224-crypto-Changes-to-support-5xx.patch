From 3d4df7b4b9572887d896764b0f3ccd2391100b65 Mon Sep 17 00:00:00 2001
From: Hareesh R <hareeshr@broadcom.com>
Date: Thu, 15 May 2014 14:09:10 +0530
Subject: [PATCH 1224/1532] crypto:Changes to support 5xx

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/misc/netlogic/nlmcrypto/cryptodrv.c |  2 +-
 drivers/misc/netlogic/nlmcrypto/init.c      | 12 ++++++------
 2 files changed, 7 insertions(+), 7 deletions(-)

diff --git a/drivers/misc/netlogic/nlmcrypto/cryptodrv.c b/drivers/misc/netlogic/nlmcrypto/cryptodrv.c
index a49fc99..83e911f 100644
--- a/drivers/misc/netlogic/nlmcrypto/cryptodrv.c
+++ b/drivers/misc/netlogic/nlmcrypto/cryptodrv.c
@@ -457,7 +457,7 @@ static long crypto_driver_ioctl(struct file *filp, unsigned int cmd,
 			uint32_t *ptr = (uint32_t *) arg;
 			int chip_type = 1;
 
-			if(is_nlm_xlp9xx())
+			if(IS_NLM_XLP9XX_FAMILY)
 				chip_type = 2;
 			else if(is_nlm_xlp2xx())
 				chip_type = 5; //both 0 and 2nd bit set
diff --git a/drivers/misc/netlogic/nlmcrypto/init.c b/drivers/misc/netlogic/nlmcrypto/init.c
index 13c40a1..eeea039 100644
--- a/drivers/misc/netlogic/nlmcrypto/init.c
+++ b/drivers/misc/netlogic/nlmcrypto/init.c
@@ -87,7 +87,7 @@ int rsa_init(struct nlm_rsa_init_param *p)
 	int i;
 #endif
 
-	if(is_nlm_xlp9xx())
+	if(IS_NLM_XLP9XX_FAMILY)
 		size = sizeof(rsasoc_gen2_ucode_data);
 	else
 		size = sizeof(rsasoc_gen1_ucode_data);
@@ -111,13 +111,13 @@ int rsa_init(struct nlm_rsa_init_param *p)
 	
 #ifdef __MIPSEL__
 	for(i = 0; i < (size / sizeof(uint64_t)); i++) {
-		if(is_nlm_xlp9xx())
+		if(IS_NLM_XLP9XX_FAMILY)
 			rsasoc_gen2_ucode_data[i] = ccpu_to_be64(rsasoc_gen2_ucode_data[i]);
 		else
 			rsasoc_gen1_ucode_data[i] = ccpu_to_be64(rsasoc_gen1_ucode_data[i]);
 	}
 #endif
-	if(is_nlm_xlp9xx())
+	if(IS_NLM_XLP9XX_FAMILY)
 		memcpy(src, (unsigned char*)rsasoc_gen2_ucode_data, size);
 	else
 		memcpy(src, (unsigned char*)rsasoc_gen1_ucode_data, size);
@@ -139,7 +139,7 @@ int rsa_init(struct nlm_rsa_init_param *p)
 
 
 		for(dstvc = rsa_vc_base; dstvc <= rsa_vc_limit; dstvc++) {
-			if (is_nlm_xlp9xx() ) {
+			if (IS_NLM_XLP9XX_FAMILY) {
 				if ( dstvc != rsa_vc_base )
 					continue;
 			}
@@ -194,7 +194,7 @@ cont_recv:
 		msg1 = rsasoc_gen1_form_fmn_entry1(0, 0, fbvc, (uint64_t)virt_to_phys(dst));
 
 		for(dstvc = rsa_vc_base; dstvc <= rsa_vc_limit; dstvc++) {
-			if (is_nlm_xlp9xx() ) {
+			if (IS_NLM_XLP9XX_FAMILY ) {
 				if ( dstvc != rsa_vc_base )
 					continue;
 			}
@@ -213,7 +213,7 @@ cont_recv:
         //nlm_hal_set_rsa_freq(p->node, p->freq);
         nlm_hal_set_rsa_engine_sel(p->node);
 
-	if ((is_nlm_xlp9xx()) && rsa_data_fmt_is_ssl)
+	if ((IS_NLM_XLP9XX_FAMILY) && rsa_data_fmt_is_ssl)
 		nlm_hal_set_rsa_data_mode(p->node, 0);
 
 err_exit:
-- 
1.9.1

