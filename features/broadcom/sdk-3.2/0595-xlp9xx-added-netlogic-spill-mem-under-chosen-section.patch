From ca08efbcd7fc6d28fdaabb939c174c5b0d7a18a8 Mon Sep 17 00:00:00 2001
From: Saswat Kumar Dash <saswat.dash@broadcom.com>
Date: Mon, 1 Dec 2014 21:29:04 -0800
Subject: [PATCH 0595/1532] xlp9xx: added netlogic,spill-mem under chosen/
 section

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi | 2 +-
 arch/mips/boot/dts/xlp9xx-linux-kernel.dts   | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
index aa8af93..4e7f256 100644
--- a/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
+++ b/arch/mips/boot/dts/generic-soc-fmn-ver1.dtsi
@@ -2,7 +2,7 @@ fmn@node-0 {
 	default-credits = <16>;
 	default-queue-size = <12288>;
 	fmn-spill-mem-base = <0x0 0x0>; /*0 - dynamic allocation, only for 64 bit linux */
-	fmn-spill-mem-size = <0x0 0x02000000>;
+	fmn-spill-mem-size = <0x0 0x0>; /* set the size in netlogic,spill-mem under chosen/ section */
 
 	q-config {
 		/*
diff --git a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
index 1bd9cc5..0016710 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
@@ -256,5 +256,6 @@
 		netlogic,cpumask = <0xffffffff 0xffffffff>;
 		netlogic,reserve-mem = <256>;
 		netlogic,frfifo-mem = <256>;
+		netlogic,spill-mem = <32>; /* max spill size : 512 MB*/
 	};
 };
-- 
1.9.1

