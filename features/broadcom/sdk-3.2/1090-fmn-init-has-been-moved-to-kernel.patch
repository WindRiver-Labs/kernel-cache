From a3a2b8d0bf0c901912662d67d9471010e57a36b1 Mon Sep 17 00:00:00 2001
From: Hareesh R <hareesh@netlogicmicro.com>
Date: Tue, 22 Nov 2011 10:05:48 +0530
Subject: [PATCH 1090/1532] fmn init has been moved to kernel

[Based on SDK 3.2]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/misc/netlogic/nae-perf/init_nae.c | 22 ----------------------
 1 file changed, 22 deletions(-)

diff --git a/drivers/misc/netlogic/nae-perf/init_nae.c b/drivers/misc/netlogic/nae-perf/init_nae.c
index db35027..ec31ad9 100644
--- a/drivers/misc/netlogic/nae-perf/init_nae.c
+++ b/drivers/misc/netlogic/nae-perf/init_nae.c
@@ -15,34 +15,12 @@
 
 extern int rely_on_firmware_config;
 
-static void config_fmn(void)
-{
-	unsigned long mflags = 0;
-	struct cpumask cpumask;
-
-	/* bind cpu to n0c0t0 and drain all leftover firmware messages */
-	sched_bindto_save_affinity(0, &cpumask);
-
-	/* Configure FMN again but only cpu credits */
-	msgrng_access_enable(mflags);
-
-//	nlm_xlp_msgring_int_handler(IRQ_MSGRING, NULL);
-
-	/* Configure credits to non-n0c0 cores */
-	nlm_hal_fmn_init(0x10000000, 0x02000000, 50);
-
-	msgrng_access_disable(mflags);
-
-	sched_bindto_restore_affinity(&cpumask);
-}
 
 int initialize_nae(uint32_t cm0, uint32_t cm1, uint32_t cm2, uint32_t cm3)
 {
 	int dom_id = 0;
 	unsigned long mflags;
 
-	config_fmn();
-
 	msgrng_access_enable(mflags);
 	nlm_hal_init_nae(fdt, dom_id);
 
-- 
1.9.1

