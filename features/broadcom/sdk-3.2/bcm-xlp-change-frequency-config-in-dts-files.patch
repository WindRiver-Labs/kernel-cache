From 9d1220582dd948c0128885936e7093b5e5eb0fa7 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Sat, 4 Apr 2015 14:11:17 +0800
Subject: [PATCH 2/2] bcm-xlp: change frequency-config in dts files

In SDK 3.2, the nae's frequency in dts file is 0 by default,
and will be reset in function "set_default_device_frequency"
in file fdtconf.c after booting kernel. But we need to set
this value at the kernel booting so write the value into the
dts file.

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/mips/boot/dts/xlp2xx-linux-kernel.dts |   10 +++++-----
 arch/mips/boot/dts/xlp8xx-linux-kernel.dts |   10 +++++-----
 arch/mips/boot/dts/xlp9xx-linux-kernel.dts |   10 +++++-----
 3 files changed, 15 insertions(+), 15 deletions(-)

diff --git a/arch/mips/boot/dts/xlp2xx-linux-kernel.dts b/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
index 4d6b083..0e088f2 100644
--- a/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp2xx-linux-kernel.dts
@@ -510,11 +510,11 @@
 		 * 'fdtconf' kernel module is loaded at runtime.
 		 * If a value other than 0 is specified, the value is not modified by the module.
 		 */
-		nae = <0>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
-		sae = <0>;	/* Default - 500 Mhz */
-		rsa = <0>;	/* Default - 500 Mhz */
-		dtre = <0>;	/* Default - 500 Mhz */
-		cde = <0>;	/* Default - 250 Mhz */
+		nae = <400>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
+		sae = <500>;	/* Default - 500 Mhz */
+		rsa = <500>;	/* Default - 500 Mhz */
+		dtre = <500>;	/* Default - 500 Mhz */
+		cde = <250>;	/* Default - 250 Mhz */
 	};
 
 };
diff --git a/arch/mips/boot/dts/xlp8xx-linux-kernel.dts b/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
index 9be7a93..8f31280 100644
--- a/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp8xx-linux-kernel.dts
@@ -499,10 +499,10 @@
 		 * 'fdtconf' kernel module is loaded at runtime.
 		 * If a value other than 0 is specified, the value is not modified by the module.
 		 */
-		nae = <0>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
-		sae = <0>;	/* Default - 500 Mhz */
-		rsa = <0>;	/* Default - 500 Mhz */
-		dtre = <0>;	/* Default - 500 Mhz */
-		cde = <0>;	/* Default - 250 Mhz */
+		nae = <500>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
+		sae = <500>;	/* Default - 500 Mhz */
+		rsa = <500>;	/* Default - 500 Mhz */
+		dtre = <500>;	/* Default - 500 Mhz */
+		cde = <250>;	/* Default - 250 Mhz */
 	};
 };
diff --git a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
index 19907a6..3a4aa06 100644
--- a/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
+++ b/arch/mips/boot/dts/xlp9xx-linux-kernel.dts
@@ -586,11 +586,11 @@
 		 * 'fdtconf' kernel module is loaded at runtime.
 		 * If a value other than 0 is specified, the value is not modified by the module.
 		 */
-		nae = <0>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
-		sae = <0>;	/* Default - 500 Mhz */
-		rsa = <0>;	/* Default - 500 Mhz */
-		dtre = <0>;	/* Default - 500 Mhz */
-		cde = <0>;	/* Default - 250 Mhz */
+		nae = <500>;	/* Default - 500 Mhz (400 Mhz for XLP2XX) */
+		sae = <500>;	/* Default - 500 Mhz */
+		rsa = <500>;	/* Default - 500 Mhz */
+		dtre = <500>;	/* Default - 500 Mhz */
+		cde = <250>;	/* Default - 250 Mhz */
 	};
 
 };
-- 
1.7.5.4

