From f0934536fd1f5b40a09a042107dfbb99dcfa0ab6 Mon Sep 17 00:00:00 2001
From: Antoine Busque <antoine.busque@efficios.com>
Date: Wed, 11 Jun 2014 10:45:44 -0400
Subject: [PATCH 4/4] Fix: correct typo in kernel version number

Commit a0383def517e3aebbbcebae61fe2bcfb50d31e71 stable-2.4

A typo in a preprocessor conditional verifying the range in which the
current kernel version is situated caused build failure for modules on
3.5.0 specifically, by trying to use the new api for block_rq_complete
which has not been backported from the 3.15 branch to the 3.5 branch.

This was taken from the git://git.lttng.org/lttng-modules.git stable-2.4 branch

Signed-off-by: Antoine Busque <antoine.busque@efficios.com>
Signed-off-by: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Signed-off-by: Yue Tao <yue.tao@windriver.com>
---
 .../instrumentation/events/lttng-module/block.h    |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/lttng2/instrumentation/events/lttng-module/block.h b/drivers/staging/lttng2/instrumentation/events/lttng-module/block.h
index 551ffba..80d73c6 100644
--- a/drivers/staging/lttng2/instrumentation/events/lttng-module/block.h
+++ b/drivers/staging/lttng2/instrumentation/events/lttng-module/block.h
@@ -224,7 +224,7 @@ DEFINE_EVENT(block_rq_with_error, block_rq_requeue,
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(3,14,5)	\
 	|| LTTNG_KERNEL_RANGE(3,12,21, 3,13,0)		\
 	|| LTTNG_KERNEL_RANGE(3,10,41, 3,11,0)		\
-	|| LTTNG_KERNEL_RANGE(3,4,91, 3,5,1)		\
+	|| LTTNG_KERNEL_RANGE(3,4,91, 3,5,0)		\
 	|| LTTNG_KERNEL_RANGE(3,2,58, 3,3,0))
 
 /**
-- 
1.7.5.4

