gcov support for the Linux kernel (gcov-kernel)
===============================================

Status:
-------
Currently, gcov has only been validated at common_pc with standard file
system.

Description:
------------
The gcov-kernel patch extends the Linux kernel to gather code coverage data
at runtime. This is achieved by providing a directory of virtual files 
(/proc/gcov) which are compatible with gcc's gcov tool (see manpage of gcov
for more information).

The latest gcov-kernel package may be obtained from the 'files' section of the
Linux Test Project homepage at:

	http://ltp.sourceforge.net/coverage/gcov.php

Configuration options:
----------------------
CONFIG_GCOV_PROFILE
  Basic gcov support. Say 'y' here.

CONFIG_GCOV_ALL
  Say 'y' here if you want to get gcov data for the entire kernel. Otherwise
  add the line

    EXTRA_CFLAGS += $(GCOV_FLAGS)

  to the respective Makefiles.

CONFIG_GCOV_PROC
  Provide /proc/gcov. Say 'y' here.

CONFIG_GCOV_HAMMER
  Say 'n' here unless you are using a modified gcc 3.3.x compiler (e.g. shipped
  with SUSE SLES9 or Mandrake 10.x). Note: an incorrect setting of this option
  may result in compile time errors or in file format errors in /proc/gcov. 

Kernel/module parameters
------------------------
Depending on the value of CONFIG_GCOV_PROC, the following parameters can be
specified in the kernel parameter line (CONFIG_GCOV_PROC=y) or as parameter
to the modprobe command (CONFIG_GCOV_PROC=m):

  - gcov_link=0/1 (default is 1): When set to non-zero, symbolic links to
    source and gcov graph files are created in /proc/gcov along with the data
    files.

  - gcov_persist=0/1 (default is 0): When set to non-zero, gcov data for
    kernel modules is kept even after those modules are unloaded so that
    coverage measurements can be extended to module cleanup code. To clear
    this persistent data, write to /proc/vmlinux.


Resetting kernel coverage data
------------------------------
To reset coverage data for a specific file, simply write to the associated data
file in the /proc/gcov hierarchy:

    echo 0 > /proc/gcov/kernel/signal.da

To reset all coverage data, write to the extra file '/proc/gcov/vmlinux':

    echo 0 > /proc/gcov/vmlinux
