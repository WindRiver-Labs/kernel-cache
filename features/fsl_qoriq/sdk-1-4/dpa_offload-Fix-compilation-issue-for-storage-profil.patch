From f8a42ca229008ddd5facd9cbc5411de8c3e57179 Mon Sep 17 00:00:00 2001
From: Radu Bulie <radu.bulie@freescale.com>
Date: Wed, 29 May 2013 09:52:48 +0000
Subject: [PATCH 426/547] dpa_offload: Fix compilation issue for storage
 profile id parameter

For FMAN versions lower than 3, storage profile is not avalilable.
This patch adds the DPAA_VERSION flag to eliminate the compiling errors.

Signed-off-by: Radu Bulie <radu.bulie@freescale.com>
Change-Id: Ie040d782b5eff06a8cca32fe855938b818ef3875
Reviewed-on: http://git.am.freescale.net:8181/2752
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Bulie Radu-Andrei-B37577 <Radu.Bulie@freescale.com>
Reviewed-by: Chereji Marian-Cornel-R27762 <marian.chereji@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 937282f..6b8097f 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -2971,9 +2971,11 @@ static int action_to_next_engine_params(const struct dpa_cls_tbl_action *action,
 					next_engine_params->params.
 						enqueueParams.overrideFqid =
 						TRUE;
+#if (DPAA_VERSION >= 11)
 				next_engine_params->params.enqueueParams.
 					  newRelativeStorageProfileId =
 					      action->enq_params.new_rel_vsp_id;
+#endif
 			}
 
 		if (action->enable_statistics)
-- 
1.8.4.93.g57e4c17

