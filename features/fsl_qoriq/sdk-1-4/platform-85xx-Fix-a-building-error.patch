From 60becea3d23696050dce47c09378c4dd410f4f7b Mon Sep 17 00:00:00 2001
From: Wei Yang <Wei.Yang@windriver.com>
Date: Wed, 26 Jun 2013 14:57:03 +0800
Subject: [PATCH 321/430] platform/85xx: Fix a building error

Since smp_85xx_kick_secondary_thread only is called by PPC64,
so we need to use #ifdef to make the function only has effect
on PPC64.

arch/powerpc/platforms/85xx/smp.c:276:22:
error: 'smp_85xx_kick_secondary_thread' defined but not used
[-Werror=unused-function]
| cc1: all warnings being treated as errors
| make[4]: *** [arch/powerpc/platforms/85xx/smp.o] Error 1

Signed-off-by: Wei Yang <Wei.Yang@windriver.com>
---
 arch/powerpc/platforms/85xx/smp.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/smp.c b/arch/powerpc/platforms/85xx/smp.c
index cec8ac0..454e941 100644
--- a/arch/powerpc/platforms/85xx/smp.c
+++ b/arch/powerpc/platforms/85xx/smp.c
@@ -272,7 +272,7 @@ static inline u32 read_spin_table_addr_l(void *spin_table)
 		(ulong)spin_table + sizeof(struct epapr_spin_table));
 	return in_be32(&((struct epapr_spin_table *)spin_table)->addr_l);
 }
-
+#ifdef CONFIG_PPC64
 static int __cpuinit smp_85xx_kick_secondary_thread(int nr)
 {
 	cpumask_var_t saved_mask;
@@ -298,6 +298,7 @@ static int __cpuinit smp_85xx_kick_secondary_thread(int nr)
 	free_cpumask_var(saved_mask);
 	return 0;
 }
+#endif
 
 static int __cpuinit smp_85xx_kick_cpu(int nr)
 
-- 
1.7.5.4

