From 98b336ef4993b4f0fd5a8aeca814e451c4d6d0b2 Mon Sep 17 00:00:00 2001
From: Aurelian Zanoschi <Aurelian.Zanoschi@freescale.com>
Date: Tue, 30 Apr 2013 10:41:39 +0300
Subject: [PATCH 079/430] dpa_mac: Add support for get_mac_handle for memac

Added missing get_mac_handle support in setup_memac function.

Signed-off-by: Aurelian Zanoschi <Aurelian.Zanoschi@freescale.com>
Change-Id: I201f4af60c7be0b992b3844563fc0352cbed14c1
Reviewed-on: http://git.am.freescale.net:8181/2273
Reviewed-by: Hamciuc Bogdan-BHAMCIU1 <bogdan.hamciuc@freescale.com>
Reviewed-by: Floarea Anca Jeanina-B12569 <anca.floarea@freescale.com>
Reviewed-by: Radulescu Ruxandra Ioana-B05472 <ruxandra.radulescu@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/mac-api.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index 5efd317..443be51 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -862,6 +862,7 @@ static void __devinit __cold setup_memac(struct mac_device *mac_dev)
 	mac_dev->change_addr    = change_addr;
 	mac_dev->set_multi      = set_multi;
 	mac_dev->uninit		= uninit;
+	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= set_tx_pause;
 	mac_dev->set_rx_pause		= set_rx_pause;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
-- 
1.7.5.4

