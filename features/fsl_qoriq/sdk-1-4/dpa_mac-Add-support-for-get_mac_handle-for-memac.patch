From c16f8ecd6f8d7ede3c356d2bb5a58a144cfe92b0 Mon Sep 17 00:00:00 2001
From: Aurelian Zanoschi <Aurelian.Zanoschi@freescale.com>
Date: Tue, 30 Apr 2013 10:41:39 +0300
Subject: [PATCH 217/547] dpa_mac: Add support for get_mac_handle for memac

Added missing get_mac_handle support in setup_memac function.

Signed-off-by: Aurelian Zanoschi <Aurelian.Zanoschi@freescale.com>
Change-Id: I201f4af60c7be0b992b3844563fc0352cbed14c1
Reviewed-on: http://git.am.freescale.net:8181/2273
Reviewed-by: Hamciuc Bogdan-BHAMCIU1 <bogdan.hamciuc@freescale.com>
Reviewed-by: Floarea Anca Jeanina-B12569 <anca.floarea@freescale.com>
Reviewed-by: Radulescu Ruxandra Ioana-B05472 <ruxandra.radulescu@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/mac-api.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index c4fa08c..b7d65c6 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -862,6 +862,7 @@ static void __cold setup_memac(struct mac_device *mac_dev)
 	mac_dev->change_addr    = change_addr;
 	mac_dev->set_multi      = set_multi;
 	mac_dev->uninit		= uninit;
+	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= set_tx_pause;
 	mac_dev->set_rx_pause		= set_rx_pause;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
-- 
1.8.4.93.g57e4c17

