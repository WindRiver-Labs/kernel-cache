From 1347faa64768681c14f6e6934b187caf52979332 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Tue, 9 Apr 2013 10:37:10 -0500
Subject: [PATCH 142/430] fsl_bman: Make bpool depletion test output more
 readable

In case of depletion, the current output contains the BPID both as a number
and as a mask, with the non-zero 'mask' conveying depletion on the
respective bpool. Is less confusing to just use a binary/boolean value for
displaying the depletion status of a bpool

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
Change-Id: Idbab2fa2701405beb6f04327ea199377b36aea73
Reviewed-on: http://git.am.freescale.net:8181/1171
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/bman_test_thresh.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_qbman/bman_test_thresh.c b/drivers/staging/fsl_qbman/bman_test_thresh.c
index d556e6d..521dd0c 100644
--- a/drivers/staging/fsl_qbman/bman_test_thresh.c
+++ b/drivers/staging/fsl_qbman/bman_test_thresh.c
@@ -56,7 +56,7 @@ static void cb_depletion(struct bman_portal *portal,
 	struct affine_test_data *data = opaque;
 	int c = smp_processor_id();
 	pr_info("cb_depletion: bpid=%d, depleted=%d, cpu=%d, original=%d\n",
-		bman_get_params(pool)->bpid, depleted, c, data->cpu);
+		bman_get_params(pool)->bpid, !!depleted, c, data->cpu);
 	/* We should be executing on the CPU of the thread that owns the pool if
 	 * and that CPU has an affine portal (ie. it isn't slaved). */
 	BUG_ON((c != data->cpu) && data->expect_affinity);
-- 
1.7.5.4

