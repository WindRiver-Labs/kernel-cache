From 3598e37c72274927b0f7ab85781e65ee5bda1e87 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 23 Aug 2013 10:03:12 +0800
Subject: [PATCH 1/4] qman:add qman_release_fqid_all()

Add qman_release_fqid_all() routine to release all fq used by qman.

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/dpa_alloc.c |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_qbman/dpa_alloc.c b/drivers/staging/fsl_qbman/dpa_alloc.c
index 8656ec3..a6ea8c6 100644
--- a/drivers/staging/fsl_qbman/dpa_alloc.c
+++ b/drivers/staging/fsl_qbman/dpa_alloc.c
@@ -391,6 +391,16 @@ struct alloc_node {
 	int is_alloced;
 };
 
+void qman_release_fqid_all(void)
+{
+	struct alloc_node *p;
+
+	list_for_each_entry(p, &(fqalloc.used), list) {
+		fq_cleanup(p->base);
+	}
+}
+EXPORT_SYMBOL(qman_release_fqid_all);
+
 /* #define DPA_ALLOC_DEBUG */
 
 #ifdef DPA_ALLOC_DEBUG
-- 
1.7.5.4

