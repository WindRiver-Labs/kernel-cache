From 02659d8c9aa4d5cdc154d1af0eda8be08abce753 Mon Sep 17 00:00:00 2001
From: Jeffrey Ladouceur <Jeffrey.Ladouceur@freescale.com>
Date: Fri, 5 Apr 2013 13:53:12 -0400
Subject: [PATCH 285/547] powerpc/dpaa: Add support for fsl pme driver

Add board support for FSL Pattern Matcher Engine.
Early initialization code is required in order to prepare the PME driver.

Signed-off-by: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Signed-off-by: Jeffrey Ladouceur <Jeffrey.Ladouceur@freescale.com>
Change-Id: I36d6a67d530b443bf2a9e4b5f8d7c29f270ba67e
Reviewed-on: http://git.am.freescale.net:8181/1090
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/platforms/85xx/corenet_ds.c | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/powerpc/platforms/85xx/corenet_ds.c b/arch/powerpc/platforms/85xx/corenet_ds.c
index 557ad0b..004ffb4 100644
--- a/arch/powerpc/platforms/85xx/corenet_ds.c
+++ b/arch/powerpc/platforms/85xx/corenet_ds.c
@@ -124,6 +124,9 @@ void __init qman_init_early(void);
 #ifdef CONFIG_FSL_BMAN_CONFIG
 void __init bman_init_early(void);
 #endif
+#ifdef CONFIG_FSL_PME2_CTRL
+void __init pme2_init_early(void);
+#endif
 
 __init void corenet_ds_init_early(void)
 {
@@ -133,6 +136,9 @@ __init void corenet_ds_init_early(void)
 #ifdef CONFIG_FSL_BMAN_CONFIG
 	bman_init_early();
 #endif
+#ifdef CONFIG_FSL_PME2_CTRL
+	pme2_init_early();
+#endif
 #ifdef CONFIG_FSL_USDPAA
 	fsl_usdpaa_init_early();
 #endif
-- 
1.8.4.93.g57e4c17

