From 9e182f0fa5c685d322fb75b56527b41451f4a5d3 Mon Sep 17 00:00:00 2001
From: Yang Wei <Wei.Yang@windriver.com>
Date: Tue, 19 Nov 2013 17:11:24 +0800
Subject: [PATCH 2/3] net/phy: Export phy_device_create function

phy_device_create function will be used by of_mdio.c file, hence
we need to export it.

Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 drivers/net/phy/phy_device.c |    3 ++-
 include/linux/phy.h          |    1 +
 2 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/net/phy/phy_device.c b/drivers/net/phy/phy_device.c
index bc7fc16..eef494e 100644
--- a/drivers/net/phy/phy_device.c
+++ b/drivers/net/phy/phy_device.c
@@ -148,7 +148,7 @@ int phy_scan_fixups(struct phy_device *phydev)
 }
 EXPORT_SYMBOL(phy_scan_fixups);
 
-static struct phy_device* phy_device_create(struct mii_bus *bus,
+struct phy_device* phy_device_create(struct mii_bus *bus,
 					    int addr, int phy_id)
 {
 	struct phy_device *dev;
@@ -196,6 +196,7 @@ static struct phy_device* phy_device_create(struct mii_bus *bus,
 
 	return dev;
 }
+EXPORT_SYMBOL(phy_device_create);
 
 /**
  * get_phy_id - reads the specified addr for its ID.
diff --git a/include/linux/phy.h b/include/linux/phy.h
index 87bb34b..e723801 100644
--- a/include/linux/phy.h
+++ b/include/linux/phy.h
@@ -516,6 +516,7 @@ static inline int phy45_write(struct phy_device *phydev, u16 regnum,
 }
 
 int get_phy_id(struct mii_bus *bus, int addr, u32 *phy_id);
+struct phy_device *phy_device_create(struct mii_bus *bus, int addr, int phy_id);
 struct phy_device* get_phy_device(struct mii_bus *bus, int addr);
 int phy_device_register(struct phy_device *phy);
 int phy_attach_direct(struct net_device *dev, struct phy_device *phydev,
-- 
1.7.5.4

