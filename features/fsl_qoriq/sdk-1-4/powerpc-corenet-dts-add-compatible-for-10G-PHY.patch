From 48b556aadeffecdad4d1ee9775657a401d1990dd Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Thu, 18 Apr 2013 15:23:16 +0800
Subject: [PATCH 394/430] powerpc/corenet/dts: add compatible for 10G PHY

Compatible "ethernet-phy-ieee802.3-c45" is used to indicate that a
10G PHY should be accessed by clause 45, without the compatible,
the 10G PHY will not be accessed correctly.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Change-Id: I672331998d08e3730c9fde3163ff84cd6c0e2b2a
Reviewed-on: http://git.am.freescale.net:8181/1494
Reviewed-by: Zang Tiefei-R61911 <tie-fei.zang@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch is from QorIQ-SDK-V1.4-20130625-yocto, just a minor
modification to port 3.4 kernel]
Signed-off-by: Wei Yang <Wei.Yang@windriver.com>
---
 arch/powerpc/boot/dts/p2041rdb.dts |    1 +
 arch/powerpc/boot/dts/p3041ds.dts  |    2 ++
 arch/powerpc/boot/dts/p4080ds.dts  |    2 ++
 arch/powerpc/boot/dts/p5020ds.dts  |    2 ++
 arch/powerpc/boot/dts/p5040ds.dts  |    2 ++
 5 files changed, 9 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2041rdb.dts b/arch/powerpc/boot/dts/p2041rdb.dts
index b346b44..c81451e 100644
--- a/arch/powerpc/boot/dts/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/p2041rdb.dts
@@ -244,6 +244,7 @@
 			mdio@f1000 {
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 93e6261..d743d0f 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -226,11 +226,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p4080ds.dts b/arch/powerpc/boot/dts/p4080ds.dts
index b348c98..03b11c9 100644
--- a/arch/powerpc/boot/dts/p4080ds.dts
+++ b/arch/powerpc/boot/dts/p4080ds.dts
@@ -478,6 +478,7 @@
 			#size-cells = <0>;
 
 			phy11: ethernet-phy@0 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x0>;
 			};
 		};
@@ -488,6 +489,7 @@
 			#size-cells = <0>;
 
 			phy10: ethernet-phy@4 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x4>;
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index d4a5d8c..a3f3745 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -226,11 +226,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 4f7bf80..ed708091 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -529,6 +529,7 @@
 					status = "disabled";
 
 					phy_xgmii_slot_1: ethernet-phy@0 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <4>;
 					};
 				};
@@ -540,6 +541,7 @@
 					reg = <2>;
 
 					phy_xgmii_slot_2: ethernet-phy@4 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <0>;
 					};
 				};
-- 
1.7.5.4

