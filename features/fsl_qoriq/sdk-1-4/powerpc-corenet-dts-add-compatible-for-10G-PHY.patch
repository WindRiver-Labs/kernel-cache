From 4c4f916259c1a95d15c96f3740af3629736a3038 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Thu, 18 Apr 2013 15:23:16 +0800
Subject: [PATCH 322/547] powerpc/corenet/dts: add compatible for 10G PHY

Compatible "ethernet-phy-ieee802.3-c45" is used to indicate that a
10G PHY should be accessed by clause 45, without the compatible,
the 10G PHY will not be accessed correctly.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Change-Id: I672331998d08e3730c9fde3163ff84cd6c0e2b2a
Reviewed-on: http://git.am.freescale.net:8181/1494
Reviewed-by: Zang Tiefei-R61911 <tie-fei.zang@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p2041rdb.dts | 1 +
 arch/powerpc/boot/dts/p3041ds.dts  | 2 ++
 arch/powerpc/boot/dts/p4080ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5020ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5040ds.dts  | 2 ++
 5 files changed, 9 insertions(+)

diff --git a/arch/powerpc/boot/dts/p2041rdb.dts b/arch/powerpc/boot/dts/p2041rdb.dts
index ba36833..834cac4 100644
--- a/arch/powerpc/boot/dts/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/p2041rdb.dts
@@ -236,6 +236,7 @@
 			mdio@f1000 {
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 06a892c..63e3297 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -218,11 +218,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p4080ds.dts b/arch/powerpc/boot/dts/p4080ds.dts
index 074436e..bcadd71 100644
--- a/arch/powerpc/boot/dts/p4080ds.dts
+++ b/arch/powerpc/boot/dts/p4080ds.dts
@@ -417,6 +417,7 @@
 			#size-cells = <0>;
 
 			phy11: ethernet-phy@0 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x0>;
 			};
 		};
@@ -427,6 +428,7 @@
 			#size-cells = <0>;
 
 			phy10: ethernet-phy@4 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x4>;
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index 980f505..206c55d 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -218,11 +218,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 636b5c8..3505e51 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -469,6 +469,7 @@
 					status = "disabled";
 
 					phy_xgmii_slot_1: ethernet-phy@0 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <4>;
 					};
 				};
@@ -480,6 +481,7 @@
 					reg = <2>;
 
 					phy_xgmii_slot_2: ethernet-phy@4 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <0>;
 					};
 				};
-- 
1.8.4.93.g57e4c17

