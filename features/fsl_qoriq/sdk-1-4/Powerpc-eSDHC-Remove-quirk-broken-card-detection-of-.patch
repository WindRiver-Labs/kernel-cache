From 3bc02b450759025801516c1938939c2254636e5e Mon Sep 17 00:00:00 2001
From: "Haijun.Zhang" <Haijun.Zhang@freescale.com>
Date: Tue, 7 May 2013 16:28:15 +0800
Subject: [PATCH 369/547] Powerpc/eSDHC: Remove quirk broken card detection of
 p4080

Enable interrupt mod detecting card insert or remove of P4080 board.

Signed-off-by: Haijun Zhang <haijun.zhang@freescale.com>
Change-Id: I94f0fcedd684a2db23ecddedfae85f726b6ef4c6
Reviewed-on: http://git.am.freescale.net:8181/2380
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/mmc/host/sdhci-pltfm.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/mmc/host/sdhci-pltfm.c b/drivers/mmc/host/sdhci-pltfm.c
index 038f153..7ef5d0e 100644
--- a/drivers/mmc/host/sdhci-pltfm.c
+++ b/drivers/mmc/host/sdhci-pltfm.c
@@ -103,6 +103,7 @@ void sdhci_get_of_property(struct platform_device *pdev)
 		}
 
 		if (of_device_is_compatible(np, "fsl,p5040-esdhc") ||
+			of_device_is_compatible(np, "fsl,p4080-esdhc") ||
 			of_device_is_compatible(np, "fsl,p1020-esdhc"))
 			host->quirks &= ~SDHCI_QUIRK_BROKEN_CARD_DETECTION;
 
-- 
1.8.4.93.g57e4c17

