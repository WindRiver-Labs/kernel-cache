From e916a7fa090a94472ec2856420696bb128ea7921 Mon Sep 17 00:00:00 2001
From: Wei Yang <Wei.Yang@windriver.com>
Date: Mon, 14 Jan 2013 16:31:07 +0800
Subject: [PATCH 543/547] powerpc/pci: export two function symbols for
 mpc85xx_edac module

When building mpc85xx_edac as module, the following build errors occur

drivers/edac/mpc85xx_edac.c:437:12:
warning: 'mpc85xx_pci_err_remove' defined but not used [-Wunused-function]
   LD [M]  drivers/edac/edac_core.o
   Building modules, stage 2.
   MODPOST 176 modules
 ERROR: "pci_find_hose_for_OF_device" [drivers/edac/mpc85xx_edac.ko] undefined!
 ERROR: "early_find_capability" [drivers/edac/mpc85xx_edac.ko] undefined!
 make[3]: *** [__modpost] Error 1
 make[2]: *** [modules] Error 2
 make[1]: *** [sub-make] Error 2
 make: *** [all] Error 2

Signed-off-by: Wei Yang <Wei.Yang@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/kernel/pci-common.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/arch/powerpc/kernel/pci-common.c b/arch/powerpc/kernel/pci-common.c
index f46914a..1c4e890 100644
--- a/arch/powerpc/kernel/pci-common.c
+++ b/arch/powerpc/kernel/pci-common.c
@@ -200,6 +200,7 @@ struct pci_controller* pci_find_hose_for_OF_device(struct device_node* node)
 	}
 	return NULL;
 }
+EXPORT_SYMBOL(pci_find_hose_for_OF_device);
 
 static ssize_t pci_show_devspec(struct device *dev,
 		struct device_attribute *attr, char *buf)
@@ -1607,6 +1608,7 @@ int early_find_capability(struct pci_controller *hose, int bus, int devfn,
 	return pci_bus_find_capability(fake_pci_bus(hose, bus), devfn, cap);
 }
 
+EXPORT_SYMBOL(early_find_capability);
 struct device_node *pcibios_get_phb_of_node(struct pci_bus *bus)
 {
 	struct pci_controller *hose = bus->sysdata;
-- 
1.8.4.93.g57e4c17

