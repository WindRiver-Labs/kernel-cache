From f8dfb46b6365a5c1ab7848b828d01efab3cae875 Mon Sep 17 00:00:00 2001
From: Haijun Zhang <haijun.zhang@freescale.com>
Date: Thu, 11 Apr 2013 08:10:33 +0800
Subject: [PATCH 214/430] Add SOC version list

Add soc version list and checkout function
fo mpc85xx.

Signed-off-by: Haijun Zhang <Haijun.Zhang@freescale.com>
Change-Id: Iff4ba9356a5642094af1efaadb69920146c2da1b
Reviewed-on: http://git.am.freescale.net:8181/1195
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/include/asm/mpc85xx.h |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/include/asm/mpc85xx.h b/arch/powerpc/include/asm/mpc85xx.h
index fafca9f5..65e4b66 100644
--- a/arch/powerpc/include/asm/mpc85xx.h
+++ b/arch/powerpc/include/asm/mpc85xx.h
@@ -52,6 +52,11 @@
 #define SVR_8569_E	0x808800
 #define SVR_8572	0x80E000
 #define SVR_8572_E	0x80E800
+#define SVR_P1010	0x80f900
+#define SVR_P2041	0x821801
+#define SVR_P3041	0x821903
+#define SVR_T4240	0x824800
+#define SVR_B4860	0x868800
 
 
 static inline int fsl_svr_is(u32 svr)
@@ -61,6 +66,15 @@ static inline int fsl_svr_is(u32 svr)
 	return (id == svr);
 }
 
+/* Check the SOC design version of this board */
+static inline int fsl_svr_rev_is(u8 maj, u8 min)
+{
+	u32 rev = SVR_REV(mfspr(SPRN_SVR));
+	u32 cmp = (maj << 4) | min;
+
+	return (rev == cmp);
+}
+
 /* Return true if current SOC revision is prior to (maj, min)  */
 static inline int fsl_svr_older_than(u8 maj, u8 min)
 {
-- 
1.7.5.4

