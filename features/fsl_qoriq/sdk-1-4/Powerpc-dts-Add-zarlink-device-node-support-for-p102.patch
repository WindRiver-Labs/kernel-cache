From 82459b4008f3f2570739c0182da34e4e8a52c3d8 Mon Sep 17 00:00:00 2001
From: "Haijun.Zhang" <Haijun.Zhang@freescale.com>
Date: Wed, 15 May 2013 08:30:02 +0800
Subject: [PATCH 345/430] Powerpc/dts: Add zarlink device node support for
 p1020rdb-pd

On P1020RDB-PD board SPI interface is connected to the TDM chips SLIC/SLAC.
SPI_CS1_N -->> Zarlink Le88266DLC
SPI_CS2_N -->> Zarlink Le88266DLC
Currently the p1020rdb-pd.dtsi missed to add this two nodes. Without these
nodes Le88266DLC will not be probed correctly and TDM will not work.
This should be support as default.

Signed-off-by: Haijun Zhang <haijun.zhang@freescale.com>
Change-Id: I9add25537f05dd09a87d59416f5e053d91c3e067
Reviewed-on: http://git.am.freescale.net:8181/2495
Reviewed-by: Xie Xiaobo-R63061 <X.Xie@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch is from QorIQ-SDK-V1.4-20130625-yocto, just a minor
modification to port 3.4 kernel]
Signed-off-by: Wei Yang <wei.yang@windriver.com>
---
 arch/powerpc/boot/dts/p1020rdb-pd.dtsi |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
index 02e9358..6e07fa7 100644
--- a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
+++ b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
@@ -186,6 +186,17 @@
 				label = "file system jffs2";
 			};
 		};
+		slic@0 {
+			compatible = "zarlink,le88266";
+			reg = <1>;
+			spi-max-frequency = <8000000>;
+		};
+		slic@1 {
+			compatible = "zarlink,le88266";
+			reg = <2>;
+			spi-max-frequency = <8000000>;
+		};
+
 	};
 
 	mdio@24000 {
-- 
1.7.5.4

