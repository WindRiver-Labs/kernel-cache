From 35a8cc7d38600e273bff411d919aaf33f84cf9b9 Mon Sep 17 00:00:00 2001
From: Haiying Wang <Haiying.Wang@freescale.com>
Date: Fri, 31 May 2013 13:24:46 -0400
Subject: [PATCH 198/430] crypto: caam/qi - return 0 for success in alloc_cgrs

Otherwise, unexpected cgrid releases and cgr delete will happen, which leads to
cgr leaking issue later.

Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
Change-Id: I468653655bcd4c9aa2528ea99d25b13b2d664223
Reviewed-on: http://git.am.freescale.net:8181/2824
Reviewed-by: Garg Vakul-B16394 <vakul@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/crypto/caam/qi.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/crypto/caam/qi.c b/drivers/crypto/caam/qi.c
index 7ec0b58..8cc42e1 100644
--- a/drivers/crypto/caam/qi.c
+++ b/drivers/crypto/caam/qi.c
@@ -597,6 +597,7 @@ static int alloc_cgrs(struct device *qidev)
 			ret, qipriv.req_cgr.cgrid);
 		goto create_req_cgr_fail;
 	}
+	return 0;
 
 create_req_cgr_fail:
 	qman_release_cgrid(qipriv.req_cgr.cgrid);
-- 
1.7.5.4

