From b64e55472e6afd97329acc4b8ca88bf5ccccd536 Mon Sep 17 00:00:00 2001
From: Haiying Wang <Haiying.Wang@freescale.com>
Date: Fri, 31 May 2013 13:24:46 -0400
Subject: [PATCH 088/547] crypto: caam/qi - return 0 for success in alloc_cgrs

Otherwise, unexpected cgrid releases and cgr delete will happen, which leads to
cgr leaking issue later.

Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
Change-Id: I468653655bcd4c9aa2528ea99d25b13b2d664223
Reviewed-on: http://git.am.freescale.net:8181/2824
Reviewed-by: Garg Vakul-B16394 <vakul@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/crypto/caam/qi.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/crypto/caam/qi.c b/drivers/crypto/caam/qi.c
index 7ec0b58..8cc42e1 100644
--- a/drivers/crypto/caam/qi.c
+++ b/drivers/crypto/caam/qi.c
@@ -597,6 +597,7 @@ static int alloc_cgrs(struct device *qidev)
 			ret, qipriv.req_cgr.cgrid);
 		goto create_req_cgr_fail;
 	}
+	return 0;
 
 create_req_cgr_fail:
 	qman_release_cgrid(qipriv.req_cgr.cgrid);
-- 
1.8.4.93.g57e4c17

