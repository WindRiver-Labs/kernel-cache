From 9c99719fdd1d2172b92aabaf1f2be12c9ee70501 Mon Sep 17 00:00:00 2001
From: Radu Bulie <radu.bulie@freescale.com>
Date: Sun, 26 May 2013 11:22:54 +0000
Subject: [PATCH 118/430] dpa_offload: Bug fix. Transmit relative storage
 profile id into FMD driver

Relative VSP id was not transmitted to FMD driver.

Signed-off-by: Radu Bulie <radu.bulie@freescale.com>
Change-Id: If3be6b0fa6b11a3610c3c933e6f07221396bc495
Reviewed-on: http://git.am.freescale.net:8181/2700
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Chereji Marian-Cornel-R27762 <marian.chereji@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_classifier.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_classifier.c b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
index 4208546..937282f 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_classifier.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_classifier.c
@@ -2971,6 +2971,9 @@ static int action_to_next_engine_params(const struct dpa_cls_tbl_action *action,
 					next_engine_params->params.
 						enqueueParams.overrideFqid =
 						TRUE;
+				next_engine_params->params.enqueueParams.
+					  newRelativeStorageProfileId =
+					      action->enq_params.new_rel_vsp_id;
 			}
 
 		if (action->enable_statistics)
-- 
1.7.5.4

