From f63b7d21b28ff321893b9b50f26bba54d64b151b Mon Sep 17 00:00:00 2001
From: Ruan Zhengwang <zhengwang.ruan@windriver.com>
Date: Fri, 8 Nov 2013 16:21:35 +0800
Subject: [PATCH] powerpc/fsl-b4xxx: add alternative boot partitions for uboot
 and rcw

Add alternative partitions for uboot and rcw in nor flash. This enables
b4xxx boards to boot from another partitions by changing switch.

Signed-off-by: Ruan Zhengwang <zhengwang.ruan@windriver.com>
---
 arch/powerpc/boot/dts/b4qds.dts | 24 ++++++++++++++++++++++--
 1 file changed, 22 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/b4qds.dts b/arch/powerpc/boot/dts/b4qds.dts
index f22c475..0a61237 100644
--- a/arch/powerpc/boot/dts/b4qds.dts
+++ b/arch/powerpc/boot/dts/b4qds.dts
@@ -60,6 +60,12 @@
 			bank-width = <2>;
 			device-width = <1>;
 
+			partition@0 { 
+				/* This can't be accessed because of a board issue. */ 
+				label = "Reserved";
+				reg = <0x0 0x4000000>;
+				read-only;
+			};
 			partition@4000000 {
 				label = "rcw";
 				reg = <0x4000000 0x20000>;
@@ -74,8 +80,22 @@
 				reg = <0x4620000 0x20000>;
 			};
 			partition@4640000 {
-				label = "fs";
-				reg = <0x4640000 0x3900000>;
+				label = "fs1";
+				reg = <0x4640000 0x1940000>;
+			};
+			partition@5f80000 {
+				label = "alt-u-boot";
+				reg = <0x5f80000 0x80000>;
+				read-only;
+			};
+			partition@6000000 {
+				label = "alt-rcw";
+				reg = <0x6000000 0x20000>;
+				read-only;
+			};
+			partition@6020000 {
+				label = "fs2";
+				reg = <0x6020000 0x1f20000>;
 			};
 			partition@7f40000 {
 				label = "fman-firmware";
-- 
1.8.4.93.g57e4c17

