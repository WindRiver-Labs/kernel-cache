From b6e85c2c909e0c89cac7769d04a5ef09de292bb4 Mon Sep 17 00:00:00 2001
From: Yang Wei <Wei.Yang@windriver.com>
Date: Fri, 26 Jul 2013 11:19:45 +0800
Subject: [PATCH 389/430] sysdev/fsl_rcpm: change device id of RCPM

change it from qoriq-rcpm-2 to qoriq-rcpm-2.0

The modification is from the following SDK1.4 patch
[
powerpc/rcpm: add sleep support for T4/B4 chips

RCPM unit controls the power managment of T4/B4 chips. Software can
access RCPM registers to put specific thread/core in PH10/PH15/PH20/PH30
state or put the device in LPM10/LPM20/LPM40 mode.

The RCPM unit supports several wake up sources through internal timers
and internal and external interrupts.

When the device enter sleep state, it will be put in LPM20 mode.
The command is "echo standby > /sys/power/state".

Signed-off-by: Zhao Chenhui <chenhui.zhao@freescale.com>
Signed-off-by: Li Yang <leoli@freescale.com>
Signed-off-by: Andy Fleming <afleming@freescale.com>
(cherry picked from commit 8b6d17409699ecac9799b9a68fdfeeb299f5f3a8)
Change-Id: Id456db72f2d3af5c1638ab271f6cdabcc3794ded
Reviewed-on: http://git.am.freescale.net:8181/1181
Reviewed-by: Wood Scott-B07421 <scottwood@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
]

Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 arch/powerpc/sysdev/fsl_rcpm.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_rcpm.c b/arch/powerpc/sysdev/fsl_rcpm.c
index 8bcc246..5fe618d 100644
--- a/arch/powerpc/sysdev/fsl_rcpm.c
+++ b/arch/powerpc/sysdev/fsl_rcpm.c
@@ -105,7 +105,7 @@ static int __devinit rcpm_probe(struct platform_device *pdev)
 {
 	struct device_node *np = pdev->dev.of_node;
 
-	if (of_device_is_compatible(np, "fsl,qoriq-rcpm-2")) {
+	if (of_device_is_compatible(np, "fsl,qoriq-rcpm-2.0")) {
 		rcpm2_regs = of_iomap(np, 0);
 		if (!rcpm2_regs)
 			return -ENOMEM;
@@ -127,7 +127,7 @@ static int __devinit rcpm_probe(struct platform_device *pdev)
 
 static const struct of_device_id rcpm_ids[] = {
 	{ .compatible = "fsl,qoriq-rcpm-1.0", },
-	{ .compatible = "fsl,qoriq-rcpm-2", },
+	{ .compatible = "fsl,qoriq-rcpm-2.0", },
 	{ },
 };
 
-- 
1.7.5.4

