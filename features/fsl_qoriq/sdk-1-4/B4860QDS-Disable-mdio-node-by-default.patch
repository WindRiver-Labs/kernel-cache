From fdd60321acb41ac796c68c5d38c75e55c12fc167 Mon Sep 17 00:00:00 2001
From: Suresh Gupta <suresh.gupta@freescale.com>
Date: Tue, 28 May 2013 14:59:34 +0530
Subject: [PATCH 345/547] B4860QDS: Disable mdio node by default

MDIO node get enable during fdt fixup on basis of fsl_b4860_serdes2
string in hwconfig.

Signed-off-by: Suresh Gupta <suresh.gupta@freescale.com>
Change-Id: I4686310afde78456d53c95ef5de727bee04b489a
Reviewed-on: http://git.am.freescale.net:8181/2742
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Aggrwal Poonam-B10812 <Poonam.Aggrwal@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/b4860qds.dts | 4 ++++
 arch/powerpc/boot/dts/b4qds.dts    | 2 ++
 2 files changed, 6 insertions(+)

diff --git a/arch/powerpc/boot/dts/b4860qds.dts b/arch/powerpc/boot/dts/b4860qds.dts
index 94e8e80..d7f1a21 100644
--- a/arch/powerpc/boot/dts/b4860qds.dts
+++ b/arch/powerpc/boot/dts/b4860qds.dts
@@ -73,9 +73,11 @@
 			};
 			mdio0: mdio@fc000 {
 				phy_sgmii_1e: ethernet-phy@1e {
+					status = "disabled";
 					reg = <0x1e>;
 				};
 				phy_sgmii_1f: ethernet-phy@1f {
+					status = "disabled";
 					reg = <0x1f>;
 				};
 			};
@@ -83,10 +85,12 @@
 			xmdio0: mdio@fd000 {
 				/* For 10g interfaces */
 				phy_xaui_slot1: xaui-phy@slot1 {
+					status = "disabled";
 					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x7>; /* default switch setting on slot1 of AMC2PEX */
 				};
 				phy_xaui_slot2: xaui-phy@slot2 {
+					status = "disabled";
 					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x6>; /* default switch setting on slot1 of AMC2PEX */
 				};
diff --git a/arch/powerpc/boot/dts/b4qds.dts b/arch/powerpc/boot/dts/b4qds.dts
index fb88f15..6f5ea40 100644
--- a/arch/powerpc/boot/dts/b4qds.dts
+++ b/arch/powerpc/boot/dts/b4qds.dts
@@ -188,9 +188,11 @@
 					reg = <0x11>;
 				};
 				phy_sgmii_1c: ethernet-phy@1c {
+					status = "disabled";
 					reg = <0x1c>;
 				};
 				phy_sgmii_1d: ethernet-phy@1d {
+					status = "disabled";
 					reg = <0x1d>;
 				};
 			};
-- 
1.8.4.93.g57e4c17

