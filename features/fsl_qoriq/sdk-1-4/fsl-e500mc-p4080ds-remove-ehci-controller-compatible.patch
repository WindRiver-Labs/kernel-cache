From e58943c3062b9d2aa85e0365c989038ad2958bab Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 22 Jan 2013 16:44:18 +0800
Subject: [PATCH 501/547] fsl-e500mc/p4080ds: remove ehci controller compatible
 property

If ehci controller version is 1.6 or above, we need to check
PHY_CLK_VALID to avoid that kernel booting up will hang during USB
initialization while missing USB PHY clock.

Per p4080 specific pdf, PHY_CLK_VALID isn't defined in the USB
control register actually. So we should remove this compatible property
in dts to skip this undefined behaviour.

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/fsl/p4080si-post.dtsi | 2 --
 1 file changed, 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi b/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
index 5f9b908..e693fda 100644
--- a/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
@@ -512,14 +512,12 @@
 /include/ "qoriq-gpio-0.dtsi"
 /include/ "qoriq-usb2-mph-0.dtsi"
 	usb@210000 {
-		compatible = "fsl-usb2-mph-v1.6", "fsl,mpc85xx-usb2-mph", "fsl-usb2-mph";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x520>; /* USB1LIODNR */
 		port0;
 	};
 /include/ "qoriq-usb2-dr-0.dtsi"
 	usb@211000 {
-		compatible = "fsl-usb2-dr-v1.6", "fsl,mpc85xx-usb2-dr", "fsl-usb2-dr";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x524>; /* USB2LIODNR */
 	};
-- 
1.8.4.93.g57e4c17

