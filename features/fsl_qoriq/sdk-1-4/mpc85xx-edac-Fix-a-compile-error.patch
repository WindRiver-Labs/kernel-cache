From 5edc54feceedc2ca9d029dd5679df3e3552b5088 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Wed, 7 Aug 2013 14:53:03 +0800
Subject: [PATCH 400/430] mpc85xx:edac:Fix a compile error

Fix a compile error of mpc85xx_edac module

linux/drivers/edac/mpc85xx_edac.c:305:5: error:
redefinition of 'mpc85xx_pci_err_probe'
linux/arch/powerpc/sysdev/fsl_pci.h:154:19: note:
previous definition of 'mpc85xx_pci_err_probe' was here

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/sysdev/fsl_pci.c |    3 ++-
 arch/powerpc/sysdev/fsl_pci.h |    5 -----
 2 files changed, 2 insertions(+), 6 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_pci.c b/arch/powerpc/sysdev/fsl_pci.c
index 0009b69..62c1474 100644
--- a/arch/powerpc/sysdev/fsl_pci.c
+++ b/arch/powerpc/sysdev/fsl_pci.c
@@ -1045,8 +1045,9 @@ static int __devinit fsl_pci_probe(struct platform_device *pdev)
 	pci_devs_phb_init();
 #endif
 
+#ifdef CONFIG_EDAC_MPC85XX
 	mpc85xx_pci_err_probe(pdev);
-
+#endif
 	return 0;
 }
 
diff --git a/arch/powerpc/sysdev/fsl_pci.h b/arch/powerpc/sysdev/fsl_pci.h
index 6a46799..f308523 100644
--- a/arch/powerpc/sysdev/fsl_pci.h
+++ b/arch/powerpc/sysdev/fsl_pci.h
@@ -150,11 +150,6 @@ static inline void fsl_pci_assign_primary(void) {}
 
 #ifdef CONFIG_EDAC_MPC85XX
 int mpc85xx_pci_err_probe(struct platform_device *op);
-#else
-static inline int mpc85xx_pci_err_probe(struct platform_device *op)
-{
-	return -ENOTSUPP;
-}
 #endif
 
 #ifdef CONFIG_FSL_PCI
-- 
1.7.5.4

