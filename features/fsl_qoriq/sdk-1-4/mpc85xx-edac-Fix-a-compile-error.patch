From c81150cb11016fe16f2f7604ed0bf34f6a465fe5 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Wed, 7 Aug 2013 14:53:03 +0800
Subject: [PATCH 486/547] mpc85xx:edac:Fix a compile error

Fix a compile error of mpc85xx_edac module

linux/drivers/edac/mpc85xx_edac.c:305:5: error:
redefinition of 'mpc85xx_pci_err_probe'
linux/arch/powerpc/sysdev/fsl_pci.h:154:19: note:
previous definition of 'mpc85xx_pci_err_probe' was here

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/sysdev/fsl_pci.c | 3 ++-
 arch/powerpc/sysdev/fsl_pci.h | 5 -----
 2 files changed, 2 insertions(+), 6 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_pci.c b/arch/powerpc/sysdev/fsl_pci.c
index ccc24a7..ef647f8 100644
--- a/arch/powerpc/sysdev/fsl_pci.c
+++ b/arch/powerpc/sysdev/fsl_pci.c
@@ -1005,8 +1005,9 @@ static int fsl_pci_probe(struct platform_device *pdev)
 	}
 #endif
 
+#ifdef CONFIG_EDAC_MPC85XX
 	mpc85xx_pci_err_probe(pdev);
-
+#endif
 	return 0;
 }
 
diff --git a/arch/powerpc/sysdev/fsl_pci.h b/arch/powerpc/sysdev/fsl_pci.h
index 4854175..5eec4ae 100644
--- a/arch/powerpc/sysdev/fsl_pci.h
+++ b/arch/powerpc/sysdev/fsl_pci.h
@@ -158,11 +158,6 @@ static inline void fsl_pci_assign_primary(void) {}
 
 #ifdef CONFIG_EDAC_MPC85XX
 int mpc85xx_pci_err_probe(struct platform_device *op);
-#else
-static inline int mpc85xx_pci_err_probe(struct platform_device *op)
-{
-	return -ENOTSUPP;
-}
 #endif
 
 #endif /* __POWERPC_FSL_PCI_H */
-- 
1.8.4.93.g57e4c17

