From 1f0489a62ac40027161f5b8255922e4f1e1e7df8 Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Mon, 23 Sep 2013 17:20:24 +0800
Subject: [PATCH 2/7] powerpc/fsl-b4xxx: Update partitions for 64M NOR flash

For B4860QDS and B4420QDS even though the NOR flash size is 128M, only 64M
can be accessed due to a board issue. The address range for NOR flash is
limited to 0xec000000 to 0xefffffff instead of 0xe8000000 to 0xeffffffff.

Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/b4qds.dts | 32 +++++++++-----------------------
 1 file changed, 9 insertions(+), 23 deletions(-)

diff --git a/arch/powerpc/boot/dts/b4qds.dts b/arch/powerpc/boot/dts/b4qds.dts
index f065932..f22c475 100644
--- a/arch/powerpc/boot/dts/b4qds.dts
+++ b/arch/powerpc/boot/dts/b4qds.dts
@@ -60,36 +60,22 @@
 			bank-width = <2>;
 			device-width = <1>;
 
-			partition@0 {
+			partition@4000000 {
 				label = "rcw";
-				reg = <0x0 0x20000>;
+				reg = <0x4000000 0x20000>;
 				read-only;
 			};
-			partition@20000 {
+			partition@4020000 {
 				label = "kernel";
-				reg = <0x20000 0x500000>;
+				reg = <0x4020000 0x600000>;
 			};
-			partition@520000 {
+			partition@4620000 {
 				label = "dtb";
-				reg = <0x520000 0x20000>;
-			};
-			partition@540000 {
-				label = "fs1";
-				reg = <0x540000 0x3a40000>;
-			};
-			partition@3f80000 {
-				label = "alt-u-boot";
-				reg = <0x3f80000 0x80000>;
-				read-only;
-			};
-			partition@4000000 {
-				label = "alt-rcw";
-				reg = <0x4000000 0x20000>;
-				read-only;
+				reg = <0x4620000 0x20000>;
 			};
-			partition@4020000 {
-				label = "fs2";
-				reg = <0x4020000 0x3f20000>;
+			partition@4640000 {
+				label = "fs";
+				reg = <0x4640000 0x3900000>;
 			};
 			partition@7f40000 {
 				label = "fman-firmware";
-- 
1.8.4.93.g57e4c17

