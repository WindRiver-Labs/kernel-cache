From 5d2d7f902c83975d4857116dfbe6946fbe39481f Mon Sep 17 00:00:00 2001
From: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Date: Thu, 9 May 2013 09:24:51 -0400
Subject: [PATCH 261/547] fsl_qbman: fix the non-SMP build

The <linux/smp.h> header only includes <asm/smp.h> if CONFIG_SMP is
defined, yet it is required in the non-SMP case too.

Signed-off-by: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Change-Id: I0644bca53a0afeb3eb331956f7e4b20959f2a3d6
Reviewed-on: http://git.am.freescale.net:8181/2419
Reviewed-by: Wood Scott-B07421 <scottwood@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[Original patch taken from QorIQ-SDK-V1.4-SOURCE-20130625-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/qman_driver.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/staging/fsl_qbman/qman_driver.c b/drivers/staging/fsl_qbman/qman_driver.c
index c163ddd..6a98595 100644
--- a/drivers/staging/fsl_qbman/qman_driver.c
+++ b/drivers/staging/fsl_qbman/qman_driver.c
@@ -32,6 +32,7 @@
 #include "qman_private.h"
 
 #include <linux/iommu.h>
+#include <asm/smp.h>	/* hard_smp_processor_id() if !CONFIG_SMP */
 
 /* Global variable containing revision id (even on non-control plane systems
  * where CCSR isn't available) */
-- 
1.8.4.93.g57e4c17

