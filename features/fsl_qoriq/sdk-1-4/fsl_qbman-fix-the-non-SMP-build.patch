From 4ff1388e91d327f6094a3d0b85d10c8221665d2d Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Fri, 26 Jul 2013 10:43:38 +0800
Subject: [PATCH 153/430] fsl_qbman: fix the non-SMP build

The <linux/smp.h> header only includes <asm/smp.h> if CONFIG_SMP is
defined, yet it is required in the non-SMP case too.

Signed-off-by: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Change-Id: I0644bca53a0afeb3eb331956f7e4b20959f2a3d6
Reviewed-on: http://git.am.freescale.net:8181/2419
Reviewed-by: Wood Scott-B07421 <scottwood@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[original patch is from QorIQ-SDK-V1.4-20130625-yocto]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/qman_driver.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_qbman/qman_driver.c b/drivers/staging/fsl_qbman/qman_driver.c
index 93624f9..5ee41d3 100644
--- a/drivers/staging/fsl_qbman/qman_driver.c
+++ b/drivers/staging/fsl_qbman/qman_driver.c
@@ -31,6 +31,8 @@
 
 #include "qman_private.h"
 
+#include <asm/smp.h>	/* hard_smp_processor_id() if !CONFIG_SMP */
+
 /* Global variable containing revision id (even on non-control plane systems
  * where CCSR isn't available) */
 u16 qman_ip_rev;
-- 
1.7.5.4

