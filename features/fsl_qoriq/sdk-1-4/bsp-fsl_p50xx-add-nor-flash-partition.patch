From 585ae02bfa41b9c442ca16a3d832b3b5c63da764 Mon Sep 17 00:00:00 2001
From: Yongli He <yongli.he@windriver.com>
Date: Sun, 9 Oct 2011 14:21:36 +0800
Subject: [PATCH 503/547] bsp:fsl_p50xx: add nor flash partition

add nor flash partition per nor flash layout.

Signed-off-by: Yongli He <yongli.he@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p5020ds.dts | 54 +++++++++++++++++++++++++++++++++++++++
 arch/powerpc/boot/dts/p5040ds.dts | 53 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 107 insertions(+)

diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index 2f63323..59b2439 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -261,6 +261,60 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "kernel";
+				reg = <0x20000 0x500000>;
+			};
+			partition@520000 {
+				label = "dtb";
+				reg = <0x520000 0x20000>;
+			};
+			partition@540000 {
+				label = "fs1";
+				reg = <0x540000 0x3a40000>;
+			};
+			partition@3f80000 {
+				label = "alt-u-boot";
+				reg = <0x3f80000 0x80000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "alt-rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "fs2";
+				reg = <0x4020000  0x2fe0000>;
+			};
+			partition@7000000 {
+				label = "fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "fs3";
+				reg = <0x7020000  0xf40000>;
+			};
+			partition@7f60000 {
+				label = "u-boot env";
+				reg = <0x7f60000  0x20000>;
+				read-only;
+			};
+			partition@7f80000 {
+				label = "u-boot";
+				reg = <0x7f80000 0x80000>;
+				read-only;
+			};
+
 		};
 
 		nand@2,0 {
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 934ebb0..cb37883 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -309,6 +309,59 @@
 			reg = <0 0 0x08000000>;
 			bank-width = <2>;
 			device-width = <2>;
+			#size-cells = <1>;
+			#address-cells = <1>;
+
+			partition@0 {
+				label = "rcw";
+				reg = <0x0 0x20000>;
+				read-only;
+			};
+			partition@20000 {
+				label = "kernel";
+				reg = <0x20000 0x500000>;
+			};
+			partition@520000 {
+				label = "dtb";
+				reg = <0x520000 0x20000>;
+			};
+			partition@540000 {
+				label = "fs1";
+				reg = <0x540000 0x3a40000>;
+			};
+			partition@3f80000 {
+				label = "alt-u-boot";
+				reg = <0x3f80000 0x80000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "alt-rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "fs2";
+				reg = <0x4020000  0x2fe0000>;
+			};
+			partition@7000000 {
+				label = "fman-firmware";
+				reg = <0x7000000 0x20000>;
+				read-only;
+			};
+			partition@7020000 {
+				label = "fs3";
+				reg = <0x7020000  0xf60000>;
+			};
+			partition@7f60000 {
+				label = "u-boot env";
+				reg = <0x7f60000  0x20000>;
+				read-only;
+			};
+			partition@7f80000 {
+				label = "u-boot";
+				reg = <0x7f80000 0x80000>;
+				read-only;
+			};
 		};
 
 		nand@2,0 {
-- 
1.8.4.93.g57e4c17

