From 863bc6791ea2298dada775499b99fb51c14aa2a3 Mon Sep 17 00:00:00 2001
From: Xie Xiaobo <X.Xie@freescale.com>
Date: Wed, 4 Dec 2013 16:50:15 +0800
Subject: [PATCH 367/383] powerpc/85xx: dts: enlarge kernel image patition in
 nor Flash

Enlarge kernel image nor-patition for some P1/P2 boards that include
p1020rdb-pd, p1021rdb-pc, p1022ds, p1025twr, and p2020rdb-pc.

Signed-off-by: Xie Xiaobo <X.Xie@freescale.com>
Change-Id: Id1026ee08ae121576bbfc0d71acc9ae2086292bc
Reviewed-on: http://git.am.freescale.net:8181/7059
Reviewed-by: Tiefei Zang <roy.zang@freescale.com>
Reviewed-by: Thomas Trefny <Tom.Trefny@freescale.com>
Tested-by: Richard Schmitt <B43082@freescale.com>
[Original patch taken from QorIQ-SDK-V1.5-SOURCE-20131219-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1020rdb-pd.dtsi |   10 +++++-----
 arch/powerpc/boot/dts/p1021rdb-pc.dtsi |   14 +++++++-------
 arch/powerpc/boot/dts/p1022ds.dtsi     |   10 +++++-----
 arch/powerpc/boot/dts/p1025twr.dtsi    |   12 ++++++------
 arch/powerpc/boot/dts/p2020rdb-pc.dtsi |   14 +++++++-------
 5 files changed, 30 insertions(+), 30 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
index 6e07fa7..e994ad9 100644
--- a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
+++ b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
@@ -48,14 +48,14 @@
 		};
 
 		partition@20000 {
-			/* 3.875 MB for Linux Kernel Image */
-			reg = <0x00020000 0x003e0000>;
+			/* 5.875 MB for Linux Kernel Image */
+			reg = <0x00020000 0x005e0000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 58MB for Root file System */
-			reg = <0x00400000 0x03a00000>;
+		partition@600000 {
+			/* 56MB for Root file System */
+			reg = <0x00600000 0x03800000>;
 			label = "NOR Root File System";
 		};
 
diff --git a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
index d6274c5..bb4bfad 100644
--- a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1021 RDB Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2012 Freescale Semiconductor Inc.
+ * Copyright 2012-2013 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -56,15 +56,15 @@
 		};
 
 		partition@80000 {
-			/* 3.5 MB for Linux Kernel Image */
-			reg = <0x00080000 0x00380000>;
+			/* 4.5 MB for Linux Kernel Image */
+			reg = <0x00080000 0x00480000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 10.75MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00ac0000>;
-			label = "NOR JFFS2 Root File System";
+		partition@500000 {
+			/* 9.75MB for Root file System */
+			reg = <0x00500000 0x009c0000>;
+			label = "NOR Root File System";
 		};
 
 		partition@ec0000 {
diff --git a/arch/powerpc/boot/dts/p1022ds.dtsi b/arch/powerpc/boot/dts/p1022ds.dtsi
index d1d9cd1..6e06a06 100644
--- a/arch/powerpc/boot/dts/p1022ds.dtsi
+++ b/arch/powerpc/boot/dts/p1022ds.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1022 DS Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2012 Freescale Semiconductor Inc.
+ * Copyright 2012-2013 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -60,14 +60,14 @@
 		};
 
 		partition@4000000 {
-			reg = <0x04000000 0x00400000>;
+			reg = <0x04000000 0x00600000>;
 			label = "kernel-nor";
 			read-only;
 		};
 
-		partition@4400000 {
-			reg = <0x04400000 0x03b00000>;
-			label = "jffs2-nor";
+		partition@4600000 {
+			reg = <0x04600000 0x03900000>;
+			label = "rfs-nor";
 		};
 
 		partition@7f00000 {
diff --git a/arch/powerpc/boot/dts/p1025twr.dtsi b/arch/powerpc/boot/dts/p1025twr.dtsi
index 0d550ad..79f2214 100644
--- a/arch/powerpc/boot/dts/p1025twr.dtsi
+++ b/arch/powerpc/boot/dts/p1025twr.dtsi
@@ -63,15 +63,15 @@
 		};
 
 		partition@80000 {
-			/* 3.5 MB for Linux Kernel Image */
-			reg = <0x00080000 0x00380000>;
+			/* 5.5 MB for Linux Kernel Image */
+			reg = <0x00080000 0x00580000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 58.75MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x03ac0000>;
-			label = "NOR JFFS2 Root File System";
+		partition@600000 {
+			/* 56.75MB for Root file System */
+			reg = <0x00600000 0x038c0000>;
+			label = "NOR Root File System";
 		};
 
 		partition@ec0000 {
diff --git a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
index 154fba4..d95f6ca 100644
--- a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
@@ -1,7 +1,7 @@
 /*
  * P2020 RDB-PC Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2011 Freescale Semiconductor Inc.
+ * Copyright 2011, 2013 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -56,15 +56,15 @@
 		};
 
 		partition@80000 {
-			/* 3.5 MB for Linux Kernel Image */
-			reg = <0x00080000 0x00380000>;
+			/* 4.5 MB for Linux Kernel Image */
+			reg = <0x00080000 0x00480000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 11MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00b00000>;
-			label = "NOR JFFS2 Root File System";
+		partition@500000 {
+			/* 10MB for Root file System */
+			reg = <0x00500000 0x00a00000>;
+			label = "NOR Root File System";
 		};
 
 		partition@f00000 {
-- 
1.7.5.4

