From bf8065f7da7959ba5f0e561cc2d75bd698b49946 Mon Sep 17 00:00:00 2001
From: Haijun Zhang <Haijun.Zhang@freescale.com>
Date: Mon, 14 Oct 2013 16:06:07 +0800
Subject: [PATCH 220/383] mmc:esdhc: Update io entry for byte access

Esdch host only support 32b access. So update sdhci_reab
to esdhc_readb to avoid this access restrict.
There bit offset in esdhc_readb.

Signed-off-by: Haijun Zhang <haijun.zhang@freescale.com>
Change-Id: Ieb9801ec5ecbebeb764e623143812465efa4e62d
Reviewed-on: http://git.am.freescale.net:8181/5520
Reviewed-by: Xie Xiaobo-R63061 <X.Xie@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.5-SOURCE-20131219-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/mmc/host/sdhci-of-esdhc.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/mmc/host/sdhci-of-esdhc.c b/drivers/mmc/host/sdhci-of-esdhc.c
index 2420327..a0fed26 100644
--- a/drivers/mmc/host/sdhci-of-esdhc.c
+++ b/drivers/mmc/host/sdhci-of-esdhc.c
@@ -152,7 +152,7 @@ static void esdhc_writeb(struct sdhci_host *host, u8 val, int reg)
 		if (SVR_SOC_VER(svr) == SVR_T4240) {
 			u8 vol;
 
-			vol = sdhci_be32bs_readb(host, reg);
+			vol = esdhc_readb(host, reg);
 			if (host->pwr == SDHCI_POWER_180)
 				vol &= ~ESDHC_VOL_SEL;
 			else
-- 
1.7.5.4

