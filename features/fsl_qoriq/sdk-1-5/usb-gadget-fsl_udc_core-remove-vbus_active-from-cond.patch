From 94f5069fa15f4c19fa7d55a445a93bc5358810fd Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Mon, 20 Jan 2014 16:27:28 +0800
Subject: [PATCH 381/383] usb: gadget: fsl_udc_core: remove vbus_active from
 conditions to pullup

If vbus session is not created, the gadget can't pull up.
The vbus session is used for an external transceiver that detects VBUS
power, and it is not a prerequisite to pull up.

Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/usb/gadget/fsl_udc_core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/usb/gadget/fsl_udc_core.c b/drivers/usb/gadget/fsl_udc_core.c
index 6444bb0..ecc31ce 100644
--- a/drivers/usb/gadget/fsl_udc_core.c
+++ b/drivers/usb/gadget/fsl_udc_core.c
@@ -1170,7 +1170,7 @@ static int fsl_wakeup(struct usb_gadget *gadget)
 
 static int can_pullup(struct fsl_udc *udc)
 {
-	return udc->driver && udc->softconnect && udc->vbus_active;
+	return udc->driver && udc->softconnect;
 }
 
 /* Notify controller that VBUS is powered, Called by whatever
-- 
1.7.5.4

