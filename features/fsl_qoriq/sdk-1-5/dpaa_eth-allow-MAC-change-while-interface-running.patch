From 4c55e6768c5d6bd55db8fe49af79acb99439cd20 Mon Sep 17 00:00:00 2001
From: Marian Rotariu <marian.rotariu@freescale.com>
Date: Tue, 16 Apr 2013 21:45:11 +0000
Subject: [PATCH 042/429] dpaa_eth: allow MAC change while interface running

Added private flag to net device to let user change the physical
address even if the interface is up

Signed-off-by: Marian Rotariu <marian.rotariu@freescale.com>
Change-Id: I2b07a9e8ac86dae097e69882c4ea372a07899137
Reviewed-on: http://git.am.freescale.net:8181/1537
Reviewed-by: Hamciuc Bogdan-BHAMCIU1 <bogdan.hamciuc@freescale.com>
Reviewed-by: Sovaiala Cristian-Constantin-B39531 <Cristian.Sovaiala@freescale.com>
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
[origin patch is from QorIQ-SDK-V1.5-20131219-yocto]
Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 425c7d4..1641a07 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -3788,6 +3788,8 @@ static int dpa_netdev_init(struct device_node *dpa_node,
 		}
 	}
 
+	net_dev->priv_flags |= IFF_LIVE_ADDR_CHANGE;
+
 	net_dev->features |= net_dev->hw_features;
 	net_dev->vlan_features = net_dev->features;
 
-- 
1.7.5.4

