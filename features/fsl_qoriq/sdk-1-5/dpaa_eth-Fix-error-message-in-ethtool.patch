From 9c63f5c68c38ef97fa3d45a2960c949e6388070e Mon Sep 17 00:00:00 2001
From: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Date: Tue, 27 Aug 2013 09:29:50 +0300
Subject: [PATCH 189/429] dpaa_eth: Fix error message in ethtool

Interfaces only get their PHYs initialized when they are first
brought up, therefore running ethtool on an interface that is down
prints an error message and returns with error code.
Lower the print to debug mode and return non-error code.

Signed-off-by: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Change-Id: Ic4e9304cf9e6152868af74a31132e92d95713b62
Reviewed-on: http://git.am.freescale.net:8181/4259
Reviewed-by: Radulescu Ruxandra Ioana-B05472 <ruxandra.radulescu@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/4466
Reviewed-by: Sovaiala Cristian-Constantin-B39531 <Cristian.Sovaiala@freescale.com>
[origin patch is from QorIQ-SDK-V1.5-20131219-yocto]
Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpa-ethtool.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
index 26a0202..07a0d39 100644
--- a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
@@ -86,8 +86,8 @@ static int __cold dpa_get_settings(struct net_device *net_dev, struct ethtool_cm
 		return -ENODEV;
 	}
 	if (unlikely(priv->mac_dev->phy_dev == NULL)) {
-		netdev_err(net_dev, "phy device not initialized\n");
-		return -ENODEV;
+		netdev_dbg(net_dev, "phy device not initialized\n");
+		return 0;
 	}
 
 	_errno = phy_ethtool_gset(priv->mac_dev->phy_dev, et_cmd);
-- 
1.7.5.4

