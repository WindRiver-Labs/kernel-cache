From 12b60989dd7fde0e1f84accb54979deeef623364 Mon Sep 17 00:00:00 2001
From: Radu Bulie <radu.bulie@freescale.com>
Date: Tue, 5 Nov 2013 13:24:36 +0000
Subject: [PATCH 283/383] dpa_offload: Add macless interface for ipsec host
 tunnels

Ipsec offload new configuration requires an extra macless
for ipsec host tunnels

Signed-off-by: Radu Bulie <radu.bulie@freescale.com>
Change-Id: I175f1e10f0981a2d7c23ff9a01f7853ad5d99ce6
Reviewed-on: http://git.am.freescale.net:8181/6279
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Marian-Cornel Chereji <marian.chereji@freescale.com>
Reviewed-by: Thomas Trefny <Tom.Trefny@freescale.com>
[Original patch taken from QorIQ-SDK-V1.5-SOURCE-20131219-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 .../dts/p2041rdb-usdpaa-shared-interfaces.dts      |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dpa_offload/dts/p2041rdb-usdpaa-shared-interfaces.dts b/drivers/staging/fsl_dpa_offload/dts/p2041rdb-usdpaa-shared-interfaces.dts
index 106218e..0572726 100644
--- a/drivers/staging/fsl_dpa_offload/dts/p2041rdb-usdpaa-shared-interfaces.dts
+++ b/drivers/staging/fsl_dpa_offload/dts/p2041rdb-usdpaa-shared-interfaces.dts
@@ -132,6 +132,14 @@
                         fsl,qman-frame-queues-tx = <5008 8>;
                         local-mac-address = [00 11 22 33 44 66];
                 };
+		ethernet@18 {
+                        compatible = "fsl,p2041-dpa-ethernet", "fsl,dpa-ethernet-macless";
+                        fsl,bman-buffer-pools = <&bp16>;
+                        fsl,qman-frame-queues-rx = <6000 8>;
+                        fsl,qman-frame-queues-tx = <6008 8>;
+                        local-mac-address = [00 11 22 33 44 77];
+                };
+
                 dpa-fman0-oh@1 {
                         compatible = "fsl,dpa-oh";
                         fsl,qman-frame-queues-oh = <0x64 1 0x65 1>;
-- 
1.7.5.4

