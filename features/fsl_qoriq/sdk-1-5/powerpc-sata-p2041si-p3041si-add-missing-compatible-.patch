From 434c50a9b5b658295a8b6baf3db9c27fdfb9cf25 Mon Sep 17 00:00:00 2001
From: Bin Jiang <bin.jiang@windriver.com>
Date: Wed, 15 Jan 2014 17:28:48 +0800
Subject: [PATCH 374/383] powerpc/sata: p2041si/p3041si: add missing
 compatible for sata workaround

A workaround is needed for sata controller version 1.0 on p2041/p3041/p5020,
but the compatible which the workaround based on is missing in new device
tree infrastructure, this will cause sata probe failed.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
[Extracted from QorIQ-SDK-V1.3-SOURCE-20121114-yocto.iso]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/fsl/p2041si-post.dtsi |    2 ++
 arch/powerpc/boot/dts/fsl/p3041si-post.dtsi |    2 ++
 2 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
index 1e1b810..68265df 100644
--- a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
@@ -438,11 +438,13 @@
 	};
 /include/ "qoriq-sata2-0.dtsi"
 	sata@220000 {
+		compatible = "fsl,p2041-sata", "fsl,pq-sata-v2";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x550>; /* SATA1LIODNR */
 	};
 /include/ "qoriq-sata2-1.dtsi"
 	sata@221000 {
+		compatible = "fsl,p2041-sata", "fsl,pq-sata-v2";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x554>; /* SATA2LIODNR */
 	};
diff --git a/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi b/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
index 1e84f0f..ef45ce3 100644
--- a/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
@@ -465,11 +465,13 @@
 	};
 /include/ "qoriq-sata2-0.dtsi"
 	sata@220000 {
+		compatible = "fsl,p3041-sata", "fsl,pq-sata-v2";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x550>; /* SATA1LIODNR */
 	};
 /include/ "qoriq-sata2-1.dtsi"
 	sata@221000 {
+		compatible = "fsl,p3041-sata", "fsl,pq-sata-v2";
 		fsl,iommu-parent = <&pamu1>;
 		fsl,liodn-reg = <&guts 0x554>; /* SATA2LIODNR */
 	};
-- 
1.7.5.4

