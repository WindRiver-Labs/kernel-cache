From 673a35a73ce15ae63056482d7226bdbedd3fe796 Mon Sep 17 00:00:00 2001
From: Zhao Qiang <B45475@freescale.com>
Date: Wed, 4 Dec 2013 16:47:46 +0800
Subject: [PATCH 396/429] powerpc/p1010rdb-pb:revert
 095980bff39199929bc00b662e170c6eecb5a93b

Revert the patch 095980bff39199929bc00b662e170c6eecb5a93b,
making function autoneg can work in interrupt mode.

Signed-off-by: Zhao Qiang <B45475@freescale.com>
Change-Id: I9b7689b22363a971927572bd4bb3008d3aa320d8
Reviewed-on: http://git.am.freescale.net:8181/7058
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Thomas Trefny <Tom.Trefny@freescale.com>
Tested-by: Zhenhua Luo <zhenhua.luo@freescale.com>
[origin patch is from QorIQ-SDK-V1.5-20131219-yocto]
Signed-off-by: Yang Wei <Wei.Yang@windriver.com>
---
 arch/powerpc/boot/dts/p1010rdb-pb.dts     |   13 +++++++++++++
 arch/powerpc/boot/dts/p1010rdb-pb_36b.dts |   13 +++++++++++++
 2 files changed, 26 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1010rdb-pb.dts b/arch/powerpc/boot/dts/p1010rdb-pb.dts
index 85a7036..6eeb7d3 100644
--- a/arch/powerpc/boot/dts/p1010rdb-pb.dts
+++ b/arch/powerpc/boot/dts/p1010rdb-pb.dts
@@ -19,4 +19,17 @@
 };
 
 /include/ "p1010rdb.dtsi"
+
+&phy0 {
+	interrupts = <0 1 0 0>;
+};
+
+&phy1 {
+	interrupts = <2 1 0 0>;
+};
+
+&phy2 {
+	interrupts = <1 1 0 0>;
+};
+
 /include/ "fsl/p1010si-post.dtsi"
diff --git a/arch/powerpc/boot/dts/p1010rdb-pb_36b.dts b/arch/powerpc/boot/dts/p1010rdb-pb_36b.dts
index bc0cedd..7ab3c90 100644
--- a/arch/powerpc/boot/dts/p1010rdb-pb_36b.dts
+++ b/arch/powerpc/boot/dts/p1010rdb-pb_36b.dts
@@ -42,4 +42,17 @@
 };
 
 /include/ "p1010rdb.dtsi"
+
+&phy0 {
+	interrupts = <0 1 0 0>;
+};
+
+&phy1 {
+	interrupts = <2 1 0 0>;
+};
+
+&phy2 {
+	interrupts = <1 1 0 0>;
+};
+
 /include/ "fsl/p1010si-post.dtsi"
-- 
1.7.5.4

