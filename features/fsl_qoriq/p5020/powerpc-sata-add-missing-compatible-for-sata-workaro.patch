From 95c4afbb4c62155adaeddff7d267fc20ca9d4f14 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Tue, 27 Mar 2012 18:46:30 +0800
Subject: [PATCH 05/19] powerpc/sata: add missing compatible for sata
 workaround

A workaround is needed for sata controller version 1.0 on p2041/p3041/p5020,
but the compatible which the workaround based on is missing in new device
tree infrastructure, this will cause sata probe failed.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
[Yongli: Original patch taken from FSL
    QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Integrated-by: Yongli He <yongli.he@windriver.com>
---
 arch/powerpc/boot/dts/fsl/p5020si-post.dtsi |    6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
index 0d24f57..9db27e9 100644
--- a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
@@ -355,7 +355,13 @@
 		};
 
 /include/ "qoriq-sata2-0.dtsi"
+	sata@220000 {
+		compatible = "fsl,p5020-sata", "fsl,pq-sata-v2";
+	};
 /include/ "qoriq-sata2-1.dtsi"
+	sata@221000 {
+		compatible = "fsl,p5020-sata", "fsl,pq-sata-v2";
+	};
 /include/ "qoriq-sec4.2-0.dtsi"
 /include/ "qoriq-raid1.0-0.dtsi"
 };
-- 
1.7.9.7

