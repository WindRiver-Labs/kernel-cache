From 1b8f016e21b867da00ce82f9a553f908f941c0a0 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Thu, 8 Nov 2012 13:40:19 +0200
Subject: [PATCH 137/227] T4240QDS/dts: disable ports lacking resources

Not all ports can be used at once on the T4240, disabled all
Offline Parsing ports and first five 1Gbps ports that we did not
have enough resources for. Remaining are all 10Gbps ports plus
one 1Gbps port per FMan and one Host Command port per FMan.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/t4240qds.dts |   40 ++++++++++++++++++++++++++++++++++++
 1 file changed, 40 insertions(+)

diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index decc6e1..4854c26 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -190,6 +190,21 @@
 				fixed-link = <8 1 10000 0 0 >;
 				phy-connection-type = "xgmii";
 			};
+			fman0_oh2 {
+				status = "disabled";
+			};
+			fman0_oh3 {
+				status = "disabled";
+			};
+			fman0_oh4 {
+				status = "disabled";
+			};
+			fman0_oh5 {
+				status = "disabled";
+			};
+			fman0_oh6 {
+				status = "disabled";
+			};
 		};
 		fman1: fman@500000 {
 			enet8: ethernet@e0000 {
@@ -231,6 +246,21 @@
 				fixed-link = <18 1 10000 0 0 >;
 				phy-connection-type = "xgmii";
 			};
+			fman1_oh2 {
+				status = "disabled";
+			};
+			fman1_oh3 {
+				status = "disabled";
+			};
+			fman1_oh4 {
+				status = "disabled";
+			};
+			fman1_oh5 {
+				status = "disabled";
+			};
+			fman1_oh6 {
+				status = "disabled";
+			};
 		};
 	};
 
@@ -309,22 +339,27 @@
 		ethernet@0 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet0>;
+			status = "disabled";
 		};
 		ethernet@1 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet1>;
+			status = "disabled";
 		};
 		ethernet@2 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet2>;
+			status = "disabled";
 		};
 		ethernet@3 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet3>;
+			status = "disabled";
 		};
 		ethernet@4 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet4>;
+			status = "disabled";
 		};
 		ethernet@5 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
@@ -341,22 +376,27 @@
 		ethernet@8 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet8>;
+			status = "disabled";
 		};
 		ethernet@9 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet9>;
+			status = "disabled";
 		};
 		ethernet@10 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet10>;
+			status = "disabled";
 		};
 		ethernet@11 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet11>;
+			status = "disabled";
 		};
 		ethernet@12 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
 			fsl,fman-mac = <&enet12>;
+			status = "disabled";
 		};
 		ethernet@13 {
 			compatible = "fsl,t4240-dpa-ethernet", "fsl,dpa-ethernet";
-- 
1.7.9.7

