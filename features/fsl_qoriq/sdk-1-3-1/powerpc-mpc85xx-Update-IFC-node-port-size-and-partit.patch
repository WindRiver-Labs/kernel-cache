From cd8110f554ddaf581a955a066ceb102a0693b850 Mon Sep 17 00:00:00 2001
From: Prabhakar Kushwaha <prabhakar@freescale.com>
Date: Tue, 11 Sep 2012 17:50:13 +0000
Subject: [PATCH 063/227] powerpc/mpc85xx:Update IFC node port size and
 partition for T4qds

T4240QDS has S29GL01GS11TFI010 NOR flash i.e. 128 MB, 16 bit NOR.
Update "bank-width" property of NOR.

Delete NOR partitions to make it backward compatible.

Signed-off-by: Prabhakar Kushwaha <prabhakar@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/t4240qds.dts |   39 ++----------------------------------
 1 file changed, 2 insertions(+), 37 deletions(-)

diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index ad84596..c8afcf3 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -52,44 +52,9 @@
 			#size-cells = <1>;
 			compatible = "cfi-flash";
 			reg = <0x0 0x0 0x8000000>;
-			/* TODO: Update bank-width depending upon
-			 * on-board Flash
-			 */
-			bank-width = <1>;
-			device-width = <1>;
-
-			partition@0 {
-				/* This location must not be altered  */
-				/* 1MB for Vitesse 7385 Switch firmware */
-				reg = <0x0 0x00100000>;
-				label = "NOR  Vitesse-7385 Firmware";
-			};
-
-			partition@100000 {
-				/* 1MB for DTB Image */
-				reg = <0x00100000 0x00100000>;
-				label = "NOR  DTB Image";
-			};
 
-			partition@200000 {
-				/* 10 MB for Linux Kernel Image */
-				reg = <0x00200000 0x00A00000>;
-				label = "NOR  Linux Kernel Image";
-			};
-
-			partition@C00000 {
-				/* 115MB for JFFS2 based Root file System */
-				reg = <0x00C00000 0x07300000>;
-				label = "NOR  JFFS2 Root File System";
-			};
-
-			partition@7F00000 {
-				/* This location must not be altered  */
-				/* 512KB for u-boot Bootloader Image */
-				/* 512KB for u-boot Environment Variables */
-				reg = <0x07F00000 0x00100000>;
-				label = "NOR U-Boot Image";
-			};
+			bank-width = <2>;
+			device-width = <1>;
 		};
 
 		nand@2,0 {
-- 
1.7.9.7

