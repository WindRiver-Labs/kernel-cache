From 2934d75fdd96c463ae7578edc6f46e6fe4fde31a Mon Sep 17 00:00:00 2001
From: ramneek mehresh <ramneek.mehresh@freescale.com>
Date: Tue, 18 Sep 2012 11:13:18 +0000
Subject: [PATCH 068/227] qonverge/b4860qds:Add USB controller node for
 B4860QDS

Add USB controller node properties for B4860QDS:
 - compatible, dr_mode, phy_type

Signed-off-by: Ramneek Mehresh <ramneek.mehresh@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/b4860qds.dts          |    5 +++++
 arch/powerpc/boot/dts/fsl/b4860si-post.dtsi |    5 +++++
 2 files changed, 10 insertions(+)

diff --git a/arch/powerpc/boot/dts/b4860qds.dts b/arch/powerpc/boot/dts/b4860qds.dts
index bc79559..7497210 100644
--- a/arch/powerpc/boot/dts/b4860qds.dts
+++ b/arch/powerpc/boot/dts/b4860qds.dts
@@ -161,6 +161,11 @@
 				interrupts = <0x1 0x1 0 0>;
 			};
 		};
+
+		usb@210000 {
+			dr_mode = "host";
+			phy_type = "ulpi";
+		};
 	};
 
 	pci0: pcie@ffe200000 {
diff --git a/arch/powerpc/boot/dts/fsl/b4860si-post.dtsi b/arch/powerpc/boot/dts/fsl/b4860si-post.dtsi
index cf43153..24995d3 100644
--- a/arch/powerpc/boot/dts/fsl/b4860si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/b4860si-post.dtsi
@@ -129,6 +129,11 @@
 /include/ "qoriq-dma-0.dtsi"
 /include/ "qoriq-dma-1.dtsi"
 
+/include/ "qonverge-usb2-dr-0.dtsi"
+	usb0: usb@210000 {
+		compatible = "fsl-usb2-dr-v2.4", "fsl-usb2-dr";
+	};
+
 /include/ "qoriq-espi-0.dtsi"
 	spi@110000 {
 		fsl,espi-num-chipselects = <4>;
-- 
1.7.9.7

