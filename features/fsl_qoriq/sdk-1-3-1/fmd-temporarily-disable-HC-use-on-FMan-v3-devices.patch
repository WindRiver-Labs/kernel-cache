From 78d2f51204cabacebcf1ff0406042845fb1a053e Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Fri, 12 Oct 2012 13:36:48 +0300
Subject: [PATCH 093/227] fmd: temporarily disable HC use on FMan v3 devices

The HC is not functioning on FMan v3 devices. Disabled HC use
until a solution is found.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c     |    4 ++++
 1 file changed, 4 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
index d2b7618..96b412d6 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
@@ -927,7 +927,11 @@ static t_Error InitFmPcdDev(t_LnxWrpFmDev *p_LnxWrpFmDev)
 		fmPcdParams.numOfClsPlanEntries = 0;
 		fmPcdParams.partitionId = 0;
 #endif /* CONFIG_MULTI_PARTITION_SUPPORT */
+#if (DPAA_VERSION >= 11)
+		fmPcdParams.useHostCommand = FALSE;
+#else
 		fmPcdParams.useHostCommand = TRUE;
+#endif
 
 		p_LnxWrpFmDev->hc_tx_fq =
 			FqAlloc(p_LnxWrpFmDev,
-- 
1.7.9.7

