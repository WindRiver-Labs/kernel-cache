From fa86406165821c76cc94530b06c33b9b66d113fa Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Mon, 8 Oct 2012 17:36:27 +0300
Subject: [PATCH 090/227] dpaa_eth: CONFIG_T4_SIMULATOR_WORKAROUND is not
 required

After the FMan LLD was modified the checking made in mac-api.c
for CONFIG_T4_SIMULATOR_WORKAROUND is not required anymore.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/mac-api.c |    2 --
 1 file changed, 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index f2a330e..6de411d 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -272,7 +272,6 @@ static int __devinit __cold memac_init(struct mac_device *mac_dev)
 		goto _return_fm_mac_free;
 	}
 
-#ifndef CONFIG_T4_SIMULATOR_WORKAROUND
 	err = FM_MAC_ConfigResetOnInit(priv->mac, true);
 	_errno = -GET_ERROR_TYPE(err);
 	if (unlikely(_errno < 0)) {
@@ -280,7 +279,6 @@ static int __devinit __cold memac_init(struct mac_device *mac_dev)
 			"FM_MAC_ConfigResetOnInit() = 0x%08x\n", err);
 		goto _return_fm_mac_free;
 	}
-#endif
 
 	err = FM_MAC_Init(priv->mac);
 	_errno = -GET_ERROR_TYPE(err);
-- 
1.7.9.7

