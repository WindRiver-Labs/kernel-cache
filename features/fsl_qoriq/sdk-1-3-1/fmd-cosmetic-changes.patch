From de33308a8f6d35e79dcb44faa5a69243fe2ff204 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Thu, 25 Oct 2012 13:50:58 +0300
Subject: [PATCH 108/227] fmd: cosmetic changes

Small cosmetic fixes.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../inc/integrations/P1023/part_integration_ext.h  |    1 -
 .../dpa/NetCommSw/src/wrapper/fman_test.c          |    1 -
 .../dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c     |   53 ++++++++++----------
 3 files changed, 27 insertions(+), 28 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/inc/integrations/P1023/part_integration_ext.h b/drivers/net/ethernet/freescale/dpa/NetCommSw/inc/integrations/P1023/part_integration_ext.h
index 2b48626..2f91e34 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/inc/integrations/P1023/part_integration_ext.h
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/inc/integrations/P1023/part_integration_ext.h
@@ -378,7 +378,6 @@ t_Error P1023_GetDdrFactor( uintptr_t   gutilBase,
                             uint32_t    *p_DdrDivFactor);
 
 
-
 /** @} */ /* end of 1023_init_grp group */
 /** @} */ /* end of 1023_grp group */
 
diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/fman_test.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/fman_test.c
index a7b5908..bd5379f 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/fman_test.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/fman_test.c
@@ -779,7 +779,6 @@ static void fmt_pcd_fqs_dqrr(
 }
 
 /* private pcd queue template */
-//static const struct qman_fq pcd_fq __devinitconst = {
 static const struct qman_fq pcd_fq = {
 	.cb = { .dqrr = fmt_pcd_dqrr,
 		.ern = fmt_pcd_err_dqrr,
diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
index 51126e0..08dd422 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_fm_port.c
@@ -525,9 +525,9 @@ static t_Error InitFmPortDev(t_LnxWrpFmPortDev *p_LnxWrpFmPortDev)
 					FM_PORT_ConfigExtBufPools,
 					NCSW_PARAMS(1, (t_FmExtPools *)))
 
-                /* this define contains an else */
-                MY_ADV_CONFIG_CHECK_END
-                }
+		/* this define contains an else */
+		MY_ADV_CONFIG_CHECK_END
+		}
 
 			/* Advance to next advanced configuration entry */
 			i++;
@@ -639,6 +639,8 @@ void fm_set_rx_port_params(struct fm_port *port,
 }
 EXPORT_SYMBOL(fm_set_rx_port_params);
 
+/* this function is called from oh_probe as well, thus it contains oh port
+ * specific parameters (make sure everything is checked) */
 void fm_set_tx_port_params(struct fm_port *port,
 			   struct fm_port_non_rx_params *params)
 {
@@ -657,35 +659,34 @@ void fm_set_tx_port_params(struct fm_port *port,
 		params->hash_results;
 	p_LnxWrpFmPortDev->buffPrefixContent.passTimeStamp =
 		params->time_stamp;
+	p_LnxWrpFmPortDev->settings.frag_enabled = FALSE;
 
-    p_LnxWrpFmPortDev->settings.frag_enabled = FALSE;
-
-    if ((params->frag_enable == TRUE) &&
-        (p_LnxWrpFmPortDev->settings.param.portType ==
-            e_FM_PORT_TYPE_OH_OFFLINE_PARSING)) {
+	if ((params->frag_enable == TRUE) &&
+		(p_LnxWrpFmPortDev->settings.param.portType ==
+			e_FM_PORT_TYPE_OH_OFFLINE_PARSING)) {
 
-        p_LnxWrpFmPortDev->settings.frag_enabled = TRUE;
-        p_LnxWrpFmPortDev->buffPrefixContent.dataAlign =
-            FRAG_DATA_ALIGN;
-        p_LnxWrpFmPortDev->buffPrefixContent.manipExtraSpace =
-            FRAG_MANIP_SPACE;
-    }
+		p_LnxWrpFmPortDev->settings.frag_enabled = TRUE;
+		p_LnxWrpFmPortDev->buffPrefixContent.dataAlign =
+			FRAG_DATA_ALIGN;
+		p_LnxWrpFmPortDev->buffPrefixContent.manipExtraSpace =
+			FRAG_MANIP_SPACE;
+	}
 
 	ADD_ADV_CONFIG_START(p_LnxWrpFmPortDev->settings.advConfig,
 			     FM_MAX_NUM_OF_ADV_SETTINGS)
 
-    ADD_ADV_CONFIG_NO_RET(FM_PORT_ConfigBufferPrefixContent,
-		      ARGS(1,
-                        (&p_LnxWrpFmPortDev->
-                        buffPrefixContent)));
-
-       /* oh port specific parameter (for fragmentation only) */
-       if ((params->frag_enable == TRUE) &&
-           (p_LnxWrpFmPortDev->settings.param.portType ==
-               e_FM_PORT_TYPE_OH_OFFLINE_PARSING)) {
-           ADD_ADV_CONFIG_NO_RET(FM_PORT_ConfigExtBufPools,
-                   ARGS(1, (&params->op_ext_pools)));
-       }
+	ADD_ADV_CONFIG_NO_RET(FM_PORT_ConfigBufferPrefixContent,
+			      ARGS(1,
+				   (&p_LnxWrpFmPortDev->
+				    buffPrefixContent)));
+
+	/* oh port specific parameter (for fragmentation only) */
+	if ((params->frag_enable == TRUE) &&
+	    (p_LnxWrpFmPortDev->settings.param.portType ==
+	     e_FM_PORT_TYPE_OH_OFFLINE_PARSING)) {
+		ADD_ADV_CONFIG_NO_RET(FM_PORT_ConfigExtBufPools,
+				      ARGS(1, (&params->op_ext_pools)));
+	}
 
 	ADD_ADV_CONFIG_END InitFmPortDev(p_LnxWrpFmPortDev);
 }
-- 
1.7.9.7

