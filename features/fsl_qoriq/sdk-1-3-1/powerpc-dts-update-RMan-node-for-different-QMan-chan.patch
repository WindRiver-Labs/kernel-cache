From 2a83554286d4609d8599e68ac4173019c5d7fcd9 Mon Sep 17 00:00:00 2001
From: Lian Minghuan-B31939 <Minghuan.Lian@freescale.com>
Date: Wed, 20 Jun 2012 15:10:42 +0000
Subject: [PATCH 044/227] powerpc/dts: update RMan node for different QMan
 channels ID

P2041 P3041 and P5020 assign QMan channels 0x62 and 0x63 to RMan,
but T4240 assigns QMan channels 0x880 and 0x881 to RMan. So change
RMan dts node to meet the hardware specification.

Signed-off-by: Minghuan Lian <Minghuan.Lian@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/fsl/p2041si-post.dtsi |    4 ++++
 arch/powerpc/boot/dts/fsl/p3041si-post.dtsi |    4 ++++
 arch/powerpc/boot/dts/fsl/p5020si-post.dtsi |    4 ++++
 arch/powerpc/boot/dts/fsl/qoriq-rman-0.dtsi |    1 -
 arch/powerpc/boot/dts/fsl/t4240si-post.dtsi |    4 +++-
 5 files changed, 15 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
index 33bf082..ed88a4a 100644
--- a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
@@ -340,6 +340,10 @@
 /include/ "qoriq-sec4.2-0.dtsi"
 /include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-rman-0.dtsi"
+	rman: rman@1e0000 {
+		fsl,qman-channels-id = <0x62 0x63>;
+	};
+
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 
diff --git a/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi b/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
index ef23d55..749c622 100644
--- a/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p3041si-post.dtsi
@@ -370,6 +370,10 @@
 /include/ "qoriq-sec4.2-0.dtsi"
 /include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-rman-0.dtsi"
+	rman: rman@1e0000 {
+		fsl,qman-channels-id = <0x62 0x63>;
+	};
+
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 
diff --git a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
index fdf4e6f..a6b0402 100644
--- a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
@@ -373,6 +373,10 @@
 /include/ "qoriq-sec4.2-0.dtsi"
 /include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-rman-0.dtsi"
+	rman: rman@1e0000 {
+		fsl,qman-channels-id = <0x62 0x63>;
+	};
+
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 
diff --git a/arch/powerpc/boot/dts/fsl/qoriq-rman-0.dtsi b/arch/powerpc/boot/dts/fsl/qoriq-rman-0.dtsi
index 1418cdb..3fcfdde 100644
--- a/arch/powerpc/boot/dts/fsl/qoriq-rman-0.dtsi
+++ b/arch/powerpc/boot/dts/fsl/qoriq-rman-0.dtsi
@@ -39,7 +39,6 @@ rman: rman@1e0000 {
 	ranges = <0x0 0x1e0000 0x20000>;
 	reg = <0x1e0000 0x20000>;
 	interrupts = <16 2 1 11>; /* err_irq */
-	fsl,qman-channels-id = <0x62 0x63>;
 
 	inbound-block@0 {
 		compatible = "fsl,rman-inbound-block";
diff --git a/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi b/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
index e1f3668..385337b 100644
--- a/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t4240si-post.dtsi
@@ -269,6 +269,9 @@
 /include/ "qoriq-bman1.dtsi"
 
 /include/ "qoriq-rman-0.dtsi"
+	rman: rman@1e0000 {
+		fsl,qman-channels-id = <0x880 0x881>;
+	};
 
 /include/ "qoriq-fman3-0.dtsi"
 /include/ "qoriq-fman3-0-1g-0.dtsi"
@@ -278,5 +281,4 @@
 			fsl,qman-channel-id = <0x802>;
 		};
 	};
-
 };
-- 
1.7.9.7

