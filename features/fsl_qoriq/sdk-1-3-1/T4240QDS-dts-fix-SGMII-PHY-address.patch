From 698396937b36305bb6abb944b6b710ed93f07eb1 Mon Sep 17 00:00:00 2001
From: shaohui xie <Shaohui.Xie@freescale.com>
Date: Wed, 28 Nov 2012 16:35:06 +0000
Subject: [PATCH 191/227] T4240QDS/dts: fix SGMII PHY address

QSGMII card will be used by default, and PHY address of QSGMII card is
variable depends on different slot, since SGMII card will also be used,
so we keep the SGMII card PHY address, U-boot will fix the PHY address
if SGMII card is used instead of QSGMII card.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Signed-off-by: Andy Fleming <afleming@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/t4240qds.dts |   96 ++++++++++++++++++++++++++++++------
 1 file changed, 80 insertions(+), 16 deletions(-)

diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index 0c58fcb..6239abc 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -48,6 +48,22 @@
 		phy_sgmii4 = &phy4;
 		phy_sgmii11 = &phy11;
 		phy_sgmii12 = &phy12;
+		sgmii_phy11 = &sgmiiphy11;
+		sgmii_phy12 = &sgmiiphy12;
+		sgmii_phy13 = &sgmiiphy13;
+		sgmii_phy14 = &sgmiiphy14;
+		sgmii_phy21 = &sgmiiphy21;
+		sgmii_phy22 = &sgmiiphy22;
+		sgmii_phy23 = &sgmiiphy23;
+		sgmii_phy24 = &sgmiiphy24;
+		sgmii_phy31 = &sgmiiphy31;
+		sgmii_phy32 = &sgmiiphy32;
+		sgmii_phy33 = &sgmiiphy33;
+		sgmii_phy34 = &sgmiiphy34;
+		sgmii_phy41 = &sgmiiphy41;
+		sgmii_phy42 = &sgmiiphy42;
+		sgmii_phy43 = &sgmiiphy43;
+		sgmii_phy44 = &sgmiiphy44;
 		emi1_rgmii = &t4240mdio0;
 		emi1_slot1 = &t4240mdio1;
 		emi1_slot2 = &t4240mdio2;
@@ -308,16 +324,28 @@
 					fsl,mdio-muxval = <1>;
 					status = "disabled";
 
-					phy1: ethernet-phy@1c {
+					phy1: ethernet-phy@0 {
+						reg = <0x0>;
+					};
+					phy2: ethernet-phy@1 {
+						reg = <0x1>;
+					};
+					phy3: ethernet-phy@2 {
+						reg = <0x2>;
+					};
+					phy4: ethernet-phy@3 {
+						reg = <0x3>;
+					};
+					sgmiiphy11: ethernet-phy@1c {
 						reg = <0x1c>;
 					};
-					phy2: ethernet-phy@1d {
+					sgmiiphy12: ethernet-phy@1d {
 						reg = <0x1d>;
 					};
-					phy3: ethernet-phy@1e {
+					sgmiiphy13: ethernet-phy@1e {
 						reg = <0x1e>;
 					};
-					phy4: ethernet-phy@1f {
+					sgmiiphy14: ethernet-phy@1f {
 						reg = <0x1f>;
 					};
 				};
@@ -330,16 +358,28 @@
 					fsl,mdio-muxval = <2>;
 					status = "disabled";
 
-					phy5: ethernet-phy@1c {
+					phy5: ethernet-phy@4 {
+						reg = <0x4>;
+					};
+					phy6: ethernet-phy@5 {
+						reg = <0x5>;
+					};
+					phy7: ethernet-phy@6 {
+						reg = <0x6>;
+					};
+					phy8: ethernet-phy@7 {
+						reg = <0x7>;
+					};
+					sgmiiphy21: ethernet-phy@1c {
 						reg = <0x1c>;
 					};
-					phy6: ethernet-phy@1d {
+					sgmiiphy22: ethernet-phy@1d {
 						reg = <0x1d>;
 					};
-					phy7: ethernet-phy@1e {
+					sgmiiphy23: ethernet-phy@1e {
 						reg = <0x1e>;
 					};
-					phy8: ethernet-phy@1f {
+					sgmiiphy24: ethernet-phy@1f {
 						reg = <0x1f>;
 					};
 				};
@@ -352,16 +392,28 @@
 					fsl,mdio-muxval = <3>;
 					status = "disabled";
 
-					phy9: ethernet-phy@1c {
+					phy9: ethernet-phy@8 {
+						reg = <0x8>;
+					};
+					phy10: ethernet-phy@9 {
+						reg = <0x9>;
+					};
+					phy11: ethernet-phy@a {
+						reg = <0xa>;
+					};
+					phy12: ethernet-phy@b {
+						reg = <0xb>;
+					};
+					sgmiiphy31: ethernet-phy@1c {
 						reg = <0x1c>;
 					};
-					phy10: ethernet-phy@1d {
+					sgmiiphy32: ethernet-phy@1d {
 						reg = <0x1d>;
 					};
-					phy11: ethernet-phy@1e {
+					sgmiiphy33: ethernet-phy@1e {
 						reg = <0x1e>;
 					};
-					phy12: ethernet-phy@1f {
+					sgmiiphy34: ethernet-phy@1f {
 						reg = <0x1f>;
 					};
 				};
@@ -374,16 +426,28 @@
 					fsl,mdio-muxval = <4>;
 					status = "disabled";
 
-					phy13: ethernet-phy@1c {
+					phy13: ethernet-phy@c {
+						reg = <0xc>;
+					};
+					phy14: ethernet-phy@d {
+						reg = <0xd>;
+					};
+					phy15: ethernet-phy@e {
+						reg = <0xe>;
+					};
+					phy16: ethernet-phy@f {
+						reg = <0xf>;
+						};
+					sgmiiphy41: ethernet-phy@1c {
 						reg = <0x1c>;
 					};
-					phy14: ethernet-phy@1d {
+					sgmiiphy42: ethernet-phy@1d {
 						reg = <0x1d>;
 					};
-					phy15: ethernet-phy@1e {
+					sgmiiphy43: ethernet-phy@1e {
 						reg = <0x1e>;
 					};
-					phy16: ethernet-phy@1f {
+					sgmiiphy44: ethernet-phy@1f {
 						reg = <0x1f>;
 					};
 				};
-- 
1.7.9.7

