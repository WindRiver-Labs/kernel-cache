From 90e865900733bc9f4f0636a5139a4e585f882993 Mon Sep 17 00:00:00 2001
From: Prabhakar Kushwaha <prabhakar@freescale.com>
Date: Tue, 14 Aug 2012 22:29:27 +0000
Subject: [PATCH 055/227] powerpc/mpc85xx: Fix IFC properties in t4240qds.dts

- CCRBAR IFC memory map space is of size 8K
 - IFC NAND SRAM memory space should 1:1 mapped with u-boot
 - Added FPGA node. It is present on CS3

Signed-off-by: Prabhakar Kushwaha <prabhakar@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/boot/dts/t4240qds.dts |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index 13a28a2..ad84596 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -42,9 +42,10 @@
 	interrupt-parent = <&mpic>;
 
 	ifc: localbus@ffe124000 {
-		reg = <0xf 0xfe124000 0 0x1000>;
+		reg = <0xf 0xfe124000 0 0x2000>;
 		ranges = <0 0 0xf 0xe8000000 0x08000000
-			  2 0 0xf 0xffa00000 0x00010000>;
+			  2 0 0xf 0xff800000 0x00010000
+			  3 0 0xf 0xffdf0000 0x00008000>;
 
 		nor@0,0 {
 			#address-cells = <1>;
@@ -124,6 +125,10 @@
 			};
 		};
 
+		board-control@3,0 {
+			compatible = "fsl,t4240qds-fpga", "fsl,fpga-qixis";
+			reg = <3 0 0x300>;
+		};
 	};
 
 	memory {
-- 
1.7.9.7

