From 4acfed118b95ffd5d311c992e8950ace50d26670 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Tue, 4 Dec 2012 14:19:52 +0200
Subject: [PATCH 213/227] fmd: fix issue in
 FM_PCD_IOC_FRM_REPLIC_GROUP_SET_COMPAT

Fix issue in FM_PCD_IOC_FRM_REPLIC_GROUP_SET_COMPAT IOCTL.
In compat mode the return value of the id is not set due to
invalid parameter to copy_to_user().

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c   |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
index 5a0c52c..b293379 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
@@ -2665,7 +2665,7 @@ invalid_port_id:
 				(ioc_compat_fm_pcd_frm_replic_group_params_t *)
 					compat_ptr(arg),
 					compat_param,
-					sizeof(*compat_ptr)))
+					sizeof(*compat_param)))
 				err = E_WRITE_FAILED;
 
 			XX_Free(compat_param);
-- 
1.7.9.7

