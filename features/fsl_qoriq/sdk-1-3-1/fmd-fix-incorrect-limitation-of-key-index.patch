From 74efed0a5eb8629fbc0d3d2e2120bc6bc7bbce34 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Tue, 23 Oct 2012 14:22:11 +0300
Subject: [PATCH 112/227] fmd: fix incorrect limitation of key index

Key index must be limited to CC_MAX_NUM_OF_KEYS instead of
FM_PCD_MAX_NUM_OF_CC_GROUPS.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../dpa/NetCommSw/Peripherals/FM/Pcd/fm_cc.c       |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/Peripherals/FM/Pcd/fm_cc.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/Peripherals/FM/Pcd/fm_cc.c
index e25ec55..36b08aa 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/Peripherals/FM/Pcd/fm_cc.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/Peripherals/FM/Pcd/fm_cc.c
@@ -2496,7 +2496,7 @@ static t_Error BuildNewNodeAddOrMdfyKeyAndNextEngine(t_Handle
                 ASSERT_COND(p_StatsObj);
 
                 /* Store allocated statistics object */
-                ASSERT_COND(keyIndex < FM_PCD_MAX_NUM_OF_CC_GROUPS);
+                ASSERT_COND(keyIndex < CC_MAX_NUM_OF_KEYS);
                 p_AdditionalInfo->keyAndNextEngineParams[keyIndex].p_StatsObj = p_StatsObj;
 
                 h_StatsAd = p_StatsObj->h_StatsAd;
-- 
1.7.9.7

