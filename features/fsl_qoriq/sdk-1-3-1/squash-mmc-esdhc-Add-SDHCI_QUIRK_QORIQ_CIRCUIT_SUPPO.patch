From c60712b6ca5eb84a00a494b34bb7ad3041896585 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 18 Feb 2013 14:59:25 +0800
Subject: [PATCH 4/4] squash! mmc: esdhc: Add
 SDHCI_QUIRK_QORIQ_CIRCUIT_SUPPORT_VS33 quirk support

This was missed when we were porting patch "squash! mmc: esdhc: Add
SDHCI_QUIRK_QORIQ_CIRCUIT_SUPPORT_VS33 quirk support" from FSL SDK.
We should squash this into the original patch.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/mmc/host/sdhci-pltfm.c |    4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git a/drivers/mmc/host/sdhci-pltfm.c b/drivers/mmc/host/sdhci-pltfm.c
index be207ba..9778bd6 100644
--- a/drivers/mmc/host/sdhci-pltfm.c
+++ b/drivers/mmc/host/sdhci-pltfm.c
@@ -86,8 +86,10 @@ void sdhci_get_of_property(struct platform_device *pdev)
 		    of_device_is_compatible(np, "fsl,mpc8536-esdhc"))
 			host->quirks |= SDHCI_QUIRK_BROKEN_TIMEOUT_VAL;
 
-		if (of_device_is_compatible(np, "fsl,t4240-esdhc"))
+		if (of_device_is_compatible(np, "fsl,t4240-esdhc")) {
 			host->quirks |= SDHCI_QUIRK_BROKEN_ADMA;
+			host->quirks |= SDHCI_QUIRK_QORIQ_CIRCUIT_SUPPORT_VS33;
+		}
 
 		clk = of_get_property(np, "clock-frequency", &size);
 		if (clk && size == sizeof(*clk) && *clk)
-- 
1.7.9.7

