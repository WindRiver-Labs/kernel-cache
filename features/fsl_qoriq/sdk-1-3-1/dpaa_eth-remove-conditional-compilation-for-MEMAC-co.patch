From 4c602a8ed16051bbc7576255cf32b8712249999c Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Tue, 6 Nov 2012 11:11:55 +0200
Subject: [PATCH 134/227] dpaa_eth: remove conditional compilation for MEMAC
 code

Although the MEMAC code is not working on non-FMan v3 platforms,
conditional compilation is not wanted in the dpaa_eth driver,
removing FMan version checks.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
[Kevin: Original patch taken from fsl sdk 1.3.1
QorIQ-SDK-V1.3.1-SOURCE-20121220-yocto.iso.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/mac-api.c |    8 --------
 drivers/net/ethernet/freescale/dpa/mac.c     |    2 --
 2 files changed, 10 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index d3afec7..6de411d 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -62,9 +62,7 @@ const char	*mac_driver_description __initconst = MAC_DESCRIPTION;
 const size_t	 mac_sizeof_priv[] __devinitconst = {
 	[DTSEC] = sizeof(struct mac_priv_s),
 	[XGMAC] = sizeof(struct mac_priv_s),
-#ifdef CONFIG_FMAN_T4240
 	[MEMAC] = sizeof(struct mac_priv_s)
-#endif
 };
 
 static const e_EnetMode _100[] __devinitconst =
@@ -239,7 +237,6 @@ _return:
 	return _errno;
 }
 
-#ifdef CONFIG_FMAN_T4240
 static int __devinit __cold memac_init(struct mac_device *mac_dev)
 {
 	int			_errno;
@@ -301,7 +298,6 @@ _return_fm_mac_free:
 _return:
 	return _errno;
 }
-#endif
 
 static int __cold start(struct mac_device *mac_dev)
 {
@@ -817,7 +813,6 @@ static void __devinit __cold setup_xgmac(struct mac_device *mac_dev)
 	mac_dev->uninit		= uninit;
 }
 
-#ifdef CONFIG_FMAN_T4240
 static void __devinit __cold setup_memac(struct mac_device *mac_dev)
 {
 	mac_dev->init_phy	= xgmac_init_phy;
@@ -829,12 +824,9 @@ static void __devinit __cold setup_memac(struct mac_device *mac_dev)
 	mac_dev->set_multi      = set_multi;
 	mac_dev->uninit		= uninit;
 }
-#endif
 
 void (*const mac_setup[])(struct mac_device *mac_dev) __devinitconst = {
 	[DTSEC] = setup_dtsec,
 	[XGMAC] = setup_xgmac,
-#ifdef CONFIG_FMAN_T4240
 	[MEMAC] = setup_memac
-#endif
 };
diff --git a/drivers/net/ethernet/freescale/dpa/mac.c b/drivers/net/ethernet/freescale/dpa/mac.c
index 74e183e..a00524db 100644
--- a/drivers/net/ethernet/freescale/dpa/mac.c
+++ b/drivers/net/ethernet/freescale/dpa/mac.c
@@ -123,11 +123,9 @@ static const struct of_device_id mac_match[] __devinitconst = {
 	[XGMAC] = {
 		.compatible	= "fsl,fman-10g-mac"
 	},
-#ifdef CONFIG_FMAN_T4240
 	[MEMAC] = {
 		.compatible	= "fsl,fman-memac"
 	},
-#endif
 	{}
 };
 MODULE_DEVICE_TABLE(of, mac_match);
-- 
1.7.9.7

