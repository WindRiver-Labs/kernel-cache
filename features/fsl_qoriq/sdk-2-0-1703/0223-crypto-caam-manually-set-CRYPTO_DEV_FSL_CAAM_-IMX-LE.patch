From d9e3bc514e1b8cb31b74e28aed655787b76dc462 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Horia=20Geant=C4=83?= <horia.geanta@nxp.com>
Date: Fri, 16 Dec 2016 12:25:06 +0200
Subject: [PATCH 223/388] crypto: caam - manually set
 CRYPTO_DEV_FSL_CAAM_{IMX,LE}
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

In order to accommdate the fact that multi_v7_defconfig starts
being used also for ARMv8 AArch32 (LS1012A, LS1043A etc.),
CRYPTO_DEV_FSL_CAAM_{IMX,LE} are no longer being automatically set
to "y".
Instead, CONFIG_CRYPTO_DEV_FSL_CAAM_{IMX,LE}=y must specifically
be added in defconfig files where needed (i.MX6/7, LS1021A).

*Note: patch is not upstreamable. A solution that would be accepted
upstream should detect at runtime the platform (i.MX) and
endianness.

Signed-off-by: Horia GeantÄƒ <horia.geanta@nxp.com>
[Original patch taken from SDK-V2.0-1703]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/crypto/caam/Kconfig | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/crypto/caam/Kconfig b/drivers/crypto/caam/Kconfig
index ca8873c..a75aa3b 100644
--- a/drivers/crypto/caam/Kconfig
+++ b/drivers/crypto/caam/Kconfig
@@ -144,12 +144,12 @@ config CRYPTO_DEV_FSL_CAAM_RNG_API
 	  will be called caamrng.
 
 config CRYPTO_DEV_FSL_CAAM_IMX
-	def_bool SOC_IMX6 || SOC_IMX7D
-	depends on CRYPTO_DEV_FSL_CAAM
+	bool "CAAM running on an i.MX6/7 platform"
+	depends on CRYPTO_DEV_FSL_CAAM && (SOC_IMX6 || SOC_IMX7D)
 
 config CRYPTO_DEV_FSL_CAAM_LE
-	def_bool (CRYPTO_DEV_FSL_CAAM_IMX || SOC_LS1021A) && !ARCH_LAYERSCAPE
-	depends on CRYPTO_DEV_FSL_CAAM
+	bool "CAAM is little endian"
+	depends on CRYPTO_DEV_FSL_CAAM && (CRYPTO_DEV_FSL_CAAM_IMX || SOC_LS1021A) && !ARCH_LAYERSCAPE
 
 config CRYPTO_DEV_FSL_CAAM_DEBUG
 	bool "Enable debug output in CAAM driver"
-- 
2.9.3

