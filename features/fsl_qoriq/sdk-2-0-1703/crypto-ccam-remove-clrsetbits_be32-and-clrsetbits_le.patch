From b853d814144635b19447cc2d460887d71c6e7b67 Mon Sep 17 00:00:00 2001
From: Liu Haitao <haitao.liu@windriver.com>
Date: Wed, 20 Dec 2017 00:07:09 -0800
Subject: [PATCH] crypto: ccam - remove clrsetbits_be32 and clrsetbits_le32

There are some kernel warnings of duplicate definition  When build image for
arm.
The clrsetbits_be32 and clrsetbits_le32 have been defined in "include/asm/io.h".

So they should not be defined again in "ccam/regs.h".

The standard do not have this issue, for the following commit have indirectly
fixed it.

"""
    261ea058f016bc04fa064348ad9bf39d94379381
"""

As this commit is complex and inapplicable for the current kernel, we just adopt
a simple approach to fix it.

Signed-off-by: Liu Haitao <haitao.liu@windriver.com>
---
 drivers/crypto/caam/regs.h |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/crypto/caam/regs.h b/drivers/crypto/caam/regs.h
index c98db5c..1354a5e 100644
--- a/drivers/crypto/caam/regs.h
+++ b/drivers/crypto/caam/regs.h
@@ -78,8 +78,6 @@
 #define clrsetbits(type, addr, clear, set) \
 	out_##type((addr), (in_##type(addr) & ~(clear)) | (set))
 
-#define clrsetbits_be32(addr, clear, set) clrsetbits(be32, addr, clear, set)
-#define clrsetbits_le32(addr, clear, set) clrsetbits(le32, addr, clear, set)
 #endif
 
 #ifdef CONFIG_CRYPTO_DEV_FSL_CAAM_LE
@@ -91,7 +89,8 @@
 #define cpu_to_caam64(value) cpu_to_le64(value)
 #define wr_reg32(reg, data) iowrite32(data, reg)
 #define rd_reg32(reg) ioread32(reg)
-#define clrsetbits_32(addr, clear, set) clrsetbits_le32(addr, clear, set)
+#define clrsetbits_32(addr, clear, set) clrsetbits(le32, addr, clear, set)
+
 #else
 #define caam16_to_cpu(value) be16_to_cpu(value)
 #define cpu_to_caam16(value) cpu_to_be16(value)
@@ -101,7 +100,8 @@
 #define cpu_to_caam64(value) cpu_to_be64(value)
 #define wr_reg32(reg, data) iowrite32be(data, reg)
 #define rd_reg32(reg) ioread32be(reg)
-#define clrsetbits_32(addr, clear, set) clrsetbits_be32(addr, clear, set)
+#define clrsetbits_32(addr, clear, set) clrsetbits(be32, addr, clear, set)
+
 #endif
 
 #ifdef CONFIG_ARCH_DMA_ADDR_T_64BIT
-- 
1.7.5.4

