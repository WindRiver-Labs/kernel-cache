From 543f80f8f24308d2d7be39cf166dfcd02db1a88c Mon Sep 17 00:00:00 2001
From: Mandy Lavi <mandy.lavi@freescale.com>
Date: Thu, 30 Apr 2015 17:04:21 +0900
Subject: [PATCH 962/987] fmd: add replication of relative_storage_profile_id
 in compat layer

Change-Id: I408d577d952f3ce9237dce1105ef1e577ad2cc6b
Signed-off-by: Mandy Lavi <mandy.lavi@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/35819
Reviewed-by: Eyal Harari <Eyal.Harari@freescale.com>
Reviewed-by: Honghua Yin <Hong-Hua.Yin@freescale.com>
Tested-by: Honghua Yin <Hong-Hua.Yin@freescale.com>
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 .../ethernet/freescale/fman/src/wrapper/lnxwrp_ioctls_fm_compat.c   | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_ioctls_fm_compat.c b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_ioctls_fm_compat.c
index b5ffe5c..ea0885a 100644
--- a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_ioctls_fm_compat.c
+++ b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_ioctls_fm_compat.c
@@ -310,12 +310,18 @@ static inline void compat_copy_fm_pcd_cc_next_kg(
     {
         param->new_fqid         = compat_param->new_fqid;
         param->override_fqid    = compat_param->override_fqid;
+#if DPAA_VERSION >= 11
+        param->new_relative_storage_profile_id = compat_param->new_relative_storage_profile_id;
+#endif
         param->p_direct_scheme  = compat_pcd_id2ptr(compat_param->p_direct_scheme);
     }
     else
     {
         compat_param->new_fqid          = param->new_fqid;
         compat_param->override_fqid     = param->override_fqid;
+#if DPAA_VERSION >= 11
+        compat_param->new_relative_storage_profile_id = param->new_relative_storage_profile_id;
+#endif
         compat_param->p_direct_scheme   = compat_pcd_ptr2id(param->p_direct_scheme);
     }
 
-- 
1.9.1

