From 7cc0e9ce60ef2ef4586274aa27bc64b07b5a0eda Mon Sep 17 00:00:00 2001
From: Sandeep Singh <sandeep@freescale.com>
Date: Thu, 8 May 2014 16:57:17 -0400
Subject: [PATCH 676/987] t2080qds/dts: Removed two 10G from device tree

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Linux supports maximum two 10G per FMAN. t2080qds has
four 10G ports. Removing two 10G from usdpaa device-tree
till this gets fixed.

Signed-off-by: Sandeep Singh <sandeep@freescale.com>
Change-Id: I4c868131f79b6ba43dffea198d73c95425b09ce4
Reviewed-on: http://git.am.freescale.net:8181/12050
Reviewed-by: Vakul Garg <vakul@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 .../boot/dts/t2080qds-usdpaa-shared-interfaces.dts | 26 ++++++----------------
 arch/powerpc/boot/dts/t2080qds-usdpaa.dts          | 12 ----------
 2 files changed, 7 insertions(+), 31 deletions(-)

diff --git a/arch/powerpc/boot/dts/t2080qds-usdpaa-shared-interfaces.dts b/arch/powerpc/boot/dts/t2080qds-usdpaa-shared-interfaces.dts
index 35f668b..698c261 100644
--- a/arch/powerpc/boot/dts/t2080qds-usdpaa-shared-interfaces.dts
+++ b/arch/powerpc/boot/dts/t2080qds-usdpaa-shared-interfaces.dts
@@ -91,23 +91,6 @@
        };
 
 	fsl,dpaa {
-		ethernet@0 {/* 10G */
-			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
-			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
-			fsl,qman-frame-queues-rx = <0x90 1 0x91 1>;
-			fsl,qman-frame-queues-tx = <0x98 1 0x99 1>;
-		};
-		/* ethernet@1 declared as shared MAC. USDPAA will seed buffers to
-		 * this buffer pool. The ethernet driver will initialize the RX default,
-		 * RX error, TX error, TX confirm and 8 TX Frame queues. On receiving frame
-		 * at this interface, the ethernet driver will do kmap_atomic/kunmap_atomic
-		 * for that frame. */
-		ethernet@1 {/* 10G */
-			compatible = "fsl,t2080-dpa-ethernet-shared", "fsl,dpa-ethernet-shared";
-			fsl,bman-buffer-pools = <&bp17>;
-			fsl,qman-frame-queues-rx = <0x92 1 0x93 1 0x2000 3>;
-			fsl,qman-frame-queues-tx = <0 1 0 1 0x3000 8>;
-		};
 		ethernet@2 {/* 1G */
 			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
 			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
@@ -120,9 +103,14 @@
 			fsl,qman-frame-queues-rx = <0x56 1 0x57 1>;
 			fsl,qman-frame-queues-tx = <0x76 1 0x77 1>;
 		};
+		/* ethernet@8 declared as shared MAC. USDPAA will seed buffers to
+		 * this buffer pool. The ethernet driver will initialize the RX default,
+		 * RX error, TX error, TX confirm and 8 TX Frame queues. On receiving frame
+		 * at this interface, the ethernet driver will do kmap_atomic/kunmap_atomic
+		 * for that frame. */
 		ethernet@8 {/* 10G */
-			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
-			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
+			compatible = "fsl,t2080-dpa-ethernet-shared", "fsl,dpa-ethernet-shared";
+			fsl,bman-buffer-pools = <&bp17>;
 			fsl,qman-frame-queues-rx = <0x5c 1 0x5d 1>;
 			fsl,qman-frame-queues-tx = <0x7c 1 0x7d 1>;
 		};
diff --git a/arch/powerpc/boot/dts/t2080qds-usdpaa.dts b/arch/powerpc/boot/dts/t2080qds-usdpaa.dts
index bb462b6..aa7c92f 100644
--- a/arch/powerpc/boot/dts/t2080qds-usdpaa.dts
+++ b/arch/powerpc/boot/dts/t2080qds-usdpaa.dts
@@ -79,18 +79,6 @@
 	};
 
 	fsl,dpaa {
-		ethernet@0 {/* 10G */
-			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
-			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
-			fsl,qman-frame-queues-rx = <0x90 1 0x91 1>;
-			fsl,qman-frame-queues-tx = <0x98 1 0x99 1>;
-		};
-		ethernet@1 {/* 10G */
-			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
-			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
-			fsl,qman-frame-queues-rx = <0x92 1 0x93 1>;
-			fsl,qman-frame-queues-tx = <0x9a 1 0x9b 1>;
-		};
 		ethernet@2 {/* 1G */
 			compatible = "fsl,t2080-dpa-ethernet-init", "fsl,dpa-ethernet-init";
 			fsl,bman-buffer-pools = <&bp7 &bp8 &bp9>;
-- 
1.9.1

