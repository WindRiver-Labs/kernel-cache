From a10b87e544e1f5517cbaa85804542f54acc1a1d3 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Wed, 29 Apr 2015 17:56:28 +0800
Subject: [PATCH 1112/1114] iommu: fix a compile warning.

commit "iommu: Constify struct iommu_ops(<treding@nvidia.com>)"
changed all iommu_ops structure to read-only.

This patch constify a variable in iommu_get_dev_domain() to
fix following compile warning:

linux/drivers/iommu/iommu.c: In function 'iommu_get_dev_domain':
linux/drivers/iommu/iommu.c:902:26: warning:
initialization discards 'const' qualifier from pointer target type
  struct iommu_ops *ops = dev->bus->iommu_ops;
                          ^
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/iommu/iommu.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/iommu/iommu.c b/drivers/iommu/iommu.c
index 2f3a8ec..13eb54e 100644
--- a/drivers/iommu/iommu.c
+++ b/drivers/iommu/iommu.c
@@ -947,7 +947,7 @@ EXPORT_SYMBOL_GPL(iommu_detach_device);
 
 struct iommu_domain *iommu_get_dev_domain(struct device *dev)
 {
-	struct iommu_ops *ops = dev->bus->iommu_ops;
+	const struct iommu_ops *ops = dev->bus->iommu_ops;
 
 	if (unlikely(ops == NULL || ops->get_dev_iommu_domain == NULL))
 		return NULL;
-- 
2.0.2

