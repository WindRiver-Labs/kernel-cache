From 4f118fe6111c7f4d827161fad8ac1c0ca2d49dad Mon Sep 17 00:00:00 2001
From: Jeffrey Ladouceur <Jeffrey.Ladouceur@freescale.com>
Date: Mon, 3 Nov 2014 16:42:42 -0500
Subject: [PATCH 28/45] dce: validate input to test module

The dce_simple_perf_tester module needs to validate input parameter.

Signed-off-by: Jeffrey Ladouceur <Jeffrey.Ladouceur@freescale.com>
Change-Id: Ie0dddfb8e23532895e6ec2276f201e3b555fed62
Reviewed-on: http://git.am.freescale.net:8181/22952
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Haiying Wang <Haiying.Wang@freescale.com>
Reviewed-by: Roy Pledge <roy.pledge@freescale.com>
Reviewed-by: Richard Schmitt <richard.schmitt@freescale.com>
[Original patch taken from QorIQ-SDK-V1.8-20150619-yocto]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../tests/performance_simple/dce_perf_simple.c     |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/drivers/staging/fsl_dce/tests/performance_simple/dce_perf_simple.c b/drivers/staging/fsl_dce/tests/performance_simple/dce_perf_simple.c
index 8d00b3a..1b7125d 100644
--- a/drivers/staging/fsl_dce/tests/performance_simple/dce_perf_simple.c
+++ b/drivers/staging/fsl_dce/tests/performance_simple/dce_perf_simple.c
@@ -566,6 +566,11 @@ static int validate_module_params(void)
 		return -EINVAL;
 	}
 
+	if (block_size == 0) {
+		pr_err("Invalide block_size value of 0\n");
+		return -EINVAL;
+	}
+
 	return 0;
 }
 
-- 
1.7.5.4

