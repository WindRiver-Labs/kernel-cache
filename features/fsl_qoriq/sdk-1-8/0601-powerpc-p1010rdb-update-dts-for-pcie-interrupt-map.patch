From 76b8e3ef87473269c4f25d65cdccb6e4fbe16d12 Mon Sep 17 00:00:00 2001
From: Zhao Qiang <B45475@freescale.com>
Date: Wed, 19 Mar 2014 18:18:03 +0800
Subject: [PATCH 601/987] powerpc/p1010rdb:update dts for pcie interrupt-map

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

p1010rdb-pb use the irq[4:5] for inta and intb to pcie,
it is active-high, so set it.

Signed-off-by: Zhao Qiang <B45475@freescale.com>
Change-Id: I29db41b4a8b5a67c18151099884edda6de4d9d1a
Reviewed-on: http://git.am.freescale.net:8181/9915
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 arch/powerpc/boot/dts/fsl/p1010si-post.dtsi | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/p1010si-post.dtsi b/arch/powerpc/boot/dts/fsl/p1010si-post.dtsi
index 1804ed7..4313ff6 100644
--- a/arch/powerpc/boot/dts/fsl/p1010si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p1010si-post.dtsi
@@ -59,8 +59,12 @@
 		interrupt-map-mask = <0xf800 0 0 7>;
 		interrupt-map = <
 			/* IDSEL 0x0 */
-			0000 0x0 0x0 0x1 &mpic 0x4 0x1 0x0 0x0
-			0000 0x0 0x0 0x2 &mpic 0x5 0x1 0x0 0x0
+			/*
+			 *irq[4:5] only for PCIe in dts, set to active-high
+			 *irq[6:7] is pulled up on board, set to active-low
+			 */
+			0000 0x0 0x0 0x1 &mpic 0x4 0x2 0x0 0x0
+			0000 0x0 0x0 0x2 &mpic 0x5 0x2 0x0 0x0
 			0000 0x0 0x0 0x3 &mpic 0x6 0x1 0x0 0x0
 			0000 0x0 0x0 0x4 &mpic 0x7 0x1 0x0 0x0
 			>;
-- 
1.9.1

