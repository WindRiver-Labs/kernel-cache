From b7d0214f372483edc617c7b1cf9ae1f70cfceb77 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Fri, 7 Feb 2014 12:19:06 +0200
Subject: [PATCH 536/987] dpaa_eth: include dpaa_1588.h only when required

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: Ic498939ea33b665f4f6248eb0f4e8d5f000446d8
Reviewed-on: http://git.am.freescale.net:8181/8650
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c | 2 ++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c     | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
index a8d51ac..54e9771 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
@@ -44,7 +44,9 @@
 #include <linux/if_vlan.h>	/* vlan_eth_hdr */
 #include "dpaa_eth.h"
 #include "dpaa_eth_common.h"
+#ifdef CONFIG_FSL_DPAA_1588
 #include "dpaa_1588.h"
+#endif
 #include "mac.h"
 
 /* DPAA platforms benefit from hardware-assisted queue management */
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
index 9fceac2..90ac420 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
@@ -45,7 +45,9 @@
 
 #include "dpaa_eth.h"
 #include "dpaa_eth_common.h"
+#ifdef CONFIG_FSL_DPAA_1588
 #include "dpaa_1588.h"
+#endif
 
 /* Convenience macros for storing/retrieving the skb back-pointers. They must
  * accommodate both recycling and confirmation paths - i.e. cases when the buf
-- 
1.9.1

