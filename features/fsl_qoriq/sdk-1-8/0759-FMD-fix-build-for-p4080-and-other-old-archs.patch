From 9f1d20024fbd97555f14f9af90bb9545c4165d72 Mon Sep 17 00:00:00 2001
From: Eyal Harari <Eyal.Harari@freesacle.com>
Date: Wed, 20 Aug 2014 17:47:10 +0300
Subject: [PATCH 759/987] FMD: fix build for p4080 and other old archs

Signed-off-by: Eyal Harari <Eyal.Harari@freesacle.com>
Change-Id: I8b02d8538c564fb2deb849a2053c5a6b82661fc6
Reviewed-on: http://git.am.freescale.net:8181/17192
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Mandy Lavi <Mandy.Lavi@freescale.com>
Reviewed-by: Richard Schmitt <richard.schmitt@freescale.com>
[Lu:Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/fman/Peripherals/FM/fm.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/fman/Peripherals/FM/fm.c b/drivers/net/ethernet/freescale/fman/Peripherals/FM/fm.c
index 648126b..0c2745e 100644
--- a/drivers/net/ethernet/freescale/fman/Peripherals/FM/fm.c
+++ b/drivers/net/ethernet/freescale/fman/Peripherals/FM/fm.c
@@ -5301,6 +5301,7 @@ t_Handle FmGetPcd(t_Handle h_Fm)
 {
 	return ((t_Fm*)h_Fm)->h_Pcd;
 }
+#if (DPAA_VERSION >= 11)
 extern void *g_MemacRegs;
 void fm_clk_down(void);
 uint32_t fman_memac_get_event(void *regs, uint32_t ev_mask);
@@ -5323,3 +5324,4 @@ void FM_ChangeClock(t_Handle h_Fm, int hardwarePortId)
 	rcr &= ~0x04000000;
 	WRITE_UINT32(p_Fm->p_FmFpmRegs->fm_rcr, rcr);
 }
+#endif
-- 
1.9.1

