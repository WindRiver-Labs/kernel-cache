From 8dc04e9cc48b3f342c7422e10320e8e85c5d64c1 Mon Sep 17 00:00:00 2001
From: "Lu.Jiang" <lu.jiang@windriver.com>
Date: Tue, 16 Sep 2014 17:15:37 +0800
Subject: [PATCH 721/987] powerpc/85xx: dts: enlarge kernel image patition in
 nor Flash

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Enlarge kernel image nor-patition for some P1/P2 boards that include
p1020rdb-pd, p1021rdb-pc, p1022ds, p1025twr, and p2020rdb-pc.

Signed-off-by: Xie Xiaobo <X.Xie@freescale.com>
Signed-off-by: Lu Yangbo <yangbo.lu@freescale.com>
Change-Id: I7306a062dfea47a6d8daf278c7f608cdab3b5684
Reviewed-on: http://git.am.freescale.net:8181/13437
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Zhenhua Luo <zhenhua.luo@freescale.com>
Tested-by: Zhenhua Luo <zhenhua.luo@freescale.com>
Signed-off-by: Lu.Jiang <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1020rdb-pd.dtsi | 12 ++++++------
 arch/powerpc/boot/dts/p1021rdb-pc.dtsi | 12 ++++++------
 arch/powerpc/boot/dts/p1022ds.dtsi     |  8 ++++----
 arch/powerpc/boot/dts/p1025twr.dtsi    |  2 +-
 arch/powerpc/boot/dts/p2020rdb-pc.dtsi | 12 ++++++------
 5 files changed, 23 insertions(+), 23 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
index 4fce075..6f7c1cd 100644
--- a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
+++ b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1020RDB-PD Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2013 Freescale Semiconductor Inc.
+ * Copyright 2013-2014 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -48,14 +48,14 @@
 		};
 
 		partition@20000 {
-			/* 3.875 MB for Linux Kernel Image */
-			reg = <0x00020000 0x003e0000>;
+			/* 5.875 MB for Linux Kernel Image */
+			reg = <0x00020000 0x005e0000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 57.75MB for Root file System */
-			reg = <0x00400000 0x039c0000>;
+		partition@600000 {
+			/* 55.75MB for Root file System */
+			reg = <0x00600000 0x037c0000>;
 			label = "NOR Root File System";
 		};
 
diff --git a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
index f8f5438..8b03a03 100644
--- a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1021 RDB Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2012 Freescale Semiconductor Inc.
+ * Copyright 2012, 2014 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -56,14 +56,14 @@
 		};
 
 		partition@80000 {
-			/* 3.5 MB for Linux Kernel Image */
-			reg = <0x00080000 0x00380000>;
+			/* 4.5 MB for Linux Kernel Image */
+			reg = <0x00080000 0x00480000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 10.5MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00a80000>;
+		partition@500000 {
+			/* 9.5MB for JFFS2 based Root file System */
+			reg = <0x00500000 0x00980000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
diff --git a/arch/powerpc/boot/dts/p1022ds.dtsi b/arch/powerpc/boot/dts/p1022ds.dtsi
index ddfa7c6..bd17038 100644
--- a/arch/powerpc/boot/dts/p1022ds.dtsi
+++ b/arch/powerpc/boot/dts/p1022ds.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1022 DS Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2012 Freescale Semiconductor Inc.
+ * Copyright 2012, 2014 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -60,13 +60,13 @@
 		};
 
 		partition@4000000 {
-			reg = <0x04000000 0x00400000>;
+			reg = <0x04000000 0x00600000>;
 			label = "kernel-nor";
 			read-only;
 		};
 
-		partition@4400000 {
-			reg = <0x04400000 0x03ac0000>;
+		partition@4600000 {
+			reg = <0x04600000 0x038c0000>;
 			label = "jffs2-nor";
 		};
 
diff --git a/arch/powerpc/boot/dts/p1025twr.dtsi b/arch/powerpc/boot/dts/p1025twr.dtsi
index fd1ad40..c3db6ef 100644
--- a/arch/powerpc/boot/dts/p1025twr.dtsi
+++ b/arch/powerpc/boot/dts/p1025twr.dtsi
@@ -1,7 +1,7 @@
 /*
  * P1025 TWR Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2013 Freescale Semiconductor Inc.
+ * Copyright 2013-2014 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
diff --git a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
index c3aa1ad..6ba7f1c 100644
--- a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
@@ -1,7 +1,7 @@
 /*
  * P2020 RDB-PC Device Tree Source stub (no addresses or top-level ranges)
  *
- * Copyright 2011 Freescale Semiconductor Inc.
+ * Copyright 2011, 2014 Freescale Semiconductor Inc.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions are met:
@@ -56,14 +56,14 @@
 		};
 
 		partition@80000 {
-			/* 3.5 MB for Linux Kernel Image */
-			reg = <0x00080000 0x00380000>;
+			/* 4.5 MB for Linux Kernel Image */
+			reg = <0x00080000 0x00480000>;
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 10.75MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00ac0000>;
+		partition@500000 {
+			/* 9.75MB for JFFS2 based Root file System */
+			reg = <0x00500000 0x009c0000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
-- 
1.9.1

