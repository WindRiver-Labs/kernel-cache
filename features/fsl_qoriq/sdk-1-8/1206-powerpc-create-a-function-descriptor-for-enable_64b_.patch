From 7206abc9b6038c083b86cb8d45ae6d47d1caaa88 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Wed, 4 Nov 2015 08:59:27 +0000
Subject: [PATCH 1206/1207] powerpc: create a function descriptor for
 enable_64b_mode

because of upstream commit 6a3bab90cf78
("powerpc: Remove some unnecessary uses of _GLOBAL() and _STATIC()"),
enable_64b_mode was changed to be a local label. But we reference this function
in arch/powerpc/platforms/85xx/sleep.S. So change it back to be a
a function descriptor.

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/powerpc/kernel/head_64.S | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/kernel/head_64.S b/arch/powerpc/kernel/head_64.S
index cea8ec6..fa57dbb 100644
--- a/arch/powerpc/kernel/head_64.S
+++ b/arch/powerpc/kernel/head_64.S
@@ -774,7 +774,7 @@ _GLOBAL(start_secondary_resume)
 /*
  * This subroutine clobbers r11 and r12
  */
-enable_64b_mode:
+_GLOBAL(enable_64b_mode)
 	mfmsr	r11			/* grab the current MSR */
 #ifdef CONFIG_PPC_BOOK3E
 	oris	r11,r11,0x8000		/* CM bit set, we'll set ICM later */
-- 
2.0.2

