From a27e8971bbb4ad15f23f7ead7009a155425bfc1b Mon Sep 17 00:00:00 2001
From: Cristian Bercaru <cristian.bercaru@freescale.com>
Date: Tue, 11 Feb 2014 15:19:28 +0200
Subject: [PATCH 552/987] fmd, dpaa_eth: fix function name
 fm_mac_set_rx_pause_frames

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Replace 'fm_mac_set_rx_ignore_pause_frames' with 'fm_mac_set_rx_pause_frames'.
'fm_mac_set_rx_pause_frames' correctly reflects the functionality of the
function.
One might wrongly believe that calling 'fm_mac_set_rx_ignore_pause_frames' with
parameter 'en' set to 'true' disables pause frames reception on that interface,
when the function in fact enables pause frames.

Signed-off-by: Cristian Bercaru <cristian.bercaru@freescale.com>
Change-Id: I83253a70ee95d706dab0cd1b88f40ed8c51376c5
Reviewed-on: http://git.am.freescale.net:8181/8719
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/mac-api.c                        | 6 +++---
 .../net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h   | 2 +-
 drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c         | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index cf7fc07..56104dc 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -603,7 +603,7 @@ static void __cold setup_dtsec(struct mac_device *mac_dev)
 	mac_dev->ptp_disable		= fm_mac_disable_1588_time_stamp;
 	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause		= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause		= fm_mac_set_rx_pause_frames;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
 	mac_dev->fm_rtc_disable		= fm_rtc_disable;
 	mac_dev->fm_rtc_get_cnt		= fm_rtc_get_cnt;
@@ -627,7 +627,7 @@ static void __cold setup_xgmac(struct mac_device *mac_dev)
 	mac_dev->uninit		= uninit;
 	mac_dev->get_mac_handle	= get_mac_handle;
 	mac_dev->set_tx_pause	= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause	= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause	= fm_mac_set_rx_pause_frames;
 	mac_dev->dump_mac_regs	= xgmac_dump_regs;
 }
 
@@ -643,7 +643,7 @@ static void __cold setup_memac(struct mac_device *mac_dev)
 	mac_dev->uninit		= uninit;
 	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause		= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause		= fm_mac_set_rx_pause_frames;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
 	mac_dev->fm_rtc_disable		= fm_rtc_disable;
 	mac_dev->fm_rtc_get_cnt		= fm_rtc_get_cnt;
diff --git a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
index 8383fc9..f4fabbe 100644
--- a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
+++ b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
@@ -403,7 +403,7 @@ int fm_mac_enable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev);
 
 int fm_mac_disable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev);
 
-int fm_mac_set_rx_ignore_pause_frames(
+int fm_mac_set_rx_pause_frames(
 		struct fm_mac_dev *fm_mac_dev, bool en);
 
 int fm_mac_set_tx_pause_frames(struct fm_mac_dev *fm_mac_dev,
diff --git a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
index 4f0a2bc..d161209 100644
--- a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
+++ b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
@@ -1595,7 +1595,7 @@ int fm_mac_disable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev)
 }
 EXPORT_SYMBOL(fm_mac_disable_1588_time_stamp);
 
-int fm_mac_set_rx_ignore_pause_frames(
+int fm_mac_set_rx_pause_frames(
 		struct fm_mac_dev *fm_mac_dev, bool en)
 {
 	int	_errno;
@@ -1610,7 +1610,7 @@ int fm_mac_set_rx_ignore_pause_frames(
 
 	return _errno;
 }
-EXPORT_SYMBOL(fm_mac_set_rx_ignore_pause_frames);
+EXPORT_SYMBOL(fm_mac_set_rx_pause_frames);
 
 int fm_mac_set_tx_pause_frames(struct fm_mac_dev *fm_mac_dev,
 					     bool en)
-- 
1.9.1

