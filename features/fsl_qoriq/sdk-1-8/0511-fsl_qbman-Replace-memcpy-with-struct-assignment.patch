From dab7338d3bc611fc29002527337528a7b762515d Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Fri, 17 Jan 2014 10:35:39 -0600
Subject: [PATCH 511/987] fsl_qbman: Replace memcpy with struct assignment

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

This fixes the following coccinelle warning:

Replace memcpy with struct assignment

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
Change-Id: I38f3bf57b18f8fbb8e295ae7b46a187e52491d20
Reviewed-on: http://git.am.freescale.net:8181/8106
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Haiying Wang <Haiying.Wang@freescale.com>
Reviewed-by: Emilian Medve <Emilian.Medve@freescale.com>
---
 drivers/staging/fsl_qbman/fsl_usdpaa.c   | 4 ++--
 drivers/staging/fsl_qbman/qman_private.h | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/staging/fsl_qbman/fsl_usdpaa.c b/drivers/staging/fsl_qbman/fsl_usdpaa.c
index e9cb12b..f3acdb2 100644
--- a/drivers/staging/fsl_qbman/fsl_usdpaa.c
+++ b/drivers/staging/fsl_qbman/fsl_usdpaa.c
@@ -1174,7 +1174,7 @@ static long ioctl_portal_map(struct file *fp, struct ctx *ctx,
 
 	if (!mapping)
 		return -ENOMEM;
-	memcpy(&mapping->user, arg, sizeof(mapping->user));
+	mapping->user = *arg;
 	if (mapping->user.type == usdpaa_portal_qman) {
 		mapping->qportal =
 			qm_get_unused_portal_idx(mapping->user.index);
@@ -1212,7 +1212,7 @@ static long ioctl_portal_map(struct file *fp, struct ctx *ctx,
 			  &mapping->user.addr.cinh);
 	if (ret)
 		goto err_mmap_cinh;
-	memcpy(arg, &mapping->user, sizeof(mapping->user));
+	*arg = mapping->user;
 	return ret;
 
 err_mmap_cinh:
diff --git a/drivers/staging/fsl_qbman/qman_private.h b/drivers/staging/fsl_qbman/qman_private.h
index 801fef1..6eeb6c2 100644
--- a/drivers/staging/fsl_qbman/qman_private.h
+++ b/drivers/staging/fsl_qbman/qman_private.h
@@ -77,7 +77,7 @@ static inline int qman_cgrs_next(struct qman_cgrs *c, int num)
 static inline void qman_cgrs_cp(struct qman_cgrs *dest,
 				const struct qman_cgrs *src)
 {
-	memcpy(dest, src, sizeof(*dest));
+	*dest = *src;
 }
 static inline void qman_cgrs_and(struct qman_cgrs *dest,
 			const struct qman_cgrs *a, const struct qman_cgrs *b)
@@ -133,7 +133,7 @@ static inline int qman_ccgrs_next(struct qman_ccgrs *c, int num)
 static inline void qman_ccgrs_cp(struct qman_ccgrs *dest,
 					const struct qman_ccgrs *src)
 {
-	memcpy(dest, src, sizeof(*dest));
+	*dest = *src;
 }
 static inline void qman_ccgrs_and(struct qman_ccgrs *dest,
 			const struct qman_ccgrs *a, const struct qman_ccgrs *b)
-- 
1.9.1

