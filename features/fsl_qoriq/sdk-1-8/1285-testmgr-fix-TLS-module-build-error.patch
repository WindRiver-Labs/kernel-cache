From b83368f13e86a6a2cad73bf1a3d27b3980a0aba9 Mon Sep 17 00:00:00 2001
From: Cristian Stoica <cristian.stoica@freescale.com>
Date: Thu, 24 Apr 2014 11:57:11 +0300
Subject: [PATCH 1285/1336] testmgr: fix TLS module build error

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

This is a fix specific for sdk-v1.6.x with linux kernel 3.12.
reinit_completion does not exist yet - it was introduced shortly after kernel 3.12.

Signed-off-by: Cristian Stoica <cristian.stoica@freescale.com>
Change-Id: Ic154ed5c64ac9f3c5cfeefd6ff0c180e8b543216
Reviewed-on: http://git.am.freescale.net:8181/11447
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Horia Ioan Geanta Neag <horia.geanta@freescale.com>
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
---
 crypto/testmgr.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/crypto/testmgr.c b/crypto/testmgr.c
index e0788b41..3278295 100644
--- a/crypto/testmgr.c
+++ b/crypto/testmgr.c
@@ -956,7 +956,7 @@ static int __test_tls(struct crypto_aead *tfm, int enc,
 			ret = wait_for_completion_interruptible(
 						&result.completion);
 			if (!ret && !result.err) {
-				reinit_completion(&result.completion);
+				INIT_COMPLETION(result.completion);
 				break;
 			} else {
 				ret = result.err;
-- 
2.0.2

