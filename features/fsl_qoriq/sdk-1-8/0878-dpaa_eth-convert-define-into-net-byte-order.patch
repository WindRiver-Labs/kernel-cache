From 2245c2ba01d402f4564c9db4ef5f24be649e5505 Mon Sep 17 00:00:00 2001
From: Rotariu Marian Cristian-B44860 <marian.rotariu@freescale.com>
Date: Tue, 7 Oct 2014 15:56:06 +0300
Subject: [PATCH 878/987] dpaa_eth: convert define into net byte order

All the constant definitions are used in CPU endianess and the skb fields are in
network byte order. A conversion should be used.

Signed-off-by: Rotariu Marian Cristian-B44860 <marian.rotariu@freescale.com>
Change-Id: I0b07bb64b9cb2cf5c490e63152da0dd26e67131c
Reviewed-on: http://git.am.freescale.net:8181/20985
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/32490
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index 9798fe9..477e22e 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -468,7 +468,8 @@ dpa_fd_offset(const struct qm_fd *fd)
 static inline int dpa_check_rx_mtu(struct sk_buff *skb, int mtu)
 {
 	if (unlikely(skb->len > mtu))
-		if ((skb->protocol != ETH_P_8021Q) || (skb->len > mtu + 4))
+		if ((skb->protocol != htons(ETH_P_8021Q))
+				|| (skb->len > mtu + 4))
 			return -1;
 
 	return 0;
-- 
1.9.1

