From 6e6e8aba3c55fd91ded2158a4114b1389d034be0 Mon Sep 17 00:00:00 2001
From: Anca Jeanina Floarea <anca.floarea@freescale.com>
Date: Mon, 15 Sep 2014 17:07:08 +0300
Subject: [PATCH 812/987] dpa_offload: Return error code in function
 dpa_ipsec_sa_get_seq_number

Although an error code was set in case an error occurred, the function
always returned 0. Fix this by returning the error code.

Signed-off-by: Anca Jeanina Floarea <anca.floarea@freescale.com>
Change-Id: I8fdc4c514fee0b77f4831bc976f5a8e69f28238e
Reviewed-on: http://git.am.freescale.net:8181/18804
Reviewed-by: Marian-Cornel Chereji <marian.chereji@freescale.com>
Tested-by: Marian-Cornel Chereji <marian.chereji@freescale.com>
[Lu:Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
index 0c0c311..f228cef 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec.c
@@ -5856,7 +5856,7 @@ int dpa_ipsec_sa_get_seq_number(int sa_id, uint64_t *seq)
 out:
 	put_instance(dpa_ipsec);
 
-	return 0;
+	return ret;
 }
 EXPORT_SYMBOL(dpa_ipsec_sa_get_seq_number);
 
-- 
1.9.1

