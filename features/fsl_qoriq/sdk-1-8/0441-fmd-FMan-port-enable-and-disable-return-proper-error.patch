From c01e6d3d459ab9f4fee94d0dae68c525d1c69a1e Mon Sep 17 00:00:00 2001
From: Cristian Bercaru <cristian.bercaru@freescale.com>
Date: Mon, 25 Nov 2013 21:18:29 +0000
Subject: [PATCH 441/987] fmd: FMan port enable and disable return proper error
 codes

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

'fm_port_enable' and 'fm_port_enable' return relevant error codes instead of 0
or void type. The error codes can be used in turn by other calling functions.

Signed-off-by: Cristian Bercaru <cristian.bercaru@freescale.com>
Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Change-Id: I989222a37ca15e5ba110dfbdc46ad15fea27d54f
Reviewed-on: http://git.am.freescale.net:8181/6855
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Ruxandra Ioana Radulescu <ruxandra.radulescu@freescale.com>
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Reviewed-by: Thomas Trefny <Tom.Trefny@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/7676
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Tested-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
---
 .../ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h  |  2 +-
 drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c    | 10 +++++-----
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
index 37f8193..b197b13 100644
--- a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
+++ b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
@@ -278,7 +278,7 @@ int fm_port_enable(struct fm_port *port);
 
  @Cautions	Allowed only after the port is initialized.
 *//***************************************************************************/
-void fm_port_disable(struct fm_port *port);
+int fm_port_disable(struct fm_port *port);
 
 void *fm_port_get_handle(const struct fm_port *port);
 
diff --git a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
index 96cc189..3666f12 100644
--- a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
+++ b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
@@ -1290,18 +1290,18 @@ EXPORT_SYMBOL(fm_get_tx_port_channel);
 int fm_port_enable (struct fm_port *port)
 {
     t_LnxWrpFmPortDev   *p_LnxWrpFmPortDev = (t_LnxWrpFmPortDev*)port;
+    t_Error err = FM_PORT_Enable(p_LnxWrpFmPortDev->h_Dev);
 
-    FM_PORT_Enable(p_LnxWrpFmPortDev->h_Dev);
-
-    return 0;
+    return GET_ERROR_TYPE(err);
 }
 EXPORT_SYMBOL(fm_port_enable);
 
-void fm_port_disable(struct fm_port *port)
+int fm_port_disable(struct fm_port *port)
 {
     t_LnxWrpFmPortDev   *p_LnxWrpFmPortDev = (t_LnxWrpFmPortDev*)port;
+    t_Error err = FM_PORT_Disable(p_LnxWrpFmPortDev->h_Dev);
 
-    FM_PORT_Disable(p_LnxWrpFmPortDev->h_Dev);
+    return GET_ERROR_TYPE(err);
 }
 EXPORT_SYMBOL(fm_port_disable);
 
-- 
1.9.1

