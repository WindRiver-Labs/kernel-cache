From 0f46d276ac379cef740346fa3faa6fd281f2d6fd Mon Sep 17 00:00:00 2001
From: Andy Fleming <afleming@freescale.com>
Date: Tue, 26 Mar 2013 17:57:04 -0500
Subject: [PATCH 1236/1336] crypto: Select Async Tx DMA for XOR

The Talitos RAID XOR option requires
ASYNC_TX_ENABLE_CHANNEL_SWITCH, so it needs to turn it on
when the XOR option is enabled.

Signed-off-by: Andy Fleming <afleming@freescale.com>
Change-Id: Ib248e0c65fcb98168e4fd6a10b6ea74f6b3406e1
Reviewed-on: http://git.am.freescale.net:8181/733
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 drivers/crypto/Kconfig | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/crypto/Kconfig b/drivers/crypto/Kconfig
index 8f688e7..4091bf2 100644
--- a/drivers/crypto/Kconfig
+++ b/drivers/crypto/Kconfig
@@ -226,7 +226,8 @@ config CRYPTO_DEV_TALITOS_RAIDXOR
 	bool "Talitos RAID5 XOR Calculation Offload"
 	default y
 	select DMA_ENGINE
-	depends on CRYPTO_DEV_TALITOS
+	select ASYNC_TX_ENABLE_CHANNEL_SWITCH
+	depends on FSL_DMA && CRYPTO_DEV_TALITOS
 	help
 	  Say 'Y' here to use the Freescale Security Engine (SEC) to
 	  offload RAID XOR parity Calculation
-- 
2.0.2

