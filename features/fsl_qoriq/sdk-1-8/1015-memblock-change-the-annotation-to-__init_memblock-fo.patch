From 99ec313ec1546b8a023be89c2c846672e5c3cd09 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Fri, 14 Nov 2014 10:41:12 +0800
Subject: [PATCH 1015/1015] memblock: change the annotation to __init_memblock
 for memblock_is_reserved()

This function may be used by modules, so change the annotation to
__init_memblock and also export the symbol.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 mm/memblock.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/mm/memblock.c b/mm/memblock.c
index 9318b56..6630260 100644
--- a/mm/memblock.c
+++ b/mm/memblock.c
@@ -1402,10 +1402,13 @@ static int __init_memblock memblock_search(struct memblock_type *type, phys_addr
 	return -1;
 }
 
-int __init memblock_is_reserved(phys_addr_t addr)
+int __init_memblock memblock_is_reserved(phys_addr_t addr)
 {
 	return memblock_search(&memblock.reserved, addr) != -1;
 }
+#ifndef CONFIG_ARCH_DISCARD_MEMBLOCK
+EXPORT_SYMBOL_GPL(memblock_is_reserved);
+#endif
 
 int __init_memblock memblock_is_memory(phys_addr_t addr)
 {
-- 
2.0.2

