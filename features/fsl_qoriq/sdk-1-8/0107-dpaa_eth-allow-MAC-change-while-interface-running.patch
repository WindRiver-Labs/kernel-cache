From 1c101a501f7ba69a36a4f63370f8513459eb9eaf Mon Sep 17 00:00:00 2001
From: Marian Rotariu <marian.rotariu@freescale.com>
Date: Tue, 16 Apr 2013 21:45:11 +0000
Subject: [PATCH 107/987] dpaa_eth: allow MAC change while interface running

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Added private flag to net device to let user change the physical
address even if the interface is up

Signed-off-by: Marian Rotariu <marian.rotariu@freescale.com>
Change-Id: I2b07a9e8ac86dae097e69882c4ea372a07899137
Reviewed-on: http://git.am.freescale.net:8181/1537
Reviewed-by: Hamciuc Bogdan-BHAMCIU1 <bogdan.hamciuc@freescale.com>
Reviewed-by: Sovaiala Cristian-Constantin-B39531 <Cristian.Sovaiala@freescale.com>
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index ca89bcb..9d57706 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -3958,6 +3958,8 @@ static int dpa_netdev_init(struct device_node *dpa_node,
 		}
 	}
 
+	net_dev->priv_flags |= IFF_LIVE_ADDR_CHANGE;
+
 	net_dev->features |= net_dev->hw_features;
 	net_dev->vlan_features = net_dev->features;
 
-- 
1.9.1

