From 4d4657d47c9257c198b99ac9ac8d4584af050739 Mon Sep 17 00:00:00 2001
From: Jia Hongtao <hongtao.jia@freescale.com>
Date: Thu, 15 May 2014 15:37:50 +0800
Subject: [PATCH 34/57] Add missing ADT7461 node to device tree for supported
 boards

Including: T1040RDB T1042RDB T208xQDS T208xRDB B4QDS T4240QDS

For T208xRDB and T4240QDS, ADT7481 is used. But kernel now only supports
ADT7461. So for now ADT7481 is treated as ADT7461.

The kernel config for thermal monitor is CONFIG_SENSORS_LM90.

Signed-off-by: Jia Hongtao <hongtao.jia@freescale.com>
Change-Id: Ifae889c238fd53e0abc3b75516e484f1ccf6e659
Reviewed-on: http://git.am.freescale.net:8181/23080
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Yang Li <LeoLi@freescale.com>
Reviewed-by: Yuantian Tang <yuantian.tang@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
[Original patch taken from QorIQ-SDK-V1.8-20150619-yocto.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/boot/dts/t1040rdb.dts |    7 +++++++
 arch/powerpc/boot/dts/t1042rdb.dts |    7 +++++++
 arch/powerpc/boot/dts/t4240qds.dts |   15 +++++++++++++++
 3 files changed, 29 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/t1040rdb.dts b/arch/powerpc/boot/dts/t1040rdb.dts
index 4d6de1f..eb0c649 100644
--- a/arch/powerpc/boot/dts/t1040rdb.dts
+++ b/arch/powerpc/boot/dts/t1040rdb.dts
@@ -126,6 +126,13 @@
 		ranges = <0x00000000 0xf 0xfe000000 0x1000000>;
 		reg = <0xf 0xfe000000 0 0x00001000>;
 
+		i2c@118000 {
+			adt7461@4c {
+				compatible = "adi,adt7461";
+				reg = <0x4c>;
+			};
+		};
+
 		i2c@118100 {
 			pca9546@77 {
 				compatible = "philips,pca9546";
diff --git a/arch/powerpc/boot/dts/t1042rdb.dts b/arch/powerpc/boot/dts/t1042rdb.dts
index 39b591c..bcfb046 100644
--- a/arch/powerpc/boot/dts/t1042rdb.dts
+++ b/arch/powerpc/boot/dts/t1042rdb.dts
@@ -126,6 +126,13 @@
 		ranges = <0x00000000 0xf 0xfe000000 0x1000000>;
 		reg = <0xf 0xfe000000 0 0x00001000>;
 
+		i2c@118000 {
+			adt7461@4c {
+				compatible = "adi,adt7461";
+				reg = <0x4c>;
+			};
+		};
+
 		i2c@118100 {
 			pca9546@77 {
 				compatible = "philips,pca9546";
diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index 3a3f74c..b8460aa 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -419,6 +419,21 @@
 						shunt-resistor = <1000>;
 					};
 				};
+
+				i2c@3 {
+					#address-cells = <1>;
+					#size-cells = <0>;
+					reg = <0x3>;
+
+					/*
+					 * Should be ADT7481.
+					 * Now kernel only supports ADT7461.
+					 */
+					adt7461@4c {
+						compatible = "adi,adt7461";
+						reg = <0x4c>;
+					};
+				};
 			};
 		};
 
-- 
1.7.5.4

