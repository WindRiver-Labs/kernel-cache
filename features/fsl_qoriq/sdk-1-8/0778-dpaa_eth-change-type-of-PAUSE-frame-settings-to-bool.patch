From 397fdafb535bf7ea07ae0eee7ef6a6ad98723423 Mon Sep 17 00:00:00 2001
From: Cristian Bercaru <cristian.bercaru@freescale.com>
Date: Wed, 23 Jul 2014 14:10:12 +0300
Subject: [PATCH 778/987] dpaa_eth: change type of PAUSE frame settings to
 boolean

This patch changes the type of PAUSE frames settings to boolean
because they only accept the values true/false.

Signed-off-by: Cristian Bercaru <cristian.bercaru@freescale.com>
Change-Id: I6a3926054d4821f12937e96198c8435df38bf95c
Reviewed-on: http://git.am.freescale.net:8181/15552
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Tested-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
[Lu:Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_ethtool.c | 2 +-
 drivers/net/ethernet/freescale/dpa/mac-api.c      | 4 ++--
 drivers/net/ethernet/freescale/dpa/mac.h          | 6 +++---
 3 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_ethtool.c b/drivers/net/ethernet/freescale/dpa/dpaa_ethtool.c
index 84538f0..6dbeb450 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_ethtool.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_ethtool.c
@@ -289,7 +289,7 @@ static int __cold dpa_set_pauseparam(struct net_device *net_dev,
 	 * adjust_link is triggered by a forced renegotiation of sym/asym PAUSE
 	 * settings.
 	 */
-	mac_dev->autoneg_pause = epause->autoneg;
+	mac_dev->autoneg_pause = !!epause->autoneg;
 
 	/* Determine the sym/asym advertised PAUSE capabilities from the desired
 	 * rx/tx pause settings.
diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index 8620405..c14e8ff 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -381,8 +381,8 @@ static void get_pause_cfg(struct mac_device *mac_dev,
 	 * are those set by ethtool.
 	 */
 	if (!mac_dev->autoneg_pause) {
-		*rx_pause = !!mac_dev->rx_pause;
-		*tx_pause = !!mac_dev->tx_pause;
+		*rx_pause = mac_dev->rx_pause;
+		*tx_pause = mac_dev->tx_pause;
 		return;
 	}
 
diff --git a/drivers/net/ethernet/freescale/dpa/mac.h b/drivers/net/ethernet/freescale/dpa/mac.h
index 28f0301..3634459 100644
--- a/drivers/net/ethernet/freescale/dpa/mac.h
+++ b/drivers/net/ethernet/freescale/dpa/mac.h
@@ -67,9 +67,9 @@ struct mac_device {
 	/* List of multicast addresses */
 	struct list_head	 mc_addr_list;
 
-	u32	autoneg_pause;
-	u32	rx_pause;
-	u32	tx_pause;
+	bool autoneg_pause;
+	bool rx_pause;
+	bool tx_pause;
 
 	struct fm_mac_dev *(*get_mac_handle)(struct mac_device *mac_dev);
 	int (*init_phy)(struct net_device *net_dev, struct mac_device *mac_dev);
-- 
1.9.1

