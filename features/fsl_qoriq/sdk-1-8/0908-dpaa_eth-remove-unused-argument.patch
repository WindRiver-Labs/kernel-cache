From 15f12f5d7b730e6cc82ee3bf50542779d6a3aee6 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Wed, 18 Mar 2015 12:10:50 +0200
Subject: [PATCH 908/987] dpaa_eth: remove unused argument

Removed unnecessary argument to dpa_bp_free().

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: Ib16b37b0057857875805eb5692e1fd5a273883cb
Reviewed-on: http://git.am.freescale.net:8181/32981
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Reviewed-by: Marian Cristian Rotariu <marian.rotariu@freescale.com>
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso.
Fix context to apply to WRL.]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c         | 4 ++--
 drivers/net/ethernet/freescale/dpa/dpaa_eth_base.c    | 2 +-
 drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c  | 4 ++--
 drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h  | 2 +-
 drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c | 2 +-
 drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c | 2 +-
 drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c  | 2 +-
 7 files changed, 9 insertions(+), 9 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 0e29ecb..ea454bb 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -846,7 +846,7 @@ static int dpa_priv_bp_create(struct net_device *net_dev, struct dpa_bp *dpa_bp,
 		int err;
 		err = dpa_bp_alloc(&dpa_bp[i]);
 		if (err < 0) {
-			dpa_bp_free(priv, dpa_bp);
+			dpa_bp_free(priv);
 			priv->dpa_bp = NULL;
 			return err;
 		}
@@ -1093,7 +1093,7 @@ rx_cgr_init_failed:
 tx_cgr_init_failed:
 add_channel_failed:
 get_channel_failed:
-	dpa_bp_free(priv, priv->dpa_bp);
+	dpa_bp_free(priv);
 bp_create_failed:
 fq_probe_failed:
 alloc_failed:
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_base.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_base.c
index 68a87f5..89c443c 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_base.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_base.c
@@ -220,7 +220,7 @@ int dpa_bp_create(struct net_device *net_dev, struct dpa_bp *dpa_bp,
 		int err;
 		err = dpa_bp_alloc(&dpa_bp[i]);
 		if (err < 0) {
-			dpa_bp_free(priv, dpa_bp);
+			dpa_bp_free(priv);
 			priv->dpa_bp = NULL;
 			return err;
 		}
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
index 7f66c43..63b2827 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
@@ -516,7 +516,7 @@ int __cold dpa_remove(struct platform_device *of_dev)
 
 	dpa_private_napi_del(net_dev);
 
-	dpa_bp_free(priv, priv->dpa_bp);
+	dpa_bp_free(priv);
 	if(atomic_read(&priv->dpa_bp->refs) == 0)
 		kfree(priv->dpa_bp);
 
@@ -846,7 +846,7 @@ _dpa_bp_free(struct dpa_bp *dpa_bp)
 }
 
 void __cold __attribute__((nonnull))
-dpa_bp_free(struct dpa_priv_s *priv, struct dpa_bp *dpa_bp)
+dpa_bp_free(struct dpa_priv_s *priv)
 {
 	int i;
 
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
index 40c9b28..2ce4cb9 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
@@ -163,7 +163,7 @@ void dpa_set_buffers_layout(struct mac_device *mac_dev,
 int __attribute__((nonnull))
 dpa_bp_alloc(struct dpa_bp *dpa_bp);
 void __cold __attribute__((nonnull))
-dpa_bp_free(struct dpa_priv_s *priv, struct dpa_bp *dpa_bp);
+dpa_bp_free(struct dpa_priv_s *priv);
 struct dpa_bp *dpa_bpid2pool(int bpid);
 void dpa_bpid2pool_map(int bpid, struct dpa_bp *dpa_bp);
 bool dpa_bpid2pool_use(int bpid);
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
index f78e176..27b7c8f 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
@@ -1373,7 +1373,7 @@ static int dpa_generic_remove(struct platform_device *of_dev)
 
 	/* TODO: this is for private dirver also; make generic */
 #if 0
-	dpa_bp_free(priv, priv->dpa_bp);
+	dpa_bp_free(priv);
 	devm_kfree(dev, priv->dpa_bp);
 
 	if (priv->buf_layout)
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
index c13e5cd..bd97536 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
@@ -454,7 +454,7 @@ fq_alloc_failed:
 add_channel_failed:
 get_channel_failed:
 	if (net_dev)
-		dpa_bp_free(priv, priv->dpa_bp);
+		dpa_bp_free(priv);
 bp_create_failed:
 fq_probe_failed:
 	dev_set_drvdata(dev, NULL);
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
index 1ac0007..db62cbe 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
@@ -838,7 +838,7 @@ cgr_init_failed:
 add_channel_failed:
 get_channel_failed:
 	if (net_dev)
-		dpa_bp_free(priv, priv->dpa_bp);
+		dpa_bp_free(priv);
 bp_create_failed:
 fq_probe_failed:
 	devm_kfree(dev, buf_layout);
-- 
1.9.1

