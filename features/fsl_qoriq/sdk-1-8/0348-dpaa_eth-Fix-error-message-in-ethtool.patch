From 7553d23fa99f2d1fe9ca5d0384d6173a007d8904 Mon Sep 17 00:00:00 2001
From: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Date: Tue, 27 Aug 2013 09:29:50 +0300
Subject: [PATCH 348/987] dpaa_eth: Fix error message in ethtool

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Interfaces only get their PHYs initialized when they are first
brought up, therefore running ethtool on an interface that is down
prints an error message and returns with error code.
Lower the print to debug mode and return non-error code.

Signed-off-by: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Change-Id: Ic4e9304cf9e6152868af74a31132e92d95713b62
Reviewed-on: http://git.am.freescale.net:8181/4259
Reviewed-by: Radulescu Ruxandra Ioana-B05472 <ruxandra.radulescu@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpa-ethtool.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
index 37b8cae..5eece2f 100644
--- a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
@@ -50,8 +50,8 @@ static int __cold dpa_get_settings(struct net_device *net_dev,
 		return -ENODEV;
 	}
 	if (unlikely(priv->mac_dev->phy_dev == NULL)) {
-		netdev_err(net_dev, "phy device not initialized\n");
-		return -ENODEV;
+		netdev_dbg(net_dev, "phy device not initialized\n");
+		return 0;
 	}
 
 	_errno = phy_ethtool_gset(priv->mac_dev->phy_dev, et_cmd);
-- 
1.9.1

