From 0a953ec2797371862dd4cccd01a374a8770a3ae7 Mon Sep 17 00:00:00 2001
From: "Lu.Jiang" <lu.jiang@windriver.com>
Date: Fri, 12 Sep 2014 17:12:01 +0800
Subject: [PATCH 593/987] mpc85xx: Expand the size of u-boot Bootloader Image

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Because the size of u-boot Bootloader gets bigger, this patch adjust
the size for NAND bootloader to 768KB and adjust the size for SPI
bootloader to 1MB.

Signed-off-by: Ying Zhang <b40530@freescale.com>
Change-Id: Ida21977b15cc25c9e2667138222537b3af7138c7
Reviewed-on: http://git.am.freescale.net:8181/9454
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
Signed-off-by: Lu.Jiang <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1010rdb.dtsi    |  6 +++---
 arch/powerpc/boot/dts/p1020rdb-pd.dtsi | 28 ++++++++++++++--------------
 arch/powerpc/boot/dts/p1021rdb-pc.dtsi | 28 ++++++++++++++--------------
 arch/powerpc/boot/dts/p1022ds.dtsi     | 10 +++++-----
 arch/powerpc/boot/dts/p1025rdb.dtsi    | 24 ++++++++++++------------
 arch/powerpc/boot/dts/p1025twr.dtsi    | 18 +++++++++---------
 arch/powerpc/boot/dts/p2020rdb-pc.dtsi | 32 ++++++++++++++++----------------
 7 files changed, 73 insertions(+), 73 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1010rdb.dtsi b/arch/powerpc/boot/dts/p1010rdb.dtsi
index 8b5fa3f..5d32588 100644
--- a/arch/powerpc/boot/dts/p1010rdb.dtsi
+++ b/arch/powerpc/boot/dts/p1010rdb.dtsi
@@ -59,11 +59,11 @@
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@1f00000 {
+		partition@1ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x01f00000 0x00100000>;
+			reg = <0x01ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
diff --git a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
index 6e07fa7..9eb383d 100644
--- a/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
+++ b/arch/powerpc/boot/dts/p1020rdb-pd.dtsi
@@ -54,24 +54,24 @@
 		};
 
 		partition@400000 {
-			/* 58MB for Root file System */
-			reg = <0x00400000 0x03a00000>;
+			/* 57.75MB for Root file System */
+			reg = <0x00400000 0x039c0000>;
 			label = "NOR Root File System";
 		};
 
-		partition@3e00000 {
+		partition@3dc0000 {
 			/* This location must not be altered  */
 			/* 1M for Vitesse 7385 Switch firmware */
-			reg = <0x3e00000 0x00100000>;
+			reg = <0x3dc0000 0x00100000>;
 			label = "NOR Vitesse-7385 Firmware";
 			read-only;
 		};
 
-		partition@3f00000 {
+		partition@3ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x03f00000 0x00100000>;
+			reg = <0x03ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
@@ -156,33 +156,33 @@
 			spi-max-frequency = <40000000>; /* input clock */
 
 			partition@u-boot {
-				/* 512KB for u-boot Bootloader Image */
-				reg = <0x0 0x00080000>;
+				/* 1MB for u-boot Bootloader Image */
+				reg = <0x0 0x00100000>;
 				label = "u-boot";
 				read-only;
 			};
 
 			partition@dtb {
 				/* 512KB for DTB Image*/
-				reg = <0x00080000 0x00080000>;
+				reg = <0x00100000 0x00080000>;
 				label = "dtb";
 			};
 
 			partition@kernel {
 				/* 4MB for Linux Kernel Image */
-				reg = <0x00100000 0x00400000>;
+				reg = <0x00180000 0x00400000>;
 				label = "kernel";
 			};
 
 			partition@fs {
 				/* 4MB for Compressed RFS Image */
-				reg = <0x00500000 0x00400000>;
+				reg = <0x00580000 0x00400000>;
 				label = "file system";
 			};
 
 			partition@jffs-fs {
-				/* 7MB for JFFS2 based RFS */
-				reg = <0x00900000 0x00700000>;
+				/* 6.5MB for JFFS2 based RFS */
+				reg = <0x00980000 0x00680000>;
 				label = "file system jffs2";
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
index d6274c5..dbd340f 100644
--- a/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p1021rdb-pc.dtsi
@@ -62,24 +62,24 @@
 		};
 
 		partition@400000 {
-			/* 10.75MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00ac0000>;
+			/* 10.5MB for JFFS2 based Root file System */
+			reg = <0x00400000 0x00a80000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@ec0000 {
+		partition@e80000 {
 			/* This location must not be altered  */
 			/* 256KB for QE ucode firmware*/
-			reg = <0x00ec0000 0x00040000>;
+			reg = <0x00e80000 0x00040000>;
 			label = "NOR QE microcode firmware";
 			read-only;
 		};
 
-		partition@f00000 {
+		partition@ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x00f00000 0x00100000>;
+			reg = <0x00ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 		};
 	};
@@ -155,33 +155,33 @@
 			spi-max-frequency = <40000000>; /* input clock */
 
 			partition@u-boot {
-				/* 512KB for u-boot Bootloader Image */
-				reg = <0x0 0x00080000>;
+				/* 1MB for u-boot Bootloader Image */
+				reg = <0x0 0x00100000>;
 				label = "SPI Flash U-Boot Image";
 				read-only;
 			};
 
 			partition@dtb {
 				/* 512KB for DTB Image */
-				reg = <0x00080000 0x00080000>;
+				reg = <0x00100000 0x00080000>;
 				label = "SPI Flash DTB Image";
 			};
 
 			partition@kernel {
 				/* 4MB for Linux Kernel Image */
-				reg = <0x00100000 0x00400000>;
+				reg = <0x00180000 0x00400000>;
 				label = "SPI Flash Linux Kernel Image";
 			};
 
 			partition@fs {
 				/* 4MB for Compressed RFS Image */
-				reg = <0x00500000 0x00400000>;
+				reg = <0x00580000 0x00400000>;
 				label = "SPI Flash Compressed RFSImage";
 			};
 
 			partition@jffs-fs {
-				/* 7MB for JFFS2 based RFS */
-				reg = <0x00900000 0x00700000>;
+				/* 6.5MB for JFFS2 based RFS */
+				reg = <0x00980000 0x00680000>;
 				label = "SPI Flash JFFS2 RFS";
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p1022ds.dtsi b/arch/powerpc/boot/dts/p1022ds.dtsi
index 751a28e..91b0bb7 100644
--- a/arch/powerpc/boot/dts/p1022ds.dtsi
+++ b/arch/powerpc/boot/dts/p1022ds.dtsi
@@ -66,18 +66,18 @@
 		};
 
 		partition@4400000 {
-			reg = <0x04400000 0x03b00000>;
+			reg = <0x04400000 0x03ac0000>;
 			label = "jffs2-nor";
 		};
 
-		partition@7f00000 {
-			reg = <0x07f00000 0x00080000>;
+		partition@7ec0000 {
+			reg = <0x07ec0000 0x00080000>;
 			label = "dtb-nor";
 			read-only;
 		};
 
-		partition@7f80000 {
-			reg = <0x07f80000 0x00080000>;
+		partition@7f40000 {
+			reg = <0x07f40000 0x000c0000>;
 			label = "u-boot-nor";
 			read-only;
 		};
diff --git a/arch/powerpc/boot/dts/p1025rdb.dtsi b/arch/powerpc/boot/dts/p1025rdb.dtsi
index 7d77293..824588c 100644
--- a/arch/powerpc/boot/dts/p1025rdb.dtsi
+++ b/arch/powerpc/boot/dts/p1025rdb.dtsi
@@ -69,16 +69,16 @@
 		};
 
 		partition@400000 {
-			/* 11MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00b00000>;
+			/* 10.75MB for JFFS2 based Root file System */
+			reg = <0x00400000 0x00ac0000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@f00000 {
+		partition@ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x00f00000 0x00100000>;
+			reg = <0x00ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
@@ -149,33 +149,33 @@
 			spi-max-frequency = <40000000>; /* input clock */
 
 			partition@u-boot {
-				/* 512KB for u-boot Bootloader Image */
-				reg = <0x0 0x00080000>;
+				/* 1MB for u-boot Bootloader Image */
+				reg = <0x0 0x00100000>;
 				label = "u-boot";
 				read-only;
 			};
 
 			partition@dtb {
 				/* 512KB for DTB Image */
-				reg = <0x00080000 0x00080000>;
+				reg = <0x00100000 0x00080000>;
 				label = "dtb";
 			};
 
 			partition@kernel {
 				/* 4MB for Linux Kernel Image */
-				reg = <0x00100000 0x00400000>;
+				reg = <0x00180000 0x00400000>;
 				label = "kernel";
 			};
 
 			partition@fs {
 				/* 4MB for Compressed RFS Image */
-				reg = <0x00500000 0x00400000>;
+				reg = <0x00580000 0x00400000>;
 				label = "file system";
 			};
 
 			partition@jffs-fs {
-				/* 7MB for JFFS2 based RFS */
-				reg = <0x00900000 0x00700000>;
+				/* 6.5MB for JFFS2 based RFS */
+				reg = <0x00980000 0x00680000>;
 				label = "file system jffs2";
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p1025twr.dtsi b/arch/powerpc/boot/dts/p1025twr.dtsi
index 8453501..43441a7 100644
--- a/arch/powerpc/boot/dts/p1025twr.dtsi
+++ b/arch/powerpc/boot/dts/p1025twr.dtsi
@@ -68,25 +68,25 @@
 			label = "NOR Linux Kernel Image";
 		};
 
-		partition@400000 {
-			/* 56.75MB for Root file System */
-			reg = <0x00600000 0x038c0000>;
-			label = "NOR Root File System";
+		partition@600000 {
+			/* 56.5MB for JFFS2 based Root file System */
+			reg = <0x00600000 0x03880000>;
+			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@ec0000 {
+		partition@3e80000 {
 			/* This location must not be altered  */
 			/* 256KB for QE ucode firmware*/
-			reg = <0x03ec0000 0x00040000>;
+			reg = <0x03e80000 0x00040000>;
 			label = "NOR QE microcode firmware";
 			read-only;
 		};
 
-		partition@f00000 {
+		partition@3ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x03f00000 0x00100000>;
+			reg = <0x03ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
diff --git a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
index 154fba4..6656f75 100644
--- a/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
+++ b/arch/powerpc/boot/dts/p2020rdb-pc.dtsi
@@ -62,16 +62,16 @@
 		};
 
 		partition@400000 {
-			/* 11MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00b00000>;
+			/* 10.75MB for JFFS2 based Root file System */
+			reg = <0x00400000 0x00ac0000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@f00000 {
+		partition@ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x00f00000 0x00100000>;
+			reg = <0x00ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
@@ -156,33 +156,33 @@
 			spi-max-frequency = <40000000>;
 
 			partition@0 {
-				/* 512KB for u-boot Bootloader Image */
-				reg = <0x0 0x00080000>;
+				/* 1MKB for u-boot Bootloader Image */
+				reg = <0x0 0x00100000>;
 				label = "SPI U-Boot Image";
 				read-only;
 			};
 
-			partition@80000 {
+			partition@100000 {
 				/* 512KB for DTB Image */
-				reg = <0x00080000 0x00080000>;
+				reg = <0x00100000 0x00080000>;
 				label = "SPI DTB Image";
 			};
 
-			partition@100000 {
+			partition@180000 {
 				/* 4MB for Linux Kernel Image */
-				reg = <0x00100000 0x00400000>;
+				reg = <0x00180000 0x00400000>;
 				label = "SPI Linux Kernel Image";
 			};
 
-			partition@500000 {
+			partition@580000 {
 				/* 4MB for Compressed RFS Image */
-				reg = <0x00500000 0x00400000>;
+				reg = <0x00580000 0x00400000>;
 				label = "SPI Compressed RFS Image";
 			};
 
-			partition@900000 {
-				/* 7MB for JFFS2 based RFS */
-				reg = <0x00900000 0x00700000>;
+			partition@980000 {
+				/* 6.5MB for JFFS2 based RFS */
+				reg = <0x00980000 0x00680000>;
 				label = "SPI JFFS2 RFS";
 			};
 		};
-- 
1.9.1

