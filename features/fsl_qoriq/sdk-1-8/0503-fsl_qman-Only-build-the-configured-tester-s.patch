From c41fad47fdaa88a7a816efcc8e204119f683e7b1 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Sat, 18 Jan 2014 05:57:35 -0600
Subject: [PATCH 503/987] fsl_qman: Only build the configured tester(s)

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
Change-Id: I9c7321c5de8956d4fdef7f5d9128047080de552a
Reviewed-on: http://git.am.freescale.net:8181/8098
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Haiying Wang <Haiying.Wang@freescale.com>
Reviewed-by: Emilian Medve <Emilian.Medve@freescale.com>
---
 drivers/staging/fsl_qbman/Makefile | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl_qbman/Makefile b/drivers/staging/fsl_qbman/Makefile
index e97214f..0e38610 100644
--- a/drivers/staging/fsl_qbman/Makefile
+++ b/drivers/staging/fsl_qbman/Makefile
@@ -16,8 +16,9 @@ bman_debugfs_interface-y	 = bman_debugfs.o
 obj-$(CONFIG_FSL_QMAN)		+= qman_high.o qman_utility.o
 obj-$(CONFIG_FSL_QMAN_CONFIG)	+= qman_config.o qman_driver.o
 obj-$(CONFIG_FSL_QMAN_TEST)	+= qman_tester.o
-qman_tester-y			 = qman_test.o qman_test_hotpotato.o \
-				   qman_test_high.o
+qman_tester-y			 = qman_test.o
+qman_tester-$(CONFIG_FSL_QMAN_TEST_STASH_POTATO) += qman_test_hotpotato.o
+qman_tester-$(CONFIG_FSL_QMAN_TEST_HIGH) += qman_test_high.o
 obj-$(CONFIG_FSL_QMAN_DEBUGFS)	+= qman_debugfs_interface.o
 qman_debugfs_interface-y	 = qman_debugfs.o
 
-- 
1.9.1

