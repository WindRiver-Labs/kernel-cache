From 7779422560329f6112088618e6aa026d9e5d2479 Mon Sep 17 00:00:00 2001
From: Pan Jiafei <Jiafei.Pan@freescale.com>
Date: Tue, 10 Mar 2015 15:50:00 +0800
Subject: [PATCH 924/987] capwap: sync with new config flavor for FManV3

CONFIG_FMAN_T4240 was eliminated.
Instead, there are now two flags representing FmanV3:
CONFIG_FMAN_V3H for FmanV3H arch and
CONFIG_FMAN_V3L for FmanV3L arch

Signed-off-by: Pan Jiafei <Jiafei.Pan@freescale.com>
Change-Id: Ia0de7b70a0c110e379edb38ee61779e7560979a7
Reviewed-on: http://git.am.freescale.net:8181/33329
Reviewed-by: Mandy Lavi <Mandy.Lavi@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Honghua Yin <Hong-Hua.Yin@freescale.com>
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c b/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
index 8c4683a..1825bf4 100644
--- a/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
+++ b/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
@@ -465,7 +465,7 @@ int capwap_fq_pre_init(struct dpaa_capwap_domain *capwap_domain)
 		channel = (uint16_t)
 			fm_get_tx_port_channel(net_priv->mac_dev->port_dev[TX]);
 		context_a = (u64)1 << 63;
-#ifdef CONFIG_FMAN_T4240
+#if (defined CONFIG_FMAN_V3H) || (defined CONFIG_FMAN_V3L)
 		/* Configure the Tx queues for recycled frames, such that the
 		 * buffers are released by FMan and no confirmation is sent
 		 */
-- 
1.9.1

