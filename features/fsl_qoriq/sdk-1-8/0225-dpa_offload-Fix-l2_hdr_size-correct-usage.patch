From 5e54f35bc06ce2d4be49ec20733996325761499e Mon Sep 17 00:00:00 2001
From: Anca Jeanina FLOAREA <anca.floarea@freescale.com>
Date: Fri, 14 Jun 2013 15:42:22 +0300
Subject: [PATCH 225/987] dpa_offload: Fix l2_hdr_size correct usage

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Function build_extended_encap_shared_descriptor had the fourth
parameter as an uint8_t, but it must be uint32_t in order to
store the l2_hdr_size.

Signed-off-by: Anca Jeanina FLOAREA <anca.floarea@freescale.com>
Change-Id: Iabcdc3f80aa372a695385d3d39f1759647651792
Reviewed-on: http://git.am.freescale.net:8181/2969
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Varvara Andrei-B21317 <andrei.varvara@freescale.com>
Reviewed-by: Chereji Marian-Cornel-R27762 <marian.chereji@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c b/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
index f0be148..b0d9e16 100644
--- a/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
+++ b/drivers/staging/fsl_dpa_offload/dpa_ipsec_desc.c
@@ -870,7 +870,7 @@ void built_decap_extra_material(struct dpa_ipsec_sa *sa,
 int build_extended_encap_shared_descriptor(struct dpa_ipsec_sa *sa,
 				     dma_addr_t auth_key_dma,
 				     dma_addr_t crypto_key_dma,
-				     uint8_t bytes_to_copy,
+				     uint32_t bytes_to_copy,
 				     int sec_era)
 {
 	uint32_t *desc, *no_sg_jump, *extra_cmds;
-- 
1.9.1

