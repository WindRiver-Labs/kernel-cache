From e28bb7c0a2c971df5b5acc686f9ee8bd5753857f Mon Sep 17 00:00:00 2001
From: Zhao Qiang <B45475@freescale.com>
Date: Wed, 6 Aug 2014 15:44:05 +0800
Subject: [PATCH 30/57] qe-tdm: move siram_init_flag to qe.c

Signed-off-by: Zhao Qiang <B45475@freescale.com>
Change-Id: Id21f861ffec995ad68378a9d2eda245ef989b489
Reviewed-on: http://git.am.freescale.net:8181/19009
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Richard Schmitt <richard.schmitt@freescale.com>
[Original patch taken from QorIQ-SDK-V1.8-20150619-yocto.]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/include/asm/qe.h    |    2 ++
 arch/powerpc/sysdev/qe_lib/qe.c  |    2 ++
 drivers/net/wan/fsl_ucc_hdlc.c   |    1 -
 drivers/tdm/device/fsl_ucc_tdm.c |    1 -
 4 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/include/asm/qe.h b/arch/powerpc/include/asm/qe.h
index f06c7b3..a7387c2 100644
--- a/arch/powerpc/include/asm/qe.h
+++ b/arch/powerpc/include/asm/qe.h
@@ -32,6 +32,8 @@
 #define MEM_PART_SECONDARY	1
 #define MEM_PART_MURAM		2
 
+extern int siram_init_flag;
+
 /* Clocks and BRGs */
 enum qe_clock {
 	QE_CLK_NONE = 0,
diff --git a/arch/powerpc/sysdev/qe_lib/qe.c b/arch/powerpc/sysdev/qe_lib/qe.c
index f963875..60fd601 100644
--- a/arch/powerpc/sysdev/qe_lib/qe.c
+++ b/arch/powerpc/sysdev/qe_lib/qe.c
@@ -40,6 +40,8 @@
 static void qe_snums_init(void);
 static int qe_sdma_init(void);
 
+int siram_init_flag;
+
 static DEFINE_SPINLOCK(qe_lock);
 DEFINE_SPINLOCK(cmxgcr_lock);
 EXPORT_SYMBOL(cmxgcr_lock);
diff --git a/drivers/net/wan/fsl_ucc_hdlc.c b/drivers/net/wan/fsl_ucc_hdlc.c
index 8471dfa..e5c0db9 100644
--- a/drivers/net/wan/fsl_ucc_hdlc.c
+++ b/drivers/net/wan/fsl_ucc_hdlc.c
@@ -76,7 +76,6 @@ static struct ucc_hdlc_info uhdlc_primary_info = {
 };
 
 static struct ucc_hdlc_info uhdlc_info[MAX_HDLC_NUM];
-static int siram_init_flag;
 
 
 #ifdef DEBUG
diff --git a/drivers/tdm/device/fsl_ucc_tdm.c b/drivers/tdm/device/fsl_ucc_tdm.c
index c9a3338..bbcf1e0 100644
--- a/drivers/tdm/device/fsl_ucc_tdm.c
+++ b/drivers/tdm/device/fsl_ucc_tdm.c
@@ -81,7 +81,6 @@ static struct ucc_tdm_info utdm_primary_info = {
 };
 
 static struct ucc_tdm_info utdm_info[MAX_TDM_NUM];
-static int siram_init_flag;
 
 #ifdef DEBUG
 static void dump_siram(struct ucc_tdm_private *priv)
-- 
1.7.5.4

