From 55d8973227d165c1674df16b9e069ccc5ce2b74c Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Thu, 18 Apr 2013 15:23:16 +0800
Subject: [PATCH 103/987] powerpc/corenet/dts: add compatible for 10G PHY

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Compatible "ethernet-phy-ieee802.3-c45" is used to indicate that a
10G PHY should be accessed by clause 45, without the compatible,
the 10G PHY will not be accessed correctly.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Change-Id: I672331998d08e3730c9fde3163ff84cd6c0e2b2a
Reviewed-on: http://git.am.freescale.net:8181/1494
Reviewed-by: Zang Tiefei-R61911 <tie-fei.zang@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 arch/powerpc/boot/dts/p2041rdb.dts | 1 +
 arch/powerpc/boot/dts/p3041ds.dts  | 2 ++
 arch/powerpc/boot/dts/p4080ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5020ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5040ds.dts  | 2 ++
 5 files changed, 9 insertions(+)

diff --git a/arch/powerpc/boot/dts/p2041rdb.dts b/arch/powerpc/boot/dts/p2041rdb.dts
index d4328e9..03404e2 100644
--- a/arch/powerpc/boot/dts/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/p2041rdb.dts
@@ -255,6 +255,7 @@
 			mdio@f1000 {
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 81afbc5..3390665 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -257,11 +257,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p4080ds.dts b/arch/powerpc/boot/dts/p4080ds.dts
index a7663b1..e952ade 100644
--- a/arch/powerpc/boot/dts/p4080ds.dts
+++ b/arch/powerpc/boot/dts/p4080ds.dts
@@ -436,6 +436,7 @@
 			#size-cells = <0>;
 
 			phy11: ethernet-phy@0 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x0>;
 			};
 		};
@@ -446,6 +447,7 @@
 			#size-cells = <0>;
 
 			phy10: ethernet-phy@4 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x4>;
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index cbaba53..80d847a 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -257,11 +257,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 6f92b17..2a56628 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -508,6 +508,7 @@
 					status = "disabled";
 
 					phy_xgmii_slot_1: ethernet-phy@0 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <4>;
 					};
 				};
@@ -519,6 +520,7 @@
 					reg = <2>;
 
 					phy_xgmii_slot_2: ethernet-phy@4 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <0>;
 					};
 				};
-- 
1.9.1

