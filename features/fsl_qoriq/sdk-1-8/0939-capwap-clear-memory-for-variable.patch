From 2880cc424b8a41160d34e380d6cc804111e5bf11 Mon Sep 17 00:00:00 2001
From: Pan Jiafei <Jiafei.Pan@freescale.com>
Date: Wed, 1 Apr 2015 11:18:52 +0800
Subject: [PATCH 939/987] capwap: clear memory for variable

Signed-off-by: Pan Jiafei <Jiafei.Pan@freescale.com>
Change-Id: I4c37af569b6011945860d2d7379e728ee69e133d
Reviewed-on: http://git.am.freescale.net:8181/34071
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Jianhua Xie <jianhua.xie@freescale.com>
Reviewed-by: Honghua Yin <Hong-Hua.Yin@freescale.com>
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c b/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
index 1825bf4..c343a4d 100644
--- a/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
+++ b/drivers/net/ethernet/freescale/dpa/capwap/dpaa_capwap_fq.c
@@ -150,6 +150,7 @@ int capwap_fq_rx_init(struct qman_fq *fq, u32 fqid,
 		return ret;
 	}
 
+	memset(&opts, 0, sizeof(opts));
 	opts.we_mask = QM_INITFQ_WE_DESTWQ | QM_INITFQ_WE_FQCTRL |
 			QM_INITFQ_WE_CONTEXTA;
 	opts.fqd.dest.channel = channel;
@@ -191,6 +192,7 @@ int capwap_fq_tx_init(struct qman_fq *fq, u16 channel,
 		return ret;
 	}
 
+	memset(&opts, 0, sizeof(opts));
 	opts.we_mask = QM_INITFQ_WE_DESTWQ | QM_INITFQ_WE_FQCTRL;
 	if (context_a)
 		opts.we_mask |= QM_INITFQ_WE_CONTEXTA;
-- 
1.9.1

