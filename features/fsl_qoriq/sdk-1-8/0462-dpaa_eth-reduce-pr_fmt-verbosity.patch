From d976b211e2e9fe809f005845f41c5e633e198392 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Tue, 17 Dec 2013 14:34:15 +0200
Subject: [PATCH 462/987] dpaa_eth: reduce pr_fmt() verbosity

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Make pr_fmt() less verbose except for the case when
FSL_DPAA_ETH_DEBUG is enabled.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: Ibaee9a31a0bdfc72c5ec4314b27fd0996bfdbaf5
Reviewed-on: http://git.am.freescale.net:8181/7449
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Marian Cristian Rotariu <marian.rotariu@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/7698
---
 drivers/net/ethernet/freescale/dpa/dpa-ethtool.c      | 5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c         | 5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c | 5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c   | 5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c      | 5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c  | 5 +++++
 drivers/net/ethernet/freescale/dpa/mac-api.c          | 5 +++++
 drivers/net/ethernet/freescale/dpa/mac.c              | 5 +++++
 drivers/net/ethernet/freescale/dpa/offline_port.c     | 6 ++++++
 9 files changed, 46 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
index 5eece2f..ecc16a3 100644
--- a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/string.h>
 
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 4a8dd1d..acf470c 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
index 54d7daa..003d54f 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
index 1b77982..bfdc32b 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
index be60889..d8d6d6a 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/skbuff.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
index b2f3cd2..d660a3e 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index 6faeaa9..98dd243 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/mac.c b/drivers/net/ethernet/freescale/dpa/mac.c
index 158fc30..3e722eb 100644
--- a/drivers/net/ethernet/freescale/dpa/mac.c
+++ b/drivers/net/ethernet/freescale/dpa/mac.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/offline_port.c b/drivers/net/ethernet/freescale/dpa/offline_port.c
index 50bf68f..8b25084 100644
--- a/drivers/net/ethernet/freescale/dpa/offline_port.c
+++ b/drivers/net/ethernet/freescale/dpa/offline_port.c
@@ -33,9 +33,15 @@
  * Validates device-tree configuration and sets up the offline ports.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
+
 
 #include <linux/init.h>
 #include <linux/module.h>
-- 
1.9.1

