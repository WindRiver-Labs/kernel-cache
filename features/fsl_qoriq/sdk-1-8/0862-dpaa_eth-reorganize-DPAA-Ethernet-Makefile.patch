From dd695a19ee0bb59c77cd6836c0721e7fd442aa98 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Fri, 25 Jul 2014 10:28:37 +0300
Subject: [PATCH 862/987] dpaa_eth: reorganize DPAA Ethernet Makefile

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: I4bb6955baf63962dbb5dda09fd2302dbaba9c85a
Reviewed-on: http://git.am.freescale.net:8181/15299
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Cristian Bercaru <cristian.bercaru@freescale.com>

Conflicts:
	drivers/net/ethernet/freescale/dpa/Makefile
[Yang: Original patch taken from
QorIQ-SDK-V1.8-SOURCE-20150619-yocto.iso]
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/Makefile | 19 +++++++++++--------
 1 file changed, 11 insertions(+), 8 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/Makefile b/drivers/net/ethernet/freescale/dpa/Makefile
index 9a05012..6c19086 100644
--- a/drivers/net/ethernet/freescale/dpa/Makefile
+++ b/drivers/net/ethernet/freescale/dpa/Makefile
@@ -8,15 +8,19 @@ include $(srctree)/drivers/net/ethernet/freescale/fman/ncsw_config.mk
 
 ccflags-y += -I$(NET_DPA)
 
-obj-$(CONFIG_FSL_DPAA_1588) += dpaa_1588.o
-# dpaa_debugfs needs to be initialized before dpaa_eth
-obj-$(CONFIG_FSL_DPAA_ETH_DEBUGFS) += dpaa_debugfs.o
-obj-$(CONFIG_FSL_DPAA_ETH) += fsl-mac.o fsl-dpa.o fsl-dpa-common.o
+obj-$(CONFIG_FSL_DPAA_ETH) += fsl_mac.o fsl_dpa.o
 obj-$(CONFIG_PTP_1588_CLOCK_DPAA) += dpaa_ptp.o
 
-fsl-dpa-objs	:= dpaa_ethtool.o dpaa_eth_sysfs.o \
-  dpaa_eth.o dpaa_eth_sg.o
-fsl-dpa-common-objs	:= dpaa_eth_common.o
+fsl_dpa-objs += dpaa_ethtool.o dpaa_eth_sysfs.o dpaa_eth.o dpaa_eth_sg.o dpaa_eth_common.o
+ifeq ($(CONFIG_FSL_DPAA_ETH_DEBUGFS),y)
+fsl_dpa-objs += dpaa_debugfs.o
+endif
+ifeq ($(CONFIG_FSL_DPAA_1588),y)
+fsl_dpa-objs += dpaa_1588.o
+endif
+
+fsl_mac-objs += mac.o mac-api.o
+
 # Advanced drivers
 ifeq ($(CONFIG_FSL_DPAA_ADVANCED_DRIVERS),y)
 obj-$(CONFIG_FSL_DPAA_ETH) += fsl_advanced.o
@@ -40,7 +44,6 @@ fsl_generic-objs += dpaa_generic_debugfs.o
 endif
 endif
 
-fsl-mac-objs	:= mac.o mac-api.o
 obj-$(CONFIG_FSL_CAPWAP) += capwap/
 
 # Needed by the tracing framework
-- 
1.9.1

