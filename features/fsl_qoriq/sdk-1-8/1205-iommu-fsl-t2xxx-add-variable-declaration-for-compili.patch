From 2f658aea21b34ca270b19071d1cf2580bf391652 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Wed, 4 Nov 2015 06:38:24 +0000
Subject: [PATCH 1205/1207] iommu: fsl-t2xxx: add variable declaration for
 compiling error

Because of upstream commit 70ebd071ea1a
("iommu/fsl: Really fix init section(s) content"), the global variable
"struct ome *omt" has been change to a local variable in fsl_pamu_probe.
So we need to add variable decalaration for "omt" in iommu_resume, or it
will occurr compiling error as below:

drivers/iommu/fsl_pamu.c:1479:24: error: 'omt' undeclared (first use in this function)
           virt_to_phys(omt));
                        ^
Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 drivers/iommu/fsl_pamu.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/iommu/fsl_pamu.c b/drivers/iommu/fsl_pamu.c
index 31e71df..6181d5c 100644
--- a/drivers/iommu/fsl_pamu.c
+++ b/drivers/iommu/fsl_pamu.c
@@ -1467,7 +1467,9 @@ static void iommu_resume(void)
 {
 	int i;
 	u32 pamubypenr, pamu_counter;
+	struct ome *omt;
 
+	omt = (void *)spaact + (PAGE_SIZE << get_order(SPAACT_SIZE));
 	restore_dcfg_liodns();
 	pamubypenr = in_be32(&guts_regs->pamubypenr);
 	for (i = 0, pamu_counter = 0x80000000; i < pamu_info_data.count;
-- 
2.0.2

