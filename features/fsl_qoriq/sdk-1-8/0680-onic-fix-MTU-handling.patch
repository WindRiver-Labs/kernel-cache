From 0b93a7447f05c53b3a56e3a4a5a8fe913524fb67 Mon Sep 17 00:00:00 2001
From: Marian Rotariu <marian.rotariu@freescale.com>
Date: Mon, 5 May 2014 13:59:43 +0300
Subject: [PATCH 680/987] onic: fix MTU handling

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

The MTU known by the network device driver was initialized with a default value
(1500) and could not be validated in accordance with DPAA values.
This patch initializes the MTU with proper values and adds the posibility to be
changed and validated at run-time.

Signed-off-by: Marian Rotariu <marian.rotariu@freescale.com>
Change-Id: I44b9a9e18dbb45669e16913f0f5bdc290ec3e6b2
Reviewed-on: http://git.am.freescale.net:8181/11833
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
index 456c856..534b283 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_generic.c
@@ -100,6 +100,8 @@ static const struct net_device_ops dpa_generic_ops = {
 	.ndo_init = dpa_ndo_init,
 	.ndo_set_features = dpa_set_features,
 	.ndo_fix_features = dpa_fix_features,
+	.ndo_init = dpa_ndo_init,
+	.ndo_change_mtu = dpa_change_mtu,
 };
 
 struct rtnl_link_stats64 *__cold
-- 
1.9.1

