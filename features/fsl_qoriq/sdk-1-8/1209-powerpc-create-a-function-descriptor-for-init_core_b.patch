From fd5c6120e98b4e3e7824dcd34b397d9c3162ef83 Mon Sep 17 00:00:00 2001
From: Quanyang Wang <quanyang.wang@windriver.com>
Date: Thu, 5 Nov 2015 10:34:55 +0800
Subject: [PATCH 1209/1209] powerpc: create a function descriptor for
 init_core_book3e

because of upstream commit 6a3bab90cf78
("powerpc: Remove some unnecessary uses of _GLOBAL() and _STATIC()"),
init_core_book3e was changed to be a local label. But we reference this function
in arch/powerpc/kernel/head_64.S when CONFIG_RELOCATABLE is set. So change it
back to be a function descriptor, or else it will occurr a compile error as below:

 arch/powerpc/kernel/head_64.o: In function `__after_prom_start':
 arch/powerpc/kernel/head_64.S:508: undefined reference to `.init_core_book3e'

Signed-off-by: Quanyang Wang <quanyang.wang@windriver.com>
---
 arch/powerpc/kernel/exceptions-64e.S | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/kernel/exceptions-64e.S b/arch/powerpc/kernel/exceptions-64e.S
index 714c19e..f501003 100644
--- a/arch/powerpc/kernel/exceptions-64e.S
+++ b/arch/powerpc/kernel/exceptions-64e.S
@@ -1608,7 +1608,7 @@ _GLOBAL(book3e_secondary_thread_init)
 	mflr	r28
 	b	3b
 
-init_core_book3e:
+_GLOBAL(init_core_book3e)
 	/* Establish the interrupt vector base */
 #ifdef CONFIG_RELOCATABLE
 /* In relocatable case the value of the constant expression 'expr' is only
-- 
2.0.2

