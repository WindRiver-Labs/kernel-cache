From 9f70bc59f62383f6e3631060173796dbe84b3bba Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Thu, 28 Feb 2013 14:11:18 +0800
Subject: [PATCH 01/12] net/dpa: fix a dereferencing bug in dpaa_eth_sysfs_remove

The p is a pointer to pointer and we should check the object of the p
point to to decide if there are more device_attribute available.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 0d9fede..fd87f14 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -3683,7 +3683,7 @@ static void dpaa_eth_sysfs_remove(struct net_device *net_dev)
 	struct dpa_priv_s *priv = netdev_priv(net_dev);
 	struct device_attribute **p = &priv->sysfs_attrs[0];
 
-	while (p)
+	while (*p)
 		device_remove_file(&net_dev->dev, *p++);
 }
 
-- 
1.7.0

