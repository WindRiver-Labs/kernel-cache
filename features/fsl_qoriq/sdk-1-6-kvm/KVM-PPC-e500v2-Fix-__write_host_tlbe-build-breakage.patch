From eb2c40aac0baba856e5c4cf575b0b07b90b77dec Mon Sep 17 00:00:00 2001
From: Mihai Caraman <mihai.caraman@freescale.com>
Date: Thu, 25 Apr 2013 15:36:50 +0300
Subject: [PATCH] KVM: PPC: e500v2: Fix __write_host_tlbe() build breakage

commit eb2c40aac0baba856e5c4cf575b0b07b90b77dec git://git.freescale.com/ppc/sdk/linux.git

Fix __write_host_tlbe() build breakage introduced my multiple LPIDs.

Signed-off-by: Mihai Caraman <mihai.caraman@freescale.com>
Change-Id: Id6aba584d334e3bc4c0bf05ae67a330862140a97
Reviewed-on: http://git.am.freescale.net:8181/2107
Reviewed-by: Yoder Stuart-B08248 <stuart.yoder@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Signed-off-by: Vu Tran <vu.tran@windriver.com>

diff --git a/arch/powerpc/kvm/e500_mmu_host.c b/arch/powerpc/kvm/e500_mmu_host.c
index e9a9695..b5e0a85 100644
--- a/arch/powerpc/kvm/e500_mmu_host.c
+++ b/arch/powerpc/kvm/e500_mmu_host.c
@@ -184,7 +184,8 @@ void kvmppc_map_magic(struct kvm_vcpu *vcpu)
 		       MAS3_SW | MAS3_SR | MAS3_UW | MAS3_UR;
 	magic.mas8 = 0;
 
-	__write_host_tlbe(&magic, MAS0_TLBSEL(1) | MAS0_ESEL(tlbcam_index));
+	__write_host_tlbe(&magic, MAS0_TLBSEL(1) | MAS0_ESEL(tlbcam_index),
+			  &magic.mas8);
 	preempt_enable();
 }
 #endif
-- 
1.9.1

