From 6b179d6d9a7be4377df8dd1fdaae4b259adf9fb9 Mon Sep 17 00:00:00 2001
From: Stuart Yoder <stuart.yoder@freescale.com>
Date: Wed, 5 Jun 2013 16:41:44 -0500
Subject: [PATCH] KVM: PPC: use pr_debug not printk for KVM debug prints

commit 6b179d6d9a7be4377df8dd1fdaae4b259adf9fb9 git://git.freescale.com/ppc/sdk/linux.git

the printk always executes whenever a vcpu is moved
to a new physical cpu, which adds unnessary overhead
to context switches...switch to pr_debug which only
executes when enabled at compile time

Signed-off-by: Stuart Yoder <stuart.yoder@freescale.com>
Change-Id: I9856ddcdb061ee6818e2b5ec090728ee1841c8f4
Reviewed-on: http://git.am.freescale.net:8181/2872
Reviewed-by: Wood Scott-B07421 <scottwood@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Signed-off-by: Vu Tran <vu.tran@windriver.com>

diff --git a/arch/powerpc/kvm/e500mc.c b/arch/powerpc/kvm/e500mc.c
index 11de0cd..f6fe44b 100644
--- a/arch/powerpc/kvm/e500mc.c
+++ b/arch/powerpc/kvm/e500mc.c
@@ -126,7 +126,7 @@ void kvmppc_core_vcpu_load(struct kvm_vcpu *vcpu, int cpu)
 	vcpu->arch.epsc = vcpu->arch.eplc;
 
 	if (vcpu->arch.oldpir != mfspr(SPRN_PIR))
-		printk(KERN_DEBUG "vcpu 0x%p loaded on PID %d, lpid %d\n",
+		pr_debug("vcpu 0x%p loaded on PID %d, lpid %d\n",
 		       vcpu, smp_processor_id(), (int)vcpu->arch.lpid);
 
 	mtspr(SPRN_LPID, vcpu->arch.lpid);
-- 
1.9.1

