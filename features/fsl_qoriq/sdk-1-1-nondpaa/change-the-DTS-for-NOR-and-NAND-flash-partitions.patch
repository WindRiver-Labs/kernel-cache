From d8dbebaa1a85d5527a1186e1889f4670cecb9bb1 Mon Sep 17 00:00:00 2001
From: Jerry Huang <Chang-Ming.Huang@freescale.com>
Date: Wed, 19 Aug 2009 18:29:42 +0800
Subject: [PATCH 03/23] change the DTS for NOR and NAND flash partitions

extract from vendor drop _QorIQ_SDK_V1_0x_systembuilder.iso.

According to the new Linux kernel, the partition name must be 'partition'

Signed-off-by: Jerry Huang <Chang-Ming.Huang@freescale.com>
Signed-off-by: Li Yang <leoli@freescale.com>
---
 arch/powerpc/boot/dts/p2020ds.dtsi |   66 ++++++++++++++++++++++--------------
 1 file changed, 41 insertions(+), 25 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2020ds.dtsi b/arch/powerpc/boot/dts/p2020ds.dtsi
index d3b939c..88a69db 100644
--- a/arch/powerpc/boot/dts/p2020ds.dtsi
+++ b/arch/powerpc/boot/dts/p2020ds.dtsi
@@ -41,37 +41,44 @@
 		bank-width = <2>;
 		device-width = <1>;
 
-		ramdisk@0 {
+		partition@0 {
 			reg = <0x0 0x03000000>;
+			label = "ramdisk-nor";
 			read-only;
 		};
 
-		diagnostic@3000000 {
+		partition@3000000 {
 			reg = <0x03000000 0x00e00000>;
+			label = "diagnostic-nor";
 			read-only;
 		};
 
-		dink@3e00000 {
+		partition@3e00000 {
 			reg = <0x03e00000 0x00200000>;
+			label = "dink-nor";
 			read-only;
 		};
-
-		kernel@4000000 {
+ 
+		partition@4000000 {
 			reg = <0x04000000 0x00400000>;
+			label = "kernel-nor";
 			read-only;
 		};
-
-		jffs2@4400000 {
+ 
+		partition@4400000 {
 			reg = <0x04400000 0x03b00000>;
+			label = "jffs2-nor";
 		};
-
-		dtb@7f00000 {
+ 
+		partition@7f00000 {
 			reg = <0x07f00000 0x00080000>;
+			label = "dtb-nor";
 			read-only;
 		};
-
-		u-boot@7f80000 {
+ 
+		partition@7f80000 {
 			reg = <0x07f80000 0x00080000>;
+			label = "u-boot-nor";
 			read-only;
 		};
 	};
@@ -82,31 +89,40 @@
 		compatible = "fsl,elbc-fcm-nand";
 		reg = <0x2 0x0 0x40000>;
 
-		u-boot@0 {
-			reg = <0x0 0x02000000>;
-			read-only;
-		};
 
-		jffs2@2000000 {
-			reg = <0x02000000 0x10000000>;
-		};
+		partition@0 {
+ 			reg = <0x0 0x02000000>;
+			label = "u-boot-nand";
+ 			read-only;
+ 		};
+ 
 
-		ramdisk@12000000 {
+		partition@2000000 {
+ 			reg = <0x02000000 0x10000000>;
+			label = "jffs2-nand";
+ 		};
+ 
+		partition@12000000 {
 			reg = <0x12000000 0x08000000>;
+			label = "ramdisk-nand";
 			read-only;
 		};
-
-		kernel@1a000000 {
+ 
+		partition@1a000000 {
 			reg = <0x1a000000 0x04000000>;
+			label = "kernel-nand";
 		};
-
-		dtb@1e000000 {
+ 
+		partition@1e000000 {
 			reg = <0x1e000000 0x01000000>;
+			label = "dtb-nand";
 			read-only;
 		};
-
-		empty@1f000000 {
+ 
+		partition@1f000000 {
 			reg = <0x1f000000 0x21000000>;
+			label = "reserved-nand";
+			read-only;
 		};
 	};
 
-- 
1.7.9.7

