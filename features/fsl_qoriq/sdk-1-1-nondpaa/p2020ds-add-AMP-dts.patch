From 3f09e1c7fb8b1f2f4392ecb6d8039fd16970cb46 Mon Sep 17 00:00:00 2001
From: yhe <yongli.he@windriver.com>
Date: Tue, 10 Jul 2012 16:18:24 +0800
Subject: [PATCH 17/23] p2020ds: add AMP dts

AMP DTS for core0 and core1.

Signed-off-by: Yongli He <yongli.he@windriver.com>
---
 arch/powerpc/boot/dts/p2020ds_camp_core0.dts |   64 ++++++++++++
 arch/powerpc/boot/dts/p2020ds_camp_core1.dts |  136 ++++++++++++++++++++++++++
 2 files changed, 200 insertions(+)
 create mode 100644 arch/powerpc/boot/dts/p2020ds_camp_core0.dts
 create mode 100644 arch/powerpc/boot/dts/p2020ds_camp_core1.dts

diff --git a/arch/powerpc/boot/dts/p2020ds_camp_core0.dts b/arch/powerpc/boot/dts/p2020ds_camp_core0.dts
new file mode 100644
index 0000000..933f2ff
--- /dev/null
+++ b/arch/powerpc/boot/dts/p2020ds_camp_core0.dts
@@ -0,0 +1,64 @@
+/*
+ * P2020 DS  Core0 Device Tree Source in CAMP mode.
+ *
+ * In CAMP mode, each core needs to have its own dts. Only mpic and L2 cache
+ * can be shared, all the other devices must be assigned to one core only.
+ * This dts file allows core0 to have memory, l2, i2c, spi, gpio, dma1, usb,
+ * eth1, eth2, sdhc, crypto, global-util, pci0.
+ *
+ * Copyright 2009-2011 Freescale Semiconductor Inc.
+ *
+ * This program is free software; you can redistribute  it and/or modify it
+ * under  the terms of  the GNU General  Public License as published by the
+ * Free Software Foundation;  either version 2 of the  License, or (at your
+ * option) any later version.
+ */
+
+/include/ "p2020ds.dts"
+
+/ {
+	model = "fsl,P2020DS";
+	compatible = "fsl,P2020DS", "fsl,MPC85XXRDB-CAMP";
+
+	cpus {
+		PowerPC,P2020@1 {
+			status = "disabled";
+		};
+	};
+
+	localbus@ffe05000 {
+		status = "disabled";
+	};
+
+	soc@ffe00000 {
+		serial1: serial@4600 {
+			status = "disabled";
+		};
+
+		dma@c300 {
+			status = "disabled";
+		};
+
+		enet1: ethernet@25000 {
+			status = "disabled";
+		};
+
+		mpic: pic@40000 {
+			protected-sources = <
+			31 32 33 59 /* enet2 */
+			76 77 78 79 26 42  /* dma2 pci2 serial */
+			0x0 0x1 0x2 0x3    /*pcie intx*/
+			0xe4 0xe5 0xe6 0xe7 /* msi */
+			>;
+		};
+
+		msi@41600 {
+			status = "disabled";
+		};
+	};
+
+	pci0: pcie@ffe0a000 {
+		status = "disabled";
+	};
+
+};
diff --git a/arch/powerpc/boot/dts/p2020ds_camp_core1.dts b/arch/powerpc/boot/dts/p2020ds_camp_core1.dts
new file mode 100644
index 0000000..604d1dc
--- /dev/null
+++ b/arch/powerpc/boot/dts/p2020ds_camp_core1.dts
@@ -0,0 +1,136 @@
+/*
+ * P2020 DS Core1 Device Tree Source in CAMP mode.
+ *
+ * In CAMP mode, each core needs to have its own dts. Only mpic and L2 cache
+ * can be shared, all the other devices must be assigned to one core only.
+ * This dts allows core1 to have l2, dma2, eth0, pci1, msi.
+ *
+ * Please note to add "-b 1" for core1's dts compiling.
+ *
+ * Copyright 2009-2011 Freescale Semiconductor Inc.
+ *
+ * This program is free software; you can redistribute  it and/or modify it
+ * under  the terms of  the GNU General  Public License as published by the
+ * Free Software Foundation;  either version 2 of the  License, or (at your
+ * option) any later version.
+ */
+
+/include/ "p2020ds.dts"
+
+/ {
+	model = "fsl,P2020DS";
+	compatible = "fsl,P2020DS", "fsl,MPC85XXRDB-CAMP";
+
+	cpus {
+		PowerPC,P2020@0 {
+			status = "disabled";
+		};
+	};
+
+	localbus@ffe05000 {
+		status = "disabled";
+	};
+
+	soc@ffe00000 {
+
+		serial0: serial@4500 {
+			status = "disabled";
+		};
+
+		ecm-law@0 {
+			status = "disabled";
+		};
+
+		ecm@1000 {
+			status = "disabled";
+		};
+
+		memory-controller@2000 {
+			status = "disabled";
+		};
+
+		i2c@3000 {
+			status = "disabled";
+		};
+
+		i2c@3100 {
+			status = "disabled";
+		};
+
+		spi@7000 {
+			status = "disabled";
+		};
+
+		gpio: gpio-controller@f000 {
+			status = "disabled";
+		};
+		
+		dma@21300 {
+			status = "disabled";
+		};
+
+		ptimer@24e00 {
+			status = "disabled";
+		};
+
+		usb@22000 {
+			status = "disabled";
+		};
+
+		mdio@24520 {
+			status = "disabled";
+		};
+
+		mdio@25520 {
+			status = "disabled";
+		};
+
+		mdio@26520 {
+			status = "disabled";
+		};
+
+		enet0: ethernet@24000 {
+			status = "disabled";
+		};
+
+		sdhci@2e000 {
+			status = "disabled";
+		};
+
+		crypto@30000 {
+			status = "disabled";
+		};
+
+		mpic: pic@40000 {
+			protected-sources = <
+			17 18 43 42 59 47 /*ecm, mem, i2c, serial0, spi,gpio */
+			16 20 21 22 23 28 	/* L2, dma1, USB */
+			03 35 36 40 31 32 33 	/* mdio, enet1, enet2 */
+			72 58 25 		/* sdhci, crypto , pci */
+			>;
+		};
+
+		global-utilities@e0000 {	//global utilities block
+			status = "disabled";
+		};
+
+		msi@41600{
+			status = "disabled";
+		};
+	
+	};
+
+	rapidio@ffec0000 {
+		status = "disabled";
+	};
+
+	pci2: pcie@ffe08000 {
+		status = "disabled";
+	};
+
+	pci1: pcie@ffe09000 {
+		status = "disabled";
+	};
+
+
+};
-- 
1.7.9.7

