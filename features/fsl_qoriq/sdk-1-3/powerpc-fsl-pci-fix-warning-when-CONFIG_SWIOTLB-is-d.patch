From aa391ac6469cc84df5e7fc9d05eaadf54425e791 Mon Sep 17 00:00:00 2001
From: Jia Hongtao <B38951@freescale.com>
Date: Tue, 18 Sep 2012 17:57:48 +0800
Subject: [PATCH 116/162] powerpc/fsl-pci: fix warning when CONFIG_SWIOTLB is
 disabled

commit 4d56dec5dca496655ef035ef3b80f7c47dc22b77 upstream

Fix the following warning:
arch/powerpc/sysdev/fsl_pci.c: In function 'fsl_pci_probe':
arch/powerpc/sysdev/fsl_pci.c:867:25: error: unused variable 'hose'

Signed-off-by: Jia Hongtao <B38951@freescale.com>
Acked-by: Michael Neuling <mikey@neuling.org>
Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
[Kevin: Just minor context change in order to port to 3.4 kernel.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/sysdev/fsl_pci.c |    2 ++
 1 file changed, 2 insertions(+)

diff --git a/arch/powerpc/sysdev/fsl_pci.c b/arch/powerpc/sysdev/fsl_pci.c
index b8e2632d..e42b692 100644
--- a/arch/powerpc/sysdev/fsl_pci.c
+++ b/arch/powerpc/sysdev/fsl_pci.c
@@ -905,7 +905,9 @@ static const struct of_device_id pci_ids[] = {
 int primary_phb_addr;
 int fsl_pci_setup(struct device_node *np)
 {
+#ifdef CONFIG_SWIOTLB
 	struct pci_controller *hose;
+#endif
 	int ret = 0;
 	bool is_primary;
 
-- 
1.7.9.7

