From a049698c64f5c1265629758efa063be0e86bd382 Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Wed, 18 Jul 2012 11:30:31 +0300
Subject: [PATCH 038/162] dpaa_eth: Declare netdev GSO support

Declare the NETIF_F_GSO capability for the SG-enabled driver.

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.3-SOURCE-20121114-yocto.iso tarball.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 2378192..c78a8ca 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -3219,8 +3219,10 @@ static int dpa_netdev_init(struct device_node *dpa_node,
 		 * private interfaces
 		 */
 		if (!priv->shared) {
-			net_dev->features |= NETIF_F_SG | NETIF_F_HIGHDMA;
-			net_dev->vlan_features |= NETIF_F_SG | NETIF_F_HIGHDMA;
+			net_dev->features |= NETIF_F_SG | NETIF_F_HIGHDMA |
+				NETIF_F_GSO;
+			net_dev->vlan_features |= NETIF_F_SG | NETIF_F_HIGHDMA |
+				NETIF_F_GSO;
 		}
 #endif
 	}
-- 
1.7.9.7

