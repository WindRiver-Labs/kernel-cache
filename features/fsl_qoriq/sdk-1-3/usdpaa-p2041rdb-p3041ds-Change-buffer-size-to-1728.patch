From 017495e242149fcc4c23720d70a26e9f8243dd9e Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Tue, 4 Dec 2012 13:53:44 +0800
Subject: [PATCH 13/22] usdpaa: p2041rdb/p3041ds: Change buffer size to 1728

BSM in all the FMAN ports have been increased to 128 bytes by default. Thus
there is a possibility of SG frames for MTU sized frames in USDPAA which would
impact the performance. Keeping buffer size to odd cacheline sized multiple of
size sufficient to keep new annotation and MTU frames

Signed-off-by: Yashpal Dutta <yashpal.dutta@freescale.com>
[Extracted from QorIQ-SDK-V1.3-SOURCE-20121114-yocto.iso]
Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 arch/powerpc/boot/dts/p2041rdb-usdpaa.dts |    2 +-
 arch/powerpc/boot/dts/p3041ds-usdpaa.dts  |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts b/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
index f0a4e85..2d7d0bb 100644
--- a/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
+++ b/arch/powerpc/boot/dts/p2041rdb-usdpaa.dts
@@ -59,7 +59,7 @@
 	bp9: buffer-pool@9 {
 		compatible = "fsl,p2041-bpool", "fsl,bpool";
 		fsl,bpid = <9>;
-		fsl,bpool-ethernet-cfg = <0 0 0 1600 0 0xfeedabba>;
+		fsl,bpool-ethernet-cfg = <0 0 0 1728 0 0xfeedabba>;
 		fsl,bpool-thresholds = <0x100 0x300 0x0 0x0>;
 	};
 
diff --git a/arch/powerpc/boot/dts/p3041ds-usdpaa.dts b/arch/powerpc/boot/dts/p3041ds-usdpaa.dts
index 0174311..6f421bb 100644
--- a/arch/powerpc/boot/dts/p3041ds-usdpaa.dts
+++ b/arch/powerpc/boot/dts/p3041ds-usdpaa.dts
@@ -59,7 +59,7 @@
 	bp9: buffer-pool@9 {
 		compatible = "fsl,p3041-bpool", "fsl,bpool";
 		fsl,bpid = <9>;
-		fsl,bpool-ethernet-cfg = <0 0 0 1600 0 0xfeedabba>;
+		fsl,bpool-ethernet-cfg = <0 0 0 1728 0 0xfeedabba>;
 		fsl,bpool-thresholds = <0x100 0x300 0x0 0x0>;
 	};
 	bp10: buffer-pool@10 {
-- 
1.7.9.7

