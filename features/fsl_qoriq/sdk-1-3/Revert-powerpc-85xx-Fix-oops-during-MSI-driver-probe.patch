From aa14656acc919f45976a65244dcee6d82e45c5f7 Mon Sep 17 00:00:00 2001
From: Jiang Bin <bin.jiang@windriver.com>
Date: Thu, 1 Nov 2012 10:28:49 +0800
Subject: [PATCH] Revert "powerpc/85xx: Fix oops during MSI driver probe on
 MPC85xxCDS boards"

This reverts a QorIQ SDK v1.2 commit "powerpc/85xx: Fix oops during MSI
driver probe on MPC85xxCDS boards ".

We should remove MPIC_BROKEN_FRR_NIRQS here since actually this flag is
already dropped by one upstream commit 5019609fc ("powerpc/mpic: Remove
MPIC_BROKEN_FRR_NIRQS and duplicate irq_count").

Signed-off-by: Jiang Bin <bin.jiang@windriver.com>
---
 arch/powerpc/platforms/85xx/mpc85xx_cds.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/powerpc/platforms/85xx/mpc85xx_cds.c b/arch/powerpc/platforms/85xx/mpc85xx_cds.c
index e0f4fba..9fd72b6 100644
--- a/arch/powerpc/platforms/85xx/mpc85xx_cds.c
+++ b/arch/powerpc/platforms/85xx/mpc85xx_cds.c
@@ -221,7 +221,7 @@ static struct irqaction mpc85xxcds_8259_irqaction = {
 static void __init mpc85xx_cds_pic_init(void)
 {
 	struct mpic *mpic;
-	mpic = mpic_alloc(NULL, 0, MPIC_BIG_ENDIAN | MPIC_BROKEN_FRR_NIRQS,
+	mpic = mpic_alloc(NULL, 0, MPIC_BIG_ENDIAN,
 			0, 256, " OpenPIC  ");
 	BUG_ON(mpic == NULL);
 	mpic_init(mpic);
-- 
1.7.9.7

