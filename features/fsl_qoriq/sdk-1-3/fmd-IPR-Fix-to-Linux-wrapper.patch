From 927db5500eaf088bd692df483c5751dcc2d984af Mon Sep 17 00:00:00 2001
From: Stefan Szabo <szbs001@freescale.com>
Date: Wed, 13 Jun 2012 11:11:59 +0000
Subject: [PATCH 071/162] fmd: IPR Fix to Linux wrapper

The Linux wrapper code of the FMD was not properly
updated to deal with all IPR-related changes to LLD headers.
This patch fixes one more of that.

Signed-off-by: Stefan Szabo <szbs001@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.3-SOURCE-20121114-yocto.iso tarball.]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 .../dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c   |    1 +
 .../src/wrapper/lnxwrp_ioctls_fm_compat.c          |    1 +
 2 files changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
index 6762017..e63c8851 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm.c
@@ -2667,6 +2667,7 @@ t_Error LnxwrpFmPortIOCTL(t_LnxWrpFmPortDev *p_LnxWrpFmPortDev, unsigned int cmd
                     port_pcd_params->p_cc_params = compat_ptr(compat_port_pcd_params->p_cc_params);
                     port_pcd_params->p_kg_params = compat_ptr(compat_port_pcd_params->p_kg_params);
                     port_pcd_params->p_plcr_params = compat_ptr(compat_port_pcd_params->p_plcr_params);
+                    port_pcd_params->p_ip_reassembly_manip = compat_ptr(compat_port_pcd_params->p_ip_reassembly_manip);
 
                     /* the prs member is the same, no compat structure...memcpy only */
                     if (port_pcd_params->p_prs_params && !copy_fail)
diff --git a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
index 4a12b90..48e48d9 100644
--- a/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
+++ b/drivers/net/ethernet/freescale/dpa/NetCommSw/src/wrapper/lnxwrp_ioctls_fm_compat.c
@@ -791,6 +791,7 @@ void compat_copy_fm_port_pcd(
         _fm_cpt_dbg(compat," param->p_cc_params=%p  \n", param->p_cc_params);
         _fm_cpt_dbg(compat," param->p_kg_params=%p  \n", param->p_kg_params);
         _fm_cpt_dbg(compat," param->p_plcr_params=%p  \n", param->p_plcr_params);
+        _fm_cpt_dbg(compat," param->p_ip_reassembly_manip=%p  \n", param->p_ip_reassembly_manip);
 
         param->pcd_support = compat_param->pcd_support;
         param->net_env_id = compat_get_id2ptr(compat_param->net_env_id, PCD_NODE);
-- 
1.7.9.7

