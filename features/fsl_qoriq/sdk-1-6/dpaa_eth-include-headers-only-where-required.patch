From 4000e97f56d6da613b9780d11283920a8f873d54 Mon Sep 17 00:00:00 2001
From: "Lu.Jiang" <lu.jiang@windriver.com>
Date: Fri, 12 Sep 2014 13:19:31 +0800
Subject: [PATCH 0708/1089] dpaa_eth: include headers only where required

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: I979d2a799d2b36e3285bcb4f1b82a56c248c90d6
Reviewed-on: http://git.am.freescale.net:8181/8649
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Signed-off-by: Lu.Jiang <lu.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h        | 11 -----------
 drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c |  3 +++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h |  5 ++++-
 drivers/net/ethernet/freescale/dpa/mac-api.c         |  1 -
 4 files changed, 7 insertions(+), 13 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index 6d29e5a..c5a7ac8 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -32,21 +32,10 @@
 #ifndef __DPA_H
 #define __DPA_H
 
-#include <linux/ethtool.h>	/* struct ethtool_ops */
 #include <linux/netdevice.h>
-#include <linux/list.h>		/* struct list_head */
-#include <linux/workqueue.h>	/* struct work_struct */
-#include <linux/skbuff.h>
-#include <linux/hardirq.h>
-#include <linux/if_vlan.h>	/* vlan_eth_hdr */
-#include <linux/ip.h>		/* ip_hdr */
-#include <linux/ipv6.h>		/* ipv6_hdr */
-
 #include <linux/fsl_qman.h>	/* struct qman_fq */
 
-#include "lnxwrp_fsl_fman.h"
 #include "fm_ext.h"
-#include "fm_port_ext.h" /* FM_PORT_FRM_ERR_* */
 #ifdef CONFIG_FSL_DPAA_ETH_DEBUGFS
 #include "dpaa_debugfs.h"
 #endif /* CONFIG_FSL_DPAA_ETH_DEBUGFS */
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
index 3ef005c..a8d51ac 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.c
@@ -39,6 +39,9 @@
 #include <linux/highmem.h>
 #include <linux/sort.h>
 #include <linux/fsl_qman.h>
+#include <linux/ip.h>
+#include <linux/ipv6.h>
+#include <linux/if_vlan.h>	/* vlan_eth_hdr */
 #include "dpaa_eth.h"
 #include "dpaa_eth_common.h"
 #include "dpaa_1588.h"
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
index 05413ac..f34e749 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_common.h
@@ -37,6 +37,9 @@
 #include <linux/of_platform.h> /* struct platform_device */
 #include <linux/net_tstamp.h>	/* struct hwtstamp_config */
 
+#include "dpaa_eth.h"
+#include "lnxwrp_fsl_fman.h"
+
 /* make dpaa_eth code compile without the FMD AR code */
 #ifdef CONFIG_PM
 #ifndef fm_port_suspend
@@ -99,7 +102,7 @@ typedef enum dpaa_eth_hook_result (*dpaa_eth_confirm_hook_t)(
 /* used in napi related functions */
 extern u16 qman_portal_max;
 
-/* from dpa-ethtool.c */
+/* from dpa_ethtool.c */
 extern const struct ethtool_ops dpa_ethtool_ops;
 
 /* Various hooks used for unit-testing and/or fastpath optimizations.
diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index ab16134..cf7fc07 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -46,7 +46,6 @@
 #include <linux/netdevice.h>
 
 #include "dpaa_eth.h"
-#include "dpaa_eth_common.h"
 #include "mac.h"
 #include "lnxwrp_fsl_fman.h"
 
-- 
2.0.2

