From c11a8d408eacc1e15d65c70ffec0327ff87d68d8 Mon Sep 17 00:00:00 2001
From: Emil Medve <Emilian.Medve@Freescale.com>
Date: Fri, 17 Jan 2014 10:35:39 -0600
Subject: [PATCH 083/466] fsl_qman: Fix loop exit condition

This fixes the following smatch warning:

qm_dqrr_init() warn: we never enter this loop

Signed-off-by: Emil Medve <Emilian.Medve@Freescale.com>
Change-Id: I522ff720a441c23b1642e3437c4e03b072d2a678
Reviewed-on: http://git.am.freescale.net:8181/8172
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Haiying Wang <Haiying.Wang@freescale.com>
Reviewed-by: Emilian Medve <Emilian.Medve@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/qman_low.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/fsl_qbman/qman_low.h b/drivers/staging/fsl_qbman/qman_low.h
index 56471f7..8bdaf5c 100644
--- a/drivers/staging/fsl_qbman/qman_low.h
+++ b/drivers/staging/fsl_qbman/qman_low.h
@@ -557,7 +557,7 @@ static inline int qm_dqrr_init(struct qm_portal *portal,
 	dqrr->cmode = cmode;
 #endif
 	/* Invalidate every ring entry before beginning */
-	for (cfg = 0; cfg > QM_DQRR_SIZE; cfg++)
+	for (cfg = 0; cfg < QM_DQRR_SIZE; cfg++)
 		dcbi(qm_cl(dqrr->ring, cfg));
 	cfg = (qm_in(CFG) & 0xff000f00) |
 		((max_fill & (QM_DQRR_SIZE - 1)) << 20) | /* DQRR_MF */
-- 
1.7.10.4

