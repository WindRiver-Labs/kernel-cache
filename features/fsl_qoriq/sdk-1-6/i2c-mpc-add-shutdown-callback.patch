From 900fd7b7d4953e56cca9923fa21ea1c26643ad0d Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Tue, 10 Feb 2015 17:23:30 +0800
Subject: [PATCH 4/6] i2c-mpc: add shutdown callback

Add shutdown callback for i2c-mpc.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/i2c/busses/i2c-mpc.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/i2c/busses/i2c-mpc.c b/drivers/i2c/busses/i2c-mpc.c
index e754fcb..f73489c 100644
--- a/drivers/i2c/busses/i2c-mpc.c
+++ b/drivers/i2c/busses/i2c-mpc.c
@@ -733,6 +733,11 @@ static int fsl_i2c_remove(struct platform_device *op)
 	return 0;
 };
 
+static void fsl_i2c_shutdown(struct platform_device *op)
+{
+	fsl_i2c_remove(op);
+};
+
 #ifdef CONFIG_PM
 static int mpc_i2c_suspend(struct device *dev)
 {
@@ -797,6 +802,7 @@ MODULE_DEVICE_TABLE(of, mpc_i2c_of_match);
 static struct platform_driver mpc_i2c_driver = {
 	.probe		= fsl_i2c_probe,
 	.remove		= fsl_i2c_remove,
+	.shutdown	= fsl_i2c_shutdown,
 	.driver = {
 		.owner = THIS_MODULE,
 		.name = DRV_NAME,
-- 
1.7.5.4

