From f057a181d28b0bb67bbabc12fd75bc4f04ad7949 Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Fri, 27 Sep 2013 14:24:48 +0800
Subject: [PATCH 0781/1089] powerpc/t4240/dts: add XFI PHY device nodes for
 10GBASE-KR

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

10GBASE-KR use XFI PCS(Physical Coding Sublayer) module. Each PCS is driven
by the corresponding MAC's MDIO. 10GBASE-KR will use PCS module to do
auto-negotiation and link training. So, add XFI PHY device nodes for
each 10G MAC.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Change-Id: I69609ff42eba95dbed978850bf07fe0c360c9ce2
Reviewed-on: http://git.am.freescale.net:8181/9664
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Tiefei Zang <tie-fei.zang@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 arch/powerpc/boot/dts/t4240qds.dts | 44 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index 7c66773..d9715d7 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -64,6 +64,14 @@
 		sgmii_phy42 = &sgmiiphy42;
 		sgmii_phy43 = &sgmiiphy43;
 		sgmii_phy44 = &sgmiiphy44;
+		phy_xfi1 = &xfiphy1;
+		phy_xfi2 = &xfiphy2;
+		phy_xfi3 = &xfiphy3;
+		phy_xfi4 = &xfiphy4;
+		xfi_pcs_mdio1 = &xfimdio0;
+		xfi_pcs_mdio2 = &xfimdio1;
+		xfi_pcs_mdio3 = &xfimdio2;
+		xfi_pcs_mdio4 = &xfimdio3;
 		emi1_rgmii = &t4240mdio0;
 		emi1_slot1 = &t4240mdio1;
 		emi1_slot2 = &t4240mdio2;
@@ -444,6 +452,24 @@
 				phy-connection-type = "xgmii";
 			};
 
+			xfimdio0: mdio@f1000 {
+				status = "disabled";
+				xfiphy1: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
+					lane-instance = "serdes-2,lane-a";
+					reg = <0x0>;
+				};
+			};
+
+			xfimdio1: mdio@f3000 {
+				status = "disabled";
+				xfiphy2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
+					lane-instance = "serdes-2,lane-b";
+					reg = <0x0>;
+				};
+			};
+
 			mdio@fc000 {
 				status = "disabled";
 			};
@@ -510,6 +536,24 @@
 				phy-connection-type = "xgmii";
 			};
 
+			xfimdio2: mdio@f1000 {
+				status = "disabled";
+				xfiphy3: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
+					lane-instance = "serdes-2,lane-d";
+					reg = <0x0>;
+				};
+			};
+
+			xfimdio3: mdio@f3000 {
+				status = "disabled";
+				xfiphy4: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
+					lane-instance = "serdes-2,lane-c";
+					reg = <0x0>;
+				};
+			};
+
 			mdio0: mdio@fc000 {
 			};
 
-- 
2.0.2

