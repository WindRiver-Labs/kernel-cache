From 38a25841b9f29b6c29c440b47a1765b3ba938088 Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Wed, 7 Aug 2013 17:57:54 +0300
Subject: [PATCH 0452/1089] dpaa_eth: fix non-smp build

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Cleanup includes and fix non-smp build, removed unnecessary info.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>

Change-Id: I32596b8eb0c4b674de1f3684993d1ba09f20947e
Reviewed-on: http://git.am.freescale.net:8181/3856
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Rivera Jose-B46482 <Jose.G.Rivera@freescale.com>
Tested-by: Rivera Jose-B46482 <Jose.G.Rivera@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_debugfs.c | 13 ++++++-------
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c     |  1 -
 2 files changed, 6 insertions(+), 8 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_debugfs.c b/drivers/net/ethernet/freescale/dpa/dpaa_debugfs.c
index 2a58724..f424f4a 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_debugfs.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_debugfs.c
@@ -34,7 +34,6 @@
 #include <linux/fsl_qman.h>	/* struct qm_mcr_querycgr */
 #include <linux/debugfs.h>
 #include <asm/debug.h>
-#include <linux/smp.h>		/* get_hard_smp_processor_id() if !CONFIG_SMP */
 #include "dpaa_debugfs.h"
 #include "dpaa_eth.h" /* struct dpa_priv_s, dpa_percpu_priv_s, dpa_bp */
 
@@ -91,8 +90,8 @@ static int dpa_debugfs_show(struct seq_file *file, void *offset)
 		total.stats.rx_errors += percpu_priv->stats.rx_errors;
 		count_total += dpa_bp_count;
 
-		seq_printf(file, "     %hu/%hu  %8llu  %8llu  %8llu  %8llu  ",
-				get_hard_smp_processor_id(i), i,
+		seq_printf(file, "     %hu  %8llu  %8llu  %8llu  %8llu  ",
+				i,
 				percpu_priv->in_interrupt,
 				percpu_priv->stats.rx_packets,
 				percpu_priv->stats.tx_packets,
@@ -144,8 +143,8 @@ static int dpa_debugfs_show(struct seq_file *file, void *offset)
 		total.rx_errors.phe += percpu_priv->rx_errors.phe;
 		total.rx_errors.cse += percpu_priv->rx_errors.cse;
 
-		seq_printf(file, "     %hu/%hu  %8llu  %8llu  ",
-				get_hard_smp_processor_id(i), i,
+		seq_printf(file, "     %hu  %8llu  %8llu  ",
+				i,
 				percpu_priv->rx_errors.dme,
 				percpu_priv->rx_errors.fpe);
 		seq_printf(file, "%8llu  %8llu  %8llu\n",
@@ -176,8 +175,8 @@ static int dpa_debugfs_show(struct seq_file *file, void *offset)
 		total.ern_cnt.fq_retired += percpu_priv->ern_cnt.fq_retired;
 		total.ern_cnt.orp_zero += percpu_priv->ern_cnt.orp_zero;
 
-		seq_printf(file, "  %hu/%hu  %8llu  %8llu  %8llu  %8llu  ",
-			get_hard_smp_processor_id(i), i,
+		seq_printf(file, "  %hu  %8llu  %8llu  %8llu  %8llu  ",
+			i,
 			percpu_priv->ern_cnt.cg_tdrop,
 			percpu_priv->ern_cnt.wred,
 			percpu_priv->ern_cnt.err_cond,
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 683347e..42737d1 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -52,7 +52,6 @@
 #include <linux/highmem.h>
 #include <linux/percpu.h>
 #include <linux/dma-mapping.h>
-#include <linux/smp.h>		/* get_hard_smp_processor_id() */
 #include <linux/fsl_bman.h>
 
 #include "fsl_fman.h"
-- 
2.0.2

