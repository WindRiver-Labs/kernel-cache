From 363cbe8918a7393e186402e6b83ccfcddcb9f3a2 Mon Sep 17 00:00:00 2001
From: Shan Hai <shan.hai@windriver.com>
Date: Wed, 20 Jan 2016 23:53:10 -0800
Subject: [PATCH] drivers/fsl_qbman: move out a macro definition from usdpaa
 scope

There is following compilation error when the CONFIG_FSL_USDPAA is
not set on fsl-e500mc kernel because the QBMAN_ANY_PORTAL_IDX macro
is defined in the USDPAA scope but used outside of it, fix it by
moving out the macro definition from the USDPAA scope.

drivers/staging/fsl_qbman/bman_driver.c:231:13: error:
'QBMAN_ANY_PORTAL_IDX' undeclared (first use in this function)

Signed-off-by: Shan Hai <shan.hai@windriver.com>
---
 drivers/staging/fsl_qbman/dpa_sys.h |    2 ++
 include/linux/fsl_usdpaa.h          |    2 --
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl_qbman/dpa_sys.h b/drivers/staging/fsl_qbman/dpa_sys.h
index 43651f3..395e18d 100644
--- a/drivers/staging/fsl_qbman/dpa_sys.h
+++ b/drivers/staging/fsl_qbman/dpa_sys.h
@@ -64,6 +64,8 @@
 
 #include <linux/fsl_usdpaa.h>
 
+#define QBMAN_ANY_PORTAL_IDX 0xffffffff
+
 /* When copying aligned words or shorts, try to avoid memcpy() */
 #define CONFIG_TRY_BETTER_MEMCPY
 
diff --git a/include/linux/fsl_usdpaa.h b/include/linux/fsl_usdpaa.h
index 896c03a..5262336 100644
--- a/include/linux/fsl_usdpaa.h
+++ b/include/linux/fsl_usdpaa.h
@@ -165,8 +165,6 @@ enum usdpaa_portal_type {
 	 usdpaa_portal_bman,
 };
 
-#define QBMAN_ANY_PORTAL_IDX 0xffffffff
-
 struct usdpaa_ioctl_portal_map {
 	/* Input parameter, is a qman or bman portal required. */
 
-- 
1.7.5.4

