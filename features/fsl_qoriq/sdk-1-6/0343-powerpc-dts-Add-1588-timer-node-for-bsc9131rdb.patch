From 1f91905e583354430d67fd9cee47dec107cebd70 Mon Sep 17 00:00:00 2001
From: Yangbo Lu <yangbo.lu@freescale.com>
Date: Fri, 16 May 2014 11:30:32 +0800
Subject: [PATCH 343/466] powerpc/dts: Add 1588 timer node for bsc9131rdb

Add 1588 timer node in file:
arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi

Signed-off-by: Yangbo Lu <yangbo.lu@freescale.com>
Change-Id: I1dbbcab7ed38d136d3d8bd589adbf5e451db612c
Reviewed-on: http://git.am.freescale.net:8181/12433
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi |   10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi b/arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi
index d3261e9..65aca8c 100644
--- a/arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/bsc9131si-post.dtsi
@@ -158,8 +158,17 @@ crypto@30000 {
 /include/ "pq3-mpic.dtsi"
 /include/ "pq3-mpic-timer-B.dtsi"
 
+ptp_timer: ptimer@b0e00 {
+	compatible = "fsl,gianfar-ptp-timer";
+	reg = <0xb0e00 0xb0>;
+	fsl,ts-to-buffer;
+	fsl,tmr-prsc = <0x2>;
+	fsl,clock-source-select = <1>;
+};
+
 /include/ "pq3-etsec2-0.dtsi"
 enet0: ethernet@b0000 {
+	ptimer-handle = <&ptp_timer>;
 	fsl,pmc-handle = <&etsec1_clk>;
 
 	queue-group@b0000 {
@@ -171,6 +180,7 @@ enet0: ethernet@b0000 {
 
 /include/ "pq3-etsec2-1.dtsi"
 enet1: ethernet@b1000 {
+	ptimer-handle = <&ptp_timer>;
 	fsl,pmc-handle = <&etsec2_clk>;
 
 	queue-group@b1000 {
-- 
1.7.10.4

