From ceaafa40ff969a219adfadf2bd767bba2de77b83 Mon Sep 17 00:00:00 2001
From: Wang Dongsheng <dongsheng.wang@freescale.com>
Date: Tue, 17 Sep 2013 10:21:50 +0800
Subject: [PATCH 0512/1089] fsl/powerpc: fix cpu_setup_fsl_booke.S build error

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

when we use corenet32_smp_defconfig. Occur, the following error:
cpu_setup_fsl_booke.S:83: undefined reference to `.has_pw20_altivec_idle'
cpu_setup_fsl_booke.S:108: undefined reference to `.has_pw20_altivec_idle'

The root cause is "bl .has_pw20_altivec_idle", the "." is only for 64bit,
should be "bl has_pw20_altivec_idle".

Signed-off-by: Wang Dongsheng <dongsheng.wang@freescale.com>
Change-Id: I13b654b400313a351e50b4105eabb9affa013c34
Reviewed-on: http://git.am.freescale.net:8181/4779
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Zhao Chenhui-B35336 <chenhui.zhao@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
---
 arch/powerpc/kernel/cpu_setup_fsl_booke.S | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/kernel/cpu_setup_fsl_booke.S b/arch/powerpc/kernel/cpu_setup_fsl_booke.S
index 82aa1d8..45bafd4 100644
--- a/arch/powerpc/kernel/cpu_setup_fsl_booke.S
+++ b/arch/powerpc/kernel/cpu_setup_fsl_booke.S
@@ -80,7 +80,7 @@ _GLOBAL(has_pw20_altivec_idle)
 #define PW20_WAIT_IDLE_BIT		50 /* 1ms, TB frequency is 41.66MHZ */
 _GLOBAL(setup_pw20_idle)
 	mflr	r10
-	bl	.has_pw20_altivec_idle
+	bl	has_pw20_altivec_idle
 	mtlr	r10
 	cmpwi	r3, 0
 	beq	2f
@@ -105,7 +105,7 @@ _GLOBAL(setup_pw20_idle)
 #define AV_WAIT_IDLE_BIT		50 /* 1ms, TB frequency is 41.66MHZ */
 _GLOBAL(setup_altivec_idle)
 	mflr	r10
-	bl	.has_pw20_altivec_idle
+	bl	has_pw20_altivec_idle
 	mtlr	r10
 	cmpwi	r3, 0
 	beq	2f
-- 
2.0.2

