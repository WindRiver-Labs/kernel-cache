From 2e6f625cb859aab26ca71ab034f664cc8b01d213 Mon Sep 17 00:00:00 2001
From: Sandeep Singh <sandeep@freescale.com>
Date: Thu, 8 May 2014 14:40:46 -0400
Subject: [PATCH 317/466] tdm/test: Limit scope of structures and global
 variables

TDM test and TDM loopback test share few variable and structure name.
This leads to build failure when both these test are enable at once.

Signed-off-by: Sandeep Singh <sandeep@freescale.com>
Change-Id: I7bbc7504b610ecb59b95acb121cb991b4c6663c5
Reviewed-on: http://git.am.freescale.net:8181/12039
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Poonam Aggrwal <poonam.aggrwal@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/tdm/test/tdm_loopback_test.c |    6 +++---
 drivers/tdm/test/tdm_test.c          |    4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/drivers/tdm/test/tdm_loopback_test.c b/drivers/tdm/test/tdm_loopback_test.c
index 49554aa..cb2a2d1 100644
--- a/drivers/tdm/test/tdm_loopback_test.c
+++ b/drivers/tdm/test/tdm_loopback_test.c
@@ -48,13 +48,13 @@
 
 #define DEBUG 0
 
-int poll_count = POLL_COUNT;
+static int poll_count = POLL_COUNT;
 module_param(poll_count, int, 0);
 
 static struct task_struct *tdm_thread_task;
 static struct tdm_driver test_tdmdev_driver;
-struct tdm_port *tdmport;
-int tdm_thread_state;
+static struct tdm_port *tdmport;
+static int tdm_thread_state;
 
 static int tdm_check_data(unsigned short *tx_data, unsigned short *rx_data)
 {
diff --git a/drivers/tdm/test/tdm_test.c b/drivers/tdm/test/tdm_test.c
index 40ea699..fe7d6e4 100644
--- a/drivers/tdm/test/tdm_test.c
+++ b/drivers/tdm/test/tdm_test.c
@@ -56,8 +56,8 @@ MODULE_AUTHOR("Hemant Agrawal <hemant@freescale.com> and "
 MODULE_DESCRIPTION(DRV_DESC);
 
 static struct tdm_driver test_tdmdev_driver;
-struct tdm_port *tdmport;
-int tdm_thread_state;
+static struct tdm_port *tdmport;
+static int tdm_thread_state;
 
 static int tdm_thread(void *ptr)
 {
-- 
1.7.10.4

