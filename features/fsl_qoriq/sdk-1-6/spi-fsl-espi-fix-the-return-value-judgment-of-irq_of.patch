From 95eacbff4ecb1d8e5cbdc8b2b9eeb7d60afcdf55 Mon Sep 17 00:00:00 2001
From: Hou Zhiqiang <b48286@freescale.com>
Date: Wed, 11 Dec 2013 13:09:40 +0800
Subject: [PATCH 2/3] spi/fsl-espi: fix the return value judgment of
 irq_of_parse_and_map.

commit 7227cd18934276eb6d7cf758f79f8c6feacdc421 upstream

Signed-off-by: Hou Zhiqiang <b48286@freescale.com>
Acked-by: Grant Likely <grant.likely@linaro.org>
Signed-off-by: Mark Brown <broonie@linaro.org>
---
 drivers/spi/spi-fsl-espi.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/spi/spi-fsl-espi.c b/drivers/spi/spi-fsl-espi.c
index 3626e34..228196f 100644
--- a/drivers/spi/spi-fsl-espi.c
+++ b/drivers/spi/spi-fsl-espi.c
@@ -710,7 +710,7 @@ static int of_fsl_espi_probe(struct platform_device *ofdev)
 		goto err;
 
 	irq = irq_of_parse_and_map(np, 0);
-	if (!ret) {
+	if (!irq) {
 		ret = -EINVAL;
 		goto err;
 	}
-- 
1.7.5.4

