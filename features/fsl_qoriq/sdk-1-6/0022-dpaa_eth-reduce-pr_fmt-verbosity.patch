From 1a45ffaad92928167c4c47c0ec3081730f290b4a Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Tue, 17 Dec 2013 14:34:15 +0200
Subject: [PATCH 022/466] dpaa_eth: reduce pr_fmt() verbosity

Make pr_fmt() less verbose except for the case when
FSL_DPAA_ETH_DEBUG is enabled.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: Ibaee9a31a0bdfc72c5ec4314b27fd0996bfdbaf5
Reviewed-on: http://git.am.freescale.net:8181/7449
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Marian Cristian Rotariu <marian.rotariu@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/7698
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpa-ethtool.c      |    5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c         |    5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c |    5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c   |    5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c      |    5 +++++
 drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c  |    5 +++++
 drivers/net/ethernet/freescale/dpa/mac-api.c          |    5 +++++
 drivers/net/ethernet/freescale/dpa/mac.c              |    5 +++++
 drivers/net/ethernet/freescale/dpa/offline_port.c     |    6 ++++++
 9 files changed, 46 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
index c019305..2f65ed8 100644
--- a/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpa/dpa-ethtool.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/string.h>
 
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 89b1a8f..c2ff686 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
index 54d7daa..003d54f 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_macless.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
index 8964f8dc..325e20e 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_proxy.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
index 487eff1..a33c2a1 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_sg.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/skbuff.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
index ac0ad11..43c8905 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth_shared.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index 0400431..540ded2 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/mac.c b/drivers/net/ethernet/freescale/dpa/mac.c
index eb1a39e..20480e9 100644
--- a/drivers/net/ethernet/freescale/dpa/mac.c
+++ b/drivers/net/ethernet/freescale/dpa/mac.c
@@ -29,9 +29,14 @@
  * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/freescale/dpa/offline_port.c b/drivers/net/ethernet/freescale/dpa/offline_port.c
index 50bf68f..8b25084 100644
--- a/drivers/net/ethernet/freescale/dpa/offline_port.c
+++ b/drivers/net/ethernet/freescale/dpa/offline_port.c
@@ -33,9 +33,15 @@
  * Validates device-tree configuration and sets up the offline ports.
  */
 
+#ifdef CONFIG_FSL_DPAA_ETH_DEBUG
 #define pr_fmt(fmt) \
 	KBUILD_MODNAME ": %s:%hu:%s() " fmt, \
 	KBUILD_BASENAME".c", __LINE__, __func__
+#else
+#define pr_fmt(fmt) \
+	KBUILD_MODNAME ": " fmt
+#endif
+
 
 #include <linux/init.h>
 #include <linux/module.h>
-- 
1.7.10.4

