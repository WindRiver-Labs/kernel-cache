From d39a190f2ed18ceb61a13af50e1252b3fbd7d286 Mon Sep 17 00:00:00 2001
From: Alex Porosanu <alexandru.porosanu@freescale.com>
Date: Wed, 9 Apr 2014 20:14:35 +0300
Subject: [PATCH 448/466] crypto: caam - fix UIO JR dependency

Exporting JR via the UIO mechanism in user-space should depend
on the JR back-end mechanism being available. Otherwise the user
could build the JR UIO exporting part of the CAAM driver without
having the necessary JR export code in place. This patch adds
the correct dependencies to the CAAM driver kernel configuration
file.

Change-Id: Idab845bcb73ceff4196685446ea5c3d266df1e6d
Signed-off-by: Alex Porosanu <alexandru.porosanu@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/10820
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Horia Ioan Geanta Neag <horia.geanta@freescale.com>
Reviewed-by: Ruchika Gupta <ruchika.gupta@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/crypto/caam/Kconfig |    3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/crypto/caam/Kconfig b/drivers/crypto/caam/Kconfig
index cb99694..1620997 100644
--- a/drivers/crypto/caam/Kconfig
+++ b/drivers/crypto/caam/Kconfig
@@ -153,6 +153,5 @@ config CRYPTO_DEV_FSL_CAAM_DEBUG
 
 config CRYPTO_DEV_FSL_CAAM_JR_UIO
 	tristate "Freescale Job Ring UIO support"
-	depends on CRYPTO_DEV_FSL_CAAM
-	depends on UIO
+	depends on CRYPTO_DEV_FSL_CAAM && CRYPTO_DEV_FSL_CAAM_JR && UIO
 	default y
-- 
1.7.10.4

