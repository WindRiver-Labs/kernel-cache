From 80eee6aab8eff3876f3f38586bb467727ff35ea5 Mon Sep 17 00:00:00 2001
From: Shengzhou Liu <Shengzhou.Liu@freescale.com>
Date: Wed, 21 May 2014 16:49:01 +0800
Subject: [PATCH 1052/1089] t2080qds/dts: update spi nodes for t2080qds

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

- update SPI nodes to support 3 SPI devices: Micron n25q128a11,
  SST sst25wf040 and EON en25s64.
- remove unnecessary spi partition nodes, which is replaced by mtdparts.

Signed-off-by: Shengzhou Liu <Shengzhou.Liu@freescale.com>
Change-Id: I20cf48f886507d5c31859d8a2e3491f4489bb518
Reviewed-on: http://git.am.freescale.net:8181/12662
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
---
 arch/powerpc/boot/dts/t208xqds.dtsi | 35 ++++++++++++-----------------------
 1 file changed, 12 insertions(+), 23 deletions(-)

diff --git a/arch/powerpc/boot/dts/t208xqds.dtsi b/arch/powerpc/boot/dts/t208xqds.dtsi
index 1a8d9e3..6c4efb9 100644
--- a/arch/powerpc/boot/dts/t208xqds.dtsi
+++ b/arch/powerpc/boot/dts/t208xqds.dtsi
@@ -94,36 +94,25 @@
 			flash@0 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "spansion,s25sl12801";
+				compatible = "micron,n25q128a11";  /* 16MB */
 				reg = <0>;
 				spi-max-frequency = <40000000>; /* input clock */
-				partition@u-boot {
-					label = "SPI U-Boot";
-					reg = <0x00000000 0x00100000>;
-					read-only;
-				};
-				partition@kernel {
-					label = "SPI Kernel";
-					reg = <0x00100000 0x00500000>;
-					read-only;
-				};
-				partition@dtb {
-					label = "SPI DTB";
-					reg = <0x00600000 0x00100000>;
-					read-only;
-				};
-				partition@fs {
-					label = "SPI File System";
-					reg = <0x00700000 0x00900000>;
-				};
 			};
 
 			flash@1 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "sst,sst25wf040";
+				compatible = "sst,sst25wf040";  /* 512KB */
 				reg = <1>;
-				spi-max-frequency = <40000000>; /* input clock */
+				spi-max-frequency = <35000000>; /* input clock */
+			};
+
+			flash@2 {
+				#address-cells = <1>;
+				#size-cells = <1>;
+				compatible = "eon,en25s64";   /* 8MB */
+				reg = <2>;
+				spi-max-frequency = <35000000>; /* input clock */
 			};
 		};
 
@@ -140,7 +129,7 @@
 					reg = <0x0>;
 
 					eeprom@50 {
-						compatible = "at24,24c256";
+						compatible = "at24,24c512";
 						reg = <0x50>;
 					};
 
-- 
2.0.2

