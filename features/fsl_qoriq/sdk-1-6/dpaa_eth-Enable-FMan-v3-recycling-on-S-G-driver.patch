From 64f9f23ef57e2a4495d119c90bdffacedaff12a6 Mon Sep 17 00:00:00 2001
From: Ioana Radulescu <ruxandra.radulescu@freescale.com>
Date: Wed, 2 Oct 2013 12:26:12 +0300
Subject: [PATCH 0538/1089] dpaa_eth: Enable FMan v3 recycling on S/G driver

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Make sure the support for buffer recycling on FMan v3 platforms
gets selected for the S/G driver as well.

Signed-off-by: Ioana Radulescu <ruxandra.radulescu@freescale.com>
Change-Id: I39cfaa9482f6204ddc2b788f635de39de6b4c8f3
Reviewed-on: http://git.am.freescale.net:8181/5146
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Reviewed-by: Rivera Jose-B46482 <German.Rivera@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/Kconfig | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/Kconfig b/drivers/net/ethernet/freescale/dpa/Kconfig
index 3c91e93..7d0f596 100644
--- a/drivers/net/ethernet/freescale/dpa/Kconfig
+++ b/drivers/net/ethernet/freescale/dpa/Kconfig
@@ -45,6 +45,7 @@ choice FSL_DPAA_ETH_OPTIMIZE
 
 	config FSL_DPAA_ETH_OPTIMIZE_FOR_TERM
 		bool "Optimize for termination"
+		select FSL_DPAA_TX_RECYCLE if FMAN_T4240
 		select FSL_DPAA_ETH_SG_SUPPORT
 		---help---
 		  Optimize the DPAA-Ethernet driver for termination (TCP, UDP) use-cases.
@@ -54,6 +55,7 @@ endchoice
 
 config FSL_DPAA_TX_RECYCLE
 	bool
+	depends on FSL_DPAA_ETH
 	depends on FMAN_T4240
 
 config FSL_DPAA_1588
-- 
2.0.2

