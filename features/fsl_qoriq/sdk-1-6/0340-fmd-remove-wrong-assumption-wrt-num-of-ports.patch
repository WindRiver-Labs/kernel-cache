From 6bcdf4275f49faf137317e7f329038083fd2bea8 Mon Sep 17 00:00:00 2001
From: Mandy Lavi <mandy.lavi@freescale.com>
Date: Wed, 14 May 2014 19:54:01 +0300
Subject: [PATCH 340/466] fmd: remove wrong assumption wrt num of ports

Remove wrong assumption wrt num of ports.

Change-Id: I54409ee49f85935ced3f9c2038a8dfcc801e6f6e
Signed-off-by: Mandy Lavi <mandy.lavi@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/12365
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Nir Erez <nir.erez@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 .../net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm_port.c    |    7 -------
 1 file changed, 7 deletions(-)

diff --git a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm_port.c b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm_port.c
index f52e660..077df0e 100644
--- a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm_port.c
+++ b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm_port.c
@@ -479,13 +479,6 @@ struct device_node * GetFmPortAdvArgsDevTreeNode (struct device_node *fm_node,
         }
         if (WARN_ON(lenp != sizeof(uint32_t)))
             return NULL;
-		if (unlikely(*uint32_prop >= FM_MAX_NUM_OF_OH_PORTS)) {
-			REPORT_ERROR(MAJOR, E_INVALID_VALUE,
-				     ("of_get_property(%s, cell-index) failed",
-				      port_node->full_name));
-			return NULL;
-		}
-
     	if ((portId == *uint32_prop) &&
     	    (of_device_is_compatible(port_node, portTypeString))) {
             return port_node;
-- 
1.7.10.4

