From 700e611a6639fb7c7deee9ba140a183317852120 Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Thu, 27 Aug 2015 11:01:58 +0800
Subject: [PATCH 1/2] powerpc/rcpm: fix compile error with non-SMP mode

the patch back port from:
wrl7 commit a8e71da8a4e351d09511776e50781551c36920bb

Add asm/smp.h, and only compile the cluster related code
when CPU hotplug is enabled.

Change-Id: I264ff297ca1ee29bf8c477b09bce98eeb27140ee
Signed-off-by: Chenhui Zhao <chenhui.zhao@freescale.com>
Reviewed-on: http://git.am.freescale.net:8181/23752
Reviewed-by: Yang Li <LeoLi@freescale.com>
Reviewed-by: Zhuoyu Zhang <Zhuoyu.Zhang@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
[Lu:Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
Signed-off-by: Li Wang <li.wang@windriver.com>
---
 arch/powerpc/sysdev/fsl_rcpm.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_rcpm.c b/arch/powerpc/sysdev/fsl_rcpm.c
index a21235c..ec3ffbd 100644
--- a/arch/powerpc/sysdev/fsl_rcpm.c
+++ b/arch/powerpc/sysdev/fsl_rcpm.c
@@ -15,6 +15,7 @@
 #include <linux/of_address.h>
 #include <linux/export.h>
 
+#include <asm/smp.h>
 #include <asm/io.h>
 #include <asm/fsl_guts.h>
 #include <asm/cputhreads.h>
-- 
1.7.5.4

