From ed5218705080f7315be93de08f238e76c0256c03 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Mon, 16 Feb 2015 17:34:02 +0800
Subject: [PATCH 4/6] nand: fsl_elbc, fsl_ifc: add shutdown callback

Add shutdown callback for fsl_elbc_nand and fsl_ifc_nand drivers.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/mtd/nand/fsl_elbc_nand.c |    8 ++++++++
 drivers/mtd/nand/fsl_ifc_nand.c  |    8 ++++++++
 2 files changed, 16 insertions(+), 0 deletions(-)

diff --git a/drivers/mtd/nand/fsl_elbc_nand.c b/drivers/mtd/nand/fsl_elbc_nand.c
index 0dce02f..27452f3 100644
--- a/drivers/mtd/nand/fsl_elbc_nand.c
+++ b/drivers/mtd/nand/fsl_elbc_nand.c
@@ -946,6 +946,13 @@ static int fsl_elbc_nand_remove(struct platform_device *pdev)
 
 }
 
+static void fsl_elbc_nand_shutdown(struct platform_device *pdev)
+{
+	fsl_elbc_nand_remove(pdev);
+
+	return;
+}
+
 static const struct of_device_id fsl_elbc_nand_match[] = {
 	{ .compatible = "fsl,elbc-fcm-nand", },
 	{}
@@ -959,6 +966,7 @@ static struct platform_driver fsl_elbc_nand_driver = {
 	},
 	.probe = fsl_elbc_nand_probe,
 	.remove = fsl_elbc_nand_remove,
+	.shutdown = fsl_elbc_nand_shutdown,
 };
 
 module_platform_driver(fsl_elbc_nand_driver);
diff --git a/drivers/mtd/nand/fsl_ifc_nand.c b/drivers/mtd/nand/fsl_ifc_nand.c
index f789f7c..565d316 100644
--- a/drivers/mtd/nand/fsl_ifc_nand.c
+++ b/drivers/mtd/nand/fsl_ifc_nand.c
@@ -1158,6 +1158,13 @@ static int fsl_ifc_nand_remove(struct platform_device *dev)
 	return 0;
 }
 
+static void fsl_ifc_nand_remove(struct platform_device *dev)
+{
+	fsl_ifc_nand_remove(dev);
+
+	return;
+}
+
 static const struct of_device_id fsl_ifc_nand_match[] = {
 	{
 		.compatible = "fsl,ifc-nand",
@@ -1173,6 +1180,7 @@ static struct platform_driver fsl_ifc_nand_driver = {
 	},
 	.probe       = fsl_ifc_nand_probe,
 	.remove      = fsl_ifc_nand_remove,
+	.shutdown    = fsl_ifc_nand_shutdown,
 };
 
 static int __init fsl_ifc_nand_init(void)
-- 
1.7.5.4

