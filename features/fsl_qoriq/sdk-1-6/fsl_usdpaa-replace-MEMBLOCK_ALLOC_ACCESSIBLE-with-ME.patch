From 28cb1841fe9f5cb354a30b4a9e3cc18eff7700e0 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Mon, 2 Mar 2015 15:48:31 +0800
Subject: [PATCH 1/2] fsl_usdpaa: replace MEMBLOCK_ALLOC_ACCESSIBLE with
 MEMBLOCK_ALLOC_ANYWHERE during init

Replace MEMBLOCK_ALLOC_ACCESSIBLE with MEMBLOCK_ALLOC_ANYWHERE during reserving
USDPAA memory, else USDPAA memory can only reside in LOW MEMORY in PPC32.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/staging/fsl_qbman/fsl_usdpaa.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_qbman/fsl_usdpaa.c b/drivers/staging/fsl_qbman/fsl_usdpaa.c
index 3de7c95..d1739b0 100644
--- a/drivers/staging/fsl_qbman/fsl_usdpaa.c
+++ b/drivers/staging/fsl_qbman/fsl_usdpaa.c
@@ -1814,7 +1814,7 @@ __init void fsl_usdpaa_init_early(void)
 	}
 	phys_start = __memblock_alloc_base(phys_size,
 					   largest_page_size(phys_size),
-					   MEMBLOCK_ALLOC_ACCESSIBLE);
+					   MEMBLOCK_ALLOC_ANYWHERE);
 	if (!phys_start) {
 		pr_err("Failed to reserve USDPAA region (sz:%llx)\n",
 		       phys_size);
-- 
1.7.5.4

