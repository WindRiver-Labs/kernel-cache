From 86d61f5eb85cd61a1bf69b6cbf69902db987caba Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Fri, 7 Feb 2014 11:49:38 +0200
Subject: [PATCH 097/466] dpaa_eth: use proper name for FSL_FMAN_TEST

Use proper name for FSL_FMAN_TEST.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: I7e4834a95e6c1b1653b5773fbbc14e6070b2629d
Reviewed-on: http://git.am.freescale.net:8181/8646
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
Reviewed-by: Ruxandra Ioana Radulescu <ruxandra.radulescu@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    2 +-
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h |    6 ++++--
 2 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index dbf2431..4dce5c6 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -108,7 +108,7 @@ int dpa_alloc_pcd_fqids(struct device *, uint32_t, uint8_t, uint32_t *)
 __attribute__((weak));
 
 int dpa_free_pcd_fqids(struct device *, uint32_t) __attribute__((weak));
-#endif /* CONFIG_FSL_DPAA_FMAN_UNIT_TESTS */
+#endif /* CONFIG_FSL_FMAN_TEST */
 
 /* BM */
 
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index e16d81e..c7ab652 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -146,7 +146,7 @@ struct dpa_buffer_layout_s {
  */
 #define DPA_RECYCLE_MAX_SIZE	16384
 
-#if defined(CONFIG_FSL_DPAA_FMAN_UNIT_TESTS)
+#if defined(CONFIG_FSL_FMAN_TEST)
 /*TODO: temporary for fman pcd testing */
 #define FMAN_PCD_TESTS_MAX_NUM_RANGES	20
 #endif
@@ -221,10 +221,12 @@ struct dpa_buffer_layout_s {
 #define DPAA_ETH_TX_QUEUES	NR_CPUS
 #define DPAA_ETH_RX_QUEUES	128
 
+#if defined(CONFIG_FSL_FMAN_TEST)
 struct pcd_range {
 	uint32_t			 base;
 	uint32_t			 count;
 };
+#endif
 
 /* More detailed FQ types - used for fine-grained WQ assignments */
 enum dpa_fq_type {
@@ -369,7 +371,7 @@ struct dpa_priv_s {
 	struct dpa_ptp_tsu	 *tsu;
 #endif
 
-#if defined(CONFIG_FSL_DPAA_FMAN_UNIT_TESTS)
+#if defined(CONFIG_FSL_FMAN_TEST)
 /* TODO: this is temporary until pcd support is implemented in dpaa */
 	int			priv_pcd_num_ranges;
 	struct pcd_range	priv_pcd_ranges[FMAN_PCD_TESTS_MAX_NUM_RANGES];
-- 
1.7.10.4

