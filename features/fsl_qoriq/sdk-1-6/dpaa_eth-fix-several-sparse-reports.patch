From d3b2cd77b31224ec55f3fce8f8e31854d4e73c2f Mon Sep 17 00:00:00 2001
From: Madalin Bucur <madalin.bucur@freescale.com>
Date: Fri, 21 Feb 2014 18:13:08 +0200
Subject: [PATCH 0735/1089] dpaa_eth: fix several sparse reports

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Fix a series of sparse reports related to percpu types.

Signed-off-by: Madalin Bucur <madalin.bucur@freescale.com>
Change-Id: I7a482a325d2457323ef895aa514779037b5c87a1
Reviewed-on: http://git.am.freescale.net:8181/9029
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Cristian-Constantin Sovaiala <Cristian.Sovaiala@freescale.com>
(cherry picked from commit 53f3f24c412966c1d7e98ec2edc95b192b490b8b)
Reviewed-on: http://git.am.freescale.net:8181/9193
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index 2e4c3ec..ca67f43 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -261,7 +261,7 @@ struct dpa_bp {
 	 */
 	void __iomem			*vaddr;
 	/* current number of buffers in the bpool alloted to this CPU */
-	int *percpu_count;
+	int __percpu *percpu_count;
 	atomic_t refs;
 	/* some bpools need to be seeded before use by this cb */
 	int (*seed_cb)(struct dpa_bp *);
@@ -310,7 +310,7 @@ struct dpa_percpu_priv_s {
 };
 
 struct dpa_priv_s {
-	struct dpa_percpu_priv_s	*percpu_priv;
+	struct dpa_percpu_priv_s	__percpu *percpu_priv;
 	struct dpa_bp *dpa_bp;
 	/* Store here the needed Tx headroom for convenience and speed
 	 * (even though it can be computed based on the fields of buf_layout)
-- 
2.0.2

