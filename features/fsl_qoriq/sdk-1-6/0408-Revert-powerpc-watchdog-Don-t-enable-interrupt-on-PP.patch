From 4610014bdc6d53f0ad65f58f0437ecc5618d924e Mon Sep 17 00:00:00 2001
From: Scott Wood <scottwood@freescale.com>
Date: Wed, 12 Mar 2014 19:24:45 -0500
Subject: [PATCH 408/466] Revert "powerpc/watchdog: Don't enable interrupt on
 PPC64 BookE"

commit 093943735718a28d45dcfcc74a737ed39e402893 upstream

This reverts commit 3978bdb4ed653342b0be66c031bf61b72cc55d60, now that
critical interrupts are properly supported on ppc64 booke.

Signed-off-by: Scott Wood <scottwood@freescale.com>
Cc: Laurentiu Tudor <Laurentiu.Tudor@freescale.com>
Cc: Wim Van Sebroeck <wim@iguana.be>
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/watchdog/booke_wdt.c |    8 --------
 1 file changed, 8 deletions(-)

diff --git a/drivers/watchdog/booke_wdt.c b/drivers/watchdog/booke_wdt.c
index fea9127..9a4d02b 100644
--- a/drivers/watchdog/booke_wdt.c
+++ b/drivers/watchdog/booke_wdt.c
@@ -147,14 +147,6 @@ static void __booke_wdt_enable(void *data)
 	val &= ~WDTP_MASK;
 	val |= (TCR_WIE|TCR_WRC(WRC_CHIP)|WDTP(booke_wdt_period));
 
-#ifdef CONFIG_PPC_BOOK3E_64
-	/*
-	 * Crit ints are currently broken on PPC64 Book-E, so
-	 * just disable them for now.
-	 */
-	val &= ~TCR_WIE;
-#endif
-
 	mtspr(SPRN_TCR, val);
 }
 
-- 
1.7.10.4

