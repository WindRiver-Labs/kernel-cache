From 74535359ec1138ad39327a690f1d486149eea3ce Mon Sep 17 00:00:00 2001
From: Ying Zhang <b40530@freescale.com>
Date: Thu, 6 Mar 2014 17:05:22 +0800
Subject: [PATCH 166/466] mpc85xx: Expand the size of u-boot Bootloader Image

Because the size of u-boot Bootloader gets bigger, this patch adjust
the size for NAND bootloader to 768KB and adjust the size for SPI
bootloader to 1MB.

Signed-off-by: Ying Zhang <b40530@freescale.com>
Change-Id: Ida21977b15cc25c9e2667138222537b3af7138c7
Reviewed-on: http://git.am.freescale.net:8181/9454
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 arch/powerpc/boot/dts/p1010rdb.dtsi |    6 +++---
 arch/powerpc/boot/dts/p1022ds.dtsi  |   10 +++++-----
 arch/powerpc/boot/dts/p1025rdb.dtsi |   24 ++++++++++++------------
 3 files changed, 20 insertions(+), 20 deletions(-)

diff --git a/arch/powerpc/boot/dts/p1010rdb.dtsi b/arch/powerpc/boot/dts/p1010rdb.dtsi
index 8b5fa3f..5d32588 100644
--- a/arch/powerpc/boot/dts/p1010rdb.dtsi
+++ b/arch/powerpc/boot/dts/p1010rdb.dtsi
@@ -59,11 +59,11 @@
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@1f00000 {
+		partition@1ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x01f00000 0x00100000>;
+			reg = <0x01ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
diff --git a/arch/powerpc/boot/dts/p1022ds.dtsi b/arch/powerpc/boot/dts/p1022ds.dtsi
index 6e06a06..8c80982 100644
--- a/arch/powerpc/boot/dts/p1022ds.dtsi
+++ b/arch/powerpc/boot/dts/p1022ds.dtsi
@@ -66,18 +66,18 @@
 		};
 
 		partition@4600000 {
-			reg = <0x04600000 0x03900000>;
+			reg = <0x04600000 0x038c0000>;
 			label = "rfs-nor";
 		};
 
-		partition@7f00000 {
-			reg = <0x07f00000 0x00080000>;
+		partition@7ec0000 {
+			reg = <0x07ec0000 0x00080000>;
 			label = "dtb-nor";
 			read-only;
 		};
 
-		partition@7f80000 {
-			reg = <0x07f80000 0x00080000>;
+		partition@7f40000 {
+			reg = <0x07f40000 0x000c0000>;
 			label = "u-boot-nor";
 			read-only;
 		};
diff --git a/arch/powerpc/boot/dts/p1025rdb.dtsi b/arch/powerpc/boot/dts/p1025rdb.dtsi
index 7d77293..824588c 100644
--- a/arch/powerpc/boot/dts/p1025rdb.dtsi
+++ b/arch/powerpc/boot/dts/p1025rdb.dtsi
@@ -69,16 +69,16 @@
 		};
 
 		partition@400000 {
-			/* 11MB for JFFS2 based Root file System */
-			reg = <0x00400000 0x00b00000>;
+			/* 10.75MB for JFFS2 based Root file System */
+			reg = <0x00400000 0x00ac0000>;
 			label = "NOR JFFS2 Root File System";
 		};
 
-		partition@f00000 {
+		partition@ec0000 {
 			/* This location must not be altered  */
-			/* 512KB for u-boot Bootloader Image */
+			/* 768KB for u-boot Bootloader Image */
 			/* 512KB for u-boot Environment Variables */
-			reg = <0x00f00000 0x00100000>;
+			reg = <0x00ec0000 0x00140000>;
 			label = "NOR U-Boot Image";
 			read-only;
 		};
@@ -149,33 +149,33 @@
 			spi-max-frequency = <40000000>; /* input clock */
 
 			partition@u-boot {
-				/* 512KB for u-boot Bootloader Image */
-				reg = <0x0 0x00080000>;
+				/* 1MB for u-boot Bootloader Image */
+				reg = <0x0 0x00100000>;
 				label = "u-boot";
 				read-only;
 			};
 
 			partition@dtb {
 				/* 512KB for DTB Image */
-				reg = <0x00080000 0x00080000>;
+				reg = <0x00100000 0x00080000>;
 				label = "dtb";
 			};
 
 			partition@kernel {
 				/* 4MB for Linux Kernel Image */
-				reg = <0x00100000 0x00400000>;
+				reg = <0x00180000 0x00400000>;
 				label = "kernel";
 			};
 
 			partition@fs {
 				/* 4MB for Compressed RFS Image */
-				reg = <0x00500000 0x00400000>;
+				reg = <0x00580000 0x00400000>;
 				label = "file system";
 			};
 
 			partition@jffs-fs {
-				/* 7MB for JFFS2 based RFS */
-				reg = <0x00900000 0x00700000>;
+				/* 6.5MB for JFFS2 based RFS */
+				reg = <0x00980000 0x00680000>;
 				label = "file system jffs2";
 			};
 		};
-- 
1.7.10.4

