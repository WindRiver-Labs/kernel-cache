From 2e6ef4815ae493f8eb9c221d5bad3facbd02acca Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Mon, 16 Feb 2015 10:32:48 +0800
Subject: [PATCH 3/6] fsl_pme2: add shutdown callback

Add shutdown callback for fsl_pme2.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/staging/fsl_pme2/pme2_ctrl.c |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)

diff --git a/drivers/staging/fsl_pme2/pme2_ctrl.c b/drivers/staging/fsl_pme2/pme2_ctrl.c
index 6bfda672..73a9b34 100644
--- a/drivers/staging/fsl_pme2/pme2_ctrl.c
+++ b/drivers/staging/fsl_pme2/pme2_ctrl.c
@@ -281,6 +281,13 @@ static int of_fsl_pme_remove(struct platform_device *ofdev)
 	return 0;
 }
 
+static void of_fsl_pme_shutdown(struct platform_device *ofdev)
+{
+	of_fsl_pme_remove(ofdev);
+
+	return;
+}
+
 static int of_fsl_pme_probe(struct platform_device *ofdev)
 {
 	int ret, err = 0;
@@ -557,7 +564,8 @@ static struct platform_driver of_fsl_pme_driver = {
 		.pm = &pme2_pm_ops,
 	},
 	.probe = of_fsl_pme_probe,
-	.remove      = of_fsl_pme_remove,
+	.remove = of_fsl_pme_remove,
+	.shutdown = of_fsl_pme_shutdown,
 };
 
 static int pme2_ctrl_init(void)
-- 
1.7.5.4

