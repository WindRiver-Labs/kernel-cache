From bfcdb21365a33cab61399fa66cb64d8cdcd11c8f Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Tue, 10 Feb 2015 17:28:24 +0800
Subject: [PATCH 5/6] crypto: caam: add shutdown callback

Add shutdown callback for CAAM driver.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/crypto/caam/ctrl.c |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/crypto/caam/ctrl.c b/drivers/crypto/caam/ctrl.c
index 5e9bf2b..cca7090 100644
--- a/drivers/crypto/caam/ctrl.c
+++ b/drivers/crypto/caam/ctrl.c
@@ -307,6 +307,11 @@ static int caam_remove(struct platform_device *pdev)
 	return ret;
 }
 
+static void caam_shutdown(struct platform_device *pdev)
+{
+	caam_remove(pdev);
+}
+
 /*
  * kick_trng - sets the various parameters for enabling the initialization
  *	       of the RNG4 block in CAAM
@@ -773,6 +778,7 @@ static struct platform_driver caam_driver = {
 	},
 	.probe       = caam_probe,
 	.remove      = caam_remove,
+	.shutdown    = caam_shutdown,
 };
 
 module_platform_driver(caam_driver);
-- 
1.7.5.4

