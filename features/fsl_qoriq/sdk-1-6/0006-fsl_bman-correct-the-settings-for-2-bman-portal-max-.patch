From 5f9c1c24d917037a5a97623ab1835bab0576ebd9 Mon Sep 17 00:00:00 2001
From: Haiying Wang <Haiying.Wang@freescale.com>
Date: Wed, 27 Nov 2013 11:24:55 -0500
Subject: [PATCH 006/466] fsl_bman: correct the settings for 2 bman portal max
 numbers

The bman_portal_max for bman rev2.1.2 and rev2.1.3 were incorrect,
fix them in this patch.

Signed-off-by: Haiying Wang <Haiying.Wang@freescale.com>
Change-Id: I52aa78e9de90ea0f65182e40998bbc3a7bd884b8
Reviewed-on: http://git.am.freescale.net:8181/6883
Reviewed-by: Roy Pledge <roy.pledge@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
(cherry picked from commit b50f069c745b9f1677c92469f6cee6714ee07247)
Change-Id: I52aa78e9de90ea0f65182e40998bbc3a7bd884b8
Reviewed-on: http://git.am.freescale.net:8181/7069
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/staging/fsl_qbman/bman_driver.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/staging/fsl_qbman/bman_driver.c b/drivers/staging/fsl_qbman/bman_driver.c
index d71301c..6c4d093 100644
--- a/drivers/staging/fsl_qbman/bman_driver.c
+++ b/drivers/staging/fsl_qbman/bman_driver.c
@@ -138,11 +138,11 @@ static struct bm_portal_config * __init parse_pcfg(struct device_node *node)
 	} else if (of_device_is_compatible(node, "fsl,bman-portal-2.1.2")) {
 		bman_ip_rev = BMAN_REV21;
 		bman_pool_max = 64;
-		bman_portal_max = 10;
+		bman_portal_max = 18;
 	} else if (of_device_is_compatible(node, "fsl,bman-portal-2.1.3")) {
 		bman_ip_rev = BMAN_REV21;
 		bman_pool_max = 64;
-		bman_portal_max = 18;
+		bman_portal_max = 10;
 	}
 
 	ret = of_address_to_resource(node, DPA_PORTAL_CE,
-- 
1.7.10.4

