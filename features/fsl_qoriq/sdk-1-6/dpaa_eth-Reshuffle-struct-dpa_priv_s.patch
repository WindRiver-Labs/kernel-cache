From df1660b2cac69087f523186129ae45eae9af3a6b Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Fri, 24 May 2013 01:32:59 +0300
Subject: [PATCH 0324/1089] dpaa_eth: Reshuffle struct dpa_priv_s

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Reorder fields in struct dpa_priv_s, based on the frequency of access on
the hotpaths.

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Change-Id: I06a97e6a647b44a5b398c4dd759460175e1b6bba
Reviewed-on: http://git.am.freescale.net:8181/2756
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Sovaiala Cristian-Constantin-B39531 <Cristian.Sovaiala@freescale.com>
Reviewed-by: Radulescu Ruxandra Ioana-B05472 <ruxandra.radulescu@freescale.com>
Reviewed-by: Bucur Madalin-Cristian-B32716 <madalin.bucur@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index fbea46b..9e02e3c 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -332,22 +332,27 @@ struct dpa_percpu_priv_s {
 };
 
 struct dpa_priv_s {
+	struct dpa_percpu_priv_s	*percpu_priv;
 	struct dpa_bp *dpa_bp;
-	size_t bp_count;
+	/*
+	 * Store here the needed Tx headroom for convenience and speed
+	 * (even though it can be computed based on the fields of buf_layout)
+	 */
+	uint16_t tx_headroom;
 	int shared;
 	struct net_device *net_dev;
+	struct mac_device	*mac_dev;
+	struct qman_fq		*egress_fqs[DPAA_ETH_TX_QUEUES];
+	struct qman_fq		*conf_fqs[DPAA_ETH_TX_QUEUES];
+
+	size_t bp_count;
 
 	uint16_t		 channel;	/* "fsl,qman-channel-id" */
 	struct list_head	 dpa_fq_list;
-	struct qman_fq		*egress_fqs[DPAA_ETH_TX_QUEUES];
-	struct qman_fq		*conf_fqs[DPAA_ETH_TX_QUEUES];
 #ifdef CONFIG_FSL_DPAA_TX_RECYCLE
 	struct qman_fq		*recycle_fqs[DPAA_ETH_TX_QUEUES];
 #endif
 
-	struct mac_device	*mac_dev;
-
-	struct dpa_percpu_priv_s	*percpu_priv;
 #ifdef CONFIG_FSL_DPAA_ETH_DEBUGFS
 	struct dentry		*debugfs_file;
 #endif /* CONFIG_FSL_DPAA_ETH_DEBUGFS */
@@ -385,11 +390,6 @@ struct dpa_priv_s {
 	bool ts_rx_en; /* Rx timestamping enabled */
 #endif /* CONFIG_FSL_DPAA_TS */
 
-	/*
-	 * Store here the needed Tx headroom for convenience and speed
-	 * (even though it can be computed based on the fields of buf_layout)
-	 */
-	uint16_t tx_headroom;
 	struct dpa_buffer_layout_s *buf_layout;
 };
 
-- 
2.0.2

