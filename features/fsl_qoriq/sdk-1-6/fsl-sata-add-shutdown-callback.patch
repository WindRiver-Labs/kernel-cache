From b6b55f2a64c519cfa8733a1a16e9b0c8b578edd7 Mon Sep 17 00:00:00 2001
From: Yanjiang Jin <yanjiang.jin@windriver.com>
Date: Wed, 25 Feb 2015 10:57:52 +0800
Subject: [PATCH 5/6] fsl: sata: add shutdown callback

Add shutdown callback for sata_fsl.

Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/ata/sata_fsl.c |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/drivers/ata/sata_fsl.c b/drivers/ata/sata_fsl.c
index f5235b7..cf7ab97 100644
--- a/drivers/ata/sata_fsl.c
+++ b/drivers/ata/sata_fsl.c
@@ -1668,6 +1668,13 @@ static int sata_fsl_remove(struct platform_device *ofdev)
 	return 0;
 }
 
+static void sata_fsl_shutdown(struct platform_device *ofdev)
+{
+	sata_fsl_remove(ofdev);
+
+	return;
+}
+
 #ifdef CONFIG_PM
 static int sata_fsl_suspend(struct platform_device *op, pm_message_t state)
 {
@@ -1724,6 +1731,7 @@ static struct platform_driver fsl_sata_driver = {
 	},
 	.probe		= sata_fsl_probe,
 	.remove		= sata_fsl_remove,
+	.shutdown	= sata_fsl_shutdown,
 #ifdef CONFIG_PM
 	.suspend	= sata_fsl_suspend,
 	.resume		= sata_fsl_resume,
-- 
1.7.5.4

