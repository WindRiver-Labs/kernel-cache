From a53c3adcefc7c1e22c49ae21ec75d078642e6dbd Mon Sep 17 00:00:00 2001
From: Haijun Zhang <Haijun.Zhang@freescale.com>
Date: Fri, 23 May 2014 10:25:09 +0800
Subject: [PATCH 362/466] mmc: esdhc: enable interrupt mode for T1040

Interrupt mode for t1040RDB is working. Enable it to
avoid redundant poling mode.

Signed-off-by: Haijun Zhang <Haijun.Zhang@freescale.com>
Change-Id: I686faa7c763758815f7c6146670ab4061a76a63d
Reviewed-on: http://git.am.freescale.net:8181/12830
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Shengzhou Liu <Shengzhou.Liu@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>
---
 drivers/mmc/host/sdhci-pltfm.c |    1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/mmc/host/sdhci-pltfm.c b/drivers/mmc/host/sdhci-pltfm.c
index 4f297fe..1b5ce1d 100644
--- a/drivers/mmc/host/sdhci-pltfm.c
+++ b/drivers/mmc/host/sdhci-pltfm.c
@@ -111,6 +111,7 @@ void sdhci_get_of_property(struct platform_device *pdev)
 		if (of_device_is_compatible(np, "fsl,p5040-esdhc") ||
 			of_device_is_compatible(np, "fsl,p5020-esdhc") ||
 			of_device_is_compatible(np, "fsl,p4080-esdhc") ||
+			of_device_is_compatible(np, "fsl,t1040-esdhc") ||
 			of_device_is_compatible(np, "fsl,p1020-esdhc"))
 			host->quirks &= ~SDHCI_QUIRK_BROKEN_CARD_DETECTION;
 
-- 
1.7.10.4

