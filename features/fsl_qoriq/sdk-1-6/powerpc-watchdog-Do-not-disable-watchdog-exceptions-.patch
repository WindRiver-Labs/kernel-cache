From becbaf3bac1aab13dea7bae59a6bc48d6faff38e Mon Sep 17 00:00:00 2001
From: Mikael Beckius <mikael.beckius@windriver.com>
Date: Fri, 24 Apr 2015 13:30:50 +0200
Subject: [PATCH] powerpc/watchdog: Do not disable watchdog exceptions on set

Remove the remaining part of commit <powerpc/watchdog: Don't enable
interrupt on PPC64 BookE>, that was partially reverted by: <Revert
"powerpc/watchdog: Don't enable interrupt on PPC64 BookE">.
This matches mainline, which has completely reverted this change.

Signed-off-by: Mikael Beckius <mikael.beckius@windriver.com>
Signed-off-by: Li Zhou <li.zhou@windriver.com>
---
 drivers/watchdog/booke_wdt.c |    9 ---------
 1 files changed, 0 insertions(+), 9 deletions(-)

diff --git a/drivers/watchdog/booke_wdt.c b/drivers/watchdog/booke_wdt.c
index 26f370c..08a7853 100644
--- a/drivers/watchdog/booke_wdt.c
+++ b/drivers/watchdog/booke_wdt.c
@@ -129,15 +129,6 @@ static void __booke_wdt_set(void *data)
 
 	val = mfspr(SPRN_TCR);
 	val &= ~WDTP_MASK;
-
-#ifdef CONFIG_PPC_BOOK3E_64
-	/*
-	 * Crit ints are currently broken on PPC64 Book-E, so
-	 * just disable them for now.
-	 */
-	val &= ~TCR_WIE;
-#endif
-
 	val |= WDTP(sec_to_period(wdog->timeout));
 
 	mtspr(SPRN_TCR, val);
-- 
1.7.5.4

