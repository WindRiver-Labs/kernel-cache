From 92ba6c7a7d23801a726bbfa1133622560d23f90f Mon Sep 17 00:00:00 2001
From: Shaohui Xie <Shaohui.Xie@freescale.com>
Date: Thu, 18 Apr 2013 15:23:16 +0800
Subject: [PATCH 0188/1089] powerpc/corenet/dts: add compatible for 10G PHY

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Compatible "ethernet-phy-ieee802.3-c45" is used to indicate that a
10G PHY should be accessed by clause 45, without the compatible,
the 10G PHY will not be accessed correctly.

Signed-off-by: Shaohui Xie <Shaohui.Xie@freescale.com>
Change-Id: I672331998d08e3730c9fde3163ff84cd6c0e2b2a
Reviewed-on: http://git.am.freescale.net:8181/1494
Reviewed-by: Zang Tiefei-R61911 <tie-fei.zang@freescale.com>
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 arch/powerpc/boot/dts/p2041rdb.dts | 1 +
 arch/powerpc/boot/dts/p3041ds.dts  | 2 ++
 arch/powerpc/boot/dts/p4080ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5020ds.dts  | 2 ++
 arch/powerpc/boot/dts/p5040ds.dts  | 2 ++
 5 files changed, 9 insertions(+)

diff --git a/arch/powerpc/boot/dts/p2041rdb.dts b/arch/powerpc/boot/dts/p2041rdb.dts
index 9412879..1df2728 100644
--- a/arch/powerpc/boot/dts/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/p2041rdb.dts
@@ -244,6 +244,7 @@
 			mdio@f1000 {
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p3041ds.dts b/arch/powerpc/boot/dts/p3041ds.dts
index 276bb49..6a015be 100644
--- a/arch/powerpc/boot/dts/p3041ds.dts
+++ b/arch/powerpc/boot/dts/p3041ds.dts
@@ -226,11 +226,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p4080ds.dts b/arch/powerpc/boot/dts/p4080ds.dts
index e7dd754..82ca5ab 100644
--- a/arch/powerpc/boot/dts/p4080ds.dts
+++ b/arch/powerpc/boot/dts/p4080ds.dts
@@ -425,6 +425,7 @@
 			#size-cells = <0>;
 
 			phy11: ethernet-phy@0 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x0>;
 			};
 		};
@@ -435,6 +436,7 @@
 			#size-cells = <0>;
 
 			phy10: ethernet-phy@4 {
+				compatible = "ethernet-phy-ieee802.3-c45";
 				reg = <0x4>;
 			};
 		};
diff --git a/arch/powerpc/boot/dts/p5020ds.dts b/arch/powerpc/boot/dts/p5020ds.dts
index 384461d..2f63323 100644
--- a/arch/powerpc/boot/dts/p5020ds.dts
+++ b/arch/powerpc/boot/dts/p5020ds.dts
@@ -226,11 +226,13 @@
 
 				/* XAUI card in slot 1 */
 				phy_xgmii_1: ethernet-phy@4 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x4>;
 				};
 
 				/* XAUI card in slot 2 */
 				phy_xgmii_2: ethernet-phy@0 {
+					compatible = "ethernet-phy-ieee802.3-c45";
 					reg = <0x0>;
 				};
 			};
diff --git a/arch/powerpc/boot/dts/p5040ds.dts b/arch/powerpc/boot/dts/p5040ds.dts
index 55b33b6..934ebb0 100644
--- a/arch/powerpc/boot/dts/p5040ds.dts
+++ b/arch/powerpc/boot/dts/p5040ds.dts
@@ -477,6 +477,7 @@
 					status = "disabled";
 
 					phy_xgmii_slot_1: ethernet-phy@0 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <4>;
 					};
 				};
@@ -488,6 +489,7 @@
 					reg = <2>;
 
 					phy_xgmii_slot_2: ethernet-phy@4 {
+						compatible = "ethernet-phy-ieee802.3-c45";
 						reg = <0>;
 					};
 				};
-- 
2.0.2

