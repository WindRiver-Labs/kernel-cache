From 37a42125fb81c9da81ef4e7b9272372854a34ac0 Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Fri, 19 Oct 2012 15:19:21 +0300
Subject: [PATCH 0111/1089] dpaa_eth: Remove unused start_tx field

[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]

Remove a field needlessly accessed on the egress fastpath.

Change-Id: I7fecdacbd46e41eca5285e8fa55cce5a109eb5b9
Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
(cherry picked from commit 910edee35b1fc5eaf934b820f0fa3b3a5a06d64b)
Reviewed-on: http://git.am.freescale.net:8181/1046
Reviewed-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
Tested-by: Fleming Andrew-AFLEMING <AFLEMING@freescale.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h | 2 --
 1 file changed, 2 deletions(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index 30e10c4..9e3958a 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -334,7 +334,6 @@ struct dpa_percpu_priv_s {
 	/* current number of skbs in the CPU's list */
 	int skb_count;
 #endif
-	u32 start_tx;
 	u32 in_interrupt;
 	u32 ingress_calls;
 	u32 tx_returned;
@@ -503,7 +502,6 @@ static inline int __hot dpa_xmit(struct dpa_priv_s *priv,
 {
 	int err, i;
 
-	prefetchw(&percpu->start_tx);
 	for (i = 0; i < 100000; i++) {
 		err = qman_enqueue(priv->egress_fqs[queue], fd, 0);
 		if (err != -EBUSY)
-- 
2.0.2

