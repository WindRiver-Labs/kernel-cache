From 58b59c37fd0ef25d3252b5bb8960ef2b2abe8dba Mon Sep 17 00:00:00 2001
From: Cristian Bercaru <cristian.bercaru@freescale.com>
Date: Tue, 11 Feb 2014 15:19:28 +0200
Subject: [PATCH] fmd, dpaa_eth: fix function name fm_mac_set_rx_pause_frames

Replace 'fm_mac_set_rx_ignore_pause_frames' with 'fm_mac_set_rx_pause_frames'.
'fm_mac_set_rx_pause_frames' correctly reflects the functionality of the
function.
One might wrongly believe that calling 'fm_mac_set_rx_ignore_pause_frames' with
parameter 'en' set to 'true' disables pause frames reception on that interface,
when the function in fact enables pause frames.

Signed-off-by: Cristian Bercaru <cristian.bercaru@freescale.com>
Change-Id: I83253a70ee95d706dab0cd1b88f40ed8c51376c5
Reviewed-on: http://git.am.freescale.net:8181/8719
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Madalin-Cristian Bucur <madalin.bucur@freescale.com>
Reviewed-by: Jose Rivera <German.Rivera@freescale.com>
[Original patch taken from QorIQ-SDK-V1.6-SOURCE-20140619-yocto.iso]
Signed-off-by: Bin Jiang <bin.jiang@windriver.com>

diff --git a/drivers/net/ethernet/freescale/dpa/mac-api.c b/drivers/net/ethernet/freescale/dpa/mac-api.c
index dbab43f2e676..6c0e7ecee079 100644
--- a/drivers/net/ethernet/freescale/dpa/mac-api.c
+++ b/drivers/net/ethernet/freescale/dpa/mac-api.c
@@ -634,7 +634,7 @@ static void __cold setup_dtsec(struct mac_device *mac_dev)
 	mac_dev->ptp_disable		= fm_mac_disable_1588_time_stamp;
 	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause		= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause		= fm_mac_set_rx_pause_frames;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
 	mac_dev->fm_rtc_disable		= fm_rtc_disable;
 	mac_dev->fm_rtc_get_cnt		= fm_rtc_get_cnt;
@@ -659,7 +659,7 @@ static void __cold setup_xgmac(struct mac_device *mac_dev)
 	mac_dev->uninit		= uninit;
 	mac_dev->get_mac_handle	= get_mac_handle;
 	mac_dev->set_tx_pause	= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause	= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause	= fm_mac_set_rx_pause_frames;
 	mac_dev->get_stats	= mac_get_statistics;
 	mac_dev->dump_mac_regs	= xgmac_dump_regs;
 }
@@ -676,7 +676,7 @@ static void __cold setup_memac(struct mac_device *mac_dev)
 	mac_dev->uninit		= uninit;
 	mac_dev->get_mac_handle		= get_mac_handle;
 	mac_dev->set_tx_pause		= fm_mac_set_tx_pause_frames;
-	mac_dev->set_rx_pause		= fm_mac_set_rx_ignore_pause_frames;
+	mac_dev->set_rx_pause		= fm_mac_set_rx_pause_frames;
 	mac_dev->fm_rtc_enable		= fm_rtc_enable;
 	mac_dev->fm_rtc_disable		= fm_rtc_disable;
 	mac_dev->fm_rtc_get_cnt		= fm_rtc_get_cnt;
diff --git a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
index 8383fc9fcac8..f4fabbe23b19 100644
--- a/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
+++ b/drivers/net/ethernet/freescale/fman/src/inc/wrapper/lnxwrp_fsl_fman.h
@@ -403,7 +403,7 @@ int fm_mac_enable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev);
 
 int fm_mac_disable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev);
 
-int fm_mac_set_rx_ignore_pause_frames(
+int fm_mac_set_rx_pause_frames(
 		struct fm_mac_dev *fm_mac_dev, bool en);
 
 int fm_mac_set_tx_pause_frames(struct fm_mac_dev *fm_mac_dev,
diff --git a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
index 29f827ed8051..ead938a045a3 100644
--- a/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
+++ b/drivers/net/ethernet/freescale/fman/src/wrapper/lnxwrp_fm.c
@@ -1602,7 +1602,7 @@ int fm_mac_disable_1588_time_stamp(struct fm_mac_dev *fm_mac_dev)
 }
 EXPORT_SYMBOL(fm_mac_disable_1588_time_stamp);
 
-int fm_mac_set_rx_ignore_pause_frames(
+int fm_mac_set_rx_pause_frames(
 		struct fm_mac_dev *fm_mac_dev, bool en)
 {
 	int	_errno;
@@ -1617,7 +1617,7 @@ int fm_mac_set_rx_ignore_pause_frames(
 
 	return _errno;
 }
-EXPORT_SYMBOL(fm_mac_set_rx_ignore_pause_frames);
+EXPORT_SYMBOL(fm_mac_set_rx_pause_frames);
 
 int fm_mac_set_tx_pause_frames(struct fm_mac_dev *fm_mac_dev,
 					     bool en)
-- 
2.0.1

