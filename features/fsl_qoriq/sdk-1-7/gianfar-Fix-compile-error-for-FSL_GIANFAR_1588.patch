From e2c8eaaf55c5ae7fc065813dbf6432e377f826c6 Mon Sep 17 00:00:00 2001
From: Matei Pavaluca <matei.pavaluca@freescale.com>
Date: Wed, 19 Nov 2014 13:09:04 +0200
Subject: [PATCH 121/128] gianfar: Fix compile error for FSL_GIANFAR_1588

| drivers/net/ethernet/freescale/gianfar.c: In function 'gfar_init_bds':
| drivers/net/ethernet/freescale/gianfar.c:227:16: error: 'struct gfar'
has no member named 'rfbptr0'
| rfbptr = &regs->rfbptr0;
| ^
| drivers/net/ethernet/freescale/gianfar.c: In function 'gfar_init_rqprm':
| drivers/net/ethernet/freescale/gianfar.c:385:15: error: 'struct gfar'
has no member named 'rqprm0'
| baddr = &regs->rqprm0;
| ^

Signed-off-by: Matei Pavaluca <matei.pavaluca@freescale.com>
Change-Id: I90b995bdf88d5e6779c3eb2b13cefb37b603bdc7
Reviewed-on: http://git.am.freescale.net:8181/23975
Reviewed-by: Claudiu Manoil <claudiu.manoil@freescale.com>
Reviewed-by: Yangbo Lu <yangbo.lu@freescale.com>
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Richard Schmitt <richard.schmitt@freescale.com>
[Xulin: Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto_RDS_20150206.iso]
Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/net/ethernet/freescale/gianfar.h |    6 ++++++
 1 files changed, 6 insertions(+), 0 deletions(-)

diff --git a/drivers/net/ethernet/freescale/gianfar.h b/drivers/net/ethernet/freescale/gianfar.h
index 63b03e9..7f55492 100644
--- a/drivers/net/ethernet/freescale/gianfar.h
+++ b/drivers/net/ethernet/freescale/gianfar.h
@@ -1072,7 +1072,13 @@ struct gfar {
 	u8	res24g[4];
 	u32	rfbptr7; /* 0x.c7c - Last free RxBD pointer for ring 7 */
 	u8	res24h[4];
+#if defined CONFIG_FSL_GIANFAR_1588
+	u8	res24x[380];
+	struct gfar_regs_1588 regs_1588;
+#else
 	u8	res24x[556];
+#endif
+
 	u32	isrg0;		/* 0x.eb0 - Interrupt steering group 0 register */
 	u32	isrg1;		/* 0x.eb4 - Interrupt steering group 1 register */
 	u32	isrg2;		/* 0x.eb8 - Interrupt steering group 2 register */
-- 
1.7.5.4

