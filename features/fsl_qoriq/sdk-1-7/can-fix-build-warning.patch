From a82346c2ec8f9fc746d4e2abf0156c2a662332a2 Mon Sep 17 00:00:00 2001
From: Xulin Sun <xulin.sun@windriver.com>
Date: Thu, 14 May 2015 12:14:59 +0800
Subject: [PATCH 3/7] can: fix build warning

replace the variable position to avoid below warning:
warning: ISO C90 forbids mixed declarations and code[-Wdeclaration-after-statement]
	unsigned long iflag1;

Signed-off-by: Xulin Sun <xulin.sun@windriver.com>
---
 drivers/net/can/flexcan.c |    5 ++---
 1 files changed, 2 insertions(+), 3 deletions(-)

diff --git a/drivers/net/can/flexcan.c b/drivers/net/can/flexcan.c
index 038f5fe..6a03ae8 100644
--- a/drivers/net/can/flexcan.c
+++ b/drivers/net/can/flexcan.c
@@ -832,6 +832,8 @@ static int flexcan_poll(struct napi_struct *napi, int quota)
 	struct flexcan_regs __iomem *regs = priv->base;
 	u32 reg_iflag1, reg_esr;
 	int work_done = 0;
+	unsigned long iflag1;
+	u32 mailbox;
 
 	/*
 	 * The error bits are cleared on read,
@@ -851,9 +853,6 @@ static int flexcan_poll(struct napi_struct *napi, int quota)
 		reg_iflag1 = priv->read(&regs->iflag1);
 	}
 #else
-	unsigned long iflag1;
-	u32 mailbox;
-
 	/* handle RX-Buffers */
 	reg_iflag1 = priv->read(&regs->iflag1);
 	iflag1 = reg_iflag1 & (FLEXCAN_TX_BUF_ID - 1);
-- 
1.7.5.4

