From 4df96075e0e4a37ad01f2d609e697374b93aa13f Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Wed, 24 Sep 2014 13:34:34 +0800
Subject: [PATCH 3/3] Revert "drivers: net: gianfar: Make RT aware"

This reverts commit 7af9cb4fbb062d1c0ed6f8898729b1f0f7c48c94.

Revert this patch temporarily in order to apply the BSP common patches
cleanly on rt kernel.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/gianfar.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/freescale/gianfar.c b/drivers/net/ethernet/freescale/gianfar.c
index f5a7e62..ad5a5aa 100644
--- a/drivers/net/ethernet/freescale/gianfar.c
+++ b/drivers/net/ethernet/freescale/gianfar.c
@@ -1716,7 +1716,7 @@ void stop_gfar(struct net_device *dev)
 
 
 	/* Lock it down */
-	local_irq_save_nort(flags);
+	local_irq_save(flags);
 	lock_tx_qs(priv);
 	lock_rx_qs(priv);
 
@@ -1724,7 +1724,7 @@ void stop_gfar(struct net_device *dev)
 
 	unlock_rx_qs(priv);
 	unlock_tx_qs(priv);
-	local_irq_restore_nort(flags);
+	local_irq_restore(flags);
 
 	/* Free the IRQs */
 	if (priv->device_flags & FSL_GIANFAR_DEV_HAS_MULTI_INTR) {
@@ -3105,7 +3105,7 @@ static void adjust_link(struct net_device *dev)
 	struct phy_device *phydev = priv->phydev;
 	int new_state = 0;
 
-	local_irq_save_nort(flags);
+	local_irq_save(flags);
 	lock_tx_qs(priv);
 
 	if (phydev->link) {
@@ -3179,7 +3179,7 @@ static void adjust_link(struct net_device *dev)
 	if (new_state && netif_msg_link(priv))
 		phy_print_status(phydev);
 	unlock_tx_qs(priv);
-	local_irq_restore_nort(flags);
+	local_irq_restore(flags);
 }
 
 /* Update the hash table based on the current list of multicast
-- 
1.7.5.4

