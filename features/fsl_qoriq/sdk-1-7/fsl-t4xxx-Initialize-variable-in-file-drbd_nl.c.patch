From 2a270603add365d822467c0d8f520f7acbd97be4 Mon Sep 17 00:00:00 2001
From: Limeng <Meng.Li@windriver.com>
Date: Wed, 28 Oct 2015 10:57:58 +0800
Subject: [PATCH] fsl-t4xxx: Initialize variable in file drbd_nl.c

There is a warning during compile file linux/drivers/block/drbd/drbd_nl.c.
Because there are 2 variables that is not initialized in function drbd_determine_dev_size().
Detail warning information as below:
kernel-source/drivers/block/drbd/drbd_nl.c: In function 'drbd_determine_dev_size':
kernel-source/drivers/block/drbd/drbd_nl.c:973:19: warning: 'prev_al_stripes' may be used uninitialized in this function [-Wmaybe-uninitialized]
    md->al_size_4k = (u64)prev_al_stripes * prev_al_stripe_size_4k;
                   ^
kernel-source/drivers/block/drbd/drbd_nl.c:973:19: warning: 'prev_al_stripe_size_4k' may be used uninitialized in this function [-Wmaybe-uninitialized]

Initialize the 2 variables as 0 to fix this issue.

Signed-off-by: Meng Li <Meng.Li@windriver.com>
---
 drivers/block/drbd/drbd_nl.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/block/drbd/drbd_nl.c b/drivers/block/drbd/drbd_nl.c
index 8c16c2f..3339c85 100644
--- a/drivers/block/drbd/drbd_nl.c
+++ b/drivers/block/drbd/drbd_nl.c
@@ -839,8 +839,8 @@ drbd_determine_dev_size(struct drbd_conf *mdev, enum dds_flags flags, struct res
 	sector_t prev_first_sect, prev_size; /* previous meta location */
 	sector_t la_size_sect, u_size;
 	struct drbd_md *md = &mdev->ldev->md;
-	u32 prev_al_stripe_size_4k;
-	u32 prev_al_stripes;
+	u32 prev_al_stripe_size_4k = 0;
+	u32 prev_al_stripes = 0;
 	sector_t size;
 	char ppb[10];
 	void *buffer;
-- 
1.7.5.4

