From a730a7c8a22567c5697c491cac24349d12ebfbad Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Mon, 7 Sep 2015 11:11:44 +0800
Subject: [PATCH 3/3] can: flexcan: fix two build warnings

Add the ifndef CONFIG_CAN_FLEXCAN_RX_FIFO_EN to fix the following two
build warnings:
  In function 'flexcan_poll':
  drivers/net/can/flexcan.c:836:6:
  warning: unused variable 'mailbox' [-Wunused-variable]
    u32 mailbox;
        ^
  drivers/net/can/flexcan.c:835:16:
  warning: unused variable 'iflag1' [-Wunused-variable]
    unsigned long iflag1;
                ^

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/can/flexcan.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/net/can/flexcan.c b/drivers/net/can/flexcan.c
index d1e191c..44db5df 100644
--- a/drivers/net/can/flexcan.c
+++ b/drivers/net/can/flexcan.c
@@ -832,8 +832,10 @@ static int flexcan_poll(struct napi_struct *napi, int quota)
 	struct flexcan_regs __iomem *regs = priv->base;
 	u32 reg_iflag1, reg_esr;
 	int work_done = 0;
+#ifndef CONFIG_CAN_FLEXCAN_RX_FIFO_EN
 	unsigned long iflag1;
 	u32 mailbox;
+#endif
 
 	/*
 	 * The error bits are cleared on read,
-- 
1.7.5.4

