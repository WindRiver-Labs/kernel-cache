From 2f9d85f422765d245f958d723d87a88b82ac39eb Mon Sep 17 00:00:00 2001
From: Jia Hongtao <hongtao.jia@freescale.com>
Date: Thu, 15 May 2014 15:37:50 +0800
Subject: [PATCH 124/399] Add missing ADT7461 node to device tree for
 supported boards

Including: T1040RDB T1042RDB T208xQDS T208xRDB B4QDS T4240QDS

For T208xRDB and T4240QDS, ADT7481 is used. But kernel now only supports
ADT7461. So for now ADT7481 is treated as ADT7461.

The kernel config for thermal monitor is CONFIG_SENSORS_LM90.

Signed-off-by: Jia Hongtao <hongtao.jia@freescale.com>
Change-Id: Ifae889c238fd53e0abc3b75516e484f1ccf6e659
Reviewed-on: http://git.am.freescale.net:8181/23080
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Yang Li <LeoLi@freescale.com>
Reviewed-by: Yuantian Tang <yuantian.tang@freescale.com>
Reviewed-by: Matthew Weigel <Matthew.Weigel@freescale.com>
[Lu:Original patch taken from
QorIQ-SDK-V1.7-SOURCE-20141218-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/b4qds.dtsi    |   11 +++++++++++
 arch/powerpc/boot/dts/t1040rdb.dts  |    7 +++++++
 arch/powerpc/boot/dts/t1042rdb.dts  |    7 +++++++
 arch/powerpc/boot/dts/t208xqds.dtsi |    6 ++++--
 arch/powerpc/boot/dts/t208xrdb.dtsi |    8 ++++++--
 arch/powerpc/boot/dts/t4240qds.dts  |   15 +++++++++++++++
 6 files changed, 50 insertions(+), 4 deletions(-)

diff --git a/arch/powerpc/boot/dts/b4qds.dtsi b/arch/powerpc/boot/dts/b4qds.dtsi
index 8b47edc..bccc986 100644
--- a/arch/powerpc/boot/dts/b4qds.dtsi
+++ b/arch/powerpc/boot/dts/b4qds.dtsi
@@ -152,6 +152,17 @@
 						reg = <0x68>;
 					};
 				};
+
+				i2c@3 {
+					#address-cells = <1>;
+					#size-cells = <0>;
+					reg = <0x3>;
+
+					adt7461@4c {
+						compatible = "adi,adt7461";
+						reg = <0x4c>;
+					};
+				};
 			};
 		};
 
diff --git a/arch/powerpc/boot/dts/t1040rdb.dts b/arch/powerpc/boot/dts/t1040rdb.dts
index e238d2d..641bb5f 100644
--- a/arch/powerpc/boot/dts/t1040rdb.dts
+++ b/arch/powerpc/boot/dts/t1040rdb.dts
@@ -126,6 +126,13 @@
 		ranges = <0x00000000 0xf 0xfe000000 0x1000000>;
 		reg = <0xf 0xfe000000 0 0x00001000>;
 
+		i2c@118000 {
+			adt7461@4c {
+				compatible = "adi,adt7461";
+				reg = <0x4c>;
+			};
+		};
+
 		i2c@118100 {
 			pca9546@77 {
 				compatible = "philips,pca9546";
diff --git a/arch/powerpc/boot/dts/t1042rdb.dts b/arch/powerpc/boot/dts/t1042rdb.dts
index 39b591c..bcfb046 100644
--- a/arch/powerpc/boot/dts/t1042rdb.dts
+++ b/arch/powerpc/boot/dts/t1042rdb.dts
@@ -126,6 +126,13 @@
 		ranges = <0x00000000 0xf 0xfe000000 0x1000000>;
 		reg = <0xf 0xfe000000 0 0x00001000>;
 
+		i2c@118000 {
+			adt7461@4c {
+				compatible = "adi,adt7461";
+				reg = <0x4c>;
+			};
+		};
+
 		i2c@118100 {
 			pca9546@77 {
 				compatible = "philips,pca9546";
diff --git a/arch/powerpc/boot/dts/t208xqds.dtsi b/arch/powerpc/boot/dts/t208xqds.dtsi
index 8dc375a..a82fc9e 100644
--- a/arch/powerpc/boot/dts/t208xqds.dtsi
+++ b/arch/powerpc/boot/dts/t208xqds.dtsi
@@ -242,12 +242,14 @@
 						shunt-resistor = <1000>;
 					};
 				};
+
 				i2c@3 {
 					#address-cells = <1>;
 					#size-cells = <0>;
 					reg = <0x3>;
-					ADT7461@4c {
-						compatible = "adt7461a";
+
+					adt7461@4c {
+						compatible = "adi,adt7461";
 						reg = <0x4c>;
 					};
 				};
diff --git a/arch/powerpc/boot/dts/t208xrdb.dtsi b/arch/powerpc/boot/dts/t208xrdb.dtsi
index 727f401..a7bf768 100644
--- a/arch/powerpc/boot/dts/t208xrdb.dtsi
+++ b/arch/powerpc/boot/dts/t208xrdb.dtsi
@@ -166,8 +166,12 @@
 		};
 
 		i2c@118000 {
-			adt7481@4c {
-				compatible = "adi,adt7481";
+			/*
+			 * Should be ADT7481.
+			 * Now kernel only supports ADT7461.
+			 */
+			adt7461@4c {
+				compatible = "adi,adt7461";
 				reg = <0x4c>;
 			};
 
diff --git a/arch/powerpc/boot/dts/t4240qds.dts b/arch/powerpc/boot/dts/t4240qds.dts
index d9715d7..8949f65 100644
--- a/arch/powerpc/boot/dts/t4240qds.dts
+++ b/arch/powerpc/boot/dts/t4240qds.dts
@@ -408,6 +408,21 @@
 						shunt-resistor = <1000>;
 					};
 				};
+
+				i2c@3 {
+					#address-cells = <1>;
+					#size-cells = <0>;
+					reg = <0x3>;
+
+					/*
+					 * Should be ADT7481.
+					 * Now kernel only supports ADT7461.
+					 */
+					adt7461@4c {
+						compatible = "adi,adt7461";
+						reg = <0x4c>;
+					};
+				};
 			};
 		};
 
-- 
1.7.5.4

