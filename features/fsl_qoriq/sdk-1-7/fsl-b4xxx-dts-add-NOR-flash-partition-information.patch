From 8d8fd006c2ef5a3b264b7296c940848e6fa0ad37 Mon Sep 17 00:00:00 2001
From: Jiang Lu <lu.jiang@windriver.com>
Date: Mon, 4 May 2015 17:04:26 +0800
Subject: [PATCH] fsl-b4xxx/dts: add NOR flash partition information

Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 arch/powerpc/boot/dts/b4qds.dtsi |   89 +++++++++++++++++++++++++++++++++++++-
 1 files changed, 88 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/boot/dts/b4qds.dtsi b/arch/powerpc/boot/dts/b4qds.dtsi
index 30266cf..10051c1 100644
--- a/arch/powerpc/boot/dts/b4qds.dtsi
+++ b/arch/powerpc/boot/dts/b4qds.dtsi
@@ -56,9 +56,96 @@
 			#address-cells = <1>;
 			#size-cells = <1>;
 			compatible = "cfi-flash";
-			reg = <0x0 0x0 0x4000000>;
+			reg = <0x0 0x0 0x8000000>;
 			bank-width = <2>;
 			device-width = <1>;
+
+			partition@0 {
+				/* This can't be accessed because of a board issue. */
+				label = "Reserved";
+				reg = <0x0 0x4000000>;
+				read-only;
+			};
+			partition@4000000 {
+				label = "rcw";
+				reg = <0x4000000 0x20000>;
+				read-only;
+			};
+			partition@4020000 {
+				label = "Linux.uImage";
+				reg = <0x4020000 0x6e0000>;
+			};
+			partition@4700000 {
+				label = "HV.uImage";
+				reg = <0x4700000 0x100000>;
+			};
+			partition@4800000 {
+				label = "dtb";
+				reg = <0x4800000 0x100000>;
+			};
+			partition@4900000 {
+				label = "HV.dtb";
+				reg = <0x4900000 0x100000>;
+			};
+			partition@4a00000 {
+				label = "fs1";
+				reg = <0x4a00000 0x1500000>;
+			};
+			partition@5f00000 {
+				label = "alt-fman-firmware";
+				reg = <0x5f00000 0x20000>;
+				read-only;
+			};
+			partition@5f20000 {
+				label = "alt-u-boot env";
+				reg = <0x5f20000  0x20000>;
+				read-only;
+			};
+			partition@5f40000 {
+				label = "alt-u-boot";
+				reg = <0x5f40000 0xc0000>;
+				read-only;
+			};
+			partition@6000000 {
+				label = "alt-rcw";
+				reg = <0x6000000 0x20000>;
+				read-only;
+			};
+			partition@6020000 {
+				label = "alt-kernel";
+				reg = <0x6020000 0x6e0000>;
+			};
+			partition@6700000 {
+				label = "alt-HV.uImage";
+				reg = <0x6700000 0x100000>;
+			};
+			partition@6800000 {
+				label = "alt-dtb";
+				reg = <0x6800000 0x100000>;
+			};
+			partition@6900000 {
+				label = "alt-HV.dtb";
+				reg = <0x6900000 0x100000>;
+			};
+			partition@6a00000 {
+				label = "fs2";
+				reg = <0x6a00000 0x1500000>;
+			};
+			partition@7f00000 {
+				label = "fman-firmware";
+				reg = <0x7f00000 0x20000>;
+				read-only;
+			};
+			partition@7f20000 {
+				label = "u-boot env";
+				reg = <0x7f20000  0x20000>;
+				read-only;
+			};
+			partition@7f40000 {
+				label = "u-boot";
+				reg = <0x7f40000 0xc0000>;
+				read-only;
+			};
 		};
 
 		nand@2,0 {
-- 
1.7.5.4

