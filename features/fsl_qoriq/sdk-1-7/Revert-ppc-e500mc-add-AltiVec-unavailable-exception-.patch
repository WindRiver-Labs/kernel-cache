From c1586127b769c154a245f69691acdb3e4092ec82 Mon Sep 17 00:00:00 2001
From: Alexandru Moise <alexandru.moise@windriver.com>
Date: Tue, 30 Aug 2016 20:32:13 +0300
Subject: [PATCH] Revert "ppc/e500mc: add AltiVec unavailable exception
 handler"

Issue: LIN7-6741

This reverts commit 821f7861b1c453ece67377f7301d5f32e5e52997.

The aforementioned commit renders our p4080ds boards un-bootable.

Signed-off-by: Alexandru Moise <alexandru.moise@windriver.com>
---
 arch/powerpc/kernel/head_fsl_booke.S |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/arch/powerpc/kernel/head_fsl_booke.S b/arch/powerpc/kernel/head_fsl_booke.S
index cf8eb75..1b57106 100644
--- a/arch/powerpc/kernel/head_fsl_booke.S
+++ b/arch/powerpc/kernel/head_fsl_booke.S
@@ -636,12 +636,6 @@ END_FTR_SECTION_IFSET(CPU_FTR_EMB_HV)
 		  unknown_exception, EXC_XFER_EE)
 #endif /* CONFIG_SPE_POSSIBLE */
 
-#ifdef CONFIG_PPC_E500MC
-	/* Altivec Unavailable Interrupt */
-	EXCEPTION(0x2020, ALTIVEC_UNAVAIL, altivec_unavailable, \
-		  altivec_unavailable_exception, EXC_XFER_EE)
-#endif /* CONFIG_PPC_E500MC */
-
 	/* SPE Floating Point Data */
 #ifdef CONFIG_SPE
 	EXCEPTION(0x2030, SPE_FP_DATA_ALTIVEC_ASSIST, SPEFloatingPointData,
@@ -999,8 +993,6 @@ _GLOBAL(__setup_e500_ivors)
 _GLOBAL(__setup_e500mc_ivors)
 	li	r3,DebugDebug@l
 	mtspr	SPRN_IVOR15,r3
-	li	r3,altivec_unavailable@l
-	mtspr	SPRN_IVOR32,r3
 	li	r3,PerformanceMonitor@l
 	mtspr	SPRN_IVOR35,r3
 	li	r3,Doorbell@l
-- 
1.7.5.4

