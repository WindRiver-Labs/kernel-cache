From e35a0d65e3efbe88fb82db0a4e466696b969faf6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Horia=20Geant=C4=83?= <horia.geanta@nxp.com>
Date: Fri, 6 May 2016 12:03:54 +0300
Subject: [PATCH 1343/1383] arm64: dts: ls1043a: fix "fsl,sec" compatible
 string
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

LS1043A SoC has SEC v5.4, thus fix the compatible string list.

If "fsl,sec-v5.0" is not added in list, the DMA mask will be set
to 36 bits instead of 40 bits.

Signed-off-by: Horia GeantÄƒ <horia.geanta@nxp.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi | 20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 06b93dc..3f3a6ba 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -167,7 +167,8 @@
 		};
 
 		crypto: crypto@1700000 {
-			compatible = "fsl,sec-v4.4", "fsl,sec-v4.0";
+			compatible = "fsl,sec-v5.4", "fsl,sec-v5.0",
+				     "fsl,sec-v4.0";
 			fsl,sec-era = <3>;
 			#address-cells = <1>;
 			#size-cells = <1>;
@@ -176,25 +177,32 @@
 			interrupts = <0 75 0x4>;
 
 			sec_jr0: jr@10000 {
-				compatible = "fsl,sec-v4.4-job-ring", "fsl,sec-v4.0-job-ring";
+				compatible = "fsl,sec-v5.4-job-ring",
+					     "fsl,sec-v5.0-job-ring",
+					     "fsl,sec-v4.0-job-ring";
 				reg	   = <0x10000 0x10000>;
 				interrupts = <0 71 0x4>;
 			};
 
 			sec_jr1: jr@20000 {
-				compatible = "fsl,sec-v4.4-job-ring", "fsl,sec-v4.0-job-ring";
+				compatible = "fsl,sec-v5.4-job-ring",
+					     "fsl,sec-v5.0-job-ring",
+					     "fsl,sec-v4.0-job-ring";
 				reg	   = <0x20000 0x10000>;
 				interrupts = <0 72 0x4>;
 			};
 
 			sec_jr2: jr@30000 {
-				compatible = "fsl,sec-v4.4-job-ring", "fsl,sec-v4.0-job-ring";
-				reg	   = <0x30000 0x10000>;
+				compatible = "fsl,sec-v5.4-job-ring",
+					     "fsl,sec-v5.0-job-ring",
+					     "fsl,sec-v4.0-job-ring";
 				interrupts = <0 73 0x4>;
 			};
 
 			sec_jr3: jr@40000 {
-				compatible = "fsl,sec-v4.4-job-ring", "fsl,sec-v4.0-job-ring";
+				compatible = "fsl,sec-v5.4-job-ring",
+					     "fsl,sec-v5.0-job-ring",
+					     "fsl,sec-v4.0-job-ring";
 				reg	   = <0x40000 0x10000>;
 				interrupts = <0 74 0x4>;
 			};
-- 
2.8.1

