From 1ae96b58984ad74ed4dea45f2c3ddc011a9b5a7f Mon Sep 17 00:00:00 2001
From: Liu Gang <Gang.Liu@nxp.com>
Date: Wed, 3 Feb 2016 14:57:11 +0800
Subject: [PATCH 0804/1429] layerscape/dts: Update GPIO node

For ls1043a and ls2085a, the GPIO compatible should be
changed to "fsl,qoriq-gpio".

For ls2080a and ls2085a, the little-endian property
should be added since the GPIO register working on
little endian mode on the two platforms.

Signed-off-by: Liu Gang <Gang.Liu@nxp.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts |    8 ++++----
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi    |   16 ++++++++--------
 arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi    |    4 ++++
 arch/arm64/boot/dts/freescale/fsl-ls2085a.dtsi    |   12 ++++++++----
 4 files changed, 24 insertions(+), 16 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
index 9ec8d18..2186d14 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-qds.dts
@@ -59,10 +59,10 @@
 		serial4 = &lpuart4;
 		serial5 = &lpuart5;
 
-		gpio0 = &gpio1;
-		gpio1 = &gpio2;
-		gpio2 = &gpio3;
-		gpio3 = &gpio4;
+		gpio0 = &gpio0;
+		gpio1 = &gpio1;
+		gpio2 = &gpio2;
+		gpio3 = &gpio3;
 
 		sgmii_riser_s1_p1 = &sgmii_phy_s1_p1;
 		sgmii_riser_s2_p1 = &sgmii_phy_s2_p1;
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 7a463ff..daeebae 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -622,8 +622,8 @@
 			clocks = <&clockgen 4 0>;
 		};
 
-		gpio1: gpio@2300000 {
-			compatible = "fsl,ls1043a-gpio";
+		gpio0: gpio@2300000 {
+			compatible = "fsl,qoriq-gpio";
 			reg = <0x0 0x2300000 0x0 0x10000>;
 			interrupts = <0 66 0x4>;
 			gpio-controller;
@@ -632,8 +632,8 @@
 			#interrupt-cells = <2>;
 		};
 
-		gpio2: gpio@2310000 {
-			compatible = "fsl,ls1043a-gpio";
+		gpio1: gpio@2310000 {
+			compatible = "fsl,qoriq-gpio";
 			reg = <0x0 0x2310000 0x0 0x10000>;
 			interrupts = <0 67 0x4>;
 			gpio-controller;
@@ -642,8 +642,8 @@
 			#interrupt-cells = <2>;
 		};
 
-		gpio3: gpio@2320000 {
-			compatible = "fsl,ls1043a-gpio";
+		gpio2: gpio@2320000 {
+			compatible = "fsl,qoriq-gpio";
 			reg = <0x0 0x2320000 0x0 0x10000>;
 			interrupts = <0 68 0x4>;
 			gpio-controller;
@@ -652,8 +652,8 @@
 			#interrupt-cells = <2>;
 		};
 
-		gpio4: gpio@2330000 {
-			compatible = "fsl,ls1043a-gpio";
+		gpio3: gpio@2330000 {
+			compatible = "fsl,qoriq-gpio";
 			reg = <0x0 0x2330000 0x0 0x10000>;
 			interrupts = <0 134 0x4>;
 			gpio-controller;
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
index a2dd23c..0bacd4f 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
@@ -142,6 +142,7 @@
 		reg = <0x0 0x2300000 0x0 0x10000>;
 		interrupts = <0 36 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
@@ -152,6 +153,7 @@
 		reg = <0x0 0x2310000 0x0 0x10000>;
 		interrupts = <0 36 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
@@ -162,6 +164,7 @@
 		reg = <0x0 0x2320000 0x0 0x10000>;
 		interrupts = <0 37 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
@@ -172,6 +175,7 @@
 		reg = <0x0 0x2330000 0x0 0x10000>;
 		interrupts = <0 37 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2085a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls2085a.dtsi
index 432043e..6473e50 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2085a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2085a.dtsi
@@ -129,40 +129,44 @@
 	};
 
 	gpio0: gpio@2300000 {
-		compatible = "fsl,ls2085a-gpio";
+		compatible = "fsl,qoriq-gpio";
 		reg = <0x0 0x2300000 0x0 0x10000>;
 		interrupts = <0 36 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
 	};
 
 	gpio1: gpio@2310000 {
-		compatible = "fsl,ls2085a-gpio";
+		compatible = "fsl,qoriq-gpio";
 		reg = <0x0 0x2310000 0x0 0x10000>;
 		interrupts = <0 36 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
 	};
 
 	gpio2: gpio@2320000 {
-		compatible = "fsl,ls2085a-gpio";
+		compatible = "fsl,qoriq-gpio";
 		reg = <0x0 0x2320000 0x0 0x10000>;
 		interrupts = <0 37 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
 	};
 
 	gpio3: gpio@2330000 {
-		compatible = "fsl,ls2085a-gpio";
+		compatible = "fsl,qoriq-gpio";
 		reg = <0x0 0x2330000 0x0 0x10000>;
 		interrupts = <0 37 0x4>; /* Level high type */
 		gpio-controller;
+		little-endian;
 		#gpio-cells = <2>;
 		interrupt-controller;
 		#interrupt-cells = <2>;
-- 
1.7.5.4

