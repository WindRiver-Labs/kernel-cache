From 7da97b6df11dfcfd2c3d477d908b069ac78332ee Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Fri, 14 Nov 2014 10:41:12 +0800
Subject: [PATCH 3/3] memblock: change the annotation to __init_memblock for
 memblock_is_reserved()

This function may be used by modules, so change the annotation to
__init_memblock and also export the symbol.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 mm/memblock.c |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/mm/memblock.c b/mm/memblock.c
index 1b444c7..f3f4fbc 100644
--- a/mm/memblock.c
+++ b/mm/memblock.c
@@ -1473,10 +1473,13 @@ static int __init_memblock memblock_search(struct memblock_type *type, phys_addr
 	return -1;
 }
 
-int __init memblock_is_reserved(phys_addr_t addr)
+int __init_memblock memblock_is_reserved(phys_addr_t addr)
 {
 	return memblock_search(&memblock.reserved, addr) != -1;
 }
+#ifndef CONFIG_ARCH_DISCARD_MEMBLOCK
+EXPORT_SYMBOL_GPL(memblock_is_reserved);
+#endif
 
 int __init_memblock memblock_is_memory(phys_addr_t addr)
 {
-- 
1.7.5.4

