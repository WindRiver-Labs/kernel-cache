From cd4e648c878d610cc758efabf433ca362449294d Mon Sep 17 00:00:00 2001
From: Scott Wood <scott.wood@nxp.com>
Date: Tue, 10 May 2016 18:44:57 -0500
Subject: [PATCH 1350/1383] arm64/dts: Add upstream-compatible timer erratum
 property

The arm,reread-timer property will not be used upstream.  Add
the fsl,erratum-a008585 property which has been proposed upstream,
to ensure that the erratum workaround will be active if an SDK
device tree (or a customer/bootloader fork therefrom) is used
with an upstream kernel (or a future SDK kernel that conforms
with upstream, a distribution kernel, etc).

Signed-off-by: Scott Wood <scott.wood@nxp.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/arm64/boot/dts/freescale/fsl-ls1043a-uefi.dtsi | 1 +
 arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi      | 1 +
 arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi      | 1 +
 3 files changed, 3 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a-uefi.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a-uefi.dtsi
index 17c3d4f..bbe7206 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a-uefi.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a-uefi.dtsi
@@ -134,6 +134,7 @@
 			     <1 11 0x1>, /* Virtual PPI */
 			     <1 10 0x1>; /* Hypervisor PPI */
 		arm,reread-timer;
+		fsl,erratum-a008585;
 	};
 
 	pmu {
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
index 3f3a6ba..2d02536 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls1043a.dtsi
@@ -122,6 +122,7 @@
 			     <1 11 0x1>, /* Virtual PPI */
 			     <1 10 0x1>; /* Hypervisor PPI */
 		arm,reread-timer;
+		fsl,erratum-a008585;
 	};
 
 	pmu {
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi b/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
index 90e2fdd5..99648e3 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2080a.dtsi
@@ -622,6 +622,7 @@
 			     <1 11 0x1>, /* Virtual PPI, edge triggered */
 			     <1 10 0x1>; /* Hypervisor PPI, edge triggered */
 		arm,reread-timer;
+		fsl,erratum-a008585;
 	};
 
 	fsl_mc: fsl-mc@80c000000 {
-- 
2.8.1

