From 1d98d49d2aaaffda9d300b58e03e8bbcb96f3d08 Mon Sep 17 00:00:00 2001
From: Roy Pledge <roy.pledge@nxp.com>
Date: Wed, 16 Mar 2016 16:54:24 -0400
Subject: [PATCH 1209/1429] fsl_pme: Update device trees for PME

Add PME device tree nodes

Signed-off-by: Roy Pledge <roy.pledge@nxp.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/boot/dts/fsl/p2041rdb.dts      |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/p2041si-post.dtsi |    1 +
 arch/powerpc/boot/dts/fsl/p2041si-pre.dtsi  |    1 +
 arch/powerpc/boot/dts/fsl/p4080ds.dts       |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/p4080si-post.dtsi |    1 +
 arch/powerpc/boot/dts/fsl/p4080si-pre.dtsi  |    1 +
 arch/powerpc/boot/dts/fsl/p5020ds.dts       |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/p5020si-post.dtsi |    1 +
 arch/powerpc/boot/dts/fsl/p5020si-pre.dtsi  |    1 +
 arch/powerpc/boot/dts/fsl/qoriq-pme-0.dtsi  |    2 ++
 arch/powerpc/boot/dts/fsl/t1040si-post.dtsi |    1 +
 arch/powerpc/boot/dts/fsl/t104xd4rdb.dtsi   |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t104xqds.dtsi     |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t104xrdb.dtsi     |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t104xsi-pre.dtsi  |    1 +
 arch/powerpc/boot/dts/fsl/t2081si-post.dtsi |    1 +
 arch/powerpc/boot/dts/fsl/t208xqds.dtsi     |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t208xrdb.dtsi     |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t208xsi-pre.dtsi  |    3 ++-
 arch/powerpc/boot/dts/fsl/t4240qds.dts      |   12 ++++++++++++
 arch/powerpc/boot/dts/fsl/t4240rdb.dts      |   12 ++++++++++++
 21 files changed, 133 insertions(+), 1 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/p2041rdb.dts b/arch/powerpc/boot/dts/fsl/p2041rdb.dts
index 73c99b9..cd6c8a6 100644
--- a/arch/powerpc/boot/dts/fsl/p2041rdb.dts
+++ b/arch/powerpc/boot/dts/fsl/p2041rdb.dts
@@ -81,6 +81,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	dcsr: dcsr@f00000000 {
diff --git a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
index 30ff597..990873f 100644
--- a/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p2041si-post.dtsi
@@ -428,6 +428,7 @@ crypto: crypto@300000 {
 		fsl,iommu-parent = <&pamu1>;
 	};
 
+/include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 /include/ "qoriq-fman-0.dtsi"
diff --git a/arch/powerpc/boot/dts/fsl/p2041si-pre.dtsi b/arch/powerpc/boot/dts/fsl/p2041si-pre.dtsi
index 4f6d8ea..9e7f477 100644
--- a/arch/powerpc/boot/dts/fsl/p2041si-pre.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p2041si-pre.dtsi
@@ -73,6 +73,7 @@
 		rtic_d = &rtic_d;
 		sec_mon = &sec_mon;
 
+		pme = &pme;
 		qman = &qman;
 		bman = &bman;
 		fman0 = &fman0;
diff --git a/arch/powerpc/boot/dts/fsl/p4080ds.dts b/arch/powerpc/boot/dts/fsl/p4080ds.dts
index 9284ca8..ac0bee7 100644
--- a/arch/powerpc/boot/dts/fsl/p4080ds.dts
+++ b/arch/powerpc/boot/dts/fsl/p4080ds.dts
@@ -86,6 +86,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	dcsr: dcsr@f00000000 {
diff --git a/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi b/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
index 175d5e5..b1b9981 100644
--- a/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p4080si-post.dtsi
@@ -511,6 +511,7 @@ crypto: crypto@300000 {
 		fsl,iommu-parent = <&pamu1>;
 	};
 
+/include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 /include/ "qoriq-fman-0.dtsi"
diff --git a/arch/powerpc/boot/dts/fsl/p4080si-pre.dtsi b/arch/powerpc/boot/dts/fsl/p4080si-pre.dtsi
index ecb6676..a3db19d 100644
--- a/arch/powerpc/boot/dts/fsl/p4080si-pre.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p4080si-pre.dtsi
@@ -73,6 +73,7 @@
 		rtic_d = &rtic_d;
 		sec_mon = &sec_mon;
 
+		pme = &pme;
 		qman = &qman;
 		bman = &bman;
 		fman0 = &fman0;
diff --git a/arch/powerpc/boot/dts/fsl/p5020ds.dts b/arch/powerpc/boot/dts/fsl/p5020ds.dts
index 7994939..7380edf 100644
--- a/arch/powerpc/boot/dts/fsl/p5020ds.dts
+++ b/arch/powerpc/boot/dts/fsl/p5020ds.dts
@@ -82,6 +82,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	dcsr: dcsr@f00000000 {
diff --git a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
index 61b63e8..7a3887e 100644
--- a/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p5020si-post.dtsi
@@ -441,6 +441,7 @@
 		fsl,iommu-parent = <&pamu1>;
 	};
 
+/include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-qman1.dtsi"
 /include/ "qoriq-bman1.dtsi"
 
diff --git a/arch/powerpc/boot/dts/fsl/p5020si-pre.dtsi b/arch/powerpc/boot/dts/fsl/p5020si-pre.dtsi
index 918c7fe..8bbfc9c 100644
--- a/arch/powerpc/boot/dts/fsl/p5020si-pre.dtsi
+++ b/arch/powerpc/boot/dts/fsl/p5020si-pre.dtsi
@@ -74,6 +74,7 @@
 		rtic_d = &rtic_d;
 		sec_mon = &sec_mon;
 
+		pme = &pme;
 		qman = &qman;
 		bman = &bman;
 		fman0 = &fman0;
diff --git a/arch/powerpc/boot/dts/fsl/qoriq-pme-0.dtsi b/arch/powerpc/boot/dts/fsl/qoriq-pme-0.dtsi
index 8789df1..c19e5e9 100644
--- a/arch/powerpc/boot/dts/fsl/qoriq-pme-0.dtsi
+++ b/arch/powerpc/boot/dts/fsl/qoriq-pme-0.dtsi
@@ -36,4 +36,6 @@ pme: pme@316000 {
 	compatible = "fsl,pme";
 	reg = <0x316000 0x10000>;
 	interrupts = <16 2 1 5>;
+	memory-region = <&pme_pdsr &pme_sre>;
 };
+
diff --git a/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi b/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
index 3383f93..50dc930 100644
--- a/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t1040si-post.dtsi
@@ -676,6 +676,7 @@
 		fsl,liodn-reg = <&guts 0x554>; /* SATA2LIODNR */
 	};
 /include/ "qoriq-sec5.0-0.dtsi"
+/include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-qman3.dtsi"
 /include/ "qoriq-bman1.dtsi"
 /include/ "qoriq-fman3l-0.dtsi"
diff --git a/arch/powerpc/boot/dts/fsl/t104xd4rdb.dtsi b/arch/powerpc/boot/dts/fsl/t104xd4rdb.dtsi
index bcb6cad..891d499 100644
--- a/arch/powerpc/boot/dts/fsl/t104xd4rdb.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t104xd4rdb.dtsi
@@ -50,6 +50,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	ifc: localbus@ffe124000 {
diff --git a/arch/powerpc/boot/dts/fsl/t104xqds.dtsi b/arch/powerpc/boot/dts/fsl/t104xqds.dtsi
index 2c81703..739eaab 100644
--- a/arch/powerpc/boot/dts/fsl/t104xqds.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t104xqds.dtsi
@@ -82,6 +82,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	ifc: localbus@ffe124000 {
diff --git a/arch/powerpc/boot/dts/fsl/t104xrdb.dtsi b/arch/powerpc/boot/dts/fsl/t104xrdb.dtsi
index 34c810d..9d31bf5 100644
--- a/arch/powerpc/boot/dts/fsl/t104xrdb.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t104xrdb.dtsi
@@ -50,6 +50,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	ifc: localbus@ffe124000 {
diff --git a/arch/powerpc/boot/dts/fsl/t104xsi-pre.dtsi b/arch/powerpc/boot/dts/fsl/t104xsi-pre.dtsi
index 2c04b76..33ca03a 100644
--- a/arch/powerpc/boot/dts/fsl/t104xsi-pre.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t104xsi-pre.dtsi
@@ -59,6 +59,7 @@
 
 		crypto = &crypto;
 
+		pme = &pme;
 		qman = &qman;
 		bman = &bman;
 		fman0 = &fman0;
diff --git a/arch/powerpc/boot/dts/fsl/t2081si-post.dtsi b/arch/powerpc/boot/dts/fsl/t2081si-post.dtsi
index a0d00b9..72102a9 100644
--- a/arch/powerpc/boot/dts/fsl/t2081si-post.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t2081si-post.dtsi
@@ -685,6 +685,7 @@
 		rcpm-wakeup = <&rcpm 0x00000010>;
 	};
 /include/ "qoriq-sec5.2-0.dtsi"
+/include/ "qoriq-pme-0.dtsi"
 /include/ "qoriq-bman1.dtsi"
 /include/ "qoriq-qman3.dtsi"
 /include/ "qoriq-fman3-0.dtsi"
diff --git a/arch/powerpc/boot/dts/fsl/t208xqds.dtsi b/arch/powerpc/boot/dts/fsl/t208xqds.dtsi
index 5486b27..ac8cf8d 100644
--- a/arch/powerpc/boot/dts/fsl/t208xqds.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t208xqds.dtsi
@@ -56,6 +56,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	ifc: localbus@ffe124000 {
diff --git a/arch/powerpc/boot/dts/fsl/t208xrdb.dtsi b/arch/powerpc/boot/dts/fsl/t208xrdb.dtsi
index e1992c9..af90476 100644
--- a/arch/powerpc/boot/dts/fsl/t208xrdb.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t208xrdb.dtsi
@@ -56,6 +56,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	ifc: localbus@ffe124000 {
diff --git a/arch/powerpc/boot/dts/fsl/t208xsi-pre.dtsi b/arch/powerpc/boot/dts/fsl/t208xsi-pre.dtsi
index d157c2f..03d6706 100644
--- a/arch/powerpc/boot/dts/fsl/t208xsi-pre.dtsi
+++ b/arch/powerpc/boot/dts/fsl/t208xsi-pre.dtsi
@@ -51,7 +51,8 @@
 		serial3 = &serial3;
 
 		crypto = &crypto;
-		man = &qman;
+		pme = &pme;
+		qman = &qman;
 		bman = &bman;
 		fman0 = &fman0;
 		ethernet0 = &fm1mac1;
diff --git a/arch/powerpc/boot/dts/fsl/t4240qds.dts b/arch/powerpc/boot/dts/fsl/t4240qds.dts
index 835cb00..aba5ce0 100644
--- a/arch/powerpc/boot/dts/fsl/t4240qds.dts
+++ b/arch/powerpc/boot/dts/fsl/t4240qds.dts
@@ -312,6 +312,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	dcsr: dcsr@f00000000 {
diff --git a/arch/powerpc/boot/dts/fsl/t4240rdb.dts b/arch/powerpc/boot/dts/fsl/t4240rdb.dts
index e7654f7..dc705cd 100644
--- a/arch/powerpc/boot/dts/fsl/t4240rdb.dts
+++ b/arch/powerpc/boot/dts/fsl/t4240rdb.dts
@@ -113,6 +113,18 @@
 			size = <0 0x2000000>;
 			alignment = <0 0x2000000>;
 		};
+		pme_pdsr: pme-pdsr {
+			compatible = "fsl,pme-pdsr";
+			alloc-ranges = <0 0 0x10000 0>;
+			size = <0 0x1000000>;
+			alignment = <0 0x1000000>;
+		};
+		pme_sre: pme-sre {
+			 compatible = "fsl,pme-sre";
+			 alloc-ranges = <0 0 0x10000 0>;
+			 size = <0 0xa00000>;
+			 alignment = <0 0xa00000>;
+		};
 	};
 
 	dcsr: dcsr@f00000000 {
-- 
1.7.5.4

