From afe0c3e1cb925fefe4b71192573d2a4cd97bfe0d Mon Sep 17 00:00:00 2001
From: Yangbo Lu <yangbo.lu@nxp.com>
Date: Wed, 3 Feb 2016 10:37:39 +0800
Subject: [PATCH 0799/1429] soc: fsl: avoid NULL pointer call trace in guts
 driver

Signed-off-by: Yangbo Lu <yangbo.lu@nxp.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 drivers/soc/fsl/guts.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/soc/fsl/guts.c b/drivers/soc/fsl/guts.c
index ba93aba..6ffa7c6 100644
--- a/drivers/soc/fsl/guts.c
+++ b/drivers/soc/fsl/guts.c
@@ -27,7 +27,7 @@ u32 guts_get_svr(void)
 {
 	u32 svr = 0;
 
-	if (!(guts->regs)) {
+	if ((!guts) || (!(guts->regs))) {
 #ifdef CONFIG_PPC
 		svr =  mfspr(SPRN_SVR);
 #endif
-- 
1.7.5.4

