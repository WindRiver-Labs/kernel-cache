From ab000376dfd5afcf10c79ceb5f4ca7bb7c7269df Mon Sep 17 00:00:00 2001
From: Shengzhou Liu <Shengzhou.Liu@freescale.com>
Date: Mon, 18 Jan 2016 11:56:34 +0800
Subject: [PATCH 0078/1383] t102xrdb/dts: updated t102xrdb nodes

-Add support for INA220 current sense for T1023RDB and T1024RDB
-Add SLIC Maxim ds26522 node for T1024RDB
-Updated n25q512a to n25q512ax3

Signed-off-by: Shengzhou Liu <Shengzhou.Liu@freescale.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/boot/dts/fsl/t1023rdb.dts | 13 ++++++++++++-
 arch/powerpc/boot/dts/fsl/t1024rdb.dts | 21 ++++++++++++++++++++-
 2 files changed, 32 insertions(+), 2 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/t1023rdb.dts b/arch/powerpc/boot/dts/fsl/t1023rdb.dts
index 1db1877..4961f92 100644
--- a/arch/powerpc/boot/dts/fsl/t1023rdb.dts
+++ b/arch/powerpc/boot/dts/fsl/t1023rdb.dts
@@ -49,6 +49,7 @@
 		nor@0,0 {
 			#address-cells = <1>;
 			#size-cells = <1>;
+			status = "disabled";
 			compatible = "cfi-flash";
 			reg = <0x0 0x0 0x8000000>;
 			bank-width = <2>;
@@ -59,7 +60,7 @@
 			#address-cells = <1>;
 			#size-cells = <1>;
 			compatible = "fsl,ifc-nand";
-			reg = <0x2 0x0 0x10000>;
+			reg = <0x1 0x0 0x10000>;
 		};
 	};
 
@@ -106,7 +107,17 @@
 		};
 
 		i2c@118100 {
+			ina220@40 {
+				compatible = "ti,ina220";
+				reg = <0x40>;
+				shunt-resistor = <1000>;
+			};
 
+			ina220@41 {
+				compatible = "ti,ina220";
+				reg = <0x41>;
+				shunt-resistor = <1000>;
+			};
 		};
 
 		fman0: fman@400000 {
diff --git a/arch/powerpc/boot/dts/fsl/t1024rdb.dts b/arch/powerpc/boot/dts/fsl/t1024rdb.dts
index e5fa912..3abd754 100644
--- a/arch/powerpc/boot/dts/fsl/t1024rdb.dts
+++ b/arch/powerpc/boot/dts/fsl/t1024rdb.dts
@@ -97,10 +97,22 @@
 			flash@0 {
 				#address-cells = <1>;
 				#size-cells = <1>;
-				compatible = "micron,n25q512a";
+				compatible = "micron,n25q512ax3";
 				reg = <0>;
 				spi-max-frequency = <10000000>; /* input clock */
 			};
+
+			slic@1 {
+				compatible = "maxim,ds26522";
+				reg = <1>;
+				spi-max-frequency = <2000000>;
+			};
+
+			slic@2 {
+				compatible = "maxim,ds26522";
+				reg = <2>;
+				spi-max-frequency = <2000000>;
+			};
 		};
 
 		i2c@118000 {
@@ -110,6 +122,13 @@
 				reg = <0x4c>;
 			};
 
+			/* INA220 Current Sense */
+			ina220@40 {
+				compatible = "ti,ina220";
+				reg = <0x40>;
+				shunt-resistor = <1000>;
+			};
+
 			eeprom@50 {
 				compatible = "at24,24c256";
 				reg = <0x50>;
-- 
2.8.1

