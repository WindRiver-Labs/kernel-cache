From 8f9aaf728a415b7eadb72fc44cbb1fc24a914eba Mon Sep 17 00:00:00 2001
From: Roy Pledge <Roy.Pledge@freescale.com>
Date: Mon, 15 Feb 2016 08:34:12 -0500
Subject: [PATCH 1011/1429] powerpc/mpc85xx: Add cell-index to QMan V1 device
 tree

cell-index is still needed by SDK QBMan drivers

Signed-off-by: Roy Pledge <Roy.Pledge@freescale.com>
[Original patch taken from QorIQ-SDK-V2.0-20160527-yocto]
Signed-off-by: Yanjiang Jin <yanjiang.jin@windriver.com>
---
 arch/powerpc/boot/dts/fsl/qoriq-qman1-portals.dtsi |   10 ++++++++++
 1 files changed, 10 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/boot/dts/fsl/qoriq-qman1-portals.dtsi b/arch/powerpc/boot/dts/fsl/qoriq-qman1-portals.dtsi
index 05d51ac..596ab78 100644
--- a/arch/powerpc/boot/dts/fsl/qoriq-qman1-portals.dtsi
+++ b/arch/powerpc/boot/dts/fsl/qoriq-qman1-portals.dtsi
@@ -38,42 +38,49 @@
 	compatible = "simple-bus";
 
 	qportal0: qman-portal@0 {
+	        cell-index = <0>;
 		compatible = "fsl,qman-portal";
 		reg = <0x0 0x4000>, <0x100000 0x1000>;
 		interrupts = <104 2 0 0>;
 		fsl,qman-channel-id = <0x0>;
 	};
 	qportal1: qman-portal@4000 {
+	        cell-index = <1>;
 		compatible = "fsl,qman-portal";
 		reg = <0x4000 0x4000>, <0x101000 0x1000>;
 		interrupts = <106 2 0 0>;
 		fsl,qman-channel-id = <1>;
 	};
 	qportal2: qman-portal@8000 {
+	        cell-index = <2>;
 		compatible = "fsl,qman-portal";
 		reg = <0x8000 0x4000>, <0x102000 0x1000>;
 		interrupts = <108 2 0 0>;
 		fsl,qman-channel-id = <2>;
 	};
 	qportal3: qman-portal@c000 {
+	        cell-index = <3>;
 		compatible = "fsl,qman-portal";
 		reg = <0xc000 0x4000>, <0x103000 0x1000>;
 		interrupts = <110 2 0 0>;
 		fsl,qman-channel-id = <3>;
 	};
 	qportal4: qman-portal@10000 {
+	        cell-index = <4>;
 		compatible = "fsl,qman-portal";
 		reg = <0x10000 0x4000>, <0x104000 0x1000>;
 		interrupts = <112 2 0 0>;
 		fsl,qman-channel-id = <4>;
 	};
 	qportal5: qman-portal@14000 {
+	        cell-index = <5>;
 		compatible = "fsl,qman-portal";
 		reg = <0x14000 0x4000>, <0x105000 0x1000>;
 		interrupts = <114 2 0 0>;
 		fsl,qman-channel-id = <5>;
 	};
 	qportal6: qman-portal@18000 {
+	        cell-index = <6>;
 		compatible = "fsl,qman-portal";
 		reg = <0x18000 0x4000>, <0x106000 0x1000>;
 		interrupts = <116 2 0 0>;
@@ -81,18 +88,21 @@
 	};
 
 	qportal7: qman-portal@1c000 {
+	        cell-index = <7>;
 		compatible = "fsl,qman-portal";
 		reg = <0x1c000 0x4000>, <0x107000 0x1000>;
 		interrupts = <118 2 0 0>;
 		fsl,qman-channel-id = <7>;
 	};
 	qportal8: qman-portal@20000 {
+	        cell-index = <8>;
 		compatible = "fsl,qman-portal";
 		reg = <0x20000 0x4000>, <0x108000 0x1000>;
 		interrupts = <120 2 0 0>;
 		fsl,qman-channel-id = <8>;
 	};
 	qportal9: qman-portal@24000 {
+	        cell-index = <9>;
 		compatible = "fsl,qman-portal";
 		reg = <0x24000 0x4000>, <0x109000 0x1000>;
 		interrupts = <122 2 0 0>;
-- 
1.7.5.4

