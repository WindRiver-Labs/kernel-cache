From 155e0adf8935689a562f4719f7e252ffae54ee06 Mon Sep 17 00:00:00 2001
From: Tiejun Chen <tiejun.chen@windriver.com>
Date: Thu, 17 May 2012 17:47:37 +0800
Subject: [PATCH 9/9] DPAA/fman: remove setting tbiaddr for fman-mdio

We can remove setting tbiaddr section completely. For FMAN Ethernet the TBI phy
address register doesn't exit in MII controller registers, and the fsl_pq_mdio
driver doesn't set the TBI phy address at all. So the probing of TBI phy address
for fman-mdio seems useless here. In fact the TBI phy address is set in the
dtsec mac driver.

Signed-off-by: Tiejun Chen <tiejun.chen@windriver.com>
---
 drivers/net/ethernet/freescale/fsl_pq_mdio.c |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

diff --git a/drivers/net/ethernet/freescale/fsl_pq_mdio.c b/drivers/net/ethernet/freescale/fsl_pq_mdio.c
index 346a058..08daf07 100644
--- a/drivers/net/ethernet/freescale/fsl_pq_mdio.c
+++ b/drivers/net/ethernet/freescale/fsl_pq_mdio.c
@@ -386,10 +386,7 @@ static int fsl_pq_mdio_probe(struct platform_device *ofdev)
 		}
 	} else if (of_device_is_compatible(np, "fsl,fman-mdio")) {
 #ifdef CONFIG_FSL_FMAN
-		tbiaddr = 5;
-#else
-		err = -ENODEV;
-		goto err_free_irqs;
+	/* Currently we don't do anything here. */
 #endif
 	} else {
 		err = -ENODEV;
-- 
1.7.9.7

