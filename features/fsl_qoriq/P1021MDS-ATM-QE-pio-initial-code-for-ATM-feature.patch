From 507b62aabf14560e50052a0a9e80e1255c4854f5 Mon Sep 17 00:00:00 2001
From: Wei Yang <Wei.Yang@windriver.com>
Date: Thu, 14 Mar 2013 10:21:40 +0800
Subject: [PATCH 06/21] P1021MDS/ATM: QE pio initial code for ATM feature

The patch add QE pio initial code for ATM feature.

Signed-off-by: Liu Yu <yu.liu@freescale.com>
[Extracted from P1021MDS_20101124_ltib.iso Just some minor context
mods in order to port to 3.4 kernel]
Signed-off-by: Wei Yang <Wei.Yang@windriver.com>
---
 arch/powerpc/platforms/85xx/mpc85xx_mds.c |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/platforms/85xx/mpc85xx_mds.c b/arch/powerpc/platforms/85xx/mpc85xx_mds.c
index fba4091..3a88c5b 100644
--- a/arch/powerpc/platforms/85xx/mpc85xx_mds.c
+++ b/arch/powerpc/platforms/85xx/mpc85xx_mds.c
@@ -258,12 +258,19 @@ static void __init mpc85xx_mds_qe_init(void)
 	np = of_find_node_by_name(NULL, "par_io");
 	if (np) {
 		struct device_node *ucc;
+#ifdef CONFIG_ATM_UCC
+		struct device_node *upc;
+#endif
 
 		par_io_init(np);
 		of_node_put(np);
 
 		for_each_node_by_name(ucc, "ucc")
 			par_io_of_config(ucc);
+#ifdef CONFIG_ATM_UCC
+		for_each_node_by_name(upc, "upc")
+			par_io_of_config(upc);
+#endif
 	}
 
 	mpc85xx_mds_reset_ucc_phys();
-- 
1.7.0

