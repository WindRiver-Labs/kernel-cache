From ffa2efc385dc380750a233e6ebd2c5b6298768c3 Mon Sep 17 00:00:00 2001
From: Cristian Sovaiala <cristian.sovaiala@freescale.com>
Date: Tue, 14 Feb 2012 13:01:53 +0200
Subject: [PATCH 095/128] dpaa_eth: Fixed return code of dpa_shared_tx

Always return NETDEV_TX_OK from dpa_shared_tx as expected by
the Linux stack.

Signed-off-by: Cristian Sovaiala <cristian.sovaiala@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 53d02b0..74f4b94 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -1226,7 +1226,7 @@ buf_acquire_failed:
 	/* We're done with the skb */
 	dev_kfree_skb(skb);
 
-	return err;
+	return NETDEV_TX_OK;
 }
 
 /* Equivalent to a memset(0), but works faster */
-- 
1.7.9.7

