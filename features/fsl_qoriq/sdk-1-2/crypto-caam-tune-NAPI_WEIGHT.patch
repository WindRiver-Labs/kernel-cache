From d751654814c51aadb50267109307a52cfb97e026 Mon Sep 17 00:00:00 2001
From: Kim Phillips <kim.phillips@freescale.com>
Date: Tue, 1 May 2012 17:06:05 -0500
Subject: [PATCH 057/128] crypto: caam - tune NAPI_WEIGHT

In a 64-byte zero-loss IPSec forwarding benchmark on two
p4080r2 8-way systems, the following measurements were made:

WEIGHT	fps
12      593495
24      611000
36      655283
48      701177
54      708080
57      713601
60      713601
62      713595
63      719122
64      713601
66      697036
72      694724

Assign the best value - 63 - which is assumed to be directly
linked to dpa_eth's DPA_NAPI_WEIGHT.

Signed-off-by: Kim Phillips <kim.phillips@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/crypto/caam/intern.h |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/crypto/caam/intern.h b/drivers/crypto/caam/intern.h
index 3eab972..1afac56 100644
--- a/drivers/crypto/caam/intern.h
+++ b/drivers/crypto/caam/intern.h
@@ -26,7 +26,7 @@
 #define JOBR_INTC_COUNT_THLD 0
 #endif
 
-#define CAAM_NAPI_WEIGHT	12
+#define CAAM_NAPI_WEIGHT	63
 
 /*
  * Storage for tracking each in-process entry moving across a ring
-- 
1.7.9.7

