From a14fb325d347d8a94e8c1f4e68fe659df6fb9a13 Mon Sep 17 00:00:00 2001
From: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Date: Wed, 14 Mar 2012 04:49:33 +0000
Subject: [PATCH 068/121] qman: sdk-1-2/part2: remove support for non-stashing
 configurations.

Linux no longer needs support for portals whose stashing LIODNs aren't
configured, as there is a native PAMU driver. This commit simplifies
driver interfaces and makes upcoming features easier to implement. In
any case, if a later need for a non-coherent driver mode comes up, it
could be reintroduced in an easier manner than the current code which
is being removed.

Signed-off-by: Geoff Thorpe <Geoff.Thorpe@freescale.com>
Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/staging/fsl_qbman/Kconfig |    1 +
 1 file changed, 1 insertion(+)

diff --git a/drivers/staging/fsl_qbman/Kconfig b/drivers/staging/fsl_qbman/Kconfig
index 8849edc..af3a776 100644
--- a/drivers/staging/fsl_qbman/Kconfig
+++ b/drivers/staging/fsl_qbman/Kconfig
@@ -107,6 +107,7 @@ if FSL_QMAN
 
 config FSL_QMAN_PORTAL
 	bool "Qman portal support"
+	depends on FSL_PAMU
 	default y
 	---help---
 	  Compiles support to detect and support Qman software corenet portals
-- 
1.7.9.7

