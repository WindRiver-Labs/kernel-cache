From 86396738329b32e2c4f4a4dcb329283f41ab434d Mon Sep 17 00:00:00 2001
From: Kumar Gala <galak@kernel.crashing.org>
Date: Thu, 27 Oct 2011 15:58:49 -0500
Subject: [PATCH 010/128] dpaa_eth: Add a few include that are need for
 building with new kernels

With newer kernel tree (v3.1 or greater) we have build issues because we
can't find the following:

	in_irq
	dma_unmap_single
	dma_map_single
	dma_set_mask
	DMA_BIT_MASK

This is due to the fact that we aren't include the headers that defines
these directly but getting them based on some other include file include
them.

Move to just include <linux/hardirq.h> and <linux/dma-mapping.h> to fix
this issue.

Signed-off-by: Kumar Gala <galak@kernel.crashing.org>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    1 +
 drivers/net/ethernet/freescale/dpa/dpaa_eth.h |    1 +
 2 files changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index da5ea81..07612d5 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -49,6 +49,7 @@
 #include <linux/if_ether.h>	/* ETH_P_IP and ETH_P_IPV6 */
 #include <linux/highmem.h>
 #include <linux/percpu.h>
+#include <linux/dma-mapping.h>
 #include <asm/smp.h>		/* get_hard_smp_processor_id() */
 #ifdef CONFIG_DEBUG_FS
 #include <linux/debugfs.h>
diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
index c0cffb2..e13866b 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.h
@@ -38,6 +38,7 @@
 #include <linux/list.h>		/* struct list_head */
 #include <linux/workqueue.h>	/* struct work_struct */
 #include <linux/skbuff.h>
+#include <linux/hardirq.h>
 #ifdef CONFIG_DEBUG_FS
 #include <linux/dcache.h>	/* struct dentry */
 #endif
-- 
1.7.9.7

