From e9dca40173503b53209f1a3f9f5c63c2fe70f51f Mon Sep 17 00:00:00 2001
From: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
Date: Mon, 5 Mar 2012 15:21:18 +0200
Subject: [PATCH 100/128] dpaa_eth: Fix use of uninitialized variable

Local variable was being used without initialization on an error path.
The ensuing compiler warning has gone unnoticed for quite a long time.

Signed-off-by: Bogdan Hamciuc <bogdan.hamciuc@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 drivers/net/ethernet/freescale/dpa/dpaa_eth.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
index 2df39c4..4c7ef08 100644
--- a/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
+++ b/drivers/net/ethernet/freescale/dpa/dpaa_eth.c
@@ -365,7 +365,8 @@ dpa_bp_alloc(struct dpa_bp *dpa_bp)
 		goto pdev_register_failed;
 	}
 
-	if (dma_set_mask(&pdev->dev, DMA_BIT_MASK(40)))
+	err = dma_set_mask(&pdev->dev, DMA_BIT_MASK(40));
+	if (err)
 		goto pdev_mask_failed;
 
 	dpa_bp->dev = &pdev->dev;
-- 
1.7.9.7

