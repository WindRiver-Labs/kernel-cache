From 961dc62fdfa793a06feb2340300151b1b5e9d263 Mon Sep 17 00:00:00 2001
From: Timur Tabi <timur@freescale.com>
Date: Wed, 4 Apr 2012 00:27:59 +0000
Subject: [PATCH 056/121] powerpc/85xx: create stub PAMU API functions

Some Freescale SOCs, like the P1023, have a DPAA but no PAMU.  On these
systems, fsl_pamu.c might not be compiled, but the drivers can still
try to call the PAMU APIS.  So add stub API functions to allow the code
to compile.

Signed-off-by: Timur Tabi <timur@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/sysdev/fsl_pamu.h |   17 +++++++++++++++++
 1 file changed, 17 insertions(+)

diff --git a/arch/powerpc/sysdev/fsl_pamu.h b/arch/powerpc/sysdev/fsl_pamu.h
index cc9fac1..b816812 100644
--- a/arch/powerpc/sysdev/fsl_pamu.h
+++ b/arch/powerpc/sysdev/fsl_pamu.h
@@ -32,10 +32,27 @@
 #ifndef FSL_PAMU_H
 #define FSL_PAMU_H
 
+#ifdef CONFIG_FSL_PAMU
+
 /* Set the stash target for a given LIODN */
 int pamu_set_stash_dest(struct device_node *node, unsigned int index,
 	unsigned int cpu, unsigned int cache_level);
 
 int pamu_get_liodn_count(struct device_node *node);
 
+#else
+
+static inline int pamu_set_stash_dest(struct device_node *node, unsigned int index,
+	unsigned int cpu, unsigned int cache_level)
+{
+	return -ENOSYS;
+}
+
+static inline int pamu_get_liodn_count(struct device_node *node)
+{
+	return 0;
+}
+
+#endif
+
 #endif
-- 
1.7.9.7

