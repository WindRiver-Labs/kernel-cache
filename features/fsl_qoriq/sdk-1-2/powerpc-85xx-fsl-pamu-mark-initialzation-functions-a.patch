From 3fc954b4452e05e9dc43296497d7792e76c32c12 Mon Sep 17 00:00:00 2001
From: Timur Tabi <timur@freescale.com>
Date: Wed, 7 Mar 2012 23:40:20 +0000
Subject: [PATCH 022/128] powerpc/85xx: fsl-pamu: mark initialzation functions
 as __init

These functions are called at init time, so they should be marked as such.

Signed-off-by: Timur Tabi <timur@freescale.com>
[Kevin: Original patch taken from FSL
QorIQ-SDK-V1.2-SOURCE-20120614-yocto.iso image]
Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/sysdev/fsl_pamu.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/powerpc/sysdev/fsl_pamu.c b/arch/powerpc/sysdev/fsl_pamu.c
index 9fe9c8f..0590a4e 100644
--- a/arch/powerpc/sysdev/fsl_pamu.c
+++ b/arch/powerpc/sysdev/fsl_pamu.c
@@ -447,7 +447,7 @@ found_cpu:
 }
 EXPORT_SYMBOL(pamu_set_stash_dest);
 
-static void setup_omt(struct ome *omt)
+static void __init setup_omt(struct ome *omt)
 {
 	struct ome *ome;
 
@@ -493,7 +493,7 @@ static void setup_omt(struct ome *omt)
 	ome->moe[IOE_WRITE_IDX] = EOE_VALID | EOE_WRITE;
 }
 
-static u32 get_stash_id(unsigned int stash_dest_hint,
+static u32 __init get_stash_id(unsigned int stash_dest_hint,
 	struct device_node *portal_dn)
 {
 	const u32 *prop;
@@ -567,7 +567,7 @@ static u32 get_stash_id(unsigned int stash_dest_hint,
 	return ~(u32)0;
 }
 
-static void setup_liodns(void)
+static void __init setup_liodns(void)
 {
 	int i, len;
 	struct ppaace *ppaace;
@@ -641,7 +641,7 @@ static void setup_liodns(void)
 	}
 }
 
-static int setup_one_pamu(void *pamu_reg_base, struct ome *omt)
+static int __init setup_one_pamu(void *pamu_reg_base, struct ome *omt)
 {
 	struct pamu_mmap_regs *pamu_regs = pamu_reg_base + PAMU_MMAP_REGS_BASE;
 	phys_addr_t phys;
-- 
1.7.9.7

