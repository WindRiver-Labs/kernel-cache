From 88f39d0cb354641f9e3d4f43f33546a03615eb05 Mon Sep 17 00:00:00 2001
From: Gregory Haskins <ghaskins@novell.com>
Date: Tue, 22 Sep 2009 23:26:29 -0400
Subject: [PATCH 052/119] vbus: add support for mapping SG entries

We need to convert SG addresses to pages in an efficient manner.  This
interface allows us to re-use the existing SG interface by specifying
addresses on input in the DMA fields.

Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 include/linux/vbus_device.h |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/include/linux/vbus_device.h b/include/linux/vbus_device.h
index 6f6c4f3..58ca003 100644
--- a/include/linux/vbus_device.h
+++ b/include/linux/vbus_device.h
@@ -105,6 +105,7 @@
 #include <linux/ioq.h>
 #include <linux/vbus.h>
 #include <linux/kref.h>
+#include <linux/scatterlist.h>
 
 struct vbus_device_interface;
 struct vbus_connection;
@@ -280,6 +281,9 @@ struct vbus_memctx_ops {
 				   const void *src,
 				   unsigned long len);
 	struct mm_struct *(*mm_get)(struct vbus_memctx *ctx);
+	unsigned long (*sg_map)(struct vbus_memctx *ctx,
+				struct scatterlist *sgl,
+				int nelems);
 	void (*release)(struct vbus_memctx *ctx);
 };
 
-- 
1.6.5.2

