From fe3f4c6a88828116e741bf312c51335d1748c1ff Mon Sep 17 00:00:00 2001
From: Lans Zhang <jia.zhang@windriver.com>
Date: Fri, 8 Feb 2013 11:56:51 +0800
Subject: [PATCH] dpdk: allow PROC_PAGE_MONITOR to be selected with grsec
 enabled

dpdk requires access to /proc/pid/pagemap which is only available
on kernels built with CONFIG_PROC_PAGE_MONITOR. This option is
forced off by GRSec as a security measure (obfuscation since
pagemap can be used to work around ASLR). This has been discussed
by others here:

http://forums.grsecurity.net/viewtopic.php?f=3&t=2196

Signed-off-by: Mark Asselstine <mark.asselstine@windriver.com>
[make minor change to adapt to 3.4 cgl kernel]
Signed-off-by: Lans Zhang <jia.zhang@windriver.com>
---
 fs/proc/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/fs/proc/Kconfig b/fs/proc/Kconfig
index 0bfc3ae..8d10895b 100644
--- a/fs/proc/Kconfig
+++ b/fs/proc/Kconfig
@@ -76,7 +76,7 @@ config PROC_SYSCTL
 
 config PROC_PAGE_MONITOR
  	default n
-	depends on PROC_FS && MMU && !GRKERNSEC
+	depends on PROC_FS && MMU
 	bool "Enable /proc page monitoring" if EXPERT
  	help
 	  Various /proc files exist to monitor process memory utilization:
-- 
1.7.8.110.g4cb5d

