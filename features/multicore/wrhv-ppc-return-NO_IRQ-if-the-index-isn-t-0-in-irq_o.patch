From 6901c8c1070556eba74e1e105cd2753d0b45f785 Mon Sep 17 00:00:00 2001
From: Kevin Hao <kexin.hao@windriver.com>
Date: Fri, 21 May 2010 13:21:02 +0800
Subject: [PATCH] wrhv/ppc: return NO_IRQ if the index isn't 0 in irq_of_parse_and_map

Currently function irq_of_parse_and_map only support for mapping the
first irq of interrupts property. So return NO_IRQ if the index is
not 0.

Signed-off-by: Kevin Hao <kexin.hao@windriver.com>
---
 arch/powerpc/kernel/vbi/wrhv.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/powerpc/kernel/vbi/wrhv.c b/arch/powerpc/kernel/vbi/wrhv.c
index 649873d..0aa7d71 100644
--- a/arch/powerpc/kernel/vbi/wrhv.c
+++ b/arch/powerpc/kernel/vbi/wrhv.c
@@ -606,6 +606,9 @@ unsigned int wrhv_map_irq_of_desc(char *irq_name, int32_t irq_dir)
 
 unsigned int wrhv_irq_of_parse_and_map(struct device_node *dev, int index)
 {
+	if (index)
+		return NO_IRQ;
+
 	return wrhv_map_irq_of_desc(dev->full_name, VB_INPUT_INT);
 }
 
-- 
1.6.5.2

