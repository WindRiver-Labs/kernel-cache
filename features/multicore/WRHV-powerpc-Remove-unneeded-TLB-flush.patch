From aeb25fdde0f30dd60c7599d7f5695b83cef00c8c Mon Sep 17 00:00:00 2001
From: Jeremy McNicoll <jeremy.mcnicoll@windriver.com>
Date: Tue, 18 May 2010 12:03:16 -0400
Subject: [PATCH 11/11] WRHV/powerpc: Remove unneeded TLB flush

There was no reason why we needed this TLB flush.
Removing it did not change the VB stability in any way.

Signed-off-by: Jeremy McNicoll <jeremy.mcnicoll@windriver.com>
---
 arch/powerpc/kernel/vbi/wrhv.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/arch/powerpc/kernel/vbi/wrhv.c b/arch/powerpc/kernel/vbi/wrhv.c
index ddc9535..3f29cc2 100644
--- a/arch/powerpc/kernel/vbi/wrhv.c
+++ b/arch/powerpc/kernel/vbi/wrhv.c
@@ -961,10 +961,6 @@ int wrhv_map_page(unsigned long va, phys_addr_t pa, int flags)
 						     __pgprot(flags)));
 	}
 
-#ifndef CONFIG_PPC85xx_VT_MODE
-	if (mem_init_done)
-		flush_tlb_page(NULL, va);
-#endif
 	return err;
 }
 
-- 
1.6.5.2

