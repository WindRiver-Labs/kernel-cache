From 55c44d67f3bd0f7d119c3ecfc990a391bffda60e Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Wed, 15 Dec 2010 20:58:34 -0500
Subject: [PATCH] vbi/wrhv: update smp_send_stop to stop_other_cpus

commit aff1594abe062d141d41d875a749150ee95b0a00 in the 2.6.34-stable
updates removes smp_send_stop and replaces it with
stop_other_cpus.

Updating the wrhv smp_ops to the new function pointer fixes compilation
and restores the functionality.

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/x86/kernel/vbi/wrhv.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/x86/kernel/vbi/wrhv.c b/arch/x86/kernel/vbi/wrhv.c
index a6c6a5e..d8bb339 100644
--- a/arch/x86/kernel/vbi/wrhv.c
+++ b/arch/x86/kernel/vbi/wrhv.c
@@ -1433,7 +1433,7 @@ static void wrhv_stop_me(void * t)
 	while (1);
 }
 
-static void wrhv_smp_send_stop(void)
+static void wrhv_smp_send_stop(int wait)
 {
 	smp_call_function(wrhv_stop_me, NULL, 0);
 	return;
@@ -1516,7 +1516,7 @@ static struct smp_ops wrhv_smp_ops __initdata = {
 
 	.smp_cpus_done = wrhv_smp_cpus_done,
 
-	.smp_send_stop = wrhv_smp_send_stop,
+	.stop_other_cpus = wrhv_smp_send_stop,
 	.smp_send_reschedule = wrhv_smp_send_reschedule,
 
 	.send_call_func_ipi = wrhv_smp_send_call_func_ipi,
-- 
1.6.5.2

