From 2d6ad6d186af9b119d1e6c38c156c6b8262bf548 Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Tue, 18 Oct 2011 11:21:08 +0800
Subject: [PATCH 2/2] cert vbi update

add some more vbiPdc ioctl's to align with hypervisor 2.0

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 include/vbi/compat.h |    4 ++++
 include/vbi/pdc.h    |   13 +++++++++++++
 2 files changed, 17 insertions(+), 0 deletions(-)

diff --git a/include/vbi/compat.h b/include/vbi/compat.h
index ac69bb0..0a9af28 100644
--- a/include/vbi/compat.h
+++ b/include/vbi/compat.h
@@ -258,4 +258,8 @@
 #define intrDeviceChannelBuffer	intr_device_channel_buffer
 #define vbiPdcInit		vbi_pdc_init               
 
+#ifdef CONFIG_WRHV_CERT
+#define PDC_BUF_SET		pdc_buf_set
+#endif
+
 #endif  /* _VBI_COMPAT_H */
diff --git a/include/vbi/pdc.h b/include/vbi/pdc.h
index a60d1e9..3b2f159 100644
--- a/include/vbi/pdc.h
+++ b/include/vbi/pdc.h
@@ -80,6 +80,14 @@ struct intr_device_channel_buffer
 	uint32_t intStatus;                 /* intStatus, or what intr */
 };
 
+#ifdef CONFIG_WRHV_CERT
+struct pdc_buf_set
+{
+	uint64_t gpaBufBase;
+	uint64_t gpaBufLen;
+};
+#endif
+
 #define SYS_PDC_REQUEST_OK		0
 #define SYS_PDC_REQUEST_FAILED		-1
 
@@ -88,6 +96,11 @@ struct intr_device_channel_buffer
 #define PDC_IOCTL_SIO_HW_OPTS_SET	3
 #define PDC_IOCTL_SIO_HUP		4
 #define PDC_IOCTL_SIO_OPEN		5
+#ifdef CONFIG_WRHV_CERT
+#define PDC_IOCTL_BUF_GPA_GET		10
+#define PDC_IOCTL_BUF_GPA_SET		11
+#define PDC_IOCTL_BUF_SIZE_GET		12
+#endif
 
 #define PDC_IOCTL_AMIO_CHANNEL_SET	20
 
-- 
1.7.0.4

