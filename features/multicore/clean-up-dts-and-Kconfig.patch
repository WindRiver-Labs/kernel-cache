From 1bd3235c795fbe6812046a7103d5c00413f65f12 Mon Sep 17 00:00:00 2001
From: Thomas Tai <thomas.tai@windriver.com>
Date: Tue, 13 Apr 2010 13:15:42 -0400
Subject: [PATCH 7/9] clean up dts and Kconfig

Changed dts to use new CCSBAR address because MILS hypervisor relocate
it to 0xe0000000. Changed compatible node to WRHV_MPC8641 to avoid
overlapping name. Also added chosen node for booting up in hypervisor.
Otherwise, dts file is identical to mpc8641_hpcn.dts

Remove DEFAULT_UIMAGE options since it is not necessary.

Signed-off-by: Thomas Tai <thomas.tai@windriver.com>
---
 arch/powerpc/boot/dts/wrhv_mpc8641d.dts |    5 ++---
 arch/powerpc/platforms/86xx/Kconfig     |    1 -
 2 files changed, 2 insertions(+), 4 deletions(-)

diff --git a/arch/powerpc/boot/dts/wrhv_mpc8641d.dts b/arch/powerpc/boot/dts/wrhv_mpc8641d.dts
index fecd1df..80bf932 100644
--- a/arch/powerpc/boot/dts/wrhv_mpc8641d.dts
+++ b/arch/powerpc/boot/dts/wrhv_mpc8641d.dts
@@ -1,11 +1,10 @@
 /*
  * MPC8641 Device Tree Source for Linux guest.
  *
+ * Based on the native dts mpc8641_hpcn.dts file.
  *
  * Copyright 2007 Wind River Systems Inc.
  *
- * Paul Gortmaker (see MAINTAINERS for contact information)
- *
  * This program is free software; you can redistribute  it and/or modify it
  * under  the terms of  the GNU General  Public License as published by the
  * Free Software Foundation;  either version 2 of the  License, or (at your
@@ -16,7 +15,7 @@
 
 / {
 	model = "MPC8641HPCN";
-	compatible = "fsl,mpc8641hpcn";
+	compatible = "WRHV_MPC8641";
 	#address-cells = <1>;
 	#size-cells = <1>;
 
diff --git a/arch/powerpc/platforms/86xx/Kconfig b/arch/powerpc/platforms/86xx/Kconfig
index 0678194..0b175a9 100644
--- a/arch/powerpc/platforms/86xx/Kconfig
+++ b/arch/powerpc/platforms/86xx/Kconfig
@@ -34,7 +34,6 @@ config MPC8610_HPCD
 config WRHV_8641D
 	bool "MPC8641D Guest for MILS HV"
 	depends on WRHV_MILS
-	select DEFAULT_UIMAGE
 	help
 	 This option enables support for the 8641d Hypervisor enabled board.
 endif
-- 
1.6.5.2

