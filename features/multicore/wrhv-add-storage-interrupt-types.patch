From 1821bd9e2d10474bae49f9a10d03d29cdb2744b4 Mon Sep 17 00:00:00 2001
From: Li Wang <li.wang@windriver.com>
Date: Tue, 8 Oct 2013 10:02:13 +0800
Subject: [PATCH] wrhv: add storage interrupt types

interrupt name conventions changed on hypervisor / xml generator side,
we need do change on GOS side accordingly.

Signed-off-by: Li Wang <li.wang@windriver.com>
---
 kernel/vbi/wrhv.c |    7 ++++++-
 1 files changed, 6 insertions(+), 1 deletions(-)

diff --git a/kernel/vbi/wrhv.c b/kernel/vbi/wrhv.c
index b1b2211..a806d51 100644
--- a/kernel/vbi/wrhv.c
+++ b/kernel/vbi/wrhv.c
@@ -419,7 +419,12 @@ static void __devinit pci_fixup_wrhv(struct pci_dev *dev)
 		break;
 
 	case PCI_BASE_CLASS_STORAGE:
-		devclass = "IDE";
+		if ((dev->class >> 8) == PCI_CLASS_STORAGE_IDE)
+			devclass = "IDE";
+		else if ((dev->class >> 8) == PCI_CLASS_STORAGE_SATA)
+			devclass = "SATA";
+		else if ((dev->class >> 8) == PCI_CLASS_STORAGE_RAID)
+			devclass = "RAID";
 		break;
 
 	case PCI_BASE_CLASS_DISPLAY:
-- 
1.7.0

