From 7c1a4fc1ba69c0fea32805b50082270d7a1343a6 Mon Sep 17 00:00:00 2001
From: Jim Somerville <Jim.Somerville@windriver.com>
Date: Mon, 22 Nov 2010 13:13:15 -0800
Subject: [PATCH] X86: Enable SMBus (i2c) by mapping the interrupt

This update allows the interrupt name lookup to succeed on SMBus.

Signed-off-by: Jim Somerville <Jim.Somerville@windriver.com>
---
 arch/x86/kernel/vbi/wrhv.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/x86/kernel/vbi/wrhv.c b/arch/x86/kernel/vbi/wrhv.c
index 95a2ae9..a6c6a5e 100644
--- a/arch/x86/kernel/vbi/wrhv.c
+++ b/arch/x86/kernel/vbi/wrhv.c
@@ -499,6 +499,10 @@ static void __devinit pci_fixup_wrhv(struct pci_dev *dev)
 			devclass = "USB";
 			break;
 		}
+		if ((dev->class >> 8) == PCI_CLASS_SERIAL_SMBUS) {
+			devclass = "SMBus";
+			break;
+		}
 
 	case PCI_BASE_CLASS_SYSTEM:
 		/* Examine more bits of the class to see if the
-- 
1.6.5.2

