From a09c8cbd4ffbcda4b33621790e146430e9ba3601 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Fri, 15 Apr 2011 15:03:03 -0400
Subject: [PATCH] MIPS: fix compile failure for non-WRHV

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/arch/mips/mm/fault.c b/arch/mips/mm/fault.c
index 4390f3e..55d7a02 100644
--- a/arch/mips/mm/fault.c
+++ b/arch/mips/mm/fault.c
@@ -286,7 +286,9 @@ vmalloc_fault:
 		return;
 	}
 #endif
+#ifdef CONFIG_WRHV
 wrhv_vmalloc_fault:
+#endif
 	{
 		pgd_t *kpd, *upd, *pgd;
 		pgd_t *v_start, *v_end;
-- 
1.7.0

