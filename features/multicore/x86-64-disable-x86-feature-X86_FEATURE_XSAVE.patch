From ceae9c4436c623cab464410332875ff343987627 Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 18 Oct 2010 04:46:51 -0700
Subject: [PATCH 2/2] x86-64: disable x86 feature X86_FEATURE_XSAVE

Hypervisor doesn't support X86_FEATURE_XSAVE, and x86-64
guest os will panic when run on Supermicro, so use kernel
cmd option noxsave to disable it.

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 arch/x86/kernel/vbi/wrhv.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/x86/kernel/vbi/wrhv.c b/arch/x86/kernel/vbi/wrhv.c
index 1fca229..10be2a0 100644
--- a/arch/x86/kernel/vbi/wrhv.c
+++ b/arch/x86/kernel/vbi/wrhv.c
@@ -633,7 +633,7 @@ void __init wrhv_boot_config(void)
 		wr_config->bootLine);
 #else
 	snprintf(boot_command_line, COMMAND_LINE_SIZE,
-		"retain_initrd pci=wrhv idle=wrhv serialnumber nolapic nomce nosep nogbpages noexec=off novtlbopt %s",
+		"retain_initrd pci=wrhv idle=wrhv serialnumber nolapic noxsave nomce nosep nogbpages noexec=off novtlbopt %s",
 		wr_config->bootLine);
 #endif
 
-- 
1.6.5.2

