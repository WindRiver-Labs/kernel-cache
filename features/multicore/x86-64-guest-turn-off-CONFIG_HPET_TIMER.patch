From e81fd2d0f6ad818ed73eb79a3c20636445c33d3e Mon Sep 17 00:00:00 2001
From: Weiwei Wang <weiwei.wang@windriver.com>
Date: Mon, 18 Oct 2010 04:46:50 -0700
Subject: [PATCH 1/2] x86-64 guest: turn off CONFIG_HPET_TIMER

When set up IDE device in xmls, x86-64 guest os will hang
at boot time. That is because function ich_force_enable_hpet()
is called but no related resources are assigned to the guest.
So turn off CONFIG_HPET_TIMER to make x86-64 guest os boots well.

Signed-off-by: Weiwei Wang <weiwei.wang@windriver.com>
---
 arch/x86/Kconfig |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/x86/Kconfig b/arch/x86/Kconfig
index 62db2cb..7fce01c 100644
--- a/arch/x86/Kconfig
+++ b/arch/x86/Kconfig
@@ -628,7 +628,7 @@ config X86_CYCLONE_TIMER
 source "arch/x86/Kconfig.cpu"
 
 config HPET_TIMER
-	def_bool X86_64
+	def_bool X86_64 if !WRHV
 	prompt "HPET Timer Support" if X86_32
 	---help---
 	  Use the IA-PC HPET (High Precision Event Timer) to manage
-- 
1.6.5.2

