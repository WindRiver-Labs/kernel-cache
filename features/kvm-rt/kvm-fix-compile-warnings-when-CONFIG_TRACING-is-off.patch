From 192e1cff43180fd2e0775185314a6e9edf7e5aa9 Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Tue, 16 Apr 2013 15:08:08 -0400
Subject: [PATCH] kvm: fix compile warnings when CONFIG_TRACING is off
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Fixes:

arch/x86/kvm/vmx.c: In function ‘handle_io’:
arch/x86/kvm/vmx.c:4433:13: warning: unused variable ‘host_guest_delta’ [-Wunused-variable]
arch/x86/kvm/vmx.c:4432:13: warning: unused variable ‘host_time’ [-Wunused-variable]
arch/x86/kvm/vmx.c:4431:13: warning: unused variable ‘guest_time’ [-Wunused-variable]
arch/x86/kvm/vmx.c:4430:14: warning: unused variable ‘got_2nd_part’ [-Wunused-variable]

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/arch/x86/kvm/vmx.c b/arch/x86/kvm/vmx.c
index 3eb2036..b0cb1ca 100644
--- a/arch/x86/kvm/vmx.c
+++ b/arch/x86/kvm/vmx.c
@@ -4427,10 +4427,12 @@ static int handle_io(struct kvm_vcpu *vcpu)
 	int size, in, string;
 	unsigned port;
 
+#ifdef CONFIG_TRACING
 	static bool got_2nd_part = true;
 	static u64 guest_time;
 	static u64 host_time;
 	extern s64 host_guest_delta;
+#endif
 
 	exit_qualification = vmcs_readl(EXIT_QUALIFICATION);
 	string = (exit_qualification & 16) != 0;
-- 
1.8.1.2

