From 8d70334ffb1f0a3acf30924b51653c628247e93d Mon Sep 17 00:00:00 2001
From: Paul Gortmaker <paul.gortmaker@windriver.com>
Date: Fri, 18 Oct 2013 10:17:09 -0400
Subject: [PATCH] lapic: change default value of irqsafe to zero

Previous testing indicated that it might impact high res timer
support in guests, so choose the safer off-by-default value
for now.

Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/arch/x86/kvm/lapic.c b/arch/x86/kvm/lapic.c
index 7259d2d..478d364 100644
--- a/arch/x86/kvm/lapic.c
+++ b/arch/x86/kvm/lapic.c
@@ -74,7 +74,7 @@
 static unsigned int min_timer_period_us = 500;
 module_param(min_timer_period_us, uint, S_IRUGO | S_IWUSR);
 
-static int lapic_irqsafe = 1;
+static int lapic_irqsafe = 0;
 module_param(lapic_irqsafe, int, S_IRUGO | S_IWUSR);
 MODULE_PARM_DESC(lapic_irqsafe, "Set lapic hrtimer callback in irq mode");
 
-- 
1.8.4

