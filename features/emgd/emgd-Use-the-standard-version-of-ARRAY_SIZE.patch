From e937ba18e657ae60f5e567d6638518e54b1c1523 Mon Sep 17 00:00:00 2001
From: Donn Seeley <donn.seeley@windriver.com>
Date: Tue, 12 Jun 2012 10:58:43 -0600
Subject: [PATCH 16/19] emgd: Use the standard version of ARRAY_SIZE().

Some EMGD source files defined their own conflicting version of
ARRAY_SIZE().

Signed-off-by: Donn Seeley <donn.seeley@windriver.com>
---
 drivers/gpu/drm/emgd/emgd/pal/ch7036/lvds/lvds.c |    8 +++-----
 drivers/gpu/drm/emgd/emgd/pal/lvds/lvds.c        |    5 +----
 drivers/gpu/drm/emgd/emgd/pal/sdvo/sdvo_port.h   |    7 ++-----
 3 files changed, 6 insertions(+), 14 deletions(-)

diff --git a/drivers/gpu/drm/emgd/emgd/pal/ch7036/lvds/lvds.c b/drivers/gpu/drm/emgd/emgd/pal/ch7036/lvds/lvds.c
index 18d1b23..35c6790 100644
--- a/drivers/gpu/drm/emgd/emgd/pal/ch7036/lvds/lvds.c
+++ b/drivers/gpu/drm/emgd/emgd/pal/ch7036/lvds/lvds.c
@@ -35,6 +35,9 @@
 #pragma optimize ("",off)
 #endif
 
+#include <linux/kernel.h>
+#include <linux/bug.h>
+
 #include <config.h>
 #include <igd_pd.h>
 #include <pd.h>
@@ -68,11 +71,6 @@
  * the Display Clock Frequency to the order of Mhz */
 #define PWM_FREQ_CALC_CONSTANT_2        0x000F4240
 
-
-#ifndef ARRAY_SIZE
-#define ARRAY_SIZE(p) (sizeof(p)/sizeof((p)[0]))
-#endif
-
 static pd_version_t  internal_lvds_version = {11, 0, 0, 0}; /* driver version */
 static unsigned long internal_lvds_dab_list[] = {
 	PD_DAB_LIST_END
diff --git a/drivers/gpu/drm/emgd/emgd/pal/lvds/lvds.c b/drivers/gpu/drm/emgd/emgd/pal/lvds/lvds.c
index b67a992..69e7eff 100644
--- a/drivers/gpu/drm/emgd/emgd/pal/lvds/lvds.c
+++ b/drivers/gpu/drm/emgd/emgd/pal/lvds/lvds.c
@@ -31,6 +31,7 @@
  *-----------------------------------------------------------------------------
  */
 #include <linux/kernel.h>
+#include <linux/bug.h>
 
 #include <config.h>
 #include <igd_pd.h>
@@ -55,10 +56,6 @@
 #define PWM_FREQ_CALC_CONSTANT_2        0x000F4240
 
 
-#ifndef ARRAY_SIZE
-#define ARRAY_SIZE(p) (sizeof(p)/sizeof((p)[0]))
-#endif
-
 static pd_version_t  lvds_version = {11, 0, 0, 0}; /* driver version */
 static unsigned long lvds_dab_list[] = {
 	PD_DAB_LIST_END
diff --git a/drivers/gpu/drm/emgd/emgd/pal/sdvo/sdvo_port.h b/drivers/gpu/drm/emgd/emgd/pal/sdvo/sdvo_port.h
index b06fc73b..1e9bae4 100644
--- a/drivers/gpu/drm/emgd/emgd/pal/sdvo/sdvo_port.h
+++ b/drivers/gpu/drm/emgd/emgd/pal/sdvo/sdvo_port.h
@@ -32,6 +32,8 @@
 #ifndef _SDVO_PORT_H_
 #define _SDVO_PORT_H_
 
+#include <linux/kernel.h>
+#include <linux/bug.h>
 #include <config.h>
 #include <igd_pd.h>
 #include <pd.h>
@@ -39,11 +41,6 @@
 
 /* #define DEBUG 0 */
 
-/*  ............................................................................ */
-#ifndef ARRAY_SIZE
-#define ARRAY_SIZE(p) (sizeof(p)/sizeof((p)[0]))
-#endif
-
 #include "sdvo_intf.h"
 #include "sdvo_attr.h"
 #include "sdvo_hdmi.h"
-- 
1.7.9.7

