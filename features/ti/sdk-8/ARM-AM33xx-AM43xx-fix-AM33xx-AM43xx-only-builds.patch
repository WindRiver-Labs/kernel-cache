From a1568491594caf20cbe00614e2bbea6bc4f7ee26 Mon Sep 17 00:00:00 2001
From: Tero Kristo <t-kristo@ti.com>
Date: Fri, 8 Aug 2014 15:32:59 +0300
Subject: [PATCH 0954/1587] ARM: AM33xx/AM43xx: fix AM33xx/AM43xx only builds

Currently AM33xx or AM43xx only build will fail due to missing
references to the low-level PM routines. Fixed by adding a couple of
pre-processor #ifdefs.

Signed-off-by: Tero Kristo <t-kristo@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 arch/arm/mach-omap2/pm33xx.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/pm33xx.c b/arch/arm/mach-omap2/pm33xx.c
index d8cf143..a13c517 100644
--- a/arch/arm/mach-omap2/pm33xx.c
+++ b/arch/arm/mach-omap2/pm33xx.c
@@ -313,17 +313,21 @@ static struct wkup_m3_ops am33xx_wkup_m3_ops = {
 /*
  * Push the minimal suspend-resume code to SRAM
  */
+#ifdef CONFIG_SOC_AM33XX
 void am33xx_push_sram_idle(void)
 {
 	am33xx_do_wfi_sram = (void *)omap_sram_push
 					(am33xx_do_wfi, am33xx_do_wfi_sz);
 }
+#endif
 
+#ifdef CONFIG_SOC_AM43XX
 void am43xx_push_sram_idle(void)
 {
 	am33xx_do_wfi_sram = (void *)omap_sram_push
 					(am43xx_do_wfi, am43xx_do_wfi_sz);
 }
+#endif
 
 static int __init am33xx_map_emif(void)
 {
-- 
1.7.5.4

