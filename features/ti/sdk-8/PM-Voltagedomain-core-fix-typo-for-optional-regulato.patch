From 8304725475b19590b2ffead444d0736f48efa1be Mon Sep 17 00:00:00 2001
From: Nishanth Menon <nm@ti.com>
Date: Thu, 26 Jun 2014 11:07:26 -0500
Subject: [PATCH 0651/1587] PM / Voltagedomain: core: fix typo for optional
 regulator

When we have optional regulator, we are supposed to return 0 but skip
regulator handling and notifier registration. This is handled by
skip_reg variable. So, set it to true when we have to skip a regulator
handling.

Signed-off-by: Nishanth Menon <nm@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 drivers/power/voltdm/core.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/power/voltdm/core.c b/drivers/power/voltdm/core.c
index 8bc8a8d..332d02b 100644
--- a/drivers/power/voltdm/core.c
+++ b/drivers/power/voltdm/core.c
@@ -184,7 +184,7 @@ static int voltdm_get(struct voltdm_scale_data *vsd, struct device_node *np,
 		/* Regulator is not mandatory */
 		if (ret != -EPROBE_DEFER) {
 			ret = 0;
-			*skip_reg = false;
+			*skip_reg = true;
 			dev_dbg(dev, "%s: Failed to get %s regulator:%d\n",
 				__func__, supply, ret);
 		}
-- 
1.7.5.4

