From 1c7440562151aae8cdf4e284590c8942df04af04 Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Mon, 28 Jul 2014 22:35:35 -0500
Subject: [PATCH 0884/1587] ARM: OMAP2+: AM43XX: Remove flags from gpmc hwmod

Without initial soft reset of GPMC during hwmod setup the CLKCTRL
for GPMC will not transition to idle state which prevents PER_PD
transition so this patch allows it.

Also remove the HWMOD_INIT_NO_IDLE flags as it should be handled by
a dt property, which will be added in a later patch.

Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 .../mach-omap2/omap_hwmod_33xx_43xx_ipblock_data.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_33xx_43xx_ipblock_data.c b/arch/arm/mach-omap2/omap_hwmod_33xx_43xx_ipblock_data.c
index 4c12824..b33c0d5 100644
--- a/arch/arm/mach-omap2/omap_hwmod_33xx_43xx_ipblock_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_33xx_43xx_ipblock_data.c
@@ -681,7 +681,6 @@ struct omap_hwmod am33xx_gpmc_hwmod = {
 	.name		= "gpmc",
 	.class		= &am33xx_gpmc_hwmod_class,
 	.clkdm_name	= "l3s_clkdm",
-	.flags		= (HWMOD_INIT_NO_IDLE | HWMOD_INIT_NO_RESET),
 	.main_clk	= "l3s_gclk",
 	.prcm		= {
 		.omap4	= {
-- 
1.7.5.4

