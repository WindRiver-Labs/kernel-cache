From 81130cd478f19016388046a05354ce667db38823 Mon Sep 17 00:00:00 2001
From: Tero Kristo <t-kristo@ti.com>
Date: Thu, 11 Sep 2014 17:04:50 +0300
Subject: [PATCH 1179/1587] ARM: AMx3xx: control: fix compile flags for amx3xx
 context save/restore

These are incorrectly using OMAP3 variant, which causes build errors with
AMx3xx only builds.

Signed-off-by: Tero Kristo <t-kristo@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 arch/arm/mach-omap2/control.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/control.c b/arch/arm/mach-omap2/control.c
index 6cea7c4..5de5e7c 100644
--- a/arch/arm/mach-omap2/control.c
+++ b/arch/arm/mach-omap2/control.c
@@ -609,6 +609,10 @@ void omap3_ctrl_set_iva_bootmode_idle(void)
 			 OMAP343X_CONTROL_IVA2_BOOTMOD);
 }
 
+#endif /* CONFIG_ARCH_OMAP3 && CONFIG_PM */
+
+#if (defined(CONFIG_SOC_AM33XX) || defined(CONFIG_SOC_AM43XX)) && \
+	defined(CONFIG_PM)
 static unsigned long am33xx_control_reg_offsets[] = {
 	AM33XX_CONTROL_SYSCONFIG_OFFSET,
 	AM33XX_CONTROL_STATUS_OFFSET,
-- 
1.7.5.4

