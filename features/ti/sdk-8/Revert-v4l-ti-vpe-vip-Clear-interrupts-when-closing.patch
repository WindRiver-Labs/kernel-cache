From 5a212d1eff7907e64cd901516c1daedefa1c7d5e Mon Sep 17 00:00:00 2001
From: Jyri Sarha <jsarha@ti.com>
Date: Fri, 5 Dec 2014 15:59:51 +0200
Subject: [PATCH 1475/1587] Revert "v4l: ti-vpe: vip: Clear interrupts when
 closing"

This reverts commit 38fd7b0835136e71ad1cc23616450cf5a37ff9ac.

Signed-off-by: Jyri Sarha <jsarha@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 drivers/media/platform/ti-vpe/vip.c |   11 -----------
 1 files changed, 0 insertions(+), 11 deletions(-)

diff --git a/drivers/media/platform/ti-vpe/vip.c b/drivers/media/platform/ti-vpe/vip.c
index 110ccc7..e966d2e 100644
--- a/drivers/media/platform/ti-vpe/vip.c
+++ b/drivers/media/platform/ti-vpe/vip.c
@@ -1079,16 +1079,6 @@ static void disable_irqs(struct vip_dev *dev, int irq_num)
 		irq_num, list_num, false);
 }
 
-static void clear_irqs(struct vip_dev *dev, int irq_num)
-{
-	u32 reg_addr = VIP_INT0_STATUS0_CLR +
-			VIP_INTC_INTX_OFFSET * irq_num;
-
-	write_sreg(dev->shared, reg_addr, 0xffffffff);
-
-	vpdma_clear_list_stat(dev->shared->vpdma, irq_num);
-}
-
 static void populate_desc_list(struct vip_stream *stream)
 {
 	struct vip_port *port = stream->port;
@@ -1905,7 +1895,6 @@ static int vip_stop_streaming(struct vb2_queue *vq)
 	struct vip_buffer *buf;
 
 	disable_irqs(dev, dev->slice_id);
-	clear_irqs(dev, dev->slice_id);
 
 	/* release all active buffers */
 	while (!list_empty(&dev->vip_bufs)) {
-- 
1.7.5.4

