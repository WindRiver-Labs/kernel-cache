From 37fe47997b5b6da7d808adb1e72a32f824561c5c Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Wed, 15 Apr 2015 13:47:14 +0800
Subject: [PATCH 1587/1587] ARM: dts: AM335x: enable dcan0/1 for am335x-evm
 board

In the default dts of ti SDK8, dcan0/1 are disabled, here enable
them.

Signed-off-by: czou <cao.zou@windriver.com>
---
 arch/arm/boot/dts/am335x-evm.dts |   15 ++++++++++++++-
 1 files changed, 14 insertions(+), 1 deletions(-)

diff --git a/arch/arm/boot/dts/am335x-evm.dts b/arch/arm/boot/dts/am335x-evm.dts
index 0f8dd0f9f..015cd56 100644
--- a/arch/arm/boot/dts/am335x-evm.dts
+++ b/arch/arm/boot/dts/am335x-evm.dts
@@ -496,6 +496,13 @@
 		>;
 	};
 
+	dcan0_pins_default: dcan0_default_pins {
+		pinctrl-single,pins = <
+			0x178 (PIN_OUTPUT_PULLDOWN | MUX_MODE2) /* uart1_ctsn.d_can0_tx */
+			0x17c (PIN_INPUT_PULLUP | MUX_MODE2) /* uart1_rtsn.d_can0_rx */
+		>;
+	};
+
 	dcan1_pins_default: dcan1_pins_default {
 		pinctrl-single,pins = <
 			0x168 (PIN_OUTPUT | MUX_MODE2) /* uart0_ctsn.d_can1_tx */
@@ -913,8 +920,14 @@
 	ti,scale-data-fw = "am335x-evm-scale-data.bin";
 };
 
+&dcan0 {
+	pinctrl-names = "ok";
+	pinctrl-0 = <&dcan0_pins_default>;
+	status = "ok";
+};
+
 &dcan1 {
-	status = "disabled";	/* Enable only if Profile 1 is selected */
+	status = "ok";	/* Enable only if Profile 1 is selected */
 	pinctrl-names = "default";
 	pinctrl-0 = <&dcan1_pins_default>;
 };
-- 
1.7.5.4

