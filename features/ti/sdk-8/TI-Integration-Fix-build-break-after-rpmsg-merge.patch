From 9b84eeed53d773b279f45ec2e33d69d523d72970 Mon Sep 17 00:00:00 2001
From: Dan Murphy <DMurphy@ti.com>
Date: Thu, 4 Sep 2014 11:25:43 -0500
Subject: [PATCH 1168/1587] TI-Integration: Fix build break after rpmsg merge
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

There was an API change that occured in the power
management domain branch that was not available on the
rpmsg domain branch.  This caused the following error

drivers/remoteproc/wkup_m3_rproc.c: In function ‘wkup_m3_copy_aux_data’:
drivers/remoteproc/wkup_m3_rproc.c:240:12: error: too few arguments to function ‘rproc_da_to_va’
In file included from drivers/remoteproc/wkup_m3_rproc.c:34:0:
drivers/remoteproc/remoteproc_internal.h:71:7: note: declared here

Therefore per the rpmsg maintainer there needed to be 0 passed in as the
last argument.  This patch makes that change

Reported-by: Suman Anna <s-anna@ti.com>
Signed-off-by: Dan Murphy <DMurphy@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 drivers/remoteproc/wkup_m3_rproc.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/remoteproc/wkup_m3_rproc.c b/drivers/remoteproc/wkup_m3_rproc.c
index 8cf3999..1d6aea1 100644
--- a/drivers/remoteproc/wkup_m3_rproc.c
+++ b/drivers/remoteproc/wkup_m3_rproc.c
@@ -237,7 +237,7 @@ unsigned long wkup_m3_copy_aux_data(const void *data, int sz)
 	aux_data_dev_addr = WKUP_M3_DMEM_START + WKUP_M3_AUXDATA_OFFSET;
 	aux_data_addr = rproc_da_to_va(m3_rproc_static->rproc,
 				       aux_data_dev_addr,
-				       WKUP_M3_AUXDATA_SIZE);
+				       WKUP_M3_AUXDATA_SIZE, 0);
 	memcpy(aux_data_addr, data, sz);
 
 	return WKUP_M3_AUXDATA_OFFSET;
-- 
1.7.5.4

