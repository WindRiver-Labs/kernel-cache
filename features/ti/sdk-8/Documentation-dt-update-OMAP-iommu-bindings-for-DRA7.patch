From 67849e055f08844657d8753519e8d404db757fd5 Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Wed, 20 Aug 2014 11:33:05 -0500
Subject: [PATCH 1002/1587] Documentation: dt: update OMAP iommu bindings for
 DRA7 DSPs

The OMAP IOMMU bindings is updated to account for the additional register
space needed for the DSP IOMMU instances on DRA7xx SoCs. These MMUs need
additional registers to be programmed in the DSP_SYSTEM sub-module.

An example of the DRA7 DSP IOMMU nodes is also added to the document for
clarity.

Signed-off-by: Suman Anna <s-anna@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 .../devicetree/bindings/iommu/ti,omap-iommu.txt    |   26 +++++++++++++++++++-
 1 files changed, 25 insertions(+), 1 deletions(-)

diff --git a/Documentation/devicetree/bindings/iommu/ti,omap-iommu.txt b/Documentation/devicetree/bindings/iommu/ti,omap-iommu.txt
index 42531dc..eb66dda 100644
--- a/Documentation/devicetree/bindings/iommu/ti,omap-iommu.txt
+++ b/Documentation/devicetree/bindings/iommu/ti,omap-iommu.txt
@@ -6,7 +6,9 @@ Required properties:
 		"ti,omap4-iommu" for OMAP4/OMAP5 IOMMU instances
 		"ti,dra7-iommu" for DRA7xx IOMMU instances
 - ti,hwmods  : Name of the hwmod associated with the IOMMU instance
-- reg        : Address space for the configuration registers
+- reg        : Address space for the configuration registers for all
+               MMUs. This should also contain a DSP_SYSTEM register
+               space for DSP IOMMU instances on DRA7xx SoCs
 - interrupts : Interrupt specifier for the IOMMU instance
 
 Optional properties:
@@ -14,6 +16,11 @@ Optional properties:
                     Should be either 8 or 32 (default: 32)
 - ti,iommu-bus-err-back : Indicates the IOMMU instance supports throwing
 		          back a bus error response on MMU faults.
+- reg-names : Names for the address spaces as specified in 'reg' property.
+              Should contain only the following strings,
+		"mmu_cfg" and/or "dsp_system"
+              This property is mandatory for DSP IOMMU instances on DRA7xx
+              SoCs, and is optional on other SoCs.
 
 Example:
 	/* OMAP3 ISP MMU */
@@ -24,3 +31,20 @@ Example:
 		ti,hwmods = "mmu_isp";
 		ti,#tlb-entries = <8>;
 	};
+
+	/* DRA74x DSP2 MMUs */
+	mmu0_dsp2: mmu@41501000 {
+		compatible = "ti,dra7-iommu";
+		reg = <0x41501000 0x100>, <0x41500000 0x100>;
+		reg-names = "mmu_cfg", "dsp_system";
+		interrupts = <GIC_SPI 146 IRQ_TYPE_LEVEL_HIGH>;
+		ti,hwmods = "mmu0_dsp2";
+	};
+
+	mmu1_dsp2: mmu@41502000 {
+		compatible = "ti,dra7-iommu";
+		reg = <0x41502000 0x100>, <0x41500000 0x100>;
+		reg-names = "mmu_cfg", "dsp_system";
+		interrupts = <GIC_SPI 147 IRQ_TYPE_LEVEL_HIGH>;
+		ti,hwmods = "mmu1_dsp2";
+	};
-- 
1.7.5.4

