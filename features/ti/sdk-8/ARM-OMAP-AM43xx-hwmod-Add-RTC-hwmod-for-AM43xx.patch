From c617eafba45cd464546c77e532e09cd08e45d350 Mon Sep 17 00:00:00 2001
From: Dave Gerlach <d-gerlach@ti.com>
Date: Mon, 28 Jul 2014 22:35:25 -0500
Subject: [PATCH 0876/1587] ARM: OMAP: AM43xx hwmod: Add RTC hwmod for AM43xx

RTC hwmod is needed for proper operation of PM features like
rtcwake, rtc-only mode, and clockdomain control, so reuse the
am33xx rtc hwmod.

Signed-off-by: Dave Gerlach <d-gerlach@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 arch/arm/mach-omap2/omap_hwmod_43xx_data.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-omap2/omap_hwmod_43xx_data.c b/arch/arm/mach-omap2/omap_hwmod_43xx_data.c
index dbf10d5..8ea79092 100644
--- a/arch/arm/mach-omap2/omap_hwmod_43xx_data.c
+++ b/arch/arm/mach-omap2/omap_hwmod_43xx_data.c
@@ -14,6 +14,7 @@
  * GNU General Public License for more details.
  */
 
+#include <linux/of.h>
 #include <linux/platform_data/gpio-omap.h>
 #include <linux/platform_data/spi-omap2-mcspi.h>
 #include "omap_hwmod.h"
@@ -878,6 +879,7 @@ static struct omap_hwmod_ocp_if *am43xx_hwmod_ocp_ifs[] __initdata = {
 	&am43xx_l4_ls__ocp2scp1,
 	&am43xx_l3_s__usbotgss0,
 	&am43xx_l3_s__usbotgss1,
+	&am33xx_l4_wkup__rtc,
 	&am43xx_l4_ls__hdq1w,
 	&am43xx_dss__l3_main,
 	&am43xx_l4_ls__dss,
@@ -890,5 +892,6 @@ int __init am43xx_hwmod_init(void)
 {
 	omap_hwmod_am43xx_reg();
 	omap_hwmod_init();
+
 	return omap_hwmod_register_links(am43xx_hwmod_ocp_ifs);
 }
-- 
1.7.5.4

