From e59514988dbbb15a2bdbe0a17091c8f73a245792 Mon Sep 17 00:00:00 2001
From: Suman Anna <s-anna@ti.com>
Date: Fri, 7 Nov 2014 16:12:04 -0600
Subject: [PATCH 1335/1587] rpmsg: rpc: revise couple of traces

Couple of traces have been revised to fix some typos. The
traces in the driver's .remove() function are also switched
to use the device pointer of the rpmsg rpc device being
removed rather than the underlying device pointer of the
representative service's rppc_device structure. This is
done to match the corresponding traces from .probe().

Signed-off-by: Suman Anna <s-anna@ti.com>
[zou: Original patch taken from
ti-sdk-am335x-evm-08.00.00.00-Linux-x86-Install.bin]
Signed-off-by: Cao Zou <cao.zou@windriver.com>
---
 drivers/rpmsg/rpmsg_rpc.c |    9 +++++----
 1 files changed, 5 insertions(+), 4 deletions(-)

diff --git a/drivers/rpmsg/rpmsg_rpc.c b/drivers/rpmsg/rpmsg_rpc.c
index efb725f..b8329ad 100644
--- a/drivers/rpmsg/rpmsg_rpc.c
+++ b/drivers/rpmsg/rpmsg_rpc.c
@@ -1087,7 +1087,7 @@ rppc_handle_devinfo_resp(struct rpmsg_channel *rpdev, char *data, int len)
 		return;
 	}
 
-	dev_info(&rpdev->dev, "publised functions = %u\n", info->num_funcs);
+	dev_info(&rpdev->dev, "published functions = %u\n", info->num_funcs);
 
 	/* send the function query for first function */
 	if (rppc_query_function(rpdev) == -EINVAL)
@@ -1303,7 +1303,7 @@ static void rppc_remove(struct rpmsg_channel *rpdev)
 	struct rppc_instance *rpc = NULL;
 	int major = MAJOR(rppc_dev);
 
-	dev_dbg(rppcdev->dev, "removing rpmsg-rpc device %u.%u\n",
+	dev_dbg(&rpdev->dev, "removing rpmsg-rpc device %u.%u\n",
 		major, rppcdev->minor);
 
 	mutex_lock(&rppc_devices_lock);
@@ -1331,7 +1331,7 @@ static void rppc_remove(struct rpmsg_channel *rpdev)
 	init_completion(&rppcdev->comp);
 	mutex_lock(&rppcdev->lock);
 	list_for_each_entry(rpc, &rppcdev->instances, list) {
-		dev_dbg(rppcdev->dev, "instance %p in state %d\n",
+		dev_dbg(&rpdev->dev, "instance %p in state %d\n",
 			rpc, rpc->state);
 		if ((rpc->state == RPPC_STATE_CONNECTED) && rpc->in_transition)
 			complete_all(&rpc->reply_arrived);
@@ -1343,7 +1343,8 @@ static void rppc_remove(struct rpmsg_channel *rpdev)
 	rppcdev->rpdev = NULL;
 	mutex_unlock(&rppcdev->lock);
 	mutex_unlock(&rppc_devices_lock);
-	dev_dbg(&rpdev->dev, "removed rpmsg rpmsgrpc driver.\n");
+	dev_dbg(&rpdev->dev, "removed rpmsg rpmsg-rpc service %s\n",
+		rpdev->desc);
 }
 
 static struct rpmsg_device_id rppc_id_table[] = {
-- 
1.7.5.4

