From 8d3535b0d3e02aebd387a1e96826e4f27d19e616 Mon Sep 17 00:00:00 2001
From: czou <cao.zou@windriver.com>
Date: Wed, 20 May 2015 03:11:48 +0000
Subject: [PATCH] of: fix of_get_flat_dt_prop warning

some warings of of_get_flat_dt_prop has been introcdued from
commit e8d9d1f5485b52ec3c4d7af839e6914438f6c285.
fix warnings as follow:

drivers/of/fdt.c:457:7: warning: assignment discards 'const' qualifier
from pointer target type
  prop = of_get_flat_dt_prop(node, "reg", &len);
drivers/of/fdt.c:471:10: warning: passing argument 2 of 'dt_mem_next_cell'
from incompatible pointer type
   size = dt_mem_next_cell(dt_root_size_cells, &prop);

Signed-off-by: czou <cao.zou@windriver.com>
---
 drivers/of/fdt.c             |    6 +++---
 drivers/of/of_reserved_mem.c |    6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/of/fdt.c b/drivers/of/fdt.c
index fcaf5e0..d16fb86 100644
--- a/drivers/of/fdt.c
+++ b/drivers/of/fdt.c
@@ -450,8 +450,8 @@ static int __init __reserved_mem_reserve_reg(unsigned long node,
 {
 	int t_len = (dt_root_addr_cells + dt_root_size_cells) * sizeof(__be32);
 	phys_addr_t base, size;
-	unsigned long len;
-	__be32 *prop;
+	int len;
+	const __be32 *prop;
 	int nomap, first = 1;
 
 	prop = of_get_flat_dt_prop(node, "reg", &len);
@@ -494,7 +494,7 @@ static int __init __reserved_mem_reserve_reg(unsigned long node,
  */
 static int __init __reserved_mem_check_root(unsigned long node)
 {
-	__be32 *prop;
+	const __be32 *prop;
 
 	prop = of_get_flat_dt_prop(node, "#size-cells", NULL);
 	if (!prop || be32_to_cpup(prop) != dt_root_size_cells)
diff --git a/drivers/of/of_reserved_mem.c b/drivers/of/of_reserved_mem.c
index c55acee..59fb12e 100644
--- a/drivers/of/of_reserved_mem.c
+++ b/drivers/of/of_reserved_mem.c
@@ -95,8 +95,8 @@ static int __init __reserved_mem_alloc_size(unsigned long node,
 	int t_len = (dt_root_addr_cells + dt_root_size_cells) * sizeof(__be32);
 	phys_addr_t start = 0, end = 0;
 	phys_addr_t base = 0, align = 0, size;
-	unsigned long len;
-	__be32 *prop;
+	int len;
+	const __be32 *prop;
 	int nomap;
 	int ret;
 
@@ -206,7 +206,7 @@ void __init fdt_init_reserved_mem(void)
 	for (i = 0; i < reserved_mem_count; i++) {
 		struct reserved_mem *rmem = &reserved_mem[i];
 		unsigned long node = rmem->fdt_node;
-		unsigned long len;
+		int len;
 		const __be32 *prop;
 		int err = 0;
 
-- 
1.7.5.4

