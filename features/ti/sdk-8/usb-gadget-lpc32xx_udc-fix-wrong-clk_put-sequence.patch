From 6c83c7e64a7fb3b71536713847b10d0e238bbd9e Mon Sep 17 00:00:00 2001
From: Felipe Balbi <balbi@ti.com>
Date: Mon, 10 Mar 2014 13:30:53 -0500
Subject: [PATCH 0143/1587] usb: gadget: lpc32xx_udc: fix wrong clk_put()
 sequence

commit ade79d13a83a31cc0f68b47831bcbfe3a82f613f upstream

This patch fixes the following Coccinelle error:

drivers/usb/gadget/lpc32xx_udc.c:3313:1-7: ERROR: \
	missing clk_put; clk_get on line 3139 and \
	execution via conditional on line 3146

Signed-off-by: Felipe Balbi <balbi@ti.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
---
 drivers/usb/gadget/lpc32xx_udc.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/usb/gadget/lpc32xx_udc.c b/drivers/usb/gadget/lpc32xx_udc.c
index 049ebab..a139894 100644
--- a/drivers/usb/gadget/lpc32xx_udc.c
+++ b/drivers/usb/gadget/lpc32xx_udc.c
@@ -3295,9 +3295,9 @@ usb_clk_enable_fail:
 pll_set_fail:
 	clk_disable(udc->usb_pll_clk);
 pll_enable_fail:
-	clk_put(udc->usb_slv_clk);
-usb_otg_clk_get_fail:
 	clk_put(udc->usb_otg_clk);
+usb_otg_clk_get_fail:
+	clk_put(udc->usb_slv_clk);
 usb_clk_get_fail:
 	clk_put(udc->usb_pll_clk);
 pll_get_fail:
-- 
1.7.5.4

