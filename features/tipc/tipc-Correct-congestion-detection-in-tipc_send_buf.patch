From 3a174ca23b7656747b1a9759c2f3f8714cce689d Mon Sep 17 00:00:00 2001
From: Allan Stephens <allan.stephens@windriver.com>
Date: Thu, 4 Nov 2010 15:50:14 -0400
Subject: [PATCH 02/32] tipc: Correct congestion detection in tipc_send_buf()

commit 93c88eda40d9387cce326f0b8c09bf325068fc5f from
git://tipc.cslab.ericsson.net/pub/git/people/allan/tipc.git

Allows tipc_send_buf() to properly react to the occurrence of
link congestion. (Previously, congestion may not have been recognized
because a negative return code was being saved into an unsigned
variable.)

Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
Integrated-by: Howard Xu <hao.xu@windriver.com>
---
 net/tipc/tipc_port.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/net/tipc/tipc_port.c b/net/tipc/tipc_port.c
index 9f33142..9ec2b6f 100644
--- a/net/tipc/tipc_port.c
+++ b/net/tipc/tipc_port.c
@@ -1473,7 +1473,7 @@ int tipc_send_buf(u32 ref, struct sk_buff *buf, unsigned int dsz)
 	u32 destnode;
 	u32 hsz;
 	u32 sz;
-	u32 res;
+	int res;
 
 	p_ptr = tipc_port_deref(ref);
 	if (!p_ptr || !p_ptr->publ.connected)
-- 
1.7.0

