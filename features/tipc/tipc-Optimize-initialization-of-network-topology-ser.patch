From 2d98abb9fe132898d17b56fb4765687aff82c093 Mon Sep 17 00:00:00 2001
From: Allan Stephens <allan.stephens@windriver.com>
Date: Thu, 26 Apr 2012 17:41:35 -0400
Subject: [PATCH] tipc: Optimize initialization of network topology service

commit 2d98abb9fe132898d17b56fb4765687aff82c093 upstream.

Initialization now occurs in the calling thread of control,
rather than being deferred to the TIPC tasklet.  With the
current codebase, the deferral is no longer necessary.

Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/net/tipc/core.c b/net/tipc/core.c
index c8a4f00..ba08940 100644
--- a/net/tipc/core.c
+++ b/net/tipc/core.c
@@ -150,7 +150,7 @@ static int tipc_core_start(void)
 	if (!res)
 		res = tipc_nametbl_init();
 	if (!res)
-		res = tipc_k_signal((Handler)tipc_subscr_start, 0);
+		res = tipc_subscr_start();
 	if (!res)
 		res = tipc_cfg_init();
 	if (!res)
-- 
1.7.9.1

