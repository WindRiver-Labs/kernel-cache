From 861d3a0e5bbc93b79b5739cfb4ea0fb553fe9407 Mon Sep 17 00:00:00 2001
From: Allan Stephens <allan.stephens@windriver.com>
Date: Thu, 26 Apr 2012 16:50:22 -0400
Subject: [PATCH] tipc: Optimize initialization of configuration service

commit 861d3a0e5bbc93b79b5739cfb4ea0fb553fe9407 upstream.

Initialization now occurs in the calling thread of control,
rather than being deferred to the TIPC tasklet.  With the
current codebase, the deferral is no longer necessary.

Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/net/tipc/core.c b/net/tipc/core.c
index 68eba03..c8a4f00 100644
--- a/net/tipc/core.c
+++ b/net/tipc/core.c
@@ -152,7 +152,7 @@ static int tipc_core_start(void)
 	if (!res)
 		res = tipc_k_signal((Handler)tipc_subscr_start, 0);
 	if (!res)
-		res = tipc_k_signal((Handler)tipc_cfg_init, 0);
+		res = tipc_cfg_init();
 	if (!res)
 		res = tipc_netlink_start();
 	if (!res)
-- 
1.7.9.1

