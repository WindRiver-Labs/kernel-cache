From 72cf45ddab31157ba85446173285954c5a6ae443 Mon Sep 17 00:00:00 2001
From: Ying Xue <ying.xue@windriver.com>
Date: Tue, 29 May 2012 11:22:28 +0800
Subject: [PATCH 3/5] tipc: Add a new flag bit to indicate bclink sync protocol is supported

Use the bit 14 in word 5 of LINK_PROTOCOL message header to indicate that the
new enhanced broadcast synchronization mechanism is supported.

Signed-off-by: Ying Xue <ying.xue@windriver.com>
---
 net/tipc/tipc_msg.h |   11 ++++++++++-
 1 files changed, 10 insertions(+), 1 deletions(-)

diff --git a/net/tipc/tipc_msg.h b/net/tipc/tipc_msg.h
index 8698080..29aa689 100644
--- a/net/tipc/tipc_msg.h
+++ b/net/tipc/tipc_msg.h
@@ -582,6 +582,16 @@ static inline void msg_set_stop(struct tipc_msg *m, u32 s)
 	msg_set_bits(m, 5, 13, 0x1, s);
 }
 
+static inline u32 msg_bclink_sync(struct tipc_msg *m)
+{
+	return msg_bits(m, 5, 14, 0x1);
+}
+
+static inline void msg_set_bclink_sync(struct tipc_msg *m, u32 s)
+{
+	msg_set_bits(m, 5, 14, 0x1, s);
+}
+
 static inline u32 msg_redundant_link(struct tipc_msg *m)
 {
 	return msg_bits(m, 5, 12, 0x1);
@@ -592,7 +602,6 @@ static inline void msg_set_redundant_link(struct tipc_msg *m, u32 r)
 	msg_set_bits(m, 5, 12, 0x1, r);
 }
 
-
 /*
  * Word 9
  */
-- 
1.7.0

