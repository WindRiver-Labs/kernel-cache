From eb323b075a360d59fabbbd58c0d7aeb951bfc647 Mon Sep 17 00:00:00 2001
From: Allan Stephens <allan.stephens@windriver.com>
Date: Thu, 26 Apr 2012 17:17:39 -0400
Subject: [PATCH] tipc: Optimize termination of configuration service

commit eb323b075a360d59fabbbd58c0d7aeb951bfc647 upstream.

Termination no longer tests to see if the configuration service
port was successfully created or not. In the unlikely event that the
port was not created, attempting to delete the non-existent port is
detected gracefully and causes no harm.

Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
Signed-off-by: Paul Gortmaker <paul.gortmaker@windriver.com>

diff --git a/net/tipc/config.c b/net/tipc/config.c
index a4988cd..843d7ae 100644
--- a/net/tipc/config.c
+++ b/net/tipc/config.c
@@ -506,8 +506,6 @@ void tipc_cfg_reinit(void)
 
 void tipc_cfg_stop(void)
 {
-	if (config_port_ref) {
-		tipc_deleteport(config_port_ref);
-		config_port_ref = 0;
-	}
+	tipc_deleteport(config_port_ref);
+	config_port_ref = 0;
 }
-- 
1.7.9.1

