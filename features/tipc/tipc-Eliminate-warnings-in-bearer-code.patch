From e122905248845f3c878eaa3110d5e511f354f4c4 Mon Sep 17 00:00:00 2001
From: Allan Stephens <allan.stephens@windriver.com>
Date: Fri, 5 Nov 2010 10:54:23 -0400
Subject: [PATCH 06/32] tipc: Eliminate warnings in bearer code

commit 1cce5dfd5e5bc2c2d66869904053d6b6873cd7ff from
git://tipc.cslab.ericsson.net/pub/git/people/allan/tipc.git

Changes types of string-related variables in TIPC's bearer code
to use "size_t", rather than "unsigned int". This prevents warnings
about potential loss of high order significant bits when C library
string manipulation routines (which use "size_t") are utilized.

Signed-off-by: Allan Stephens <allan.stephens@windriver.com>
Integrated-by: Howard Xu <hao.xu@windriver.com>
---
 net/tipc/tipc_bearer.c |   10 +++++-----
 1 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/net/tipc/tipc_bearer.c b/net/tipc/tipc_bearer.c
index b470d26..9ee7814 100644
--- a/net/tipc/tipc_bearer.c
+++ b/net/tipc/tipc_bearer.c
@@ -2,7 +2,7 @@
  * net/tipc/tipc_bearer.c: TIPC bearer code
  *
  * Copyright (c) 1996-2006, Ericsson AB
- * Copyright (c) 2004-2008, Wind River Systems
+ * Copyright (c) 2004-2008, 2010, Wind River Systems
  * All rights reserved.
  *
  * Redistribution and use in source and binary forms, with or without
@@ -60,7 +60,7 @@ struct bearer *tipc_bearers = NULL;
 
 static int media_name_valid(const char *name)
 {
-	u32 len;
+	size_t len;
 
 	len = strlen(name);
 	if ((len + 1) > TIPC_MAX_MEDIA_NAME)
@@ -224,8 +224,8 @@ static int bearer_name_validate(const char *name,
 	char name_copy[TIPC_MAX_BEARER_NAME];
 	char *media_name;
 	char *if_name;
-	u32 media_len;
-	u32 if_len;
+	size_t media_len;
+	size_t if_len;
 
 	/* copy bearer name & ensure length is OK */
 
@@ -631,7 +631,7 @@ restart:
 	b_ptr->media = m_ptr;
 	b_ptr->tolerance = m_ptr->tolerance;
 	b_ptr->window = m_ptr->window;
-	b_ptr->net_plane = bearer_id + 'A';
+	b_ptr->net_plane = (unsigned char)(bearer_id + 'A');
 
 	INIT_LIST_HEAD(&b_ptr->cong_links);
 	INIT_LIST_HEAD(&b_ptr->links);
-- 
1.7.0

