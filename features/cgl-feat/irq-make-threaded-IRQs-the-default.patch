From b8d590aafb9740826126294c15d2326917a4275b Mon Sep 17 00:00:00 2001
From: Amy Fong <Amy.Fong@windriver.com>
Date: Mon, 7 Jan 2013 14:52:50 -0500
Subject: [PATCH] irq: make threaded IRQs the default

Making threadirqs the default. Add another kernel parameter nothreadirqs
to disable this.

Signed-off-by: Amy Fong <Amy.Fong@windriver.com>
---
 kernel/irq/manage.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/kernel/irq/manage.c b/kernel/irq/manage.c
index 6e8ca2f..9cf8797 100644
--- a/kernel/irq/manage.c
+++ b/kernel/irq/manage.c
@@ -19,7 +19,7 @@
 #include "internals.h"
 
 #ifdef CONFIG_IRQ_FORCED_THREADING
-__read_mostly bool force_irqthreads;
+__read_mostly bool force_irqthreads = true;
 
 static int __init setup_forced_irqthreads(char *arg)
 {
@@ -27,6 +27,13 @@ static int __init setup_forced_irqthreads(char *arg)
 	return 0;
 }
 early_param("threadirqs", setup_forced_irqthreads);
+
+static int __init setup_no_forced_irqthreads(char *arg)
+{
+	force_irqthreads = false;
+	return 0;
+}
+early_param("nothreadirqs", setup_no_forced_irqthreads);
 #endif
 
 /**
-- 
1.7.9.7

