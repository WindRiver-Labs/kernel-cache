From 9dc4133c4bb9410f171440fe2a401f2f1120f4ba Mon Sep 17 00:00:00 2001
From: Ira W. Snyder <iws@ovro.caltech.edu>
Date: Mon, 7 Dec 2009 23:16:27 -0500
Subject: [PATCH 097/119] vbus: client: fix sparse warnings

Fix warnings from sparse. All of the changes are straightforward, including
missing static declarations and missing userspace pointer casts.

Signed-off-by: Ira W. Snyder <iws@ovro.caltech.edu>
Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 kernel/vbus/client.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/kernel/vbus/client.c b/kernel/vbus/client.c
index e85b2d9..5075b5b 100644
--- a/kernel/vbus/client.c
+++ b/kernel/vbus/client.c
@@ -113,7 +113,7 @@ struct _client {
 	struct srcu_struct srcu;
 };
 
-struct _connection *to_conn(struct rb_node *node)
+static struct _connection *to_conn(struct rb_node *node)
 {
 	return node ? container_of(node, struct _connection, node) : NULL;
 }
@@ -370,7 +370,7 @@ _release(struct vbus_client *client)
 	kfree(c);
 }
 
-struct vbus_client_ops _client_ops = {
+static struct vbus_client_ops _client_ops = {
 	.deviceopen  = _deviceopen,
 	.deviceclose = _deviceclose,
 	.devicecall  = _devicecall,
@@ -412,14 +412,14 @@ static unsigned long
 current_memctx_copy_to(struct vbus_memctx *ctx, void *dst, const void *src,
 		       unsigned long len)
 {
-	return copy_to_user(dst, src, len);
+	return copy_to_user((void __user __force *)dst, src, len);
 }
 
 static unsigned long
 current_memctx_copy_from(struct vbus_memctx *ctx, void *dst, const void *src,
 			 unsigned long len)
 {
-	return copy_from_user(dst, src, len);
+	return copy_from_user(dst, (void __user __force *)src, len);
 }
 
 static void
-- 
1.6.5.2

