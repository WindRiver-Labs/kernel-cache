From cb4ba30712acf47e1a81b61e9ec4219baa1c1eb0 Mon Sep 17 00:00:00 2001
From: Ira W. Snyder <iws@ovro.caltech.edu>
Date: Mon, 7 Dec 2009 23:17:21 -0500
Subject: [PATCH 098/119] vbus: config-fs: fix sparse warnings

The sparse utility noticed some missing static declarations, add them. The
vbus_config_exit() function was never used, so it is removed.

Signed-off-by: Ira W. Snyder <iws@ovro.caltech.edu>
Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 kernel/vbus/config-fs.c |   10 ++--------
 1 files changed, 2 insertions(+), 8 deletions(-)

diff --git a/kernel/vbus/config-fs.c b/kernel/vbus/config-fs.c
index a40dbf1..63856c8 100644
--- a/kernel/vbus/config-fs.c
+++ b/kernel/vbus/config-fs.c
@@ -66,7 +66,7 @@ device_bus_disconnect(struct config_item *src, struct config_item *target)
 	return ds->dev->ops->bus_disconnect(ds->dev, vbus);
 }
 
-struct configfs_item_operations bus_ops = {
+static struct configfs_item_operations bus_ops = {
 	.allow_link = device_bus_connect,
 	.drop_link = device_bus_disconnect,
 };
@@ -172,7 +172,7 @@ static ssize_t devshell_type_write(struct vbus_devshell *ds, const char *page,
 	return count;
 }
 
-DEVSHELL_ATTR(type, S_IRUGO | S_IWUSR, devshell_type_read,
+static DEVSHELL_ATTR(type, S_IRUGO | S_IWUSR, devshell_type_read,
 	    devshell_type_write);
 
 static struct configfs_attribute *devshell_attrs[] = {
@@ -267,9 +267,3 @@ out_unregister:
 	return ret;
 }
 
-void __exit vbus_config_exit(void)
-{
-	configfs_unregister_subsystem(&vbus_root.ci.subsys);
-}
-
-
-- 
1.6.5.2

