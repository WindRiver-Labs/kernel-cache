From 1fb1e4e8500c9c43312d4d955dabd0a40e11acbc Mon Sep 17 00:00:00 2001
From: Gregory Haskins <ghaskins@novell.com>
Date: Tue, 13 Oct 2009 19:29:28 -0400
Subject: [PATCH 066/119] venet: fix pageq pointer bug

We are currently stuffing an VA to the ring, when we really meant to
use a PA.  Lets fix this.

Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 drivers/net/vbus-enet.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/net/vbus-enet.c b/drivers/net/vbus-enet.c
index 80afc9b..6fe2241 100644
--- a/drivers/net/vbus-enet.c
+++ b/drivers/net/vbus-enet.c
@@ -202,7 +202,7 @@ rx_pageq_refill(struct vbus_enet_priv *priv)
 		BUG_ON(!page);
 
 		iter.desc->cookie = (u64)page;
-		iter.desc->ptr    = (u64)page_address(page);
+		iter.desc->ptr    = (u64)__pa(page_address(page));
 		iter.desc->len    = PAGE_SIZE;
 
 		ret = ioq_iter_push(&iter, 0);
-- 
1.6.5.2

