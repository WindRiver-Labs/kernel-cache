From 89d93909ca158ff50454ff725b4baff240f58311 Mon Sep 17 00:00:00 2001
From: Gregory Haskins <ghaskins@novell.com>
Date: Fri, 2 Oct 2009 06:37:49 -0400
Subject: [PATCH 059/119] venetdev: fix txmitigation disable feature

Setting it to '0' (disabled) causes a divide-by-zero bug, so lets fix
this.

Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 kernel/vbus/devices/venet/device.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/kernel/vbus/devices/venet/device.c b/kernel/vbus/devices/venet/device.c
index f7c85fd..698eb60 100644
--- a/kernel/vbus/devices/venet/device.c
+++ b/kernel/vbus/devices/venet/device.c
@@ -992,7 +992,7 @@ next:
 			evq_send_txc(priv, cookie);
 
 		/* send up to N packets before sending tx-complete */
-		if (dirty && (priv->txmitigation
+		if (dirty && (!priv->txmitigation
 			      || !(npackets % priv->txmitigation))) {
 			ioq_signal(sioq, 0);
 			dirty = 0;
-- 
1.6.5.2

