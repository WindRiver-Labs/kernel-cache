From ba379cfbdafed59dcb4e430dc29f8e90f4c84b13 Mon Sep 17 00:00:00 2001
From: Ira W. Snyder <iws@ovro.caltech.edu>
Date: Mon, 7 Dec 2009 23:19:26 -0500
Subject: [PATCH 102/119] vbus: pci-bridge: fix sparse warnings

The sparse tool caught many missing static declarations. Add them.

There are still many address space errors, but I'm unsure about the best
way to fix these.

Signed-off-by: Ira W. Snyder <iws@ovro.caltech.edu>
Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 drivers/vbus/pci-bridge.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/vbus/pci-bridge.c b/drivers/vbus/pci-bridge.c
index 787b8e8..ea5cb3e 100644
--- a/drivers/vbus/pci-bridge.c
+++ b/drivers/vbus/pci-bridge.c
@@ -66,7 +66,7 @@ struct vbus_pci_device {
 	struct work_struct       drop;
 };
 
-DEFINE_PER_CPU(struct vbus_pci_fastcall_desc, vbus_pci_percpu_fastcall)
+static DEFINE_PER_CPU(struct vbus_pci_fastcall_desc, vbus_pci_percpu_fastcall)
 ____cacheline_aligned;
 
 /*
@@ -428,7 +428,7 @@ vbus_pci_device_release(struct vbus_device_proxy *vdev)
 	kfree(_dev);
 }
 
-struct vbus_device_proxy_ops vbus_pci_device_ops = {
+static struct vbus_device_proxy_ops vbus_pci_device_ops = {
 	.open    = vbus_pci_device_open,
 	.close   = vbus_pci_device_close,
 	.shm     = vbus_pci_device_shm,
@@ -683,7 +683,7 @@ static struct ioq_notifier eventq_notifier = {
 };
 
 /* Injected whenever the host issues an ioq_signal() on the eventq */
-irqreturn_t
+static irqreturn_t
 eventq_intr(int irq, void *dev)
 {
 	vbus_pci.stats.qnotify++;
@@ -1011,7 +1011,7 @@ static struct pci_driver vbus_pci_driver = {
 	.remove   = vbus_pci_remove,
 };
 
-int __init
+static int __init
 vbus_pci_init(void)
 {
 	memset(&vbus_pci, 0, sizeof(vbus_pci));
-- 
1.6.5.2

