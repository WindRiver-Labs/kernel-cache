From 7c2fdefa68d9dc8a3e3db571e130857e5e2714d4 Mon Sep 17 00:00:00 2001
From: Ira W. Snyder <iws@ovro.caltech.edu>
Date: Mon, 7 Dec 2009 23:18:19 -0500
Subject: [PATCH 100/119] vbus: fix lots of sparse "dubious signed bitfield" warnings

The sparse utility gave tons of warnings about signed bitfields. A simple
inspection shows that they are all used as booleans, so convert them to the
correct type.

Signed-off-by: Ira W. Snyder <iws@ovro.caltech.edu>
Signed-off-by: Gregory Haskins <ghaskins@novell.com>
---
 drivers/vbus/pci-bridge.c               |    2 +-
 kernel/vbus/client.c                    |    2 +-
 kernel/vbus/devices/venet/venetdevice.h |   24 ++++++++++++------------
 3 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/drivers/vbus/pci-bridge.c b/drivers/vbus/pci-bridge.c
index 9130071..787b8e8 100644
--- a/drivers/vbus/pci-bridge.c
+++ b/drivers/vbus/pci-bridge.c
@@ -43,7 +43,7 @@ struct vbus_pci {
 	struct vbus_pci_regs     *regs;
 	struct vbus_pci_signals  *signals;
 	int                       irq;
-	int                       enabled:1;
+	bool                      enabled;
 	struct {
 		struct dentry    *fs;
 		int               events;
diff --git a/kernel/vbus/client.c b/kernel/vbus/client.c
index 5075b5b..f0413bb 100644
--- a/kernel/vbus/client.c
+++ b/kernel/vbus/client.c
@@ -42,7 +42,7 @@ struct _connection {
 	struct rb_node node;
 	struct list_head signals;
 	struct vbus_connection *conn;
-	int closed:1;
+	bool closed;
 };
 
 static inline void _signal_get(struct _signal *_signal)
diff --git a/kernel/vbus/devices/venet/venetdevice.h b/kernel/vbus/devices/venet/venetdevice.h
index edee570..6fa3dee 100644
--- a/kernel/vbus/devices/venet/venetdevice.h
+++ b/kernel/vbus/devices/venet/venetdevice.h
@@ -65,8 +65,8 @@ struct venetdev {
 			size_t               completed;
 			wait_queue_head_t    wq;
 		} rxq;
-		int                          enabled:1;
-		int                          link:1;
+		bool                         enabled;
+		bool                         link;
 	} netif;
 
 	struct {
@@ -85,29 +85,29 @@ struct venetdev {
 		struct {
 			char                 buf[MAX_VSG_DESC_SIZE];
 			size_t               len;
-			int                  enabled:1;
+			bool                 enabled;
 		} sg;
 		struct {
 			struct vbus_shm     *shm;
-			int                  enabled:1;
+			bool                 enabled;
 		} pmtd;
 		struct {
 			spinlock_t             lock;
 			struct vbus_shm       *shm;
 			struct venetdev_queue  queue;
-			int                    enabled:1;
-			int                    linkstate:1;
-			int                    txc:1;
+			bool                   enabled;
+			bool                   linkstate;
+			bool                   txc;
 		} evq;
 		struct {
 			struct vbus_shm       *shm;
 			struct venetdev_queue  pageq;
-			int                    available:1;
-			int                    enabled:1;
+			bool                   available;
+			bool                   enabled;
 		} l4ro;
-		int                          connected:1;
-		int                          opened:1;
-		int                          link:1;
+		bool                         connected;
+		bool                         opened;
+		bool                         link;
 	} vbus;
 
 	struct {
-- 
1.6.5.2

