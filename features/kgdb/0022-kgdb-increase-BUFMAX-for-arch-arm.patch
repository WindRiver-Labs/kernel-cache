From b019cd407b0f67b4092a34aa0871fda63c73d8f1 Mon Sep 17 00:00:00 2001
From: Bruce Ashfield <bruce.ashfield@windriver.com>
Date: Fri, 16 Jan 2009 15:24:48 -0500
Subject: [PATCH] kgdb: increase BUFMAX for arch/arm

BUFMAX is defined as:

  BUFMAX defines the maximum number of characters in inbound/outbound
  buffers at least NUMREGBYTES*2 are needed for register packets
  Longer buffer is needed to list all threads

ARM has this value set to 400 by default. That buffer
size is too small and can lead to errors when processing
requests. We increase the buffer size to 1024 to match
other architectures.

Signed-off-by: Bruce Ashfield <bruce.ashfield@windriver.com>
---
 arch/arm/include/asm/kgdb.h |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/include/asm/kgdb.h b/arch/arm/include/asm/kgdb.h
index 67af4b8..08f6c5a 100644
--- a/arch/arm/include/asm/kgdb.h
+++ b/arch/arm/include/asm/kgdb.h
@@ -73,7 +73,7 @@ extern int kgdb_fault_expected;
 #define GDB_MAX_REGS		(_GP_REGS + (_FP_REGS * 3) + _EXTRA_REGS)
 
 #define KGDB_MAX_NO_CPUS	1
-#define BUFMAX			400
+#define BUFMAX			1024
 #define NUMREGBYTES		(GDB_MAX_REGS << 2)
 #define NUMCRITREGBYTES		(32 << 2)
 
-- 
1.6.0.3

