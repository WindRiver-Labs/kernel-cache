From 66672fe78edfe0e2d941ced996eb525573147e3d Mon Sep 17 00:00:00 2001
From: Michel Thebeau <michel.thebeau@windriver.com>
Date: Wed, 23 Oct 2013 16:05:00 -0400
Subject: [PATCH] NET_POLL: pass skb as well the ipv6 is enabled

commit "NET_POLL: Pass skb via NET_POLL rx routine" adds a parameter to
rx_hook but misses the call to rx_hook in the ipv6 #ifdef block

Signed-off-by: Michel Thebeau <michel.thebeau@windriver.com>
Signed-off-by: Jason Wessel <jason.wessel@windriver.com>
---
 net/core/netpoll.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/net/core/netpoll.c b/net/core/netpoll.c
index b1592bd..7321fb9 100644
--- a/net/core/netpoll.c
+++ b/net/core/netpoll.c
@@ -881,7 +881,8 @@ int __netpoll_rx(struct sk_buff *skb, struct netpoll_info *npinfo)
 
 			np->rx_hook(np, ntohs(uh->source),
 				       (char *)(uh+1),
-				       ulen - sizeof(struct udphdr));
+				       ulen - sizeof(struct udphdr),
+				       skb);
 			hits++;
 		}
 #endif
-- 
1.8.4.93.g57e4c17

