From 2714864ccda45e00bc12b4b04013da67d664d544 Mon Sep 17 00:00:00 2001
From: yzhu1 <yzhu1@windriver.com>
Date: Wed, 25 Nov 2015 19:03:22 +0800
Subject: [PATCH] rt:random: remove spin lock in add_interrupt_randomness

The commit 91fcb5 "random: always update the entropy pool under the
spinlock" introduces the spin lock in the function
add_interrupt_randomness. The commit db54f99 "random: Make it work
on rt" on Linux 3.18.24-rt22 makes changes according to the above
commit.

In linux 3.10-rt needs the similar changes because the commit 91fcb5
"random: always update the entropy pool under the spinlock" is merged
in linux 3.10-rt.

Signed-off-by: yzhu1 <yzhu1@windriver.com>
---
 drivers/char/random.c |    4 ----
 1 files changed, 0 insertions(+), 4 deletions(-)

diff --git a/drivers/char/random.c b/drivers/char/random.c
index dbd0623..d7861aa 100644
--- a/drivers/char/random.c
+++ b/drivers/char/random.c
@@ -834,11 +834,7 @@ void add_interrupt_randomness(int irq, int irq_flags, __u64 ip)
 		return;
 	}
 	fast_pool->last = now;
-#ifndef CONFIG_PREEMPT_RT_FULL
 	__mix_pool_bytes(r, &fast_pool->pool, sizeof(fast_pool->pool), NULL);
-#else
-	mix_pool_bytes(r, &fast_pool->pool, sizeof(fast_pool->pool), NULL);
-#endif
 
 	/*
 	 * If we have architectural seed generator, produce a seed and
-- 
1.7.5.4

