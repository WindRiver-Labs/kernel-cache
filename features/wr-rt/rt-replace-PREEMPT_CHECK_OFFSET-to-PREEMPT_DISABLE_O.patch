From ce2709425c4f6ace9b5741b6e87e04ff09c65064 Mon Sep 17 00:00:00 2001
From: Yang Shi <yang.shi@windriver.com>
Date: Fri, 30 Oct 2015 13:17:25 -0700
Subject: [PATCH] rt: replace PREEMPT_CHECK_OFFSET to PREEMPT_DISABLE_OFFSET

PREEMPT_CHECK_OFFSET has been renamed to PREEMPT_DISABLE_OFFSET by
commit 3905f7abd0410acdd497661e84c7f6ef672c1e04
("sched/preempt: Rename PREEMPT_CHECK_OFFSET to PREEMPT_DISABLE_OFFSET")

Update corresponding code to stay align with it.

Signed-off-by: Yang Shi <yang.shi@windriver.com>
---
 kernel/softirq.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/kernel/softirq.c b/kernel/softirq.c
index e3a0531..6da44cd 100644
--- a/kernel/softirq.c
+++ b/kernel/softirq.c
@@ -581,7 +581,7 @@ EXPORT_SYMBOL(local_bh_disable);
 void __local_bh_disable_ip(unsigned long ip, unsigned int cnt)
 {
 	__local_bh_disable();
-	if (cnt & PREEMPT_CHECK_OFFSET)
+	if (cnt & PREEMPT_DISABLE_OFFSET)
 		preempt_disable();
 }
 
@@ -608,7 +608,7 @@ EXPORT_SYMBOL(local_bh_enable);
 extern void __local_bh_enable_ip(unsigned long ip, unsigned int cnt)
 {
 	__local_bh_enable();
-	if (cnt & PREEMPT_CHECK_OFFSET)
+	if (cnt & PREEMPT_DISABLE_OFFSET)
 		preempt_enable();
 }
 
-- 
2.0.2

