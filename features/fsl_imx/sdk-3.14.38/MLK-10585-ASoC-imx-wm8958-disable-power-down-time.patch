From aa1f2e06623541e13159b53965250f9a97117e07 Mon Sep 17 00:00:00 2001
From: Zidan Wang <zidan.wang@freescale.com>
Date: Fri, 3 Apr 2015 18:35:18 +0800
Subject: [PATCH 0939/1594] MLK-10585 ASoC: imx-wm8958: disable power down
 time

commit dc90bbd9cdc09b4b5ab3cd1113f4ed775941a49e from
git://git.freescale.com/imx/linux-2.6-imx.git

At the end of playback and before power down time, write i2c will
failed.

Signed-off-by: Zidan Wang <zidan.wang@freescale.com>
---
 sound/soc/fsl/imx-wm8958.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/sound/soc/fsl/imx-wm8958.c b/sound/soc/fsl/imx-wm8958.c
index fea054e..d37649c 100644
--- a/sound/soc/fsl/imx-wm8958.c
+++ b/sound/soc/fsl/imx-wm8958.c
@@ -426,6 +426,7 @@ static int imx_wm8958_probe(struct platform_device *pdev)
 	data->dai.cpu_dai_name = dev_name(&cpu_pdev->dev);
 	data->dai.platform_of_node = cpu_np;
 	data->dai.ops = &imx_hifi_ops;
+	data->dai.ignore_pmdown_time = 1;
 	data->dai.dai_fmt |= SND_SOC_DAIFMT_I2S | SND_SOC_DAIFMT_NB_NF;
 
 	data->card.dev = &pdev->dev;
-- 
1.7.5.4

