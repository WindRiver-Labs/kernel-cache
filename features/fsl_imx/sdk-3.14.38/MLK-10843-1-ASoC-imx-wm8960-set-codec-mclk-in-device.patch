From fd2573fd2a239103b2b4b4b7fdc1bc13033e00ad Mon Sep 17 00:00:00 2001
From: Zidan Wang <zidan.wang@freescale.com>
Date: Thu, 7 May 2015 13:58:27 +0800
Subject: [PATCH 1063/1594] MLK-10843-1 ASoC: imx-wm8960: set codec mclk in
 device tree instead of machine driver

commit c4c7e7e64c64e18a947edc29cc62a608c9b3fc6c from
git://git.freescale.com/imx/linux-2.6-imx.git

set codec mclk in device tree instead of machine driver.

Signed-off-by: Zidan Wang <zidan.wang@freescale.com>
---
 sound/soc/fsl/imx-wm8960.c |    8 --------
 1 files changed, 0 insertions(+), 8 deletions(-)

diff --git a/sound/soc/fsl/imx-wm8960.c b/sound/soc/fsl/imx-wm8960.c
index af59227..5b97fbc 100644
--- a/sound/soc/fsl/imx-wm8960.c
+++ b/sound/soc/fsl/imx-wm8960.c
@@ -27,7 +27,6 @@
 #include "fsl_sai.h"
 
 #define DAI_NAME_SIZE	32
-#define DEFAULT_MCLK_FREQ (12000000)
 
 struct imx_wm8960_data {
 	struct snd_soc_card card;
@@ -312,13 +311,6 @@ static int imx_hifi_hw_params(struct snd_pcm_substream *substream,
 	}
 
 	data->clk_frequency = clk_get_rate(data->codec_clk);
-	if (data->clk_frequency != DEFAULT_MCLK_FREQ) {
-		ret = clk_set_rate(data->codec_clk, DEFAULT_MCLK_FREQ);
-		if (ret < 0)
-			dev_dbg(dev, "fail to set codec clock frequency.\n");
-		else
-			data->clk_frequency = clk_get_rate(data->codec_clk);
-	}
 
 	/* Use MCLK to provide sysclk directly*/
 	sysclk = data->clk_frequency;
-- 
1.7.5.4

