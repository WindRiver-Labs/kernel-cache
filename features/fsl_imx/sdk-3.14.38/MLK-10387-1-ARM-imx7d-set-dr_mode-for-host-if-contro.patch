From 4debd44c7ffc4dcfcb738125c9cbbaaeebe3bcc5 Mon Sep 17 00:00:00 2001
From: Peter Chen <peter.chen@freescale.com>
Date: Mon, 9 Mar 2015 13:56:53 +0800
Subject: [PATCH 0512/1594] MLK-10387-1 ARM: imx7d: set dr_mode for "host" if
 controller is host-only

commit b348f400fc410bf07f895ddcf321c7bff9217d77 from
git://git.freescale.com/imx/linux-2.6-imx.git

The dts is used to describe hardware capabilities, so it is
better to add dr_mode = "host" if the controller is host-only,
it can also eliminate "doesn't support gadget" message for host-only
controller initialization. Below thread also discuss it:

http://lkml.iu.edu/hypermail/linux/kernel/1502.3/02871.html

Signed-off-by: Peter Chen <peter.chen@freescale.com>
---
 arch/arm/boot/dts/imx7d.dtsi |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx7d.dtsi b/arch/arm/boot/dts/imx7d.dtsi
index 77f29b5..908f5993e 100644
--- a/arch/arm/boot/dts/imx7d.dtsi
+++ b/arch/arm/boot/dts/imx7d.dtsi
@@ -1017,6 +1017,7 @@
 				fsl,usbphy = <&usbphy_nop3>;
 				fsl,usbmisc = <&usbmisc3 0>;
 				phy_type = "hsic";
+				dr_mode = "host";
 				status = "disabled";
 			};
 
-- 
1.7.5.4

