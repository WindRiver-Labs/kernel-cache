From c130d98487379c2aa758cd52cab68d7c8cc4e5b7 Mon Sep 17 00:00:00 2001
From: Shawn Guo <shawn.guo@freescale.com>
Date: Thu, 12 Jun 2014 10:56:24 +0800
Subject: [PATCH 0003/1594] ENGR00317981: busfreq: fix the use of
 MT_MEMORY_NONCACHED
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

commit 61dd86bb57224ce3953129c7a553306ea82b71c4 from
git://git.freescale.com/imx/linux-2.6-imx.git

Since commit 2e2c9de207be (ARM: add permission annotations to MT_MEMORY*
mapping types), MT_MEMORY_NONCACHED is not available any more.  Thus, we
see following build error.

  CC      arch/arm/mach-imx/busfreq_ddr3.o
arch/arm/mach-imx/busfreq_ddr3.c: In function ‘init_mmdc_settings’:
arch/arm/mach-imx/busfreq_ddr3.c:464:7: error: ‘MT_MEMORY_NONCACHED’ undeclared (first use in this function)

Fix it by using the new enum MT_MEMORY_RWX_NONCACHED.

Signed-off-by: Shawn Guo <shawn.guo@freescale.com>
---
 arch/arm/mach-imx/busfreq_ddr3.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-imx/busfreq_ddr3.c b/arch/arm/mach-imx/busfreq_ddr3.c
index 564ed65..ef99de6 100644
--- a/arch/arm/mach-imx/busfreq_ddr3.c
+++ b/arch/arm/mach-imx/busfreq_ddr3.c
@@ -462,7 +462,7 @@ int init_mmdc_settings(struct platform_device *busfreq_pdev)
 	 */
 	ddr_freq_change_iram_base = __arm_ioremap(iram_paddr,
 						DDR_FREQ_CHANGE_SIZE,
-						MT_MEMORY_NONCACHED);
+						MT_MEMORY_RWX_NONCACHED);
 	mx6_change_ddr_freq = (void *)fncpy(ddr_freq_change_iram_base,
 		&mx6_ddr3_freq_change, DDR_FREQ_CHANGE_SIZE);
 
-- 
1.7.5.4

