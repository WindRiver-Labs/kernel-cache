From 897054ea7b8be9673e055cff711e6834d68dbf40 Mon Sep 17 00:00:00 2001
From: Xianzhong <b07117@freescale.com>
Date: Wed, 16 Dec 2015 18:17:06 +0800
Subject: [PATCH 3/9] MGS-1360 fix gpu kernel driver with built-in mode

gpu kernel driver is loadable by default, change to built-in mode.

Signed-off-by: Xianzhong <b07117@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git -b
imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/mxc/gpu-viv/Kbuild |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/mxc/gpu-viv/Kbuild b/drivers/mxc/gpu-viv/Kbuild
index 485e7a3..f5bd257 100644
--- a/drivers/mxc/gpu-viv/Kbuild
+++ b/drivers/mxc/gpu-viv/Kbuild
@@ -306,7 +306,7 @@ endif
 
 EXTRA_CFLAGS += -DHOST=\"$(HOST)\"
 
-obj-m = $(MODULE_NAME).o
+obj-$(CONFIG_MXC_GPU_VIV) = $(MODULE_NAME).o
 
 $(MODULE_NAME)-objs  = $(OBJS)
 
-- 
1.7.5.4

