From 2ca13ec77e224d3b1741f8da0e42c84dd780d503 Mon Sep 17 00:00:00 2001
From: Shengjiu Wang <b02247@freescale.com>
Date: Mon, 7 Jul 2014 19:03:21 +0800
Subject: [PATCH 0692/1594] ENGR00321941 ASoC: fsl_spdif: fix that can't get
 the Rx Sample Rate

commit dafe334e140422862f64c26ebf29ac36f2da0b1b from
git://git.freescale.com/imx/linux-2.6-imx.git

The SRPC register should be volatile, LOCK bit is set by the hardware.

Signed-off-by: Shengjiu Wang <b02247@freescale.com>
(cherry picked from commit 35ac9096cbe158962e779fd9bc64aeb74abbc745)
---
 sound/soc/fsl/fsl_spdif.c |    2 ++
 1 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/sound/soc/fsl/fsl_spdif.c b/sound/soc/fsl/fsl_spdif.c
index 6f51b92..3ceba3f 100644
--- a/sound/soc/fsl/fsl_spdif.c
+++ b/sound/soc/fsl/fsl_spdif.c
@@ -111,6 +111,8 @@ struct fsl_spdif_priv {
 	struct clk *dmaclk;
 	struct snd_dmaengine_dai_dma_data dma_params_tx;
 	struct snd_dmaengine_dai_dma_data dma_params_rx;
+	/* regcache for SRPC */
+	u32 regcache_srpc;
 };
 
 /* DPLL locked and lock loss interrupt handler */
-- 
1.7.5.4

