From 7072d5c723a36e6950e5575b1405f2370a025233 Mon Sep 17 00:00:00 2001
From: Peter Chen <peter.chen@freescale.com>
Date: Thu, 30 Apr 2015 11:41:09 +0800
Subject: [PATCH 1393/1594] MLK-10783-3 ARM: imx: clk-imx6ul: Enable two USB
 dummy clocks

commit 5ecdb44b094b9828ef9efab927ec27fa77f46c2b from
git://git.freescale.com/imx/linux-2.6-imx.git

They are needed to be on after system initialization.

Signed-off-by: Peter Chen <peter.chen@freescale.com>
---
 arch/arm/mach-imx/clk-imx6ul.c |    5 +++++
 1 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-imx/clk-imx6ul.c b/arch/arm/mach-imx/clk-imx6ul.c
index aeed687..06f3e42 100644
--- a/arch/arm/mach-imx/clk-imx6ul.c
+++ b/arch/arm/mach-imx/clk-imx6ul.c
@@ -432,6 +432,11 @@ static void __init imx6ul_clocks_init(struct device_node *ccm_node)
 	for (i = 0; i < ARRAY_SIZE(clks_init_on); i++)
 		imx_clk_prepare_enable(clks[clks_init_on[i]]);
 
+	if (IS_ENABLED(CONFIG_USB_MXS_PHY)) {
+		imx_clk_prepare_enable(clks[IMX6UL_CLK_USBPHY1_GATE]);
+		imx_clk_prepare_enable(clks[IMX6UL_CLK_USBPHY2_GATE]);
+	}
+
 	imx_clk_set_parent(clks[IMX6UL_CLK_CAN_SEL], clks[IMX6UL_CLK_PLL3_60M]);
 	imx_clk_set_parent(clks[IMX6UL_CLK_SIM_PRE_SEL], clks[IMX6UL_CLK_PLL3_USB_OTG]);
 
-- 
1.7.5.4

