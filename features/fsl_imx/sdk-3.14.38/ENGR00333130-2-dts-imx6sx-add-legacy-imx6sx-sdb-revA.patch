From 94c2cdfbc6a6d15fcaf4fcbde49ab6372b73fd71 Mon Sep 17 00:00:00 2001
From: Dong Aisheng <b29396@freescale.com>
Date: Thu, 25 Sep 2014 15:14:16 +0800
Subject: [PATCH 0513/1594] ENGR00333130-2 dts: imx6sx: add legacy imx6sx sdb
 revA support

commit c5f593a031cf04cd4356108f0bef88e3834e62de from
git://git.freescale.com/imx/linux-2.6-imx.git

The CAN transceiver is changed on RevB board and the default imx6sx-sdb.dts
is for support new RevB board.
This patch adds the dts for legacy RevA board support, especially for CAN
device.
This is for people who still wants to use RevA board with this code base.

Conflicts:

	arch/arm/boot/dts/Makefile
	arch/arm/boot/dts/imx6sx-sdb-reva.dts
	arch/arm/boot/dts/imx6sx-sdb.dts

Signed-off-by: Dong Aisheng <b29396@freescale.com>
(cherry picked from commit 9d90c66e3cf61ed243ae148d401f2b46875f0745)
(cherry picked from commit 2717020f1b12d54757e0b7c51cb931d00e99d525)
---
 arch/arm/boot/dts/imx6sx-sdb-reva.dts |   10 ++++++++++
 arch/arm/boot/dts/imx6sx-sdb.dts      |    8 ++++----
 2 files changed, 14 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb-reva.dts b/arch/arm/boot/dts/imx6sx-sdb-reva.dts
index 296a0d3..a1db517 100644
--- a/arch/arm/boot/dts/imx6sx-sdb-reva.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb-reva.dts
@@ -138,6 +138,16 @@
 	fsl,arm-soc-shared = <0>;
 };
 
+&flexcan1 {
+	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
+	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_HIGH>;
+};
+
+&flexcan2 {
+	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
+	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_HIGH>;
+};
+
 &qspi2 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_qspi2>;
diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index efdf87f..da30da4 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -158,16 +158,16 @@
 &flexcan1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_flexcan1>;
-	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
-	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_HIGH>;
+	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_LOW>;
+	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_LOW>;
 	status = "okay";
 };
 
 &flexcan2 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_flexcan2>;
-	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_HIGH>;
-	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_HIGH>;
+	trx-en-gpio = <&gpio4 25 GPIO_ACTIVE_LOW>;
+	trx-stby-gpio = <&gpio4 27 GPIO_ACTIVE_LOW>;
 	status = "okay";
 };
 
-- 
1.7.5.4

