From acfdb2c3af00867287d5ce62c8724fe81c331290 Mon Sep 17 00:00:00 2001
From: Shengjiu Wang <shengjiu.wang@freescale.com>
Date: Tue, 16 Sep 2014 14:08:11 +0800
Subject: [PATCH 0190/1594] ENGR00331085-5: ARM: dts: imx6sl-evk: Add WM8962
 support for imx6sl-evk

commit f58537a9a1ef703a194a5c926fbbdc0f64738308 from
git://git.freescale.com/imx/linux-2.6-imx.git

Add WM8962 support for imx6sl-evk:
 * Add pinctrl group for audmux on evk board
 * Add WM8962-related devictree binding for evk board
 * Add clock route for ssi.

Signed-off-by: Shengjiu Wang <shengjiu.wang@freescale.com>
---
 arch/arm/boot/dts/imx6sl-evk.dts |   25 ++++++++++++++++++++++++-
 1 files changed, 24 insertions(+), 1 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index 8a8142e..ae379e1 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -112,9 +112,10 @@
 	};
 
 	sound {
-		compatible = "fsl,imx6sl-evk-wm8962", "fsl,imx-audio-wm8962";
+		compatible = "fsl,imx6sl-evk-wm8962", "fsl,imx6q-sabresd-wm8962", "fsl,imx-audio-wm8962";
 		model = "wm8962-audio";
 		ssi-controller = <&ssi2>;
+		cpu-dai = <&ssi2>;
 		audio-codec = <&codec>;
 		audio-routing =
 			"Headphone Jack", "HPOUTL",
@@ -123,8 +124,10 @@
 			"Ext Spk", "SPKOUTR",
 			"AMIC", "MICBIAS",
 			"IN3R", "AMIC";
+		amic-mono;
 		mux-int-port = <2>;
 		mux-ext-port = <3>;
+		hp-det-gpios = <&gpio4 19 1>;
 	};
 };
 
@@ -134,6 +137,19 @@
 	status = "okay";
 };
 
+&clks {
+	assigned-clocks = <&clks IMX6SL_PLL4_BYPASS_SRC>,
+			  <&clks IMX6SL_PLL4_BYPASS>,
+			  <&clks IMX6SL_CLK_EXTERN_AUDIO_SEL>,
+			  <&clks IMX6SL_CLK_EXTERN_AUDIO>,
+			  <&clks IMX6SL_CLK_PLL4_POST_DIV>;
+	assigned-clock-parents = <&clks IMX6SL_CLK_OSC>,
+				<&clks IMX6SL_PLL4_BYPASS_SRC>,
+				<&clks IMX6SL_CLK_PLL4_AUDIO_DIV>;
+	assigned-clock-rates = <0>, <0>, <0>, <24000000>,
+				<24000000>;
+};
+
 &cpu0 {
 	arm-supply = <&sw1a_reg>;
 	soc-supply = <&sw1c_reg>;
@@ -294,6 +310,7 @@
 		PLLVDD-supply = <&vgen3_reg>;
 		SPKVDD1-supply = <&reg_aud4v>;
 		SPKVDD2-supply = <&reg_aud4v>;
+		amic-mono;
 	};
 };
 
@@ -322,6 +339,7 @@
 				MX6SL_PAD_ECSPI2_MISO__GPIO4_IO14 0x17000
 				MX6SL_PAD_ECSPI2_MOSI__GPIO4_IO13 0x17000
 				MX6SL_PAD_ECSPI2_SS0__GPIO4_IO15  0x17000
+				MX6SL_PAD_FEC_RX_ER__GPIO4_IO19   0x1b0b0
 			>;
 		};
 
@@ -331,6 +349,7 @@
 				MX6SL_PAD_AUD_TXC__AUD3_TXC	  0x4130b0
 				MX6SL_PAD_AUD_TXD__AUD3_TXD	  0x4110b0
 				MX6SL_PAD_AUD_TXFS__AUD3_TXFS	  0x4130b0
+                                MX6SL_PAD_AUD_MCLK__AUDIO_CLK_OUT 0x4130b0
 			>;
 		};
 
@@ -662,6 +681,10 @@
 };
 
 &ssi2 {
+	fsl,mode = "i2s-slave";
+	assigned-clocks = <&clks IMX6SL_CLK_SSI2_SEL>,
+			  <&clks IMX6SL_CLK_SSI2>;
+	assigned-clock-rates = <0>, <24000000>;
 	status = "okay";
 };
 
-- 
1.7.5.4

