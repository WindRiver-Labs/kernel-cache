From f19a494a90ba71c6105503c1cd223d455c9b4096 Mon Sep 17 00:00:00 2001
From: Oliver Brown <oliver.brown@freescale.com>
Date: Wed, 8 Jul 2015 16:51:05 -0500
Subject: [PATCH 0428/1594] MLK-10452 [iMX6SL/TIC/PXP] - imxv4l2sink incorrect
 color for 24bpp or 32bpp

commit f0241a65d5b31f02446b4fb4f6e4826a1dd79309 from
git://git.freescale.com/imx/linux-2.6-imx.git

The color is incorrect for 24bpp and 32 bpp framebuffer.
Needed to add cases to support 24bpp and 32bpp.

Signed-off-by: Oliver Brown <oliver.brown@freescale.com>
(cherry picked from commit 5c5343f7bfd4ee226cd951af8f58ebae44c0dc38)
---
 drivers/media/platform/mxc/output/mxc_pxp_v4l2.c |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/drivers/media/platform/mxc/output/mxc_pxp_v4l2.c b/drivers/media/platform/mxc/output/mxc_pxp_v4l2.c
index d5ab106..8a3cda5 100644
--- a/drivers/media/platform/mxc/output/mxc_pxp_v4l2.c
+++ b/drivers/media/platform/mxc/output/mxc_pxp_v4l2.c
@@ -64,7 +64,7 @@ static struct pxp_data_format pxp_s0_formats[] = {
 		.colorspace = V4L2_COLORSPACE_SRGB,
 	}, {
 		.name = "24-bit RGB",
-		.bpp = 4,
+		.bpp = 3,
 		.fourcc = V4L2_PIX_FMT_RGB24,
 		.colorspace = V4L2_COLORSPACE_SRGB,
 	}, {
@@ -310,6 +310,8 @@ static int pxp_set_fbinfo(struct pxps *pxp)
 	pxp->pxp_conf.out_param.stride = pxp->fbi->var.xres;
 	if (pxp->fbi->var.bits_per_pixel == 16)
 		fb->fmt.pixelformat = V4L2_PIX_FMT_RGB565;
+	else if (pxp->fbi->var.bits_per_pixel == 32)
+		fb->fmt.pixelformat = V4L2_PIX_FMT_RGB32;
 	else
 		fb->fmt.pixelformat = V4L2_PIX_FMT_RGB24;
 
-- 
1.7.5.4

