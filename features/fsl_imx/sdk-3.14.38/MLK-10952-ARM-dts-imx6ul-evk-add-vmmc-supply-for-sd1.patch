From d90bd761cbb4c4ddcf92a137b85cd5262f0e5fa1 Mon Sep 17 00:00:00 2001
From: Haibo Chen <haibo.chen@freescale.com>
Date: Thu, 21 May 2015 19:02:20 +0800
Subject: [PATCH 1112/1594] MLK-10952 ARM: dts: imx6ul-evk: add vmmc-supply
 for sd1 slot

commit 14ce33d669863cd2042f0a24c3f1a1a0653992f7 from
git://git.freescale.com/imx/linux-2.6-imx.git

Add vmmc-supply for sd1 slot, otherwise sd3.0 card in this slot
will be recognized as a sd2.0 card after suspend and resume.

Signed-off-by: Haibo Chen <haibo.chen@freescale.com>
---
 arch/arm/boot/dts/imx6ul-evk.dts |   12 ++++++++++++
 1 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6ul-evk.dts b/arch/arm/boot/dts/imx6ul-evk.dts
index d46e62f..a7bd870c 100755
--- a/arch/arm/boot/dts/imx6ul-evk.dts
+++ b/arch/arm/boot/dts/imx6ul-evk.dts
@@ -49,6 +49,16 @@
 			regulator-max-microvolt = <3300000>;
 			gpios = <&gpio_spi 3 GPIO_ACTIVE_LOW>;
 		};
+
+		reg_sd1_vmmc: regulator@1 {
+			compatible = "regulator-fixed";
+			regulator-name = "VSD_3V3";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			gpio = <&gpio1 9 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+		};
+
 	};
 
 	sound {
@@ -266,6 +276,7 @@
 	cd-gpios = <&gpio1 19 0>;
 	keep-power-in-suspend;
 	enable-sdio-wakeup;
+	vmmc-supply = <&reg_sd1_vmmc>;
 	status = "okay";
 };
 
@@ -340,6 +351,7 @@
 				MX6UL_PAD_LCD_RESET__WDOG1_WDOG_ANY    0x30b0
 				MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	0x17059 /* SD1 CD */
 				MX6UL_PAD_GPIO1_IO05__USDHC1_VSELECT	0x17059 /* SD1 VSELECT */
+				MX6UL_PAD_GPIO1_IO09__GPIO1_IO09        0x17059 /* SD1 RESET */
 			>;
 		};
 
-- 
1.7.5.4

