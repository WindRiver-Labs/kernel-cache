From e67e51a705bb575af7f89055b58da28acdc90219 Mon Sep 17 00:00:00 2001
From: Bai Ping <b51503@freescale.com>
Date: Fri, 22 May 2015 00:36:58 +0800
Subject: [PATCH 0498/1594] MLK-10949 ARM: imx6: add supported wakeup source
 in soc_pd domain for imx6ul

commit 4be5c9fd247a9929ccb4276ecf0fc6389187e939 from
git://git.freescale.com/imx/linux-2.6-imx.git

The M/F domain on i.MX6SX is reused on i.MX6UL as SOC_PD domain. The code can be
used by these two SOC. Read the supported wakeup source in SOC_PD domain and add
support for SOC_PD domain on.

Signed-off-by: Bai Ping <b51503@freescale.com>
---
 arch/arm/mach-imx/gpc.c |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/mach-imx/gpc.c b/arch/arm/mach-imx/gpc.c
index ccc6356..c735acc 100644
--- a/arch/arm/mach-imx/gpc.c
+++ b/arch/arm/mach-imx/gpc.c
@@ -401,7 +401,7 @@ int imx_gpc_mf_power_on(unsigned int irq, unsigned int on)
 
 int imx_gpc_mf_request_on(unsigned int irq, unsigned int on)
 {
-	if (cpu_is_imx6sx())
+	if (cpu_is_imx6sx() || cpu_is_imx6ul())
 		return imx_gpc_mf_power_on(irq, on);
 	else if (cpu_is_imx7d())
 		return imx_gpcv2_mf_power_on(irq, on);
@@ -444,7 +444,7 @@ static int __init imx_gpc_init(struct device_node *node,
 		writel_relaxed(~0, gpc_base + GPC_IMR1 + i * 4);
 
 	/* Read supported wakeup source in M/F domain */
-	if (cpu_is_imx6sx()) {
+	if (cpu_is_imx6sx() || cpu_is_imx6ul()) {
 		of_property_read_u32_index(node, "fsl,mf-mix-wakeup-irq", 0,
 			&gpc_mf_irqs[0]);
 		of_property_read_u32_index(node, "fsl,mf-mix-wakeup-irq", 1,
-- 
1.7.5.4

