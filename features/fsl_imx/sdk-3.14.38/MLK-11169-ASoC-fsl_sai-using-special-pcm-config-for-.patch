From 4fb52be28b5ba51b75abf8ba67c740c9cce5d821 Mon Sep 17 00:00:00 2001
From: Zidan Wang <zidan.wang@freescale.com>
Date: Thu, 25 Jun 2015 19:07:58 +0800
Subject: [PATCH 1252/1594] MLK-11169 ASoC: fsl_sai: using special pcm config
 for IMX series

commit b716d56d346993af3736b609c597d15ae86e4b75 from
git://git.freescale.com/imx/linux-2.6-imx.git

Using special pcm config for IMX series.

The dafault pcm config is using 512K DMA Buffer which will cause
allocating from OCRAM failed. The special pcm config will using 64K
DMA buffer.

Signed-off-by: Zidan Wang <zidan.wang@freescale.com>
---
 sound/soc/fsl/fsl_sai.c |    7 +++----
 1 files changed, 3 insertions(+), 4 deletions(-)

diff --git a/sound/soc/fsl/fsl_sai.c b/sound/soc/fsl/fsl_sai.c
index 85f53b3..5b088ec 100644
--- a/sound/soc/fsl/fsl_sai.c
+++ b/sound/soc/fsl/fsl_sai.c
@@ -734,10 +734,9 @@ static int fsl_sai_probe(struct platform_device *pdev)
 
 	sai->pdev = pdev;
 
-	if (of_device_is_compatible(pdev->dev.of_node, "fsl,imx6sx-sai"))
-		sai->sai_on_imx = true;
-
-	if (of_device_is_compatible(pdev->dev.of_node, "fsl,imx7d-sai"))
+	if (of_device_is_compatible(pdev->dev.of_node, "fsl,imx6sx-sai") ||
+	    of_device_is_compatible(pdev->dev.of_node, "fsl,imx6ul-sai") ||
+	    of_device_is_compatible(pdev->dev.of_node, "fsl,imx7d-sai"))
 		sai->sai_on_imx = true;
 
 	sai->is_lsb_first = of_property_read_bool(np, "lsb-first");
-- 
1.7.5.4

