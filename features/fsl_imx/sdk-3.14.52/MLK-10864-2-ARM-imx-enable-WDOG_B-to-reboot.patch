From 40a90aff3d93654d88a04b48ea191aef43e3a8ba Mon Sep 17 00:00:00 2001
From: Robin Gong <b38343@freescale.com>
Date: Fri, 8 May 2015 15:37:08 +0800
Subject: [PATCH 0537/1221] MLK-10864-2: ARM: imx: enable WDOG_B to reboot

Add WDOG_B reset support for i.mx7d.

Signed-off-by: Robin Gong <b38343@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 arch/arm/mach-imx/system.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-imx/system.c b/arch/arm/mach-imx/system.c
index 5669336..fa3e8cd 100644
--- a/arch/arm/mach-imx/system.c
+++ b/arch/arm/mach-imx/system.c
@@ -57,7 +57,7 @@ void mxc_restart(enum reboot_mode mode, const char *cmd)
 	 * workaround qspi-nor reboot issue whatever ldo-bypass or not.
 	 */
 	else if ((wdog_source == 2 && (cpu_is_imx6q() || cpu_is_imx6dl() ||
-			cpu_is_imx6sl())) || cpu_is_imx6sx())
+			cpu_is_imx6sl())) || cpu_is_imx6sx() || cpu_is_imx7d())
 		wcr_enable = 0x14;
 	else
 		wcr_enable = (1 << 2);
-- 
1.7.5.4

