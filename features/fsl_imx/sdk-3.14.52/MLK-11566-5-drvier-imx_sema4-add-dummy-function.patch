From b571ebb3563d69a9b5abcad0627ab52fc76cd5c6 Mon Sep 17 00:00:00 2001
From: Anson Huang <b20788@freescale.com>
Date: Fri, 18 Sep 2015 23:55:00 +0800
Subject: [PATCH 1113/1221] MLK-11566-5 drvier: imx_sema4: add dummy function

When CONFIG_IMX_SEMA4 is NOT set, some modules may
still call SEMA4 APIs, need to add dummy function
to make sure build pass.

Signed-off-by: Anson Huang <b20788@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 include/linux/imx_sema4.h |   19 +++++++++++++++++++
 1 files changed, 19 insertions(+), 0 deletions(-)

diff --git a/include/linux/imx_sema4.h b/include/linux/imx_sema4.h
index 2a259f6..50421c6 100644
--- a/include/linux/imx_sema4.h
+++ b/include/linux/imx_sema4.h
@@ -60,8 +60,27 @@ extern struct imx_sema4_mutex *mcc_shm_ptr;
 
 struct imx_sema4_mutex *
 	imx_sema4_mutex_create(u32 dev_num, u32 mutex_num);
+#ifdef CONFIG_IMX_SEMA4
 int imx_sema4_mutex_destroy(struct imx_sema4_mutex *mutex_ptr);
 int imx_sema4_mutex_trylock(struct imx_sema4_mutex *mutex_ptr);
 int imx_sema4_mutex_lock(struct imx_sema4_mutex *mutex_ptr);
 int imx_sema4_mutex_unlock(struct imx_sema4_mutex *mutex_ptr);
+#else
+static inline int imx_sema4_mutex_destroy(struct imx_sema4_mutex *mutex_ptr)
+{
+	return 0;
+}
+static inline int imx_sema4_mutex_trylock(struct imx_sema4_mutex *mutex_ptr)
+{
+	return 0;
+}
+static inline int imx_sema4_mutex_lock(struct imx_sema4_mutex *mutex_ptr)
+{
+	return 0;
+}
+static inline int imx_sema4_mutex_unlock(struct imx_sema4_mutex *mutex_ptr)
+{
+	return 0;
+}
+#endif
 #endif /* __LINUX_IMX_SEMA4_H__ */
-- 
1.7.5.4

