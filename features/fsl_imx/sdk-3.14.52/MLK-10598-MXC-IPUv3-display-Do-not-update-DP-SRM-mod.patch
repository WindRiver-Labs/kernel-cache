From 77a1759b6034ed00b79e72258e4b90f902cbf05b Mon Sep 17 00:00:00 2001
From: Liu Ying <Ying.Liu@freescale.com>
Date: Wed, 8 Apr 2015 10:38:01 +0800
Subject: [PATCH 0345/1221] MLK-10598 MXC IPUv3: display: Do not update DP SRM
 mode for _ipu_dp_init()

We update DP SRM mode for DP sync flows in _ipu_dp_dc_enable() which is
called in ipu_enable_channel().  According to the SoC team, the additional
DP SRM mode update in _ipu_dp_init() is likely to cause a DI sync error(bit
19 or bit 20 of the register IPU_INT_STAT_10 will be asserted).  This patch
removes the update in _ipu_dp_init() to address the issue.

Signed-off-by: Liu Ying <Ying.Liu@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/mxc/ipu3/ipu_disp.c |    6 ++++--
 1 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/drivers/mxc/ipu3/ipu_disp.c b/drivers/mxc/ipu3/ipu_disp.c
index f3affe7..c8d202d 100644
--- a/drivers/mxc/ipu3/ipu_disp.c
+++ b/drivers/mxc/ipu3/ipu_disp.c
@@ -1,5 +1,5 @@
 /*
- * Copyright 2005-2013 Freescale Semiconductor, Inc. All Rights Reserved.
+ * Copyright 2005-2015 Freescale Semiconductor, Inc. All Rights Reserved.
  */
 
 /*
@@ -558,7 +558,9 @@ int _ipu_dp_init(struct ipu_soc *ipu,
 		dev_dbg(ipu->dev, "_ipu_dp_init color key change to yuv fmt 0x%x!\n", color_key);
 	}
 
-	__ipu_dp_csc_setup(ipu, dp, dp_csc_array[ipu->bg_csc_type][ipu->fg_csc_type], true);
+	__ipu_dp_csc_setup(ipu, dp,
+			   dp_csc_array[ipu->bg_csc_type][ipu->fg_csc_type],
+			   false);
 
 	return 0;
 }
-- 
1.7.5.4

