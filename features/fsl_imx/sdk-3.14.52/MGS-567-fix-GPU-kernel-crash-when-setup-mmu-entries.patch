From 2b539355f6c1c5d8dbbf63fc17c965f913e8515d Mon Sep 17 00:00:00 2001
From: Xianzhong <b07117@freescale.com>
Date: Thu, 12 Mar 2015 21:18:39 +0800
Subject: [PATCH 0201/1221] MGS-567 fix GPU kernel crash when setup mmu
 entries

the newer mmu requires the mapping size for the physical space,
mmu mapping size is up to 2G bytes according to gc2000+ mmu spec,

setting with 2G may waste some mmu entry memory, better with ddr size.

Signed-off-by: Xianzhong <b07117@freescale.com>
Acked-by: Jason Liu
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 .../freescale/gc_hal_kernel_platform_imx6q14.c     |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/drivers/mxc/gpu-viv/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx6q14.c b/drivers/mxc/gpu-viv/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx6q14.c
index 4778aa9..d1f19ce 100644
--- a/drivers/mxc/gpu-viv/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx6q14.c
+++ b/drivers/mxc/gpu-viv/hal/os/linux/kernel/platform/freescale/gc_hal_kernel_platform_imx6q14.c
@@ -408,6 +408,9 @@ gckPLATFORM_AdjustParam(
 
     Args->gpu3DMinClock = initgpu3DMinClock;
 
+    if (Args->physSize == 0)
+        Args->physSize = 0x80000000;
+
     return gcvSTATUS_OK;
 }
 
-- 
1.7.5.4

