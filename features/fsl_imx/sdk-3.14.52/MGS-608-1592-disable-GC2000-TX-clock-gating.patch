From 42ef2f8a4b90798e2d783e9de2ad3ebabdc41c00 Mon Sep 17 00:00:00 2001
From: Xianzhong <b07117@freescale.com>
Date: Wed, 1 Apr 2015 18:46:38 +0800
Subject: [PATCH 0323/1221] MGS-608 [#1592] disable GC2000 TX clock gating

Random hang may occur if module clock gating is enabled for TX module,
The software workaround is to disable clock gating for the TX module

Date: Apr 01, 2015
Signed-off-by: Xianzhong <b07117@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 .../hal/kernel/arch/gc_hal_kernel_hardware.c       |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/mxc/gpu-viv/hal/kernel/arch/gc_hal_kernel_hardware.c b/drivers/mxc/gpu-viv/hal/kernel/arch/gc_hal_kernel_hardware.c
index a0d5081..ffb8925 100644
--- a/drivers/mxc/gpu-viv/hal/kernel/arch/gc_hal_kernel_hardware.c
+++ b/drivers/mxc/gpu-viv/hal/kernel/arch/gc_hal_kernel_hardware.c
@@ -1553,7 +1553,10 @@ gckHARDWARE_InitializeHardware(
                                   data));
     }
 
-    if (_IsHardwareMatch(Hardware, gcv4000, 0x5222))
+    if (_IsHardwareMatch(Hardware, gcv4000, 0x5222)
+     /* VIV: HW bug #728. */
+     || _IsHardwareMatch(Hardware, gcv2000, 0x5108)
+    )
     {
         if (regPMC == 0)
         {
-- 
1.7.5.4

