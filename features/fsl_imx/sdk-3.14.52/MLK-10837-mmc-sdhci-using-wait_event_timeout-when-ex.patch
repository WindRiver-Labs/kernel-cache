From 075c5cd0cd6bfd181b30d3073a39bae8d083dbf3 Mon Sep 17 00:00:00 2001
From: Dong Aisheng <b29396@freescale.com>
Date: Mon, 18 May 2015 21:14:39 +0800
Subject: [PATCH 0567/1221] MLK-10837 mmc: sdhci: using wait_event_timeout
 when execute tuning

The wait_event_interruptible_timeout can be aborted by CTRL+C key.
We certaintly don't want tuning to be interrupted during the tuning process,
changed to wait_event_timeout avoid such failure.

Signed-off-by: Dong Aisheng <b29396@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/mmc/host/sdhci.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/drivers/mmc/host/sdhci.c b/drivers/mmc/host/sdhci.c
index 5dc6f9c..f87f3ca 100644
--- a/drivers/mmc/host/sdhci.c
+++ b/drivers/mmc/host/sdhci.c
@@ -1985,7 +1985,7 @@ static int sdhci_execute_tuning(struct mmc_host *mmc, u32 opcode)
 
 		spin_unlock_irqrestore(&host->lock, flags);
 		/* Wait for Buffer Read Ready interrupt */
-		wait_event_interruptible_timeout(host->buf_ready_int,
+		wait_event_timeout(host->buf_ready_int,
 					(host->tuning_done == 1),
 					msecs_to_jiffies(50));
 		spin_lock_irqsave(&host->lock, flags);
-- 
1.7.5.4

