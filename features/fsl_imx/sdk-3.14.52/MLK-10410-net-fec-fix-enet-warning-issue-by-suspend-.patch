From 99ffbceca8ab79ac28a3d3d6dc650ab4313cdfcd Mon Sep 17 00:00:00 2001
From: Fugang Duan <b38611@freescale.com>
Date: Fri, 13 Mar 2015 15:42:39 +0800
Subject: [PATCH 0220/1221] MLK-10410 net: fec: fix enet warning issue by
 suspend/resume

When down eth0 on i.MX6SX platform and then do suspend/resume
operation, there have one kernel dump. The patch fix the warning
issue. After eth interface down, it is not necessary to init phydev
to NULL since it do this in driver remove and eth open fucntion.

Signed-off-by: Fugang Duan <B38611@freescale.com>
[zou:Original patch taken from
git.freescale.com/imx/fsl-arm-yocto-bsp.git-b imx-3.14.52-1.1.0_ga]
Signed-off-by: zou cao <cao.zou@windriver.com>
---
 drivers/net/ethernet/freescale/fec_main.c |    1 -
 1 files changed, 0 insertions(+), 1 deletions(-)

diff --git a/drivers/net/ethernet/freescale/fec_main.c b/drivers/net/ethernet/freescale/fec_main.c
index fe72678..e2b9264 100644
--- a/drivers/net/ethernet/freescale/fec_main.c
+++ b/drivers/net/ethernet/freescale/fec_main.c
@@ -2856,7 +2856,6 @@ fec_enet_close(struct net_device *ndev)
 	}
 
 	phy_disconnect(fep->phy_dev);
-	fep->phy_dev = NULL;
 
 	fec_enet_clk_enable(ndev, false);
 	pm_qos_remove_request(&ndev->pm_qos_req);
-- 
1.7.5.4

