From 9c382d0004d34dbeb69463b5b83e5cb161289d7d Mon Sep 17 00:00:00 2001
From: Fugang Duan <B38611@freescale.com>
Date: Tue, 18 Mar 2014 15:49:30 +0800
Subject: [PATCH 0326/1074] ENGR00304199 ARM: dtsi: add enet2 support for
 imx6sx arm2 platforms

Add enet2 support for imx6sx 17x17/19x19 arm2 board.

Since imx6sx has two enet interface, and all AR8031 ethernet
daughter boards max7322 connect to same i2c bus, and same i2c
slave address. Phy address also are the same in default. So need
to change max7322 i2c slave address and phy address to others to
avoid collision.

Ar8031 ethernet daughter board rework:
R9: switch to B, remove R22, install R21 with 10k.

Signed-off-by: Fugang Duan  <B38611@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-17x17-arm2.dts |   12 ++++++++++--
 arch/arm/boot/dts/imx6sx-19x19-arm2.dts |   15 ++++++++++++---
 2 files changed, 22 insertions(+), 5 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-17x17-arm2.dts b/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
index 8f4dfd8..98ffe29 100644
--- a/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
+++ b/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
@@ -112,7 +112,8 @@
 	phy-mode = "rgmii";
 	fsl,num_tx_queues=<3>;
 	fsl,num_rx_queues=<3>;
-	status = "disabled";
+	pinctrl-assert-gpios = <&max7322_1 0 GPIO_ACTIVE_HIGH>;
+	status = "okay";
 };
 
 &flexcan1 {
@@ -254,13 +255,20 @@
         pinctrl-0 = <&pinctrl_i2c2_1>;
         status = "okay";
 
-	max7322: gpio@68 {
+	max7322_1: gpio@68 {
 		compatible = "maxim,max7322";
 		reg = <0x68>;
 		gpio-controller;
 		#gpio-cells = <2>;
 		resets = <&max7322_reset>;
 	};
+	max7322_2: gpio@69 {
+		compatible = "maxim,max7322";
+		reg = <0x69>;
+		gpio-controller;
+		#gpio-cells = <2>;
+		resets = <&max7322_reset>;
+	};
 };
 
 
diff --git a/arch/arm/boot/dts/imx6sx-19x19-arm2.dts b/arch/arm/boot/dts/imx6sx-19x19-arm2.dts
index c46250e..dea5999 100644
--- a/arch/arm/boot/dts/imx6sx-19x19-arm2.dts
+++ b/arch/arm/boot/dts/imx6sx-19x19-arm2.dts
@@ -52,7 +52,7 @@
 	phy-mode = "rgmii";
 	fsl,num_tx_queues=<3>;
 	fsl,num_rx_queues=<3>;
-	pinctrl-assert-gpios = <&max7322 0 GPIO_ACTIVE_HIGH>;
+	pinctrl-assert-gpios = <&max7322_1 0 GPIO_ACTIVE_HIGH>;
 	status = "okay";
 };
 
@@ -62,7 +62,8 @@
 	phy-mode = "rgmii";
 	fsl,num_tx_queues=<3>;
 	fsl,num_rx_queues=<3>;
-	status = "disabled";
+	pinctrl-assert-gpios = <&max7322_2 0 GPIO_ACTIVE_HIGH>;
+	status = "okay";
 };
 
 &gpc {
@@ -86,13 +87,21 @@
 	pinctrl-0 = <&pinctrl_i2c2_1>;
 	status = "okay";
 
-	max7322: gpio@68 {
+	max7322_1: gpio@68 {
 		compatible = "maxim,max7322";
 		reg = <0x68>;
 		gpio-controller;
 		#gpio-cells = <2>;
 		resets = <&max7322_reset>;
 	};
+
+	max7322_2: gpio@69 {
+		compatible = "maxim,max7322";
+		reg = <0x69>;
+		gpio-controller;
+		#gpio-cells = <2>;
+		resets = <&max7322_reset>;
+	};
 };
 
 &i2c3 {
-- 
1.7.5.4

