From eff09a649f0404fe0598ed3fef3b982dd9af329d Mon Sep 17 00:00:00 2001
From: Luwei Zhou <b45643@freescale.com>
Date: Wed, 5 Mar 2014 17:12:08 +0800
Subject: [PATCH 0300/1074] ENGR00301869-3 ARM: dts: imx6sx: add adc support
 on i.MX6SX-SDB platform

add adc devicetree support for i.MX6SX-SDB platform.

Signed-off-by: Luwei Zhou <b45643@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb.dts |   17 +++++++++++++++++
 arch/arm/boot/dts/imx6sx.dtsi    |   20 ++++++++++++++++++++
 2 files changed, 37 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index f3fcc11..188efdb 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -34,9 +34,26 @@
 			gpio = <&gpio3 27 0>;
 			enable-active-high;
 		};
+
+		reg_vref_3v3: regulator@0 {
+			compatible = "regulator-fixed";
+			regulator-name = "vref-3v3";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+		};
 	};
 };
 
+&adc1 {
+	vref-supply = <&reg_vref_3v3>;
+	status = "okay";
+};
+
+&adc2 {
+	vref-supply = <&reg_vref_3v3>;
+	status = "okay";
+};
+
 &fec1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_enet1_1 &pinctrl_enet1_clkout_1>;
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index c23c2b3..74c7ea3 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -621,6 +621,26 @@
 			aipstz@0227c000 { /* AIPSTZ3 */
 				reg = <0x0227c000 0x4000>;
 			};
+
+			adc1: adc@02280000 {
+				compatible = "fsl,imx6sx-adc", "fsl,vf610-adc";
+				reg = <0x02280000 0x4000>;
+				interrupts = <0 100 0x04>;
+				clocks = <&clks IMX6SX_CLK_IPG>;
+				clock-names = "adc";
+				num-channels = <4>;
+				status = "disabled";
+                        };
+
+			adc2: adc@02284000 {
+				compatible = "fsl,imx6sx-adc", "fsl,vf610-adc";
+				reg = <0x02284000 0x4000>;
+				interrupts = <0 101 0x04>;
+				clocks = <&clks IMX6SX_CLK_IPG>;
+				clock-names = "adc";
+				num-channels = <4>;
+				status = "disabled";
+                        };
 		};
 	};
 };
-- 
1.7.5.4

