From 9834d39044d826434ddf6a5616484b6236cdb4da Mon Sep 17 00:00:00 2001
From: Sandor Yu <R01008@freescale.com>
Date: Thu, 8 May 2014 10:41:53 +0800
Subject: [PATCH 0823/1074] ENGR00312702-2 PXP: Reset channel state before pxp
 channel configuration

Reset struct of pxp_conf_state to zero before pxp channel configuration,
in case some application miss configuration struct ol_param.

Signed-off-by: Sandor Yu <R01008@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 drivers/dma/pxp/pxp_dma_v2.c |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)

diff --git a/drivers/dma/pxp/pxp_dma_v2.c b/drivers/dma/pxp/pxp_dma_v2.c
index 89d5cf8..4848741 100644
--- a/drivers/dma/pxp/pxp_dma_v2.c
+++ b/drivers/dma/pxp/pxp_dma_v2.c
@@ -1136,6 +1136,7 @@ static void __pxpdma_dostart(struct pxp_channel *pxp_chan)
 	struct pxp_tx_desc *child;
 	int i = 0;
 
+	memset(&pxp->pxp_conf_state, 0,  sizeof(struct pxp_config_data));
 	/* S0 */
 	desc = list_first_entry(&head, struct pxp_tx_desc, list);
 	memcpy(&pxp->pxp_conf_state.s0_param,
-- 
1.7.5.4

