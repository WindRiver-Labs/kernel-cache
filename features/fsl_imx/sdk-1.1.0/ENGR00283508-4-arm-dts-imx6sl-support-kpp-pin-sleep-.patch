From b76e02d73bed1a2242a4d58568a37c0d89afa7d4 Mon Sep 17 00:00:00 2001
From: Anson Huang <b20788@freescale.com>
Date: Mon, 14 Oct 2013 15:20:52 -0400
Subject: [PATCH 0213/1074] ENGR00283508-4 arm: dts: imx6sl: support kpp pin
 sleep mode

Improve those kpp pins pad setting with no_pad_ctrl defined,
actually they are using default pad setting, to support pin
mode switch, we need to set them manually.

As i.MX6SL EVK board is very sensitive to DSM power, so we
need to lower IO power of KPP pins:

MX6SL_PAD_KEY_ROW0__KEY_ROW0
MX6SL_PAD_KEY_ROW1__KEY_ROW1
MX6SL_PAD_KEY_ROW2__KEY_ROW2
MX6SL_PAD_KEY_COL0__KEY_COL0
MX6SL_PAD_KEY_COL1__KEY_COL1
MX6SL_PAD_KEY_COL2__KEY_COL2

Signed-off-by: Anson Huang <b20788@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sl-evk.dts |    3 ++-
 arch/arm/boot/dts/imx6sl.dtsi    |   17 ++++++++++++++---
 2 files changed, 16 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index b49f177..b1aface 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -477,8 +477,9 @@
 };
 
 &kpp {
-	pinctrl-names = "default";
+	pinctrl-names = "default", "sleep";
 	pinctrl-0 = <&pinctrl_kpp_1>;
+	pinctrl-1 = <&pinctrl_kpp_1_sleep>;
 	linux,keymap = <
 			0x00000067      /* KEY_UP */
 			0x0001006c      /* KEY_DOWN */
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index 08307f6..32b12c2 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -932,9 +932,20 @@
 							MX6SL_PAD_KEY_ROW0__KEY_ROW0      0x1b010
 							MX6SL_PAD_KEY_ROW1__KEY_ROW1      0x1b010
 							MX6SL_PAD_KEY_ROW2__KEY_ROW2      0x1b0b0
-							MX6SL_PAD_KEY_COL0__KEY_COL0      0x80000000
-							MX6SL_PAD_KEY_COL1__KEY_COL1      0x80000000
-							MX6SL_PAD_KEY_COL2__KEY_COL2      0x80000000
+							MX6SL_PAD_KEY_COL0__KEY_COL0      0x110b0
+							MX6SL_PAD_KEY_COL1__KEY_COL1      0x110b0
+							MX6SL_PAD_KEY_COL2__KEY_COL2      0x110b0
+						>;
+					};
+
+					pinctrl_kpp_1_sleep: kpp_grp_1_sleep {
+						fsl,pins = <
+							MX6SL_PAD_KEY_ROW0__GPIO3_IO25    0x3080
+							MX6SL_PAD_KEY_ROW1__GPIO3_IO27    0x3080
+							MX6SL_PAD_KEY_ROW2__GPIO3_IO29    0x3080
+							MX6SL_PAD_KEY_COL0__GPIO3_IO24    0x3080
+							MX6SL_PAD_KEY_COL1__GPIO3_IO26    0x3080
+							MX6SL_PAD_KEY_COL2__GPIO3_IO28    0x3080
 						>;
 					};
 				};
-- 
1.7.5.4

