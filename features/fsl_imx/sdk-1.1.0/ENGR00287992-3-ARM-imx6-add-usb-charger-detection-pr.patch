From 7ab9f9b5a0ccd7fe65f6b3b48f25efeef07d6bac Mon Sep 17 00:00:00 2001
From: Peter Chen <peter.chen@freescale.com>
Date: Thu, 14 Nov 2013 14:35:06 +0800
Subject: [PATCH 0240/1074] ENGR00287992-3 ARM: imx6: add usb charger
 detection property

Besides, we have added anatop phandle at usbotg node to
access anatop register.

Signed-off-by: Peter Chen <peter.chen@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6qdl.dtsi   |    1 +
 arch/arm/boot/dts/imx6sl-evk.dts |    1 +
 arch/arm/boot/dts/imx6sl.dtsi    |    1 +
 3 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index a6c2982..7abe6430 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -1460,6 +1460,7 @@
 				clocks = <&clks 162>;
 				fsl,usbphy = <&usbphy1>;
 				fsl,usbmisc = <&usbmisc 0>;
+				fsl,anatop = <&anatop>;
 				status = "disabled";
 			};
 
diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index ceb29bc..94a2572 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -579,6 +579,7 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_usbotg1_1>;
 	disable-over-current;
+	imx6-usb-charger-detection;
 	status = "okay";
 };
 
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index 70e531b..f0f804a 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -1074,6 +1074,7 @@
 				clocks = <&clks IMX6SL_CLK_USBOH3>;
 				fsl,usbphy = <&usbphy1>;
 				fsl,usbmisc = <&usbmisc 0>;
+				fsl,anatop = <&anatop>;
 				status = "disabled";
 			};
 
-- 
1.7.5.4

