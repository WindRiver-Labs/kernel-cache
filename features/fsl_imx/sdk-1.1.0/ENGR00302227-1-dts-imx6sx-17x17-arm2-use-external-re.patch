From abbfc439bb1a229eb24bac725546b0e53c3f2bec Mon Sep 17 00:00:00 2001
From: Dong Aisheng <b29396@freescale.com>
Date: Wed, 5 Mar 2014 15:20:14 +0800
Subject: [PATCH 0301/1074] ENGR00302227-1 dts:imx6sx-17x17-arm2: use external
 regulator for SDB

With using external regulator, we will be able to shutdown the power
for the card during suspend.

Signed-off-by: Dong Aisheng <b29396@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-17x17-arm2.dts |   11 +++++++++++
 1 files changed, 11 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-17x17-arm2.dts b/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
index 77cf961..51cbab8 100644
--- a/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
+++ b/arch/arm/boot/dts/imx6sx-17x17-arm2.dts
@@ -51,6 +51,14 @@
 			enable-active-high;
 		};
 
+		reg_sdb_vmmc: sdb_vmmc{
+			compatible = "regulator-fixed";
+			regulator-name = "SD2_SPWR";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			gpio = <&gpio2 11 GPIO_ACTIVE_LOW>;
+		};
+
 		reg_usb_otg1_vbus: usb_otg1_vbus {
 			compatible = "regulator-fixed";
 			regulator-name = "usb_otg1_vbus";
@@ -271,6 +279,8 @@
 				MX6SX_PAD_QSPI1B_DATA0__GPIO4_IO_24	0x80000000
 				/* CAN2_ERR_B */
 				MX6SX_PAD_QSPI1B_SS0_B__GPIO4_IO_30     0x80000000
+				/* SD2_PWROFF */
+				MX6SX_PAD_KEY_COL1__GPIO2_IO_11		0x17059
 			>;
 		};
 	};
@@ -392,6 +402,7 @@
 	wp-gpios = <&gpio2 15 0>;
 	keep-power-in-suspend;
 	enable-sdio-wakeup;
+	vmmc-supply = <&reg_sdb_vmmc>;
 	status = "okay";
 };
 
-- 
1.7.5.4

