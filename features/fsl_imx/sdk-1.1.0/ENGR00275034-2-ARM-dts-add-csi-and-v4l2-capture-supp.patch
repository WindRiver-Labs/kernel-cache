From b0d91f2963304096d2545c74a82f89618adf5546 Mon Sep 17 00:00:00 2001
From: Robby Cai <R63905@freescale.com>
Date: Thu, 5 Sep 2013 22:50:39 +0800
Subject: [PATCH 0152/1074] ENGR00275034-2 ARM: dts: add csi and v4l2 capture
 support on imx6sl-evk

Add CSI module and v4l2 capture support on imx6sl-evk board

Note: CSI has pin conflict with EPDC on imx6sl-evk board.
To use CSI, we can use 'fdt' command in U-Boot to disable EPDC:

fdt addr ${fdt_addr}
fdt set /soc/aips-bus@02000000/epdc@020f4000 status disable

Signed-off-by: Robby Cai <R63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sl-evk.dts |    9 +++++++++
 arch/arm/boot/dts/imx6sl.dtsi    |   25 +++++++++++++++++++++++++
 2 files changed, 34 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index a9c722b..2830479 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -100,6 +100,11 @@
 		default-brightness-level = <6>;
 	};
 
+	csi_v4l2_cap {
+		compatible = "fsl,imx6sl-csi-v4l2";
+		status = "okay";
+	};
+
 	pxp_v4l2_out {
 		compatible = "fsl,imx6sl-pxp-v4l2";
 		status = "okay";
@@ -162,6 +167,10 @@
 	};
 };
 
+&csi {
+	status = "okay";
+};
+
 &epdc {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_epdc_0>;
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index f7ffb1e..30a59a8 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -600,6 +600,29 @@
 					};
 				};
 
+				csi {
+					pinctrl_csi_0: csigrp-0 {
+						fsl,pins = <
+							MX6SL_PAD_EPDC_GDRL__CSI_MCLK	0x110b0
+							MX6SL_PAD_EPDC_GDCLK__CSI_PIXCLK 0x110b0
+							MX6SL_PAD_EPDC_GDSP__CSI_VSYNC	0x110b0
+							MX6SL_PAD_EPDC_GDOE__CSI_HSYNC	0x110b0
+							MX6SL_PAD_EPDC_SDLE__CSI_DATA09	0x110b0
+							MX6SL_PAD_EPDC_SDCLK__CSI_DATA08 0x110b0
+							MX6SL_PAD_EPDC_D7__CSI_DATA07	0x110b0
+							MX6SL_PAD_EPDC_D6__CSI_DATA06	0x110b0
+							MX6SL_PAD_EPDC_D5__CSI_DATA05	0x110b0
+							MX6SL_PAD_EPDC_D4__CSI_DATA04	0x110b0
+							MX6SL_PAD_EPDC_D3__CSI_DATA03	0x110b0
+							MX6SL_PAD_EPDC_D2__CSI_DATA02	0x110b0
+							MX6SL_PAD_EPDC_D1__CSI_DATA01	0x110b0
+							MX6SL_PAD_EPDC_D0__CSI_DATA00	0x110b0
+							MX6SL_PAD_EPDC_SDSHR__GPIO1_IO26 0x80000000
+							MX6SL_PAD_EPDC_SDOE__GPIO1_IO25	 0x80000000
+						>;
+					};
+				};
+
 				epdc {
 					pinctrl_epdc_0: epdcgrp-0 {
 						fsl,pins = <
@@ -936,8 +959,10 @@
 			};
 
 			csi: csi@020e4000 {
+				compatible = "fsl,imx6sl-csi";
 				reg = <0x020e4000 0x4000>;
 				interrupts = <0 7 0x04>;
+				status = "disabled";
 			};
 
 			spdc: spdc@020e8000 {
-- 
1.7.5.4

