From c6295797650b403930559ef1c55087189006677e Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Fri, 28 Nov 2014 21:45:58 +0800
Subject: [PATCH 0547/1074] MLK-9935 imx6sx: use imx_clk_gate2_flags instead
 of imx_clk_gate for CSI clock

imx_clk_gate2_flags() uses CGR value 2b'11, while imx_clk_gate()
use CGR value 2b'01. We need 2b'11 which means "clock is on during
all modes, except STOP mode".

Signed-off-by: Robby Cai <r63905@freescale.com>
(cherry picked from commit 51841a54f6746ce06b16a3297014069a2b3b97c2)
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/mach-imx/clk-imx6sx.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/arch/arm/mach-imx/clk-imx6sx.c b/arch/arm/mach-imx/clk-imx6sx.c
index c5bb93e..32ca7f4 100644
--- a/arch/arm/mach-imx/clk-imx6sx.c
+++ b/arch/arm/mach-imx/clk-imx6sx.c
@@ -369,7 +369,7 @@ static void __init imx6sx_clocks_init(struct device_node *ccm_node)
 	clks[IMX6SX_CLK_CANFD]        = imx_clk_gate2("canfd",         "can_podf",          base + 0x6c, 30);
 
 	/* CCGR2 */
-	clks[IMX6SX_CLK_CSI]          = imx_clk_gate("csi",           "csi_podf",          base + 0x70, 2);
+	clks[IMX6SX_CLK_CSI]          = imx_clk_gate2_flags("csi",           "csi_podf",          base + 0x70, 2, CLK_SET_RATE_PARENT);
 	clks[IMX6SX_CLK_I2C1]         = imx_clk_gate2("i2c1",          "perclk",            base + 0x70, 6);
 	clks[IMX6SX_CLK_I2C2]         = imx_clk_gate2("i2c2",          "perclk",            base + 0x70, 8);
 	clks[IMX6SX_CLK_I2C3]         = imx_clk_gate2("i2c3",          "perclk",            base + 0x70, 10);
-- 
1.7.5.4

