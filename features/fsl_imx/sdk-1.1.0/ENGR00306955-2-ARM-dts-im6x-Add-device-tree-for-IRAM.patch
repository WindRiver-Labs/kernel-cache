From f23ffd995a7671547e2f3134ae3efd047cfaf4e1 Mon Sep 17 00:00:00 2001
From: Ranjani Vaidyanathan <Ranjani.Vaidyanathan@freescale.com>
Date: Thu, 3 Apr 2014 14:14:10 -0500
Subject: [PATCH 0378/1074] ENGR00306955-2 ARM:dts:im6x: Add device tree for
 IRAM used by low power code.

Ensure that fsl,lpm-sram is only set for the memory that is
used by low power code in the dts files.

Signed-off-by: Ranjani Vaidyanathan <Ranjani.Vaidyanathan@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6dl.dtsi |    8 +++++++-
 arch/arm/boot/dts/imx6q.dtsi  |    8 +++++++-
 arch/arm/boot/dts/imx6sl.dtsi |    6 ++++++
 arch/arm/boot/dts/imx6sx.dtsi |    2 +-
 4 files changed, 21 insertions(+), 3 deletions(-)

diff --git a/arch/arm/boot/dts/imx6dl.dtsi b/arch/arm/boot/dts/imx6dl.dtsi
index 91fb4c2..dd35551 100644
--- a/arch/arm/boot/dts/imx6dl.dtsi
+++ b/arch/arm/boot/dts/imx6dl.dtsi
@@ -63,7 +63,13 @@
 			pu-supply = <&reg_pu>;
 		};
 
-		ocram: sram@00900000 {
+		ocrams: sram@00900000 {
+			compatible = "fsl,lpm-sram";
+			reg = <0x00900000 0x4000>;
+			clocks = <&clks 142>;
+		};
+
+		ocram: sram@00904000 {
 			compatible = "mmio-sram";
 			reg = <0x00904000 0x1C000>;
 			clocks = <&clks 142>;
diff --git a/arch/arm/boot/dts/imx6q.dtsi b/arch/arm/boot/dts/imx6q.dtsi
index f849e10..06576ac 100644
--- a/arch/arm/boot/dts/imx6q.dtsi
+++ b/arch/arm/boot/dts/imx6q.dtsi
@@ -96,7 +96,13 @@
 			pu-supply = <&reg_pu>;
 		};
 
-		ocram: sram@00900000 {
+		ocrams: sram@00900000 {
+			compatible = "fsl,lpm-sram";
+			reg = <0x00900000 0x4000>;
+			clocks = <&clks 142>;
+		};
+
+		ocram: sram@00904000 {
 			compatible = "mmio-sram";
 			reg = <0x00904000 0x3C000>;
 			clocks = <&clks 142>;
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index 7cafbea..0adaa43 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -595,6 +595,12 @@
 				#reset-cells = <1>;
 			};
 
+			ocrams: sram@00900000 {
+				compatible = "fsl,lpm-sram";
+				reg = <0x00900000 0x4000>;
+				clocks = <&clks IMX6SL_CLK_OCRAM>;
+			};
+
 			gpc: gpc@020dc000 {
 				compatible = "fsl,imx6sl-gpc", "fsl,imx6q-gpc";
 				reg = <0x020dc000 0x4000>;
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index efc051a..99293cd 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -94,7 +94,7 @@
 		};
 
 		ocrams: sram@008f8000 {
-			compatible = "fsl,lpm-sram","mmio-sram";
+			compatible = "fsl,lpm-sram";
 			reg = <0x008f8000 0x4000>;
 			clocks = <&clks IMX6SX_CLK_OCRAM_S>;
 		};
-- 
1.7.5.4

