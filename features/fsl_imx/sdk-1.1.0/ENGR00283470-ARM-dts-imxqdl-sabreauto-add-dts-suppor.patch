From 7c6d2689c4869d769625560d8346bf97a0904f9b Mon Sep 17 00:00:00 2001
From: Luwei Zhou <b45643@freescale.com>
Date: Sat, 12 Oct 2013 13:48:13 +0800
Subject: [PATCH 0208/1074] ENGR00283470 ARM: dts: imxqdl-sabreauto: add dts
 support for MLB150

This patch add MLB150 dts support on SabreAuto.The PAD setting
is aligned to 3.0.35 kernel.

Signed-off-by: Luwei Zhou <b45643@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6qdl-sabreauto.dtsi |    5 +++++
 arch/arm/boot/dts/imx6qdl.dtsi           |   13 +++++++++----
 2 files changed, 14 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
index cae05dd..4d1acc8 100644
--- a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
@@ -386,3 +386,8 @@
 	v_channel = <0>;
 	lanes = <1>;
 };
+&mlb {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_mlb_2>;
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index 0631aa9..92280fa 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -1025,9 +1025,9 @@
 
 					pinctrl_mlb_2: mlbgrp-2 {
 						fsl,pins = <
-							MX6QDL_PAD_ENET_TXD1__MLB_CLK 0x71
-							MX6QDL_PAD_GPIO_6__MLB_SIG    0x71
-							MX6QDL_PAD_GPIO_2__MLB_DATA   0x71
+							MX6QDL_PAD_ENET_TXD1__MLB_CLK 0x80000000
+							MX6QDL_PAD_GPIO_6__MLB_SIG    0x80000000
+							MX6QDL_PAD_GPIO_2__MLB_DATA   0x80000000
 						>;
 					};
 				};
@@ -1499,9 +1499,14 @@
 				status = "disabled";
 			};
 
-			mlb@0218c000 {
+			mlb: mlb@0218c000 {
+				compatible = "fsl,imx6q-mlb150";
 				reg = <0x0218c000 0x4000>;
 				interrupts = <0 53 0x04 0 117 0x04 0 126 0x04>;
+				clocks = <&clks 139>, <&clks 175>;
+				clock-names = "mlb", "pll8_mlb";
+				iram = <&ocram>;
+				status = "disabled";
 			};
 
 			usdhc1: usdhc@02190000 {
-- 
1.7.5.4

