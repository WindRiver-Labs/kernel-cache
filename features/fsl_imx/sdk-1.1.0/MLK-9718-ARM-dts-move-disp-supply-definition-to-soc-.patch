From e88c55b91be7f03bf934ec5a129024a73fd479c3 Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Wed, 22 Oct 2014 18:49:39 +0800
Subject: [PATCH 0497/1074] MLK-9718 ARM: dts: move disp-supply definition to
 soc-specific dts file

The disp-supply definition should be SoC-specific not board-related,
so move it into imx6sx.dtsi.

This issue was originally found on imx6sx sabreauto board with the
error log:

mxsfb 2224000.lcdif: mxs wait for vsync timeout
mxsfb 2224000.lcdif: timeout when waiting for flip irq

This patch fixed it.

Signed-off-by: Robby Cai <r63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb.dts |    2 --
 arch/arm/boot/dts/imx6sx.dtsi    |    2 ++
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index ff8903a..60fffbb 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -507,7 +507,6 @@
 	pinctrl-0 = <&pinctrl_lcdif_dat_0
 		     &pinctrl_lcdif_ctrl_0>;
 	lcd-supply = <&reg_lcd_3v3>;
-	disp-supply = <&disp_dummy>;
 	display = <&display0>;
 	status = "disabled";
 
@@ -538,7 +537,6 @@
 
 &lcdif2 {
 	display = <&display1>;
-	disp-supply = <&disp_dummy>;
 	disp-dev = "ldb";
 	status = "okay";
 
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index afb6809..5afc7bc 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -910,6 +910,7 @@
 						<&clks IMX6SX_CLK_LCDIF_APB>,
 						<&clks IMX6SX_CLK_DISPLAY_AXI>;
 					clock-names = "pix", "axi", "disp_axi";
+					disp-supply = <&disp_dummy>;
 					status = "disabled";
 				};
 
@@ -921,6 +922,7 @@
 						<&clks IMX6SX_CLK_LCDIF_APB>,
 						<&clks IMX6SX_CLK_DISPLAY_AXI>;
 					clock-names = "pix", "axi", "disp_axi";
+					disp-supply = <&disp_dummy>;
 					status = "disabled";
 				};
 
-- 
1.7.5.4

