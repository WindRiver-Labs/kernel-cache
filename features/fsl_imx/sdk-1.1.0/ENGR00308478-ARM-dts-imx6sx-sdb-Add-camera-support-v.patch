From e56847baebfaa270ab42d4142de9c83aae32fb03 Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Tue, 15 Apr 2014 16:11:37 +0800
Subject: [PATCH 0382/1074] ENGR00308478 ARM: dts: imx6sx-sdb: Add camera
 support via the camera adapter

Previously we support camera features via mx51 expansion board due to footprint
mirror issue on imx6sx sdb board. Now we switch to the adapter board
(sch700-28342) to support same features. And the support via mx51 expansion
board is deprecated.

The changes include
- Change the PINs setting for power and reset signal.
- Add status flag to avoid the conflict use of LCD1_RESET pin by LCDIF1/CSI.
  For LCDIF1, it's used as LCD_PWR_EN, for CSI/camera, as RESET pin.

Signed-off-by: Robby Cai <r63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts |    6 ++++++
 arch/arm/boot/dts/imx6sx-sdb.dts        |    5 +++--
 arch/arm/boot/dts/imx6sx.dtsi           |    4 ++--
 3 files changed, 11 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts b/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
index dccbcb4..b066143 100644
--- a/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
@@ -12,6 +12,12 @@
 	csi1_v4l2_cap {
 		status = "disabled";
 	};
+
+	regulators {
+		reg_lcd_3v3: lcd-3v3 {
+			status = "okay";
+		};
+	};
 };
 
 &csi1 {
diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index ede4b54..27aa03c 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -56,6 +56,7 @@
 			regulator-name = "lcd-3v3";
 			gpio = <&gpio3 27 0>;
 			enable-active-high;
+			status = "disabled";
 		};
 
 		reg_sd3_vmmc: sd3_vmmc{
@@ -273,8 +274,8 @@
 		clock-names = "csi_mclk";
 		AVDD-supply = <&vgen3_reg>;  /* 2.8v */
 		DVDD-supply = <&vgen2_reg>;  /* 1.5v*/
-		pwn-gpios = <&gpio3 26 1>;
-		rst-gpios = <&gpio3 25 0>;
+		pwn-gpios = <&gpio3 28 1>;
+		rst-gpios = <&gpio3 27 0>;
 		csi_id = <0>;
 		mclk = <24000000>;
 		mclk_source = <0>;
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index 9a130c2..2d07a79 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -888,8 +888,8 @@
 				MX6SX_PAD_LCD1_DATA10__CSI1_DATA_7	0x110b0
 				MX6SX_PAD_LCD1_DATA09__CSI1_DATA_8	0x110b0
 				MX6SX_PAD_LCD1_DATA08__CSI1_DATA_9	0x110b0
-				MX6SX_PAD_LCD1_ENABLE__GPIO3_IO_25	0x80000000
-				MX6SX_PAD_LCD1_HSYNC__GPIO3_IO_26	0x80000000
+				MX6SX_PAD_LCD1_RESET__GPIO3_IO_27	0x80000000
+				MX6SX_PAD_LCD1_VSYNC__GPIO3_IO_28	0x80000000
 			>;
 		};
 
-- 
1.7.5.4

