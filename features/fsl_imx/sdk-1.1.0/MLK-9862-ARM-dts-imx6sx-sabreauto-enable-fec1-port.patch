From def4a85151e75ca5122e39fe908abec5b54f0afe Mon Sep 17 00:00:00 2001
From: Fugang Duan <b38611@freescale.com>
Date: Tue, 18 Nov 2014 12:39:19 +0800
Subject: [PATCH 0536/1074] MLK-9862 ARM: dts: imx6sx-sabreauto: enable fec1
 port

FEC1 port was disabled since the ethernet daughter board cannot
plugin to the ethernet EXP port in socket board that is blocked
by the socket. For solid board, it is not problem, so enable FEC1
port in default.

(cherry-picked from commit f0c7b2324a3c539846c001599280c262c6f6b71d)

Signed-off-by: Fugang Duan <B38611@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sabreauto.dts |   19 ++++++++++++++++++-
 1 files changed, 18 insertions(+), 1 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sabreauto.dts b/arch/arm/boot/dts/imx6sx-sabreauto.dts
index d340209..a7dde85 100644
--- a/arch/arm/boot/dts/imx6sx-sabreauto.dts
+++ b/arch/arm/boot/dts/imx6sx-sabreauto.dts
@@ -30,6 +30,13 @@
 		};
 	};
 
+	max7322_reset: max7322-reset {
+		compatible = "gpio-reset";
+		reset-gpios = <&gpio4 22 GPIO_ACTIVE_LOW>;
+		reset-delay-us = <1>;
+		#reset-cells = <0>;
+	};
+
 	csi1_v4l2_cap {
 		compatible = "fsl,imx6sx-csi-v4l2", "fsl,imx6sl-csi-v4l2";
 		csi_id = <0>;
@@ -250,13 +257,15 @@
 };
 
 &fec1 {
+	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_enet1_1>;
 	phy-mode = "rgmii";
 	phy-id = <1>;
 	fsl,num_tx_queues=<3>;
 	fsl,num_rx_queues=<3>;
+	pinctrl-assert-gpios = <&max7322 0 GPIO_ACTIVE_HIGH>;
 	fsl,magic-packet;
-	status = "disabled";
+	status = "okay";
 };
 
 &fec2 {
@@ -439,6 +448,14 @@
 			compatible = "si476x-codec";
 		};
 	};
+
+	max7322: gpio@68 {
+		compatible = "maxim,max7322";
+		reg = <0x68>;
+		gpio-controller;
+		#gpio-cells = <2>;
+		resets = <&max7322_reset>;
+	};
 };
 
 &spdif {
-- 
1.7.5.4

