From 95c222659bcd030ff2b72e991e8208201907e952 Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Fri, 28 Nov 2014 21:25:05 +0800
Subject: [PATCH 0546/1074] MLK-9934 ARM: dts: imx6sx-sdb: disable PWM3 when
 not used for LCD backlight

Previously PWM3 is always enabled even when the LCDIF1 is not used.
This is not correct, since the default DTS file enables CSI while
disable LCDIF1 due to pin conflict between CSI and LCDIF1 on imx6sx-sdb board.

This patch fixed it.

Signed-off-by: Robby Cai <r63905@freescale.com>
(cherry picked from commit f77c15ccab9e8a68870048d4964b2dd15b3d4c0c)
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts |    4 ++++
 arch/arm/boot/dts/imx6sx-sdb.dts        |    1 +
 2 files changed, 5 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts b/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
index b066143..91da375 100644
--- a/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb-lcdif1.dts
@@ -9,6 +9,10 @@
 #include "imx6sx-sdb.dts"
 
 / {
+	backlight1 {
+		status = "enabled";
+	};
+
 	csi1_v4l2_cap {
 		status = "disabled";
 	};
diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index 623df2e..46061e1 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -21,6 +21,7 @@
 		brightness-levels = <0 4 8 16 32 64 128 255>;
 		default-brightness-level = <6>;
 		fb-names = "mxs-lcdif0";
+		status = "disabled";
 	};
 
 	backlight2 {
-- 
1.7.5.4

