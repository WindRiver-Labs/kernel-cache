From 4fd04299869c693dc7ce33770df8e3fc67d335bf Mon Sep 17 00:00:00 2001
From: Shengjiu Wang <shengjiu.wang@freescale.com>
Date: Mon, 13 Oct 2014 11:43:01 +0800
Subject: [PATCH 0490/1074] MLK-9684-10: ARM: dts: imx6sx-sabreauto: enable
 sound cs42888

Add device tree for sound-cs42888 to enable this sound card.

Signed-off-by: Shengjiu Wang <shengjiu.wang@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sabreauto.dts |   39 +++++++++++++++++++++++++++++--
 1 files changed, 36 insertions(+), 3 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sabreauto.dts b/arch/arm/boot/dts/imx6sx-sabreauto.dts
index cde991d..a96fb50 100644
--- a/arch/arm/boot/dts/imx6sx-sabreauto.dts
+++ b/arch/arm/boot/dts/imx6sx-sabreauto.dts
@@ -23,10 +23,10 @@
 	};
 
 	clocks {
-	        codec_osc: codec_osc {
+	        codec_osc: anaclk2 {
 		        #clock-cells = <0>;
 		        compatible = "fixed-clock";
-		        clock-frequency = <12000000>;
+		        clock-frequency = <24576000>;
 		};
 	};
 
@@ -52,6 +52,14 @@
 	regulators {
 		compatible = "simple-bus";
 
+		reg_audio: cs42888_supply {
+			compatible = "regulator-fixed";
+			regulator-name = "cs42888_supply";
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
 		reg_lcd_3v3: lcd-3v3 {
 			compatible = "regulator-fixed";
 			regulator-name = "lcd-3v3";
@@ -102,6 +110,15 @@
 			enable-active-high;
 		};
 	};
+
+	sound-cs42888 {
+		compatible = "fsl,imx6-sabreauto-cs42888",
+				"fsl,imx-audio-cs42888";
+		model = "imx-cs42888";
+		esai-controller = <&esai>;
+		asrc-controller = <&asrc_p2p>;
+		audio-codec = <&codec>;
+	};
 };
 
 &iomuxc {
@@ -119,8 +136,13 @@
 	};
 };
 
-&fec1 {
+&esai {
 	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_esai_2>;
+	status = "okay";
+};
+
+&fec1 {
 	pinctrl-0 = <&pinctrl_enet1_1>;
 	phy-mode = "rgmii";
 	phy-id = <1>;
@@ -269,6 +291,17 @@
 		interrupts = <22 2>;
 		wakeup-gpios = <&gpio6 22 0>;
 	};
+
+	codec: cs42888@048 {
+		compatible = "cirrus,cs42888";
+		reg = <0x048>;
+		clocks = <&codec_osc 0>;
+		clock-names = "mclk";
+		VA-supply = <&reg_audio>;
+		VD-supply = <&reg_audio>;
+		VLS-supply = <&reg_audio>;
+		VLC-supply = <&reg_audio>;
+	};
 };
 
 &i2c3 {
-- 
1.7.5.4

