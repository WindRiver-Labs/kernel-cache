From 508b4566ceb69a41d9903f98de4287e430f75912 Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Thu, 13 Nov 2014 10:45:23 +0800
Subject: [PATCH 0525/1074] MLK-9841-1 clk: imx: add new api
 imx_clk_gate2_flags

need to call imx_clk_gate2 with specific flags for i.mx6sl CSI case.
we can not just use imx_clk_gate() because clock gating bits 2b'01
seems not work for CSI while 2b'11 works. However imx_clk_gate2()
has the fixed flags which does not fit CSI case.

Signed-off-by: Robby Cai <r63905@freescale.com>
(cherry picked from commit 6ec90260a7431829cd5a7a05c9a0635f0236245e)
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/mach-imx/clk.h |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-imx/clk.h b/arch/arm/mach-imx/clk.h
index 8feccf1..096a8aa7 100644
--- a/arch/arm/mach-imx/clk.h
+++ b/arch/arm/mach-imx/clk.h
@@ -43,6 +43,13 @@ static inline struct clk *imx_clk_gate2(const char *name, const char *parent,
 			reg, shift, 0, &imx_ccm_lock, NULL);
 }
 
+static inline struct clk *imx_clk_gate2_flags(const char *name, const char *parent,
+		void __iomem *reg, u8 shift, unsigned long flags)
+{
+	return clk_register_gate2(NULL, name, parent,
+			flags, reg, shift, 0, &imx_ccm_lock, NULL);
+}
+
 static inline struct clk *imx_clk_gate2_shared(const char *name,
 		const char *parent, void __iomem *reg, u8 shift,
 		unsigned int *share_count)
-- 
1.7.5.4

