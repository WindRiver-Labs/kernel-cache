From 505d2e3110bd64a501f2037c7da79ebea89a97e7 Mon Sep 17 00:00:00 2001
From: Fugang Duan <b38611@freescale.com>
Date: Wed, 27 Aug 2014 18:44:27 +0800
Subject: [PATCH 0471/1074] ENGR00329844-04 ARM: dts: imx6qdl: add uart4 dte
 pad set for sabreauto board

Add imx6qdl-sabreauto board uart3 DTE pad set. To avoid a flood of
dts files, there comment out DTE pinctrl set. If user want to test
DTE mode, it needs to rebuild the DTB file.

Signed-off-by: Fugang Duan <B38611@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6qdl-sabreauto.dtsi |    3 +++
 arch/arm/boot/dts/imx6qdl.dtsi           |    9 +++++++++
 2 files changed, 12 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
index eea2116..0c826a7 100644
--- a/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-sabreauto.dtsi
@@ -319,6 +319,9 @@
 			       <&max7310_c 3 GPIO_ACTIVE_HIGH>; /* RXD and TXD */
 	fsl,uart-has-rtscts;
 	status = "okay";
+	/* for DTE mode, add below change */
+	/* fsl,dte-mode; */
+	/* pinctrl-0 = <&pinctrl_uart3dte_1>; */
 };
 
 &gpmi {
diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index 9b7c1e3..3b0656e 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -1790,5 +1790,14 @@
 				MX6QDL_PAD_GPIO_6__ENET_IRQ	      0x000b1
 			>;
 		};
+
+		pinctrl_uart3dte_1: uart3dtegrp-1 {
+			fsl,pins = <
+				MX6QDL_PAD_SD4_CLK__UART3_TX_DATA 0x1b0b1
+				MX6QDL_PAD_SD4_CMD__UART3_RX_DATA 0x1b0b1
+				MX6QDL_PAD_EIM_D30__UART3_RTS_B   0x1b0b1
+				MX6QDL_PAD_EIM_EB3__UART3_CTS_B   0x1b0b1
+			>;
+		};
 	};
 };
-- 
1.7.5.4

