From 3887ddf25c310fe01794c57835112d13c785ecfe Mon Sep 17 00:00:00 2001
From: Robby Cai <R63905@freescale.com>
Date: Mon, 12 Aug 2013 15:07:18 +0800
Subject: [PATCH 0062/1074] ENGR00274412-2 ARM: dts: enable ePxP for imx6dl_sd
 and imx6sl_evk

Enable ePxP in DTS for imx6 duallite sabresd and imx6 sololite evk board.

Signed-off-by: Robby Cai <R63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 .../devicetree/bindings/video/fsl,pxp.txt          |   30 ++++++++++++++++++++
 arch/arm/boot/dts/imx6dl-sabresd.dts               |    4 ++
 arch/arm/boot/dts/imx6dl.dtsi                      |    4 ++
 arch/arm/boot/dts/imx6sl-evk.dts                   |    4 ++
 arch/arm/boot/dts/imx6sl.dtsi                      |    4 ++
 5 files changed, 46 insertions(+), 0 deletions(-)
 create mode 100644 Documentation/devicetree/bindings/video/fsl,pxp.txt

diff --git a/Documentation/devicetree/bindings/video/fsl,pxp.txt b/Documentation/devicetree/bindings/video/fsl,pxp.txt
new file mode 100644
index 0000000..5b9ea40
--- /dev/null
+++ b/Documentation/devicetree/bindings/video/fsl,pxp.txt
@@ -0,0 +1,30 @@
+* Freescale PxP Controller for i.MX6DL, i.MX6SL
+
+Required properties for PxP controller:
+- compatible: should be "fsl,<soc>-pxp-dma"
+- reg: <base addr, range> contains pxp register base address and range
+- interrupts: <type num flag> where type is an interrupt type, num is the
+  interrupt number and flag is a field that level/trigger information for
+  the interrupt.
+- clocks: the clock sources that pxp depends on.
+- clock-names: the name is related to the clock source
+
+Required properties for pxp on specified board:
+- status: should be set to "okay" if want to use PxP
+
+Examples:
+for SOC imx6dl.dtsi:
+	pxp@020f0000 {
+		compatible = "fsl,imx6dl-pxp-dma";
+		reg = <0x020f0000 0x4000>;
+		interrupts = <0 98 0x04>;
+		clocks = <&clks 133>;
+		clock-names = "pxp-axi";
+		status = "disabled";
+	};
+
+
+for board imx6dl-sabresd.dts:
+	&pxp {
+		status = "okay";
+	};
diff --git a/arch/arm/boot/dts/imx6dl-sabresd.dts b/arch/arm/boot/dts/imx6dl-sabresd.dts
index 38f50fc..42a6bc1 100644
--- a/arch/arm/boot/dts/imx6dl-sabresd.dts
+++ b/arch/arm/boot/dts/imx6dl-sabresd.dts
@@ -21,6 +21,10 @@
 	sec_ipu_id = <0>;
 };
 
+&pxp {
+	status = "okay";
+};
+
 &mxcfb1 {
 	status = "okay";
 };
diff --git a/arch/arm/boot/dts/imx6dl.dtsi b/arch/arm/boot/dts/imx6dl.dtsi
index be59d34..a70ec29 100644
--- a/arch/arm/boot/dts/imx6dl.dtsi
+++ b/arch/arm/boot/dts/imx6dl.dtsi
@@ -67,8 +67,12 @@
 			};
 
 			pxp: pxp@020f0000 {
+				compatible = "fsl,imx6dl-pxp-dma";
 				reg = <0x020f0000 0x4000>;
 				interrupts = <0 98 0x04>;
+				clocks = <&clks 133>;
+				clock-names = "pxp-axi";
+				status = "disabled";
 			};
 
 			epdc: epdc@020f4000 {
diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index cc68e19..7aa11b08 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -133,3 +133,7 @@
 	cd-gpios = <&gpio3 22 0>;
 	status = "okay";
 };
+
+&pxp {
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index 28558f1..5f8a3e5 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -781,8 +781,12 @@
 			};
 
 			pxp: pxp@020f0000 {
+				compatible = "fsl,imx6sl-pxp-dma", "fsl,imx6dl-pxp-dma";
 				reg = <0x020f0000 0x4000>;
 				interrupts = <0 98 0x04>;
+				clocks = <&clks 111>;
+				clock-names = "pxp-axi";
+				status = "disabled";
 			};
 
 			epdc: epdc@020f4000 {
-- 
1.7.5.4

