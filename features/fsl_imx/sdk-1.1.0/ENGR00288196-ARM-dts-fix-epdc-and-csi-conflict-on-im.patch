From c87d832b8e9b4bf17dbe69e7f2250c8711fdac36 Mon Sep 17 00:00:00 2001
From: Robby Cai <R63905@freescale.com>
Date: Fri, 15 Nov 2013 17:21:16 +0800
Subject: [PATCH 0239/1074] ENGR00288196 ARM: dts: fix epdc and csi conflict
 on imx6sl evk

There is pinmux conflict for EPDC and I2C3 on imx6sl soc.
While on imx6sl evk board, the camera is attached on I2C3 bus, so the
EPDC function and CSI function can not be used at same time.
This patch removes the conflict in imx6sl-evk.dts file for EPDC function
and adds a new dts file for CSI function.

Signed-off-by: Robby Cai <R63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/Makefile           |    1 +
 arch/arm/boot/dts/imx6sl-evk-csi.dts |   27 +++++++++++++++++++++++++++
 arch/arm/boot/dts/imx6sl-evk.dts     |    6 +++---
 3 files changed, 31 insertions(+), 3 deletions(-)
 create mode 100644 arch/arm/boot/dts/imx6sl-evk-csi.dts

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 7787065..4354c2e 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -178,6 +178,7 @@ dtb-$(CONFIG_ARCH_MXC) += \
 	imx6q-udoo.dtb \
 	imx6q-wandboard.dtb \
 	imx6sl-evk.dtb \
+	imx6sl-evk-csi.dtb \
 	imx6sl-evk-ldo.dtb \
 	vf610-cosmic.dtb \
 	vf610-twr.dtb
diff --git a/arch/arm/boot/dts/imx6sl-evk-csi.dts b/arch/arm/boot/dts/imx6sl-evk-csi.dts
new file mode 100644
index 0000000..795be40
--- /dev/null
+++ b/arch/arm/boot/dts/imx6sl-evk-csi.dts
@@ -0,0 +1,27 @@
+/*
+ * Copyright (C) 2013 Freescale Semiconductor, Inc.
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License version 2 as
+ * published by the Free Software Foundation.
+ */
+
+#include "imx6sl-evk.dts"
+
+/ {
+	csi_v4l2_cap {
+		status = "okay";
+	};
+};
+
+&csi {
+	status = "okay";
+};
+
+&i2c3 {
+	status = "okay";
+};
+
+&epdc {
+	status = "disabled";
+};
diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index 8ad46d8..ceb29bc 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -102,7 +102,7 @@
 
 	csi_v4l2_cap {
 		compatible = "fsl,imx6sl-csi-v4l2";
-		status = "okay";
+		status = "disabled";
 	};
 
 	pxp_v4l2_out {
@@ -168,7 +168,7 @@
 };
 
 &csi {
-	status = "okay";
+	status = "disabled";
 };
 
 &ecspi1 {
@@ -437,7 +437,7 @@
 	clock-frequency = <100000>;
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_i2c3_1>;
-	status = "okay";
+	status = "disabled";
 
 	ov564x: ov564x@3c {
 		compatible = "ovti,ov564x";
-- 
1.7.5.4

