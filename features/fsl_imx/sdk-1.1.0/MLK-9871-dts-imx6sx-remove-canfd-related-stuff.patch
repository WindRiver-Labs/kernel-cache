From a4314c3df369a0d62e90f6f4a3f576ec9ec9b26b Mon Sep 17 00:00:00 2001
From: Dong Aisheng <b29396@freescale.com>
Date: Tue, 18 Nov 2014 16:32:03 +0800
Subject: [PATCH 0533/1074] MLK-9871 dts: imx6sx: remove canfd related stuff

The CANFD IP will be removed in final production, so remove
the CANFD related stuff in dts tree to avoid confusion.
The patch only removed user level in dts part, the exists related
clocks and pads in source code are still there which seems not matter.

Signed-off-by: Dong Aisheng <b29396@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/Makefile                  |    2 -
 arch/arm/boot/dts/imx6sx-sdb-canfd-reva.dts |   35 ------------------------
 arch/arm/boot/dts/imx6sx-sdb-canfd.dts      |   35 ------------------------
 arch/arm/boot/dts/imx6sx.dtsi               |   38 ---------------------------
 4 files changed, 0 insertions(+), 110 deletions(-)
 delete mode 100644 arch/arm/boot/dts/imx6sx-sdb-canfd-reva.dts
 delete mode 100644 arch/arm/boot/dts/imx6sx-sdb-canfd.dts

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 674c81b..d4c2a38 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -207,8 +207,6 @@ dtb-$(CONFIG_ARCH_MXC) += \
 	imx6sx-sdb-sai.dtb \
 	imx6sx-sdb-emmc.dtb \
 	imx6sx-sdb-m4.dtb \
-	imx6sx-sdb-canfd.dtb \
-	imx6sx-sdb-canfd-reva.dtb \
 	imx6sx-sabreauto.dtb \
 	vf610-cosmic.dtb \
 	vf610-twr.dtb
diff --git a/arch/arm/boot/dts/imx6sx-sdb-canfd-reva.dts b/arch/arm/boot/dts/imx6sx-sdb-canfd-reva.dts
deleted file mode 100644
index 8e8766d..0000000
--- a/arch/arm/boot/dts/imx6sx-sdb-canfd-reva.dts
+++ /dev/null
@@ -1,35 +0,0 @@
-/*
- * Copyright (C) 2014 Freescale Semiconductor, Inc.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * published by the Free Software Foundation.
- */
-
-#include "imx6sx-sdb-reva.dts"
-
-/*
- * flexcan and canfd are sharing the same pads, so disable flexcan to
- * enable canfd.
- * There's a trick here that the tranceiver configuration gpios are still
- * got from the flexcan node since they're using the same tranceiver.
- */
-&flexcan1 {
-	status = "disabled";
-};
-
-&flexcan2 {
-	status = "disabled";
-};
-
-&canfd1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_canfd1_1>;
-	status = "okay";
-};
-
-&canfd2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_canfd2_1>;
-	status = "okay";
-};
diff --git a/arch/arm/boot/dts/imx6sx-sdb-canfd.dts b/arch/arm/boot/dts/imx6sx-sdb-canfd.dts
deleted file mode 100644
index 496f24a..0000000
--- a/arch/arm/boot/dts/imx6sx-sdb-canfd.dts
+++ /dev/null
@@ -1,35 +0,0 @@
-/*
- * Copyright (C) 2014 Freescale Semiconductor, Inc.
- *
- * This program is free software; you can redistribute it and/or modify
- * it under the terms of the GNU General Public License version 2 as
- * published by the Free Software Foundation.
- */
-
-#include "imx6sx-sdb.dts"
-
-/*
- * flexcan and canfd are sharing the same pads, so disable flexcan to
- * enable canfd.
- * There's a trick here that the tranceiver configuration gpios are still
- * got from the flexcan node since they're using the same tranceiver.
- */
-&flexcan1 {
-	status = "disabled";
-};
-
-&flexcan2 {
-	status = "disabled";
-};
-
-&canfd1 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_canfd1_1>;
-	status = "okay";
-};
-
-&canfd2 {
-	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_canfd2_1>;
-	status = "okay";
-};
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index 383f7a5..67157df 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -486,26 +486,6 @@
 				};
 			};
 
-			canfd1: canfd@020e8000 {
-				compatible = "bosch,m_can";
-				reg = <0x020e8000 0x4000>, <0x02298000 0x4000>;
-				reg-names = "canfd", "message_ram";
-				interrupts = <0 114 0x04>;
-				clocks = <&clks IMX6SX_CLK_CANFD>;
-				mram-cfg = <0x0 0 0 32 0 0 0 1>;
-				status = "disabled";
-			};
-
-			canfd2: canfd@020f0000 {
-				compatible = "bosch,m_can";
-				reg = <0x020f0000 0x4000>, <0x02298000 0x4000>;
-				reg-names = "canfd", "message_ram";
-				interrupts = <0 115 0x04>;
-				clocks = <&clks IMX6SX_CLK_CANFD>;
-				mram-cfg = <0x400 0 0 32 0 0 0 1>;
-				status = "disabled";
-			};
-
 			pwm1: pwm@02080000 {
 				#pwm-cells = <2>;
 				compatible = "fsl,imx6sx-pwm", "fsl,imx27-pwm";
@@ -1033,24 +1013,6 @@
 		};
 	};
 
-	canfd1 {
-		pinctrl_canfd1_1: canfd1grp-1 {
-			fsl,pins = <
-				MX6SX_PAD_QSPI1B_DQS__CANFD_TX1		0x1b0b0
-				MX6SX_PAD_QSPI1A_SS1_B__CANFD_RX1	0x1b0b0
-			>;
-		};
-	};
-
-	canfd2 {
-		pinctrl_canfd2_1: canfd2grp-1 {
-			fsl,pins = <
-				MX6SX_PAD_QSPI1B_SS1_B__CANFD_RX2	0x1b0b0
-				MX6SX_PAD_QSPI1A_DQS__CANFD_TX2		0x1b0b0
-			>;
-		};
-	};
-
 	csi {
 		pinctrl_csi_0: csigrp-0 {
 			fsl,pins = <
-- 
1.7.5.4

