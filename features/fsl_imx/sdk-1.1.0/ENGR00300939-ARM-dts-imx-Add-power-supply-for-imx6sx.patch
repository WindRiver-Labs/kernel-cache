From 8d1f0d1a6461601aaf93177cc12408e294ea5787 Mon Sep 17 00:00:00 2001
From: Sandor Yu <R01008@freescale.com>
Date: Wed, 26 Feb 2014 17:38:32 +0800
Subject: [PATCH 0295/1074] ENGR00300939 ARM: dts: imx: Add power supply for
 imx6sx sdb lcdif

-Change lcd1_reset pin to GPIO mode
-Add regulator reg_lcd_3v3 for lcdif

Signed-off-by: Sandor Yu <R01008@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb.dts |   12 ++++++++++++
 arch/arm/boot/dts/imx6sx.dtsi    |    2 +-
 2 files changed, 13 insertions(+), 1 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index 616ab56..1a85cf8 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -24,6 +24,17 @@
 	memory {
 		reg = <0x80000000 0x40000000>;
 	};
+
+	regulators {
+		compatible = "simple-bus";
+
+		reg_lcd_3v3: lcd-3v3 {
+			compatible = "regulator-fixed";
+			regulator-name = "lcd-3v3";
+			gpio = <&gpio3 27 0>;
+			enable-active-high;
+		};
+	};
 };
 
 &fec1 {
@@ -232,6 +243,7 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_lcdif_dat_0
 		     &pinctrl_lcdif_ctrl_0>;
+	lcd-supply = <&reg_lcd_3v3>;
 	display = <&display>;
 	status = "okay";
 
diff --git a/arch/arm/boot/dts/imx6sx.dtsi b/arch/arm/boot/dts/imx6sx.dtsi
index 2eaa905..59f9f87 100644
--- a/arch/arm/boot/dts/imx6sx.dtsi
+++ b/arch/arm/boot/dts/imx6sx.dtsi
@@ -702,7 +702,7 @@
 				MX6SX_PAD_LCD1_ENABLE__LCDIF1_ENABLE 0x1b0b0
 				MX6SX_PAD_LCD1_VSYNC__LCDIF1_VSYNC 0x1b0b0
 				MX6SX_PAD_LCD1_HSYNC__LCDIF1_HSYNC 0x1b0b0
-				MX6SX_PAD_LCD1_RESET__LCDIF1_RESET 0x1b0b0
+				MX6SX_PAD_LCD1_RESET__GPIO3_IO_27 0x1b0b0
 			>;
 		};
 	};
-- 
1.7.5.4

