From fcb2b8162f4c5345eeb7f6d46228f8030f1af634 Mon Sep 17 00:00:00 2001
From: Anson Huang <b20788@freescale.com>
Date: Fri, 28 Nov 2014 11:15:21 +0800
Subject: [PATCH 0545/1074] MLK-9928-1 arm: dts: imx6sx-m4: remove m4 node
 from shared memory

As M4's clk switch MUX is NOT a glitchless one, when M4 try to
switch its parent, it needs to be gated, so M4 can NOT switch its
parent by itself, need A9 to help do it.

Have to remove M4 from shared memory, it means M4's clk will be
managed by A9 completely.

Signed-off-by: Anson Huang <b20788@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sabreauto-m4.dts |    4 ++--
 arch/arm/boot/dts/imx6sx-sdb-m4.dts       |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sabreauto-m4.dts b/arch/arm/boot/dts/imx6sx-sabreauto-m4.dts
index 935a870..d6743cb 100644
--- a/arch/arm/boot/dts/imx6sx-sabreauto-m4.dts
+++ b/arch/arm/boot/dts/imx6sx-sabreauto-m4.dts
@@ -65,12 +65,12 @@
 };
 
 &clks {
-	fsl,shared-clks-number = <0x24>;
+	fsl,shared-clks-number = <0x23>;
 	fsl,shared-clks-index = <IMX6SX_CLK_PLL2_BUS IMX6SX_CLK_PLL2_PFD0
 			IMX6SX_CLK_PLL2_PFD2 IMX6SX_CLK_PLL3_USB_OTG
 			IMX6SX_CLK_PLL3_PFD1 IMX6SX_CLK_PLL3_PFD2
 			IMX6SX_CLK_PLL3_PFD3 IMX6SX_CLK_PLL4_AUDIO
-			IMX6SX_CLK_PLL5_VIDEO IMX6SX_CLK_M4
+			IMX6SX_CLK_PLL5_VIDEO
 			IMX6SX_CLK_OCRAM IMX6SX_CLK_CAN1_SERIAL
 			IMX6SX_CLK_CAN1_IPG IMX6SX_CLK_CAN2_SERIAL
 			IMX6SX_CLK_CAN2_IPG IMX6SX_CLK_CANFD
diff --git a/arch/arm/boot/dts/imx6sx-sdb-m4.dts b/arch/arm/boot/dts/imx6sx-sdb-m4.dts
index 9b789c8..f990062 100644
--- a/arch/arm/boot/dts/imx6sx-sdb-m4.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb-m4.dts
@@ -57,12 +57,12 @@
 };
 
 &clks {
-	fsl,shared-clks-number = <0x24>;
+	fsl,shared-clks-number = <0x23>;
 	fsl,shared-clks-index = <IMX6SX_CLK_PLL2_BUS IMX6SX_CLK_PLL2_PFD0
 			IMX6SX_CLK_PLL2_PFD2 IMX6SX_CLK_PLL3_USB_OTG
 			IMX6SX_CLK_PLL3_PFD1 IMX6SX_CLK_PLL3_PFD2
 			IMX6SX_CLK_PLL3_PFD3 IMX6SX_CLK_PLL4_AUDIO
-			IMX6SX_CLK_PLL5_VIDEO IMX6SX_CLK_M4
+			IMX6SX_CLK_PLL5_VIDEO
 			IMX6SX_CLK_OCRAM IMX6SX_CLK_CAN1_SERIAL
 			IMX6SX_CLK_CAN1_IPG IMX6SX_CLK_CAN2_SERIAL
 			IMX6SX_CLK_CAN2_IPG IMX6SX_CLK_CANFD
-- 
1.7.5.4

