From 08fcb088f4209cf61d75f69beec2c3886842729c Mon Sep 17 00:00:00 2001
From: Robby Cai <R63905@freescale.com>
Date: Wed, 28 Aug 2013 17:40:52 +0800
Subject: [PATCH 0122/1074] ENGR00276832-8 ARM: dts: add epdc support

Add DTS for epdc on imx6 duallite and sololite.

Signed-off-by: Robby Cai <R63905@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6dl-sabresd.dts |    9 +++++++
 arch/arm/boot/dts/imx6dl.dtsi        |   32 +++++++++++++++++++++++++++
 arch/arm/boot/dts/imx6sl-evk.dts     |    9 +++++++
 arch/arm/boot/dts/imx6sl.dtsi        |   39 ++++++++++++++++++++++++++++++++++
 4 files changed, 89 insertions(+), 0 deletions(-)

diff --git a/arch/arm/boot/dts/imx6dl-sabresd.dts b/arch/arm/boot/dts/imx6dl-sabresd.dts
index 1303157..76d729b 100644
--- a/arch/arm/boot/dts/imx6dl-sabresd.dts
+++ b/arch/arm/boot/dts/imx6dl-sabresd.dts
@@ -16,6 +16,15 @@
 	compatible = "fsl,imx6dl-sabresd", "fsl,imx6dl";
 };
 
+&epdc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_epdc_0>;
+	V3P3_supply = <&V3P3_reg>;
+	VCOM_supply = <&VCOM_reg>;
+	DISPLAY_supply = <&DISPLAY_reg>;
+	status = "okay";
+};
+
 &ldb {
 	ipu_id = <0>;
 	sec_ipu_id = <0>;
diff --git a/arch/arm/boot/dts/imx6dl.dtsi b/arch/arm/boot/dts/imx6dl.dtsi
index 16b14b1..b177fdc 100644
--- a/arch/arm/boot/dts/imx6dl.dtsi
+++ b/arch/arm/boot/dts/imx6dl.dtsi
@@ -89,8 +89,11 @@
 			};
 
 			epdc: epdc@020f4000 {
+				compatible = "fsl,imx6dl-epdc";
 				reg = <0x020f4000 0x4000>;
 				interrupts = <0 97 0x04>;
+				clocks = <&clks 133>, <&clks 137>;
+				clock-names = "epdc_axi", "epdc_pix";
 			};
 
 			lcdif: lcdif@020f8000 {
@@ -138,3 +141,32 @@
 		crtcs = <&ipu1 0>, <&ipu1 1>;
 	};
 };
+
+&iomuxc {
+	epdc {
+		pinctrl_epdc_0: epdcgrp-0 {
+			fsl,pins = <
+				MX6QDL_PAD_EIM_A16__EPDC_DATA00	   0x80000000
+				MX6QDL_PAD_EIM_DA10__EPDC_DATA01   0x80000000
+				MX6QDL_PAD_EIM_DA12__EPDC_DATA02   0x80000000
+				MX6QDL_PAD_EIM_DA11__EPDC_DATA03   0x80000000
+				MX6QDL_PAD_EIM_LBA__EPDC_DATA04	   0x80000000
+				MX6QDL_PAD_EIM_EB2__EPDC_DATA05	   0x80000000
+				MX6QDL_PAD_EIM_CS0__EPDC_DATA06	   0x80000000
+				MX6QDL_PAD_EIM_RW__EPDC_DATA07	   0x80000000
+				MX6QDL_PAD_EIM_A21__EPDC_GDCLK	   0x80000000
+				MX6QDL_PAD_EIM_A22__EPDC_GDSP	   0x80000000
+				MX6QDL_PAD_EIM_A23__EPDC_GDOE	   0x80000000
+				MX6QDL_PAD_EIM_A24__EPDC_GDRL	   0x80000000
+				MX6QDL_PAD_EIM_D31__EPDC_SDCLK_P   0x80000000
+				MX6QDL_PAD_EIM_D27__EPDC_SDOE	   0x80000000
+				MX6QDL_PAD_EIM_DA1__EPDC_SDLE	   0x80000000
+				MX6QDL_PAD_EIM_EB1__EPDC_SDSHR	   0x80000000
+				MX6QDL_PAD_EIM_DA2__EPDC_BDR0	   0x80000000
+				MX6QDL_PAD_EIM_DA4__EPDC_SDCE0	   0x80000000
+				MX6QDL_PAD_EIM_DA5__EPDC_SDCE1	   0x80000000
+				MX6QDL_PAD_EIM_DA6__EPDC_SDCE2	   0x80000000
+			>;
+		};
+	};
+};
diff --git a/arch/arm/boot/dts/imx6sl-evk.dts b/arch/arm/boot/dts/imx6sl-evk.dts
index ae1be42..7241823 100644
--- a/arch/arm/boot/dts/imx6sl-evk.dts
+++ b/arch/arm/boot/dts/imx6sl-evk.dts
@@ -71,6 +71,15 @@
 	};
 };
 
+&epdc {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_epdc_0>;
+	V3P3_supply = <&V3P3_reg>;
+	VCOM_supply = <&VCOM_reg>;
+	DISPLAY_supply = <&DISPLAY_reg>;
+	status = "okay";
+};
+
 &fec {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_fec_1>;
diff --git a/arch/arm/boot/dts/imx6sl.dtsi b/arch/arm/boot/dts/imx6sl.dtsi
index c32a3e5..76b182f 100644
--- a/arch/arm/boot/dts/imx6sl.dtsi
+++ b/arch/arm/boot/dts/imx6sl.dtsi
@@ -565,6 +565,41 @@
 					};
 				};
 
+				epdc {
+					pinctrl_epdc_0: epdcgrp-0 {
+						fsl,pins = <
+							MX6SL_PAD_EPDC_D0__EPDC_DATA00	0x80000000
+							MX6SL_PAD_EPDC_D1__EPDC_DATA01	0x80000000
+							MX6SL_PAD_EPDC_D2__EPDC_DATA02	0x80000000
+							MX6SL_PAD_EPDC_D3__EPDC_DATA03	0x80000000
+							MX6SL_PAD_EPDC_D4__EPDC_DATA04	0x80000000
+							MX6SL_PAD_EPDC_D5__EPDC_DATA05	0x80000000
+							MX6SL_PAD_EPDC_D6__EPDC_DATA06	0x80000000
+							MX6SL_PAD_EPDC_D7__EPDC_DATA07	0x80000000
+							MX6SL_PAD_EPDC_D8__EPDC_DATA08	0x80000000
+							MX6SL_PAD_EPDC_D9__EPDC_DATA09	0x80000000
+							MX6SL_PAD_EPDC_D10__EPDC_DATA10	0x80000000
+							MX6SL_PAD_EPDC_D11__EPDC_DATA11	0x80000000
+							MX6SL_PAD_EPDC_D12__EPDC_DATA12	0x80000000
+							MX6SL_PAD_EPDC_D13__EPDC_DATA13	0x80000000
+							MX6SL_PAD_EPDC_D14__EPDC_DATA14	0x80000000
+							MX6SL_PAD_EPDC_D15__EPDC_DATA15	0x80000000
+							MX6SL_PAD_EPDC_GDCLK__EPDC_GDCLK 0x80000000
+							MX6SL_PAD_EPDC_GDSP__EPDC_GDSP	 0x80000000
+							MX6SL_PAD_EPDC_GDOE__EPDC_GDOE	 0x80000000
+							MX6SL_PAD_EPDC_GDRL__EPDC_GDRL	 0x80000000
+							MX6SL_PAD_EPDC_SDCLK__EPDC_SDCLK_P 0x80000000
+							MX6SL_PAD_EPDC_SDOE__EPDC_SDOE	 0x80000000
+							MX6SL_PAD_EPDC_SDLE__EPDC_SDLE	 0x80000000
+							MX6SL_PAD_EPDC_SDSHR__EPDC_SDSHR 0x80000000
+							MX6SL_PAD_EPDC_BDR0__EPDC_BDR0	 0x80000000
+							MX6SL_PAD_EPDC_SDCE0__EPDC_SDCE0 0x80000000
+							MX6SL_PAD_EPDC_SDCE1__EPDC_SDCE1 0x80000000
+							MX6SL_PAD_EPDC_SDCE2__EPDC_SDCE2 0x80000000
+						>;
+					};
+				};
+
 				fec {
 					pinctrl_fec_1: fecgrp-1 {
 						fsl,pins = <
@@ -877,8 +912,12 @@
 			};
 
 			epdc: epdc@020f4000 {
+				compatible = "fsl,imx6sl-epdc", "fsl,imx6dl-epdc";
 				reg = <0x020f4000 0x4000>;
 				interrupts = <0 97 0x04>;
+				clocks = <&clks IMX6SL_CLK_EPDC_AXI>,
+					 <&clks IMX6SL_CLK_EPDC_PIX>;
+				clock-names = "epdc_axi", "epdc_pix";
 			};
 
 			lcdif: lcdif@020f8000 {
-- 
1.7.5.4

