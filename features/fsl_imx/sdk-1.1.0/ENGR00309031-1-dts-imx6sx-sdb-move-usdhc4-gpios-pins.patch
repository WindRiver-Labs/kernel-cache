From 109673348fcb15ea06d008fbfd488b051f797372 Mon Sep 17 00:00:00 2001
From: Dong Aisheng <b29396@freescale.com>
Date: Wed, 16 Apr 2014 16:29:45 +0800
Subject: [PATCH 0386/1074] ENGR00309031-1 dts: imx6sx-sdb: move usdhc4 gpios
 pins out of hog group

For imx6sx sdb board, the eMMC interface and uSDHC4 BOOT card slot are shared
and the eMMC chip is DNP by default.
If burn the eMMC chip onto the board and do hw rework to enable eMMC signals,
the cd-gpio and wp-gpios will be reused as eMMC DATA signals.
So we'd better move this two gpio pin out of hog group for easy disable
this gpio setting in another dts.

It's required for the next patch which adds the eMMC support in another
dts file.

Signed-off-by: Dong Aisheng <b29396@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/boot/dts/imx6sx-sdb.dts |   14 ++++++++++----
 1 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/arch/arm/boot/dts/imx6sx-sdb.dts b/arch/arm/boot/dts/imx6sx-sdb.dts
index 27aa03c..37edbcd 100644
--- a/arch/arm/boot/dts/imx6sx-sdb.dts
+++ b/arch/arm/boot/dts/imx6sx-sdb.dts
@@ -356,6 +356,15 @@
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
 
+	usdhc4 {
+		pinctrl_usdhc4_gpios: usdhc4-gpios {
+			fsl,pins = <
+				MX6SX_PAD_SD4_DATA7__GPIO6_IO_21 0x17059
+				MX6SX_PAD_SD4_DATA6__GPIO6_IO_20 0x17059
+			>;
+		};
+	};
+
 	hog {
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
@@ -365,8 +374,6 @@
 				MX6SX_PAD_KEY_COL0__GPIO2_IO_10	0x17059
 				MX6SX_PAD_KEY_ROW0__GPIO2_IO_15	0x17059
 				MX6SX_PAD_KEY_COL1__GPIO2_IO_11	0x17059
-				MX6SX_PAD_SD4_DATA7__GPIO6_IO_21 0x17059
-				MX6SX_PAD_SD4_DATA6__GPIO6_IO_20 0x17059
 				MX6SX_PAD_SD1_DATA0__GPIO6_IO_2 0x17059
 				MX6SX_PAD_QSPI1B_DATA1__GPIO4_IO_25 0x17059
 				MX6SX_PAD_QSPI1B_DATA2__GPIO4_IO_26 0x17059
@@ -449,8 +456,7 @@
 
 &usdhc4 {
 	pinctrl-names = "default";
-	pinctrl-0 = <&pinctrl_usdhc4_2>;
-	bus-width = <8>;
+	pinctrl-0 = <&pinctrl_usdhc4_2 &pinctrl_usdhc4_gpios>;
 	cd-gpios = <&gpio6 21 0>;
 	wp-gpios = <&gpio6 20 0>;
 	no-1-8-v;
-- 
1.7.5.4

