From 3bd3d3893cd08dd589dfc98853ab9bc68da0e478 Mon Sep 17 00:00:00 2001
From: Liu Ying <Ying.Liu@freescale.com>
Date: Tue, 18 Feb 2014 12:49:32 +0800
Subject: [PATCH 0270/1074] ENGR00298052-7 ARM: imx6q: remove function
 imx6q_lvds_cabc_init()

This patch removes the function imx6q_lvds_cabc_init() from the
machine layer since we have a dedicated Hannstar CABC driver to
control the CABC feature.

Signed-off-by: Liu Ying <Ying.Liu@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 arch/arm/mach-imx/mach-imx6q.c |   33 ---------------------------------
 1 files changed, 0 insertions(+), 33 deletions(-)

diff --git a/arch/arm/mach-imx/mach-imx6q.c b/arch/arm/mach-imx/mach-imx6q.c
index 449f7c4..0d6f056 100644
--- a/arch/arm/mach-imx/mach-imx6q.c
+++ b/arch/arm/mach-imx/mach-imx6q.c
@@ -234,38 +234,6 @@ static void __init imx6q_csi_mux_init(void)
 	}
 }
 
-/*
- * Disable Hannstar LVDS panel CABC function.
- * This function turns the panel's backlight density automatically
- * according to the content shown on the panel which may cause
- * annoying unstable backlight issue.
- */
-static void __init imx6q_lvds_cabc_init(void)
-{
-	struct device_node *np = NULL;
-	int ret, lvds0_gpio, lvds1_gpio;
-
-	np = of_find_node_by_name(NULL, "lvds_cabc_ctrl");
-	if (!np)
-		return;
-
-	lvds0_gpio = of_get_named_gpio(np, "lvds0-gpios", 0);
-	if (gpio_is_valid(lvds0_gpio)) {
-		ret = gpio_request_one(lvds0_gpio, GPIOF_OUT_INIT_LOW,
-				"LVDS0 CABC enable");
-		if (ret)
-			pr_warn("failed to request LVDS0 CABC gpio\n");
-	}
-
-	lvds1_gpio = of_get_named_gpio(np, "lvds1-gpios", 0);
-	if (gpio_is_valid(lvds1_gpio)) {
-		ret = gpio_request_one(lvds1_gpio, GPIOF_OUT_INIT_LOW,
-				"LVDS1 CABC enable");
-		if (ret)
-			pr_warn("failed to request LVDS1 CABC gpio\n");
-	}
-}
-
 #define OCOTP_MACn(n)	(0x00000620 + (n) * 0x10)
 void __init imx6_enet_mac_init(const char *compatible)
 {
@@ -351,7 +319,6 @@ static void __init imx6q_init_machine(void)
 	imx_anatop_init();
 	imx6q_pm_init();
 	imx6q_csi_mux_init();
-	imx6q_lvds_cabc_init();
 }
 
 #define OCOTP_CFG3			0x440
-- 
1.7.5.4

