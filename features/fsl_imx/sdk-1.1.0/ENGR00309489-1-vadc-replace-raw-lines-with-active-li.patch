From 3b5f6afd9adf3cb37183dfdccc521b2b6b17275a Mon Sep 17 00:00:00 2001
From: Sandor Yu <R01008@freescale.com>
Date: Mon, 21 Apr 2014 16:38:03 +0800
Subject: [PATCH 0813/1074] ENGR00309489-1 vadc: replace raw lines with active
 lines

Replace raw lines with active lines.
return active lines to v4l2 capture driver.
For csi capture driver, the capture size is setting to
active lines and don't care raw lines.

Signed-off-by: Sandor Yu <R01008@freescale.com>
[Original patch taken from git://git.freescale.com/imx/linux-2.6-imx.git]
Signed-off-by: Biyao Zhai <biyao.zhai@windriver.com>
---
 drivers/media/platform/mxc/capture/mxc_vadc.c |    8 ++++----
 1 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/drivers/media/platform/mxc/capture/mxc_vadc.c b/drivers/media/platform/mxc/capture/mxc_vadc.c
index 7524f10..1c58d10 100644
--- a/drivers/media/platform/mxc/capture/mxc_vadc.c
+++ b/drivers/media/platform/mxc/capture/mxc_vadc.c
@@ -459,8 +459,8 @@ static void vadc_get_std(struct vadc_data *vadc, v4l2_std_id *std)
 	if (*std != vadc->std_id) {
 		video_idx = idx;
 		vadc->std_id = *std;
-		vadc->sen.pix.width = video_fmts[video_idx].raw_width;
-		vadc->sen.pix.height = video_fmts[video_idx].raw_height;
+		vadc->sen.pix.width = video_fmts[video_idx].active_width;
+		vadc->sen.pix.height = video_fmts[video_idx].active_height;
 	}
 }
 
@@ -843,8 +843,8 @@ static int vadc_probe(struct platform_device *pdev)
 	vadc->sen.streamcap.timeperframe.numerator = 1;
 	vadc->std_id = V4L2_STD_ALL;
 	video_idx = VADC_NTSC;
-	vadc->sen.pix.width = video_fmts[video_idx].raw_width;
-	vadc->sen.pix.height = video_fmts[video_idx].raw_height;
+	vadc->sen.pix.width = video_fmts[video_idx].active_width;
+	vadc->sen.pix.height = video_fmts[video_idx].active_height;
 	vadc->sen.pix.pixelformat = V4L2_PIX_FMT_YUV444;  /* YUV444 */
 	vadc->sen.pix.priv = 1;  /* 1 is used to indicate TV in */
 	vadc->sen.on = true;
-- 
1.7.5.4

