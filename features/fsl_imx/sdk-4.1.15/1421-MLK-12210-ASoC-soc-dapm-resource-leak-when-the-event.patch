From 717066d81cea600773637c96c5fa9c3693dc551d Mon Sep 17 00:00:00 2001
From: Zidan Wang <zidan.wang@freescale.com>
Date: Tue, 12 Jan 2016 11:32:13 +0800
Subject: [PATCH 1421/1691] MLK-12210 ASoC: soc-dapm: resource leak when the
 event is unknown

commit 717066d81cea600773637c96c5fa9c3693dc551d from
git://git.freescale.com/imx/linux-2.6-imx.git imx_4.1.15_1.0.0_ga

resource leak when the event is unknown. Reported by coverity.

Signed-off-by: Zidan Wang <zidan.wang@freescale.com>
---
 sound/soc/soc-dapm.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/sound/soc/soc-dapm.c b/sound/soc/soc-dapm.c
index b6c12dc..1245958 100644
--- a/sound/soc/soc-dapm.c
+++ b/sound/soc/soc-dapm.c
@@ -3311,7 +3311,8 @@ static int snd_soc_dai_link_event(struct snd_soc_dapm_widget *w,
 
 	default:
 		WARN(1, "Unknown event %d\n", event);
-		return -EINVAL;
+		ret = -EINVAL;
+		goto out;
 	}
 
 out:
-- 
1.9.1

