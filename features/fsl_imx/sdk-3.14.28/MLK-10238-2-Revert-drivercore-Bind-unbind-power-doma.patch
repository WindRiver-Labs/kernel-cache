From c34542979f67a4db6118a79634c5caf7f1aa6fc5 Mon Sep 17 00:00:00 2001
From: Robin Gong <b38343@freescale.com>
Date: Mon, 9 Feb 2015 16:54:52 +0800
Subject: [PATCH 1505/1543] MLK-10238-2: Revert "drivercore: Bind/unbind power
 domain on probe/remove"

commit 9d2fe13e77194c7163bd3954cc6734aa21fc66a9 from
git://git.freescale.com/imx/linux-2.6-imx.git

This reverts commit ef2c90dea437f8955b7dc089ff1579c2aa06a6b7.
Signed-off-by: Robin Gong <b38343@freescale.com>

(cherry picked from commit e2c50506fee918f95425babbccc7ecf28d3d2f87)
---
 drivers/base/dd.c |    9 +--------
 1 files changed, 1 insertions(+), 8 deletions(-)

diff --git a/drivers/base/dd.c b/drivers/base/dd.c
index 1876bd3..c2431ba 100644
--- a/drivers/base/dd.c
+++ b/drivers/base/dd.c
@@ -23,7 +23,6 @@
 #include <linux/kthread.h>
 #include <linux/wait.h>
 #include <linux/async.h>
-#include <linux/pm_domain.h>
 #include <linux/pm_runtime.h>
 #include <linux/pinctrl/devinfo.h>
 
@@ -288,11 +287,6 @@ static int really_probe(struct device *dev, struct device_driver *drv)
 
 	dev->driver = drv;
 
-	/* If using genpd, bind power domain now before probing */
-	ret = genpd_bind_domain(dev);
-	if (ret)
-		goto probe_failed;
-
 	/* If using pinctrl, bind pins now before probing */
 	ret = pinctrl_bind_pins(dev);
 	if (ret)
@@ -323,7 +317,6 @@ static int really_probe(struct device *dev, struct device_driver *drv)
 probe_failed:
 	devres_release_all(dev);
 	driver_sysfs_remove(dev);
-	genpd_unbind_domain(dev);
 	dev->driver = NULL;
 	dev_set_drvdata(dev, NULL);
 
@@ -537,7 +530,7 @@ static void __device_release_driver(struct device *dev)
 			blocking_notifier_call_chain(&dev->bus->p->bus_notifier,
 						     BUS_NOTIFY_UNBOUND_DRIVER,
 						     dev);
-		genpd_unbind_domain(dev);
+
 	}
 }
 
-- 
1.7.5.4

