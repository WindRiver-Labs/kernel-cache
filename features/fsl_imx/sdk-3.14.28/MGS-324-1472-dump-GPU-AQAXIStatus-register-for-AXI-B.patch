From edbb92f32bf46874a2354b816039aec539383f48 Mon Sep 17 00:00:00 2001
From: Xianzhong <b07117@freescale.com>
Date: Wed, 26 Nov 2014 01:34:42 +0800
Subject: [PATCH 1016/1543] MGS-324 [#1472] dump GPU AQAXIStatus register for
 AXI BUS ERROR

commit 84ed784575c27ae5d0f5d6f81f8c3545c0619400 from
git://git.freescale.com/imx/linux-2.6-imx.git

AQAXiStatus register info is helpful to debug AXI BUS ERROR,
need dump this GPU register when AXI BUS ERROR happen.

Date: Dec 03, 2014
Signed-off-by: Xianzhong <b07117@freescale.com>
Acked-by: Jason Liu
---
 .../mxc/gpu-viv/hal/kernel/gc_hal_kernel_event.c   |    5 ++++-
 1 files changed, 4 insertions(+), 1 deletions(-)

diff --git a/drivers/mxc/gpu-viv/hal/kernel/gc_hal_kernel_event.c b/drivers/mxc/gpu-viv/hal/kernel/gc_hal_kernel_event.c
index 1c63007..f160ae9 100644
--- a/drivers/mxc/gpu-viv/hal/kernel/gc_hal_kernel_event.c
+++ b/drivers/mxc/gpu-viv/hal/kernel/gc_hal_kernel_event.c
@@ -2448,7 +2448,10 @@ gckEVENT_Notify(
 
         if (pending & 0x80000000)
         {
-            gcmkPRINT("AXI BUS ERROR");
+            gctUINT32 AQAxiStatus = 0;
+            gckOS_ReadRegisterEx(Event->os, Event->kernel->hardware->core, 0xC, &AQAxiStatus);
+
+            gcmkPRINT("GPU[%d]: AXI BUS ERROR, AQAxiStatus=0x%x\n", Event->kernel->hardware->core, AQAxiStatus);
             pending &= 0x7FFFFFFF;
         }
 
-- 
1.7.5.4

