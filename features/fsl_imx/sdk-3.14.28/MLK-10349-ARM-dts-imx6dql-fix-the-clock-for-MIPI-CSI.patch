From ea2f2adab4b502c33f45bf3062d7571324fbfd3a Mon Sep 17 00:00:00 2001
From: Robby Cai <r63905@freescale.com>
Date: Sat, 28 Feb 2015 18:48:21 +0800
Subject: [PATCH 1529/1543] MLK-10349 ARM: dts: imx6dql: fix the clock for
 MIPI CSI2

commit 9dd1ed06c9160e283dd1bf852ed8dd2368ab33b0 from
git://git.freescale.com/imx/linux-2.6-imx.git

Fix the clock index for cfg clock and use MACRO instead of hard-codes.

This patch fixes the following issue.
-----------------------------------------------------------
root@imx6qdlsolo:~# /unit_tests/mxc_v4l2_capture.out -d /dev/video1 1.yuv
in_width = 176, in_height = 144
out_width = 176, out_height = 144
top = 0, left = 0
mipi csi2 can not receive sensor clk!
...

ERROR: v4l2 capture: mxc_v4l_dqueue timeout enc_counter 0
VIDIOC_DQBUF failed.ERROR: v4l2 capture: VIDIOC_QBUF: buffer already queued
-----------------------------------------------------------

Signed-off-by: Robby Cai <r63905@freescale.com>
(cherry picked from commit 6e4ee449de591d3cfb93575ca639ca32944832bc)
---
 arch/arm/boot/dts/imx6qdl.dtsi |    4 +++-
 1 files changed, 3 insertions(+), 1 deletions(-)

diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index 949acea..7fbf919 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -1094,7 +1094,9 @@
 				compatible = "fsl,imx6q-mipi-csi2";
 				reg = <0x021dc000 0x4000>;
 				interrupts = <0 100 0x04>, <0 101 0x04>;
-				clocks = <&clks 138>, <&clks 53>, <&clks 204>;
+				clocks = <&clks IMX6QDL_CLK_HSI_TX>,
+					 <&clks IMX6QDL_CLK_EMI_SEL>,
+					 <&clks IMX6QDL_CLK_VIDEO_27M>;
 				/* Note: clks 138 is hsi_tx, however, the dphy_c
 				 * hsi_tx and pll_refclk use the same clk gate.
 				 * In current clk driver, open/close clk gate do
-- 
1.7.5.4

