From d0eede29d8f5c3918552ae31e5c86d8dd5fc26b4 Mon Sep 17 00:00:00 2001
From: Ioana Radulescu <ruxandra.radulescu@freescale.com>
Date: Fri, 3 Jul 2015 18:58:46 +0300
Subject: [PATCH 146/214] fsl-dpio: Change dequeue command type

For now CDANs don't work with priority precedence.

Signed-off-by: Ioana Radulescu <ruxandra.radulescu@freescale.com>
[Original patch extracted from FSL LS2085 SDK EAR5.0,
Layerscape2-SDK-SOURCE-20150828-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/staging/fsl-mc/bus/dpio/dpio_service.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/staging/fsl-mc/bus/dpio/dpio_service.c b/drivers/staging/fsl-mc/bus/dpio/dpio_service.c
index 0e39c7c..a552cfb 100644
--- a/drivers/staging/fsl-mc/bus/dpio/dpio_service.c
+++ b/drivers/staging/fsl-mc/bus/dpio/dpio_service.c
@@ -587,7 +587,7 @@ int dpaa_io_service_pull_channel(struct dpaa_io *d, uint32_t channelid,
 	qbman_pull_desc_clear(&pd);
 	qbman_pull_desc_set_storage(&pd, s->vaddr, s->paddr, 1);
 	qbman_pull_desc_set_numframes(&pd, s->max);
-	qbman_pull_desc_set_channel(&pd, channelid, qbman_pull_type_prio);
+	qbman_pull_desc_set_channel(&pd, channelid, qbman_pull_type_active);
 	d = _service_select(d);
 	if (!d)
 		return -ENODEV;
-- 
2.5.3

