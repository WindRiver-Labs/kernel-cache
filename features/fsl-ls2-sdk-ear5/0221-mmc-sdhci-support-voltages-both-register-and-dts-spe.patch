From f26bf5b09c9d3a482d91ae357a8f04aea1241876 Mon Sep 17 00:00:00 2001
From: Yangbo Lu <yangbo.lu@freescale.com>
Date: Thu, 23 Apr 2015 10:32:57 +0800
Subject: [PATCH 221/222] mmc: sdhci: support voltages both register and dts
 specify

Signed-off-by: Yangbo Lu <yangbo.lu@freescale.com>
Change-Id: Ifcd24c129eb621d61df3c6c02013acd748adb29f
Reviewed-on: http://git.am.freescale.net:8181/35448
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Xiaobo Xie <X.Xie@freescale.com>
Reviewed-by: Stuart Yoder <stuart.yoder@freescale.com>
[Original patch extracted from FSL LS2085 SDK EAR5.0,
Layerscape2-SDK-SOURCE-20150828-yocto.iso, fix to apply to WRL]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/mmc/host/sdhci.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/mmc/host/sdhci.c b/drivers/mmc/host/sdhci.c
index cbaf3df..31aa017 100644
--- a/drivers/mmc/host/sdhci.c
+++ b/drivers/mmc/host/sdhci.c
@@ -3309,7 +3309,7 @@ int sdhci_add_host(struct sdhci_host *host)
 
 	/* If OCR set by external regulators, give it highest prio. */
 	if (mmc->ocr_avail)
-		ocr_avail = mmc->ocr_avail;
+		ocr_avail |= mmc->ocr_avail;
 
 	mmc->ocr_avail = ocr_avail;
 	mmc->ocr_avail_sdio = ocr_avail;
-- 
2.0.2

