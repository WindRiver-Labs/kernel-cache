From 37d6d345b9d4b114ed00304cd20103ac99b7ddf8 Mon Sep 17 00:00:00 2001
From: Jaiprakash Singh <b44839@freescale.com>
Date: Mon, 4 May 2015 15:34:47 +0530
Subject: [PATCH 014/214] dts/ls2085a: Add ifc fpga node in DTS for RDB and QDS

Binding updated to avoid checkpatch warnings

Signed-off-by: Jaiprakash Singh <b44839@freescale.com>
Change-Id: I00246eb7ce06edf89f75512f3f03067e0e139320
Reviewed-on: http://git.am.freescale.net:8181/35698
Reviewed-by: Scott Wood <scottwood@freescale.com>
Reviewed-by: Stuart Yoder <stuart.yoder@freescale.com>
Tested-by: Stuart Yoder <stuart.yoder@freescale.com>
[Original patch extracted from FSL LS2085 SDK EAR5.0,
Layerscape2-SDK-SOURCE-20150828-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 .../devicetree/bindings/arm/fsl/board.txt          | 29 ++++++++++++++++++++++
 arch/arm64/boot/dts/freescale/fsl-ls2085a-qds.dts  | 19 ++++++++------
 arch/arm64/boot/dts/freescale/fsl-ls2085a-rdb.dts  | 19 ++++++++------
 3 files changed, 53 insertions(+), 14 deletions(-)
 create mode 100644 Documentation/devicetree/bindings/arm/fsl/board.txt

diff --git a/Documentation/devicetree/bindings/arm/fsl/board.txt b/Documentation/devicetree/bindings/arm/fsl/board.txt
new file mode 100644
index 0000000..1c56c1a
--- /dev/null
+++ b/Documentation/devicetree/bindings/arm/fsl/board.txt
@@ -0,0 +1,29 @@
+Freescale Reference Board Bindings
+
+This document describes device tree bindings for various devices that
+exist on some Freescale reference boards.
+
+* Freescale on-board FPGA connected to IFC controller
+
+Some Freescale boards like LS2085AQDS/LS2085ARDB have an on-board FPGA/CPLD
+connected to the IFC controller.
+
+Required properties:
+- compatible: Should be a board-specific string followed by a string
+  indicating the type of FPGA.  Example:
+	"fsl,ls2085a-qds-qixis", "fsl,fpga-qixis"
+	"fsl,ls2085a-rdb-qixis", "fsl,fpga-qixis"
+- reg: The register set for the device
+
+Example:
+	&ifc {
+		status = "okay";
+		#address-cells = <2>;
+		#size-cells <1>;
+		ranges = <0x3 0x0 0x5 0x20000000 0x00010000>;
+
+		cpld@3,0 {
+			compatible = "fsl,ls2085a-qds-qixis", "fsl,fpga-qixis";
+			reg = <0x3 0 0x10000>;
+		};
+	};
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2085a-qds.dts b/arch/arm64/boot/dts/freescale/fsl-ls2085a-qds.dts
index cc3212b..76452d4 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2085a-qds.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2085a-qds.dts
@@ -27,17 +27,22 @@
 	status = "okay";
 	#address-cells = <2>;
 	#size-cells = <1>;
-	ranges = <0x0 0x0 0x5 0x80000000 0x08000000>;
+	ranges = <0x0 0x0 0x5 0x80000000 0x08000000
+		  0x3 0x0 0x5 0x20000000 0x00010000>;
 
 	nor@0,0 {
-	      #address-cells = <1>;
-	      #size-cells = <1>;
-	      compatible = "cfi-flash";
-	      reg = <0x0 0x0 0x8000000>;
-	      bank-width = <2>;
-	      device-width = <1>;
+	     #address-cells = <1>;
+	     #size-cells = <1>;
+	     compatible = "cfi-flash";
+	     reg = <0x0 0x0 0x8000000>;
+	     bank-width = <2>;
+	     device-width = <1>;
 	};
 
+	cpld@3,0 {
+	     reg = <0x3 0x0 0x10000>;
+	     compatible = "fsl,ls2085a-qds-qixis", "fsl,fpga-qixis";
+	};
 };
 
 &ftm0 {
diff --git a/arch/arm64/boot/dts/freescale/fsl-ls2085a-rdb.dts b/arch/arm64/boot/dts/freescale/fsl-ls2085a-rdb.dts
index 6656db0..8d9bff4 100644
--- a/arch/arm64/boot/dts/freescale/fsl-ls2085a-rdb.dts
+++ b/arch/arm64/boot/dts/freescale/fsl-ls2085a-rdb.dts
@@ -27,17 +27,22 @@
 	status = "okay";
 	#address-cells = <2>;
 	#size-cells = <1>;
-	ranges = <0x0 0x0 0x5 0x80000000 0x08000000>;
+	ranges = <0x0 0x0 0x5 0x80000000 0x08000000
+		  0x3 0x0 0x5 0x20000000 0x00010000>;
 
 	nor@0,0 {
-	      #address-cells = <1>;
-	      #size-cells = <1>;
-	      compatible = "cfi-flash";
-	      reg = <0x0 0x0 0x8000000>;
-	      bank-width = <2>;
-	      device-width = <1>;
+	     #address-cells = <1>;
+	     #size-cells = <1>;
+	     compatible = "cfi-flash";
+	     reg = <0x0 0x0 0x8000000>;
+	     bank-width = <2>;
+	     device-width = <1>;
 	};
 
+	cpld@3,0 {
+	     reg = <0x3 0x0 0x10000>;
+	     compatible = "fsl,ls2085a-qds-qixis", "fsl,fpga-qixis";
+	};
 };
 
 &ftm0 {
-- 
2.5.3

