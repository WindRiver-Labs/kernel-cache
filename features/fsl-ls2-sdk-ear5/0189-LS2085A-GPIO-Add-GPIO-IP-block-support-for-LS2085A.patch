From 85705eb0ba76ba657e61900a5af70e99de0bfdee Mon Sep 17 00:00:00 2001
From: Liu Gang <Gang.Liu@freescale.com>
Date: Mon, 27 Apr 2015 15:24:01 +0800
Subject: [PATCH 189/214] LS2085A/GPIO: Add GPIO IP block support for LS2085A

LS2085A has the same GPIO IP block as GPIO on PowerPC
and LS1021A. So just update the drivers/gpio/gpio-mpc8xxx.c
to support the LS2085A GPIO IP block.

Signed-off-by: Liu Gang <Gang.Liu@freescale.com>
Change-Id: Ib302ce671b5301ce09cbc304388e0c43723781cc
Reviewed-on: http://git.am.freescale.net:8181/35673
Tested-by: Review Code-CDREVIEW <CDREVIEW@freescale.com>
Reviewed-by: Stuart Yoder <stuart.yoder@freescale.com>
[Original patch extracted from FSL LS2085 SDK EAR5.0,
Layerscape2-SDK-SOURCE-20150828-yocto.iso]
Signed-off-by: Jiang Lu <lu.jiang@windriver.com>
---
 drivers/gpio/Kconfig        | 6 +++---
 drivers/gpio/gpio-mpc8xxx.c | 1 +
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/drivers/gpio/Kconfig b/drivers/gpio/Kconfig
index caefe80..d7721a2 100644
--- a/drivers/gpio/Kconfig
+++ b/drivers/gpio/Kconfig
@@ -265,12 +265,12 @@ config GPIO_MPC5200
 	depends on PPC_MPC52xx
 
 config GPIO_MPC8XXX
-	bool "MPC512x/MPC8xxx GPIO support"
+	bool "MPC512x/MPC8xxx/Layerscape GPIO support"
 	depends on PPC_MPC512x || PPC_MPC831x || PPC_MPC834x || PPC_MPC837x || \
-		   FSL_SOC_BOOKE || PPC_86xx
+		   FSL_SOC_BOOKE || PPC_86xx || SOC_LS1021A || ARCH_FSL_LS2085A
 	help
 	  Say Y here if you're going to use hardware that connects to the
-	  MPC512x/831x/834x/837x/8572/8610 GPIOs.
+	  MPC512x/831x/834x/837x/8572/8610/LS1021A/LS2085A GPIOs.
 
 config GPIO_MSM_V2
 	tristate "Qualcomm MSM GPIO v2"
diff --git a/drivers/gpio/gpio-mpc8xxx.c b/drivers/gpio/gpio-mpc8xxx.c
index 55a019d..be4954a 100644
--- a/drivers/gpio/gpio-mpc8xxx.c
+++ b/drivers/gpio/gpio-mpc8xxx.c
@@ -354,6 +354,7 @@ static struct of_device_id mpc8xxx_gpio_ids[] = {
 	{ .compatible = "fsl,pq3-gpio",     },
 	{ .compatible = "fsl,qoriq-gpio",   },
 	{ .compatible = "fsl,ls1021a-gpio",   },
+	{ .compatible = "fsl,ls2085a-gpio",   },
 	{}
 };
 
-- 
2.5.3

